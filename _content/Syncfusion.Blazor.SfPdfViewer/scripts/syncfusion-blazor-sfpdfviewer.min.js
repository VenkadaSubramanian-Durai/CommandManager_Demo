/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./single-sfpdfviewer-bundle.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./modules/base.js":
/*!*************************!*\
  !*** ./modules/base.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
window.sf = window.sf || {};
window.sf.base = function (exports) {
  'use strict';

  var instances = 'ej2_instances';
  var uid = 0;
  var isBlazorPlatform = false;
  /**
   * Function to check whether the platform is blazor or not.
   *
   * @returns {void} result
   * @private
   */
  function disableBlazorMode() {
    isBlazorPlatform = false;
  }
  /**
   * Create Instance from constructor function with desired parameters.
   *
   * @param {Function} classFunction - Class function to which need to create instance
   * @param {any[]} params - Parameters need to passed while creating instance
   * @returns {any} ?
   * @private
   */
  // eslint-disable-next-line
  function createInstance(classFunction, params) {
    var arrayParam = params;
    arrayParam.unshift(undefined);
    return new (Function.prototype.bind.apply(classFunction, arrayParam))();
  }
  /**
   * To run a callback function immediately after the browser has completed other operations.
   *
   * @param {Function} handler - callback function to be triggered.
   * @returns {Function} ?
   * @private
   */
  function setImmediate(handler) {
    var unbind;
    // eslint-disable-next-line
    var num = new Uint16Array(5);
    var intCrypto = window.msCrypto || window.crypto;
    intCrypto.getRandomValues(num);
    var secret = 'ej2' + combineArray(num);
    // eslint-disable-next-line
    var messageHandler = function messageHandler(event) {
      if (event.source === window && typeof event.data === 'string' && event.data.length <= 32 && event.data === secret) {
        handler();
        unbind();
      }
    };
    window.addEventListener('message', messageHandler, false);
    window.postMessage(secret, '*');
    return unbind = function unbind() {
      window.removeEventListener('message', messageHandler);
      handler = messageHandler = secret = undefined;
    };
  }
  /**
   * To get nameSpace value from the desired object.
   *
   * @param {string} nameSpace - String value to the get the inner object
   * @param {any} obj - Object to get the inner object value.
   * @returns {any} ?
   * @private
   */
  // eslint-disable-next-line
  function getValue(nameSpace, obj) {
    // eslint-disable-next-line
    var value = obj;
    var splits = nameSpace.replace(/\[/g, '.').replace(/\]/g, '').split('.');
    for (var i = 0; i < splits.length && !isUndefined(value); i++) {
      value = value[splits[parseInt(i.toString(), 10)]];
    }
    return value;
  }
  /**
   * To set value for the nameSpace in desired object.
   *
   * @param {string} nameSpace - String value to the get the inner object
   * @param {any} value - Value that you need to set.
   * @param {any} obj - Object to get the inner object value.
   * @returns {any} ?
   * @private
   */
  // eslint-disable-next-line
  function setValue(nameSpace, value, obj) {
    var keys = nameSpace.replace(/\[/g, '.').replace(/\]/g, '').split('.');
    // eslint-disable-next-line
    var start = obj || {};
    // eslint-disable-next-line
    var fromObj = start;
    var i;
    var length = keys.length;
    var key;
    for (i = 0; i < length; i++) {
      key = keys[parseInt(i.toString(), 10)];
      if (i + 1 === length) {
        fromObj["" + key] = value === undefined ? {} : value;
      } else if (isNullOrUndefined(fromObj["" + key])) {
        fromObj["" + key] = {};
      }
      fromObj = fromObj["" + key];
    }
    return start;
  }
  /**
   * Delete an item from Object
   *
   * @param {any} obj - Object in which we need to delete an item.
   * @param {string} key - String value to the get the inner object
   * @returns {void} ?
   * @private
   */
  // eslint-disable-next-line
  function deleteObject(obj, key) {
    delete obj["" + key];
  }
  /**
   *@private
   */
  // eslint-disable-next-line
  var containerObject = typeof window !== 'undefined' ? window : {};
  /**
   * Check weather the given argument is only object.
   *
   * @param {any} obj - Object which is need to check.
   * @returns {boolean} ?
   * @private
   */
  // eslint-disable-next-line
  function isObject(obj) {
    var objCon = {};
    return !isNullOrUndefined(obj) && obj.constructor === objCon.constructor;
  }
  /**
   * To get enum value by giving the string.
   *
   * @param {any} enumObject - Enum object.
   * @param {string} enumValue - Enum value to be searched
   * @returns {any} ?
   * @private
   */
  // eslint-disable-next-line
  function getEnumValue(enumObject, enumValue) {
    // eslint-disable-next-line
    return enumObject[enumValue];
  }
  /**
   * Merge the source object into destination object.
   *
   * @param {any} source - source object which is going to merge with destination object
   * @param {any} destination - object need to be merged
   * @returns {void} ?
   * @private
   */
  function merge(source, destination) {
    if (!isNullOrUndefined(destination)) {
      var temrObj = source;
      var tempProp = destination;
      var keys = Object.keys(destination);
      var deepmerge = 'deepMerge';
      for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        if (!isNullOrUndefined(temrObj["" + deepmerge]) && temrObj["" + deepmerge].indexOf(key) !== -1 && (isObject(tempProp["" + key]) || Array.isArray(tempProp["" + key]))) {
          extend(temrObj["" + key], temrObj["" + key], tempProp["" + key], true);
        } else {
          temrObj["" + key] = tempProp["" + key];
        }
      }
    }
  }
  /**
   * Extend the two object with newer one.
   *
   * @param {any} copied - Resultant object after merged
   * @param {Object} first - First object need to merge
   * @param {Object} second - Second object need to merge
   * @param {boolean} deep ?
   * @returns {Object} ?
   * @private
   */
  function extend(copied, first, second, deep) {
    var result = copied && _typeof(copied) === 'object' ? copied : {};
    var length = arguments.length;
    if (deep) {
      length = length - 1;
    }
    var _loop_1 = function _loop_1(i) {
      // eslint-disable-next-line
      if (!arguments_1[i]) {
        return "continue";
      }
      // eslint-disable-next-line
      var obj1 = arguments_1[i];
      Object.keys(obj1).forEach(function (key) {
        var src = result["" + key];
        var copy = obj1["" + key];
        var clone;
        var isArrayChanged = Array.isArray(copy) && Array.isArray(src) && copy.length !== src.length;
        // eslint-disable-next-line
        var blazorEventExtend = isBlazor() ? !(src instanceof Event) && !isArrayChanged : true;
        if (deep && blazorEventExtend && (isObject(copy) || Array.isArray(copy))) {
          if (isObject(copy)) {
            clone = src ? src : {};
            // eslint-disable-next-line
            if (Array.isArray(clone) && clone.hasOwnProperty('isComplexArray')) {
              extend(clone, {}, copy, deep);
            } else {
              result["" + key] = extend(clone, {}, copy, deep);
            }
          } else {
            /* istanbul ignore next */
            clone = isBlazor() ? src && Object.keys(copy).length : src ? src : [];
            // eslint-disable-next-line
            result["" + key] = extend([], clone, copy, clone && clone.length || copy && copy.length);
          }
        } else {
          result["" + key] = copy;
        }
      });
    };
    var arguments_1 = arguments;
    for (var i = 1; i < length; i++) {
      _loop_1(i);
    }
    return result;
  }
  /**
   * To check whether the object is null or undefined.
   *
   * @param {Object} value - To check the object is null or undefined
   * @returns {boolean} ?
   * @private
   */
  function isNullOrUndefined(value) {
    return value === undefined || value === null;
  }
  /**
   * To check whether the object is undefined.
   *
   * @param {Object} value - To check the object is undefined
   * @returns {boolean} ?
   * @private
   */
  function isUndefined(value) {
    return 'undefined' === typeof value;
  }
  /**
   * To return the generated unique name
   *
   * @param {string} definedName - To concatenate the unique id to provided name
   * @returns {string} ?
   * @private
   */
  function getUniqueID(definedName) {
    return definedName + '_' + uid++;
  }
  /**
   * It limits the rate at which a function can fire. The function will fire only once every provided second instead of as quickly.
   *
   * @param {Function} eventFunction - Specifies the function to run when the event occurs
   * @param {number} delay - A number that specifies the milliseconds for function delay call option
   * @returns {Function} ?
   * @private
   */
  function debounce(eventFunction, delay) {
    // eslint-disable-next-line
    var out;
    return function () {
      var _this = this;
      // eslint-disable-next-line
      var args = arguments;
      var later = function later() {
        out = null;
        return eventFunction.apply(_this, args);
      };
      clearTimeout(out);
      out = setTimeout(later, delay);
    };
  }
  /**
   * To convert the object to string for query url
   *
   * @param  {Object} data ?
   * @returns {string} ?
   * @private
   */
  // eslint-disable-next-line
  function queryParams(data) {
    var array = [];
    var keys = Object.keys(data);
    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {
      var key = keys_2[_i];
      array.push(encodeURIComponent(key) + '=' + encodeURIComponent('' + data["" + key]));
    }
    return array.join('&');
  }
  /**
   * To check whether the given array contains object.
   *
   * @param {any} value - Specifies the T type array to be checked.
   * @returns {boolean} ?
   * @private
   */
  function isObjectArray(value) {
    var parser = Object.prototype.toString;
    if (parser.call(value) === '[object Array]') {
      if (parser.call(value[0]) === '[object Object]') {
        return true;
      }
    }
    return false;
  }
  /**
   * To check whether the  child element is descendant to parent element or parent and child are same element.
   *
   * @param {Element} child - Specifies the child element to compare with parent.
   * @param {Element} parent - Specifies the parent element.
   * @returns {boolean} ?
   * @private
   */
  function compareElementParent(child, parent) {
    var node = child;
    if (node === parent) {
      return true;
    } else if (node === document || !node) {
      return false;
    } else {
      return compareElementParent(node.parentNode, parent);
    }
  }
  /**
   * To throw custom error message.
   *
   * @param {string} message - Specifies the error message to be thrown.
   * @returns {void} ?
   * @private
   */
  function throwError(message) {
    try {
      throw new Error(message);
    } catch (e) {
      // eslint-disable-next-line
      throw e.message + '\n' + e.stack;
    }
  }
  /**
   * This function is used to print given element
   *
   * @param {Element} element - Specifies the print content element.
   * @param {Window} printWindow - Specifies the print window.
   * @returns {Window} ?
   * @private
   */
  function print(element, printWindow) {
    var div = document.createElement('div');
    var links = [].slice.call(document.getElementsByTagName('head')[0].querySelectorAll('base, link, style'));
    var blinks = [].slice.call(document.getElementsByTagName('body')[0].querySelectorAll('link, style'));
    if (blinks.length) {
      for (var l = 0, len = blinks.length; l < len; l++) {
        links.push(blinks[parseInt(l.toString(), 10)]);
      }
    }
    var reference = '';
    if (isNullOrUndefined(printWindow)) {
      printWindow = window.open('', 'print', 'height=452,width=1024,tabbar=no');
    }
    div.appendChild(element.cloneNode(true));
    for (var i = 0, len = links.length; i < len; i++) {
      reference += links[parseInt(i.toString(), 10)].outerHTML;
    }
    printWindow.document.write('<!DOCTYPE html> <html><head>' + reference + '</head><body>' + div.innerHTML + '<script> (function() { window.ready = true; })(); </script>' + '</body></html>');
    printWindow.document.close();
    printWindow.focus();
    // eslint-disable-next-line
    var interval = setInterval(function () {
      if (printWindow.ready) {
        printWindow.print();
        printWindow.close();
        clearInterval(interval);
      }
    }, 500);
    return printWindow;
  }
  /**
   * Function to normalize the units applied to the element.
   *
   * @param {number|string} value ?
   * @returns {string} result
   * @private
   */
  function formatUnit(value) {
    var result = value + '';
    if (result.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)) {
      return result;
    }
    return result + 'px';
  }
  /**
   * Function to check whether the platform is blazor or not.
   *
   * @returns {void} result
   * @private
   */
  function enableBlazorMode() {
    isBlazorPlatform = true;
  }
  /**
   * Function to check whether the platform is blazor or not.
   *
   * @returns {boolean} result
   * @private
   */
  function isBlazor() {
    return isBlazorPlatform;
  }
  /**
   * Function to convert xPath to DOM element in blazor platform
   *
   * @returns {HTMLElement} result
   * @param {HTMLElement | object} element ?
   * @private
   */
  function getElement(element) {
    var xPath = 'xPath';
    if (!(element instanceof Node) && isBlazor() && !isNullOrUndefined(element["" + xPath])) {
      return document.evaluate(element["" + xPath], document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
    }
    return element;
  }
  /**
   * Function to fetch the Instances of a HTML element for the given component.
   *
   * @param {string | HTMLElement} element ?
   * @param {any} component ?
   * @returns {Object} ?
   * @private
   */
  // eslint-disable-next-line
  function getInstance(element, component) {
    // eslint-disable-next-line
    var elem = typeof element === 'string' ? document.querySelector(element) : element;
    if (elem["" + instances]) {
      for (var _i = 0, _a = elem["" + instances]; _i < _a.length; _i++) {
        var inst = _a[_i];
        if (inst instanceof component) {
          return inst;
        }
      }
    }
    return null;
  }
  /**
   * Function to add instances for the given element.
   *
   * @param {string | HTMLElement} element ?
   * @param {Object} instance ?
   * @returns {void} ?
   * @private
   */
  function addInstance(element, instance) {
    // eslint-disable-next-line
    var elem = typeof element === 'string' ? document.querySelector(element) : element;
    if (elem["" + instances]) {
      elem["" + instances].push(instance);
    } else {
      elem["" + instances] = [instance];
    }
  }
  /**
   * Function to generate the unique id.
   *
   * @returns {any} ?
   * @private
   */
  // eslint-disable-next-line
  function uniqueID() {
    if (typeof window === 'undefined') {
      return;
    }
    // eslint-disable-next-line
    var num = new Uint16Array(5);
    var intCrypto = window.msCrypto || window.crypto;
    return intCrypto.getRandomValues(num);
  }
  /**
   *
   * @param {Int16Array} num ?
   * @returns {string} ?
   */
  function combineArray(num) {
    var ret = '';
    for (var i = 0; i < 5; i++) {
      ret += (i ? ',' : '') + num[parseInt(i.toString(), 10)];
    }
    return ret;
  }

  /**
   * Parser
   */
  var defaultNumberingSystem = {
    'latn': {
      '_digits': '0123456789',
      '_type': 'numeric'
    }
  };
  var defaultNumberSymbols = {
    'decimal': '.',
    'group': ',',
    'percentSign': '%',
    'plusSign': '+',
    'minusSign': '-',
    'infinity': '∞',
    'nan': 'NaN',
    'exponential': 'E'
  };
  var latnNumberSystem = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
  /**
   * Interface for parser base
   *
   * @private
   */
  var ParserBase = /** @class */function () {
    function ParserBase() {}
    /**
     * Returns the cldr object for the culture specifies
     *
     * @param {Object} obj - Specifies the object from which culture object to be acquired.
     * @param {string} cName - Specifies the culture name.
     * @returns {Object} ?
     */
    ParserBase.getMainObject = function (obj, cName) {
      var value = isBlazor() ? cName : 'main.' + cName;
      return getValue(value, obj);
    };
    /**
     * Returns the numbering system object from given cldr data.
     *
     * @param {Object} obj - Specifies the object from which number system is acquired.
     * @returns {Object} ?
     */
    ParserBase.getNumberingSystem = function (obj) {
      return getValue('supplemental.numberingSystems', obj) || this.numberingSystems;
    };
    /**
     * Returns the reverse of given object keys or keys specified.
     *
     * @param {Object} prop - Specifies the object to be reversed.
     * @param {number[]} keys - Optional parameter specifies the custom keyList for reversal.
     * @returns {Object} ?
     */
    ParserBase.reverseObject = function (prop, keys) {
      var propKeys = keys || Object.keys(prop);
      var res = {};
      for (var _i = 0, propKeys_1 = propKeys; _i < propKeys_1.length; _i++) {
        var key = propKeys_1[_i];
        // eslint-disable-next-line
        if (!res.hasOwnProperty(prop[key])) {
          // eslint-disable-next-line
          res[prop[key]] = key;
        }
      }
      return res;
    };
    /**
     * Returns the symbol regex by skipping the escape sequence.
     *
     * @param {string[]} props - Specifies the array values to be skipped.
     * @returns {RegExp} ?
     */
    ParserBase.getSymbolRegex = function (props) {
      var regexStr = props.map(function (str) {
        return str.replace(/([.*+?^=!:${}()|[\]/\\])/g, '\\$1');
      }).join('|');
      var regExp = RegExp;
      return new regExp(regexStr, 'g');
    };
    /**
     *
     * @param {Object} prop ?
     * @returns {Object} ?
     */
    ParserBase.getSymbolMatch = function (prop) {
      var matchKeys = Object.keys(defaultNumberSymbols);
      var ret = {};
      for (var _i = 0, matchKeys_1 = matchKeys; _i < matchKeys_1.length; _i++) {
        var key = matchKeys_1[_i];
        // eslint-disable-next-line
        ret[prop[key]] = defaultNumberSymbols[key];
      }
      return ret;
    };
    /**
     * Returns regex string for provided value
     *
     * @param {string} val ?
     * @returns {string} ?
     */
    ParserBase.constructRegex = function (val) {
      var len = val.length;
      var ret = '';
      for (var i = 0; i < len; i++) {
        if (i !== len - 1) {
          ret += val[parseInt(i.toString(), 10)] + '|';
        } else {
          ret += val[parseInt(i.toString(), 10)];
        }
      }
      return ret;
    };
    /**
     * Returns the replaced value of matching regex and obj mapper.
     *
     * @param {string} value - Specifies the  values to be replaced.
     * @param {RegExp} regex - Specifies the  regex to search.
     * @param {Object} obj - Specifies the  object matcher to be replace value parts.
     * @returns {string} ?
     */
    ParserBase.convertValueParts = function (value, regex, obj) {
      return value.replace(regex, function (str) {
        // eslint-disable-next-line
        return obj[str];
      });
    };
    /**
     * Returns default numbering system object for formatting from cldr data
     *
     * @param {Object} obj ?
     * @returns {NumericObject} ?
     */
    ParserBase.getDefaultNumberingSystem = function (obj) {
      var ret = {};
      ret.obj = getValue('numbers', obj);
      ret.nSystem = getValue('defaultNumberingSystem', ret.obj);
      return ret;
    };
    /**
     * Returns the replaced value of matching regex and obj mapper.
     *
     * @param {Object} curObj ?
     * @param {Object} numberSystem ?
     * @param {boolean} needSymbols ?
     * @param {boolean} blazorMode ?
     * @returns {Object} ?
     */
    ParserBase.getCurrentNumericOptions = function (curObj, numberSystem, needSymbols, blazorMode) {
      var ret = {};
      var cur = this.getDefaultNumberingSystem(curObj);
      if (!isUndefined(cur.nSystem) || blazorMode) {
        var digits = blazorMode ? getValue('obj.mapperDigits', cur) : getValue(cur.nSystem + '._digits', numberSystem);
        if (!isUndefined(digits)) {
          ret.numericPair = this.reverseObject(digits, latnNumberSystem);
          var regExp = RegExp;
          ret.numberParseRegex = new regExp(this.constructRegex(digits), 'g');
          ret.numericRegex = '[' + digits[0] + '-' + digits[9] + ']';
          if (needSymbols) {
            ret.numericRegex = digits[0] + '-' + digits[9];
            ret.symbolNumberSystem = getValue(blazorMode ? 'numberSymbols' : 'symbols-numberSystem-' + cur.nSystem, cur.obj);
            ret.symbolMatch = this.getSymbolMatch(ret.symbolNumberSystem);
            ret.numberSystem = cur.nSystem;
          }
        }
      }
      return ret;
    };
    /**
     * Returns number mapper object for the provided cldr data
     *
     * @param {Object} curObj ?
     * @param {Object} numberSystem ?
     * @param {boolean} isNumber ?
     * @returns {NumberMapper} ?
     */
    // eslint-disable-next-line
    ParserBase.getNumberMapper = function (curObj, numberSystem, isNumber) {
      var ret = {
        mapper: {}
      };
      var cur = this.getDefaultNumberingSystem(curObj);
      if (!isUndefined(cur.nSystem)) {
        ret.numberSystem = cur.nSystem;
        ret.numberSymbols = getValue('symbols-numberSystem-' + cur.nSystem, cur.obj);
        ret.timeSeparator = getValue('timeSeparator', ret.numberSymbols);
        var digits = getValue(cur.nSystem + '._digits', numberSystem);
        if (!isUndefined(digits)) {
          for (var _i = 0, latnNumberSystem_1 = latnNumberSystem; _i < latnNumberSystem_1.length; _i++) {
            var i = latnNumberSystem_1[_i];
            // eslint-disable-next-line
            ret.mapper[i] = digits[i];
          }
        }
      }
      return ret;
    };
    ParserBase.nPair = 'numericPair';
    ParserBase.nRegex = 'numericRegex';
    ParserBase.numberingSystems = defaultNumberingSystem;
    return ParserBase;
  }();
  /**
   * @private
   */
  var blazorCurrencyData = {
    'DJF': 'Fdj',
    'ERN': 'Nfk',
    'ETB': 'Br',
    'NAD': '$',
    'ZAR': 'R',
    'XAF': 'FCFA',
    'GHS': 'GH₵',
    'XDR': 'XDR',
    'AED': 'د.إ.',
    'BHD': 'د.ب.',
    'DZD': 'د.ج.',
    'EGP': 'ج.م.',
    'ILS': '₪',
    'IQD': 'د.ع.',
    'JOD': 'د.ا.',
    'KMF': 'CF',
    'KWD': 'د.ك.',
    'LBP': 'ل.ل.',
    'LYD': 'د.ل.',
    'MAD': 'د.م.',
    'MRU': 'أ.م.',
    'OMR': 'ر.ع.',
    'QAR': 'ر.ق.',
    'SAR': 'ر.س.',
    'SDG': 'ج.س.',
    'SOS': 'S',
    'SSP': '£',
    'SYP': 'ل.س.',
    'TND': 'د.ت.',
    'YER': 'ر.ي.',
    'CLP': '$',
    'INR': '₹',
    'TZS': 'TSh',
    'EUR': '€',
    'AZN': '₼',
    'RUB': '₽',
    'BYN': 'Br',
    'ZMW': 'K',
    'BGN': 'лв.',
    'NGN': '₦',
    'XOF': 'CFA',
    'BDT': '৳',
    'CNY': '¥',
    'BAM': 'КМ',
    'UGX': 'USh',
    'USD': '$',
    'CZK': 'Kč',
    'GBP': '£',
    'DKK': 'kr.',
    'KES': 'Ksh',
    'CHF': 'CHF',
    'MVR': 'ރ.',
    'BTN': 'Nu.',
    'XCD': 'EC$',
    'AUD': '$',
    'BBD': '$',
    'BIF': 'FBu',
    'BMD': '$',
    'BSD': '$',
    'BWP': 'P',
    'BZD': '$',
    'CAD': '$',
    'NZD': '$',
    'FJD': '$',
    'FKP': '£',
    'GIP': '£',
    'GMD': 'D',
    'GYD': '$',
    'HKD': '$',
    'IDR': 'Rp',
    'JMD': '$',
    'KYD': '$',
    'LRD': '$',
    'MGA': 'Ar',
    'MOP': 'MOP$',
    'MUR': 'Rs',
    'MWK': 'MK',
    'MYR': 'RM',
    'PGK': 'K',
    'PHP': '₱',
    'PKR': 'Rs',
    'RWF': 'RF',
    'SBD': '$',
    'SCR': 'SR',
    'SEK': 'kr',
    'SGD': '$',
    'SHP': '£',
    'SLL': 'Le',
    'ANG': 'NAf.',
    'SZL': 'E',
    'TOP': 'T$',
    'TTD': '$',
    'VUV': 'VT',
    'WST': 'WS$',
    'ARS': '$',
    'BOB': 'Bs',
    'BRL': 'R$',
    'COP': '$',
    'CRC': '₡',
    'CUP': '$',
    'DOP': '$',
    'GTQ': 'Q',
    'HNL': 'L',
    'MXN': '$',
    'NIO': 'C$',
    'PAB': 'B/.',
    'PEN': 'S/',
    'PYG': '₲',
    'UYU': '$',
    'VES': 'Bs.S',
    'IRR': 'ريال',
    'GNF': 'FG',
    'CDF': 'FC',
    'HTG': 'G',
    'XPF': 'FCFP',
    'HRK': 'kn',
    'HUF': 'Ft',
    'AMD': '֏',
    'ISK': 'kr',
    'JPY': '¥',
    'GEL': '₾',
    'CVE': '​',
    'KZT': '₸',
    'KHR': '៛',
    'KPW': '₩',
    'KRW': '₩',
    'KGS': 'сом',
    'AOA': 'Kz',
    'LAK': '₭',
    'MZN': 'MTn',
    'MKD': 'ден',
    'MNT': '₮',
    'BND': '$',
    'MMK': 'K',
    'NOK': 'kr',
    'NPR': 'रु',
    'AWG': 'Afl.',
    'SRD': '$',
    'PLN': 'zł',
    'AFN': '؋',
    'STN': 'Db',
    'MDL': 'L',
    'RON': 'lei',
    'UAH': '₴',
    'LKR': 'රු.',
    'ALL': 'Lekë',
    'RSD': 'дин.',
    'TJS': 'смн',
    'THB': '฿',
    'TMT': 'm.',
    'TRY': '₺',
    'UZS': 'сўм',
    'VND': '₫',
    'TWD': 'NT$'
  };
  /**
   *
   * @param {string} currencyCode ?
   * @returns {string} ?
   */
  function getBlazorCurrencySymbol(currencyCode) {
    return getValue(currencyCode || '', blazorCurrencyData);
  }

  /***
   * Hijri parser
   */
  // eslint-disable-next-line

  (function (HijriParser) {
    var dateCorrection = [28607, 28636, 28665, 28695, 28724, 28754, 28783, 28813, 28843, 28872, 28901, 28931, 28960, 28990, 29019, 29049, 29078, 29108, 29137, 29167, 29196, 29226, 29255, 29285, 29315, 29345, 29375, 29404, 29434, 29463, 29492, 29522, 29551, 29580, 29610, 29640, 29669, 29699, 29729, 29759, 29788, 29818, 29847, 29876, 29906, 29935, 29964, 29994, 30023, 30053, 30082, 30112, 30141, 30171, 30200, 30230, 30259, 30289, 30318, 30348, 30378, 30408, 30437, 30467, 30496, 30526, 30555, 30585, 30614, 30644, 30673, 30703, 30732, 30762, 30791, 30821, 30850, 30880, 30909, 30939, 30968, 30998, 31027, 31057, 31086, 31116, 31145, 31175, 31204, 31234, 31263, 31293, 31322, 31352, 31381, 31411, 31441, 31471, 31500, 31530, 31559, 31589, 31618, 31648, 31676, 31706, 31736, 31766, 31795, 31825, 31854, 31884, 31913, 31943, 31972, 32002, 32031, 32061, 32090, 32120, 32150, 32180, 32209, 32239, 32268, 32298, 32327, 32357, 32386, 32416, 32445, 32475, 32504, 32534, 32563, 32593, 32622, 32652, 32681, 32711, 32740, 32770, 32799, 32829, 32858, 32888, 32917, 32947, 32976, 33006, 33035, 33065, 33094, 33124, 33153, 33183, 33213, 33243, 33272, 33302, 33331, 33361, 33390, 33420, 33450, 33479, 33509, 33539, 33568, 33598, 33627, 33657, 33686, 33716, 33745, 33775, 33804, 33834, 33863, 33893, 33922, 33952, 33981, 34011, 34040, 34069, 34099, 34128, 34158, 34187, 34217, 34247, 34277, 34306, 34336, 34365, 34395, 34424, 34454, 34483, 34512, 34542, 34571, 34601, 34631, 34660, 34690, 34719, 34749, 34778, 34808, 34837, 34867, 34896, 34926, 34955, 34985, 35015, 35044, 35074, 35103, 35133, 35162, 35192, 35222, 35251, 35280, 35310, 35340, 35370, 35399, 35429, 35458, 35488, 35517, 35547, 35576, 35605, 35635, 35665, 35694, 35723, 35753, 35782, 35811, 35841, 35871, 35901, 35930, 35960, 35989, 36019, 36048, 36078, 36107, 36136, 36166, 36195, 36225, 36254, 36284, 36314, 36343, 36373, 36403, 36433, 36462, 36492, 36521, 36551, 36580, 36610, 36639, 36669, 36698, 36728, 36757, 36786, 36816, 36845, 36875, 36904, 36934, 36963, 36993, 37022, 37052, 37081, 37111, 37141, 37170, 37200, 37229, 37259, 37288, 37318, 37347, 37377, 37406, 37436, 37465, 37495, 37524, 37554, 37584, 37613, 37643, 37672, 37701, 37731, 37760, 37790, 37819, 37849, 37878, 37908, 37938, 37967, 37997, 38027, 38056, 38085, 38115, 38144, 38174, 38203, 38233, 38262, 38292, 38322, 38351, 38381, 38410, 38440, 38469, 38499, 38528, 38558, 38587, 38617, 38646, 38676, 38705, 38735, 38764, 38794, 38823, 38853, 38882, 38912, 38941, 38971, 39001, 39030, 39059, 39089, 39118, 39148, 39178, 39208, 39237, 39267, 39297, 39326, 39355, 39385, 39414, 39444, 39473, 39503, 39532, 39562, 39592, 39621, 39650, 39680, 39709, 39739, 39768, 39798, 39827, 39857, 39886, 39916, 39946, 39975, 40005, 40035, 40064, 40094, 40123, 40153, 40182, 40212, 40241, 40271, 40300, 40330, 40359, 40389, 40418, 40448, 40477, 40507, 40536, 40566, 40595, 40625, 40655, 40685, 40714, 40744, 40773, 40803, 40832, 40862, 40892, 40921, 40951, 40980, 41009, 41039, 41068, 41098, 41127, 41157, 41186, 41216, 41245, 41275, 41304, 41334, 41364, 41393, 41422, 41452, 41481, 41511, 41540, 41570, 41599, 41629, 41658, 41688, 41718, 41748, 41777, 41807, 41836, 41865, 41894, 41924, 41953, 41983, 42012, 42042, 42072, 42102, 42131, 42161, 42190, 42220, 42249, 42279, 42308, 42337, 42367, 42397, 42426, 42456, 42485, 42515, 42545, 42574, 42604, 42633, 42662, 42692, 42721, 42751, 42780, 42810, 42839, 42869, 42899, 42929, 42958, 42988, 43017, 43046, 43076, 43105, 43135, 43164, 43194, 43223, 43253, 43283, 43312, 43342, 43371, 43401, 43430, 43460, 43489, 43519, 43548, 43578, 43607, 43637, 43666, 43696, 43726, 43755, 43785, 43814, 43844, 43873, 43903, 43932, 43962, 43991, 44021, 44050, 44080, 44109, 44139, 44169, 44198, 44228, 44258, 44287, 44317, 44346, 44375, 44405, 44434, 44464, 44493, 44523, 44553, 44582, 44612, 44641, 44671, 44700, 44730, 44759, 44788, 44818, 44847, 44877, 44906, 44936, 44966, 44996, 45025, 45055, 45084, 45114, 45143, 45172, 45202, 45231, 45261, 45290, 45320, 45350, 45380, 45409, 45439, 45468, 45498, 45527, 45556, 45586, 45615, 45644, 45674, 45704, 45733, 45763, 45793, 45823, 45852, 45882, 45911, 45940, 45970, 45999, 46028, 46058, 46088, 46117, 46147, 46177, 46206, 46236, 46265, 46295, 46324, 46354, 46383, 46413, 46442, 46472, 46501, 46531, 46560, 46590, 46620, 46649, 46679, 46708, 46738, 46767, 46797, 46826, 46856, 46885, 46915, 46944, 46974, 47003, 47033, 47063, 47092, 47122, 47151, 47181, 47210, 47240, 47269, 47298, 47328, 47357, 47387, 47417, 47446, 47476, 47506, 47535, 47565, 47594, 47624, 47653, 47682, 47712, 47741, 47771, 47800, 47830, 47860, 47890, 47919, 47949, 47978, 48008, 48037, 48066, 48096, 48125, 48155, 48184, 48214, 48244, 48273, 48303, 48333, 48362, 48392, 48421, 48450, 48480, 48509, 48538, 48568, 48598, 48627, 48657, 48687, 48717, 48746, 48776, 48805, 48834, 48864, 48893, 48922, 48952, 48982, 49011, 49041, 49071, 49100, 49130, 49160, 49189, 49218, 49248, 49277, 49306, 49336, 49365, 49395, 49425, 49455, 49484, 49514, 49543, 49573, 49602, 49632, 49661, 49690, 49720, 49749, 49779, 49809, 49838, 49868, 49898, 49927, 49957, 49986, 50016, 50045, 50075, 50104, 50133, 50163, 50192, 50222, 50252, 50281, 50311, 50340, 50370, 50400, 50429, 50459, 50488, 50518, 50547, 50576, 50606, 50635, 50665, 50694, 50724, 50754, 50784, 50813, 50843, 50872, 50902, 50931, 50960, 50990, 51019, 51049, 51078, 51108, 51138, 51167, 51197, 51227, 51256, 51286, 51315, 51345, 51374, 51403, 51433, 51462, 51492, 51522, 51552, 51582, 51611, 51641, 51670, 51699, 51729, 51758, 51787, 51816, 51846, 51876, 51906, 51936, 51965, 51995, 52025, 52054, 52083, 52113, 52142, 52171, 52200, 52230, 52260, 52290, 52319, 52349, 52379, 52408, 52438, 52467, 52497, 52526, 52555, 52585, 52614, 52644, 52673, 52703, 52733, 52762, 52792, 52822, 52851, 52881, 52910, 52939, 52969, 52998, 53028, 53057, 53087, 53116, 53146, 53176, 53205, 53235, 53264, 53294, 53324, 53353, 53383, 53412, 53441, 53471, 53500, 53530, 53559, 53589, 53619, 53648, 53678, 53708, 53737, 53767, 53796, 53825, 53855, 53884, 53913, 53943, 53973, 54003, 54032, 54062, 54092, 54121, 54151, 54180, 54209, 54239, 54268, 54297, 54327, 54357, 54387, 54416, 54446, 54476, 54505, 54535, 54564, 54593, 54623, 54652, 54681, 54711, 54741, 54770, 54800, 54830, 54859, 54889, 54919, 54948, 54977, 55007, 55036, 55066, 55095, 55125, 55154, 55184, 55213, 55243, 55273, 55302, 55332, 55361, 55391, 55420, 55450, 55479, 55508, 55538, 55567, 55597, 55627, 55657, 55686, 55716, 55745, 55775, 55804, 55834, 55863, 55892, 55922, 55951, 55981, 56011, 56040, 56070, 56100, 56129, 56159, 56188, 56218, 56247, 56276, 56306, 56335, 56365, 56394, 56424, 56454, 56483, 56513, 56543, 56572, 56601, 56631, 56660, 56690, 56719, 56749, 56778, 56808, 56837, 56867, 56897, 56926, 56956, 56985, 57015, 57044, 57074, 57103, 57133, 57162, 57192, 57221, 57251, 57280, 57310, 57340, 57369, 57399, 57429, 57458, 57487, 57517, 57546, 57576, 57605, 57634, 57664, 57694, 57723, 57753, 57783, 57813, 57842, 57871, 57901, 57930, 57959, 57989, 58018, 58048, 58077, 58107, 58137, 58167, 58196, 58226, 58255, 58285, 58314, 58343, 58373, 58402, 58432, 58461, 58491, 58521, 58551, 58580, 58610, 58639, 58669, 58698, 58727, 58757, 58786, 58816, 58845, 58875, 58905, 58934, 58964, 58994, 59023, 59053, 59082, 59111, 59141, 59170, 59200, 59229, 59259, 59288, 59318, 59348, 59377, 59407, 59436, 59466, 59495, 59525, 59554, 59584, 59613, 59643, 59672, 59702, 59731, 59761, 59791, 59820, 59850, 59879, 59909, 59939, 59968, 59997, 60027, 60056, 60086, 60115, 60145, 60174, 60204, 60234, 60264, 60293, 60323, 60352, 60381, 60411, 60440, 60469, 60499, 60528, 60558, 60588, 60618, 60648, 60677, 60707, 60736, 60765, 60795, 60824, 60853, 60883, 60912, 60942, 60972, 61002, 61031, 61061, 61090, 61120, 61149, 61179, 61208, 61237, 61267, 61296, 61326, 61356, 61385, 61415, 61445, 61474, 61504, 61533, 61563, 61592, 61621, 61651, 61680, 61710, 61739, 61769, 61799, 61828, 61858, 61888, 61917, 61947, 61976, 62006, 62035, 62064, 62094, 62123, 62153, 62182, 62212, 62242, 62271, 62301, 62331, 62360, 62390, 62419, 62448, 62478, 62507, 62537, 62566, 62596, 62625, 62655, 62685, 62715, 62744, 62774, 62803, 62832, 62862, 62891, 62921, 62950, 62980, 63009, 63039, 63069, 63099, 63128, 63157, 63187, 63216, 63246, 63275, 63305, 63334, 63363, 63393, 63423, 63453, 63482, 63512, 63541, 63571, 63600, 63630, 63659, 63689, 63718, 63747, 63777, 63807, 63836, 63866, 63895, 63925, 63955, 63984, 64014, 64043, 64073, 64102, 64131, 64161, 64190, 64220, 64249, 64279, 64309, 64339, 64368, 64398, 64427, 64457, 64486, 64515, 64545, 64574, 64603, 64633, 64663, 64692, 64722, 64752, 64782, 64811, 64841, 64870, 64899, 64929, 64958, 64987, 65017, 65047, 65076, 65106, 65136, 65166, 65195, 65225, 65254, 65283, 65313, 65342, 65371, 65401, 65431, 65460, 65490, 65520, 65549, 65579, 65608, 65638, 65667, 65697, 65726, 65755, 65785, 65815, 65844, 65874, 65903, 65933, 65963, 65992, 66022, 66051, 66081, 66110, 66140, 66169, 66199, 66228, 66258, 66287, 66317, 66346, 66376, 66405, 66435, 66465, 66494, 66524, 66553, 66583, 66612, 66641, 66671, 66700, 66730, 66760, 66789, 66819, 66849, 66878, 66908, 66937, 66967, 66996, 67025, 67055, 67084, 67114, 67143, 67173, 67203, 67233, 67262, 67292, 67321, 67351, 67380, 67409, 67439, 67468, 67497, 67527, 67557, 67587, 67617, 67646, 67676, 67705, 67735, 67764, 67793, 67823, 67852, 67882, 67911, 67941, 67971, 68000, 68030, 68060, 68089, 68119, 68148, 68177, 68207, 68236, 68266, 68295, 68325, 68354, 68384, 68414, 68443, 68473, 68502, 68532, 68561, 68591, 68620, 68650, 68679, 68708, 68738, 68768, 68797, 68827, 68857, 68886, 68916, 68946, 68975, 69004, 69034, 69063, 69092, 69122, 69152, 69181, 69211, 69240, 69270, 69300, 69330, 69359, 69388, 69418, 69447, 69476, 69506, 69535, 69565, 69595, 69624, 69654, 69684, 69713, 69743, 69772, 69802, 69831, 69861, 69890, 69919, 69949, 69978, 70008, 70038, 70067, 70097, 70126, 70156, 70186, 70215, 70245, 70274, 70303, 70333, 70362, 70392, 70421, 70451, 70481, 70510, 70540, 70570, 70599, 70629, 70658, 70687, 70717, 70746, 70776, 70805, 70835, 70864, 70894, 70924, 70954, 70983, 71013, 71042, 71071, 71101, 71130, 71159, 71189, 71218, 71248, 71278, 71308, 71337, 71367, 71397, 71426, 71455, 71485, 71514, 71543, 71573, 71602, 71632, 71662, 71691, 71721, 71751, 71781, 71810, 71839, 71869, 71898, 71927, 71957, 71986, 72016, 72046, 72075, 72105, 72135, 72164, 72194, 72223, 72253, 72282, 72311, 72341, 72370, 72400, 72429, 72459, 72489, 72518, 72548, 72577, 72607, 72637, 72666, 72695, 72725, 72754, 72784, 72813, 72843, 72872, 72902, 72931, 72961, 72991, 73020, 73050, 73080, 73109, 73139, 73168, 73197, 73227, 73256, 73286, 73315, 73345, 73375, 73404, 73434, 73464, 73493, 73523, 73552, 73581, 73611, 73640, 73669, 73699, 73729, 73758, 73788, 73818, 73848, 73877, 73907, 73936, 73965, 73995, 74024, 74053, 74083, 74113, 74142, 74172, 74202, 74231, 74261, 74291, 74320, 74349, 74379, 74408, 74437, 74467, 74497, 74526, 74556, 74586, 74615, 74645, 74675, 74704, 74733, 74763, 74792, 74822, 74851, 74881, 74910, 74940, 74969, 74999, 75029, 75058, 75088, 75117, 75147, 75176, 75206, 75235, 75264, 75294, 75323, 75353, 75383, 75412, 75442, 75472, 75501, 75531, 75560, 75590, 75619, 75648, 75678, 75707, 75737, 75766, 75796, 75826, 75856, 75885, 75915, 75944, 75974, 76003, 76032, 76062, 76091, 76121, 76150, 76180, 76210, 76239, 76269, 76299, 76328, 76358, 76387, 76416, 76446, 76475, 76505, 76534, 76564, 76593, 76623, 76653, 76682, 76712, 76741, 76771, 76801, 76830, 76859, 76889, 76918, 76948, 76977, 77007, 77036, 77066, 77096, 77125, 77155, 77185, 77214, 77243, 77273, 77302, 77332, 77361, 77390, 77420, 77450, 77479, 77509, 77539, 77569, 77598, 77627, 77657, 77686, 77715, 77745, 77774, 77804, 77833, 77863, 77893, 77923, 77952, 77982, 78011, 78041, 78070, 78099, 78129, 78158, 78188, 78217, 78247, 78277, 78307, 78336, 78366, 78395, 78425, 78454, 78483, 78513, 78542, 78572, 78601, 78631, 78661, 78690, 78720, 78750, 78779, 78808, 78838, 78867, 78897, 78926, 78956, 78985, 79015, 79044, 79074, 79104, 79133, 79163, 79192, 79222, 79251, 79281, 79310, 79340, 79369, 79399, 79428, 79458, 79487, 79517, 79546, 79576, 79606, 79635, 79665, 79695, 79724, 79753, 79783, 79812, 79841, 79871, 79900, 79930, 79960, 79990];
    /**
     *
     * @param {Date} gDate ?
     * @returns {Object} ?
     */
    function getHijriDate(gDate) {
      var day = gDate.getDate();
      var month = gDate.getMonth();
      var year = gDate.getFullYear();
      var tMonth = month + 1;
      var tYear = year;
      if (tMonth < 3) {
        tYear -= 1;
        tMonth += 12;
      }
      var yPrefix = Math.floor(tYear / 100.);
      var julilanOffset = yPrefix - Math.floor(yPrefix / 4.) - 2;
      var julianNumber = Math.floor(365.25 * (tYear + 4716)) + Math.floor(30.6001 * (tMonth + 1)) + day - julilanOffset - 1524;
      yPrefix = Math.floor((julianNumber - 1867216.25) / 36524.25);
      julilanOffset = yPrefix - Math.floor(yPrefix / 4.) + 1;
      var b = julianNumber + julilanOffset + 1524;
      var c = Math.floor((b - 122.1) / 365.25);
      var d = Math.floor(365.25 * c);
      var tempMonth = Math.floor((b - d) / 30.6001);
      day = b - d - Math.floor(30.6001 * tempMonth);
      month = Math.floor((b - d) / 20.6001);
      if (month > 13) {
        c += 1;
        month -= 12;
      }
      month -= 1;
      year = c - 4716;
      var modifiedJulianDate = julianNumber - 2400000;
      // date calculation for year after 2077
      var iyear = 10631. / 30.;
      var z = julianNumber - 1948084;
      var cyc = Math.floor(z / 10631.);
      z = z - 10631 * cyc;
      var j = Math.floor((z - 0.1335) / iyear);
      var iy = 30 * cyc + j;
      z = z - Math.floor(j * iyear + 0.1335);
      var im = Math.floor((z + 28.5001) / 29.5);
      /* istanbul ignore next */
      if (im === 13) {
        im = 12;
      }
      var tempDay = z - Math.floor(29.5001 * im - 29);
      var i = 0;
      for (; i < dateCorrection.length; i++) {
        if (dateCorrection[parseInt(i.toString(), 10)] > modifiedJulianDate) {
          break;
        }
      }
      var iln = i + 16260;
      var ii = Math.floor((iln - 1) / 12);
      var hYear = ii + 1;
      var hmonth = iln - 12 * ii;
      var hDate = modifiedJulianDate - dateCorrection[i - 1] + 1;
      if ((hDate + '').length > 2) {
        hDate = tempDay;
        hmonth = im;
        hYear = iy;
      }
      return {
        year: hYear,
        month: hmonth,
        date: hDate
      };
    }
    HijriParser.getHijriDate = getHijriDate;
    /**
     *
     * @param {number} year ?
     * @param {number} month ?
     * @param {number} day ?
     * @returns {Date} ?
     */
    function toGregorian(year, month, day) {
      var iy = year;
      var im = month;
      var id = day;
      var ii = iy - 1;
      var iln = ii * 12 + 1 + (im - 1);
      var i = iln - 16260;
      var mcjdn = id + dateCorrection[i - 1] - 1;
      var julianDate = mcjdn + 2400000;
      var z = Math.floor(julianDate + 0.5);
      var a = Math.floor((z - 1867216.25) / 36524.25);
      a = z + 1 + a - Math.floor(a / 4);
      var b = a + 1524;
      var c = Math.floor((b - 122.1) / 365.25);
      var d = Math.floor(365.25 * c);
      var e = Math.floor((b - d) / 30.6001);
      var gDay = b - d - Math.floor(e * 30.6001);
      var gMonth = e - (e > 13.5 ? 13 : 1);
      var gYear = c - (gMonth > 2.5 ? 4716 : 4715);
      /* istanbul ignore next */
      if (gYear <= 0) {
        gMonth--;
      } // No year zero
      return new Date(gYear + '/' + gMonth + '/' + gDay);
    }
    HijriParser.toGregorian = toGregorian;
  })(exports.HijriParser || (exports.HijriParser = {}));
  var abbreviateRegexGlobal = /\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi;
  var standalone = 'stand-alone';
  var weekdayKey = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
  var timeSetter = {
    m: 'getMinutes',
    h: 'getHours',
    H: 'getHours',
    s: 'getSeconds',
    d: 'getDate',
    f: 'getMilliseconds'
  };
  var datePartMatcher = {
    'M': 'month',
    'd': 'day',
    'E': 'weekday',
    'c': 'weekday',
    'y': 'year',
    'm': 'minute',
    'h': 'hour',
    'H': 'hour',
    's': 'second',
    'L': 'month',
    'a': 'designator',
    'z': 'timeZone',
    'Z': 'timeZone',
    'G': 'era',
    'f': 'milliseconds'
  };
  var timeSeparator = 'timeSeparator';
  /* tslint:disable no-any */
  /**
   * Date Format is a framework provides support for date formatting.
   *
   * @private
   */
  var DateFormat = /** @class */function () {
    function DateFormat() {}
    /**
     * Returns the formatter function for given skeleton.
     *
     * @param {string} culture -  Specifies the culture name to be which formatting.
     * @param {DateFormatOptions} option - Specific the format in which date  will format.
     * @param {Object} cldr - Specifies the global cldr data collection.
     * @returns {Function} ?
     */
    DateFormat.dateFormat = function (culture, option, cldr) {
      var _this = this;
      var dependable = exports.IntlBase.getDependables(cldr, culture, option.calendar);
      var numObject = getValue('parserObject.numbers', dependable);
      var dateObject = dependable.dateObject;
      var formatOptions = {
        isIslamic: exports.IntlBase.islamicRegex.test(option.calendar)
      };
      if (isBlazor() && option.isServerRendered) {
        option = exports.IntlBase.compareBlazorDateFormats(option, culture);
      }
      var resPattern = option.format || exports.IntlBase.getResultantPattern(option.skeleton, dependable.dateObject, option.type, false, isBlazor() ? culture : '');
      formatOptions.dateSeperator = isBlazor() ? getValue('dateSeperator', dateObject) : exports.IntlBase.getDateSeparator(dependable.dateObject);
      if (isUndefined(resPattern)) {
        throwError('Format options or type given must be invalid');
      } else {
        resPattern = exports.IntlBase.ConvertDateToWeekFormat(resPattern);
        if (isBlazor()) {
          resPattern = resPattern.replace(/tt/, 'a');
        }
        formatOptions.pattern = resPattern;
        formatOptions.numMapper = isBlazor() ? extend({}, numObject) : ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr));
        var patternMatch = resPattern.match(abbreviateRegexGlobal) || [];
        for (var _i = 0, patternMatch_1 = patternMatch; _i < patternMatch_1.length; _i++) {
          var str = patternMatch_1[_i];
          var len = str.length;
          var _char = str[0];
          if (_char === 'K') {
            _char = 'h';
          }
          switch (_char) {
            case 'E':
            case 'c':
              if (isBlazor()) {
                // eslint-disable-next-line
                formatOptions.weekday = getValue('days.' + exports.IntlBase.monthIndex[len], dateObject);
              } else {
                // eslint-disable-next-line
                formatOptions.weekday = dependable.dateObject[exports.IntlBase.days][standalone][exports.IntlBase.monthIndex[len]];
              }
              break;
            case 'M':
            case 'L':
              if (isBlazor()) {
                // eslint-disable-next-line
                formatOptions.month = getValue('months.' + exports.IntlBase.monthIndex[len], dateObject);
              } else {
                // eslint-disable-next-line
                formatOptions.month = dependable.dateObject[exports.IntlBase.month][standalone][exports.IntlBase.monthIndex[len]];
              }
              break;
            case 'a':
              formatOptions.designator = isBlazor() ? getValue('dayPeriods', dateObject) : getValue('dayPeriods.format.wide', dateObject);
              break;
            case 'G':
              // eslint-disable-next-line
              var eText = len <= 3 ? 'eraAbbr' : len === 4 ? 'eraNames' : 'eraNarrow';
              formatOptions.era = isBlazor() ? getValue('eras', dateObject) : getValue('eras.' + eText, dependable.dateObject);
              break;
            case 'z':
              formatOptions.timeZone = getValue('dates.timeZoneNames', dependable.parserObject);
              break;
          }
        }
      }
      return function (value) {
        if (isNaN(value.getDate())) {
          return null;
        }
        return _this.intDateFormatter(value, formatOptions);
      };
    };
    /**
     * Returns formatted date string based on options passed.
     *
     * @param {Date} value ?
     * @param {FormatOptions} options ?
     * @returns {string} ?
     */
    DateFormat.intDateFormatter = function (value, options) {
      var pattern = options.pattern;
      var ret = '';
      var matches = pattern.match(exports.IntlBase.dateParseRegex);
      var dObject = this.getCurrentDateValue(value, options.isIslamic);
      for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {
        var match = matches_1[_i];
        var length_1 = match.length;
        var _char2 = match[0];
        if (_char2 === 'K') {
          _char2 = 'h';
        }
        var curval = void 0;
        var curvalstr = '';
        var isNumber = void 0;
        var processNumber = void 0;
        var curstr = '';
        switch (_char2) {
          case 'M':
          case 'L':
            curval = dObject.month;
            if (length_1 > 2) {
              // eslint-disable-next-line
              ret += options.month[curval];
            } else {
              isNumber = true;
            }
            break;
          case 'E':
          case 'c':
            // eslint-disable-next-line
            ret += options.weekday[weekdayKey[value.getDay()]];
            break;
          case 'H':
          case 'h':
          case 'm':
          case 's':
          case 'd':
          case 'f':
            isNumber = true;
            if (_char2 === 'd') {
              curval = dObject.date;
            } else if (_char2 === 'f') {
              isNumber = false;
              processNumber = true;
              // eslint-disable-next-line
              curvalstr = value[timeSetter[_char2]]().toString();
              curvalstr = curvalstr.substring(0, length_1);
              var curlength = curvalstr.length;
              if (length_1 !== curlength) {
                if (length_1 > 3) {
                  continue;
                }
                for (var i = 0; i < length_1 - curlength; i++) {
                  curvalstr = '0' + curvalstr.toString();
                }
              }
              curstr += curvalstr;
            } else {
              // eslint-disable-next-line
              curval = value[timeSetter[_char2]]();
            }
            if (_char2 === 'h') {
              curval = curval % 12 || 12;
            }
            break;
          case 'y':
            processNumber = true;
            curstr += dObject.year;
            if (length_1 === 2) {
              curstr = curstr.substr(curstr.length - 2);
            }
            break;
          case 'a':
            // eslint-disable-next-line
            var desig = value.getHours() < 12 ? 'am' : 'pm';
            // eslint-disable-next-line
            ret += options.designator[desig];
            break;
          case 'G':
            // eslint-disable-next-line
            var dec = value.getFullYear() < 0 ? 0 : 1;
            // eslint-disable-next-line
            var retu = options.era[dec];
            if (isNullOrUndefined(retu)) {
              // eslint-disable-next-line
              retu = options.era[dec ? 0 : 1];
            }
            ret += retu || '';
            break;
          case '\'':
            ret += match === '\'\'' ? '\'' : match.replace(/'/g, '');
            break;
          case 'z':
            // eslint-disable-next-line
            var timezone = value.getTimezoneOffset();
            // eslint-disable-next-line
            var pattern_1 = length_1 < 4 ? '+H;-H' : options.timeZone.hourFormat;
            pattern_1 = pattern_1.replace(/:/g, options.numMapper.timeSeparator);
            if (timezone === 0) {
              ret += options.timeZone.gmtZeroFormat;
            } else {
              processNumber = true;
              curstr = this.getTimeZoneValue(timezone, pattern_1);
            }
            curstr = options.timeZone.gmtFormat.replace(/\{0\}/, curstr);
            break;
          case ':':
            // eslint-disable-next-line
            ret += options.numMapper.numberSymbols[timeSeparator];
            break;
          case '/':
            ret += options.dateSeperator;
            break;
          case 'W':
            isNumber = true;
            curval = exports.IntlBase.getWeekOfYear(value);
            break;
          default:
            ret += match;
        }
        if (isNumber) {
          processNumber = true;
          curstr = this.checkTwodigitNumber(curval, length_1);
        }
        if (processNumber) {
          ret += ParserBase.convertValueParts(curstr, exports.IntlBase.latnParseRegex, options.numMapper.mapper);
        }
      }
      return ret;
    };
    DateFormat.getCurrentDateValue = function (value, isIslamic) {
      if (isIslamic) {
        return exports.HijriParser.getHijriDate(value);
      }
      return {
        year: value.getFullYear(),
        month: value.getMonth() + 1,
        date: value.getDate()
      };
    };
    /**
     * Returns two digit numbers for given value and length
     *
     * @param {number} val ?
     * @param {number} len ?
     * @returns {string} ?
     */
    DateFormat.checkTwodigitNumber = function (val, len) {
      var ret = val + '';
      if (len === 2 && ret.length !== 2) {
        return '0' + ret;
      }
      return ret;
    };
    /**
     * Returns the value of the Time Zone.
     *
     * @param {number} tVal ?
     * @param {string} pattern ?
     * @returns {string} ?
     * @private
     */
    DateFormat.getTimeZoneValue = function (tVal, pattern) {
      var _this = this;
      var splt = pattern.split(';');
      var curPattern = splt[tVal > 0 ? 1 : 0];
      var no = Math.abs(tVal);
      return curPattern = curPattern.replace(/HH?|mm/g, function (str) {
        var len = str.length;
        var ishour = str.indexOf('H') !== -1;
        return _this.checkTwodigitNumber(Math.floor(ishour ? no / 60 : no % 60), len);
      });
    };
    return DateFormat;
  }();
  var errorText = {
    'ms': 'minimumSignificantDigits',
    'ls': 'maximumSignificantDigits',
    'mf': 'minimumFractionDigits',
    'lf': 'maximumFractionDigits'
  };
  var percentSign = 'percentSign';
  var minusSign = 'minusSign';
  var mapper$1 = ['infinity', 'nan', 'group', 'decimal', 'exponential'];
  /**
   * Module for number formatting.
   *
   * @private
   */
  var NumberFormat = /** @class */function () {
    function NumberFormat() {}
    /**
     * Returns the formatter function for given skeleton.
     *
     * @param {string} culture -  Specifies the culture name to be which formatting.
     * @param {NumberFormatOptions} option - Specific the format in which number  will format.
     * @param {Object} cldr - Specifies the global cldr data collection.
     * @returns {Function} ?
     */
    NumberFormat.numberFormatter = function (culture, option, cldr) {
      var _this = this;
      var fOptions = extend({}, option);
      var cOptions = {};
      var dOptions = {};
      var symbolPattern;
      var dependable = exports.IntlBase.getDependables(cldr, culture, '', true);
      var numObject = dependable.numericObject;
      dOptions.numberMapper = isBlazor() ? extend({}, numObject) : ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr), true);
      dOptions.currencySymbol = isBlazor() ? getValue('currencySymbol', numObject) : exports.IntlBase.getCurrencySymbol(dependable.numericObject, fOptions.currency || exports.defaultCurrencyCode, option.altSymbol);
      /* eslint-disable  @typescript-eslint/no-explicit-any */
      dOptions.percentSymbol = isBlazor() ? getValue('numberSymbols.percentSign', numObject) : dOptions.numberMapper.numberSymbols["" + percentSign];
      dOptions.minusSymbol = isBlazor() ? getValue('numberSymbols.minusSign', numObject) : dOptions.numberMapper.numberSymbols["" + minusSign];
      var symbols = dOptions.numberMapper.numberSymbols;
      if (option.format && !exports.IntlBase.formatRegex.test(option.format)) {
        cOptions = exports.IntlBase.customFormat(option.format, dOptions, dependable.numericObject);
      } else {
        extend(fOptions, exports.IntlBase.getProperNumericSkeleton(option.format || 'N'));
        fOptions.isCurrency = fOptions.type === 'currency';
        fOptions.isPercent = fOptions.type === 'percent';
        if (!isBlazor()) {
          symbolPattern = exports.IntlBase.getSymbolPattern(fOptions.type, dOptions.numberMapper.numberSystem, dependable.numericObject, fOptions.isAccount);
        }
        fOptions.groupOne = this.checkValueRange(fOptions.maximumSignificantDigits, fOptions.minimumSignificantDigits, true);
        this.checkValueRange(fOptions.maximumFractionDigits, fOptions.minimumFractionDigits, false, true);
        if (!isUndefined(fOptions.fractionDigits)) {
          fOptions.minimumFractionDigits = fOptions.maximumFractionDigits = fOptions.fractionDigits;
        }
        if (isUndefined(fOptions.useGrouping)) {
          fOptions.useGrouping = true;
        }
        if (fOptions.isCurrency && !isBlazor()) {
          symbolPattern = symbolPattern.replace(/\u00A4/g, exports.IntlBase.defaultCurrency);
        }
        if (!isBlazor()) {
          var split = symbolPattern.split(';');
          cOptions.nData = exports.IntlBase.getFormatData(split[1] || '-' + split[0], true, dOptions.currencySymbol);
          cOptions.pData = exports.IntlBase.getFormatData(split[0], false, dOptions.currencySymbol);
          if (fOptions.useGrouping) {
            fOptions.groupSeparator = symbols[mapper$1[2]];
            fOptions.groupData = this.getGroupingDetails(split[0]);
          }
        } else {
          cOptions.nData = extend({}, {}, getValue(fOptions.type + 'nData', numObject));
          cOptions.pData = extend({}, {}, getValue(fOptions.type + 'pData', numObject));
          if (fOptions.type === 'currency' && option.currency) {
            exports.IntlBase.replaceBlazorCurrency([cOptions.pData, cOptions.nData], dOptions.currencySymbol, option.currency);
          }
        }
        var minFrac = isUndefined(fOptions.minimumFractionDigits);
        if (minFrac) {
          fOptions.minimumFractionDigits = cOptions.nData.minimumFraction;
        }
        if (isUndefined(fOptions.maximumFractionDigits)) {
          var mval = cOptions.nData.maximumFraction;
          fOptions.maximumFractionDigits = isUndefined(mval) && fOptions.isPercent ? 0 : mval;
        }
        var mfrac = fOptions.minimumFractionDigits;
        var lfrac = fOptions.maximumFractionDigits;
        if (!isUndefined(mfrac) && !isUndefined(lfrac)) {
          if (mfrac > lfrac) {
            fOptions.maximumFractionDigits = mfrac;
          }
        }
      }
      extend(cOptions.nData, fOptions);
      extend(cOptions.pData, fOptions);
      return function (value) {
        if (isNaN(value)) {
          return symbols[mapper$1[1]];
        } else if (!isFinite(value)) {
          return symbols[mapper$1[0]];
        }
        return _this.intNumberFormatter(value, cOptions, dOptions, option);
      };
    };
    /**
     * Returns grouping details for the pattern provided
     *
     * @param {string} pattern ?
     * @returns {GroupDetails} ?
     */
    NumberFormat.getGroupingDetails = function (pattern) {
      var ret = {};
      var match = pattern.match(exports.IntlBase.negativeDataRegex);
      if (match && match[4]) {
        var pattern_1 = match[4];
        var p = pattern_1.lastIndexOf(',');
        if (p !== -1) {
          var temp = pattern_1.split('.')[0];
          ret.primary = temp.length - p - 1;
          var s = pattern_1.lastIndexOf(',', p - 1);
          if (s !== -1) {
            ret.secondary = p - 1 - s;
          }
        }
      }
      return ret;
    };
    /**
     * Returns if the provided integer range is valid.
     *
     * @param {number} val1 ?
     * @param {number} val2 ?
     * @param {boolean} checkbothExist ?
     * @param {boolean} isFraction ?
     * @returns {boolean} ?
     */
    NumberFormat.checkValueRange = function (val1, val2, checkbothExist, isFraction) {
      var decide = isFraction ? 'f' : 's';
      var dint = 0;
      var str1 = errorText['l' + decide];
      // eslint-disable-next-line
      var str2 = errorText['m' + decide];
      if (!isUndefined(val1)) {
        this.checkRange(val1, str1, isFraction);
        dint++;
      }
      if (!isUndefined(val2)) {
        this.checkRange(val2, str2, isFraction);
        dint++;
      }
      if (dint === 2) {
        if (val1 < val2) {
          throwError(str2 + 'specified must be less than the' + str1);
        } else {
          return true;
        }
      } else if (checkbothExist && dint === 1) {
        throwError('Both' + str2 + 'and' + str2 + 'must be present');
      }
      return false;
    };
    /**
     * Check if the provided fraction range is valid
     *
     * @param {number} val ?
     * @param {string} text ?
     * @param {boolean} isFraction ?
     * @returns {void} ?
     */
    NumberFormat.checkRange = function (val, text, isFraction) {
      var range = isFraction ? [0, 20] : [1, 21];
      if (val < range[0] || val > range[1]) {
        throwError(text + 'value must be within the range' + range[0] + 'to' + range[1]);
      }
    };
    /**
     * Returns formatted numeric string for provided formatting options
     *
     * @param {number} value ?
     * @param {base.GenericFormatOptions} fOptions ?
     * @param {CommonOptions} dOptions ?
     * @param {NumberFormatOptions} [option] ?
     * @returns {string} ?
     */
    NumberFormat.intNumberFormatter = function (value, fOptions, dOptions, option) {
      var curData;
      if (isUndefined(fOptions.nData.type)) {
        return undefined;
      } else {
        if (value < 0) {
          value = value * -1;
          curData = fOptions.nData;
        } else if (value === 0) {
          curData = fOptions.zeroData || fOptions.pData;
        } else {
          curData = fOptions.pData;
        }
        var fValue = '';
        if (curData.isPercent) {
          value = value * 100;
        }
        if (curData.groupOne) {
          fValue = this.processSignificantDigits(value, curData.minimumSignificantDigits, curData.maximumSignificantDigits);
        } else {
          fValue = this.processFraction(value, curData.minimumFractionDigits, curData.maximumFractionDigits, option);
          if (curData.minimumIntegerDigits) {
            fValue = this.processMinimumIntegers(fValue, curData.minimumIntegerDigits);
          }
          if (dOptions.isCustomFormat && curData.minimumFractionDigits < curData.maximumFractionDigits && /\d+\.\d+/.test(fValue)) {
            var temp = fValue.split('.');
            var decimalPart = temp[1];
            var len = decimalPart.length;
            for (var i = len - 1; i >= 0; i--) {
              if (decimalPart["" + i] === '0' && i >= curData.minimumFractionDigits) {
                decimalPart = decimalPart.slice(0, i);
              } else {
                break;
              }
            }
            fValue = temp[0] + '.' + decimalPart;
          }
        }
        if (curData.type === 'scientific') {
          fValue = value.toExponential(curData.maximumFractionDigits);
          fValue = fValue.replace('e', dOptions.numberMapper.numberSymbols[mapper$1[4]]);
        }
        fValue = fValue.replace('.', dOptions.numberMapper.numberSymbols[mapper$1[3]]);
        fValue = curData.format === '#,###,,;(#,###,,)' ? this.customPivotFormat(parseInt(fValue, 10)) : fValue;
        if (curData.useGrouping) {
          /* eslint-disable  @typescript-eslint/no-explicit-any */
          fValue = this.groupNumbers(fValue, curData.groupData.primary, curData.groupSeparator || ',', dOptions.numberMapper.numberSymbols[mapper$1[3]] || '.', curData.groupData.secondary);
        }
        fValue = ParserBase.convertValueParts(fValue, exports.IntlBase.latnParseRegex, dOptions.numberMapper.mapper);
        if (curData.nlead === 'N/A') {
          return curData.nlead;
        } else {
          if (fValue === '0' && option && option.format === '0') {
            return fValue + curData.nend;
          }
          return curData.nlead + fValue + curData.nend;
        }
      }
    };
    /**
     * Returns significant digits processed numeric string
     *
     * @param {number} value ?
     * @param {number} min ?
     * @param {number} max ?
     * @returns {string} ?
     */
    NumberFormat.processSignificantDigits = function (value, min, max) {
      var temp = value + '';
      var tn;
      var length = temp.length;
      if (length < min) {
        return value.toPrecision(min);
      } else {
        temp = value.toPrecision(max);
        tn = +temp;
        return tn + '';
      }
    };
    /**
     * Returns grouped numeric string
     *
     * @param {string} val ?
     * @param {number} level1 ?
     * @param {string} sep ?
     * @param {string} decimalSymbol ?
     * @param {number} level2 ?
     * @returns {string} ?
     */
    NumberFormat.groupNumbers = function (val, level1, sep, decimalSymbol, level2) {
      var flag = !isNullOrUndefined(level2) && level2 !== 0;
      var split = val.split(decimalSymbol);
      var prefix = split[0];
      var length = prefix.length;
      var str = '';
      while (length > level1) {
        str = prefix.slice(length - level1, length) + (str.length ? sep + str : '');
        length -= level1;
        if (flag) {
          level1 = level2;
          flag = false;
        }
      }
      split[0] = prefix.slice(0, length) + (str.length ? sep : '') + str;
      return split.join(decimalSymbol);
    };
    /**
     * Returns fraction processed numeric string
     *
     * @param {number} value ?
     * @param {number} min ?
     * @param {number} max ?
     * @param {NumberFormatOptions} [option] ?
     * @returns {string} ?
     */
    NumberFormat.processFraction = function (value, min, max, option) {
      var temp = (value + '').split('.')[1];
      var length = temp ? temp.length : 0;
      if (min && length < min) {
        var ret = '';
        if (length === 0) {
          ret = value.toFixed(min);
        } else {
          ret += value;
          for (var j = 0; j < min - length; j++) {
            ret += '0';
          }
          return ret;
        }
        return value.toFixed(min);
      } else if (!isNullOrUndefined(max) && (length > max || max === 0)) {
        return value.toFixed(max);
      }
      var str = value + '';
      if (str[0] === '0' && option && option.format === '###.00') {
        str = str.slice(1);
      }
      return str;
    };
    /**
     * Returns integer processed numeric string
     *
     * @param {string} value ?
     * @param {number} min ?
     * @returns {string} ?
     */
    NumberFormat.processMinimumIntegers = function (value, min) {
      var temp = value.split('.');
      var lead = temp[0];
      var len = lead.length;
      if (len < min) {
        for (var i = 0; i < min - len; i++) {
          lead = '0' + lead;
        }
        temp[0] = lead;
      }
      return temp.join('.');
    };
    /**
     * Returns custom format for pivot table
     *
     * @param {number} value ?
     * @returns {string} ?
     */
    NumberFormat.customPivotFormat = function (value) {
      if (value >= 500000) {
        value /= 1000000;
        // eslint-disable-next-line
        var _a = value.toString().split('.'),
          integer = _a[0],
          decimal = _a[1];
        return decimal && +decimal.substring(0, 1) >= 5 ? Math.ceil(value).toString() : Math.floor(value).toString();
      }
      return '';
    };
    return NumberFormat;
  }();
  var standalone$1 = 'stand-alone';
  var latnRegex = /^[0-9]*$/;
  var timeSetter$1 = {
    minute: 'setMinutes',
    hour: 'setHours',
    second: 'setSeconds',
    day: 'setDate',
    month: 'setMonth',
    milliseconds: 'setMilliseconds'
  };
  var month = 'months';
  /* tslint:disable no-any */
  /**
   * Date Parser.
   *
   * @private
   */
  var DateParser = /** @class */function () {
    function DateParser() {}
    /**
     * Returns the parser function for given skeleton.
     *
     * @param {string} culture -  Specifies the culture name to be which formatting.
     * @param {DateFormatOptions} option - Specific the format in which string date  will be parsed.
     * @param {Object} cldr - Specifies the global cldr data collection.
     * @returns {Function} ?
     */
    DateParser.dateParser = function (culture, option, cldr) {
      var _this = this;
      var dependable = exports.IntlBase.getDependables(cldr, culture, option.calendar);
      var numOptions = ParserBase.getCurrentNumericOptions(dependable.parserObject, ParserBase.getNumberingSystem(cldr), false, isBlazor());
      var parseOptions = {};
      if (isBlazor() && option.isServerRendered) {
        option = exports.IntlBase.compareBlazorDateFormats(option, culture);
      }
      var resPattern = option.format || exports.IntlBase.getResultantPattern(option.skeleton, dependable.dateObject, option.type, false, isBlazor() ? culture : '');
      var regexString = '';
      var hourOnly;
      if (isUndefined(resPattern)) {
        throwError('Format options or type given must be invalid');
      } else {
        resPattern = exports.IntlBase.ConvertDateToWeekFormat(resPattern);
        parseOptions = {
          isIslamic: exports.IntlBase.islamicRegex.test(option.calendar),
          pattern: resPattern,
          evalposition: {},
          culture: culture
        };
        var patternMatch = resPattern.match(exports.IntlBase.dateParseRegex) || [];
        var length_1 = patternMatch.length;
        var gmtCorrection = 0;
        var zCorrectTemp = 0;
        var isgmtTraversed = false;
        var nRegx = numOptions.numericRegex;
        // eslint-disable-next-line
        var numMapper = isBlazor() ? dependable.parserObject.numbers : ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr));
        for (var i = 0; i < length_1; i++) {
          var str = patternMatch[parseInt(i.toString(), 10)];
          var len = str.length;
          var _char3 = str[0] === 'K' ? 'h' : str[0];
          var isNumber = void 0;
          var canUpdate = void 0;
          // eslint-disable-next-line
          var charKey = datePartMatcher[_char3];
          var optional = len === 2 ? '' : '?';
          if (isgmtTraversed) {
            gmtCorrection = zCorrectTemp;
            isgmtTraversed = false;
          }
          switch (_char3) {
            case 'E':
            case 'c':
              // eslint-disable-next-line
              var weekData = void 0;
              if (isBlazor()) {
                // eslint-disable-next-line
                weekData = getValue('days.' + exports.IntlBase.monthIndex[len], dependable.dateObject);
              } else {
                // eslint-disable-next-line
                weekData = dependable.dateObject[exports.IntlBase.days][standalone$1][exports.IntlBase.monthIndex[len]];
              }
              // eslint-disable-next-line
              var weekObject = ParserBase.reverseObject(weekData);
              // tslint:enable
              regexString += '(' + Object.keys(weekObject).join('|') + ')';
              break;
            case 'M':
            case 'L':
            case 'd':
            case 'm':
            case 's':
            case 'h':
            case 'H':
            case 'f':
              canUpdate = true;
              if ((_char3 === 'M' || _char3 === 'L') && len > 2) {
                var monthData = void 0;
                if (isBlazor()) {
                  // eslint-disable-next-line
                  monthData = getValue('months.' + exports.IntlBase.monthIndex[len], dependable.dateObject);
                } else {
                  // eslint-disable-next-line
                  monthData = dependable.dateObject[month][standalone$1][exports.IntlBase.monthIndex[len]];
                }
                // eslint-disable-next-line
                parseOptions[charKey] = ParserBase.reverseObject(monthData);
                // eslint-disable-next-line
                regexString += '(' + Object.keys(parseOptions[charKey]).join('|') + ')';
              } else if (_char3 === 'f') {
                if (len > 3) {
                  continue;
                }
                isNumber = true;
                regexString += '(' + nRegx + nRegx + '?' + nRegx + '?' + ')';
              } else {
                isNumber = true;
                regexString += '(' + nRegx + nRegx + optional + ')';
              }
              if (_char3 === 'h') {
                parseOptions.hour12 = true;
              }
              break;
            case 'W':
              // eslint-disable-next-line
              var opt = len === 1 ? '?' : '';
              regexString += '(' + nRegx + opt + nRegx + ')';
              break;
            case 'y':
              canUpdate = isNumber = true;
              if (len === 2) {
                regexString += '(' + nRegx + nRegx + ')';
              } else {
                regexString += '(' + nRegx + '{' + len + ',})';
              }
              break;
            case 'a':
              canUpdate = true;
              // eslint-disable-next-line
              var periodValur = isBlazor() ? getValue('dayPeriods', dependable.dateObject) : getValue('dayPeriods.format.wide', dependable.dateObject);
              // eslint-disable-next-line
              parseOptions[charKey] = ParserBase.reverseObject(periodValur);
              // eslint-disable-next-line
              regexString += '(' + Object.keys(parseOptions[charKey]).join('|') + ')';
              break;
            case 'G':
              canUpdate = true;
              // eslint-disable-next-line
              var eText = len <= 3 ? 'eraAbbr' : len === 4 ? 'eraNames' : 'eraNarrow';
              // eslint-disable-next-line
              parseOptions[charKey] = ParserBase.reverseObject(isBlazor() ? getValue('eras', dependable.dateObject) : getValue('eras.' + eText, dependable.dateObject));
              // eslint-disable-next-line
              regexString += '(' + Object.keys(parseOptions[charKey]).join('|') + '?)';
              break;
            case 'z':
              // eslint-disable-next-line
              var tval = new Date().getTimezoneOffset();
              canUpdate = tval !== 0;
              // eslint-disable-next-line
              parseOptions[charKey] = getValue('dates.timeZoneNames', dependable.parserObject);
              // eslint-disable-next-line
              var tzone = parseOptions[charKey];
              hourOnly = len < 4;
              // eslint-disable-next-line
              var hpattern = hourOnly ? '+H;-H' : tzone.hourFormat;
              hpattern = hpattern.replace(/:/g, numMapper.timeSeparator);
              regexString += '(' + this.parseTimeZoneRegx(hpattern, tzone, nRegx) + ')?';
              isgmtTraversed = true;
              zCorrectTemp = hourOnly ? 6 : 12;
              break;
            case '\'':
              // eslint-disable-next-line
              var iString = str.replace(/'/g, '');
              regexString += '(' + iString + ')?';
              break;
            default:
              regexString += '([\\D])';
              break;
          }
          if (canUpdate) {
            parseOptions.evalposition["" + charKey] = {
              isNumber: isNumber,
              pos: i + 1 + gmtCorrection,
              hourOnly: hourOnly
            };
          }
          if (i === length_1 - 1 && !isNullOrUndefined(regexString)) {
            var regExp = RegExp;
            parseOptions.parserRegex = new regExp('^' + regexString + '$', 'i');
          }
        }
      }
      return function (value) {
        var parsedDateParts = _this.internalDateParse(value, parseOptions, numOptions);
        if (isNullOrUndefined(parsedDateParts) || !Object.keys(parsedDateParts).length) {
          return null;
        }
        if (parseOptions.isIslamic) {
          var dobj = {};
          var tYear = parsedDateParts.year;
          var tDate = parsedDateParts.day;
          var tMonth = parsedDateParts.month;
          var ystrig = tYear ? tYear + '' : '';
          var is2DigitYear = ystrig.length === 2;
          if (!tYear || !tMonth || !tDate || is2DigitYear) {
            dobj = exports.HijriParser.getHijriDate(new Date());
          }
          if (is2DigitYear) {
            tYear = parseInt((dobj.year + '').slice(0, 2) + ystrig, 10);
          }
          // tslint:disable-next-line
          var dateObject = exports.HijriParser.toGregorian(tYear || dobj.year, tMonth || dobj.month, tDate || dobj.date);
          parsedDateParts.year = dateObject.getFullYear();
          parsedDateParts.month = dateObject.getMonth() + 1;
          parsedDateParts.day = dateObject.getDate();
        }
        return _this.getDateObject(parsedDateParts);
      };
    };
    /* tslint:disable */
    /**
     * Returns date object for provided date options
     *
     * @param {DateParts} options ?
     * @param {Date} value ?
     * @returns {Date} ?
     */
    DateParser.getDateObject = function (options, value) {
      var res = value || new Date();
      res.setMilliseconds(0);
      var tKeys = ['hour', 'minute', 'second', 'milliseconds', 'month', 'day'];
      var y = options.year;
      var desig = options.designator;
      var tzone = options.timeZone;
      if (!isUndefined(y)) {
        var len = (y + '').length;
        if (len <= 2) {
          var century = Math.floor(res.getFullYear() / 100) * 100;
          y += century;
        }
        res.setFullYear(y);
      }
      for (var _i = 0, tKeys_1 = tKeys; _i < tKeys_1.length; _i++) {
        var key = tKeys_1[_i];
        // eslint-disable-next-line
        var tValue = options[key];
        if (isUndefined(tValue) && key === 'day') {
          res.setDate(1);
        }
        if (!isUndefined(tValue)) {
          if (key === 'month') {
            tValue -= 1;
            if (tValue < 0 || tValue > 11) {
              return new Date('invalid');
            }
            var pDate = res.getDate();
            res.setDate(1);
            // eslint-disable-next-line
            res[timeSetter$1[key]](tValue);
            var lDate = new Date(res.getFullYear(), tValue + 1, 0).getDate();
            res.setDate(pDate < lDate ? pDate : lDate);
          } else {
            if (key === 'day') {
              var lastDay = new Date(res.getFullYear(), res.getMonth() + 1, 0).getDate();
              if (tValue < 1 || tValue > lastDay) {
                return null;
              }
            }
            // eslint-disable-next-line
            res[timeSetter$1[key]](tValue);
          }
        }
      }
      if (!isUndefined(desig)) {
        var hour = res.getHours();
        if (desig === 'pm') {
          res.setHours(hour + (hour === 12 ? 0 : 12));
        } else if (hour === 12) {
          res.setHours(0);
        }
      }
      if (!isUndefined(tzone)) {
        var tzValue = tzone - res.getTimezoneOffset();
        if (tzValue !== 0) {
          res.setMinutes(res.getMinutes() + tzValue);
        }
      }
      return res;
    };
    /**
     * Returns date parsing options for provided value along with parse and numeric options
     *
     * @param {string} value ?
     * @param {ParseOptions} parseOptions ?
     * @param {NumericOptions} num ?
     * @returns {DateParts} ?
     */
    DateParser.internalDateParse = function (value, parseOptions, num) {
      var matches = value.match(parseOptions.parserRegex);
      var retOptions = {
        'hour': 0,
        'minute': 0,
        'second': 0
      };
      if (isNullOrUndefined(matches)) {
        return null;
      } else {
        var props = Object.keys(parseOptions.evalposition);
        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {
          var prop = props_1[_i];
          var curObject = parseOptions.evalposition["" + prop];
          var matchString = matches[curObject.pos];
          if (curObject.isNumber) {
            // eslint-disable-next-line
            retOptions[prop] = this.internalNumberParser(matchString, num);
          } else {
            if (prop === 'timeZone' && !isUndefined(matchString)) {
              var pos = curObject.pos;
              var val = void 0;
              var tmatch = matches[pos + 1];
              var flag = !isUndefined(tmatch);
              if (curObject.hourOnly) {
                val = this.getZoneValue(flag, tmatch, matches[pos + 4], num) * 60;
              } else {
                val = this.getZoneValue(flag, tmatch, matches[pos + 7], num) * 60;
                val += this.getZoneValue(flag, matches[pos + 4], matches[pos + 10], num);
              }
              if (!isNullOrUndefined(val)) {
                retOptions["" + prop] = val;
              }
            } else {
              var cultureOptions = ['en-US', 'en-MH', 'en-MP'];
              // eslint-disable-next-line
              matchString = prop === 'month' && !parseOptions.isIslamic && (parseOptions.culture === 'en' || parseOptions.culture === 'en-GB' || parseOptions.culture === 'en-US') ? matchString[0].toUpperCase() + matchString.substring(1).toLowerCase() : matchString;
              // eslint-disable-next-line
              matchString = prop !== 'month' && prop === 'designator' && parseOptions.culture && parseOptions.culture.indexOf('en-') !== -1 && cultureOptions.indexOf(parseOptions.culture) === -1 ? matchString.toLowerCase() : matchString;
              // eslint-disable-next-line
              retOptions[prop] = parseOptions[prop][matchString];
            }
          }
        }
        if (parseOptions.hour12) {
          retOptions.hour12 = true;
        }
      }
      return retOptions;
    };
    /**
     * Returns parsed number for provided Numeric string and Numeric Options
     *
     * @param {string} value ?
     * @param {NumericOptions} option ?
     * @returns {number} ?
     */
    DateParser.internalNumberParser = function (value, option) {
      value = ParserBase.convertValueParts(value, option.numberParseRegex, option.numericPair);
      if (latnRegex.test(value)) {
        return +value;
      }
      return null;
    };
    /**
     * Returns parsed time zone RegExp for provided hour format and time zone
     *
     * @param {string} hourFormat ?
     * @param {base.TimeZoneOptions} tZone ?
     * @param {string} nRegex ?
     * @returns {string} ?
     */
    DateParser.parseTimeZoneRegx = function (hourFormat, tZone, nRegex) {
      var pattern = tZone.gmtFormat;
      var ret;
      var cRegex = '(' + nRegex + ')' + '(' + nRegex + ')';
      var splitStr;
      ret = hourFormat.replace('+', '\\+');
      if (hourFormat.indexOf('HH') !== -1) {
        ret = ret.replace(/HH|mm/g, '(' + cRegex + ')');
      } else {
        ret = ret.replace(/H|m/g, '(' + cRegex + '?)');
      }
      // eslint-disable-next-line
      splitStr = ret.split(';').map(function (str) {
        return pattern.replace('{0}', str);
      });
      ret = splitStr.join('|') + '|' + tZone.gmtZeroFormat;
      return ret;
    };
    /**
     * Returns zone based value.
     *
     * @param {boolean} flag ?
     * @param {string} val1 ?
     * @param {string} val2 ?
     * @param {NumericOptions} num ?
     * @returns {number} ?
     */
    DateParser.getZoneValue = function (flag, val1, val2, num) {
      var ival = flag ? val1 : val2;
      if (!ival) {
        return 0;
      }
      var value = this.internalNumberParser(ival, num);
      if (flag) {
        return -value;
      }
      return value;
    };
    return DateParser;
  }();
  var regExp$1 = RegExp;
  // eslint-disable-next-line
  var parseRegex = new regExp$1('^([^0-9]*)' + '(([0-9,]*[0-9]+)(\.[0-9]+)?)' + '([Ee][+-]?[0-9]+)?([^0-9]*)$');
  var groupRegex = /,/g;
  var keys = ['minusSign', 'infinity'];
  /**
   * Module for Number Parser.
   *
   * @private
   */
  var NumberParser = /** @class */function () {
    function NumberParser() {}
    /**
     * Returns the parser function for given skeleton.
     *
     * @param {string} culture -  Specifies the culture name to be which formatting.
     * @param {NumberFormatOptions} option - Specific the format in which number  will parsed.
     * @param {Object} cldr - Specifies the global cldr data collection.
     * @returns {Function} ?
     */
    NumberParser.numberParser = function (culture, option, cldr) {
      var _this = this;
      var dependable = exports.IntlBase.getDependables(cldr, culture, '', true);
      var parseOptions = {
        custom: true
      };
      var numOptions;
      if (exports.IntlBase.formatRegex.test(option.format) || !option.format) {
        extend(parseOptions, exports.IntlBase.getProperNumericSkeleton(option.format || 'N'));
        parseOptions.custom = false;
        if (!parseOptions.fractionDigits) {
          if (option.maximumFractionDigits) {
            parseOptions.maximumFractionDigits = option.maximumFractionDigits;
          }
        }
      } else {
        extend(parseOptions, exports.IntlBase.customFormat(option.format, null, null));
      }
      var numbers = getValue('numbers', dependable.parserObject);
      // eslint-disable-next-line
      numOptions = ParserBase.getCurrentNumericOptions(dependable.parserObject, ParserBase.getNumberingSystem(cldr), true, isBlazor());
      parseOptions.symbolRegex = ParserBase.getSymbolRegex(Object.keys(numOptions.symbolMatch));
      // eslint-disable-next-line
      parseOptions.infinity = numOptions.symbolNumberSystem[keys[1]];
      var symbolpattern;
      if (!isBlazor()) {
        symbolpattern = exports.IntlBase.getSymbolPattern(parseOptions.type, numOptions.numberSystem, dependable.numericObject, parseOptions.isAccount);
        if (symbolpattern) {
          symbolpattern = symbolpattern.replace(/\u00A4/g, exports.IntlBase.defaultCurrency);
          var split = symbolpattern.split(';');
          parseOptions.nData = exports.IntlBase.getFormatData(split[1] || '-' + split[0], true, '');
          parseOptions.pData = exports.IntlBase.getFormatData(split[0], true, '');
        }
      } else {
        parseOptions.nData = extend({}, {}, getValue(parseOptions.type + 'nData', numbers));
        parseOptions.pData = extend({}, {}, getValue(parseOptions.type + 'pData', numbers));
        if (parseOptions.type === 'currency' && option.currency) {
          exports.IntlBase.replaceBlazorCurrency([parseOptions.pData, parseOptions.nData], getValue('currencySymbol', numbers), option.currency);
        }
      }
      return function (value) {
        return _this.getParsedNumber(value, parseOptions, numOptions);
      };
    };
    /**
     * Returns parsed number for the provided formatting options
     *
     * @param {string} value ?
     * @param {NumericParts} options ?
     * @param {NumericOptions} numOptions ?
     * @returns {number} ?
     */
    NumberParser.getParsedNumber = function (value, options, numOptions) {
      var isNegative;
      var isPercent;
      var tempValue;
      var lead;
      var end;
      var ret;
      if (value.indexOf(options.infinity) !== -1) {
        return Infinity;
      } else {
        value = ParserBase.convertValueParts(value, options.symbolRegex, numOptions.symbolMatch);
        value = ParserBase.convertValueParts(value, numOptions.numberParseRegex, numOptions.numericPair);
        value = value.indexOf('-') !== -1 ? value.replace('-.', '-0.') : value;
        if (value.indexOf('.') === 0) {
          value = '0' + value;
        }
        var matches = value.match(parseRegex);
        if (isNullOrUndefined(matches)) {
          return NaN;
        }
        lead = matches[1];
        tempValue = matches[2];
        var exponent = matches[5];
        end = matches[6];
        isNegative = options.custom ? lead === options.nData.nlead && end === options.nData.nend : lead.indexOf(options.nData.nlead) !== -1 && end.indexOf(options.nData.nend) !== -1;
        isPercent = isNegative ? options.nData.isPercent : options.pData.isPercent;
        tempValue = tempValue.replace(groupRegex, '');
        if (exponent) {
          tempValue += exponent;
        }
        ret = +tempValue;
        if (options.type === 'percent' || isPercent) {
          ret = ret / 100;
        }
        if (options.custom || options.fractionDigits) {
          ret = parseFloat(ret.toFixed(options.custom ? isNegative ? options.nData.maximumFractionDigits : options.pData.maximumFractionDigits : options.fractionDigits));
        }
        if (options.maximumFractionDigits) {
          ret = this.convertMaxFracDigits(tempValue, options, ret, isNegative);
        }
        if (isNegative) {
          ret *= -1;
        }
        return ret;
      }
    };
    NumberParser.convertMaxFracDigits = function (value, options, ret, isNegative) {
      var decimalSplitValue = value.split('.');
      if (decimalSplitValue[1] && decimalSplitValue[1].length > options.maximumFractionDigits) {
        ret = +ret.toFixed(options.custom ? isNegative ? options.nData.maximumFractionDigits : options.pData.maximumFractionDigits : options.maximumFractionDigits);
      }
      return ret;
    };
    return NumberParser;
  }();
  var Observer = /** @class */function () {
    function Observer(context) {
      this.ranArray = [];
      this.boundedEvents = {};
      if (isNullOrUndefined(context)) {
        return;
      }
      this.context = context;
    }
    /**
     * To attach handler for given property in current context.
     *
     * @param {string} property - specifies the name of the event.
     * @param {Function} handler - Specifies the handler function to be called while event notified.
     * @param {Object} context - Specifies the context binded to the handler.
     * @param {string} id - specifies the random generated id.
     * @returns {void}
     */
    Observer.prototype.on = function (property, handler, context, id) {
      if (isNullOrUndefined(handler)) {
        return;
      }
      var cntxt = context || this.context;
      if (this.notExist(property)) {
        this.boundedEvents["" + property] = [{
          handler: handler,
          context: cntxt,
          id: id
        }];
        return;
      }
      if (!isNullOrUndefined(id)) {
        if (this.ranArray.indexOf(id) === -1) {
          this.ranArray.push(id);
          this.boundedEvents["" + property].push({
            handler: handler,
            context: cntxt,
            id: id
          });
        }
      } else if (!this.isHandlerPresent(this.boundedEvents["" + property], handler)) {
        this.boundedEvents["" + property].push({
          handler: handler,
          context: cntxt
        });
      }
    };
    /**
     * To remove handlers from a event attached using on() function.
     *
     * @param {string} property - specifies the name of the event.
     * @param {Function} handler - Optional argument specifies the handler function to be called while event notified.
     * @param {string} id - specifies the random generated id.
     * @returns {void} ?
     */
    Observer.prototype.off = function (property, handler, id) {
      if (this.notExist(property)) {
        return;
      }
      var curObject = getValue(property, this.boundedEvents);
      if (handler) {
        for (var i = 0; i < curObject.length; i++) {
          if (id) {
            if (curObject[parseInt(i.toString(), 10)].id === id) {
              curObject.splice(i, 1);
              var indexLocation = this.ranArray.indexOf(id);
              if (indexLocation !== -1) {
                this.ranArray.splice(indexLocation, 1);
              }
              break;
            }
          } else if (handler === curObject[parseInt(i.toString(), 10)].handler) {
            curObject.splice(i, 1);
            break;
          }
        }
      } else {
        delete this.boundedEvents["" + property];
      }
    };
    /**
     * To notify the handlers in the specified event.
     *
     * @param {string} property - Specifies the event to be notify.
     * @param {Object} argument - Additional parameters to pass while calling the handler.
     * @param {Function} successHandler - this function will invoke after event successfully triggered
     * @param {Function} errorHandler - this function will invoke after event if it was failure to call.
     * @returns {void} ?
     */
    Observer.prototype.notify = function (property, argument, successHandler, errorHandler) {
      if (this.notExist(property)) {
        if (successHandler) {
          successHandler.call(this, argument);
        }
        return;
      }
      if (argument) {
        argument.name = property;
      }
      var blazor = 'Blazor';
      var curObject = getValue(property, this.boundedEvents).slice(0);
      if (window["" + blazor]) {
        return this.blazorCallback(curObject, argument, successHandler, errorHandler, 0);
      } else {
        for (var _i = 0, curObject_1 = curObject; _i < curObject_1.length; _i++) {
          var cur = curObject_1[_i];
          cur.handler.call(cur.context, argument);
        }
        if (successHandler) {
          successHandler.call(this, argument);
        }
      }
    };
    Observer.prototype.blazorCallback = function (objs, argument, successHandler, errorHandler, index) {
      var _this = this;
      var isTrigger = index === objs.length - 1;
      if (index < objs.length) {
        var obj_1 = objs[parseInt(index.toString(), 10)];
        var promise = obj_1.handler.call(obj_1.context, argument);
        if (promise && typeof promise.then === 'function') {
          if (!successHandler) {
            return promise;
          }
          promise.then(function (data) {
            data = typeof data === 'string' && _this.isJson(data) ? JSON.parse(data, _this.dateReviver) : data;
            extend(argument, argument, data, true);
            if (successHandler && isTrigger) {
              successHandler.call(obj_1.context, argument);
            } else {
              return _this.blazorCallback(objs, argument, successHandler, errorHandler, index + 1);
            }
          })["catch"](function (data) {
            if (errorHandler) {
              errorHandler.call(obj_1.context, typeof data === 'string' && _this.isJson(data) ? JSON.parse(data, _this.dateReviver) : data);
            }
          });
        } else if (successHandler && isTrigger) {
          successHandler.call(obj_1.context, argument);
        } else {
          return this.blazorCallback(objs, argument, successHandler, errorHandler, index + 1);
        }
      }
    };
    // eslint-disable-next-line
    Observer.prototype.dateReviver = function (key, value) {
      var dPattern = /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/;
      if (isBlazor && typeof value === 'string' && value.match(dPattern) !== null) {
        return new Date(value);
      }
      return value;
    };
    Observer.prototype.isJson = function (value) {
      try {
        JSON.parse(value);
      } catch (e) {
        return false;
      }
      return true;
    };
    /**
     * To destroy handlers in the event
     *
     * @returns {void} ?
     */
    Observer.prototype.destroy = function () {
      this.boundedEvents = this.context = undefined;
    };
    /**
     * To remove internationalization events
     *
     * @returns {void} ?
     */
    Observer.prototype.offIntlEvents = function () {
      // eslint-disable-next-line
      var eventsArr = this.boundedEvents['notifyExternalChange'];
      if (eventsArr) {
        for (var i = 0; i < eventsArr.length; i++) {
          // eslint-disable-next-line
          var curContext = eventsArr[0].context;
          if (curContext && curContext.detectFunction && curContext.randomId && !curContext.isRendered) {
            this.off('notifyExternalChange', curContext.detectFunction, curContext.randomId);
            i--;
          }
        }
        if (!this.boundedEvents['notifyExternalChange'].length) {
          delete this.boundedEvents['notifyExternalChange'];
        }
      }
    };
    /**
     * Returns if the property exists.
     *
     * @param {string} prop ?
     * @returns {boolean} ?
     */
    Observer.prototype.notExist = function (prop) {
      // eslint-disable-next-line
      return this.boundedEvents.hasOwnProperty(prop) === false || this.boundedEvents[prop].length <= 0;
    };
    /**
     * Returns if the handler is present.
     *
     * @param {BoundOptions[]} boundedEvents ?
     * @param {Function} handler ?
     * @returns {boolean} ?
     */
    Observer.prototype.isHandlerPresent = function (boundedEvents, handler) {
      for (var _i = 0, boundedEvents_1 = boundedEvents; _i < boundedEvents_1.length; _i++) {
        var cur = boundedEvents_1[_i];
        if (cur.handler === handler) {
          return true;
        }
      }
      return false;
    };
    return Observer;
  }();

  /**
   * Specifies the observer used for external change detection.
   */
  var onIntlChange = new Observer();
  /**
   * Specifies the default rtl status for EJ2 components.
   */
  exports.rightToLeft = false;
  /**
   * Specifies the CLDR data loaded for internationalization functionalities.
   *
   * @private
   */
  var cldrData = {};
  /**
   * Specifies the default culture value to be considered.
   *
   * @private
   */
  exports.defaultCulture = 'en-US';
  /**
   * Specifies default currency code to be considered
   *
   * @private
   */
  exports.defaultCurrencyCode = 'USD';
  var mapper = ['numericObject', 'dateObject'];
  /**
   * Internationalization class provides support to parse and format the number and date object to the desired format.
   * ```typescript
   * // To set the culture globally
   * setCulture('en-GB');
   *
   * // To set currency code globally
   * setCurrencyCode('EUR');
   *
   * //Load cldr data
   * loadCldr(gregorainData);
   * loadCldr(timeZoneData);
   * loadCldr(numbersData);
   * loadCldr(numberSystemData);
   *
   * // To use formatter in component side
   * let Intl:Internationalization = new Internationalization();
   *
   * // Date formatting
   * let dateFormatter: Function = Intl.getDateFormat({skeleton:'long',type:'dateTime'});
   * dateFormatter(new Date('11/2/2016'));
   * dateFormatter(new Date('25/2/2030'));
   * Intl.formatDate(new Date(),{skeleton:'E'});
   *
   * //Number formatting
   * let numberFormatter: Function = Intl.getNumberFormat({skeleton:'C5'})
   * numberFormatter(24563334);
   * Intl.formatNumber(123123,{skeleton:'p2'});
   *
   * // Date parser
   * let dateParser: Function = Intl.getDateParser({skeleton:'short',type:'time'});
   * dateParser('10:30 PM');
   * Intl.parseDate('10',{skeleton:'H'});
   * ```
   */
  var Internationalization = /** @class */function () {
    function Internationalization(cultureName) {
      if (cultureName) {
        this.culture = cultureName;
      }
    }
    /**
     * Returns the format function for given options.
     *
     * @param {DateFormatOptions} options - Specifies the format options in which the format function will return.
     * @returns {Function} ?
     */
    Internationalization.prototype.getDateFormat = function (options) {
      return DateFormat.dateFormat(this.getCulture(), options || {
        type: 'date',
        skeleton: 'short'
      }, cldrData);
    };
    /**
     * Returns the format function for given options.
     *
     * @param {NumberFormatOptions} options - Specifies the format options in which the format function will return.
     * @returns {Function} ?
     */
    Internationalization.prototype.getNumberFormat = function (options) {
      if (options && !options.currency) {
        options.currency = exports.defaultCurrencyCode;
      }
      if (isBlazor() && options && !options.format) {
        options.minimumFractionDigits = 0;
      }
      return NumberFormat.numberFormatter(this.getCulture(), options || {}, cldrData);
    };
    /**
     * Returns the parser function for given options.
     *
     * @param {DateFormatOptions} options - Specifies the format options in which the parser function will return.
     * @returns {Function} ?
     */
    Internationalization.prototype.getDateParser = function (options) {
      return DateParser.dateParser(this.getCulture(), options || {
        skeleton: 'short',
        type: 'date'
      }, cldrData);
    };
    /**
     * Returns the parser function for given options.
     *
     * @param {NumberFormatOptions} options - Specifies the format options in which the parser function will return.
     * @returns {Function} ?
     */
    Internationalization.prototype.getNumberParser = function (options) {
      if (isBlazor() && options && !options.format) {
        options.minimumFractionDigits = 0;
      }
      return NumberParser.numberParser(this.getCulture(), options || {
        format: 'N'
      }, cldrData);
    };
    /**
     * Returns the formatted string based on format options.
     *
     * @param {number} value - Specifies the number to format.
     * @param {NumberFormatOptions} option - Specifies the format options in which the number will be formatted.
     * @returns {string} ?
     */
    Internationalization.prototype.formatNumber = function (value, option) {
      return this.getNumberFormat(option)(value);
    };
    /**
     * Returns the formatted date string based on format options.
     *
     * @param {Date} value - Specifies the number to format.
     * @param {DateFormatOptions} option - Specifies the format options in which the number will be formatted.
     * @returns {string} ?
     */
    Internationalization.prototype.formatDate = function (value, option) {
      return this.getDateFormat(option)(value);
    };
    /**
     * Returns the date object for given date string and options.
     *
     * @param {string} value - Specifies the string to parse.
     * @param {DateFormatOptions} option - Specifies the parse options in which the date string will be parsed.
     * @returns {Date} ?
     */
    Internationalization.prototype.parseDate = function (value, option) {
      return this.getDateParser(option)(value);
    };
    /**
     * Returns the number object from the given string value and options.
     *
     * @param {string} value - Specifies the string to parse.
     * @param {NumberFormatOptions} option - Specifies the parse options in which the  string number  will be parsed.
     * @returns {number} ?
     */
    Internationalization.prototype.parseNumber = function (value, option) {
      return this.getNumberParser(option)(value);
    };
    /**
     * Returns Native Date Time Pattern
     *
     * @param {DateFormatOptions} option - Specifies the parse options for resultant date time pattern.
     * @param {boolean} isExcelFormat - Specifies format value to be converted to excel pattern.
     * @returns {string} ?
     * @private
     */
    Internationalization.prototype.getDatePattern = function (option, isExcelFormat) {
      return exports.IntlBase.getActualDateTimeFormat(this.getCulture(), option, cldrData, isExcelFormat);
    };
    /**
     * Returns Native Number Pattern
     *
     * @param {NumberFormatOptions} option - Specifies the parse options for resultant number pattern.
     * @param {boolean} isExcel ?
     * @returns {string} ?
     * @private
     */
    Internationalization.prototype.getNumberPattern = function (option, isExcel) {
      return exports.IntlBase.getActualNumberFormat(this.getCulture(), option, cldrData, isExcel);
    };
    /**
     * Returns the First Day of the Week
     *
     * @returns {number} ?
     */
    Internationalization.prototype.getFirstDayOfWeek = function () {
      return exports.IntlBase.getWeekData(this.getCulture(), cldrData);
    };
    /**
     * Returns the culture
     *
     * @returns {string} ?
     */
    Internationalization.prototype.getCulture = function () {
      return this.culture || exports.defaultCulture;
    };
    return Internationalization;
  }();
  /**
   * Set the default culture to all EJ2 components
   *
   * @param {string} cultureName - Specifies the culture name to be set as default culture.
   * @returns {void} ?
   */
  function setCulture(cultureName) {
    exports.defaultCulture = cultureName;
    onIntlChange.notify('notifyExternalChange', {
      'locale': exports.defaultCulture
    });
  }
  /**
   * Set the default currency code to all EJ2 components
   *
   * @param {string} currencyCode Specifies the culture name to be set as default culture.
   * @returns {void} ?
   */
  function setCurrencyCode(currencyCode) {
    exports.defaultCurrencyCode = currencyCode;
    onIntlChange.notify('notifyExternalChange', {
      'currencyCode': exports.defaultCurrencyCode
    });
  }
  /**
   * Load the CLDR data into context
   *
   * @param {Object[]} data Specifies the CLDR data's to be used for formatting and parser.
   * @returns {void} ?
   */
  function loadCldr() {
    var data = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      data[_i] = arguments[_i];
    }
    for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {
      var obj = data_1[_a];
      extend(cldrData, obj, {}, true);
    }
  }
  /**
   * To enable or disable RTL functionality for all components globally.
   *
   * @param {boolean} status - Optional argument Specifies the status value to enable or disable rtl option.
   * @returns {void} ?
   */
  function enableRtl(status) {
    if (status === void 0) {
      status = true;
    }
    exports.rightToLeft = status;
    onIntlChange.notify('notifyExternalChange', {
      enableRtl: exports.rightToLeft
    });
  }
  /**
   * To get the numeric CLDR object for given culture
   *
   * @param {string} locale - Specifies the locale for which numericObject to be returned.
   * @param {string} type ?
   * @returns {Object} ?
   * @ignore
   * @private
   */
  function getNumericObject(locale, type) {
    // eslint-disable-next-line
    var numObject = exports.IntlBase.getDependables(cldrData, locale, '', true)[mapper[0]];
    // eslint-disable-next-line
    var dateObject = exports.IntlBase.getDependables(cldrData, locale, '')[mapper[1]];
    var numSystem = getValue('defaultNumberingSystem', numObject);
    var symbPattern = isBlazor() ? getValue('numberSymbols', numObject) : getValue('symbols-numberSystem-' + numSystem, numObject);
    var pattern = exports.IntlBase.getSymbolPattern(type || 'decimal', numSystem, numObject, false);
    return extend(symbPattern, exports.IntlBase.getFormatData(pattern, true, '', true), {
      'dateSeparator': exports.IntlBase.getDateSeparator(dateObject)
    });
  }
  /**
   * To get the numeric CLDR  number base object for given culture
   *
   * @param {string} locale - Specifies the locale for which numericObject to be returned.
   * @param {string} currency - Specifies the currency for which numericObject to be returned.
   * @returns {string} ?
   * @ignore
   * @private
   */
  function getNumberDependable(locale, currency) {
    // eslint-disable-next-line
    var numObject = exports.IntlBase.getDependables(cldrData, locale, '', true);
    // eslint-disable-next-line
    return exports.IntlBase.getCurrencySymbol(numObject.numericObject, currency);
  }
  /**
   * To get the default date CLDR object.
   *
   * @param {string} mode ?
   * @returns {Object} ?
   * @ignore
   * @private
   */
  function getDefaultDateObject(mode) {
    // eslint-disable-next-line
    return exports.IntlBase.getDependables(cldrData, '', mode, false)[mapper[1]];
  }
  var regExp = RegExp;
  var blazorCultureFormats = {
    'en-US': {
      'd': 'M/d/y',
      'D': 'EEEE, MMMM d, y',
      'f': 'EEEE, MMMM d, y h:mm a',
      'F': 'EEEE, MMMM d, y h:mm:s a',
      'g': 'M/d/y h:mm a',
      'G': 'M/d/yyyy h:mm:ss tt',
      'm': 'MMMM d',
      'M': 'MMMM d',
      'r': 'ddd, dd MMM yyyy HH\':\'mm\':\'ss \'GMT\'',
      'R': 'ddd, dd MMM yyyy HH\':\'mm\':\'ss \'GMT\'',
      's': 'yyyy\'-\'MM\'-\'dd\'T\'HH\':\'mm\':\'ss',
      't': 'h:mm tt',
      'T': 'h:m:s tt',
      'u': 'yyyy\'-\'MM\'-\'dd HH\':\'mm\':\'ss\'Z\'',
      'U': 'dddd, MMMM d, yyyy h:mm:ss tt',
      'y': 'MMMM yyyy',
      'Y': 'MMMM yyyy'
    }
  };
  /**
   * Date base common constants and function for date parser and formatter.
   */
  // eslint-disable-next-line

  (function (IntlBase) {
    /* eslint-disable */
    // tslint:disable-next-line:max-line-length.
    IntlBase.negativeDataRegex = /^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;
    IntlBase.customRegex = /^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;
    IntlBase.latnParseRegex = /0|1|2|3|4|5|6|7|8|9/g;
    var fractionRegex = /[0-9]/g;
    IntlBase.defaultCurrency = '$';
    var mapper = ['infinity', 'nan', 'group', 'decimal'];
    var patternRegex = /G|M|L|H|c|'| a|yy|y|EEEE|E/g;
    var patternMatch = {
      'G': '',
      'M': 'm',
      'L': 'm',
      'H': 'h',
      'c': 'd',
      '\'': '"',
      ' a': ' AM/PM',
      'yy': 'yy',
      'y': 'yyyy',
      'EEEE': 'dddd',
      'E': 'ddd'
    };
    IntlBase.dateConverterMapper = /dddd|ddd/ig;
    var defaultFirstDay = 'sun';
    IntlBase.islamicRegex = /^islamic/;
    var firstDayMapper = {
      'sun': 0,
      'mon': 1,
      'tue': 2,
      'wed': 3,
      'thu': 4,
      'fri': 5,
      'sat': 6
    };
    IntlBase.formatRegex = new regExp("(^[ncpae]{1})([0-1]?[0-9]|20)?$", "i");
    IntlBase.currencyFormatRegex = new regExp("(^[ca]{1})([0-1]?[0-9]|20)?$", "i");
    IntlBase.curWithoutNumberRegex = /(c|a)$/ig;
    var typeMapper = {
      '$': 'isCurrency',
      '%': 'isPercent',
      '-': 'isNegative',
      0: 'nlead',
      1: 'nend'
    };
    IntlBase.dateParseRegex = /([a-z])\1*|'([^']|'')+'|''|./gi;
    IntlBase.basicPatterns = ['short', 'medium', 'long', 'full'];
    /* tslint:disable:quotemark */
    IntlBase.defaultObject = {
      'dates': {
        'calendars': {
          'gregorian': {
            'months': {
              'stand-alone': {
                'abbreviated': {
                  '1': 'Jan',
                  '2': 'Feb',
                  '3': 'Mar',
                  '4': 'Apr',
                  '5': 'May',
                  '6': 'Jun',
                  '7': 'Jul',
                  '8': 'Aug',
                  '9': 'Sep',
                  '10': 'Oct',
                  '11': 'Nov',
                  '12': 'Dec'
                },
                'narrow': {
                  '1': 'J',
                  '2': 'F',
                  '3': 'M',
                  '4': 'A',
                  '5': 'M',
                  '6': 'J',
                  '7': 'J',
                  '8': 'A',
                  '9': 'S',
                  '10': 'O',
                  '11': 'N',
                  '12': 'D'
                },
                'wide': {
                  '1': 'January',
                  '2': 'February',
                  '3': 'March',
                  '4': 'April',
                  '5': 'May',
                  '6': 'June',
                  '7': 'July',
                  '8': 'August',
                  '9': 'September',
                  '10': 'October',
                  '11': 'November',
                  '12': 'December'
                }
              }
            },
            'days': {
              'stand-alone': {
                'abbreviated': {
                  'sun': 'Sun',
                  'mon': 'Mon',
                  'tue': 'Tue',
                  'wed': 'Wed',
                  'thu': 'Thu',
                  'fri': 'Fri',
                  'sat': 'Sat'
                },
                'narrow': {
                  'sun': 'S',
                  'mon': 'M',
                  'tue': 'T',
                  'wed': 'W',
                  'thu': 'T',
                  'fri': 'F',
                  'sat': 'S'
                },
                'short': {
                  'sun': 'Su',
                  'mon': 'Mo',
                  'tue': 'Tu',
                  'wed': 'We',
                  'thu': 'Th',
                  'fri': 'Fr',
                  'sat': 'Sa'
                },
                'wide': {
                  'sun': 'Sunday',
                  'mon': 'Monday',
                  'tue': 'Tuesday',
                  'wed': 'Wednesday',
                  'thu': 'Thursday',
                  'fri': 'Friday',
                  'sat': 'Saturday'
                }
              }
            },
            'dayPeriods': {
              'format': {
                'wide': {
                  'am': 'AM',
                  'pm': 'PM'
                }
              }
            },
            'eras': {
              'eraNames': {
                '0': 'Before Christ',
                '0-alt-variant': 'Before Common Era',
                '1': 'Anno Domini',
                '1-alt-variant': 'Common Era'
              },
              'eraAbbr': {
                '0': 'BC',
                '0-alt-variant': 'BCE',
                '1': 'AD',
                '1-alt-variant': 'CE'
              },
              'eraNarrow': {
                '0': 'B',
                '0-alt-variant': 'BCE',
                '1': 'A',
                '1-alt-variant': 'CE'
              }
            },
            'dateFormats': {
              'full': 'EEEE, MMMM d, y',
              'long': 'MMMM d, y',
              'medium': 'MMM d, y',
              'short': 'M/d/yy'
            },
            'timeFormats': {
              'full': 'h:mm:ss a zzzz',
              'long': 'h:mm:ss a z',
              'medium': 'h:mm:ss a',
              'short': 'h:mm a'
            },
            'dateTimeFormats': {
              'full': '{1} \'at\' {0}',
              'long': '{1} \'at\' {0}',
              'medium': '{1}, {0}',
              'short': '{1}, {0}',
              'availableFormats': {
                'd': 'd',
                'E': 'ccc',
                'Ed': 'd E',
                'Ehm': 'E h:mm a',
                'EHm': 'E HH:mm',
                'Ehms': 'E h:mm:ss a',
                'EHms': 'E HH:mm:ss',
                'Gy': 'y G',
                'GyMMM': 'MMM y G',
                'GyMMMd': 'MMM d, y G',
                'GyMMMEd': 'E, MMM d, y G',
                'h': 'h a',
                'H': 'HH',
                'hm': 'h:mm a',
                'Hm': 'HH:mm',
                'hms': 'h:mm:ss a',
                'Hms': 'HH:mm:ss',
                'hmsv': 'h:mm:ss a v',
                'Hmsv': 'HH:mm:ss v',
                'hmv': 'h:mm a v',
                'Hmv': 'HH:mm v',
                'M': 'L',
                'Md': 'M/d',
                'MEd': 'E, M/d',
                'MMM': 'LLL',
                'MMMd': 'MMM d',
                'MMMEd': 'E, MMM d',
                'MMMMd': 'MMMM d',
                'ms': 'mm:ss',
                'y': 'y',
                'yM': 'M/y',
                'yMd': 'M/d/y',
                'yMEd': 'E, M/d/y',
                'yMMM': 'MMM y',
                'yMMMd': 'MMM d, y',
                'yMMMEd': 'E, MMM d, y',
                'yMMMM': 'MMMM y'
              }
            }
          },
          'islamic': {
            'months': {
              'stand-alone': {
                'abbreviated': {
                  '1': 'Muh.',
                  '2': 'Saf.',
                  '3': 'Rab. I',
                  '4': 'Rab. II',
                  '5': 'Jum. I',
                  '6': 'Jum. II',
                  '7': 'Raj.',
                  '8': 'Sha.',
                  '9': 'Ram.',
                  '10': 'Shaw.',
                  '11': 'Dhuʻl-Q.',
                  '12': 'Dhuʻl-H.'
                },
                'narrow': {
                  '1': '1',
                  '2': '2',
                  '3': '3',
                  '4': '4',
                  '5': '5',
                  '6': '6',
                  '7': '7',
                  '8': '8',
                  '9': '9',
                  '10': '10',
                  '11': '11',
                  '12': '12'
                },
                'wide': {
                  '1': 'Muharram',
                  '2': 'Safar',
                  '3': 'Rabiʻ I',
                  '4': 'Rabiʻ II',
                  '5': 'Jumada I',
                  '6': 'Jumada II',
                  '7': 'Rajab',
                  '8': 'Shaʻban',
                  '9': 'Ramadan',
                  '10': 'Shawwal',
                  '11': 'Dhuʻl-Qiʻdah',
                  '12': 'Dhuʻl-Hijjah'
                }
              }
            },
            'days': {
              'stand-alone': {
                'abbreviated': {
                  'sun': 'Sun',
                  'mon': 'Mon',
                  'tue': 'Tue',
                  'wed': 'Wed',
                  'thu': 'Thu',
                  'fri': 'Fri',
                  'sat': 'Sat'
                },
                'narrow': {
                  'sun': 'S',
                  'mon': 'M',
                  'tue': 'T',
                  'wed': 'W',
                  'thu': 'T',
                  'fri': 'F',
                  'sat': 'S'
                },
                'short': {
                  'sun': 'Su',
                  'mon': 'Mo',
                  'tue': 'Tu',
                  'wed': 'We',
                  'thu': 'Th',
                  'fri': 'Fr',
                  'sat': 'Sa'
                },
                'wide': {
                  'sun': 'Sunday',
                  'mon': 'Monday',
                  'tue': 'Tuesday',
                  'wed': 'Wednesday',
                  'thu': 'Thursday',
                  'fri': 'Friday',
                  'sat': 'Saturday'
                }
              }
            },
            'dayPeriods': {
              'format': {
                'wide': {
                  'am': 'AM',
                  'pm': 'PM'
                }
              }
            },
            'eras': {
              'eraNames': {
                '0': 'AH'
              },
              'eraAbbr': {
                '0': 'AH'
              },
              'eraNarrow': {
                '0': 'AH'
              }
            },
            'dateFormats': {
              'full': 'EEEE, MMMM d, y G',
              'long': 'MMMM d, y G',
              'medium': 'MMM d, y G',
              'short': 'M/d/y GGGGG'
            },
            'timeFormats': {
              'full': 'h:mm:ss a zzzz',
              'long': 'h:mm:ss a z',
              'medium': 'h:mm:ss a',
              'short': 'h:mm a'
            },
            'dateTimeFormats': {
              'full': '{1} \'at\' {0}',
              'long': '{1} \'at\' {0}',
              'medium': '{1}, {0}',
              'short': '{1}, {0}',
              'availableFormats': {
                'd': 'd',
                'E': 'ccc',
                'Ed': 'd E',
                'Ehm': 'E h:mm a',
                'EHm': 'E HH:mm',
                'Ehms': 'E h:mm:ss a',
                'EHms': 'E HH:mm:ss',
                'Gy': 'y G',
                'GyMMM': 'MMM y G',
                'GyMMMd': 'MMM d, y G',
                'GyMMMEd': 'E, MMM d, y G',
                'h': 'h a',
                'H': 'HH',
                'hm': 'h:mm a',
                'Hm': 'HH:mm',
                'hms': 'h:mm:ss a',
                'Hms': 'HH:mm:ss',
                'M': 'L',
                'Md': 'M/d',
                'MEd': 'E, M/d',
                'MMM': 'LLL',
                'MMMd': 'MMM d',
                'MMMEd': 'E, MMM d',
                'MMMMd': 'MMMM d',
                'ms': 'mm:ss',
                'y': 'y G',
                'yyyy': 'y G',
                'yyyyM': 'M/y GGGGG',
                'yyyyMd': 'M/d/y GGGGG',
                'yyyyMEd': 'E, M/d/y GGGGG',
                'yyyyMMM': 'MMM y G',
                'yyyyMMMd': 'MMM d, y G',
                'yyyyMMMEd': 'E, MMM d, y G',
                'yyyyMMMM': 'MMMM y G',
                'yyyyQQQ': 'QQQ y G',
                'yyyyQQQQ': 'QQQQ y G'
              }
            }
          }
        },
        'timeZoneNames': {
          'hourFormat': '+HH:mm;-HH:mm',
          'gmtFormat': 'GMT{0}',
          'gmtZeroFormat': 'GMT'
        }
      },
      'numbers': {
        'currencies': {
          'USD': {
            'displayName': 'US Dollar',
            'symbol': '$',
            'symbol-alt-narrow': '$'
          },
          'EUR': {
            'displayName': 'Euro',
            'symbol': '€',
            'symbol-alt-narrow': '€'
          },
          'GBP': {
            'displayName': 'British Pound',
            'symbol-alt-narrow': '£'
          }
        },
        'defaultNumberingSystem': 'latn',
        'minimumGroupingDigits': '1',
        'symbols-numberSystem-latn': {
          'decimal': '.',
          'group': ',',
          'list': ';',
          'percentSign': '%',
          'plusSign': '+',
          'minusSign': '-',
          'exponential': 'E',
          'superscriptingExponent': '×',
          'perMille': '‰',
          'infinity': '∞',
          'nan': 'NaN',
          'timeSeparator': ':'
        },
        'decimalFormats-numberSystem-latn': {
          'standard': '#,##0.###'
        },
        'percentFormats-numberSystem-latn': {
          'standard': '#,##0%'
        },
        'currencyFormats-numberSystem-latn': {
          'standard': '¤#,##0.00',
          'accounting': '¤#,##0.00;(¤#,##0.00)'
        },
        'scientificFormats-numberSystem-latn': {
          'standard': '#E0'
        }
      }
    };
    IntlBase.blazorDefaultObject = {
      'numbers': {
        'mapper': {
          '0': '0',
          '1': '1',
          '2': '2',
          '3': '3',
          '4': '4',
          '5': '5',
          '6': '6',
          '7': '7',
          '8': '8',
          '9': '9'
        },
        'mapperDigits': '0123456789',
        'numberSymbols': {
          'decimal': '.',
          'group': ',',
          'plusSign': '+',
          'minusSign': '-',
          'percentSign': '%',
          'nan': 'NaN',
          'timeSeparator': ':',
          'infinity': '∞'
        },
        'timeSeparator': ':',
        'currencySymbol': '$',
        'currencypData': {
          'nlead': '$',
          'nend': '',
          'groupSeparator': ',',
          'groupData': {
            'primary': 3
          },
          'maximumFraction': 2,
          'minimumFraction': 2
        },
        'percentpData': {
          'nlead': '',
          'nend': '%',
          'groupSeparator': ',',
          'groupData': {
            'primary': 3
          },
          'maximumFraction': 2,
          'minimumFraction': 2
        },
        'percentnData': {
          'nlead': '-',
          'nend': '%',
          'groupSeparator': ',',
          'groupData': {
            'primary': 3
          },
          'maximumFraction': 2,
          'minimumFraction': 2
        },
        'currencynData': {
          'nlead': '($',
          'nend': ')',
          'groupSeparator': ',',
          'groupData': {
            'primary': 3
          },
          'maximumFraction': 2,
          'minimumFraction': 2
        },
        'decimalnData': {
          'nlead': '-',
          'nend': '',
          'groupData': {
            'primary': 3
          },
          'maximumFraction': 2,
          'minimumFraction': 2
        },
        'decimalpData': {
          'nlead': '',
          'nend': '',
          'groupData': {
            'primary': 3
          },
          'maximumFraction': 2,
          'minimumFraction': 2
        }
      },
      'dates': {
        'dayPeriods': {
          'am': 'AM',
          'pm': 'PM'
        },
        'dateSeperator': '/',
        'days': {
          'abbreviated': {
            'sun': 'Sun',
            'mon': 'Mon',
            'tue': 'Tue',
            'wed': 'Wed',
            'thu': 'Thu',
            'fri': 'Fri',
            'sat': 'Sat'
          },
          'short': {
            'sun': 'Su',
            'mon': 'Mo',
            'tue': 'Tu',
            'wed': 'We',
            'thu': 'Th',
            'fri': 'Fr',
            'sat': 'Sa'
          },
          'wide': {
            'sun': 'Sunday',
            'mon': 'Monday',
            'tue': 'Tuesday',
            'wed': 'Wednesday',
            'thu': 'Thursday',
            'fri': 'Friday',
            'sat': 'Saturday'
          }
        },
        'months': {
          'abbreviated': {
            '1': 'Jan',
            '2': 'Feb',
            '3': 'Mar',
            '4': 'Apr',
            '5': 'May',
            '6': 'Jun',
            '7': 'Jul',
            '8': 'Aug',
            '9': 'Sep',
            '10': 'Oct',
            '11': 'Nov',
            '12': 'Dec'
          },
          'wide': {
            '1': 'January',
            '2': 'February',
            '3': 'March',
            '4': 'April',
            '5': 'May',
            '6': 'June',
            '7': 'July',
            '8': 'August',
            '9': 'September',
            '10': 'October',
            '11': 'November',
            '12': 'December'
          }
        },
        'eras': {
          '1': 'AD'
        }
      }
    };
    /* tslint:enable:quotemark */
    IntlBase.monthIndex = {
      3: 'abbreviated',
      4: 'wide',
      5: 'narrow',
      1: 'abbreviated'
    };
    /**
     *
     */
    IntlBase.month = 'months';
    IntlBase.days = 'days';
    /**
     * Default numerber Object
     */
    IntlBase.patternMatcher = {
      C: 'currency',
      P: 'percent',
      N: 'decimal',
      A: 'currency',
      E: 'scientific'
    };
    /**
     * Returns the resultant pattern based on the skeleton, dateObject and the type provided
     *
     * @private
     * @param {string} skeleton ?
     * @param {Object} dateObject ?
     * @param {string} type ?
     * @param {boolean} isIslamic ?
     * @param {string} blazorCulture ?
     * @returns {string} ?
     */
    function getResultantPattern(skeleton, dateObject, type, isIslamic, blazorCulture) {
      var resPattern;
      var iType = type || 'date';
      if (blazorCulture) {
        resPattern = compareBlazorDateFormats({
          skeleton: skeleton
        }, blazorCulture).format || compareBlazorDateFormats({
          skeleton: 'd'
        }, 'en-US').format;
      } else {
        if (IntlBase.basicPatterns.indexOf(skeleton) !== -1) {
          resPattern = getValue(iType + 'Formats.' + skeleton, dateObject);
          if (iType === 'dateTime') {
            var dPattern = getValue('dateFormats.' + skeleton, dateObject);
            var tPattern = getValue('timeFormats.' + skeleton, dateObject);
            resPattern = resPattern.replace('{1}', dPattern).replace('{0}', tPattern);
          }
        } else {
          resPattern = getValue('dateTimeFormats.availableFormats.' + skeleton, dateObject);
        }
        if (isUndefined(resPattern) && skeleton === 'yMd') {
          resPattern = 'M/d/y';
        }
      }
      return resPattern;
    }
    IntlBase.getResultantPattern = getResultantPattern;
    /**
     * Returns the dependable object for provided cldr data and culture
     *
     * @private
     * @param {Object} cldr ?
     * @param {string} culture ?
     * @param {string} mode ?
     * @param {boolean} isNumber ?
     * @returns {any} ?
     */
    function getDependables(cldr, culture, mode, isNumber) {
      var ret = {};
      var calendartype = mode || 'gregorian';
      ret.parserObject = ParserBase.getMainObject(cldr, culture) || (isBlazor() ? IntlBase.blazorDefaultObject : IntlBase.defaultObject);
      if (isNumber) {
        ret.numericObject = getValue('numbers', ret.parserObject);
      } else {
        var dateString = isBlazor() ? 'dates' : 'dates.calendars.' + calendartype;
        ret.dateObject = getValue(dateString, ret.parserObject);
      }
      return ret;
    }
    IntlBase.getDependables = getDependables;
    /**
     * Returns the symbol pattern for provided parameters
     *
     * @private
     * @param {string} type ?
     * @param {string} numSystem ?
     * @param {Object} obj ?
     * @param {boolean} isAccount ?
     * @returns {string} ?
     */
    function getSymbolPattern(type, numSystem, obj, isAccount) {
      return getValue(type + 'Formats-numberSystem-' + numSystem + (isAccount ? '.accounting' : '.standard'), obj) || (isAccount ? getValue(type + 'Formats-numberSystem-' + numSystem + '.standard', obj) : '');
    }
    IntlBase.getSymbolPattern = getSymbolPattern;
    /**
     *
     * @param {string} format ?
     * @returns {string} ?
     */
    function ConvertDateToWeekFormat(format) {
      var convertMapper = format.match(IntlBase.dateConverterMapper);
      if (convertMapper && isBlazor()) {
        var tempString = convertMapper[0].length === 3 ? 'EEE' : 'EEEE';
        return format.replace(IntlBase.dateConverterMapper, tempString);
      }
      return format;
    }
    IntlBase.ConvertDateToWeekFormat = ConvertDateToWeekFormat;
    /**
     *
     * @param {DateFormatOptions} formatOptions ?
     * @param {string} culture ?
     * @returns {DateFormatOptions} ?
     */
    function compareBlazorDateFormats(formatOptions, culture) {
      var format = formatOptions.format || formatOptions.skeleton;
      var curFormatMapper = getValue((culture || 'en-US') + '.' + format, blazorCultureFormats);
      if (!curFormatMapper) {
        curFormatMapper = getValue('en-US.' + format, blazorCultureFormats);
      }
      if (curFormatMapper) {
        curFormatMapper = ConvertDateToWeekFormat(curFormatMapper);
        formatOptions.format = curFormatMapper.replace(/tt/, 'a');
      }
      return formatOptions;
    }
    IntlBase.compareBlazorDateFormats = compareBlazorDateFormats;
    /**
     * Returns proper numeric skeleton
     *
     * @private
     * @param {string} skeleton ?
     * @returns {any} ?
     */
    function getProperNumericSkeleton(skeleton) {
      var matches = skeleton.match(IntlBase.formatRegex);
      var ret = {};
      var pattern = matches[1].toUpperCase();
      ret.isAccount = pattern === 'A';
      ret.type = IntlBase.patternMatcher[pattern];
      if (skeleton.length > 1) {
        ret.fractionDigits = parseInt(matches[2], 10);
      }
      return ret;
    }
    IntlBase.getProperNumericSkeleton = getProperNumericSkeleton;
    /**
     * Returns format data for number formatting like minimum fraction, maximum fraction, etc..,
     *
     * @private
     * @param {string} pattern ?
     * @param {boolean} needFraction ?
     * @param {string} cSymbol ?
     * @param {boolean} fractionOnly ?
     * @returns {any} ?
     */
    function getFormatData(pattern, needFraction, cSymbol, fractionOnly) {
      var nData = fractionOnly ? {} : {
        nlead: '',
        nend: ''
      };
      var match = pattern.match(IntlBase.customRegex);
      if (match) {
        if (!fractionOnly) {
          nData.nlead = changeCurrencySymbol(match[1], cSymbol);
          nData.nend = changeCurrencySymbol(match[10], cSymbol);
          nData.groupPattern = match[4];
        }
        var fraction = match[7];
        if (fraction && needFraction) {
          var fmatch = fraction.match(fractionRegex);
          if (!isNullOrUndefined(fmatch)) {
            nData.minimumFraction = fmatch.length;
          } else {
            nData.minimumFraction = 0;
          }
          nData.maximumFraction = fraction.length - 1;
        }
      }
      return nData;
    }
    IntlBase.getFormatData = getFormatData;
    /**
     * Changes currency symbol
     *
     * @private
     * @param {string} val ?
     * @param {string} sym ?
     * @returns {string} ?
     */
    function changeCurrencySymbol(val, sym) {
      if (val) {
        val = val.replace(IntlBase.defaultCurrency, sym);
        return sym === '' ? val.trim() : val;
      }
      return '';
    }
    IntlBase.changeCurrencySymbol = changeCurrencySymbol;
    /**
     * Returns currency symbol based on currency code ?
     *
     * @private
     * @param {Object} numericObject ?
     * @param {string} currencyCode ?
     * @param {string} altSymbol ?
     * @returns {string} ?
     */
    function getCurrencySymbol(numericObject, currencyCode, altSymbol) {
      var symbol = altSymbol ? '.' + altSymbol : '.symbol';
      var getCurrency = getValue('currencies.' + currencyCode + symbol, numericObject) || getValue('currencies.' + currencyCode + '.symbol-alt-narrow', numericObject) || '$';
      return getCurrency;
    }
    IntlBase.getCurrencySymbol = getCurrencySymbol;
    /**
     * Returns formatting options for custom number format
     *
     * @private
     * @param {string} format ?
     * @param {CommonOptions} dOptions ?
     * @param {any} obj ?
     * @returns {any} ?
     */
    function customFormat(format, dOptions, obj) {
      var options = {};
      var formatSplit = format.split(';');
      var data = ['pData', 'nData', 'zeroData'];
      for (var i = 0; i < formatSplit.length; i++) {
        options[data[i]] = customNumberFormat(formatSplit[i], dOptions, obj);
      }
      if (isNullOrUndefined(options.nData)) {
        options.nData = extend({}, options.pData);
        options.nData.nlead = isNullOrUndefined(dOptions) ? '-' + options.nData.nlead : dOptions.minusSymbol + options.nData.nlead;
      }
      return options;
    }
    IntlBase.customFormat = customFormat;
    /**
     * Returns custom formatting options
     *
     * @private
     * @param {string} format ?
     * @param {CommonOptions} dOptions ?
     * @param {Object} numObject ?
     * @returns {any} ?
     */
    function customNumberFormat(format, dOptions, numObject) {
      var cOptions = {
        type: 'decimal',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      };
      var pattern = format.match(IntlBase.customRegex);
      if (isNullOrUndefined(pattern) || pattern[5] === '' && format !== 'N/A') {
        cOptions.type = undefined;
        return cOptions;
      }
      cOptions.nlead = pattern[1];
      cOptions.nend = pattern[10];
      var integerPart = pattern[6];
      var spaceCapture = integerPart.match(/\ $/g) ? true : false;
      var spaceGrouping = integerPart.replace(/\ $/g, '').indexOf(' ') !== -1;
      cOptions.useGrouping = integerPart.indexOf(',') !== -1 || spaceGrouping;
      integerPart = integerPart.replace(/,/g, '');
      var fractionPart = pattern[7];
      if (integerPart.indexOf('0') !== -1) {
        cOptions.minimumIntegerDigits = integerPart.length - integerPart.indexOf('0');
      }
      if (!isNullOrUndefined(fractionPart)) {
        cOptions.minimumFractionDigits = fractionPart.lastIndexOf('0');
        cOptions.maximumFractionDigits = fractionPart.lastIndexOf('#');
        if (cOptions.minimumFractionDigits === -1) {
          cOptions.minimumFractionDigits = 0;
        }
        if (cOptions.maximumFractionDigits === -1 || cOptions.maximumFractionDigits < cOptions.minimumFractionDigits) {
          cOptions.maximumFractionDigits = cOptions.minimumFractionDigits;
        }
      }
      if (!isNullOrUndefined(dOptions)) {
        dOptions.isCustomFormat = true;
        extend(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], '$', dOptions.currencySymbol));
        if (!cOptions.isCurrency) {
          extend(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], '%', dOptions.percentSymbol));
        }
      } else {
        extend(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], '%', '%'));
      }
      if (!isNullOrUndefined(numObject)) {
        var symbolPattern = getSymbolPattern(cOptions.type, dOptions.numberMapper.numberSystem, numObject, false);
        if (cOptions.useGrouping) {
          cOptions.groupSeparator = spaceGrouping ? ' ' : dOptions.numberMapper.numberSymbols[mapper[2]];
          cOptions.groupData = NumberFormat.getGroupingDetails(symbolPattern.split(';')[0]);
        }
        cOptions.nlead = cOptions.nlead.replace(/'/g, '');
        cOptions.nend = spaceCapture ? ' ' + cOptions.nend.replace(/'/g, '') : cOptions.nend.replace(/'/g, '');
      }
      return cOptions;
    }
    IntlBase.customNumberFormat = customNumberFormat;
    /**
     * Returns formatting options for currency or percent type
     *
     * @private
     * @param {string[]} parts ?
     * @param {string} actual ?
     * @param {string} symbol ?
     * @returns {any} ?
     */
    function isCurrencyPercent(parts, actual, symbol) {
      var options = {
        nlead: parts[0],
        nend: parts[1]
      };
      for (var i = 0; i < 2; i++) {
        var part = parts[parseInt(i.toString(), 10)];
        var loc = part.indexOf(actual);
        if (loc !== -1 && (loc < part.indexOf('\'') || loc > part.lastIndexOf('\''))) {
          options[typeMapper[i]] = part.substr(0, loc) + symbol + part.substr(loc + 1);
          options[typeMapper[actual]] = true;
          options.type = options.isCurrency ? 'currency' : 'percent';
          break;
        }
      }
      return options;
    }
    IntlBase.isCurrencyPercent = isCurrencyPercent;
    /**
     * Returns culture based date separator
     *
     * @private
     * @param {Object} dateObj ?
     * @returns {string} ?
     */
    function getDateSeparator(dateObj) {
      var value = (getValue('dateFormats.short', dateObj) || '').match(/[d‏M‏]([^d‏M])[d‏M‏]/i);
      return value ? value[1] : '/';
    }
    IntlBase.getDateSeparator = getDateSeparator;
    /**
     * Returns Native Date Time pattern
     *
     * @private
     * @param {string} culture ?
     * @param {DateFormatOptions} options ?
     * @param {Object} cldr ?
     * @param {boolean} isExcelFormat ?
     * @returns {string} ?
     */
    function getActualDateTimeFormat(culture, options, cldr, isExcelFormat) {
      var dependable = getDependables(cldr, culture, options.calendar);
      if (isBlazor()) {
        options = compareBlazorDateFormats(options, culture);
      }
      var actualPattern = options.format || getResultantPattern(options.skeleton, dependable.dateObject, options.type);
      if (isExcelFormat) {
        actualPattern = actualPattern.replace(patternRegex, function (pattern) {
          return patternMatch[pattern];
        });
        if (actualPattern.indexOf('z') !== -1) {
          var tLength = actualPattern.match(/z/g).length;
          var timeZonePattern = void 0;
          var options_1 = {
            'timeZone': {}
          };
          options_1.numMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr));
          options_1.timeZone = getValue('dates.timeZoneNames', dependable.parserObject);
          var value = new Date();
          var timezone = value.getTimezoneOffset();
          var pattern = tLength < 4 ? '+H;-H' : options_1.timeZone.hourFormat;
          pattern = pattern.replace(/:/g, options_1.numMapper.timeSeparator);
          if (timezone === 0) {
            timeZonePattern = options_1.timeZone.gmtZeroFormat;
          } else {
            timeZonePattern = DateFormat.getTimeZoneValue(timezone, pattern);
            timeZonePattern = options_1.timeZone.gmtFormat.replace(/\{0\}/, timeZonePattern);
          }
          actualPattern = actualPattern.replace(/[z]+/, '"' + timeZonePattern + '"');
        }
        actualPattern = actualPattern.replace(/ $/, '');
      }
      return actualPattern;
    }
    IntlBase.getActualDateTimeFormat = getActualDateTimeFormat;
    /**
     *
     * @param {string} actual ?
     * @param {any} option ?
     * @returns {any} ?
     */
    function processSymbol(actual, option) {
      if (actual.indexOf(',') !== -1) {
        var split = actual.split(',');
        actual = split[0] + getValue('numberMapper.numberSymbols.group', option) + split[1].replace('.', getValue('numberMapper.numberSymbols.decimal', option));
      } else {
        actual = actual.replace('.', getValue('numberMapper.numberSymbols.decimal', option));
      }
      return actual;
    }
    /**
     * Returns Native Number pattern
     *
     * @private
     * @param {string} culture ?
     * @param {NumberFormatOptions} options ?
     * @param {Object} cldr ?
     * @param {boolean} isExcel ?
     * @returns {string} ?
     */
    function getActualNumberFormat(culture, options, cldr, isExcel) {
      var dependable = getDependables(cldr, culture, '', true);
      var parseOptions = {
        custom: true
      };
      var numrericObject = dependable.numericObject;
      var minFrac;
      var curObj = {};
      var curMatch = (options.format || '').match(IntlBase.currencyFormatRegex);
      var type = IntlBase.formatRegex.test(options.format) ? getProperNumericSkeleton(options.format || 'N') : {};
      var dOptions = {};
      if (curMatch) {
        dOptions.numberMapper = isBlazor() ? extend({}, dependable.numericObject) : ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr), true);
        var curCode = isBlazor() ? getValue('currencySymbol', dependable.numericObject) : getCurrencySymbol(dependable.numericObject, options.currency || exports.defaultCurrencyCode, options.altSymbol);
        var symbolPattern = getSymbolPattern('currency', dOptions.numberMapper.numberSystem, dependable.numericObject, /a/i.test(options.format));
        symbolPattern = symbolPattern.replace(/\u00A4/g, curCode);
        var split = symbolPattern.split(';');
        curObj.hasNegativePattern = isBlazor() ? true : split.length > 1;
        curObj.nData = isBlazor() ? getValue(type.type + 'nData', numrericObject) : getFormatData(split[1] || '-' + split[0], true, curCode);
        curObj.pData = isBlazor() ? getValue(type.type + 'pData', numrericObject) : getFormatData(split[0], false, curCode);
        if (!curMatch[2] && !options.minimumFractionDigits && !options.maximumFractionDigits) {
          minFrac = getFormatData(symbolPattern.split(';')[0], true, '', true).minimumFraction;
        }
      }
      var actualPattern;
      if (IntlBase.formatRegex.test(options.format) || !options.format) {
        extend(parseOptions, getProperNumericSkeleton(options.format || 'N'));
        parseOptions.custom = false;
        actualPattern = '###0';
        if (parseOptions.fractionDigits || options.minimumFractionDigits || options.maximumFractionDigits || minFrac) {
          var defaultMinimum = 0;
          if (parseOptions.fractionDigits) {
            options.minimumFractionDigits = options.maximumFractionDigits = parseOptions.fractionDigits;
          }
          actualPattern = fractionDigitsPattern(actualPattern, minFrac || parseOptions.fractionDigits || options.minimumFractionDigits || defaultMinimum, options.maximumFractionDigits || defaultMinimum);
        }
        if (options.minimumIntegerDigits) {
          actualPattern = minimumIntegerPattern(actualPattern, options.minimumIntegerDigits);
        }
        if (options.useGrouping) {
          actualPattern = groupingPattern(actualPattern);
        }
        if (parseOptions.type === 'currency' || parseOptions.type && isBlazor()) {
          if (isBlazor() && parseOptions.type !== 'currency') {
            curObj.pData = getValue(parseOptions.type + 'pData', numrericObject);
            curObj.nData = getValue(parseOptions.type + 'nData', numrericObject);
          }
          var cPattern = actualPattern;
          actualPattern = curObj.pData.nlead + cPattern + curObj.pData.nend;
          if (curObj.hasNegativePattern || isBlazor()) {
            actualPattern += ';' + curObj.nData.nlead + cPattern + curObj.nData.nend;
          }
        }
        if (parseOptions.type === 'percent' && !isBlazor()) {
          actualPattern += ' %';
        }
      } else {
        actualPattern = options.format.replace(/'/g, '"');
      }
      if (Object.keys(dOptions).length > 0) {
        actualPattern = !isExcel ? processSymbol(actualPattern, dOptions) : actualPattern;
      }
      return actualPattern;
    }
    IntlBase.getActualNumberFormat = getActualNumberFormat;
    /**
     *
     * @param {string} pattern ?
     * @param {number} minDigits ?
     * @param {number} maxDigits ?
     * @returns {string} ?
     */
    function fractionDigitsPattern(pattern, minDigits, maxDigits) {
      pattern += '.';
      for (var a = 0; a < minDigits; a++) {
        pattern += '0';
      }
      if (minDigits < maxDigits) {
        var diff = maxDigits - minDigits;
        for (var b = 0; b < diff; b++) {
          pattern += '#';
        }
      }
      return pattern;
    }
    IntlBase.fractionDigitsPattern = fractionDigitsPattern;
    /**
     *
     * @param {string} pattern ?
     * @param {number} digits ?
     * @returns {string} ?
     */
    function minimumIntegerPattern(pattern, digits) {
      var temp = pattern.split('.');
      var integer = '';
      for (var x = 0; x < digits; x++) {
        integer += '0';
      }
      return temp[1] ? integer + '.' + temp[1] : integer;
    }
    IntlBase.minimumIntegerPattern = minimumIntegerPattern;
    /**
     *
     * @param {string} pattern ?
     * @returns {string} ?
     */
    function groupingPattern(pattern) {
      var temp = pattern.split('.');
      var integer = temp[0];
      var no = 3 - integer.length % 3;
      var hash = no && no === 1 ? '#' : no === 2 ? '##' : '';
      integer = hash + integer;
      pattern = '';
      for (var x = integer.length - 1; x > 0; x = x - 3) {
        pattern = ',' + integer[x - 2] + integer[x - 1] + integer[parseInt(x.toString(), 10)] + pattern;
      }
      pattern = pattern.slice(1);
      return temp[1] ? pattern + '.' + temp[1] : pattern;
    }
    IntlBase.groupingPattern = groupingPattern;
    /**
     *
     * @param {string} culture ?
     * @param {Object} cldr ?
     * @returns {number} ?
     */
    function getWeekData(culture, cldr) {
      var firstDay = defaultFirstDay;
      var mapper = getValue('supplemental.weekData.firstDay', cldr);
      var iCulture = culture;
      if (/en-/.test(iCulture)) {
        iCulture = iCulture.slice(3);
      }
      iCulture = iCulture.slice(0, 2).toUpperCase() + iCulture.substr(2);
      if (mapper) {
        firstDay = mapper["" + iCulture] || mapper[iCulture.slice(0, 2)] || defaultFirstDay;
      }
      return firstDayMapper["" + firstDay];
    }
    IntlBase.getWeekData = getWeekData;
    /**
     * @private
     * @param {any} pData ?
     * @param {string} aCurrency ?
     * @param {string} rCurrency ?
     * @returns {void} ?
     */
    function replaceBlazorCurrency(pData, aCurrency, rCurrency) {
      var iCurrency = getBlazorCurrencySymbol(rCurrency);
      if (aCurrency !== iCurrency) {
        for (var _i = 0, pData_1 = pData; _i < pData_1.length; _i++) {
          var data = pData_1[_i];
          data.nend = data.nend.replace(aCurrency, iCurrency);
          data.nlead = data.nlead.replace(aCurrency, iCurrency);
        }
      }
    }
    IntlBase.replaceBlazorCurrency = replaceBlazorCurrency;
    /**
     * @private
     * @param {Date} date ?
     * @returns {number} ?
     */
    function getWeekOfYear(date) {
      var newYear = new Date(date.getFullYear(), 0, 1);
      var day = newYear.getDay();
      var weeknum;
      day = day >= 0 ? day : day + 7;
      var daynum = Math.floor((date.getTime() - newYear.getTime() - (date.getTimezoneOffset() - newYear.getTimezoneOffset()) * 60000) / 86400000) + 1;
      if (day < 4) {
        weeknum = Math.floor((daynum + day - 1) / 7) + 1;
        if (weeknum > 52) {
          var nYear = new Date(date.getFullYear() + 1, 0, 1);
          var nday = nYear.getDay();
          nday = nday >= 0 ? nday : nday + 7;
          weeknum = nday < 4 ? 1 : 53;
        }
      } else {
        weeknum = Math.floor((daynum + day - 1) / 7);
      }
      return weeknum;
    }
    IntlBase.getWeekOfYear = getWeekOfYear;
  })(exports.IntlBase || (exports.IntlBase = {}));
  var headerRegex = /^(.*?):[ \t]*([^\r\n]*)$/gm;
  var defaultType = 'GET';
  /**
   * Ajax class provides ability to make asynchronous HTTP request to the server
   * ```typescript
   *   var ajax = new Ajax("index.html", "GET", true);
   *   ajax.send().then(
   *               function (value) {
   *                   console.log(value);
   *               },
   *               function (reason) {
   *                   console.log(reason);
   *               });
   * ```
   */
  var Ajax = /** @class */function () {
    /**
     * Constructor for Ajax class
     *
     * @param  {string|Object} options ?
     * @param  {string} type ?
     * @param  {boolean} async ?
     * @returns defaultType any
     */
    function Ajax(options, type, async, contentType) {
      /**
       * A boolean value indicating whether the request should be sent asynchronous or not.
       *
       * @default true
       */
      this.mode = true;
      /**
       * A boolean value indicating whether to ignore the promise reject.
       *
       * @private
       * @default true
       */
      this.emitError = true;
      this.options = {};
      if (typeof options === 'string') {
        this.url = options;
        this.type = type ? type.toUpperCase() : defaultType;
        this.mode = !isNullOrUndefined(async) ? async : true;
      } else if (_typeof(options) === 'object') {
        this.options = options;
        merge(this, this.options);
      }
      this.type = this.type ? this.type.toUpperCase() : defaultType;
      this.contentType = this.contentType !== undefined ? this.contentType : contentType;
    }
    /**
     *
     * Send the request to server.
     *
     * @param {any} data - To send the user data
     * @return {Promise} ?
     */
    Ajax.prototype.send = function (data) {
      var _this = this;
      this.data = isNullOrUndefined(data) ? this.data : data;
      var eventArgs = {
        cancel: false,
        httpRequest: null
      };
      var promise = new Promise(function (resolve, reject) {
        _this.httpRequest = new XMLHttpRequest();
        _this.httpRequest.onreadystatechange = function () {
          _this.stateChange(resolve, reject);
        };
        if (!isNullOrUndefined(_this.onLoad)) {
          _this.httpRequest.onload = _this.onLoad;
        }
        if (!isNullOrUndefined(_this.onProgress)) {
          _this.httpRequest.onprogress = _this.onProgress;
        }
        /* istanbul ignore next */
        if (!isNullOrUndefined(_this.onAbort)) {
          _this.httpRequest.onabort = _this.onAbort;
        }
        /* istanbul ignore next */
        if (!isNullOrUndefined(_this.onError)) {
          _this.httpRequest.onerror = _this.onError;
        }
        //** Upload Events **/
        /* istanbul ignore next */
        if (!isNullOrUndefined(_this.onUploadProgress)) {
          _this.httpRequest.upload.onprogress = _this.onUploadProgress;
        }
        _this.httpRequest.open(_this.type, _this.url, _this.mode);
        // Set default headers
        if (!isNullOrUndefined(_this.data) && _this.contentType !== null) {
          _this.httpRequest.setRequestHeader('Content-Type', _this.contentType || 'application/json; charset=utf-8');
        }
        if (_this.beforeSend) {
          eventArgs.httpRequest = _this.httpRequest;
          _this.beforeSend(eventArgs);
        }
        if (!eventArgs.cancel) {
          _this.httpRequest.send(!isNullOrUndefined(_this.data) ? _this.data : null);
        }
      });
      return promise;
    };
    Ajax.prototype.successHandler = function (data) {
      if (this.onSuccess) {
        this.onSuccess(data, this);
      }
      return data;
    };
    Ajax.prototype.failureHandler = function (reason) {
      if (this.onFailure) {
        this.onFailure(this.httpRequest);
      }
      return reason;
    };
    Ajax.prototype.stateChange = function (resolve, reject) {
      var data = this.httpRequest.responseText;
      if (this.dataType && this.dataType.toLowerCase() === 'json') {
        if (data === '') {
          data = undefined;
        } else {
          try {
            data = JSON.parse(data);
          } catch (error) {
            // no exception handle
          }
        }
      }
      if (this.httpRequest.readyState === 4) {
        //success range should be 200 to 299
        if (this.httpRequest.status >= 200 && this.httpRequest.status <= 299 || this.httpRequest.status === 304) {
          resolve(this.successHandler(data));
        } else {
          if (this.emitError) {
            reject(new Error(this.failureHandler(this.httpRequest.statusText)));
          } else {
            resolve();
          }
        }
      }
    };
    /**
     * To get the response header from XMLHttpRequest
     *
     * @param  {string} key Key to search in the response header
     * @returns {string} ?
     */
    Ajax.prototype.getResponseHeader = function (key) {
      var responseHeaders;
      var header;
      // eslint-disable-next-line
      responseHeaders = {};
      var headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());
      while (headers) {
        responseHeaders[headers[1].toLowerCase()] = headers[2];
        headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());
      }
      // eslint-disable-next-line
      header = responseHeaders[key.toLowerCase()];
      return isNullOrUndefined(header) ? null : header;
    };
    return Ajax;
  }();

  /**
   * The Fetch class provides a way to make asynchronous network requests, typically to retrieve resources from a server.
   * ```typescript
   *   var fetchApi = new Fetch('index.html', 'GET');
   *   fetchApi.send()
   *      .then((value) => {
   *          console.log(value);
   *      }).catch((error) => {
   *          console.log(error);
   *      });
   * ```
   */
  var Fetch = /** @class */function () {
    /**
     * Constructor for Fetch class.
     *
     * @param {string|Object} options - Specifies the URL or Request object with URL to which the request is to be sent.
     * @param {string} type - Specifies which request method is to be used, such as GET, POST, etc.
     * @param {string} contentType - Specifies the content type of the request, which is used to indicate the original media type of the resource.
     */
    function Fetch(options, type, contentType) {
      /**
       * Specifies which request method is to be used, such as GET, POST, etc.
       *
       * @default GET
       */
      this.type = 'GET';
      /**
       * A boolean value indicating whether to reject the promise or not.
       *
       * @private
       * @default true
       */
      this.emitError = true;
      if (typeof options === 'string') {
        this.url = options;
        this.type = !isNullOrUndefined(type) ? type.toUpperCase() : this.type;
        this.contentType = contentType;
      } else if (isObject(options) && Object.keys(options).length > 0) {
        merge(this, options);
      }
      this.contentType = !isNullOrUndefined(this.contentType) ? this.contentType : 'application/json; charset=utf-8';
    }
    /**
     * Send the request to server.
     *
     * @param {string|Object} data - Specifies the data that needs to be added to the request.
     * @returns {Promise<Response>} - Returns the response to a request.
     */
    Fetch.prototype.send = function (data) {
      var _this = this;
      var contentTypes = {
        'application/json': 'json',
        'multipart/form-data': 'formData',
        'application/octet-stream': 'blob',
        'application/x-www-form-urlencoded': 'formData'
      };
      try {
        if (isNullOrUndefined(this.fetchRequest) && this.type === 'GET') {
          this.fetchRequest = new Request(this.url, {
            method: this.type
          });
        } else if (isNullOrUndefined(this.fetchRequest)) {
          this.data = !isNullOrUndefined(data) ? data : this.data;
          this.fetchRequest = new Request(this.url, {
            method: this.type,
            headers: {
              'Content-Type': this.contentType
            },
            body: this.data
          });
        }
        var eventArgs = {
          cancel: false,
          fetchRequest: this.fetchRequest
        };
        this.triggerEvent(this['beforeSend'], eventArgs);
        if (eventArgs.cancel) {
          return null;
        }
        this.fetchResponse = fetch(this.fetchRequest);
        return this.fetchResponse.then(function (response) {
          _this.triggerEvent(_this['onLoad'], response);
          if (!response.ok) {
            throw response;
          }
          var responseType = 'text';
          for (var _i = 0, _a = Object.keys(contentTypes); _i < _a.length; _i++) {
            var key = _a[_i];
            if (response.headers.get('Content-Type') && response.headers.get('Content-Type').indexOf(key) !== -1) {
              responseType = contentTypes[key];
            }
          }
          return response[responseType]();
          // eslint-disable-next-line
        }).then(function (data) {
          _this.triggerEvent(_this['onSuccess'], data, _this);
          return data;
          // eslint-disable-next-line
        })["catch"](function (error) {
          var returnVal = {};
          if (_this.emitError) {
            _this.triggerEvent(_this['onFailure'], error);
            returnVal = Promise.reject(error);
          }
          return returnVal;
        });
      } catch (error) {
        return error;
      }
    };
    Fetch.prototype.triggerEvent = function (callback, data, instance) {
      if (!isNullOrUndefined(callback) && typeof callback === 'function') {
        callback(data, instance);
      }
    };
    return Fetch;
  }();
  var REGX_MOBILE = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i;
  var REGX_IE = /msie|trident/i;
  var REGX_IE11 = /Trident\/7\./;
  var REGX_IOS = /(ipad|iphone|ipod touch)/i;
  var REGX_IOS7 = /(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i;
  var REGX_ANDROID = /android/i;
  var REGX_WINDOWS = /trident|windows phone|edge/i;
  var REGX_VERSION = /(version)[ /]([\w.]+)/i;
  var REGX_BROWSER = {
    OPERA: /(opera|opr)(?:.*version|)[ /]([\w.]+)/i,
    EDGE: /(edge)(?:.*version|)[ /]([\w.]+)/i,
    CHROME: /(chrome|crios)[ /]([\w.]+)/i,
    PANTHOMEJS: /(phantomjs)[ /]([\w.]+)/i,
    SAFARI: /(safari)[ /]([\w.]+)/i,
    WEBKIT: /(webkit)[ /]([\w.]+)/i,
    MSIE: /(msie|trident) ([\w.]+)/i,
    MOZILLA: /(mozilla)(?:.*? rv:([\w.]+)|)/i
  };
  /* istanbul ignore else  */
  if (typeof window !== 'undefined') {
    window.browserDetails = window.browserDetails || {};
  }
  /**
   * Get configuration details for Browser
   *
   * @private
   */
  var Browser = /** @class */function () {
    function Browser() {}
    Browser.extractBrowserDetail = function () {
      var browserInfo = {
        culture: {}
      };
      var keys = Object.keys(REGX_BROWSER);
      var clientInfo = [];
      for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        clientInfo = Browser.userAgent.match(REGX_BROWSER["" + key]);
        if (clientInfo) {
          browserInfo.name = clientInfo[1].toLowerCase() === 'opr' ? 'opera' : clientInfo[1].toLowerCase();
          browserInfo.name = clientInfo[1].toLowerCase() === 'crios' ? 'chrome' : browserInfo.name;
          browserInfo.version = clientInfo[2];
          browserInfo.culture.name = browserInfo.culture.language = navigator.language;
          // eslint-disable-next-line
          if (!!Browser.userAgent.match(REGX_IE11)) {
            browserInfo.name = 'msie';
            break;
          }
          var version = Browser.userAgent.match(REGX_VERSION);
          if (browserInfo.name === 'safari' && version) {
            browserInfo.version = version[2];
          }
          break;
        }
      }
      return browserInfo;
    };
    /**
     * To get events from the browser
     *
     * @param {string} event - type of event triggered.
     * @returns {boolean}
     */
    Browser.getEvent = function (event) {
      // eslint-disable-next-line
      var events = {
        start: {
          isPointer: 'pointerdown',
          isTouch: 'touchstart',
          isDevice: 'mousedown'
        },
        move: {
          isPointer: 'pointermove',
          isTouch: 'touchmove',
          isDevice: 'mousemove'
        },
        end: {
          isPointer: 'pointerup',
          isTouch: 'touchend',
          isDevice: 'mouseup'
        },
        cancel: {
          isPointer: 'pointercancel',
          isTouch: 'touchcancel',
          isDevice: 'mouseleave'
        }
      };
      return Browser.isPointer ? events["" + event].isPointer : Browser.isTouch ? events["" + event].isTouch + (!Browser.isDevice ? ' ' + events["" + event].isDevice : '') : events["" + event].isDevice;
    };
    /**
     * To get the Touch start event from browser
     *
     * @returns {string}
     */
    Browser.getTouchStartEvent = function () {
      return Browser.getEvent('start');
    };
    /**
     * To get the Touch end event from browser
     *
     * @returns {string}
     */
    Browser.getTouchEndEvent = function () {
      return Browser.getEvent('end');
    };
    /**
     * To get the Touch move event from browser
     *
     * @returns {string}
     */
    Browser.getTouchMoveEvent = function () {
      return Browser.getEvent('move');
    };
    /**
     * To cancel the touch event from browser
     *
     * @returns {string}
     */
    Browser.getTouchCancelEvent = function () {
      return Browser.getEvent('cancel');
    };
    /**
     * Check whether the browser on the iPad device is Safari or not
     *
     * @returns {boolean}
     */
    Browser.isSafari = function () {
      return Browser.isDevice && Browser.isIos && Browser.isTouch && typeof window !== 'undefined' && window.navigator.userAgent.toLowerCase().indexOf('iphone') === -1 && window.navigator.userAgent.toLowerCase().indexOf('safari') > -1;
    };
    /**
     * To get the value based on provided key and regX
     *
     * @param {string} key ?
     * @param {RegExp} regX ?
     * @returns {Object} ?
     */
    Browser.getValue = function (key, regX) {
      var browserDetails = typeof window !== 'undefined' ? window.browserDetails : {};
      if (typeof navigator !== 'undefined' && navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1 && Browser.isTouch === true && !REGX_BROWSER.CHROME.test(navigator.userAgent)) {
        browserDetails['isIos'] = true;
        browserDetails['isDevice'] = true;
        browserDetails['isTouch'] = true;
        browserDetails['isPointer'] = true;
      }
      if ('undefined' === typeof browserDetails["" + key]) {
        return browserDetails["" + key] = regX.test(Browser.userAgent);
      }
      return browserDetails["" + key];
    };
    Object.defineProperty(Browser, "userAgent", {
      get: function get() {
        return Browser.uA;
      },
      //Properties
      /**
       * Property specifies the userAgent of the browser. Default userAgent value is based on the browser.
       * Also we can set our own userAgent.
       *
       * @param {string} uA ?
       */
      set: function set(uA) {
        Browser.uA = uA;
        window.browserDetails = {};
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "info", {
      //Read Only Properties
      /**
       * Property is to get the browser information like Name, Version and Language
       *
       * @returns {BrowserInfo} ?
       */
      get: function get() {
        if (isUndefined(window.browserDetails.info)) {
          return window.browserDetails.info = Browser.extractBrowserDetail();
        }
        return window.browserDetails.info;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isIE", {
      /**
       * Property is to get whether the userAgent is based IE.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        return Browser.getValue('isIE', REGX_IE);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isTouch", {
      /**
       * Property is to get whether the browser has touch support.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        if (isUndefined(window.browserDetails.isTouch)) {
          return window.browserDetails.isTouch = 'ontouchstart' in window.navigator || window && window.navigator && window.navigator.maxTouchPoints > 0 || 'ontouchstart' in window;
        }
        return window.browserDetails.isTouch;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isPointer", {
      /**
       * Property is to get whether the browser has Pointer support.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        if (isUndefined(window.browserDetails.isPointer)) {
          return window.browserDetails.isPointer = 'pointerEnabled' in window.navigator;
        }
        return window.browserDetails.isPointer;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isMSPointer", {
      /**
       * Property is to get whether the browser has MSPointer support.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        if (isUndefined(window.browserDetails.isMSPointer)) {
          return window.browserDetails.isMSPointer = 'msPointerEnabled' in window.navigator;
        }
        return window.browserDetails.isMSPointer;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isDevice", {
      /**
       * Property is to get whether the userAgent is device based.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        return Browser.getValue('isDevice', REGX_MOBILE);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isIos", {
      /**
       * Property is to get whether the userAgent is IOS.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        return Browser.getValue('isIos', REGX_IOS);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isIos7", {
      /**
       * Property is to get whether the userAgent is Ios7.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        return Browser.getValue('isIos7', REGX_IOS7);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isAndroid", {
      /**
       * Property is to get whether the userAgent is Android.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        return Browser.getValue('isAndroid', REGX_ANDROID);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isWebView", {
      /**
       * Property is to identify whether application ran in web view.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        if (isUndefined(window.browserDetails.isWebView)) {
          window.browserDetails.isWebView = !(isUndefined(window.cordova) && isUndefined(window.PhoneGap) && isUndefined(window.phonegap) && window.forge !== 'object');
          return window.browserDetails.isWebView;
        }
        return window.browserDetails.isWebView;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "isWindows", {
      /**
       * Property is to get whether the userAgent is Windows.
       *
       * @returns {boolean} ?
       */
      get: function get() {
        return Browser.getValue('isWindows', REGX_WINDOWS);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "touchStartEvent", {
      /**
       * Property is to get the touch start event. It returns event name based on browser.
       *
       * @returns {string} ?
       */
      get: function get() {
        if (isUndefined(window.browserDetails.touchStartEvent)) {
          return window.browserDetails.touchStartEvent = Browser.getTouchStartEvent();
        }
        return window.browserDetails.touchStartEvent;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "touchMoveEvent", {
      /**
       * Property is to get the touch move event. It returns event name based on browser.
       *
       * @returns {string} ?
       */
      get: function get() {
        if (isUndefined(window.browserDetails.touchMoveEvent)) {
          return window.browserDetails.touchMoveEvent = Browser.getTouchMoveEvent();
        }
        return window.browserDetails.touchMoveEvent;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "touchEndEvent", {
      /**
       * Property is to get the touch end event. It returns event name based on browser.
       *
       * @returns {string} ?
       */
      get: function get() {
        if (isUndefined(window.browserDetails.touchEndEvent)) {
          return window.browserDetails.touchEndEvent = Browser.getTouchEndEvent();
        }
        return window.browserDetails.touchEndEvent;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser, "touchCancelEvent", {
      /**
       * Property is to cancel the touch end event.
       *
       * @returns {string} ?
       */
      get: function get() {
        if (isUndefined(window.browserDetails.touchCancelEvent)) {
          return window.browserDetails.touchCancelEvent = Browser.getTouchCancelEvent();
        }
        return window.browserDetails.touchCancelEvent;
      },
      enumerable: true,
      configurable: true
    });
    /* istanbul ignore next */
    Browser.uA = typeof navigator !== 'undefined' ? navigator.userAgent : '';
    return Browser;
  }();

  /**
   * EventHandler class provides option to add, remove, clear and trigger events to a HTML DOM element
   * ```html
   * <div id="Eventdiv">  </div>
   * <script>
   *   let node: HTMLElement = document.querySelector("#Eventdiv");
   *   EventHandler.addEventListener(node, "click", function(){
   *       // click handler function code
   *   });
   *   EventHandler.addEventListener(node, "onmouseover", function(){
   *       // mouseover handler function code
   *   });
   *   EventHandler.removeEventListener(node, "click", function(){
   *       // click handler function code
   *   });
   *   eventObj.clearEvents();
   * </script>
   * ```
   */
  var EventHandler = /** @class */function () {
    function EventHandler() {}
    // to get the event data based on element
    EventHandler.addOrGetEventData = function (element) {
      if ('__eventList' in element) {
        return element.__eventList.events;
      } else {
        element.__eventList = {};
        return element.__eventList.events = [];
      }
    };
    /**
     * Add an event to the specified DOM element.
     *
     * @param {any} element - Target HTML DOM element
     * @param {string} eventName - A string that specifies the name of the event
     * @param {Function} listener - Specifies the function to run when the event occurs
     * @param {Object} bindTo - A object that binds 'this' variable in the event handler
     * @param {number} intDebounce - Specifies at what interval given event listener should be triggered.
     * @returns {Function} ?
     */
    EventHandler.add = function (element, eventName, listener, bindTo, intDebounce) {
      var eventData = EventHandler.addOrGetEventData(element);
      var debounceListener;
      if (intDebounce) {
        debounceListener = debounce(listener, intDebounce);
      } else {
        debounceListener = listener;
      }
      if (bindTo) {
        debounceListener = debounceListener.bind(bindTo);
      }
      var event = eventName.split(' ');
      for (var i = 0; i < event.length; i++) {
        eventData.push({
          name: event[parseInt(i.toString(), 10)],
          listener: listener,
          debounce: debounceListener
        });
        if (Browser.isIE) {
          element.addEventListener(event[parseInt(i.toString(), 10)], debounceListener);
        } else {
          element.addEventListener(event[parseInt(i.toString(), 10)], debounceListener, {
            passive: false
          });
        }
      }
      return debounceListener;
    };
    /**
     * Remove an event listener that has been attached before.
     *
     * @param {any} element - Specifies the target html element to remove the event
     * @param {string} eventName - A string that specifies the name of the event to remove
     * @param {Function} listener - Specifies the function to remove
     * @returns {void} ?
     */
    EventHandler.remove = function (element, eventName, listener) {
      var eventData = EventHandler.addOrGetEventData(element);
      var event = eventName.split(' ');
      var _loop_1 = function _loop_1(j) {
        var index = -1;
        var debounceListener;
        if (eventData && eventData.length !== 0) {
          eventData.some(function (x, i) {
            return x.name === event[parseInt(j.toString(), 10)] && x.listener === listener ? (index = i, debounceListener = x.debounce, true) : false;
          });
        }
        if (index !== -1) {
          eventData.splice(index, 1);
        }
        if (debounceListener) {
          element.removeEventListener(event[parseInt(j.toString(), 10)], debounceListener);
        }
      };
      for (var j = 0; j < event.length; j++) {
        _loop_1(j);
      }
    };
    /**
     * Clear all the event listeners that has been previously attached to the element.
     *
     * @param {any} element - Specifies the target html element to clear the events
     * @returns {void} ?
     */
    EventHandler.clearEvents = function (element) {
      var eventData;
      var copyData;
      // eslint-disable-next-line
      eventData = EventHandler.addOrGetEventData(element);
      // eslint-disable-next-line
      copyData = extend([], copyData, eventData);
      for (var i = 0; i < copyData.length; i++) {
        var parseValue = copyData[parseInt(i.toString(), 10)];
        element.removeEventListener(parseValue.name, parseValue.debounce);
        eventData.shift();
      }
    };
    /**
     * Trigger particular event of the element.
     *
     * @param {any} element - Specifies the target html element to trigger the events
     * @param {string} eventName - Specifies the event to trigger for the specified element.
     * Can be a custom event, or any of the standard events.
     * @param {any} eventProp - Additional parameters to pass on to the event properties
     * @returns {void} ?
     */
    EventHandler.trigger = function (element, eventName, eventProp) {
      var eventData = EventHandler.addOrGetEventData(element);
      for (var _i = 0, eventData_1 = eventData; _i < eventData_1.length; _i++) {
        var event_1 = eventData_1[_i];
        if (event_1.name === eventName) {
          event_1.debounce.call(this, eventProp);
        }
      }
    };
    return EventHandler;
  }();

  /**
   * Functions related to dom operations.
   */
  var SVG_REG = /^svg|^path|^g/;
  /**
   * Function to create Html element.
   *
   * @param {string} tagName - Name of the tag, id and class names.
   * @param {ElementProperties} properties - Object to set properties in the element.
   * @param {ElementProperties} properties.id - To set the id to the created element.
   * @param {ElementProperties} properties.className - To add classes to the element.
   * @param {ElementProperties} properties.innerHTML - To set the innerHTML to element.
   * @param {ElementProperties} properties.styles - To set the some custom styles to element.
   * @param {ElementProperties} properties.attrs - To set the attributes to element.
   * @returns {any} ?
   * @private
   */
  function createElement(tagName, properties) {
    var element = SVG_REG.test(tagName) ? document.createElementNS('http://www.w3.org/2000/svg', tagName) : document.createElement(tagName);
    if (typeof properties === 'undefined') {
      return element;
    }
    element.innerHTML = properties.innerHTML ? properties.innerHTML : '';
    if (properties.className !== undefined) {
      element.className = properties.className;
    }
    if (properties.id !== undefined) {
      element.id = properties.id;
    }
    if (properties.styles !== undefined) {
      element.setAttribute('style', properties.styles);
    }
    if (properties.attrs !== undefined) {
      attributes(element, properties.attrs);
    }
    return element;
  }
  /**
   * The function used to add the classes to array of elements
   *
   * @param  {Element[]|NodeList} elements - An array of elements that need to add a list of classes
   * @param  {string|string[]} classes - String or array of string that need to add an individual element as a class
   * @returns {any} .
   * @private
   */
  function addClass(elements, classes) {
    var classList = getClassList(classes);
    var regExp = RegExp;
    for (var _i = 0, _a = elements; _i < _a.length; _i++) {
      var ele = _a[_i];
      for (var _b = 0, classList_1 = classList; _b < classList_1.length; _b++) {
        var className = classList_1[_b];
        if (isObject(ele)) {
          var curClass = getValue('attributes.className', ele);
          if (isNullOrUndefined(curClass)) {
            setValue('attributes.className', className, ele);
          } else if (!new regExp('\\b' + className + '\\b', 'i').test(curClass)) {
            setValue('attributes.className', curClass + ' ' + className, ele);
          }
        } else {
          if (!ele.classList.contains(className)) {
            ele.classList.add(className);
          }
        }
      }
    }
    return elements;
  }
  /**
   * The function used to add the classes to array of elements
   *
   * @param  {Element[]|NodeList} elements - An array of elements that need to remove a list of classes
   * @param  {string|string[]} classes - String or array of string that need to add an individual element as a class
   * @returns {any} .
   * @private
   */
  function removeClass(elements, classes) {
    var classList = getClassList(classes);
    for (var _i = 0, _a = elements; _i < _a.length; _i++) {
      var ele = _a[_i];
      var flag = isObject(ele);
      var canRemove = flag ? getValue('attributes.className', ele) : ele.className !== '';
      if (canRemove) {
        for (var _b = 0, classList_2 = classList; _b < classList_2.length; _b++) {
          var className = classList_2[_b];
          if (flag) {
            var classes_1 = getValue('attributes.className', ele);
            var classArr = classes_1.split(' ');
            var index = classArr.indexOf(className);
            if (index !== -1) {
              classArr.splice(index, 1);
            }
            setValue('attributes.className', classArr.join(' '), ele);
          } else {
            ele.classList.remove(className);
          }
        }
      }
    }
    return elements;
  }
  /**
   * The function used to get classlist.
   *
   * @param  {string | string[]} classes - An element the need to check visibility
   * @returns {string[]} ?
   * @private
   */
  function getClassList(classes) {
    var classList = [];
    if (typeof classes === 'string') {
      classList.push(classes);
    } else {
      classList = classes;
    }
    return classList;
  }
  /**
   * The function used to check element is visible or not.
   *
   * @param  {Element|Node} element - An element the need to check visibility
   * @returns {boolean} ?
   * @private
   */
  function isVisible(element) {
    var ele = element;
    return ele.style.visibility === '' && ele.offsetWidth > 0;
  }
  /**
   * The function used to insert an array of elements into a first of the element.
   *
   * @param  {Element[]|NodeList} fromElements - An array of elements that need to prepend.
   * @param  {Element} toElement - An element that is going to prepend.
   * @param {boolean} isEval - ?
   * @returns {Element[] | NodeList} ?
   * @private
   */
  function prepend(fromElements, toElement, isEval) {
    var docFrag = document.createDocumentFragment();
    for (var _i = 0, _a = fromElements; _i < _a.length; _i++) {
      var ele = _a[_i];
      docFrag.appendChild(ele);
    }
    toElement.insertBefore(docFrag, toElement.firstElementChild);
    if (isEval) {
      executeScript(toElement);
    }
    return fromElements;
  }
  /**
   * The function used to insert an array of elements into last of the element.
   *
   * @param  {Element[]|NodeList} fromElements - An array of elements that need to append.
   * @param  {Element} toElement - An element that is going to prepend.
   * @param {boolean} isEval - ?
   * @returns {Element[] | NodeList} ?
   * @private
   */
  function append(fromElements, toElement, isEval) {
    var docFrag = document.createDocumentFragment();
    if (fromElements instanceof NodeList) {
      while (fromElements.length > 0) {
        docFrag.appendChild(fromElements[0]);
      }
    } else {
      for (var _i = 0, _a = fromElements; _i < _a.length; _i++) {
        var ele = _a[_i];
        docFrag.appendChild(ele);
      }
    }
    toElement.appendChild(docFrag);
    if (isEval) {
      executeScript(toElement);
    }
    return fromElements;
  }
  /**
   * The function is used to evaluate script from Ajax request
   *
   * @param {Element} ele - An element is going to evaluate the script
   * @returns {void} ?
   */
  function executeScript(ele) {
    var eleArray = ele.querySelectorAll('script');
    eleArray.forEach(function (element) {
      var script = document.createElement('script');
      script.text = element.innerHTML;
      document.head.appendChild(script);
      detach(script);
    });
  }
  /**
   * The function used to remove the element from parentnode
   *
   * @param  {Element|Node|HTMLElement} element - An element that is going to detach from the Dom
   * @returns {any} ?
   * @private
   */
  // eslint-disable-next-line
  function detach(element) {
    var parentNode = element.parentNode;
    if (parentNode) {
      return parentNode.removeChild(element);
    }
  }
  /**
   * The function used to remove the element from Dom also clear the bounded events
   *
   * @param  {Element|Node|HTMLElement} element - An element remove from the Dom
   * @returns {void} ?
   * @private
   */
  function remove(element) {
    var parentNode = element.parentNode;
    EventHandler.clearEvents(element);
    parentNode.removeChild(element);
  }
  /**
   * The function helps to set multiple attributes to an element
   *
   * @param  {Element|Node} element - An element that need to set attributes.
   * @param  {string} attributes - JSON Object that is going to as attributes.
   * @returns {Element} ?
   * @private
   */
  // eslint-disable-next-line
  function attributes(element, attributes) {
    var keys = Object.keys(attributes);
    var ele = element;
    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
      var key = keys_1[_i];
      if (isObject(ele)) {
        var iKey = key;
        if (key === 'tabindex') {
          iKey = 'tabIndex';
        }
        ele.attributes["" + iKey] = attributes["" + key];
      } else {
        ele.setAttribute(key, attributes["" + key]);
      }
    }
    return ele;
  }
  /**
   * The function selects the element from giving context.
   *
   * @param  {string} selector - Selector string need fetch element
   * @param  {Document|Element} context - It is an optional type, That specifies a Dom context.
   * @param {boolean} needsVDOM ?
   * @returns {any} ?
   * @private
   */
  // eslint-disable-next-line
  function select(selector, context, needsVDOM) {
    if (context === void 0) {
      context = document;
    }
    selector = querySelectId(selector);
    return context.querySelector(selector);
  }
  /**
   * The function selects an array of element from the given context.
   *
   * @param  {string} selector - Selector string need fetch element
   * @param  {Document|Element} context - It is an optional type, That specifies a Dom context.
   * @param {boolean} needsVDOM ?
   * @returns {HTMLElement[]} ?
   * @private
   */
  // eslint-disable-next-line
  function selectAll(selector, context, needsVDOM) {
    if (context === void 0) {
      context = document;
    }
    selector = querySelectId(selector);
    var nodeList = context.querySelectorAll(selector);
    return nodeList;
  }
  /**
   * The function selects an id of element from the given context.
   *
   * @param  {string} selector - Selector string need fetch element
   * @returns {string} ?
   * @private
   */
  function querySelectId(selector) {
    var charRegex = /(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;
    if (selector.match(/#[0-9]/g) || selector.match(charRegex)) {
      var idList = selector.split(',');
      for (var i = 0; i < idList.length; i++) {
        var list = idList[parseInt(i.toString(), 10)].split(' ');
        for (var j = 0; j < list.length; j++) {
          if (list[parseInt(j.toString(), 10)].indexOf('#') > -1) {
            if (!list[parseInt(j.toString(), 10)].match(/\[.*\]/)) {
              var splitId = list[parseInt(j.toString(), 10)].split('#');
              if (splitId[1].match(/^\d/) || splitId[1].match(charRegex)) {
                var setId = list[parseInt(j.toString(), 10)].split('.');
                setId[0] = setId[0].replace(/#/, '[id=\'') + '\']';
                list[parseInt(j.toString(), 10)] = setId.join('.');
              }
            }
          }
        }
        idList[parseInt(i.toString(), 10)] = list.join(' ');
      }
      return idList.join(',');
    }
    return selector;
  }
  /**
   * Returns single closest parent element based on class selector.
   *
   * @param  {Element} element - An element that need to find the closest element.
   * @param  {string} selector - A classSelector of closest element.
   * @returns {Element} ?
   * @private
   */
  function closest(element, selector) {
    var el = element;
    if (typeof el.closest === 'function') {
      return el.closest(selector);
    }
    while (el && el.nodeType === 1) {
      if (matches(el, selector)) {
        return el;
      }
      el = el.parentNode;
    }
    return null;
  }
  /**
   * Returns all sibling elements of the given element.
   *
   * @param  {Element|Node} element - An element that need to get siblings.
   * @returns {Element[]} ?
   * @private
   */
  function siblings(element) {
    var siblings = [];
    var childNodes = Array.prototype.slice.call(element.parentNode.childNodes);
    for (var _i = 0, childNodes_1 = childNodes; _i < childNodes_1.length; _i++) {
      var curNode = childNodes_1[_i];
      if (curNode.nodeType === Node.ELEMENT_NODE && element !== curNode) {
        siblings.push(curNode);
      }
    }
    return siblings;
  }
  /**
   * set the value if not exist. Otherwise set the existing value
   *
   * @param  {HTMLElement} element - An element to which we need to set value.
   * @param  {string} property - Property need to get or set.
   * @param  {string} value - value need to set.
   * @returns {string} ?
   * @private
   */
  function getAttributeOrDefault(element, property, value) {
    var attrVal;
    var isObj = isObject(element);
    if (isObj) {
      attrVal = getValue('attributes.' + property, element);
    } else {
      attrVal = element.getAttribute(property);
    }
    if (isNullOrUndefined(attrVal) && value) {
      if (!isObj) {
        element.setAttribute(property, value.toString());
      } else {
        element.attributes["" + property] = value;
      }
      attrVal = value;
    }
    return attrVal;
  }
  /**
   * Set the style attributes to Html element.
   *
   * @param {HTMLElement} element - Element which we want to set attributes
   * @param {any} attrs - Set the given attributes to element
   * @returns {void} ?
   * @private
   */
  function setStyleAttribute(element, attrs) {
    if (attrs !== undefined) {
      Object.keys(attrs).forEach(function (key) {
        // eslint-disable-next-line
        element.style[key] = attrs[key];
      });
    }
  }
  /**
   * Method for add and remove classes to a dom element.
   *
   * @param {Element} element - Element for add and remove classes
   * @param {string[]} addClasses - List of classes need to be add to the element
   * @param {string[]} removeClasses - List of classes need to be remove from the element
   * @returns {void} ?
   * @private
   */
  function classList(element, addClasses, removeClasses) {
    addClass([element], addClasses);
    removeClass([element], removeClasses);
  }
  /**
   * Method to check whether the element matches the given selector.
   *
   * @param {Element} element - Element to compare with the selector.
   * @param {string} selector - String selector which element will satisfy.
   * @returns {void} ?
   * @private
   */
  function matches(element, selector) {
    // eslint-disable-next-line
    var matches = element.matches || element.msMatchesSelector || element.webkitMatchesSelector;
    if (matches) {
      return matches.call(element, selector);
    } else {
      return [].indexOf.call(document.querySelectorAll(selector), element) !== -1;
    }
  }
  /**
   * Method to get the html text from DOM.
   *
   * @param {HTMLElement} ele - Element to compare with the selector.
   * @param {string} innerHTML - String selector which element will satisfy.
   * @returns {void} ?
   * @private
   */
  function includeInnerHTML(ele, innerHTML) {
    ele.innerHTML = innerHTML;
  }
  /**
   * Method to get the containsclass.
   *
   * @param {HTMLElement} ele - Element to compare with the selector.
   * @param {string} className - String selector which element will satisfy.
   * @returns {any} ?
   * @private
   */
  // eslint-disable-next-line
  function containsClass(ele, className) {
    if (isObject(ele)) {
      // eslint-disable-next-line
      return new RegExp('\\b' + className + '\\b', 'i').test(ele.attributes.className);
    } else {
      return ele.classList.contains(className);
    }
  }
  /**
   * Method to check whether the element matches the given selector.
   *
   * @param {Object} element - Element to compare with the selector.
   * @param {boolean} deep ?
   * @returns {any} ?
   * @private
   */
  // eslint-disable-next-line
  function cloneNode(element, deep) {
    if (isObject(element)) {
      if (deep) {
        return extend({}, {}, element, true);
      }
    } else {
      return element.cloneNode(deep);
    }
  }
  var isColEName = new RegExp(']');
  /* tslint:enable:no-any */
  /**
   * Base library module is common module for Framework modules like touch,keyboard and etc.,
   *
   * @private
   */
  var Base = /** @class */function () {
    /**
     * Base constructor accept options and element
     *
     * @param {Object} options ?
     * @param {string} element ?
     */
    function Base(options, element) {
      this.isRendered = false;
      this.isComplexArraySetter = false;
      this.isServerRendered = false;
      this.allowServerDataBinding = true;
      this.isProtectedOnChange = true;
      this.properties = {};
      this.changedProperties = {};
      this.oldProperties = {};
      this.bulkChanges = {};
      this.refreshing = false;
      this.ignoreCollectionWatch = false;
      // eslint-disable-next-line
      this.finalUpdate = function () {};
      this.childChangedProperties = {};
      this.modelObserver = new Observer(this);
      if (!isUndefined(element)) {
        if ('string' === typeof element) {
          this.element = document.querySelector(element);
        } else {
          this.element = element;
        }
        if (!isNullOrUndefined(this.element)) {
          this.isProtectedOnChange = false;
          this.addInstance();
        }
      }
      if (!isUndefined(options)) {
        this.setProperties(options, true);
      }
      this.isDestroyed = false;
    }
    /** Property base section */
    /**
     * Function used to set bunch of property at a time.
     *
     * @private
     * @param  {Object} prop - JSON object which holds components properties.
     * @param  {boolean} muteOnChange ? - Specifies to true when we set properties.
     * @returns {void} ?
     */
    Base.prototype.setProperties = function (prop, muteOnChange) {
      var prevDetection = this.isProtectedOnChange;
      this.isProtectedOnChange = !!muteOnChange;
      merge(this, prop);
      if (muteOnChange !== true) {
        merge(this.changedProperties, prop);
        this.dataBind();
      } else if (isBlazor() && this.isRendered) {
        this.serverDataBind(prop);
      }
      this.finalUpdate();
      this.changedProperties = {};
      this.oldProperties = {};
      this.isProtectedOnChange = prevDetection;
    };
    /**
     * Calls for child element data bind
     *
     * @param {Object} obj ?
     * @param {Object} parent ?
     * @returns {void} ?
     */
    // tslint:disable-next-line:no-any
    Base.callChildDataBind = function (obj, parent) {
      var keys = Object.keys(obj);
      for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        if (parent["" + key] instanceof Array) {
          for (var _a = 0, _b = parent["" + key]; _a < _b.length; _a++) {
            var obj_1 = _b[_a];
            if (obj_1.dataBind !== undefined) {
              obj_1.dataBind();
            }
          }
        } else {
          parent["" + key].dataBind();
        }
      }
    };
    Base.prototype.clearChanges = function () {
      this.finalUpdate();
      this.changedProperties = {};
      this.oldProperties = {};
      this.childChangedProperties = {};
    };
    /**
     * Bind property changes immediately to components
     *
     * @returns {void} ?
     */
    Base.prototype.dataBind = function () {
      Base.callChildDataBind(this.childChangedProperties, this);
      if (Object.getOwnPropertyNames(this.changedProperties).length) {
        var prevDetection = this.isProtectedOnChange;
        var newChanges = this.changedProperties;
        var oldChanges = this.oldProperties;
        this.clearChanges();
        this.isProtectedOnChange = true;
        this.onPropertyChanged(newChanges, oldChanges);
        this.isProtectedOnChange = prevDetection;
      }
    };
    /* tslint:disable:no-any */
    Base.prototype.serverDataBind = function (newChanges) {
      if (!isBlazor()) {
        return;
      }
      newChanges = newChanges ? newChanges : {};
      extend(this.bulkChanges, {}, newChanges, true);
      var sfBlazor = 'sfBlazor';
      if (this.allowServerDataBinding && window["" + sfBlazor].updateModel) {
        window["" + sfBlazor].updateModel(this);
        this.bulkChanges = {};
      }
    };
    /* tslint:enable:no-any */
    Base.prototype.saveChanges = function (key, newValue, oldValue) {
      if (isBlazor()) {
        // tslint:disable-next-line:no-any
        var newChanges = {};
        newChanges["" + key] = newValue;
        this.serverDataBind(newChanges);
      }
      if (this.isProtectedOnChange) {
        return;
      }
      this.oldProperties["" + key] = oldValue;
      this.changedProperties["" + key] = newValue;
      this.finalUpdate();
      this.finalUpdate = setImmediate(this.dataBind.bind(this));
    };
    /** Event Base Section */
    /**
     * Adds the handler to the given event listener.
     *
     * @param {string} eventName - A String that specifies the name of the event
     * @param {Function} handler - Specifies the call to run when the event occurs.
     * @returns {void} ?
     */
    Base.prototype.addEventListener = function (eventName, handler) {
      this.modelObserver.on(eventName, handler);
    };
    /**
     * Removes the handler from the given event listener.
     *
     * @param {string} eventName - A String that specifies the name of the event to remove
     * @param {Function} handler - Specifies the function to remove
     * @returns {void} ?
     */
    Base.prototype.removeEventListener = function (eventName, handler) {
      this.modelObserver.off(eventName, handler);
    };
    /**
     * Triggers the handlers in the specified event.
     *
     * @private
     * @param {string} eventName - Specifies the event to trigger for the specified component properties.
     * Can be a custom event, or any of the standard events.
     * @param {Event} eventProp - Additional parameters to pass on to the event properties
     * @param {Function} successHandler - this function will invoke after event successfully triggered
     * @param {Function} errorHandler - this function will invoke after event if it failured to call.
     * @returns {void} ?
     */
    Base.prototype.trigger = function (eventName, eventProp, successHandler, errorHandler) {
      var _this = this;
      if (this.isDestroyed !== true) {
        var prevDetection = this.isProtectedOnChange;
        this.isProtectedOnChange = false;
        var data = this.modelObserver.notify(eventName, eventProp, successHandler, errorHandler);
        if (isColEName.test(eventName)) {
          var handler = getValue(eventName, this);
          if (handler) {
            var blazor = 'Blazor';
            if (window["" + blazor]) {
              var promise = handler.call(this, eventProp);
              if (promise && typeof promise.then === 'function') {
                if (!successHandler) {
                  data = promise;
                } else {
                  promise.then(function (data) {
                    if (successHandler) {
                      data = typeof data === 'string' && _this.modelObserver.isJson(data) ? JSON.parse(data) : data;
                      successHandler.call(_this, data);
                    }
                  })["catch"](function (data) {
                    if (errorHandler) {
                      data = typeof data === 'string' && _this.modelObserver.isJson(data) ? JSON.parse(data) : data;
                      errorHandler.call(_this, data);
                    }
                  });
                }
              } else if (successHandler) {
                successHandler.call(this, eventProp);
              }
            } else {
              handler.call(this, eventProp);
              if (successHandler) {
                successHandler.call(this, eventProp);
              }
            }
          } else if (successHandler) {
            successHandler.call(this, eventProp);
          }
        }
        this.isProtectedOnChange = prevDetection;
        return data;
      }
    };
    /**
     * To maintain instance in base class
     *
     * @returns {void} ?
     */
    Base.prototype.addInstance = function () {
      // Add module class to the root element
      var moduleClass = 'e-' + this.getModuleName().toLowerCase();
      addClass([this.element], ['e-lib', moduleClass]);
      if (!isNullOrUndefined(this.element.ej2_instances)) {
        this.element.ej2_instances.push(this);
      } else {
        setValue('ej2_instances', [this], this.element);
      }
    };
    /**
     * To remove the instance from the element
     *
     * @returns {void} ?
     */
    Base.prototype.destroy = function () {
      var _this = this;
      // eslint-disable-next-line
      this.element.ej2_instances = this.element.ej2_instances ? this.element.ej2_instances.filter(function (i) {
        if (exports.proxyToRaw) {
          return exports.proxyToRaw(i) !== exports.proxyToRaw(_this);
        }
        return i !== _this;
      }) : [];
      removeClass([this.element], ['e-' + this.getModuleName()]);
      if (this.element.ej2_instances.length === 0) {
        // Remove module class from the root element
        removeClass([this.element], ['e-lib']);
      }
      this.clearChanges();
      this.modelObserver.destroy();
      this.isDestroyed = true;
    };
    return Base;
  }();
  /**
   * Global function to get the component instance from the rendered element.
   *
   * @param {HTMLElement} elem Specifies the HTMLElement or element id string.
   * @param {string} comp Specifies the component module name or Component.
   * @returns {any} ?
   */
  // tslint:disable-next-line:no-any
  function getComponent(elem, comp) {
    var instance;
    var i;
    var ele = typeof elem === 'string' ? document.getElementById(elem) : elem;
    for (i = 0; i < ele.ej2_instances.length; i++) {
      instance = ele.ej2_instances[parseInt(i.toString(), 10)];
      if (typeof comp === 'string') {
        var compName = instance.getModuleName();
        if (comp === compName) {
          return instance;
        }
      } else {
        // tslint:disable-next-line:no-any
        if (instance instanceof comp) {
          return instance;
        }
      }
    }
    return undefined;
  }
  /**
   * Function to remove the child instances.
   *
   * @param {HTMLElement} element ?
   * @return {void}
   * @private
   */
  // tslint:disable-next-line:no-any
  function removeChildInstance(element) {
    // tslint:disable-next-line:no-any
    var childEle = [].slice.call(element.getElementsByClassName('e-control'));
    for (var i = 0; i < childEle.length; i++) {
      var compName = childEle[parseInt(i.toString(), 10)].classList[1].split('e-')[1];
      // tslint:disable-next-line:no-any
      var compInstance = getComponent(childEle[parseInt(i.toString(), 10)], compName);
      if (!isUndefined(compInstance)) {
        compInstance.destroy();
      }
    }
  }
  var setProxyToRaw = function setProxyToRaw(toRaw) {
    exports.proxyToRaw = toRaw;
  };

  /**
   * Returns the Class Object
   *
   * @param {ClassObject} instance - instance of ClassObject
   * @param {string} curKey - key of the current instance
   * @param {Object} defaultValue - default Value
   * @param {Object[]} type ?
   * @returns {ClassObject} ?
   */
  // eslint-disable-next-line
  function getObject(instance, curKey, defaultValue, type) {
    // eslint-disable-next-line
    if (!instance.properties.hasOwnProperty(curKey) || !(instance.properties[curKey] instanceof type)) {
      instance.properties["" + curKey] = createInstance(type, [instance, curKey, defaultValue]);
    }
    return instance.properties["" + curKey];
  }
  /**
   * Returns object array
   *
   * @param {ClassObject} instance ?
   * @param {string} curKey ?
   * @param {Object[]} defaultValue ?
   * @param {Object} type ?
   * @param {boolean} isSetter ?
   * @param {boolean} isFactory ?
   * @returns {Object[]} ?
   */
  // eslint-disable-next-line
  function getObjectArray(instance, curKey, defaultValue, type, isSetter, isFactory) {
    var result = [];
    var len = defaultValue ? defaultValue.length : 0;
    for (var i = 0; i < len; i++) {
      var curType = type;
      if (isFactory) {
        curType = type(defaultValue[parseInt(i.toString(), 10)], instance);
      }
      if (isSetter) {
        var inst = createInstance(curType, [instance, curKey, {}, true]);
        inst.setProperties(defaultValue[parseInt(i.toString(), 10)], true);
        result.push(inst);
      } else {
        result.push(createInstance(curType, [instance, curKey, defaultValue[parseInt(i.toString(), 10)], false]));
      }
    }
    return result;
  }
  /**
   * Returns the properties of the object
   *
   * @param {Object} defaultValue ?
   * @param {string} curKey ?
   * @returns {void} ?
   */
  function propertyGetter(defaultValue, curKey) {
    return function () {
      // eslint-disable-next-line
      if (!this.properties.hasOwnProperty(curKey)) {
        this.properties["" + curKey] = defaultValue;
      }
      return this.properties["" + curKey];
    };
  }
  /**
   * Set the properties for the object
   *
   * @param {Object} defaultValue ?
   * @param {string} curKey ?
   * @returns {void} ?
   */
  function propertySetter(defaultValue, curKey) {
    return function (newValue) {
      if (this.properties["" + curKey] !== newValue) {
        // eslint-disable-next-line
        var oldVal = this.properties.hasOwnProperty(curKey) ? this.properties[curKey] : defaultValue;
        this.saveChanges(curKey, newValue, oldVal);
        this.properties["" + curKey] = newValue;
      }
    };
  }
  /**
   * Returns complex objects
   *
   * @param {Object} defaultValue ?
   * @param {string} curKey ?
   * @param {Object[]} type ?
   * @returns {void} ?
   */
  // eslint-disable-next-line
  function complexGetter(defaultValue, curKey, type) {
    return function () {
      return getObject(this, curKey, defaultValue, type);
    };
  }
  /**
   * Sets complex objects
   *
   * @param {Object} defaultValue ?
   * @param {string} curKey ?
   * @param {Object[]} type ?
   * @returns {void} ?
   */
  function complexSetter(defaultValue, curKey, type) {
    return function (newValue) {
      getObject(this, curKey, defaultValue, type).setProperties(newValue);
    };
  }
  /**
   *
   * @param {Object} defaultValue ?
   * @param {string} curKey ?
   * @param {FunctionConstructor} type ?
   * @returns {void} ?
   */
  // eslint-disable-next-line
  function complexFactoryGetter(defaultValue, curKey, type) {
    return function () {
      var curType = type({});
      // eslint-disable-next-line
      if (this.properties.hasOwnProperty(curKey)) {
        return this.properties["" + curKey];
      } else {
        return getObject(this, curKey, defaultValue, curType);
      }
    };
  }
  /**
   *
   * @param {Object} defaultValue ?
   * @param {string} curKey ?
   * @param {Object[]} type ?
   * @returns {void} ?
   */
  function complexFactorySetter(defaultValue, curKey, type) {
    return function (newValue) {
      var curType = type(newValue, this);
      getObject(this, curKey, defaultValue, curType).setProperties(newValue);
    };
  }
  /**
   *
   * @param {Object[]} defaultValue ?
   * @param {string} curKey ?
   * @param {Object[]} type ?
   * @returns {void} ?
   */
  function complexArrayGetter(defaultValue, curKey, type) {
    return function () {
      var _this = this;
      // eslint-disable-next-line
      if (!this.properties.hasOwnProperty(curKey)) {
        var defCollection = getObjectArray(this, curKey, defaultValue, type, false);
        this.properties["" + curKey] = defCollection;
      }
      var ignore = this.controlParent !== undefined && this.controlParent.ignoreCollectionWatch || this.ignoreCollectionWatch;
      // eslint-disable-next-line
      if (!this.properties[curKey].hasOwnProperty('push') && !ignore) {
        ['push', 'pop'].forEach(function (extendFunc) {
          var descriptor = {
            value: complexArrayDefinedCallback(extendFunc, curKey, type, _this.properties["" + curKey]).bind(_this),
            configurable: true
          };
          Object.defineProperty(_this.properties["" + curKey], extendFunc, descriptor);
        });
      }
      // eslint-disable-next-line
      if (!this.properties[curKey].hasOwnProperty('isComplexArray')) {
        Object.defineProperty(this.properties["" + curKey], 'isComplexArray', {
          value: true
        });
      }
      return this.properties["" + curKey];
    };
  }
  /**
   *
   * @param {Object[]} defaultValue ?
   * @param {string} curKey ?
   * @param {Object[]} type ?
   * @returns {void} ?
   */
  function complexArraySetter(defaultValue, curKey, type) {
    return function (newValue) {
      this.isComplexArraySetter = true;
      var oldValueCollection = getObjectArray(this, curKey, defaultValue, type, false);
      var newValCollection = getObjectArray(this, curKey, newValue, type, true);
      this.isComplexArraySetter = false;
      this.saveChanges(curKey, newValCollection, oldValueCollection);
      this.properties["" + curKey] = newValCollection;
    };
  }
  /**
   *
   * @param {Object[]} defaultValue ?
   * @param {string} curKey ?
   * @param {Object[]} type ?
   * @returns {void} ?
   */
  function complexArrayFactorySetter(defaultValue, curKey, type) {
    return function (newValue) {
      // eslint-disable-next-line
      var oldValueCollection = this.properties.hasOwnProperty(curKey) ? this.properties[curKey] : defaultValue;
      var newValCollection = getObjectArray(this, curKey, newValue, type, true, true);
      this.saveChanges(curKey, newValCollection, oldValueCollection);
      this.properties["" + curKey] = newValCollection;
    };
  }
  /**
   *
   * @param {Object[]} defaultValue ?
   * @param {string} curKey ?
   * @param {FunctionConstructor} type ?
   * @returns {void} ?
   */
  function complexArrayFactoryGetter(defaultValue, curKey, type) {
    return function () {
      var curType = type({});
      // eslint-disable-next-line
      if (!this.properties.hasOwnProperty(curKey)) {
        var defCollection = getObjectArray(this, curKey, defaultValue, curType, false);
        this.properties["" + curKey] = defCollection;
      }
      return this.properties["" + curKey];
    };
  }
  /**
   *
   * @param {string} dFunc ?
   * @param {string} curKey ?
   * @param {Object} type ?
   * @param {Object} prop ?
   * @returns {Object} ?
   */
  function complexArrayDefinedCallback(dFunc, curKey, type, prop) {
    /* tslint:disable no-function-expression */
    return function () {
      var newValue = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        newValue[_i] = arguments[_i];
      }
      var keyString = this.propName ? this.getParentKey() + '.' + curKey + '-' : curKey + '-';
      switch (dFunc) {
        case 'push':
          for (var i = 0; i < newValue.length; i++) {
            var newValueParse = newValue[parseInt(i.toString(), 10)];
            Array.prototype["" + dFunc].apply(prop, [newValueParse]);
            var model_1 = getArrayModel(keyString + (prop.length - 1), newValueParse, !this.controlParent, dFunc);
            this.serverDataBind(model_1, newValue[parseInt(i.toString(), 10)], false, dFunc);
          }
          break;
        case 'pop':
          Array.prototype["" + dFunc].apply(prop);
          // eslint-disable-next-line
          var model = getArrayModel(keyString + prop.length, null, !this.controlParent, dFunc);
          this.serverDataBind(model, {
            ejsAction: 'pop'
          }, false, dFunc);
          break;
      }
      return prop;
    };
  }
  /**
   *
   * @param {string} keyString ?
   * @param {Object} value ?
   * @param {boolean} isControlParent ?
   * @param {string} arrayFunction ?
   * @returns {Object} ?
   */
  function getArrayModel(keyString, value, isControlParent, arrayFunction) {
    var modelObject = keyString;
    if (isControlParent) {
      modelObject = {};
      modelObject["" + keyString] = value;
      if (value && _typeof(value) === 'object') {
        var action = 'ejsAction';
        modelObject["" + keyString]["" + action] = arrayFunction;
      }
    }
    return modelObject;
  }
  // eslint-disable-next-line
  /**
   * Method used to create property. General syntax below.
   *
   * @param {Object} defaultValue - Specifies the default value of property.
   * @returns {PropertyDecorator} ?
   * ```
   * @Property('TypeScript')
   * propertyName: Type;
   * ```
   * @private
   */
  function Property(defaultValue) {
    return function (target, key) {
      var propertyDescriptor = {
        set: propertySetter(defaultValue, key),
        get: propertyGetter(defaultValue, key),
        enumerable: true,
        configurable: true
      };
      //new property creation
      Object.defineProperty(target, key, propertyDescriptor);
      addPropertyCollection(target, key, 'prop', defaultValue);
    };
  }
  /**
   * Method used to create complex property. General syntax below.
   *
   * @param  {any} defaultValue - Specifies the default value of property.
   * @param  {Function} type - Specifies the class type of complex object.
   * @returns {PropertyDecorator} ?
   * ```
   * @Complex<Type>({},Type)
   * propertyName: Type;
   * ```
   * @private
   */
  function Complex(defaultValue, type) {
    return function (target, key) {
      var propertyDescriptor = {
        set: complexSetter(defaultValue, key, type),
        get: complexGetter(defaultValue, key, type),
        enumerable: true,
        configurable: true
      };
      //new property creation
      Object.defineProperty(target, key, propertyDescriptor);
      addPropertyCollection(target, key, 'complexProp', defaultValue, type);
    };
  }
  /**
   * Method used to create complex Factory property. General syntax below.
   *
   * @param  {Function} type - Specifies the class factory type of complex object.
   * @returns {PropertyDecorator} ?
   * ```
   * @ComplexFactory(defaultType, factoryFunction)
   * propertyName: Type1 | Type2;
   * ```
   * @private
   */
  function ComplexFactory(type) {
    return function (target, key) {
      var propertyDescriptor = {
        set: complexFactorySetter({}, key, type),
        get: complexFactoryGetter({}, key, type),
        enumerable: true,
        configurable: true
      };
      //new property creation
      Object.defineProperty(target, key, propertyDescriptor);
      addPropertyCollection(target, key, 'complexProp', {}, type);
    };
  }
  /**
   * Method used to create complex array property. General syntax below.
   *
   * @param  {any} defaultValue - Specifies the default value of property.
   * @param  {Function} type - Specifies the class type of complex object.
   * @returns {PropertyDecorator} ?
   * ```
   * @Collection([], Type);
   * propertyName: Type;
   * ```
   * @private
   */
  function Collection(defaultValue, type) {
    return function (target, key) {
      var propertyDescriptor = {
        set: complexArraySetter(defaultValue, key, type),
        get: complexArrayGetter(defaultValue, key, type),
        enumerable: true,
        configurable: true
      };
      //new property creation
      Object.defineProperty(target, key, propertyDescriptor);
      addPropertyCollection(target, key, 'colProp', defaultValue, type);
    };
  }
  /**
   * Method used to create complex factory array property. General syntax below.
   *
   * @param  {Function} type - Specifies the class type of complex object.
   * @returns {PropertyCollectionInfo} ?
   * ```
   * @Collection([], Type);
   * propertyName: Type;
   * ```
   * @private
   */
  function CollectionFactory(type) {
    return function (target, key) {
      var propertyDescriptor = {
        set: complexArrayFactorySetter([], key, type),
        get: complexArrayFactoryGetter([], key, type),
        enumerable: true,
        configurable: true
      };
      //new property creation
      Object.defineProperty(target, key, propertyDescriptor);
      addPropertyCollection(target, key, 'colProp', {}, type);
    };
  }
  /**
   * Method used to create event property. General syntax below.
   *
   * @returns {PropertyDecorator} ?
   * ```
   * @Event(()=>{return true;})
   * ```
   * @private
   */
  function Event$1() {
    return function (target, key) {
      var eventDescriptor = {
        set: function set(newValue) {
          var oldValue = this.properties["" + key];
          if (oldValue !== newValue) {
            var finalContext = getParentContext(this, key);
            if (isUndefined(oldValue) === false) {
              finalContext.context.removeEventListener(finalContext.prefix, oldValue);
            }
            finalContext.context.addEventListener(finalContext.prefix, newValue);
            this.properties["" + key] = newValue;
          }
        },
        get: propertyGetter(undefined, key),
        enumerable: true,
        configurable: true
      };
      Object.defineProperty(target, key, eventDescriptor);
      addPropertyCollection(target, key, 'event');
    };
  }
  /**
   * NotifyPropertyChanges is triggers the call back when the property has been changed.
   *
   * @param {Function} classConstructor ?
   * @returns {void} ?
   * ```
   *  @NotifyPropertyChanges
   * class DemoClass implements INotifyPropertyChanged {
   *
   *     @Property()
   *     property1: string;
   *
   *     dataBind: () => void;
   *
   *     constructor() { }
   *
   *     onPropertyChanged(newProp: any, oldProp: any) {
   *         // Called when property changed
   *     }
   * }
   * ```
   * @private
   */
  // eslint-disable-next-line
  function NotifyPropertyChanges(classConstructor) {
    /** Need to code */
  }
  /**
   * Method  used to create the builderObject for the target component.
   *
   * @param {BuildInfo} target ?
   * @param {string} key ?
   * @param {string} propertyType ?
   * @param {Object} defaultValue ?
   * @param {Function} type ?
   * @returns {void} ?
   * @private
   */
  function addPropertyCollection(target, key, propertyType, defaultValue, type) {
    if (isUndefined(target.propList)) {
      target.propList = {
        props: [],
        complexProps: [],
        colProps: [],
        events: [],
        propNames: [],
        complexPropNames: [],
        colPropNames: [],
        eventNames: []
      };
    }
    // eslint-disable-next-line
    target.propList[propertyType + 's'].push({
      propertyName: key,
      defaultValue: defaultValue,
      type: type
    });
    // eslint-disable-next-line
    target.propList[propertyType + 'Names'].push(key);
  }
  /**
   * Returns an object containing the builder properties
   *
   * @param {Function} component ?
   * @returns {Object} ?
   * @private
   */
  function getBuilderProperties(component) {
    if (isUndefined(component.prototype.builderObject)) {
      component.prototype.builderObject = {
        properties: {},
        propCollections: [],
        add: function add() {
          this.isPropertyArray = true;
          this.propCollections.push(extend({}, this.properties, {}));
        }
      };
      var rex = /complex/;
      for (var _i = 0, _a = Object.keys(component.prototype.propList); _i < _a.length; _i++) {
        var key = _a[_i];
        var _loop_1 = function _loop_1(prop) {
          if (rex.test(key)) {
            component.prototype.builderObject[prop.propertyName] = function (value) {
              var childType = {};
              merge(childType, getBuilderProperties(prop.type));
              value(childType);
              var tempValue;
              if (!childType.isPropertyArray) {
                tempValue = extend({}, childType.properties, {});
              } else {
                tempValue = childType.propCollections;
              }
              this.properties[prop.propertyName] = tempValue;
              childType.properties = {};
              childType.propCollections = [];
              childType.isPropertyArray = false;
              return this;
            };
          } else {
            component.prototype.builderObject[prop.propertyName] = function (value) {
              this.properties[prop.propertyName] = value;
              return this;
            };
          }
        };
        for (var _b = 0, _c = component.prototype.propList["" + key]; _b < _c.length; _b++) {
          var prop = _c[_b];
          _loop_1(prop);
        }
      }
    }
    return component.prototype.builderObject;
  }
  /**
   * Method used to create builder for the components
   *
   * @param {any} component -specifies the target component for which builder to be created.
   * @returns {Object} ?
   * @private
   */
  function CreateBuilder(component) {
    var builderFunction = function builderFunction(element) {
      this.element = element;
      return this;
    };
    var instanceFunction = function instanceFunction(element) {
      // eslint-disable-next-line
      if (!builderFunction.prototype.hasOwnProperty('create')) {
        builderFunction.prototype = getBuilderProperties(component);
        builderFunction.prototype.create = function () {
          var temp = extend({}, {}, this.properties);
          this.properties = {};
          return new component(temp, this.element);
        };
      }
      return new builderFunction(element);
    };
    return instanceFunction;
  }
  /**
   * Returns parent options for the object
   *
   * @param {Object} context ?
   * @param {string} prefix ?
   * @returns {ParentOption} ?
   * @private
   */
  function getParentContext(context, prefix) {
    // eslint-disable-next-line
    if (context.hasOwnProperty('parentObj') === false) {
      return {
        context: context,
        prefix: prefix
      };
    } else {
      var curText = getValue('propName', context);
      if (curText) {
        prefix = curText + '-' + prefix;
      }
      return getParentContext(getValue('parentObj', context), prefix);
    }
  }
  var __extends = undefined && undefined.__extends || function () {
    var _extendStatics = function extendStatics(d, b) {
      _extendStatics = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics(d, b);
    };
    return function (d, b) {
      _extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  /**
   * The Animation framework provide options to animate the html DOM elements
   * ```typescript
   *   let animeObject = new Animation({
   *      name: 'SlideLeftIn',
   *      duration: 1000
   *   });
   *   animeObject.animate('#anime1');
   *   animeObject.animate('#anime2', { duration: 500 });
   * ```
   */
  var Animation = /** @class */function (_super) {
    __extends(Animation, _super);
    function Animation(options) {
      var _this = _super.call(this, options, undefined) || this;
      /**
       * @private
       */
      _this.easing = {
        ease: 'cubic-bezier(0.250, 0.100, 0.250, 1.000)',
        linear: 'cubic-bezier(0.250, 0.250, 0.750, 0.750)',
        easeIn: 'cubic-bezier(0.420, 0.000, 1.000, 1.000)',
        easeOut: 'cubic-bezier(0.000, 0.000, 0.580, 1.000)',
        easeInOut: 'cubic-bezier(0.420, 0.000, 0.580, 1.000)',
        elasticInOut: 'cubic-bezier(0.5,-0.58,0.38,1.81)',
        elasticIn: 'cubic-bezier(0.17,0.67,0.59,1.81)',
        elasticOut: 'cubic-bezier(0.7,-0.75,0.99,1.01)'
      };
      return _this;
    }
    Animation_1 = Animation;
    /**
     * Applies animation to the current element.
     *
     * @param {string | HTMLElement} element - Element which needs to be animated.
     * @param {AnimationModel} options - Overriding default animation settings.
     * @returns {void} ?
     */
    Animation.prototype.animate = function (element, options) {
      options = !options ? {} : options;
      var model = this.getModel(options);
      if (typeof element === 'string') {
        var elements = Array.prototype.slice.call(selectAll(element, document));
        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
          var element_1 = elements_1[_i];
          model.element = element_1;
          Animation_1.delayAnimation(model);
        }
      } else {
        model.element = element;
        Animation_1.delayAnimation(model);
      }
    };
    /**
     * Stop the animation effect on animated element.
     *
     * @param {HTMLElement} element - Element which needs to be stop the animation.
     * @param {AnimationOptions} model - Handling the animation model at stop function.
     * @return {void}
     */
    Animation.stop = function (element, model) {
      element.style.animation = '';
      element.removeAttribute('e-animate');
      var animationId = element.getAttribute('e-animation-id');
      if (animationId) {
        var frameId = parseInt(animationId, 10);
        cancelAnimationFrame(frameId);
        element.removeAttribute('e-animation-id');
      }
      if (model && model.end) {
        model.end.call(this, model);
      }
    };
    /**
     * Set delay to animation element
     *
     * @param {AnimationModel} model ?
     * @returns {void}
     */
    Animation.delayAnimation = function (model) {
      if (exports.animationMode === 'Disable' || exports.animationMode === exports.GlobalAnimationMode.Disable) {
        if (model.begin) {
          model.begin.call(this, model);
        }
        if (model.end) {
          model.end.call(this, model);
        }
      } else {
        if (model.delay) {
          setTimeout(function () {
            Animation_1.applyAnimation(model);
          }, model.delay);
        } else {
          Animation_1.applyAnimation(model);
        }
      }
    };
    /**
     * Triggers animation
     *
     * @param {AnimationModel} model ?
     * @returns {void}
     */
    Animation.applyAnimation = function (model) {
      var _this = this;
      model.timeStamp = 0;
      var step = 0;
      var timerId = 0;
      var prevTimeStamp = 0;
      var duration = model.duration;
      model.element.setAttribute('e-animate', 'true');
      var startAnimation = function startAnimation(timeStamp) {
        try {
          if (timeStamp) {
            // let step: number = model.timeStamp = timeStamp - startTime;
            /** phantomjs workaround for timestamp fix */
            prevTimeStamp = prevTimeStamp === 0 ? timeStamp : prevTimeStamp;
            model.timeStamp = timeStamp + model.timeStamp - prevTimeStamp;
            prevTimeStamp = timeStamp;
            /** phantomjs workaround end */
            // trigger animation begin event
            if (!step && model.begin) {
              model.begin.call(_this, model);
            }
            step = step + 1;
            var avg = model.timeStamp / step;
            if (model.timeStamp < duration && model.timeStamp + avg < duration && model.element.getAttribute('e-animate')) {
              // apply animation effect to the current element
              model.element.style.animation = model.name + ' ' + model.duration + 'ms ' + model.timingFunction;
              if (model.progress) {
                model.progress.call(_this, model);
              }
              // repeat requestAnimationFrame
              requestAnimationFrame(startAnimation);
            } else {
              // clear requestAnimationFrame
              cancelAnimationFrame(timerId);
              model.element.removeAttribute('e-animation-id');
              model.element.removeAttribute('e-animate');
              model.element.style.animation = '';
              if (model.end) {
                model.end.call(_this, model);
              }
            }
          } else {
            //startTime = performance.now();
            // set initial requestAnimationFrame
            timerId = requestAnimationFrame(startAnimation);
            model.element.setAttribute('e-animation-id', timerId.toString());
          }
        } catch (e) {
          cancelAnimationFrame(timerId);
          model.element.removeAttribute('e-animation-id');
          if (model.fail) {
            model.fail.call(_this, e);
          }
        }
      };
      startAnimation();
    };
    /**
     * Returns Animation Model
     *
     * @param {AnimationModel} options ?
     * @returns {AnimationModel} ?
     */
    Animation.prototype.getModel = function (options) {
      return {
        name: options.name || this.name,
        delay: options.delay || this.delay,
        duration: options.duration !== undefined ? options.duration : this.duration,
        begin: options.begin || this.begin,
        end: options.end || this.end,
        fail: options.fail || this.fail,
        progress: options.progress || this.progress,
        timingFunction: this.easing[options.timingFunction] ? this.easing[options.timingFunction] : options.timingFunction || this.easing[this.timingFunction]
      };
    };
    /**
     * @private
     * @param {AnimationModel} newProp ?
     * @param {AnimationModel} oldProp ?
     * @returns {void} ?
     */
    // eslint-disable-next-line
    Animation.prototype.onPropertyChanged = function (newProp, oldProp) {
      // no code needed
    };
    /**
     * Returns module name as animation
     *
     * @private
     * @returns {void} ?
     */
    Animation.prototype.getModuleName = function () {
      return 'animation';
    };
    /**
     *
     * @private
     * @returns {void} ?
     */
    Animation.prototype.destroy = function () {
      //Override base destroy;
    };
    var Animation_1;
    __decorate([Property('FadeIn')], Animation.prototype, "name", void 0);
    __decorate([Property(400)], Animation.prototype, "duration", void 0);
    __decorate([Property('ease')], Animation.prototype, "timingFunction", void 0);
    __decorate([Property(0)], Animation.prototype, "delay", void 0);
    __decorate([Event$1()], Animation.prototype, "progress", void 0);
    __decorate([Event$1()], Animation.prototype, "begin", void 0);
    __decorate([Event$1()], Animation.prototype, "end", void 0);
    __decorate([Event$1()], Animation.prototype, "fail", void 0);
    Animation = Animation_1 = __decorate([NotifyPropertyChanges], Animation);
    return Animation;
  }(Base);
  /**
   * Ripple provides material theme's wave effect when an element is clicked
   * ```html
   * <div id='ripple'></div>
   * <script>
   *   rippleEffect(document.getElementById('ripple'));
   * </script>
   * ```
   *
   * @private
   * @param {HTMLElement} element - Target element
   * @param {RippleOptions} rippleOptions - Ripple options .
   * @param {Function} done .
   * @returns {void} .
   */
  function rippleEffect(element, rippleOptions, done) {
    var rippleModel = getRippleModel(rippleOptions);
    if (rippleModel.rippleFlag === false || rippleModel.rippleFlag === undefined && !exports.isRippleEnabled) {
      return function () {
        // do nothing.
      };
    }
    element.setAttribute('data-ripple', 'true');
    EventHandler.add(element, 'mousedown', rippleHandler, {
      parent: element,
      rippleOptions: rippleModel
    });
    EventHandler.add(element, 'mouseup', rippleUpHandler, {
      parent: element,
      rippleOptions: rippleModel,
      done: done
    });
    EventHandler.add(element, 'mouseleave', rippleLeaveHandler, {
      parent: element,
      rippleOptions: rippleModel
    });
    if (Browser.isPointer) {
      EventHandler.add(element, 'transitionend', rippleLeaveHandler, {
        parent: element,
        rippleOptions: rippleModel
      });
    }
    return function () {
      element.removeAttribute('data-ripple');
      EventHandler.remove(element, 'mousedown', rippleHandler);
      EventHandler.remove(element, 'mouseup', rippleUpHandler);
      EventHandler.remove(element, 'mouseleave', rippleLeaveHandler);
      EventHandler.remove(element, 'transitionend', rippleLeaveHandler);
    };
  }
  /**
   * Handler for ripple model
   *
   * @param {RippleOptions} rippleOptions ?
   * @returns {RippleOptions} ?
   */
  function getRippleModel(rippleOptions) {
    var rippleModel = {
      selector: rippleOptions && rippleOptions.selector ? rippleOptions.selector : null,
      ignore: rippleOptions && rippleOptions.ignore ? rippleOptions.ignore : null,
      rippleFlag: rippleOptions && rippleOptions.rippleFlag,
      isCenterRipple: rippleOptions && rippleOptions.isCenterRipple,
      duration: rippleOptions && rippleOptions.duration ? rippleOptions.duration : 350
    };
    return rippleModel;
  }
  /**
   * Handler for ripple event
   *
   * @param {MouseEvent} e ?
   * @returns {void} ?
   * @private
   */
  function rippleHandler(e) {
    var target = e.target;
    var selector = this.rippleOptions.selector;
    var element = selector ? closest(target, selector) : target;
    if (!element || this.rippleOptions && closest(target, this.rippleOptions.ignore)) {
      return;
    }
    var offset = element.getBoundingClientRect();
    var offsetX = e.pageX - document.body.scrollLeft;
    var offsetY = e.pageY - (!document.body.scrollTop && document.documentElement ? document.documentElement.scrollTop : document.body.scrollTop);
    var pageX = Math.max(Math.abs(offsetX - offset.left), Math.abs(offsetX - offset.right));
    var pageY = Math.max(Math.abs(offsetY - offset.top), Math.abs(offsetY - offset.bottom));
    var radius = Math.sqrt(pageX * pageX + pageY * pageY);
    var diameter = radius * 2 + 'px';
    var x = offsetX - offset.left - radius;
    var y = offsetY - offset.top - radius;
    if (this.rippleOptions && this.rippleOptions.isCenterRipple) {
      x = 0;
      y = 0;
      diameter = '100%';
    }
    element.classList.add('e-ripple');
    var duration = this.rippleOptions.duration.toString();
    var styles = 'width: ' + diameter + ';height: ' + diameter + ';left: ' + x + 'px;top: ' + y + 'px;' + 'transition-duration: ' + duration + 'ms;';
    var rippleElement = createElement('div', {
      className: 'e-ripple-element',
      styles: styles
    });
    element.appendChild(rippleElement);
    window.getComputedStyle(rippleElement).getPropertyValue('opacity');
    rippleElement.style.transform = 'scale(1)';
    if (element !== this.parent) {
      EventHandler.add(element, 'mouseleave', rippleLeaveHandler, {
        parent: this.parent,
        rippleOptions: this.rippleOptions
      });
    }
  }
  /**
   * Handler for ripple element mouse up event
   *
   * @param {MouseEvent} e ?
   * @returns {void} ?
   * @private
   */
  function rippleUpHandler(e) {
    removeRipple(e, this);
  }
  /**
   * Handler for ripple element mouse move event
   *
   * @param {MouseEvent} e ?
   * @returns {void} ?
   * @private
   */
  function rippleLeaveHandler(e) {
    removeRipple(e, this);
  }
  /**
   * Handler for removing ripple element
   *
   * @param {MouseEvent} e ?
   * @param {RippleArgs} eventArgs ?
   * @returns {void} ?
   * @private
   */
  function removeRipple(e, eventArgs) {
    var duration = eventArgs.rippleOptions.duration;
    var target = e.target;
    var selector = eventArgs.rippleOptions.selector;
    var element = selector ? closest(target, selector) : target;
    if (!element || element && element.className.indexOf('e-ripple') === -1) {
      return;
    }
    var rippleElements = selectAll('.e-ripple-element', element);
    var rippleElement = rippleElements[rippleElements.length - 1];
    if (rippleElement) {
      rippleElement.style.opacity = '0.5';
    }
    if (eventArgs.parent !== element) {
      EventHandler.remove(element, 'mouseleave', rippleLeaveHandler);
    }
    /* tslint:disable:align */
    setTimeout(function () {
      if (rippleElement && rippleElement.parentNode) {
        rippleElement.parentNode.removeChild(rippleElement);
      }
      if (!element.getElementsByClassName('e-ripple-element').length) {
        element.classList.remove('e-ripple');
      }
      if (eventArgs.done) {
        eventArgs.done(e);
      }
    }, duration);
  }
  exports.isRippleEnabled = false;
  /**
   * Animation Module provides support to enable ripple effect functionality to Essential JS 2 components.
   *
   * @param {boolean} isRipple Specifies the boolean value to enable or disable ripple effect.
   * @returns {boolean} ?
   */
  function enableRipple(isRipple) {
    exports.isRippleEnabled = isRipple;
    return exports.isRippleEnabled;
  }
  /**
   * Defines the Modes of Global animation.
   *
   * @private
   */

  /**
   * This method is used to enable or disable the animation for all components.
   *
   * @param {string|GlobalAnimationMode} value - Specifies the value to enable or disable the animation for all components. When set to 'enable', it enables the animation for all components, regardless of the individual component's animation settings. When set to 'disable', it disables the animation for all components, regardless of the individual component's animation settings.
   * @returns {void}
   */
  function setGlobalAnimation(value) {
    exports.animationMode = value;
  }
  /**
   * Defines the global animation modes for all components.
   */

  (function (GlobalAnimationMode) {
    /**
     * Defines the global animation mode as Default. Animation is enabled or disabled based on the component's animation settings.
     */
    GlobalAnimationMode["Default"] = "Default";
    /**
     * Defines the global animation mode as Enable. Enables the animation for all components, regardless of the individual component's animation settings.
     */
    GlobalAnimationMode["Enable"] = "Enable";
    /**
     * Defines the global animation mode as Disable. Disables the animation for all components, regardless of the individual component's animation settings.
     */
    GlobalAnimationMode["Disable"] = "Disable";
  })(exports.GlobalAnimationMode || (exports.GlobalAnimationMode = {}));

  /**
   * Module loading operations
   */
  var MODULE_SUFFIX = 'Module';
  var ModuleLoader = /** @class */function () {
    function ModuleLoader(parent) {
      this.loadedModules = [];
      this.parent = parent;
    }
    /**
     * Inject required modules in component library
     *
     * @returns {void} ?
     * @param {ModuleDeclaration[]} requiredModules - Array of modules to be required
     * @param {Function[]} moduleList - Array of modules to be injected from sample side
     */
    ModuleLoader.prototype.inject = function (requiredModules, moduleList) {
      var reqLength = requiredModules.length;
      if (reqLength === 0) {
        this.clean();
        return;
      }
      if (this.loadedModules.length) {
        this.clearUnusedModule(requiredModules);
      }
      for (var i = 0; i < reqLength; i++) {
        var modl = requiredModules[parseInt(i.toString(), 10)];
        for (var _i = 0, moduleList_1 = moduleList; _i < moduleList_1.length; _i++) {
          var module = moduleList_1[_i];
          var modName = modl.member;
          if (module && module.prototype.getModuleName() === modl.member && !this.isModuleLoaded(modName)) {
            var moduleObject = createInstance(module, modl.args);
            var memberName = this.getMemberName(modName);
            if (modl.isProperty) {
              setValue(memberName, module, this.parent);
            } else {
              setValue(memberName, moduleObject, this.parent);
            }
            var loadedModule = modl;
            loadedModule.member = memberName;
            this.loadedModules.push(loadedModule);
          }
        }
      }
    };
    /**
     * To remove the created object while destroying the control
     *
     * @returns {void}
     */
    ModuleLoader.prototype.clean = function () {
      for (var _i = 0, _a = this.loadedModules; _i < _a.length; _i++) {
        var modules = _a[_i];
        if (!modules.isProperty) {
          getValue(modules.member, this.parent).destroy();
        }
      }
      this.loadedModules = [];
    };
    /**
     * Returns the array of modules that are not loaded in the component library.
     *
     * @param {ModuleDeclaration[]} requiredModules - Array of modules to be required
     * @returns {ModuleDeclaration[]} ?
     * @private
     */
    ModuleLoader.prototype.getNonInjectedModules = function (requiredModules) {
      var _this = this;
      return requiredModules.filter(function (module) {
        return !_this.isModuleLoaded(module.member);
      });
    };
    /**
     * Removes all unused modules
     *
     * @param {ModuleDeclaration[]} moduleList ?
     * @returns {void} ?
     */
    ModuleLoader.prototype.clearUnusedModule = function (moduleList) {
      var _this = this;
      var usedModules = moduleList.map(function (arg) {
        return _this.getMemberName(arg.member);
      });
      var removableModule = this.loadedModules.filter(function (module) {
        return usedModules.indexOf(module.member) === -1;
      });
      for (var _i = 0, removableModule_1 = removableModule; _i < removableModule_1.length; _i++) {
        var mod = removableModule_1[_i];
        if (!mod.isProperty) {
          getValue(mod.member, this.parent).destroy();
        }
        this.loadedModules.splice(this.loadedModules.indexOf(mod), 1);
        deleteObject(this.parent, mod.member);
      }
    };
    /**
     * To get the name of the member.
     *
     * @param {string} name ?
     * @returns {string} ?
     */
    ModuleLoader.prototype.getMemberName = function (name) {
      return name[0].toLowerCase() + name.substring(1) + MODULE_SUFFIX;
    };
    /**
     * Returns boolean based on whether the module specified is loaded or not
     *
     * @param {string} modName ?
     * @returns {boolean} ?
     */
    ModuleLoader.prototype.isModuleLoaded = function (modName) {
      for (var _i = 0, _a = this.loadedModules; _i < _a.length; _i++) {
        var mod = _a[_i];
        if (mod.member === this.getMemberName(modName)) {
          return true;
        }
      }
      return false;
    };
    return ModuleLoader;
  }();

  /**
   * To detect the changes for inner properties.
   *
   * @private
   */
  var ChildProperty = /** @class */function () {
    function ChildProperty(parent, propName, defaultValue, isArray) {
      this.isComplexArraySetter = false;
      this.properties = {};
      this.changedProperties = {};
      this.childChangedProperties = {};
      this.oldProperties = {};
      // eslint-disable-next-line
      this.finalUpdate = function () {};
      this.callChildDataBind = getValue('callChildDataBind', Base);
      this.parentObj = parent;
      this.controlParent = this.parentObj.controlParent || this.parentObj;
      this.propName = propName;
      this.isParentArray = isArray;
      this.setProperties(defaultValue, true);
    }
    /**
     * Updates the property changes
     *
     * @param {boolean} val ?
     * @param {string} propName ?
     * @returns {void} ?
     */
    ChildProperty.prototype.updateChange = function (val, propName) {
      if (val === true) {
        this.parentObj.childChangedProperties["" + propName] = val;
      } else {
        delete this.parentObj.childChangedProperties["" + propName];
      }
      if (this.parentObj.updateChange) {
        this.parentObj.updateChange(val, this.parentObj.propName);
      }
    };
    /**
     * Updates time out duration
     *
     * @returns {void} ?
     */
    ChildProperty.prototype.updateTimeOut = function () {
      if (this.parentObj.updateTimeOut) {
        this.parentObj.finalUpdate();
        this.parentObj.updateTimeOut();
      } else {
        var changeTime_1 = setTimeout(this.parentObj.dataBind.bind(this.parentObj));
        var clearUpdate = function clearUpdate() {
          clearTimeout(changeTime_1);
        };
        this.finalUpdate = clearUpdate;
      }
    };
    /**
     * Clears changed properties
     *
     * @returns {void} ?
     */
    ChildProperty.prototype.clearChanges = function () {
      this.finalUpdate();
      this.updateChange(false, this.propName);
      this.oldProperties = {};
      this.changedProperties = {};
    };
    /**
     * Set property changes
     *
     * @param {Object} prop ?
     * @param {boolean} muteOnChange ?
     * @returns {void} ?
     */
    ChildProperty.prototype.setProperties = function (prop, muteOnChange) {
      if (muteOnChange === true) {
        merge(this, prop);
        this.updateChange(false, this.propName);
        this.clearChanges();
      } else {
        merge(this, prop);
      }
    };
    /**
     * Binds data
     *
     * @returns {void} ?
     */
    ChildProperty.prototype.dataBind = function () {
      this.callChildDataBind(this.childChangedProperties, this);
      if (this.isParentArray) {
        var curIndex = this.parentObj[this.propName].indexOf(this);
        if (Object.keys(this.changedProperties).length) {
          setValue(this.propName + '.' + curIndex, this.changedProperties, this.parentObj.changedProperties);
          setValue(this.propName + '.' + curIndex, this.oldProperties, this.parentObj.oldProperties);
        }
      } else {
        this.parentObj.changedProperties[this.propName] = this.changedProperties;
        this.parentObj.oldProperties[this.propName] = this.oldProperties;
      }
      this.clearChanges();
    };
    /**
     * Saves changes to newer values
     *
     * @param {string} key ?
     * @param {Object} newValue ?
     * @param {Object} oldValue ?
     * @param {boolean} restrictServerDataBind ?
     * @returns {void} ?
     */
    ChildProperty.prototype.saveChanges = function (key, newValue, oldValue, restrictServerDataBind) {
      if (this.controlParent.isProtectedOnChange) {
        return;
      }
      if (!restrictServerDataBind) {
        this.serverDataBind(key, newValue, true);
      }
      this.oldProperties["" + key] = oldValue;
      this.changedProperties["" + key] = newValue;
      this.updateChange(true, this.propName);
      this.finalUpdate();
      this.updateTimeOut();
    };
    ChildProperty.prototype.serverDataBind = function (key, value, isSaveChanges, action) {
      if (isBlazor() && !this.parentObj.isComplexArraySetter) {
        var parent_1;
        var newChanges = {};
        var parentKey = isSaveChanges ? this.getParentKey(true) + '.' + key : key;
        /* istanbul ignore else  */
        if (parentKey.indexOf('.') !== -1) {
          var complexKeys = parentKey.split('.');
          parent_1 = newChanges;
          for (var i = 0; i < complexKeys.length; i++) {
            var isFinal = i === complexKeys.length - 1;
            parent_1[complexKeys[parseInt(i.toString(), 10)]] = isFinal ? value : {};
            parent_1 = isFinal ? parent_1 : parent_1[complexKeys[parseInt(i.toString(), 10)]];
          }
        } else {
          newChanges["" + parentKey] = {};
          parent_1 = newChanges["" + parentKey];
          newChanges["" + parentKey]["" + key] = value;
        }
        /* istanbul ignore next */
        if (this.isParentArray) {
          var actionProperty = 'ejsAction';
          parent_1["" + actionProperty] = action ? action : 'none';
        }
        this.controlParent.serverDataBind(newChanges);
      }
    };
    ChildProperty.prototype.getParentKey = function (isSaveChanges) {
      // eslint-disable-next-line
      var index = '';
      var propName = this.propName;
      /* istanbul ignore next */
      if (this.isParentArray) {
        index = this.parentObj[this.propName].indexOf(this);
        var valueLength = this.parentObj[this.propName].length;
        valueLength = isSaveChanges ? valueLength : valueLength > 0 ? valueLength - 1 : 0;
        index = index !== -1 ? '-' + index : '-' + valueLength;
        propName = propName + index;
      }
      if (this.controlParent !== this.parentObj) {
        propName = this.parentObj.getParentKey() + '.' + this.propName + index;
      }
      return propName;
    };
    return ChildProperty;
  }();
  var componentList = ['grid', 'pivotview', 'treegrid', 'spreadsheet', 'rangeNavigator', 'DocumentEditor', 'listbox', 'inplaceeditor', 'PdfViewer', 'richtexteditor', 'DashboardLayout', 'chart', 'stockChart', 'circulargauge', 'diagram', 'heatmap', 'lineargauge', 'maps', 'slider', 'smithchart', 'barcode', 'sparkline', 'treemap', 'bulletChart', 'kanban', 'daterangepicker', 'schedule', 'gantt', 'signature', 'query-builder', 'drop-down-tree', 'carousel', 'filemanager', 'uploader', 'accordion', 'tab', 'treeview'];
  var bypassKey = [115, 121, 110, 99, 102, 117, 115, 105, 111, 110, 46, 105, 115, 76, 105, 99, 86, 97, 108, 105, 100, 97, 116, 101, 100];
  var accountURL;
  /**
   * License validation module
   *
   * @private
   */
  var LicenseValidator = /** @class */function () {
    function LicenseValidator(key) {
      this.isValidated = false;
      this.isLicensed = true;
      this.version = '24';
      this.platform = /JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats|essentialstudio/i;
      this.errors = {
        noLicense: '<span>This application was built using a trial version of Syncfusion Essential Studio.' + ' To remove the license validation message permanently, a valid license key must be included.</span>',
        trailExpired: '<span>This application was built using a trial version of Syncfusion Essential Studio.' + ' To remove the license validation message permanently, a valid license key must be included.</span>',
        versionMismatched: '<span>The included Syncfusion license key is invalid.</span>',
        platformMismatched: '<span>The included Syncfusion license key is invalid.</span>',
        invalidKey: '<span>The included Syncfusion license key is invalid.</span>'
      };
      /**
       * To manage licensing operation.
       */
      this.manager = function () {
        var licKey = null;
        /**
         * Sets the license key.
         *
         * @param {string} key - Specifies the license key.
         * @returns {void}
         */
        function set(key) {
          licKey = key;
        }
        /**
         * Gets the license key.
         *
         * @returns {string} -Gets the license key.
         */
        function get() {
          return licKey;
        }
        return {
          setKey: set,
          getKey: get
        };
      }();
      /**
       * To manage npx licensing operation.
       */
      this.npxManager = function () {
        var npxLicKey = 'npxKeyReplace';
        /**
         * Gets the license key.
         *
         * @returns {string} - Gets the license key.
         */
        function get() {
          return npxLicKey;
        }
        return {
          getKey: get
        };
      }();
      this.manager.setKey(key);
    }
    /**
     * To validate the provided license key.
     *
     * @returns {boolean} ?
     */
    LicenseValidator.prototype.validate = function () {
      var contentKey = [115, 121, 110, 99, 102, 117, 115, 105, 111, 110, 46, 108, 105, 99, 101, 110, 115, 101, 67, 111, 110, 116, 101, 110, 116];
      var URLKey = [115, 121, 110, 99, 102, 117, 115, 105, 111, 110, 46, 99, 108, 97, 105, 109, 65, 99, 99, 111, 117, 110, 116, 85, 82, 76];
      if (!this.isValidated && containerObject && !getValue(convertToChar(bypassKey), containerObject) && !getValue('Blazor', containerObject)) {
        var validateMsg = void 0;
        var validateURL = void 0;
        if (this.manager && this.manager.getKey() || this.npxManager && this.npxManager.getKey() !== 'npxKeyReplace') {
          var result = this.getInfoFromKey();
          if (result && result.length) {
            for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {
              var res = result_1[_i];
              if (!this.platform.test(res.platform) || res.invalidPlatform) {
                validateMsg = this.errors.platformMismatched;
              } else if (res.version.indexOf(this.version) === -1) {
                validateMsg = this.errors.versionMismatched;
                validateMsg = validateMsg.replace('##LicenseVersion', res.version);
                validateMsg = validateMsg.replace('##Requireversion', this.version + '.x');
              } else if (res.expiryDate) {
                var expDate = new Date(res.expiryDate);
                var currDate = new Date();
                if (expDate !== currDate && expDate < currDate) {
                  validateMsg = this.errors.trailExpired;
                } else {
                  break;
                }
              }
            }
          } else {
            validateMsg = this.errors.invalidKey;
          }
        } else {
          var licenseContent = getValue(convertToChar(contentKey), containerObject);
          validateURL = getValue(convertToChar(URLKey), containerObject);
          if (licenseContent && licenseContent !== '') {
            validateMsg = licenseContent;
          } else {
            validateMsg = this.errors.noLicense;
          }
        }
        if (validateMsg && typeof document !== 'undefined' && !isNullOrUndefined(document)) {
          accountURL = validateURL && validateURL !== '' ? validateURL : 'https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjQ=&utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information';
          var errorDiv = createElement('div', {
            innerHTML: "<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>" + validateMsg + ' ' + '<a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href=' + accountURL + '>Claim your free account</a>'
          });
          errorDiv.setAttribute('style', "position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;");
          document.body.appendChild(errorDiv);
          this.isLicensed = false;
        }
        this.isValidated = true;
        setValue(convertToChar(bypassKey), this.isValidated, containerObject);
      }
      return this.isLicensed;
    };
    LicenseValidator.prototype.getDecryptedData = function (key) {
      try {
        return atob(key);
      } catch (error) {
        return '';
      }
    };
    /**
     * Get license information from key.
     *
     * @returns {IValidator} - Get license information from key.
     */
    LicenseValidator.prototype.getInfoFromKey = function () {
      try {
        var licKey = '';
        var pkey = [5439488, 7929856, 5111808, 6488064, 4587520, 7667712, 5439488, 6881280, 5177344, 7208960, 4194304, 4456448, 6619136, 7733248, 5242880, 7077888, 6356992, 7602176, 4587520, 7274496, 7471104, 7143424];
        var decryptedStr = [];
        var resultArray = [];
        var invalidPlatform = false;
        var isNpxKey = false;
        if (this.manager.getKey()) {
          licKey = this.manager.getKey();
        } else {
          isNpxKey = true;
          licKey = this.npxManager.getKey().split('npxKeyReplace')[1];
        }
        var licKeySplit = licKey.split(';');
        for (var _i = 0, licKeySplit_1 = licKeySplit; _i < licKeySplit_1.length; _i++) {
          var lKey = licKeySplit_1[_i];
          var decodeStr = this.getDecryptedData(lKey);
          if (!decodeStr) {
            continue;
          }
          var k = 0;
          var buffr = '';
          if (!isNpxKey) {
            for (var i = 0; i < decodeStr.length; i++, k++) {
              if (k === pkey.length) {
                k = 0;
              }
              var c = decodeStr.charCodeAt(i);
              buffr += String.fromCharCode(c ^ pkey[parseInt(k.toString(), 10)] >> 16);
            }
          } else {
            var charKey = decodeStr[decodeStr.length - 1];
            var decryptedKey = [];
            for (var i = 0; i < decodeStr.length; i++) {
              decryptedKey["" + i] = decodeStr["" + i].charCodeAt(0) - charKey.charCodeAt(0);
            }
            for (var i = 0; i < decryptedKey.length; i++) {
              buffr += String.fromCharCode(decryptedKey[parseInt(i.toString(), 10)]);
            }
          }
          if (this.platform.test(buffr)) {
            decryptedStr = buffr.split(';');
            invalidPlatform = false;
            // checked the length to verify the key in proper strucutre
            if (decryptedStr.length > 3) {
              resultArray.push({
                platform: decryptedStr[0],
                version: decryptedStr[1],
                expiryDate: decryptedStr[2]
              });
            }
          } else if (buffr && buffr.split(';').length > 3) {
            invalidPlatform = true;
          }
        }
        if (invalidPlatform && !resultArray.length) {
          return [{
            invalidPlatform: invalidPlatform
          }];
        } else {
          return resultArray.length ? resultArray : null;
        }
      } catch (error) {
        return null;
      }
    };
    return LicenseValidator;
  }();
  var licenseValidator = new LicenseValidator();
  /**
   * Converts the given number to characters.
   *
   * @param {number} cArr - Specifies the license key as number.
   * @returns {string} ?
   */
  function convertToChar(cArr) {
    var ret = '';
    for (var _i = 0, cArr_1 = cArr; _i < cArr_1.length; _i++) {
      var arr = cArr_1[_i];
      ret += String.fromCharCode(arr);
    }
    return ret;
  }
  /**
   * To set license key.
   *
   * @param {string} key - license key
   * @returns {void}
   */
  function registerLicense(key) {
    licenseValidator = new LicenseValidator(key);
  }
  var validateLicense = function validateLicense(key) {
    if (key) {
      registerLicense(key);
    }
    return licenseValidator.validate();
  };
  var getVersion = function getVersion() {
    return licenseValidator.version;
  };
  // Method for create overlay over the sample
  var createLicenseOverlay = function createLicenseOverlay() {
    var bannerTemplate = "\n    <div style=\"\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    \">\n        <div style=\"\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    \">\n            <div style=\"\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n\">\n                <img src=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=\" style=\"\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n\">\n            </div>\n            <div style=\"\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    \">Claim your FREE account and get a key in less than a minute</div>\n            <ul style=\"\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        \">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href=\"https://support.syncfusion.com/create?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\" style=\"text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;\">support tickets</a>, <a href=\"https://www.syncfusion.com/forums?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\" style=\"text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;\">forum</a>, <a href=\"https://www.syncfusion.com/feedback?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                \" style=\"text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;\">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href=\"https://www.syncfusion.com/succinctly-free-ebooks?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\" style=\"text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;\">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href=\"https://www.syncfusion.com/downloads/metrostudio?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                \" style=\"text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;\">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href=\"https://www.syncfusion.com/blogs/?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                \" style=\"text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;\">blogs</a> and <a href=\"https://www.syncfusion.com/resources/techportal/whitepapers?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\" style=\"text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;\">whitepapers.</a></span></li>\n            </ul>\n            <div style=\"\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    \">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K\" style=\"\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            \">\n            <a href=" + accountURL + " style=\"\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    \">Claim your FREE account</a>\n            <div style=\"\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n\">have a Syncfusion account? <a href=\"https://www.syncfusion.com/account/login?ReturnUrl=/account/login\" style=\"text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;\">Sign In</a></div>\n        </div>\n    </div>";
    if (typeof document !== 'undefined' && !isNullOrUndefined(document)) {
      var errorBackground = createElement('div', {
        innerHTML: bannerTemplate
      });
      document.body.appendChild(errorBackground);
    }
  };
  var __extends$1 = undefined && undefined.__extends || function () {
    var _extendStatics2 = function extendStatics(d, b) {
      _extendStatics2 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics2(d, b);
    };
    return function (d, b) {
      _extendStatics2(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var componentCount = 0;
  var lastPageID;
  var lastHistoryLen = 0;
  // Decalre the static variable to count the instance
  var instancecount = 0;
  // Decalre the static variable to find if control limit exceed or not
  var isvalid = true;
  // We have added styles to inline type so here declare the static variable to detect if banner is added or not
  var isBannerAdded = false;
  exports.versionBasedStatePersistence = false;
  /**
   * To enable or disable version based statePersistence functionality for all components globally.
   *
   * @param {boolean} status - Optional argument Specifies the status value to enable or disable versionBasedStatePersistence option.
   * @returns {void}
   */
  function enableVersionBasedPersistence(status) {
    exports.versionBasedStatePersistence = status;
  }
  /**
   * Base class for all Essential JavaScript components
   */
  var Component = /** @class */function (_super) {
    __extends$1(Component, _super);
    /**
     * Initialize the constructor for component base
     *
     * @param {Object} options ?
     * @param {string} selector ?
     */
    function Component(options, selector) {
      var _this = _super.call(this, options, selector) || this;
      _this.randomId = uniqueID();
      /**
       * string template option for Blazor template rendering
       *
       * @private
       */
      _this.isStringTemplate = false;
      _this.needsID = false;
      _this.isReactHybrid = false;
      if (isNullOrUndefined(_this.enableRtl)) {
        _this.setProperties({
          'enableRtl': exports.rightToLeft
        }, true);
      }
      if (isNullOrUndefined(_this.locale)) {
        _this.setProperties({
          'locale': exports.defaultCulture
        }, true);
      }
      _this.moduleLoader = new ModuleLoader(_this);
      _this.localObserver = new Observer(_this);
      // tslint:disable-next-line:no-function-constructor-with-string-args
      onIntlChange.on('notifyExternalChange', _this.detectFunction, _this, _this.randomId);
      // Based on the considered control list we have count the instance
      if (typeof window !== 'undefined' && typeof document !== 'undefined' && !validateLicense()) {
        if (componentList.indexOf(_this.getModuleName()) !== -1) {
          instancecount = instancecount + 1;
          if (instancecount > 5) {
            isvalid = false;
          }
        }
      }
      if (!isUndefined(selector)) {
        _this.appendTo();
      }
      return _this;
    }
    Component.prototype.requiredModules = function () {
      return [];
    };
    /**
     * Destroys the sub modules while destroying the widget
     *
     * @returns {void} ?
     */
    Component.prototype.destroy = function () {
      if (this.isDestroyed) {
        return;
      }
      if (this.enablePersistence) {
        this.setPersistData();
        this.detachUnloadEvent();
      }
      this.localObserver.destroy();
      if (this.refreshing) {
        return;
      }
      removeClass([this.element], ['e-control']);
      this.trigger('destroyed', {
        cancel: false
      });
      _super.prototype.destroy.call(this);
      this.moduleLoader.clean();
      onIntlChange.off('notifyExternalChange', this.detectFunction, this.randomId);
    };
    /**
     * Applies all the pending property changes and render the component again.
     *
     * @returns {void} ?
     */
    Component.prototype.refresh = function () {
      this.refreshing = true;
      this.moduleLoader.clean();
      this.destroy();
      this.clearChanges();
      this.localObserver = new Observer(this);
      this.preRender();
      this.injectModules();
      this.render();
      this.refreshing = false;
    };
    Component.prototype.accessMount = function () {
      if (this.mount && !this.isReactHybrid) {
        this.mount();
      }
    };
    /**
     * Returns the route element of the component
     *
     * @returns {HTMLElement} ?
     */
    Component.prototype.getRootElement = function () {
      if (this.isReactHybrid) {
        // eslint-disable-next-line
        return this.actualElement;
      } else {
        return this.element;
      }
    };
    /**
     * Returns the persistence data for component
     *
     * @returns {any} ?
     */
    // eslint-disable-next-line
    Component.prototype.getLocalData = function () {
      var eleId = this.getModuleName() + this.element.id;
      if (exports.versionBasedStatePersistence) {
        return window.localStorage.getItem(eleId + this.ej2StatePersistenceVersion);
      } else {
        return window.localStorage.getItem(eleId);
      }
    };
    /**
     * Adding unload event to persist data when enable persistence true
     *
     * @returns {void}
     */
    Component.prototype.attachUnloadEvent = function () {
      this.handleUnload = this.handleUnload.bind(this);
      window.addEventListener('unload', this.handleUnload);
    };
    /**
     * Handling unload event to persist data when enable persistence true
     *
     * @returns {void}
     */
    Component.prototype.handleUnload = function () {
      this.setPersistData();
    };
    /**
     * Removing unload event to persist data when enable persistence true
     *
     * @returns {void}
     */
    Component.prototype.detachUnloadEvent = function () {
      window.removeEventListener('unload', this.handleUnload);
    };
    /**
     * Appends the control within the given HTML element
     *
     * @param {string | HTMLElement} selector - Target element where control needs to be appended
     * @returns {void} ?
     */
    Component.prototype.appendTo = function (selector) {
      if (!isNullOrUndefined(selector) && typeof selector === 'string') {
        this.element = select(selector, document);
      } else if (!isNullOrUndefined(selector)) {
        this.element = selector;
      }
      if (!isNullOrUndefined(this.element)) {
        var moduleClass = 'e-' + this.getModuleName().toLowerCase();
        addClass([this.element], ['e-control', moduleClass]);
        this.isProtectedOnChange = false;
        if (this.needsID && !this.element.id) {
          this.element.id = this.getUniqueID(this.getModuleName());
        }
        if (this.enablePersistence) {
          this.mergePersistData();
          this.attachUnloadEvent();
        }
        var inst = getValue('ej2_instances', this.element);
        if (!inst || inst.indexOf(this) === -1) {
          _super.prototype.addInstance.call(this);
        }
        this.preRender();
        this.injectModules();
        // Throw a warning for the required modules to be injected.
        var ignoredComponents = {
          schedule: 'all',
          diagram: 'all',
          grid: ['logger'],
          richtexteditor: ['link', 'table', 'image', 'audio', 'video', 'formatPainter', 'emojiPicker', 'pasteCleanup', 'htmlEditor', 'toolbar'],
          treegrid: ['filter'],
          gantt: ['tooltip']
        };
        var component = this.getModuleName();
        if (this.requiredModules && (!ignoredComponents["" + component] || ignoredComponents["" + component] !== 'all')) {
          var modulesRequired = this.requiredModules();
          for (var _i = 0, _a = this.moduleLoader.getNonInjectedModules(modulesRequired); _i < _a.length; _i++) {
            var module = _a[_i];
            var moduleName = module.name ? module.name : module.member;
            if (ignoredComponents["" + component] && ignoredComponents["" + component].indexOf(module.member) !== -1) {
              continue;
            }
            var componentName = component.charAt(0).toUpperCase() + component.slice(1); // To capitalize the component name
            console.warn("[WARNING] :: Module \"" + moduleName + "\" is not available in " + componentName + " component! You either misspelled the module name or forgot to load it.");
          }
        }
        // Checked weather cases are valid or not. If control leads to more than five counts
        if (!isvalid && !isBannerAdded) {
          createLicenseOverlay();
          isBannerAdded = true;
        }
        this.render();
        if (!this.mount) {
          this.trigger('created');
        } else {
          this.accessMount();
        }
      }
    };
    /**
     * It is used to process the post rendering functionalities to a component.
     *
     * @param {Node} wrapperElement ?
     * @returns {void} ?
     */
    Component.prototype.renderComplete = function (wrapperElement) {
      if (isBlazor()) {
        var sfBlazor = 'sfBlazor';
        // eslint-disable-next-line
        window[sfBlazor].renderComplete(this.element, wrapperElement);
      }
      this.isRendered = true;
    };
    /**
     * When invoked, applies the pending property changes immediately to the component.
     *
     * @returns {void} ?
     */
    Component.prototype.dataBind = function () {
      this.injectModules();
      _super.prototype.dataBind.call(this);
    };
    /**
     * Attach one or more  event handler to the current component context.
     * It is used for internal handling event internally within the component only.
     *
     * @param {BoundOptions[]| string} event - It is  optional type either to  Set the collection of event list or the eventName.
     * @param {Function} handler - optional parameter Specifies the handler to run when the event occurs
     * @param {Object} context - optional parameter Specifies the context to be bind in the handler.
     * @returns {void} ?
     * @private
     */
    Component.prototype.on = function (event, handler, context) {
      if (typeof event === 'string') {
        this.localObserver.on(event, handler, context);
      } else {
        for (var _i = 0, event_1 = event; _i < event_1.length; _i++) {
          var arg = event_1[_i];
          this.localObserver.on(arg.event, arg.handler, arg.context);
        }
      }
    };
    /**
     * To remove one or more event handler that has been attached with the on() method.
     *
     * @param {BoundOptions[]| string} event - It is  optional type either to  Set the collection of event list or the eventName.
     * @param {Function} handler - optional parameter Specifies the function to run when the event occurs
     * @returns {void} ?
     * @private
     */
    Component.prototype.off = function (event, handler) {
      if (typeof event === 'string') {
        this.localObserver.off(event, handler);
      } else {
        for (var _i = 0, event_2 = event; _i < event_2.length; _i++) {
          var arg = event_2[_i];
          this.localObserver.off(arg.event, arg.handler);
        }
      }
    };
    /**
     * To notify the handlers in the specified event.
     *
     * @param {string} property - Specifies the event to be notify.
     * @param {Object} argument - Additional parameters to pass while calling the handler.
     * @returns {void} ?
     * @private
     */
    Component.prototype.notify = function (property, argument) {
      if (this.isDestroyed !== true) {
        this.localObserver.notify(property, argument);
      }
    };
    /**
     * Get injected modules
     *
     * @returns {Function} ?
     * @private
     */
    Component.prototype.getInjectedModules = function () {
      return this.injectedModules;
    };
    /**
     * Dynamically injects the required modules to the component.
     *
     * @param {Function} moduleList ?
     * @returns {void} ?
     */
    Component.Inject = function () {
      var moduleList = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        moduleList[_i] = arguments[_i];
      }
      if (!this.prototype.injectedModules) {
        this.prototype.injectedModules = [];
      }
      for (var i = 0; i < moduleList.length; i++) {
        if (this.prototype.injectedModules.indexOf(moduleList[parseInt(i.toString(), 10)]) === -1) {
          this.prototype.injectedModules.push(moduleList[parseInt(i.toString(), 10)]);
        }
      }
    };
    /**
     * This is a instance method to create an element.
     *
     * @param {string} tagName ?
     * @param {ElementProperties} prop ?
     * @param {boolean} isVDOM ?
     * @returns {any} ?
     * @private
     */
    // eslint-disable-next-line
    Component.prototype.createElement = function (tagName, prop, isVDOM) {
      return createElement(tagName, prop);
    };
    /**
     *
     * @param {Function} handler - handler to be triggered after state Updated.
     * @param {any} argument - Arguments to be passed to caller.
     * @returns {void} .
     * @private
     */
    // eslint-disable-next-line
    Component.prototype.triggerStateChange = function (handler, argument) {
      if (this.isReactHybrid) {
        // eslint-disable-next-line
        this.setState();
        this.currentContext = {
          calls: handler,
          args: argument
        };
      }
    };
    // tslint: enable: no-any
    Component.prototype.injectModules = function () {
      if (this.injectedModules && this.injectedModules.length) {
        this.moduleLoader.inject(this.requiredModules(), this.injectedModules);
      }
    };
    Component.prototype.detectFunction = function (args) {
      var prop = Object.keys(args);
      if (prop.length) {
        this[prop[0]] = args[prop[0]];
      }
    };
    Component.prototype.mergePersistData = function () {
      var data;
      if (exports.versionBasedStatePersistence) {
        data = window.localStorage.getItem(this.getModuleName() + this.element.id + this.ej2StatePersistenceVersion);
      } else {
        data = window.localStorage.getItem(this.getModuleName() + this.element.id);
      }
      if (!(isNullOrUndefined(data) || data === '')) {
        this.setProperties(JSON.parse(data), true);
      }
    };
    Component.prototype.setPersistData = function () {
      if (!this.isDestroyed) {
        if (exports.versionBasedStatePersistence) {
          window.localStorage.setItem(this.getModuleName() + this.element.id + this.ej2StatePersistenceVersion, this.getPersistData());
        } else {
          window.localStorage.setItem(this.getModuleName() + this.element.id, this.getPersistData());
        }
      }
    };
    // eslint-disable-next-line
    Component.prototype.renderReactTemplates = function (callback) {
      if (!isNullOrUndefined(callback)) {
        callback();
      }
    };
    // eslint-disable-next-line
    Component.prototype.clearTemplate = function (templateName, index) {
      //No Code
    };
    Component.prototype.getUniqueID = function (definedName) {
      if (this.isHistoryChanged()) {
        componentCount = 0;
      }
      lastPageID = this.pageID(location.href);
      lastHistoryLen = history.length;
      return definedName + '_' + lastPageID + '_' + componentCount++;
    };
    Component.prototype.pageID = function (url) {
      var hash = 0;
      if (url.length === 0) {
        return hash;
      }
      for (var i = 0; i < url.length; i++) {
        var _char4 = url.charCodeAt(i);
        hash = (hash << 5) - hash + _char4;
        hash = hash & hash; // Convert to 32bit integer
      }
      return Math.abs(hash);
    };
    Component.prototype.isHistoryChanged = function () {
      return lastPageID !== this.pageID(location.href) || lastHistoryLen !== history.length;
    };
    Component.prototype.addOnPersist = function (options) {
      var _this = this;
      var persistObj = {};
      for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {
        var key = options_1[_i];
        var objValue = void 0;
        // eslint-disable-next-line
        objValue = getValue(key, this);
        if (!isUndefined(objValue)) {
          setValue(key, this.getActualProperties(objValue), persistObj);
        }
      }
      return JSON.stringify(persistObj, function (key, value) {
        return _this.getActualProperties(value);
      });
    };
    Component.prototype.getActualProperties = function (obj) {
      if (obj instanceof ChildProperty) {
        return getValue('properties', obj);
      } else {
        return obj;
      }
    };
    Component.prototype.ignoreOnPersist = function (options) {
      return JSON.stringify(this.iterateJsonProperties(this.properties, options));
    };
    Component.prototype.iterateJsonProperties = function (obj, ignoreList) {
      var newObj = {};
      var _loop_1 = function _loop_1(key) {
        if (ignoreList.indexOf(key) === -1) {
          // eslint-disable-next-line
          var value = obj[key];
          if (_typeof(value) === 'object' && !(value instanceof Array)) {
            var newList = ignoreList.filter(function (str) {
              var regExp = RegExp;
              return new regExp(key + '.').test(str);
            }).map(function (str) {
              return str.replace(key + '.', '');
            });
            newObj["" + key] = this_1.iterateJsonProperties(this_1.getActualProperties(value), newList);
          } else {
            newObj["" + key] = value;
          }
        }
      };
      var this_1 = this;
      for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {
        var key = _a[_i];
        _loop_1(key);
      }
      return newObj;
    };
    __decorate$1([Property(false)], Component.prototype, "enablePersistence", void 0);
    __decorate$1([Property()], Component.prototype, "enableRtl", void 0);
    __decorate$1([Property()], Component.prototype, "locale", void 0);
    Component = __decorate$1([NotifyPropertyChanges], Component);
    return Component;
  }(Base);
  //Function handling for page navigation detection
  /* istanbul ignore next */
  (function () {
    if (typeof window !== 'undefined') {
      window.addEventListener('popstate', /* istanbul ignore next */
      function () {
        componentCount = 0;
      });
    }
  })();
  var __extends$2 = undefined && undefined.__extends || function () {
    var _extendStatics3 = function extendStatics(d, b) {
      _extendStatics3 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics3(d, b);
    };
    return function (d, b) {
      _extendStatics3(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var defaultPosition = {
    left: 0,
    top: 0,
    bottom: 0,
    right: 0
  };
  var isDraggedObject = {
    isDragged: false
  };
  /**
   * Specifies the position coordinates
   */
  var Position = /** @class */function (_super) {
    __extends$2(Position, _super);
    function Position() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$2([Property(0)], Position.prototype, "left", void 0);
    __decorate$2([Property(0)], Position.prototype, "top", void 0);
    return Position;
  }(ChildProperty);
  /**
   * Draggable Module provides support to enable draggable functionality in Dom Elements.
   * ```html
   * <div id='drag'>Draggable</div>
   * <script>
   * var ele = document.getElementById('drag');
   * var drag:Draggable = new Draggable(ele,{
   *     clone:false,
   *     drag: function(e) {
   *      //drag handler code.
   *      },
   *     handle:'.class'
   * });
   * </script>
   * ```
   */
  var Draggable = /** @class */function (_super) {
    __extends$2(Draggable, _super);
    function Draggable(element, options) {
      var _this = _super.call(this, options, element) || this;
      _this.dragLimit = Draggable_1.getDefaultPosition();
      _this.borderWidth = Draggable_1.getDefaultPosition();
      _this.padding = Draggable_1.getDefaultPosition();
      _this.diffX = 0;
      _this.prevLeft = 0;
      _this.prevTop = 0;
      _this.dragProcessStarted = false;
      _this.eleTop = 0;
      /* eslint-disable @typescript-eslint/no-explicit-any */
      _this.tapHoldTimer = 0;
      _this.externalInitialize = false;
      _this.diffY = 0;
      _this.parentScrollX = 0;
      _this.parentScrollY = 0;
      _this.droppables = {};
      _this.bind();
      return _this;
    }
    Draggable_1 = Draggable;
    Draggable.prototype.bind = function () {
      this.toggleEvents();
      if (Browser.isIE) {
        addClass([this.element], 'e-block-touch');
      }
      this.droppables[this.scope] = {};
    };
    Draggable.getDefaultPosition = function () {
      return extend({}, defaultPosition);
    };
    Draggable.prototype.toggleEvents = function (isUnWire) {
      var ele;
      if (!isUndefined(this.handle)) {
        ele = select(this.handle, this.element);
      }
      var handler = this.enableTapHold && Browser.isDevice && Browser.isTouch ? this.mobileInitialize : this.initialize;
      if (isUnWire) {
        EventHandler.remove(ele || this.element, Browser.isSafari() ? 'touchstart' : Browser.touchStartEvent, handler);
      } else {
        EventHandler.add(ele || this.element, Browser.isSafari() ? 'touchstart' : Browser.touchStartEvent, handler, this);
      }
    };
    /* istanbul ignore next */
    Draggable.prototype.mobileInitialize = function (evt) {
      var _this = this;
      var target = evt.currentTarget;
      this.tapHoldTimer = setTimeout(function () {
        _this.externalInitialize = true;
        _this.removeTapholdTimer();
        _this.initialize(evt, target);
      }, this.tapHoldThreshold);
      EventHandler.add(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.removeTapholdTimer, this);
      EventHandler.add(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.removeTapholdTimer, this);
    };
    /* istanbul ignore next */
    Draggable.prototype.removeTapholdTimer = function () {
      clearTimeout(this.tapHoldTimer);
      EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.removeTapholdTimer);
      EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.removeTapholdTimer);
    };
    /* istanbul ignore next */
    Draggable.prototype.getScrollableParent = function (element, axis) {
      var scroll = {
        'vertical': 'scrollHeight',
        'horizontal': 'scrollWidth'
      };
      var client = {
        'vertical': 'clientHeight',
        'horizontal': 'clientWidth'
      };
      if (isNullOrUndefined(element)) {
        return null;
      }
      if (element[scroll["" + axis]] > element[client["" + axis]]) {
        if (axis === 'vertical' ? element.scrollTop > 0 : element.scrollLeft > 0) {
          if (axis === 'vertical') {
            this.parentScrollY = this.parentScrollY + (this.parentScrollY === 0 ? element.scrollTop : element.scrollTop - this.parentScrollY);
            this.tempScrollHeight = element.scrollHeight;
          } else {
            this.parentScrollX = this.parentScrollX + (this.parentScrollX === 0 ? element.scrollLeft : element.scrollLeft - this.parentScrollX);
            this.tempScrollWidth = element.scrollWidth;
          }
          if (!isNullOrUndefined(element)) {
            return this.getScrollableParent(element.parentNode, axis);
          } else {
            return element;
          }
        } else {
          return this.getScrollableParent(element.parentNode, axis);
        }
      } else {
        return this.getScrollableParent(element.parentNode, axis);
      }
    };
    /* eslint-disable */
    Draggable.prototype.getScrollableValues = function () {
      this.parentScrollX = 0;
      this.parentScrollY = 0;
      var isModalDialog = this.element.classList.contains('e-dialog') && this.element.classList.contains('e-dlg-modal');
      var verticalScrollParent = this.getScrollableParent(this.element.parentNode, 'vertical');
      var horizontalScrollParent = this.getScrollableParent(this.element.parentNode, 'horizontal');
    };
    /* eslint-enable */
    Draggable.prototype.initialize = function (evt, curTarget) {
      this.currentStateTarget = evt.target;
      if (this.isDragStarted()) {
        return;
      } else {
        this.isDragStarted(true);
        this.externalInitialize = false;
      }
      this.target = evt.currentTarget || curTarget;
      this.dragProcessStarted = false;
      if (this.abort) {
        /* tslint:disable no-any */
        // eslint-disable-next-line
        var abortSelectors = this.abort;
        if (typeof abortSelectors === 'string') {
          abortSelectors = [abortSelectors];
        }
        for (var i = 0; i < abortSelectors.length; i++) {
          if (!isNullOrUndefined(closest(evt.target, abortSelectors[parseInt(i.toString(), 10)]))) {
            /* istanbul ignore next */
            if (this.isDragStarted()) {
              this.isDragStarted(true);
            }
            return;
          }
        }
      }
      if (this.preventDefault && !isUndefined(evt.changedTouches) && evt.type !== 'touchstart') {
        evt.preventDefault();
      }
      this.element.setAttribute('aria-grabbed', 'true');
      var intCoord = this.getCoordinates(evt);
      this.initialPosition = {
        x: intCoord.pageX,
        y: intCoord.pageY
      };
      if (!this.clone) {
        var pos = this.element.getBoundingClientRect();
        this.getScrollableValues();
        if (evt.clientX === evt.pageX) {
          this.parentScrollX = 0;
        }
        if (evt.clientY === evt.pageY) {
          this.parentScrollY = 0;
        }
        this.relativeXPosition = intCoord.pageX - (pos.left + this.parentScrollX);
        this.relativeYPosition = intCoord.pageY - (pos.top + this.parentScrollY);
      }
      if (this.externalInitialize) {
        this.intDragStart(evt);
      } else {
        EventHandler.add(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDragStart, this);
        EventHandler.add(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDestroy, this);
      }
      this.toggleEvents(true);
      if (evt.type !== 'touchstart' && this.isPreventSelect) {
        document.body.classList.add('e-prevent-select');
      }
      this.externalInitialize = false;
      EventHandler.trigger(document.documentElement, Browser.isSafari() ? 'touchstart' : Browser.touchStartEvent, evt);
    };
    Draggable.prototype.intDragStart = function (evt) {
      this.removeTapholdTimer();
      var isChangeTouch = !isUndefined(evt.changedTouches);
      if (isChangeTouch && evt.changedTouches.length !== 1) {
        return;
      }
      var intCordinate = this.getCoordinates(evt);
      var pos;
      var styleProp = getComputedStyle(this.element);
      this.margin = {
        left: parseInt(styleProp.marginLeft, 10),
        top: parseInt(styleProp.marginTop, 10),
        right: parseInt(styleProp.marginRight, 10),
        bottom: parseInt(styleProp.marginBottom, 10)
      };
      var element = this.element;
      if (this.clone && this.dragTarget) {
        var intClosest = closest(evt.target, this.dragTarget);
        if (!isNullOrUndefined(intClosest)) {
          element = intClosest;
        }
      }
      /* istanbul ignore next */
      if (this.isReplaceDragEle) {
        // eslint-disable-next-line
        element = this.currentStateCheck(evt.target, element);
      }
      this.offset = this.calculateParentPosition(element);
      this.position = this.getMousePosition(evt, this.isDragScroll);
      var x = this.initialPosition.x - intCordinate.pageX;
      var y = this.initialPosition.y - intCordinate.pageY;
      var distance = Math.sqrt(x * x + y * y);
      if (distance >= this.distance || this.externalInitialize) {
        var ele = this.getHelperElement(evt);
        if (!ele || isNullOrUndefined(ele)) {
          return;
        }
        if (isChangeTouch) {
          evt.preventDefault();
        }
        var dragTargetElement = this.helperElement = ele;
        this.parentClientRect = this.calculateParentPosition(dragTargetElement.offsetParent);
        if (this.dragStart) {
          var curTarget = this.getProperTargetElement(evt);
          var args = {
            event: evt,
            element: element,
            target: curTarget,
            bindEvents: isBlazor() ? this.bindDragEvents.bind(this) : null,
            dragElement: dragTargetElement
          };
          this.trigger('dragStart', args);
        }
        if (this.dragArea) {
          this.setDragArea();
        } else {
          this.dragLimit = {
            left: 0,
            right: 0,
            bottom: 0,
            top: 0
          };
          this.borderWidth = {
            top: 0,
            left: 0
          };
        }
        pos = {
          left: this.position.left - this.parentClientRect.left,
          top: this.position.top - this.parentClientRect.top
        };
        if (this.clone && !this.enableTailMode) {
          this.diffX = this.position.left - this.offset.left;
          this.diffY = this.position.top - this.offset.top;
        }
        this.getScrollableValues();
        // when drag element has margin-top
        var styles = getComputedStyle(element);
        var marginTop = parseFloat(styles.marginTop);
        /* istanbul ignore next */
        if (this.clone && marginTop !== 0) {
          pos.top += marginTop;
        }
        this.eleTop = !isNaN(parseFloat(styles.top)) ? parseFloat(styles.top) - this.offset.top : 0;
        /* istanbul ignore next */
        // if (this.eleTop > 0) {
        //     pos.top += this.eleTop;
        // }
        if (this.enableScrollHandler && !this.clone) {
          pos.top -= this.parentScrollY;
          pos.left -= this.parentScrollX;
        }
        var posValue = this.getProcessedPositionValue({
          top: pos.top - this.diffY + 'px',
          left: pos.left - this.diffX + 'px'
        });
        if (this.dragArea && typeof this.dragArea !== 'string' && this.dragArea.classList.contains('e-kanban-content') && this.dragArea.style.position === 'relative') {
          pos.top += this.dragArea.scrollTop;
        }
        this.dragElePosition = {
          top: pos.top,
          left: pos.left
        };
        setStyleAttribute(dragTargetElement, this.getDragPosition({
          position: 'absolute',
          left: posValue.left,
          top: posValue.top
        }));
        EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDragStart);
        EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDestroy);
        if (!isBlazor()) {
          this.bindDragEvents(dragTargetElement);
        }
      }
    };
    Draggable.prototype.bindDragEvents = function (dragTargetElement) {
      if (isVisible(dragTargetElement)) {
        EventHandler.add(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDrag, this);
        EventHandler.add(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDragStop, this);
        this.setGlobalDroppables(false, this.element, dragTargetElement);
      } else {
        this.toggleEvents();
        document.body.classList.remove('e-prevent-select');
      }
    };
    Draggable.prototype.elementInViewport = function (el) {
      this.top = el.offsetTop;
      this.left = el.offsetLeft;
      this.width = el.offsetWidth;
      this.height = el.offsetHeight;
      while (el.offsetParent) {
        el = el.offsetParent;
        this.top += el.offsetTop;
        this.left += el.offsetLeft;
      }
      return this.top >= window.pageYOffset && this.left >= window.pageXOffset && this.top + this.height <= window.pageYOffset + window.innerHeight && this.left + this.width <= window.pageXOffset + window.innerWidth;
    };
    Draggable.prototype.getProcessedPositionValue = function (value) {
      if (this.queryPositionInfo) {
        return this.queryPositionInfo(value);
      }
      return value;
    };
    Draggable.prototype.calculateParentPosition = function (ele) {
      if (isNullOrUndefined(ele)) {
        return {
          left: 0,
          top: 0
        };
      }
      var rect = ele.getBoundingClientRect();
      var style = getComputedStyle(ele);
      return {
        left: rect.left + window.pageXOffset - parseInt(style.marginLeft, 10),
        top: rect.top + window.pageYOffset - parseInt(style.marginTop, 10)
      };
    };
    // tslint:disable-next-line:max-func-body-length
    Draggable.prototype.intDrag = function (evt) {
      if (!isUndefined(evt.changedTouches) && evt.changedTouches.length !== 1) {
        return;
      }
      if (this.clone && evt.changedTouches && Browser.isDevice && Browser.isTouch) {
        evt.preventDefault();
      }
      var left;
      var top;
      this.position = this.getMousePosition(evt, this.isDragScroll);
      var docHeight = this.getDocumentWidthHeight('Height');
      if (docHeight < this.position.top) {
        this.position.top = docHeight;
      }
      var docWidth = this.getDocumentWidthHeight('Width');
      if (docWidth < this.position.left) {
        this.position.left = docWidth;
      }
      if (this.drag) {
        var curTarget = this.getProperTargetElement(evt);
        this.trigger('drag', {
          event: evt,
          element: this.element,
          target: curTarget
        });
      }
      var eleObj = this.checkTargetElement(evt);
      if (eleObj.target && eleObj.instance) {
        /* tslint:disable no-any */
        var flag = true;
        if (this.hoverObject) {
          if (this.hoverObject.instance !== eleObj.instance) {
            this.triggerOutFunction(evt, eleObj);
          } else {
            flag = false;
          }
        }
        if (flag) {
          // eslint-disable-next-line
          eleObj.instance.dragData[this.scope] = this.droppables[this.scope];
          eleObj.instance.intOver(evt, eleObj.target);
          this.hoverObject = eleObj;
        }
      } else if (this.hoverObject) {
        this.triggerOutFunction(evt, eleObj);
      }
      var helperElement = this.droppables[this.scope].helper;
      this.parentClientRect = this.calculateParentPosition(this.helperElement.offsetParent);
      var tLeft = this.parentClientRect.left;
      var tTop = this.parentClientRect.top;
      var intCoord = this.getCoordinates(evt);
      var pagex = intCoord.pageX;
      var pagey = intCoord.pageY;
      var dLeft = this.position.left - this.diffX;
      var dTop = this.position.top - this.diffY;
      var styles = getComputedStyle(helperElement);
      if (this.dragArea) {
        if (this.enableAutoScroll) {
          this.setDragArea();
        }
        if (this.pageX !== pagex || this.skipDistanceCheck) {
          var helperWidth = helperElement.offsetWidth + (parseFloat(styles.marginLeft) + parseFloat(styles.marginRight));
          if (this.dragLimit.left > dLeft && dLeft > 0) {
            left = this.dragLimit.left;
          } else if (this.dragLimit.right + window.pageXOffset < dLeft + helperWidth && dLeft > 0) {
            left = dLeft - (dLeft - this.dragLimit.right) + window.pageXOffset - helperWidth;
          } else {
            left = dLeft < 0 ? this.dragLimit.left : dLeft;
          }
        }
        if (this.pageY !== pagey || this.skipDistanceCheck) {
          var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop) + parseFloat(styles.marginBottom));
          if (this.dragLimit.top > dTop && dTop > 0) {
            top = this.dragLimit.top;
          } else if (this.dragLimit.bottom + window.pageYOffset < dTop + helperHeight && dTop > 0) {
            top = dTop - (dTop - this.dragLimit.bottom) + window.pageYOffset - helperHeight;
          } else {
            top = dTop < 0 ? this.dragLimit.top : dTop;
          }
        }
      } else {
        left = dLeft;
        top = dTop;
      }
      var iTop = tTop + this.borderWidth.top;
      var iLeft = tLeft + this.borderWidth.left;
      if (this.dragProcessStarted) {
        if (isNullOrUndefined(top)) {
          top = this.prevTop;
        }
        if (isNullOrUndefined(left)) {
          left = this.prevLeft;
        }
      }
      var draEleTop;
      var draEleLeft;
      if (this.helperElement.classList.contains('e-treeview')) {
        if (this.dragArea) {
          this.dragLimit.top = this.clone ? this.dragLimit.top : 0;
          draEleTop = top - iTop < 0 ? this.dragLimit.top : top - this.borderWidth.top;
          draEleLeft = left - iLeft < 0 ? this.dragLimit.left : left - this.borderWidth.left;
        } else {
          draEleTop = top - this.borderWidth.top;
          draEleLeft = left - this.borderWidth.left;
        }
      } else {
        if (this.dragArea) {
          var isDialogEle = this.helperElement.classList.contains('e-dialog');
          this.dragLimit.top = this.clone ? this.dragLimit.top : 0;
          draEleTop = top - iTop < 0 ? this.dragLimit.top : top - iTop;
          draEleLeft = left - iLeft < 0 ? isDialogEle ? left - (iLeft - this.borderWidth.left) : this.dragElePosition.left : left - iLeft;
        } else {
          draEleTop = top - iTop;
          draEleLeft = left - iLeft;
        }
      }
      var marginTop = parseFloat(getComputedStyle(this.element).marginTop);
      // when drag-element has margin-top
      /* istanbul ignore next */
      if (marginTop > 0) {
        if (this.clone) {
          draEleTop += marginTop;
          if (dTop < 0) {
            if (marginTop + dTop >= 0) {
              draEleTop = marginTop + dTop;
            } else {
              draEleTop -= marginTop;
            }
          }
          if (this.dragArea) {
            draEleTop = this.dragLimit.bottom < draEleTop ? this.dragLimit.bottom : draEleTop;
          }
        }
        if (top - iTop < 0) {
          if (dTop + marginTop + (helperElement.offsetHeight - iTop) >= 0) {
            var tempDraEleTop = this.dragLimit.top + dTop - iTop;
            if (tempDraEleTop + marginTop + iTop < 0) {
              draEleTop -= marginTop + iTop;
            } else {
              draEleTop = tempDraEleTop;
            }
          } else {
            draEleTop -= marginTop + iTop;
          }
        }
      }
      if (this.dragArea && this.helperElement.classList.contains('e-treeview')) {
        var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop) + parseFloat(styles.marginBottom));
        draEleTop = draEleTop + helperHeight > this.dragLimit.bottom ? this.dragLimit.bottom - helperHeight : draEleTop;
      }
      /* istanbul ignore next */
      // if(this.eleTop > 0) {
      //      draEleTop += this.eleTop;
      // }
      if (this.enableScrollHandler && !this.clone) {
        draEleTop -= this.parentScrollY;
        draEleLeft -= this.parentScrollX;
      }
      if (this.dragArea && typeof this.dragArea !== 'string' && this.dragArea.classList.contains('e-kanban-content') && this.dragArea.style.position === 'relative') {
        draEleTop += this.dragArea.scrollTop;
      }
      var dragValue = this.getProcessedPositionValue({
        top: draEleTop + 'px',
        left: draEleLeft + 'px'
      });
      setStyleAttribute(helperElement, this.getDragPosition(dragValue));
      if (!this.elementInViewport(helperElement) && this.enableAutoScroll && !this.helperElement.classList.contains('e-treeview')) {
        this.helperElement.scrollIntoView();
      }
      var elements = document.querySelectorAll(':hover');
      if (this.enableAutoScroll && this.helperElement.classList.contains('e-treeview')) {
        if (elements.length === 0) {
          elements = this.getPathElements(evt);
        }
        /* tslint:disable no-any */
        // eslint-disable-next-line
        var scrollParent = this.getScrollParent(elements, false);
        if (this.elementInViewport(this.helperElement)) {
          this.getScrollPosition(scrollParent, draEleTop);
        } else if (!this.elementInViewport(this.helperElement)) {
          elements = [].slice.call(document.querySelectorAll(':hover'));
          if (elements.length === 0) {
            elements = this.getPathElements(evt);
          }
          scrollParent = this.getScrollParent(elements, true);
          this.getScrollPosition(scrollParent, draEleTop);
        }
      }
      this.dragProcessStarted = true;
      this.prevLeft = left;
      this.prevTop = top;
      this.position.left = left;
      this.position.top = top;
      this.pageX = pagex;
      this.pageY = pagey;
    };
    /* tslint:disable no-any */
    // eslint-disable-next-line
    Draggable.prototype.getScrollParent = function (node, reverse) {
      /* tslint:disable no-any */
      // eslint-disable-next-line
      var nodeEl = reverse ? node.reverse() : node;
      var hasScroll;
      for (var i = nodeEl.length - 1; i >= 0; i--) {
        hasScroll = window.getComputedStyle(nodeEl[parseInt(i.toString(), 10)])['overflow-y'];
        if ((hasScroll === 'auto' || hasScroll === 'scroll') && nodeEl[parseInt(i.toString(), 10)].scrollHeight > nodeEl[parseInt(i.toString(), 10)].clientHeight) {
          return nodeEl[parseInt(i.toString(), 10)];
        }
      }
      hasScroll = window.getComputedStyle(document.scrollingElement)['overflow-y'];
      if (hasScroll === 'visible') {
        document.scrollingElement.style.overflow = 'auto';
        return document.scrollingElement;
      }
    };
    Draggable.prototype.getScrollPosition = function (nodeEle, draEleTop) {
      if (nodeEle && nodeEle === document.scrollingElement) {
        if (nodeEle.clientHeight + document.scrollingElement.scrollTop - this.helperElement.clientHeight < draEleTop && nodeEle.getBoundingClientRect().height + this.parentClientRect.top > draEleTop) {
          nodeEle.scrollTop += this.helperElement.clientHeight;
        } else if (nodeEle.scrollTop > draEleTop - this.helperElement.clientHeight) {
          nodeEle.scrollTop -= this.helperElement.clientHeight;
        }
      } else if (nodeEle && nodeEle !== document.scrollingElement) {
        var docScrollTop = document.scrollingElement.scrollTop;
        var helperClientHeight = this.helperElement.clientHeight;
        if (nodeEle.clientHeight + nodeEle.getBoundingClientRect().top - helperClientHeight + docScrollTop < draEleTop) {
          nodeEle.scrollTop += this.helperElement.clientHeight;
        } else if (nodeEle.getBoundingClientRect().top > draEleTop - helperClientHeight - docScrollTop) {
          nodeEle.scrollTop -= this.helperElement.clientHeight;
        }
      }
    };
    Draggable.prototype.getPathElements = function (evt) {
      var elementTop = evt.clientX > 0 ? evt.clientX : 0;
      var elementLeft = evt.clientY > 0 ? evt.clientY : 0;
      return document.elementsFromPoint(elementTop, elementLeft);
    };
    Draggable.prototype.triggerOutFunction = function (evt, eleObj) {
      this.hoverObject.instance.intOut(evt, eleObj.target);
      this.hoverObject.instance.dragData[this.scope] = null;
      this.hoverObject = null;
    };
    Draggable.prototype.getDragPosition = function (dragValue) {
      var temp = extend({}, dragValue);
      if (this.axis) {
        if (this.axis === 'x') {
          delete temp.top;
        } else if (this.axis === 'y') {
          delete temp.left;
        }
      }
      return temp;
    };
    Draggable.prototype.getDocumentWidthHeight = function (str) {
      var docBody = document.body;
      var docEle = document.documentElement;
      var returnValue = Math.max(docBody['scroll' + str], docEle['scroll' + str], docBody['offset' + str], docEle['offset' + str], docEle['client' + str]);
      return returnValue;
    };
    Draggable.prototype.intDragStop = function (evt) {
      this.dragProcessStarted = false;
      if (!isUndefined(evt.changedTouches) && evt.changedTouches.length !== 1) {
        return;
      }
      var type = ['touchend', 'pointerup', 'mouseup'];
      if (type.indexOf(evt.type) !== -1) {
        if (this.dragStop) {
          var curTarget = this.getProperTargetElement(evt);
          this.trigger('dragStop', {
            event: evt,
            element: this.element,
            target: curTarget,
            helper: this.helperElement
          });
        }
        this.intDestroy(evt);
      } else {
        this.element.setAttribute('aria-grabbed', 'false');
      }
      var eleObj = this.checkTargetElement(evt);
      if (eleObj.target && eleObj.instance) {
        eleObj.instance.dragStopCalled = true;
        // eslint-disable-next-line
        eleObj.instance.dragData[this.scope] = this.droppables[this.scope];
        eleObj.instance.intDrop(evt, eleObj.target);
      }
      this.setGlobalDroppables(true);
      document.body.classList.remove('e-prevent-select');
    };
    /**
     * @param {MouseEvent | TouchEvent} evt ?
     * @returns {void}
     * @private
     */
    // eslint-disable-next-line
    Draggable.prototype.intDestroy = function (evt) {
      this.dragProcessStarted = false;
      this.toggleEvents();
      document.body.classList.remove('e-prevent-select');
      this.element.setAttribute('aria-grabbed', 'false');
      EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDragStart);
      EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDragStop);
      EventHandler.remove(document, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDestroy);
      EventHandler.remove(document, Browser.isSafari() ? 'touchmove' : Browser.touchMoveEvent, this.intDrag);
      if (this.isDragStarted()) {
        this.isDragStarted(true);
      }
    };
    // triggers when property changed
    // eslint-disable-next-line
    Draggable.prototype.onPropertyChanged = function (newProp, oldProp) {
      //No Code to handle
    };
    Draggable.prototype.getModuleName = function () {
      return 'draggable';
    };
    Draggable.prototype.isDragStarted = function (change) {
      if (change) {
        isDraggedObject.isDragged = !isDraggedObject.isDragged;
      }
      return isDraggedObject.isDragged;
    };
    Draggable.prototype.setDragArea = function () {
      var eleWidthBound;
      var eleHeightBound;
      var top = 0;
      var left = 0;
      var ele;
      var type = _typeof(this.dragArea);
      if (type === 'string') {
        ele = select(this.dragArea);
      } else {
        ele = this.dragArea;
      }
      if (ele) {
        var elementArea = ele.getBoundingClientRect();
        eleWidthBound = ele.scrollWidth ? ele.scrollWidth : elementArea.right - elementArea.left;
        eleHeightBound = ele.scrollHeight ? this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains('e-treeview') ? ele.clientHeight : ele.scrollHeight : elementArea.bottom - elementArea.top;
        var keys = ['Top', 'Left', 'Bottom', 'Right'];
        /* eslint-disable */
        var styles = getComputedStyle(ele);
        for (var i = 0; i < keys.length; i++) {
          var key = keys[parseInt(i.toString(), 10)];
          var tborder = styles['border' + key + 'Width'];
          var tpadding = styles['padding' + key];
          var lowerKey = key.toLowerCase();
          this.borderWidth["" + lowerKey] = isNaN(parseFloat(tborder)) ? 0 : parseFloat(tborder);
          this.padding["" + lowerKey] = isNaN(parseFloat(tpadding)) ? 0 : parseFloat(tpadding);
        }
        /* eslint-enable */
        if (this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains('e-treeview')) {
          top = elementArea.top + document.scrollingElement.scrollTop;
        } else {
          top = elementArea.top;
        }
        left = elementArea.left;
        this.dragLimit.left = left + this.borderWidth.left + this.padding.left;
        this.dragLimit.top = ele.offsetTop + this.borderWidth.top + this.padding.top;
        this.dragLimit.right = left + eleWidthBound - (this.borderWidth.right + this.padding.right);
        this.dragLimit.bottom = top + eleHeightBound - (this.borderWidth.bottom + this.padding.bottom);
      }
    };
    Draggable.prototype.getProperTargetElement = function (evt) {
      var intCoord = this.getCoordinates(evt);
      var ele;
      var prevStyle = this.helperElement.style.pointerEvents || '';
      var isPointer = evt.type.indexOf('pointer') !== -1 && Browser.info.name === 'safari' && parseInt(Browser.info.version, 10) > 12;
      if (compareElementParent(evt.target, this.helperElement) || evt.type.indexOf('touch') !== -1 || isPointer) {
        this.helperElement.style.pointerEvents = 'none';
        ele = document.elementFromPoint(intCoord.clientX, intCoord.clientY);
        this.helperElement.style.pointerEvents = prevStyle;
      } else {
        ele = evt.target;
      }
      return ele;
    };
    /* istanbul ignore next */
    Draggable.prototype.currentStateCheck = function (ele, oldEle) {
      var elem;
      if (!isNullOrUndefined(this.currentStateTarget) && this.currentStateTarget !== ele) {
        elem = this.currentStateTarget;
      } else {
        elem = !isNullOrUndefined(oldEle) ? oldEle : ele;
      }
      return elem;
    };
    Draggable.prototype.getMousePosition = function (evt, isdragscroll) {
      /* tslint:disable no-any */
      // eslint-disable-next-line
      var dragEle = evt.srcElement !== undefined ? evt.srcElement : evt.target;
      var intCoord = this.getCoordinates(evt);
      var pageX;
      var pageY;
      var isOffsetParent = isNullOrUndefined(dragEle.offsetParent);
      /* istanbul ignore next */
      if (isdragscroll) {
        pageX = this.clone ? intCoord.pageX : intCoord.pageX + (isOffsetParent ? 0 : dragEle.offsetParent.scrollLeft) - this.relativeXPosition;
        pageY = this.clone ? intCoord.pageY : intCoord.pageY + (isOffsetParent ? 0 : dragEle.offsetParent.scrollTop) - this.relativeYPosition;
      } else {
        pageX = this.clone ? intCoord.pageX : intCoord.pageX + window.pageXOffset - this.relativeXPosition;
        pageY = this.clone ? intCoord.pageY : intCoord.pageY + window.pageYOffset - this.relativeYPosition;
      }
      if (document.scrollingElement && !isdragscroll && !this.clone) {
        var ele = document.scrollingElement;
        var isVerticalScroll = ele.scrollHeight > 0 && ele.scrollHeight > ele.clientHeight && ele.scrollTop > 0;
        var isHorrizontalScroll = ele.scrollWidth > 0 && ele.scrollWidth > ele.clientWidth && ele.scrollLeft > 0;
        pageX = isHorrizontalScroll ? pageX - ele.scrollLeft : pageX;
        pageY = isVerticalScroll ? pageY - ele.scrollTop : pageY;
      }
      return {
        left: pageX - (this.margin.left + this.cursorAt.left),
        top: pageY - (this.margin.top + this.cursorAt.top)
      };
    };
    Draggable.prototype.getCoordinates = function (evt) {
      if (evt.type.indexOf('touch') > -1) {
        return evt.changedTouches[0];
      }
      return evt;
    };
    Draggable.prototype.getHelperElement = function (evt) {
      var element;
      if (this.clone) {
        if (this.helper) {
          element = this.helper({
            sender: evt,
            element: this.target
          });
        } else {
          element = createElement('div', {
            className: 'e-drag-helper e-block-touch',
            innerHTML: 'Draggable'
          });
          document.body.appendChild(element);
        }
      } else {
        element = this.element;
      }
      return element;
    };
    Draggable.prototype.setGlobalDroppables = function (reset, drag, helper) {
      this.droppables[this.scope] = reset ? null : {
        draggable: drag,
        helper: helper,
        draggedElement: this.element
      };
    };
    Draggable.prototype.checkTargetElement = function (evt) {
      var target = this.getProperTargetElement(evt);
      var dropIns = this.getDropInstance(target);
      if (!dropIns && target && !isNullOrUndefined(target.parentNode)) {
        var parent_1 = closest(target.parentNode, '.e-droppable') || target.parentElement;
        if (parent_1) {
          dropIns = this.getDropInstance(parent_1);
        }
      }
      return {
        target: target,
        instance: dropIns
      };
    };
    Draggable.prototype.getDropInstance = function (ele) {
      var name = 'getModuleName';
      var drop;
      var eleInst = ele && ele.ej2_instances;
      if (eleInst) {
        for (var _i = 0, eleInst_1 = eleInst; _i < eleInst_1.length; _i++) {
          var inst = eleInst_1[_i];
          if (inst["" + name]() === 'droppable') {
            drop = inst;
            break;
          }
        }
      }
      return drop;
    };
    Draggable.prototype.destroy = function () {
      this.toggleEvents(true);
      _super.prototype.destroy.call(this);
    };
    var Draggable_1;
    __decorate$2([Complex({}, Position)], Draggable.prototype, "cursorAt", void 0);
    __decorate$2([Property(true)], Draggable.prototype, "clone", void 0);
    __decorate$2([Property()], Draggable.prototype, "dragArea", void 0);
    __decorate$2([Property()], Draggable.prototype, "isDragScroll", void 0);
    __decorate$2([Property()], Draggable.prototype, "isReplaceDragEle", void 0);
    __decorate$2([Property(true)], Draggable.prototype, "isPreventSelect", void 0);
    __decorate$2([Event$1()], Draggable.prototype, "drag", void 0);
    __decorate$2([Event$1()], Draggable.prototype, "dragStart", void 0);
    __decorate$2([Event$1()], Draggable.prototype, "dragStop", void 0);
    __decorate$2([Property(1)], Draggable.prototype, "distance", void 0);
    __decorate$2([Property()], Draggable.prototype, "handle", void 0);
    __decorate$2([Property()], Draggable.prototype, "abort", void 0);
    __decorate$2([Property()], Draggable.prototype, "helper", void 0);
    __decorate$2([Property('default')], Draggable.prototype, "scope", void 0);
    __decorate$2([Property('')], Draggable.prototype, "dragTarget", void 0);
    __decorate$2([Property()], Draggable.prototype, "axis", void 0);
    __decorate$2([Property()], Draggable.prototype, "queryPositionInfo", void 0);
    __decorate$2([Property(false)], Draggable.prototype, "enableTailMode", void 0);
    __decorate$2([Property(false)], Draggable.prototype, "skipDistanceCheck", void 0);
    __decorate$2([Property(true)], Draggable.prototype, "preventDefault", void 0);
    __decorate$2([Property(false)], Draggable.prototype, "enableAutoScroll", void 0);
    __decorate$2([Property(false)], Draggable.prototype, "enableTapHold", void 0);
    __decorate$2([Property(750)], Draggable.prototype, "tapHoldThreshold", void 0);
    __decorate$2([Property(false)], Draggable.prototype, "enableScrollHandler", void 0);
    Draggable = Draggable_1 = __decorate$2([NotifyPropertyChanges], Draggable);
    return Draggable;
  }(Base);
  var __extends$3 = undefined && undefined.__extends || function () {
    var _extendStatics4 = function extendStatics(d, b) {
      _extendStatics4 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics4(d, b);
    };
    return function (d, b) {
      _extendStatics4(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  /**
   * Droppable Module provides support to enable droppable functionality in Dom Elements.
   * ```html
   * <div id='drop'>Droppable</div>
   * <script>
   * let ele:HTMLElement = document.getElementById('drop');
   * var drag:Droppable = new Droppable(ele,{
   *     accept:'.drop',
   *     drop: function(e) {
   *      //drop handler code.
   *     }
   * });
   * </script>
   * ```
   */
  var Droppable = /** @class */function (_super) {
    __extends$3(Droppable, _super);
    function Droppable(element, options) {
      var _this = _super.call(this, options, element) || this;
      _this.mouseOver = false;
      _this.dragData = {};
      _this.dragStopCalled = false;
      _this.bind();
      return _this;
    }
    Droppable.prototype.bind = function () {
      this.wireEvents();
    };
    Droppable.prototype.wireEvents = function () {
      EventHandler.add(this.element, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDrop, this);
    };
    // triggers when property changed
    // eslint-disable-next-line
    Droppable.prototype.onPropertyChanged = function (newProp, oldProp) {
      //No Code to handle
    };
    Droppable.prototype.getModuleName = function () {
      return 'droppable';
    };
    Droppable.prototype.intOver = function (event, element) {
      if (!this.mouseOver) {
        var drag = this.dragData[this.scope];
        this.trigger('over', {
          event: event,
          target: element,
          dragData: drag
        });
        this.mouseOver = true;
      }
    };
    Droppable.prototype.intOut = function (event, element) {
      if (this.mouseOver) {
        this.trigger('out', {
          evt: event,
          target: element
        });
        this.mouseOver = false;
      }
    };
    Droppable.prototype.intDrop = function (evt, element) {
      if (!this.dragStopCalled) {
        return;
      } else {
        this.dragStopCalled = false;
      }
      var accept = true;
      var drag = this.dragData[this.scope];
      var isDrag = drag ? drag.helper && isVisible(drag.helper) : false;
      var area;
      if (isDrag) {
        area = this.isDropArea(evt, drag.helper, element);
        if (this.accept) {
          accept = matches(drag.helper, this.accept);
        }
      }
      if (isDrag && this.drop && area.canDrop && accept) {
        this.trigger('drop', {
          event: evt,
          target: area.target,
          droppedElement: drag.helper,
          dragData: drag
        });
      }
      this.mouseOver = false;
    };
    Droppable.prototype.isDropArea = function (evt, helper, element) {
      var area = {
        canDrop: true,
        target: element || evt.target
      };
      var isTouch = evt.type === 'touchend';
      if (isTouch || area.target === helper) {
        helper.style.display = 'none';
        var coord = isTouch ? evt.changedTouches[0] : evt;
        var ele = document.elementFromPoint(coord.clientX, coord.clientY);
        area.canDrop = false;
        area.canDrop = compareElementParent(ele, this.element);
        if (area.canDrop) {
          area.target = ele;
        }
        helper.style.display = '';
      }
      return area;
    };
    Droppable.prototype.destroy = function () {
      EventHandler.remove(this.element, Browser.isSafari() ? 'touchend' : Browser.touchEndEvent, this.intDrop);
      _super.prototype.destroy.call(this);
    };
    __decorate$3([Property()], Droppable.prototype, "accept", void 0);
    __decorate$3([Property('default')], Droppable.prototype, "scope", void 0);
    __decorate$3([Event$1()], Droppable.prototype, "drop", void 0);
    __decorate$3([Event$1()], Droppable.prototype, "over", void 0);
    __decorate$3([Event$1()], Droppable.prototype, "out", void 0);
    Droppable = __decorate$3([NotifyPropertyChanges], Droppable);
    return Droppable;
  }(Base);
  var __extends$4 = undefined && undefined.__extends || function () {
    var _extendStatics5 = function extendStatics(d, b) {
      _extendStatics5 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics5(d, b);
    };
    return function (d, b) {
      _extendStatics5(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var keyCode = {
    'backspace': 8,
    'tab': 9,
    'enter': 13,
    'shift': 16,
    'control': 17,
    'alt': 18,
    'pause': 19,
    'capslock': 20,
    'space': 32,
    'escape': 27,
    'pageup': 33,
    'pagedown': 34,
    'end': 35,
    'home': 36,
    'leftarrow': 37,
    'uparrow': 38,
    'rightarrow': 39,
    'downarrow': 40,
    'insert': 45,
    'delete': 46,
    'f1': 112,
    'f2': 113,
    'f3': 114,
    'f4': 115,
    'f5': 116,
    'f6': 117,
    'f7': 118,
    'f8': 119,
    'f9': 120,
    'f10': 121,
    'f11': 122,
    'f12': 123,
    'semicolon': 186,
    'plus': 187,
    'comma': 188,
    'minus': 189,
    'dot': 190,
    'forwardslash': 191,
    'graveaccent': 192,
    'openbracket': 219,
    'backslash': 220,
    'closebracket': 221,
    'singlequote': 222
  };
  /**
   * KeyboardEvents class enables you to bind key action desired key combinations for ex., Ctrl+A, Delete, Alt+Space etc.
   * ```html
   * <div id='testEle'>  </div>;
   * <script>
   *   let node: HTMLElement = document.querySelector('#testEle');
   *   let kbInstance = new KeyboardEvents({
   *       element: node,
   *       keyConfigs:{ selectAll : 'ctrl+a' },
   *       keyAction: function (e:KeyboardEvent, action:string) {
   *           // handler function code
   *       }
   *   });
   * </script>
   * ```
   */
  var KeyboardEvents = /** @class */function (_super) {
    __extends$4(KeyboardEvents, _super);
    /**
     * Initializes the KeyboardEvents
     *
     * @param {HTMLElement} element ?
     * @param {KeyboardEventsModel} options ?
     */
    function KeyboardEvents(element, options) {
      var _this = _super.call(this, options, element) || this;
      /**
       * To handle a key press event returns null
       *
       * @param {KeyboardEventArgs} e ?
       * @returns {void} ?
       */
      _this.keyPressHandler = function (e) {
        var isAltKey = e.altKey;
        var isCtrlKey = e.ctrlKey;
        var isShiftKey = e.shiftKey;
        var curkeyCode = e.which;
        var keys = Object.keys(_this.keyConfigs);
        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
          var key = keys_1[_i];
          var configCollection = _this.keyConfigs["" + key].split(',');
          for (var _a = 0, configCollection_1 = configCollection; _a < configCollection_1.length; _a++) {
            var rconfig = configCollection_1[_a];
            var rKeyObj = KeyboardEvents_1.getKeyConfigData(rconfig.trim());
            if (isAltKey === rKeyObj.altKey && isCtrlKey === rKeyObj.ctrlKey && isShiftKey === rKeyObj.shiftKey && curkeyCode === rKeyObj.keyCode) {
              e.action = key;
              if (_this.keyAction) {
                _this.keyAction(e);
              }
            }
          }
        }
      };
      _this.bind();
      return _this;
    }
    KeyboardEvents_1 = KeyboardEvents;
    /**
     * Unwire bound events and destroy the instance.
     *
     * @returns {void} ?
     */
    KeyboardEvents.prototype.destroy = function () {
      this.unwireEvents();
      _super.prototype.destroy.call(this);
    };
    /**
     * Function can be used to specify certain action if a property is changed
     *
     * @param {KeyboardEventsModel} newProp ?
     * @param {KeyboardEventsModel} oldProp ?
     * @returns {void} ?
     * @private
     */
    // eslint-disable-next-line
    KeyboardEvents.prototype.onPropertyChanged = function (newProp, oldProp) {
      // No code are needed
    };
    KeyboardEvents.prototype.bind = function () {
      this.wireEvents();
    };
    /**
     * To get the module name, returns 'keyboard'.
     *
     * @returns {string} ?
     * @private
     */
    KeyboardEvents.prototype.getModuleName = function () {
      return 'keyboard';
    };
    /**
     * Wiring event handlers to events
     *
     * @returns {void} ?
     * @private
     */
    KeyboardEvents.prototype.wireEvents = function () {
      this.element.addEventListener(this.eventName, this.keyPressHandler);
    };
    /**
     * Unwiring event handlers to events
     *
     * @returns {void} ?
     * @private
     */
    KeyboardEvents.prototype.unwireEvents = function () {
      this.element.removeEventListener(this.eventName, this.keyPressHandler);
    };
    /**
     * To get the key configuration data
     *
     * @param {string} config - configuration data
     * @returns {KeyData} ?
     */
    KeyboardEvents.getKeyConfigData = function (config) {
      if (config in this.configCache) {
        return this.configCache["" + config];
      }
      var keys = config.toLowerCase().split('+');
      var keyData = {
        altKey: keys.indexOf('alt') !== -1 ? true : false,
        ctrlKey: keys.indexOf('ctrl') !== -1 ? true : false,
        shiftKey: keys.indexOf('shift') !== -1 ? true : false,
        keyCode: null
      };
      if (keys[keys.length - 1].length > 1 && !!Number(keys[keys.length - 1])) {
        keyData.keyCode = Number(keys[keys.length - 1]);
      } else {
        keyData.keyCode = KeyboardEvents_1.getKeyCode(keys[keys.length - 1]);
      }
      KeyboardEvents_1.configCache["" + config] = keyData;
      return keyData;
    };
    // Return the keycode value as string
    KeyboardEvents.getKeyCode = function (keyVal) {
      return keyCode["" + keyVal] || keyVal.toUpperCase().charCodeAt(0);
    };
    var KeyboardEvents_1;
    KeyboardEvents.configCache = {};
    __decorate$4([Property({})], KeyboardEvents.prototype, "keyConfigs", void 0);
    __decorate$4([Property('keyup')], KeyboardEvents.prototype, "eventName", void 0);
    __decorate$4([Event$1()], KeyboardEvents.prototype, "keyAction", void 0);
    KeyboardEvents = KeyboardEvents_1 = __decorate$4([NotifyPropertyChanges], KeyboardEvents);
    return KeyboardEvents;
  }(Base);

  /**
   * L10n modules provides localized text for different culture.
   * ```typescript
   * import {setCulture} from '@syncfusion/ts-base-library';
   * //load global locale object common for all components.
   * L10n.load({
   *    'fr-BE': {
   *       'button': {
   *            'check': 'vérifié'
   *        }
   *    }
   * });
   * //set globale default locale culture.
   * setCulture('fr-BE');
   * let instance: L10n = new L10n('button', {
   *    check: 'checked'
   * });
   * //Get locale text for current property.
   * instance.getConstant('check');
   * //Change locale culture in a component.
   * instance.setLocale('en-US');
   * ```
   */
  var L10n = /** @class */function () {
    /**
     * Constructor
     *
     * @param {string} controlName ?
     * @param {Object} localeStrings ?
     * @param {string} locale ?
     */
    function L10n(controlName, localeStrings, locale) {
      this.controlName = controlName;
      this.localeStrings = localeStrings;
      this.setLocale(locale || exports.defaultCulture);
    }
    /**
     * Sets the locale text
     *
     * @param {string} locale ?
     * @returns {void} ?
     */
    L10n.prototype.setLocale = function (locale) {
      var intLocale = this.intGetControlConstant(L10n.locale, locale);
      this.currentLocale = intLocale || this.localeStrings;
    };
    /**
     * Sets the global locale for all components.
     *
     * @param {Object} localeObject - specifies the localeObject to be set as global locale.
     * @returns {void} ?
     */
    L10n.load = function (localeObject) {
      this.locale = extend(this.locale, localeObject, {}, true);
    };
    /**
     * Returns current locale text for the property based on the culture name and control name.
     *
     * @param {string} prop - specifies the property for which localize text to be returned.
     * @returns {string} ?
     */
    L10n.prototype.getConstant = function (prop) {
      // Removed conditional operator because this method does not return correct value when passing 0 as value in localization
      if (!isNullOrUndefined(this.currentLocale["" + prop])) {
        return this.currentLocale["" + prop];
      } else {
        return this.localeStrings["" + prop] || '';
      }
    };
    /**
     * Returns the control constant object for current object and the locale specified.
     *
     * @param {Object} curObject ?
     * @param {string} locale ?
     * @returns {Object} ?
     */
    L10n.prototype.intGetControlConstant = function (curObject, locale) {
      if (curObject["" + locale]) {
        return curObject["" + locale][this.controlName];
      }
      return null;
    };
    L10n.locale = {};
    return L10n;
  }();
  var __extends$5 = undefined && undefined.__extends || function () {
    var _extendStatics6 = function extendStatics(d, b) {
      _extendStatics6 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics6(d, b);
    };
    return function (d, b) {
      _extendStatics6(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  /**
   * SwipeSettings is a framework module that provides support to handle swipe event like swipe up, swipe right, etc..,
   */
  var SwipeSettings = /** @class */function (_super) {
    __extends$5(SwipeSettings, _super);
    function SwipeSettings() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$5([Property(50)], SwipeSettings.prototype, "swipeThresholdDistance", void 0);
    return SwipeSettings;
  }(ChildProperty);
  var swipeRegex = /(Up|Down)/;
  /**
   * Touch class provides support to handle the touch event like tap, double tap, tap hold, etc..,
   * ```typescript
   *    let node: HTMLElement;
   * let touchObj: Touch = new Touch({
   *    element: node,
   *    tap: function (e) {
   *        // tap handler function code
   *    }
   *    tapHold: function (e) {
   *        // tap hold handler function code
   *    }
   *    scroll: function (e) {
   *        // scroll handler function code
   *    }
   *    swipe: function (e) {
   *        // swipe handler function code
   *    }
   * });
   * ```
   */
  var Touch = /** @class */function (_super) {
    __extends$5(Touch, _super);
    /* End-Properties */
    function Touch(element, options) {
      var _this = _super.call(this, options, element) || this;
      _this.touchAction = true;
      _this.tapCount = 0;
      /**
       *
       * @param {MouseEventArgs | TouchEventArgs} evt ?
       * @returns {void} ?
       */
      _this.startEvent = function (evt) {
        if (_this.touchAction === true) {
          var point = _this.updateChangeTouches(evt);
          if (evt.changedTouches !== undefined) {
            _this.touchAction = false;
          }
          _this.isTouchMoved = false;
          _this.movedDirection = '';
          _this.startPoint = _this.lastMovedPoint = {
            clientX: point.clientX,
            clientY: point.clientY
          };
          _this.startEventData = point;
          _this.hScrollLocked = _this.vScrollLocked = false;
          _this.tStampStart = Date.now();
          _this.timeOutTapHold = setTimeout(function () {
            _this.tapHoldEvent(evt);
          }, _this.tapHoldThreshold);
          EventHandler.add(_this.element, Browser.touchMoveEvent, _this.moveEvent, _this);
          EventHandler.add(_this.element, Browser.touchEndEvent, _this.endEvent, _this);
          EventHandler.add(_this.element, Browser.touchCancelEvent, _this.cancelEvent, _this);
        }
      };
      /**
       *
       * @param {MouseEventArgs | TouchEventArgs} evt ?
       * @returns {void} ?
       */
      _this.moveEvent = function (evt) {
        var point = _this.updateChangeTouches(evt);
        _this.movedPoint = point;
        _this.isTouchMoved = !(point.clientX === _this.startPoint.clientX && point.clientY === _this.startPoint.clientY);
        var eScrollArgs = {};
        if (_this.isTouchMoved) {
          clearTimeout(_this.timeOutTapHold);
          _this.calcScrollPoints(evt);
          var scrollArg = {
            startEvents: _this.startEventData,
            originalEvent: evt,
            startX: _this.startPoint.clientX,
            startY: _this.startPoint.clientY,
            distanceX: _this.distanceX,
            distanceY: _this.distanceY,
            scrollDirection: _this.scrollDirection,
            velocity: _this.getVelocity(point)
          };
          eScrollArgs = extend(eScrollArgs, {}, scrollArg);
          _this.trigger('scroll', eScrollArgs);
          _this.lastMovedPoint = {
            clientX: point.clientX,
            clientY: point.clientY
          };
        }
      };
      /**
       *
       * @param {MouseEventArgs | TouchEventArgs} evt ?
       * @returns {void} ?
       */
      _this.cancelEvent = function (evt) {
        clearTimeout(_this.timeOutTapHold);
        clearTimeout(_this.timeOutTap);
        _this.tapCount = 0;
        _this.swipeFn(evt);
        EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);
      };
      /**
       *
       * @param {MouseEventArgs | TouchEventArgs} evt ?
       * @returns {void} ?
       */
      _this.endEvent = function (evt) {
        _this.swipeFn(evt);
        if (!_this.isTouchMoved) {
          if (typeof _this.tap === 'function') {
            _this.trigger('tap', {
              originalEvent: evt,
              tapCount: ++_this.tapCount
            });
            _this.timeOutTap = setTimeout(function () {
              _this.tapCount = 0;
            }, _this.tapThreshold);
          }
        }
        _this.modeclear();
      };
      /**
       *
       * @param {MouseEventArgs | TouchEventArgs} evt ?
       * @returns {void} ?
       */
      _this.swipeFn = function (evt) {
        clearTimeout(_this.timeOutTapHold);
        clearTimeout(_this.timeOutTap);
        var point = _this.updateChangeTouches(evt);
        var diffX = point.clientX - _this.startPoint.clientX;
        var diffY = point.clientY - _this.startPoint.clientY;
        diffX = Math.floor(diffX < 0 ? -1 * diffX : diffX);
        diffY = Math.floor(diffY < 0 ? -1 * diffY : diffX);
        _this.isTouchMoved = diffX > 1 || diffY > 1;
        var isFirefox = /Firefox/.test(Browser.userAgent);
        if (isFirefox && point.clientX === 0 && point.clientY === 0 && evt.type === 'mouseup') {
          _this.isTouchMoved = false;
        }
        _this.endPoint = point;
        _this.calcPoints(evt);
        var swipeArgs = {
          originalEvent: evt,
          startEvents: _this.startEventData,
          startX: _this.startPoint.clientX,
          startY: _this.startPoint.clientY,
          distanceX: _this.distanceX,
          distanceY: _this.distanceY,
          swipeDirection: _this.movedDirection,
          velocity: _this.getVelocity(point)
        };
        if (_this.isTouchMoved) {
          var eSwipeArgs = void 0;
          var tDistance = _this.swipeSettings.swipeThresholdDistance;
          // eslint-disable-next-line
          eSwipeArgs = extend(eSwipeArgs, _this.defaultArgs, swipeArgs);
          var canTrigger = false;
          var ele = _this.element;
          var scrollBool = _this.isScrollable(ele);
          var moved = swipeRegex.test(_this.movedDirection);
          if (tDistance < _this.distanceX && !moved || tDistance < _this.distanceY && moved) {
            if (!scrollBool) {
              canTrigger = true;
            } else {
              canTrigger = _this.checkSwipe(ele, moved);
            }
          }
          if (canTrigger) {
            _this.trigger('swipe', eSwipeArgs);
          }
        }
        _this.modeclear();
      };
      _this.modeclear = function () {
        _this.modeClear = setTimeout(function () {
          _this.touchAction = true;
        }, typeof _this.tap !== 'function' ? 0 : 20);
        _this.lastTapTime = new Date().getTime();
        EventHandler.remove(_this.element, Browser.touchMoveEvent, _this.moveEvent);
        EventHandler.remove(_this.element, Browser.touchEndEvent, _this.endEvent);
        EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);
      };
      _this.bind();
      return _this;
    }
    // triggers when property changed
    /**
     *
     * @private
     * @param {TouchModel} newProp ?
     * @param {TouchModel} oldProp ?
     * @returns {void} ?
     */
    // eslint-disable-next-line
    Touch.prototype.onPropertyChanged = function (newProp, oldProp) {
      //No Code to handle
    };
    Touch.prototype.bind = function () {
      this.wireEvents();
      if (Browser.isIE) {
        this.element.classList.add('e-block-touch');
      }
    };
    /**
     * To destroy the touch instance.
     *
     * @returns {void}
     */
    Touch.prototype.destroy = function () {
      this.unwireEvents();
      _super.prototype.destroy.call(this);
    };
    // Need to changes the event binding once we updated the event handler.
    Touch.prototype.wireEvents = function () {
      EventHandler.add(this.element, Browser.touchStartEvent, this.startEvent, this);
    };
    Touch.prototype.unwireEvents = function () {
      EventHandler.remove(this.element, Browser.touchStartEvent, this.startEvent);
    };
    /**
     * Returns module name as touch
     *
     * @returns {string} ?
     * @private
     */
    Touch.prototype.getModuleName = function () {
      return 'touch';
    };
    /**
     * Returns if the HTML element is Scrollable.
     *
     * @param {HTMLElement} element - HTML Element to check if Scrollable.
     * @returns {boolean} ?
     */
    Touch.prototype.isScrollable = function (element) {
      var eleStyle = getComputedStyle(element);
      var style = eleStyle.overflow + eleStyle.overflowX + eleStyle.overflowY;
      if (/(auto|scroll)/.test(style)) {
        return true;
      }
      return false;
    };
    /**
     *
     * @param {MouseEventArgs | TouchEventArgs} evt ?
     * @returns {void} ?
     */
    Touch.prototype.tapHoldEvent = function (evt) {
      this.tapCount = 0;
      this.touchAction = true;
      var eTapArgs;
      EventHandler.remove(this.element, Browser.touchMoveEvent, this.moveEvent);
      EventHandler.remove(this.element, Browser.touchEndEvent, this.endEvent);
      // eslint-disable-next-line
      eTapArgs = {
        originalEvent: evt
      };
      this.trigger('tapHold', eTapArgs);
      EventHandler.remove(this.element, Browser.touchCancelEvent, this.cancelEvent);
    };
    Touch.prototype.calcPoints = function (evt) {
      var point = this.updateChangeTouches(evt);
      this.defaultArgs = {
        originalEvent: evt
      };
      this.distanceX = Math.abs(Math.abs(point.clientX) - Math.abs(this.startPoint.clientX));
      this.distanceY = Math.abs(Math.abs(point.clientY) - Math.abs(this.startPoint.clientY));
      if (this.distanceX > this.distanceY) {
        this.movedDirection = point.clientX > this.startPoint.clientX ? 'Right' : 'Left';
      } else {
        this.movedDirection = point.clientY < this.startPoint.clientY ? 'Up' : 'Down';
      }
    };
    Touch.prototype.calcScrollPoints = function (evt) {
      var point = this.updateChangeTouches(evt);
      this.defaultArgs = {
        originalEvent: evt
      };
      this.distanceX = Math.abs(Math.abs(point.clientX) - Math.abs(this.lastMovedPoint.clientX));
      this.distanceY = Math.abs(Math.abs(point.clientY) - Math.abs(this.lastMovedPoint.clientY));
      if ((this.distanceX > this.distanceY || this.hScrollLocked === true) && this.vScrollLocked === false) {
        this.scrollDirection = point.clientX > this.lastMovedPoint.clientX ? 'Right' : 'Left';
        this.hScrollLocked = true;
      } else {
        this.scrollDirection = point.clientY < this.lastMovedPoint.clientY ? 'Up' : 'Down';
        this.vScrollLocked = true;
      }
    };
    Touch.prototype.getVelocity = function (pnt) {
      var newX = pnt.clientX;
      var newY = pnt.clientY;
      var newT = Date.now();
      var xDist = newX - this.startPoint.clientX;
      var yDist = newY - this.startPoint.clientX;
      var interval = newT - this.tStampStart;
      return Math.sqrt(xDist * xDist + yDist * yDist) / interval;
    };
    // eslint-disable-next-line
    Touch.prototype.checkSwipe = function (ele, flag) {
      var keys = ['scroll', 'offset'];
      var temp = flag ? ['Height', 'Top'] : ['Width', 'Left'];
      if (ele[keys[0] + temp[0]] <= ele[keys[1] + temp[0]]) {
        return true;
      }
      return ele[keys[0] + temp[1]] === 0 || ele[keys[1] + temp[0]] + ele[keys[0] + temp[1]] >= ele[keys[0] + temp[0]];
    };
    Touch.prototype.updateChangeTouches = function (evt) {
      var point = evt.changedTouches && evt.changedTouches.length !== 0 ? evt.changedTouches[0] : evt;
      return point;
    };
    __decorate$5([Event$1()], Touch.prototype, "tap", void 0);
    __decorate$5([Event$1()], Touch.prototype, "tapHold", void 0);
    __decorate$5([Event$1()], Touch.prototype, "swipe", void 0);
    __decorate$5([Event$1()], Touch.prototype, "scroll", void 0);
    __decorate$5([Property(350)], Touch.prototype, "tapThreshold", void 0);
    __decorate$5([Property(750)], Touch.prototype, "tapHoldThreshold", void 0);
    __decorate$5([Complex({}, SwipeSettings)], Touch.prototype, "swipeSettings", void 0);
    Touch = __decorate$5([NotifyPropertyChanges], Touch);
    return Touch;
  }(Base);

  /**
   * Template Engine
   */
  var LINES = new RegExp('\\n|\\r|\\s\\s+', 'g');
  var QUOTES = new RegExp(/'|"/g);
  var IF_STMT = new RegExp('if ?\\(');
  var ELSEIF_STMT = new RegExp('else if ?\\(');
  var ELSE_STMT = new RegExp('else');
  var FOR_STMT = new RegExp('for ?\\(');
  var IF_OR_FOR = new RegExp('(/if|/for)');
  var CALL_FUNCTION = new RegExp('\\((.*)\\)', '');
  var NOT_NUMBER = new RegExp('^[0-9]+$', 'g');
  var WORD = new RegExp('[\\w"\'.\\s+]+', 'g');
  var DBL_QUOTED_STR = new RegExp('"(.*?)"', 'g');
  var WORDIF = new RegExp('[\\w"\'@#$.\\s-+]+', 'g');
  var exp = new RegExp('\\${([^}]*)}', 'g');
  // let cachedTemplate: Object = {};
  var ARR_OBJ = /^\..*/gm;
  var SINGLE_SLASH = /\\/gi;
  var DOUBLE_SLASH = /\\\\/gi;
  var WORDFUNC = new RegExp('[\\w"\'@#$.\\s+]+', 'g');
  var WINDOWFUNC = /\window\./gm;
  /**
   * The function to set regular expression for template expression string.
   *
   * @param {RegExp} value - Value expression.
   * @returns {RegExp} ?
   * @private
   */

  // /**
  //  * To render the template string from the given data.
  //  * @param  {string} template - String Template.
  //  * @param  {Object[]|JSON} data - DataSource for the template.
  //  * @param  {Object} helper? - custom helper object.
  //  */
  // export function template(template: string, data: JSON, helper?: Object): string {
  //     let hash: string = hashCode(template);
  //     let tmpl: Function;
  //     if (!cachedTemplate[hash]) {
  //         tmpl = cachedTemplate[hash] = compile(template, helper);
  //     } else {
  //         tmpl = cachedTemplate[hash];
  //     }
  //     return tmpl(data);
  // }
  /**
   * Compile the template string into template function.
   *
   * @param {string | Function} template - The template string which is going to convert.
   * @param {Object} helper - Helper functions as an object.
   * @param {boolean} ignorePrefix ?
   * @returns {string} ?
   * @private
   */
  function compile$1(template, helper, ignorePrefix) {
    if (typeof template === 'function') {
      return template;
    } else {
      var argName = 'data';
      var evalExpResult = evalExp(template, argName, helper, ignorePrefix);
      /* eslint-disable */
      var condtion = "var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25A0\\s]+)['])/g);\n        var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25A0\\s]+)['])/g);\n        if(str.match(valueRegEx)){\n            var check = str.match(valueRegEx);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(valueRegEx)[i].split('value=')[1];\n                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                str1 = str1.replace(check1, change);\n            }\n            str = str.replace(str, str1);\n        }\n        else if (str.match(/(?:href='')/) === null) {\n            if(str.match(hrefRegex)) {\n                var check = str.match(hrefRegex);\n                var str1 = str;\n                for (var i=0; i < check.length; i++) {\n                    var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                    if (check1) {\n                        var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                        change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                        str1 = str1.replace(check1, change);\n                    }\n                }\n                str = str.replace(str, str1);\n            }\n        }\n        ";
      var fnCode = 'var str=\"' + evalExpResult + '\";' + condtion + ' return str;';
      /* eslint-enable */
      var fn = new Function(argName, fnCode);
      return fn.bind(helper);
    }
  }
  /** function used to evaluate the function expression
   *
   * @param {string} str ?
   * @param {string} nameSpace ?
   * @param {Object} helper ?
   * @param {boolean} ignorePrefix ?
   * @returns {string} ?
   */
  function evalExp(str, nameSpace, helper, ignorePrefix) {
    var varCOunt = 0;
    /**
     * Variable containing Local Keys
     */
    var localKeys = [];
    var isClass = str.match(/class="([^"]+|)\s{2}/g);
    var singleSpace = '';
    if (isClass) {
      isClass.forEach(function (value) {
        singleSpace = value.replace(/\s\s+/g, ' ');
        str = str.replace(value, singleSpace);
      });
    }
    if (exp.test(str)) {
      var insideBraces = false;
      var outputString = '';
      for (var i = 0; i < str.length; i++) {
        if (str[i + ''] === '$' && str[i + 1] === '{') {
          insideBraces = true;
        } else if (str[i + ''] === '}') {
          insideBraces = false;
        }
        outputString += str[i + ''] === '"' && !insideBraces ? '\\"' : str[i + ''];
      }
      str = outputString;
    } else {
      str = str.replace(/\\?"/g, '\\"');
    }
    return str.replace(LINES, '').replace(DBL_QUOTED_STR, '\'$1\'').replace(exp,
    // eslint-disable-next-line
    function (match, cnt, offset, matchStr) {
      var SPECIAL_CHAR = /@|#|\$/gm;
      var matches = cnt.match(CALL_FUNCTION);
      // matches to detect any function calls
      if (matches) {
        var rlStr = matches[1];
        if (ELSEIF_STMT.test(cnt)) {
          //handling else-if condition
          cnt = '";} ' + cnt.replace(matches[1], rlStr.replace(WORD, function (str) {
            str = str.trim();
            return addNameSpace(str, !QUOTES.test(str) && localKeys.indexOf(str) === -1, nameSpace, localKeys, ignorePrefix);
          })) + '{ \n str = str + "';
        } else if (IF_STMT.test(cnt)) {
          //handling if condition
          cnt = '"; ' + cnt.replace(matches[1], rlStr.replace(WORDIF, function (strs) {
            return HandleSpecialCharArrObj(strs, nameSpace, localKeys, ignorePrefix);
          })) + '{ \n str = str + "';
        } else if (FOR_STMT.test(cnt)) {
          //handling for condition
          var rlStr_1 = matches[1].split(' of ');
          // replace for each into actual JavaScript
          // eslint-disable-next-line
          cnt = '"; ' + cnt.replace(matches[1], function (mtc) {
            localKeys.push(rlStr_1[0]);
            localKeys.push(rlStr_1[0] + 'Index');
            varCOunt = varCOunt + 1;
            // tslint:disable-next-line
            return 'var i' + varCOunt + '=0; i' + varCOunt + ' < ' + addNameSpace(rlStr_1[1], true, nameSpace, localKeys, ignorePrefix) + '.length; i' + varCOunt + '++';
          }) + '{ \n ' + rlStr_1[0] + '= ' + addNameSpace(rlStr_1[1], true, nameSpace, localKeys, ignorePrefix) + '[i' + varCOunt + ']; \n var ' + rlStr_1[0] + 'Index=i' + varCOunt + '; \n str = str + "';
        } else {
          //helper function handling
          var fnStr = cnt.split('(');
          // eslint-disable-next-line
          var fNameSpace = helper && helper.hasOwnProperty(fnStr[0]) ? 'this.' : 'global';
          fNameSpace = /\./.test(fnStr[0]) ? '' : fNameSpace;
          var ftArray = matches[1].split(',');
          if (matches[1].length !== 0 && !/data/.test(ftArray[0]) && !/window./.test(ftArray[0])) {
            matches[1] = fNameSpace === 'global' ? nameSpace + '.' + matches[1] : matches[1];
          }
          var splRegexp = /@|\$|#/gm;
          var arrObj = /\]\./gm;
          if (WINDOWFUNC.test(cnt) && arrObj.test(cnt) || splRegexp.test(cnt)) {
            var splArrRegexp = /@|\$|#|\]\./gm;
            if (splArrRegexp.test(cnt)) {
              // tslint:disable-next-line
              cnt = '"+ ' + (fNameSpace === 'global' ? '' : fNameSpace) + cnt.replace(matches[1], rlStr.replace(WORDFUNC, function (strs) {
                return HandleSpecialCharArrObj(strs, nameSpace, localKeys, ignorePrefix);
              })) + '+ "';
            }
          } else {
            cnt = '" + ' + (fNameSpace === 'global' ? '' : fNameSpace) + cnt.replace(rlStr, addNameSpace(matches[1].replace(/,( |)data.|,/gi, ',' + nameSpace + '.').replace(/,( |)data.window/gi, ',window'), fNameSpace === 'global' ? false : true, nameSpace, localKeys, ignorePrefix)) + '+"';
          }
        }
      } else if (ELSE_STMT.test(cnt)) {
        // handling else condition
        cnt = '"; ' + cnt.replace(ELSE_STMT, '} else { \n str = str + "');
        // eslint-disable-next-line
      } else if (!!cnt.match(IF_OR_FOR)) {
        // close condition
        cnt = cnt.replace(IF_OR_FOR, '"; \n } \n str = str + "');
      } else if (SPECIAL_CHAR.test(cnt)) {
        // template string with double slash with special character
        if (cnt.match(SINGLE_SLASH)) {
          cnt = SlashReplace(cnt);
        }
        cnt = '"+' + NameSpaceForspecialChar(cnt, localKeys.indexOf(cnt) === -1, nameSpace, localKeys) + '"]+"';
      } else {
        // template string with double slash
        if (cnt.match(SINGLE_SLASH)) {
          cnt = SlashReplace(cnt);
          cnt = '"+' + NameSpaceForspecialChar(cnt, localKeys.indexOf(cnt) === -1, nameSpace, localKeys) + '"]+"';
        } else {
          // evaluate normal expression
          cnt = cnt !== '' ? '"+' + addNameSpace(cnt.replace(/,/gi, '+' + nameSpace + '.'), localKeys.indexOf(cnt) === -1, nameSpace, localKeys, ignorePrefix) + '+"' : '${}';
        }
      }
      return cnt;
    });
  }
  /**
   *
   * @param {string} str ?
   * @param {boolean} addNS ?
   * @param {string} nameSpace ?
   * @param {string[]} ignoreList ?
   * @param {boolean} ignorePrefix ?
   * @returns {string} ?
   */
  function addNameSpace(str, addNS, nameSpace, ignoreList, ignorePrefix) {
    return addNS && !NOT_NUMBER.test(str) && ignoreList.indexOf(str.split('.')[0]) === -1 && !ignorePrefix && str !== 'true' && str !== 'false' ? nameSpace + '.' + str : str;
  }
  /**
   *
   * @param {string} str ?
   * @param {boolean} addNS ?
   * @param {string} nameSpace ?
   * @param {string[]} ignoreList ?
   * @returns {string} ?
   */
  function NameSpaceArrObj(str, addNS, nameSpace, ignoreList) {
    var arrObjReg = /^\..*/gm;
    return addNS && !NOT_NUMBER.test(str) && ignoreList.indexOf(str.split('.')[0]) === -1 && !arrObjReg.test(str) ? nameSpace + '.' + str : str;
  }
  // // Create hashCode for template string to storeCached function
  // function hashCode(str: string): string {
  //     return str.split('').reduce((a: number, b: string) => { a = ((a << 5) - a) + b.charCodeAt(0); return a & a; }, 0).toString();
  // }
  /**
   *
   * @param {string} str ?
   * @param {boolean} addNS ?
   * @param {string} nameSpace ?
   * @param {string[]} ignoreList ?
   * @returns {string} ?
   */
  function NameSpaceForspecialChar(str, addNS, nameSpace, ignoreList) {
    return addNS && !NOT_NUMBER.test(str) && ignoreList.indexOf(str.split('.')[0]) === -1 ? nameSpace + '["' + str : str;
  }
  // eslint-disable-next-line
  function SlashReplace(tempStr) {
    var _double = '\\\\';
    if (tempStr.match(DOUBLE_SLASH)) {
      // eslint-disable-next-line
      tempStr = tempStr;
    } else {
      tempStr = tempStr.replace(SINGLE_SLASH, _double);
    }
    return tempStr;
  }
  /**
   *
   * @param {string} str ?
   * @param {string} nameSpaceNew ?
   * @param {string[]} keys ?
   * @param {boolean} ignorePrefix ?
   * @returns {string} ?
   */
  function HandleSpecialCharArrObj(str, nameSpaceNew, keys, ignorePrefix) {
    str = str.trim();
    var windowFunc = /\window\./gm;
    if (!windowFunc.test(str)) {
      var quotes = /'|"/gm;
      var splRegexp = /@|\$|#/gm;
      if (splRegexp.test(str)) {
        str = NameSpaceForspecialChar(str, keys.indexOf(str) === -1, nameSpaceNew, keys) + '"]';
      }
      if (ARR_OBJ.test(str)) {
        return NameSpaceArrObj(str, !quotes.test(str) && keys.indexOf(str) === -1, nameSpaceNew, keys);
      } else {
        return addNameSpace(str, !quotes.test(str) && keys.indexOf(str) === -1, nameSpaceNew, keys, ignorePrefix);
      }
    } else {
      return str;
    }
  }

  /**
   * Template Engine Bridge
   */
  var HAS_ROW = /^[\n\r.]+<tr|^<tr/;
  var HAS_SVG = /^[\n\r.]+<svg|^<path|^<g/;
  var blazorTemplates = {};
  /**
   *
   * @returns {string} ?
   */
  function getRandomId() {
    return '-' + Math.random().toString(36).substr(2, 5);
  }
  /**
   * Compile the template string into template function.
   *
   * @param {string | Function} templateString - The template string which is going to convert.
   * @param {Object} helper - Helper functions as an object.
   * @param {boolean} ignorePrefix ?
   * @returns {NodeList} ?
   * @private
   */
  // eslint-disable-next-line
  function compile$$1(templateString, helper, ignorePrefix) {
    var compiler = engineObj.compile(templateString, helper, ignorePrefix);
    // eslint-disable-next-line
    return function (data, component, propName, templateId, isStringTemplate, index, element, root) {
      var result = compiler(data, component, propName, element, root);
      var blazorTemplateId = 'BlazorTemplateId';
      if (isBlazor() && !isStringTemplate) {
        var randomId = getRandomId();
        var blazorId = templateId + randomId;
        if (!blazorTemplates["" + templateId]) {
          blazorTemplates["" + templateId] = [];
        }
        if (!isNullOrUndefined(index)) {
          var keys = Object.keys(blazorTemplates["" + templateId][parseInt(index.toString(), 10)]);
          for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
            var key = keys_1[_i];
            if (key !== blazorTemplateId && data["" + key]) {
              blazorTemplates["" + templateId][parseInt(index.toString(), 10)]["" + key] = data["" + key];
            }
            if (key === blazorTemplateId) {
              blazorId = blazorTemplates["" + templateId][parseInt(index.toString(), 10)]["" + key];
            }
          }
        } else {
          data["" + blazorTemplateId] = blazorId;
          blazorTemplates["" + templateId].push(data);
        }
        // eslint-disable-next-line
        return propName === 'rowTemplate' ? [createElement('tr', {
          id: blazorId,
          className: 'e-blazor-template'
        })] :
        // eslint-disable-next-line
        [createElement('div', {
          id: blazorId,
          className: 'e-blazor-template'
        })];
      }
      if (typeof result === 'string') {
        if (HAS_SVG.test(result)) {
          var ele = createElement('svg', {
            innerHTML: result
          });
          return ele.childNodes;
        } else {
          var ele = createElement(HAS_ROW.test(result) ? 'table' : 'div', {
            innerHTML: result
          });
          return ele.childNodes;
        }
      } else {
        return result;
      }
    };
  }
  /**
   *
   * @param {string} templateId ?
   * @param {string} templateName ?
   * @param {string} comp ?
   * @param {boolean} isEmpty ?
   * @param {Function} callBack ?
   * @returns {void} ?
   */
  function updateBlazorTemplate(templateId, templateName, comp, isEmpty, callBack) {
    if (isBlazor()) {
      var ejsIntrop = 'sfBlazor';
      window["" + ejsIntrop].updateTemplate(templateName, blazorTemplates["" + templateId], templateId, comp, callBack);
      if (isEmpty !== false) {
        blazorTemplates["" + templateId] = [];
      }
    }
  }
  /**
   *
   * @param {string} templateId ?
   * @param {string} templateName ?
   * @param {number} index ?
   * @returns {void} ?
   */
  function resetBlazorTemplate(templateId, templateName, index) {
    var templateDiv = document.getElementById(templateId);
    if (templateDiv) {
      // eslint-disable-next-line
      var innerTemplates = templateDiv.getElementsByClassName('blazor-inner-template');
      for (var i = 0; i < innerTemplates.length; i++) {
        var tempId = ' ';
        if (!isNullOrUndefined(index)) {
          tempId = innerTemplates[parseInt(index.toString(), 10)].getAttribute('data-templateId');
        } else {
          tempId = innerTemplates[parseInt(i.toString(), 10)].getAttribute('data-templateId');
        }
        var tempElement = document.getElementById(tempId);
        if (tempElement) {
          var length_1 = tempElement.childNodes.length;
          for (var j = 0; j < length_1; j++) {
            if (!isNullOrUndefined(index)) {
              innerTemplates[parseInt(index.toString(), 10)].appendChild(tempElement.childNodes[0]);
              i = innerTemplates.length;
            } else {
              innerTemplates[parseInt(i.toString(), 10)].appendChild(tempElement.childNodes[0]);
            }
          }
        }
      }
    }
  }
  /**
   * Set your custom template engine for template rendering.
   *
   * @param  {ITemplateEngine} classObj - Class object for custom template.
   * @returns {void} ?
   * @private
   */
  function setTemplateEngine(classObj) {
    engineObj.compile = classObj.compile;
  }
  /**
   * Get current template engine for template rendering
   *
   * @returns {string} ?
   * @private
   */
  function getTemplateEngine() {
    return engineObj.compile;
  }
  /**
   * Set the current template function to support Content Security Policy.
   *
   * @param {Function} template - The template function that is going to render.
   * @param {any} helper - The data utilized by the template from the helper.
   * @returns {Function} ?
   * @private
   */
  // eslint-disable-next-line
  function initializeCSPTemplate(template, helper) {
    var boundFunc;
    template.prototype.CSPTemplate = true;
    if (!isNullOrUndefined(helper)) {
      boundFunc = template.bind(helper);
      boundFunc.prototype = Object.create(template.prototype);
    } else {
      boundFunc = template;
    }
    return boundFunc;
  }
  //Default Engine Class
  var Engine = /** @class */function () {
    function Engine() {}
    // eslint-disable-next-line
    Engine.prototype.compile = function (templateString, helper, ignorePrefix) {
      if (helper === void 0) {
        helper = {};
      }
      return compile$1(templateString, helper);
    };
    return Engine;
  }();
  var engineObj = {
    compile: new Engine().compile
  };

  /**
   * SanitizeHtmlHelper for sanitize the value.
   */
  var removeTags = ['script', 'style', 'iframe[src]', 'link[href*="javascript:"]', 'object[type="text/x-scriptlet"]', 'object[data^="data:text/html;base64"]', 'img[src^="data:text/html;base64"]', '[src^="javascript:"]', '[dynsrc^="javascript:"]', '[lowsrc^="javascript:"]', '[type^="application/x-shockwave-flash"]'];
  var removeAttrs = [{
    attribute: 'href',
    selector: '[href*="javascript:"]'
  }, {
    attribute: 'background',
    selector: '[background^="javascript:"]'
  }, {
    attribute: 'style',
    selector: '[style*="javascript:"]'
  }, {
    attribute: 'style',
    selector: '[style*="expression("]'
  }, {
    attribute: 'href',
    selector: 'a[href^="data:text/html;base64"]'
  }];
  var jsEvents = ['onchange', 'onclick', 'onmouseover', 'onmouseout', 'onkeydown', 'onload', 'onerror', 'onblur', 'onfocus', 'onbeforeload', 'onbeforeunload', 'onkeyup', 'onsubmit', 'onafterprint', 'onbeforeonload', 'onbeforeprint', 'oncanplay', 'oncanplaythrough', 'oncontextmenu', 'ondblclick', 'ondrag', 'ondragend', 'ondragenter', 'ondragleave', 'ondragover', 'ondragstart', 'ondrop', 'ondurationchange', 'onemptied', 'onended', 'onformchange', 'onforminput', 'onhaschange', 'oninput', 'oninvalid', 'onkeypress', 'onloadeddata', 'onloadedmetadata', 'onloadstart', 'onmessage', 'onmousedown', 'onmousemove', 'onmouseup', 'onmousewheel', 'onoffline', 'onoine', 'ononline', 'onpagehide', 'onpageshow', 'onpause', 'onplay', 'onplaying', 'onpopstate', 'onprogress', 'onratechange', 'onreadystatechange', 'onredo', 'onresize', 'onscroll', 'onseeked', 'onseeking', 'onselect', 'onstalled', 'onstorage', 'onsuspend', 'ontimeupdate', 'onundo', 'onunload', 'onvolumechange', 'onwaiting', 'onmouseenter', 'onmouseleave', 'onstart', 'onpropertychange', 'oncopy', 'ontoggle', 'onpointerout', 'onpointermove', 'onpointerleave', 'onpointerenter', 'onpointerrawupdate', 'onpointerover', 'onbeforecopy', 'onbeforecut', 'onbeforeinput'];
  var SanitizeHtmlHelper = /** @class */function () {
    function SanitizeHtmlHelper() {}
    SanitizeHtmlHelper.beforeSanitize = function () {
      return {
        selectors: {
          tags: removeTags,
          attributes: removeAttrs
        }
      };
    };
    SanitizeHtmlHelper.sanitize = function (value) {
      if (isNullOrUndefined(value)) {
        return value;
      }
      var item = this.beforeSanitize();
      var output = this.serializeValue(item, value);
      return output;
    };
    SanitizeHtmlHelper.serializeValue = function (item, value) {
      this.removeAttrs = item.selectors.attributes;
      this.removeTags = item.selectors.tags;
      this.wrapElement = document.createElement('div');
      this.wrapElement.innerHTML = value;
      this.removeXssTags();
      this.removeJsEvents();
      this.removeXssAttrs();
      var tempEleValue = this.wrapElement.innerHTML;
      this.removeElement();
      return tempEleValue.replace(/&amp;/g, '&');
    };
    SanitizeHtmlHelper.removeElement = function () {
      // Removes an element's attibute to avoid html tag validation
      var nodes = this.wrapElement.children;
      for (var j = 0; j < nodes.length; j++) {
        var attribute = nodes[parseInt(j.toString(), 10)].attributes;
        for (var i = 0; i < attribute.length; i++) {
          this.wrapElement.children[parseInt(j.toString(), 10)].removeAttribute(attribute[parseInt(i.toString(), 10)].localName);
        }
      }
    };
    SanitizeHtmlHelper.removeXssTags = function () {
      var elements = this.wrapElement.querySelectorAll(this.removeTags.join(','));
      if (elements.length > 0) {
        elements.forEach(function (element) {
          detach(element);
        });
      } else {
        return;
      }
    };
    SanitizeHtmlHelper.removeJsEvents = function () {
      var elements = this.wrapElement.querySelectorAll('[' + jsEvents.join('],[') + ']');
      if (elements.length > 0) {
        elements.forEach(function (element) {
          jsEvents.forEach(function (attr) {
            if (element.hasAttribute(attr)) {
              element.removeAttribute(attr);
            }
          });
        });
      } else {
        return;
      }
    };
    SanitizeHtmlHelper.removeXssAttrs = function () {
      var _this = this;
      // eslint-disable-next-line
      this.removeAttrs.forEach(function (item, index) {
        var elements = _this.wrapElement.querySelectorAll(item.selector);
        if (elements.length > 0) {
          elements.forEach(function (element) {
            element.removeAttribute(item.attribute);
          });
        }
      });
    };
    return SanitizeHtmlHelper;
  }();

  /**
   * Base modules
   */

  exports.blazorCultureFormats = blazorCultureFormats;
  exports.Ajax = Ajax;
  exports.Fetch = Fetch;
  exports.Animation = Animation;
  exports.rippleEffect = rippleEffect;
  exports.enableRipple = enableRipple;
  exports.setGlobalAnimation = setGlobalAnimation;
  exports.Base = Base;
  exports.getComponent = getComponent;
  exports.removeChildInstance = removeChildInstance;
  exports.setProxyToRaw = setProxyToRaw;
  exports.Browser = Browser;
  exports.enableVersionBasedPersistence = enableVersionBasedPersistence;
  exports.Component = Component;
  exports.ChildProperty = ChildProperty;
  exports.Position = Position;
  exports.Draggable = Draggable;
  exports.Droppable = Droppable;
  exports.EventHandler = EventHandler;
  exports.onIntlChange = onIntlChange;
  exports.cldrData = cldrData;
  exports.Internationalization = Internationalization;
  exports.setCulture = setCulture;
  exports.setCurrencyCode = setCurrencyCode;
  exports.loadCldr = loadCldr;
  exports.enableRtl = enableRtl;
  exports.getNumericObject = getNumericObject;
  exports.getNumberDependable = getNumberDependable;
  exports.getDefaultDateObject = getDefaultDateObject;
  exports.KeyboardEvents = KeyboardEvents;
  exports.L10n = L10n;
  exports.ModuleLoader = ModuleLoader;
  exports.Property = Property;
  exports.Complex = Complex;
  exports.ComplexFactory = ComplexFactory;
  exports.Collection = Collection;
  exports.CollectionFactory = CollectionFactory;
  exports.Event = Event$1;
  exports.NotifyPropertyChanges = NotifyPropertyChanges;
  exports.CreateBuilder = CreateBuilder;
  exports.SwipeSettings = SwipeSettings;
  exports.Touch = Touch;
  exports.blazorTemplates = blazorTemplates;
  exports.getRandomId = getRandomId;
  exports.compile = compile$$1;
  exports.updateBlazorTemplate = updateBlazorTemplate;
  exports.resetBlazorTemplate = resetBlazorTemplate;
  exports.setTemplateEngine = setTemplateEngine;
  exports.getTemplateEngine = getTemplateEngine;
  exports.initializeCSPTemplate = initializeCSPTemplate;
  exports.disableBlazorMode = disableBlazorMode;
  exports.createInstance = createInstance;
  exports.setImmediate = setImmediate;
  exports.getValue = getValue;
  exports.setValue = setValue;
  exports.deleteObject = deleteObject;
  exports.containerObject = containerObject;
  exports.isObject = isObject;
  exports.getEnumValue = getEnumValue;
  exports.merge = merge;
  exports.extend = extend;
  exports.isNullOrUndefined = isNullOrUndefined;
  exports.isUndefined = isUndefined;
  exports.getUniqueID = getUniqueID;
  exports.debounce = debounce;
  exports.queryParams = queryParams;
  exports.isObjectArray = isObjectArray;
  exports.compareElementParent = compareElementParent;
  exports.throwError = throwError;
  exports.print = print;
  exports.formatUnit = formatUnit;
  exports.enableBlazorMode = enableBlazorMode;
  exports.isBlazor = isBlazor;
  exports.getElement = getElement;
  exports.getInstance = getInstance;
  exports.addInstance = addInstance;
  exports.uniqueID = uniqueID;
  exports.createElement = createElement;
  exports.addClass = addClass;
  exports.removeClass = removeClass;
  exports.isVisible = isVisible;
  exports.prepend = prepend;
  exports.append = append;
  exports.detach = detach;
  exports.remove = remove;
  exports.attributes = attributes;
  exports.select = select;
  exports.selectAll = selectAll;
  exports.closest = closest;
  exports.siblings = siblings;
  exports.getAttributeOrDefault = getAttributeOrDefault;
  exports.setStyleAttribute = setStyleAttribute;
  exports.classList = classList;
  exports.matches = matches;
  exports.includeInnerHTML = includeInnerHTML;
  exports.containsClass = containsClass;
  exports.cloneNode = cloneNode;
  exports.Observer = Observer;
  exports.SanitizeHtmlHelper = SanitizeHtmlHelper;
  exports.componentList = componentList;
  exports.registerLicense = registerLicense;
  exports.validateLicense = validateLicense;
  exports.getVersion = getVersion;
  exports.createLicenseOverlay = createLicenseOverlay;
  return exports;
}({});

/***/ }),

/***/ "./modules/data.js":
/*!*************************!*\
  !*** ./modules/data.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
window.sf = window.sf || {};
window.sf.data = function (exports) {
  'use strict';

  /* eslint-disable valid-jsdoc */
  /* eslint-disable security/detect-object-injection */
  /**
   * Query class is used to build query which is used by the DataManager to communicate with datasource.
   */
  var Query = /** @class */function () {
    /**
     * Constructor for Query class.
     *
     * @param {string|string[]} from?
     * @param from
     * @hidden
     */
    function Query(from) {
      /** @hidden */
      this.subQuery = null;
      /** @hidden */
      this.isChild = false;
      /** @hidden */
      this.distincts = [];
      this.queries = [];
      this.key = '';
      this.fKey = '';
      if (typeof from === 'string') {
        this.fromTable = from;
      } else if (from && from instanceof Array) {
        this.lookups = from;
      }
      this.expands = [];
      this.sortedColumns = [];
      this.groupedColumns = [];
      this.subQuery = null;
      this.isChild = false;
      this.params = [];
      this.lazyLoad = [];
      return this;
    }
    /**
     * Sets the primary key.
     *
     * @param  {string} field - Defines the column field.
     */
    Query.prototype.setKey = function (field) {
      this.key = field;
      return this;
    };
    /**
     * Sets default DataManager to execute query.
     *
     * @param  {DataManager} dataManager - Defines the DataManager.
     */
    Query.prototype.using = function (dataManager) {
      this.dataManager = dataManager;
      return this;
    };
    /**
     * Executes query with the given DataManager.
     *
     * @param  {DataManager} dataManager - Defines the DataManager.
     * @param  {Function} done - Defines the success callback.
     * @param  {Function} fail - Defines the failure callback.
     * @param  {Function} always - Defines the callback which will be invoked on either success or failure.
     *
     * <pre>
     * let dataManager: DataManager = new DataManager([{ ID: '10' }, { ID: '2' }, { ID: '1' }, { ID: '20' }]);
     * let query: Query = new Query();
     * query.sortBy('ID', (x: string, y: string): number => { return parseInt(x, 10) - parseInt(y, 10) });
     * let promise: Promise< Object > = query.execute(dataManager);
     * promise.then((e: { result: Object }) => { });
     * </pre>
     */
    Query.prototype.execute = function (dataManager, done, fail, always) {
      dataManager = dataManager || this.dataManager;
      if (dataManager) {
        return dataManager.executeQuery(this, done, fail, always);
      }
      return DataUtil.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument');
    };
    /**
     * Executes query with the local datasource.
     *
     * @param  {DataManager} dataManager - Defines the DataManager.
     */
    Query.prototype.executeLocal = function (dataManager) {
      dataManager = dataManager || this.dataManager;
      if (dataManager) {
        return dataManager.executeLocal(this);
      }
      return DataUtil.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument');
    };
    /**
     * Creates deep copy of the Query object.
     */
    Query.prototype.clone = function () {
      var cloned = new Query();
      cloned.queries = this.queries.slice(0);
      cloned.key = this.key;
      cloned.isChild = this.isChild;
      cloned.dataManager = this.dataManager;
      cloned.fromTable = this.fromTable;
      cloned.params = this.params.slice(0);
      cloned.expands = this.expands.slice(0);
      cloned.sortedColumns = this.sortedColumns.slice(0);
      cloned.groupedColumns = this.groupedColumns.slice(0);
      cloned.subQuerySelector = this.subQuerySelector;
      cloned.subQuery = this.subQuery;
      cloned.fKey = this.fKey;
      cloned.isCountRequired = this.isCountRequired;
      cloned.distincts = this.distincts.slice(0);
      cloned.lazyLoad = this.lazyLoad.slice(0);
      return cloned;
    };
    /**
     * Specifies the name of table to retrieve data in query execution.
     *
     * @param  {string} tableName - Defines the table name.
     */
    Query.prototype.from = function (tableName) {
      this.fromTable = tableName;
      return this;
    };
    /**
     * Adds additional parameter which will be sent along with the request which will be generated while DataManager execute.
     *
     * @param  {string} key - Defines the key of additional parameter.
     * @param  {Function|string} value - Defines the value for the key.
     */
    Query.prototype.addParams = function (key, value) {
      if (typeof value === 'function') {
        this.params.push({
          key: key,
          fn: value
        });
      } else {
        this.params.push({
          key: key,
          value: value
        });
      }
      return this;
    };
    /**
     * @param fields
     * @hidden
     */
    Query.prototype.distinct = function (fields) {
      if (typeof fields === 'string') {
        this.distincts = [].slice.call([fields], 0);
      } else {
        this.distincts = fields.slice(0);
      }
      return this;
    };
    /**
     * Expands the related table.
     *
     * @param  {string|Object[]} tables
     */
    Query.prototype.expand = function (tables) {
      if (typeof tables === 'string') {
        this.expands = [].slice.call([tables], 0);
      } else {
        this.expands = tables.slice(0);
      }
      return this;
    };
    /**
     * Filter data with given filter criteria.
     *
     * @param {string|Predicate} fieldName - Defines the column field or Predicate.
     * @param {string} operator - Defines the operator how to filter data.
     * @param {string|number|boolean} value - Defines the values to match with data.
     * @param {boolean} ignoreCase - If ignore case set to false, then filter data with exact match or else
     * filter data with case insensitive.
     * @param ignoreAccent
     * @param matchCase
     */
    Query.prototype.where = function (fieldName, operator, value, ignoreCase, ignoreAccent, matchCase) {
      operator = operator ? operator.toLowerCase() : null;
      var predicate = null;
      if (typeof fieldName === 'string') {
        predicate = new Predicate(fieldName, operator, value, ignoreCase, ignoreAccent, matchCase);
      } else if (fieldName instanceof Predicate) {
        predicate = fieldName;
      }
      this.queries.push({
        fn: 'onWhere',
        e: predicate
      });
      return this;
    };
    /**
     * Search data with given search criteria.
     *
     * @param {string|number|boolean} searchKey - Defines the search key.
     * @param {string|string[]} fieldNames - Defines the collection of column fields.
     * @param {string} operator - Defines the operator how to search data.
     * @param {boolean} ignoreCase - If ignore case set to false, then filter data with exact match or else
     * filter data with case insensitive.
     * @param ignoreAccent
     */
    Query.prototype.search = function (searchKey, fieldNames, operator, ignoreCase, ignoreAccent) {
      if (typeof fieldNames === 'string') {
        fieldNames = [fieldNames];
      }
      if (!operator || operator === 'none') {
        operator = 'contains';
      }
      var comparer = DataUtil.fnOperators[operator];
      this.queries.push({
        fn: 'onSearch',
        e: {
          fieldNames: fieldNames,
          operator: operator,
          searchKey: searchKey,
          ignoreCase: ignoreCase,
          ignoreAccent: ignoreAccent,
          comparer: comparer
        }
      });
      return this;
    };
    /**
     * Sort the data with given sort criteria.
     * By default, sort direction is ascending.
     *
     * @param {string|string[]} fieldName - Defines the single or collection of column fields.
     * @param {string|Function} comparer - Defines the sort direction or custom sort comparer function.
     * @param isFromGroup
     */
    Query.prototype.sortBy = function (fieldName, comparer, isFromGroup) {
      return this.sortByForeignKey(fieldName, comparer, isFromGroup);
    };
    /**
     * Sort the data with given sort criteria.
     * By default, sort direction is ascending.
     *
     * @param {string|string[]} fieldName - Defines the single or collection of column fields.
     * @param {string|Function} comparer - Defines the sort direction or custom sort comparer function.
     * @param isFromGroup
     * @param {string} direction - Defines the sort direction .
     */
    Query.prototype.sortByForeignKey = function (fieldName, comparer, isFromGroup, direction) {
      var order = !sf.base.isNullOrUndefined(direction) ? direction : 'ascending';
      var sorts;
      var temp;
      if (typeof fieldName === 'string' && DataUtil.endsWith(fieldName.toLowerCase(), ' desc')) {
        fieldName = fieldName.replace(/ desc$/i, '');
        comparer = 'descending';
      }
      if (!comparer || typeof comparer === 'string') {
        order = comparer ? comparer.toLowerCase() : 'ascending';
        comparer = DataUtil.fnSort(comparer);
      }
      if (isFromGroup) {
        sorts = Query.filterQueries(this.queries, 'onSortBy');
        for (var i = 0; i < sorts.length; i++) {
          temp = sorts[i].e.fieldName;
          if (typeof temp === 'string') {
            if (temp === fieldName) {
              return this;
            }
          } else if (temp instanceof Array) {
            for (var j = 0; j < temp.length; j++) {
              if (temp[j] === fieldName || fieldName.toLowerCase() === temp[j] + ' desc') {
                return this;
              }
            }
          }
        }
      }
      this.queries.push({
        fn: 'onSortBy',
        e: {
          fieldName: fieldName,
          comparer: comparer,
          direction: order
        }
      });
      return this;
    };
    /**
     * Sorts data in descending order.
     *
     * @param  {string} fieldName - Defines the column field.
     */
    Query.prototype.sortByDesc = function (fieldName) {
      return this.sortBy(fieldName, 'descending');
    };
    /**
     * Groups data with the given field name.
     *
     * @param {string} fieldName - Defines the column field.
     * @param fn
     * @param format
     */
    Query.prototype.group = function (fieldName, fn, format) {
      this.sortBy(fieldName, null, true);
      this.queries.push({
        fn: 'onGroup',
        e: {
          fieldName: fieldName,
          comparer: fn ? fn : null,
          format: format ? format : null
        }
      });
      return this;
    };
    /**
     * Gets data based on the given page index and size.
     *
     * @param  {number} pageIndex - Defines the current page index.
     * @param  {number} pageSize - Defines the no of records per page.
     */
    Query.prototype.page = function (pageIndex, pageSize) {
      this.queries.push({
        fn: 'onPage',
        e: {
          pageIndex: pageIndex,
          pageSize: pageSize
        }
      });
      return this;
    };
    /**
     * Gets data based on the given start and end index.
     *
     * @param  {number} start - Defines the start index of the datasource.
     * @param  {number} end - Defines the end index of the datasource.
     */
    Query.prototype.range = function (start, end) {
      this.queries.push({
        fn: 'onRange',
        e: {
          start: start,
          end: end
        }
      });
      return this;
    };
    /**
     * Gets data from the top of the data source based on given number of records count.
     *
     * @param  {number} nos - Defines the no of records to retrieve from datasource.
     */
    Query.prototype.take = function (nos) {
      this.queries.push({
        fn: 'onTake',
        e: {
          nos: nos
        }
      });
      return this;
    };
    /**
     * Skips data with given number of records count from the top of the data source.
     *
     * @param  {number} nos - Defines the no of records skip in the datasource.
     */
    Query.prototype.skip = function (nos) {
      this.queries.push({
        fn: 'onSkip',
        e: {
          nos: nos
        }
      });
      return this;
    };
    /**
     * Selects specified columns from the data source.
     *
     * @param  {string|string[]} fieldNames - Defines the collection of column fields.
     */
    Query.prototype.select = function (fieldNames) {
      if (typeof fieldNames === 'string') {
        fieldNames = [].slice.call([fieldNames], 0);
      }
      this.queries.push({
        fn: 'onSelect',
        e: {
          fieldNames: fieldNames
        }
      });
      return this;
    };
    /**
     * Gets the records in hierarchical relationship from two tables. It requires the foreign key to relate two tables.
     *
     * @param  {Query} query - Defines the query to relate two tables.
     * @param  {Function} selectorFn - Defines the custom function to select records.
     */
    Query.prototype.hierarchy = function (query, selectorFn) {
      this.subQuerySelector = selectorFn;
      this.subQuery = query;
      return this;
    };
    /**
     * Sets the foreign key which is used to get data from the related table.
     *
     * @param  {string} key - Defines the foreign key.
     */
    Query.prototype.foreignKey = function (key) {
      this.fKey = key;
      return this;
    };
    /**
     * It is used to get total number of records in the DataManager execution result.
     */
    Query.prototype.requiresCount = function () {
      this.isCountRequired = true;
      return this;
    };
    //type - sum, avg, min, max
    /**
     * Aggregate the data with given type and field name.
     *
     * @param  {string} type - Defines the aggregate type.
     * @param  {string} field - Defines the column field to aggregate.
     */
    Query.prototype.aggregate = function (type, field) {
      this.queries.push({
        fn: 'onAggregates',
        e: {
          field: field,
          type: type
        }
      });
      return this;
    };
    /**
     * Pass array of filterColumn query for performing filter operation.
     *
     * @param  {QueryOptions[]} queries
     * @param  {string} name
     * @hidden
     */
    Query.filterQueries = function (queries, name) {
      return queries.filter(function (q) {
        return q.fn === name;
      });
    };
    /**
     * To get the list of queries which is already filtered in current data source.
     *
     * @param  {Object[]} queries
     * @param  {string[]} singles
     * @hidden
     */
    Query.filterQueryLists = function (queries, singles) {
      var filtered = queries.filter(function (q) {
        return singles.indexOf(q.fn) !== -1;
      });
      var res = {};
      for (var i = 0; i < filtered.length; i++) {
        if (!res[filtered[i].fn]) {
          res[filtered[i].fn] = filtered[i].e;
        }
      }
      return res;
    };
    return Query;
  }();
  /**
   * Predicate class is used to generate complex filter criteria.
   * This will be used by DataManager to perform multiple filtering operation.
   */
  var Predicate = /** @class */function () {
    /**
     * Constructor for Predicate class.
     *
     * @param {string|Predicate} field
     * @param {string} operator
     * @param {string|number|boolean|Predicate|Predicate[]} value
     * @param {boolean=false} ignoreCase
     * @param ignoreAccent
     * @param {boolean} matchCase
     * @hidden
     */
    function Predicate(field, operator, value, ignoreCase, ignoreAccent, matchCase) {
      if (ignoreCase === void 0) {
        ignoreCase = false;
      }
      /** @hidden */
      this.ignoreAccent = false;
      /** @hidden */
      this.isComplex = false;
      if (typeof field === 'string') {
        this.field = field;
        this.operator = operator.toLowerCase();
        this.value = value;
        this.matchCase = matchCase;
        this.ignoreCase = ignoreCase;
        this.ignoreAccent = ignoreAccent;
        this.isComplex = false;
        this.comparer = DataUtil.fnOperators.processOperator(this.operator);
      } else if (field instanceof Predicate && value instanceof Predicate || value instanceof Array) {
        this.isComplex = true;
        this.condition = operator.toLowerCase();
        this.predicates = [field];
        this.matchCase = field.matchCase;
        this.ignoreCase = field.ignoreCase;
        this.ignoreAccent = field.ignoreAccent;
        if (value instanceof Array) {
          [].push.apply(this.predicates, value);
        } else {
          this.predicates.push(value);
        }
      }
      return this;
    }
    /**
     * Adds n-number of new predicates on existing predicate with “and” condition.
     *
     * @param  {Object[]} args - Defines the collection of predicates.
     */
    Predicate.and = function () {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate.combinePredicates([].slice.call(args, 0), 'and');
    };
    /**
     * Adds new predicate on existing predicate with “and” condition.
     *
     * @param {string} field - Defines the column field.
     * @param {string} operator - Defines the operator how to filter data.
     * @param {string} value - Defines the values to match with data.
     * @param {boolean} ignoreCase? - If ignore case set to false, then filter data with exact match or else
     * filter data with case insensitive.
     * @param ignoreCase
     * @param ignoreAccent
     */
    Predicate.prototype.and = function (field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate.combine(this, field, operator, value, 'and', ignoreCase, ignoreAccent);
    };
    /**
     * Adds n-number of new predicates on existing predicate with “or” condition.
     *
     * @param  {Object[]} args - Defines the collection of predicates.
     */
    Predicate.or = function () {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate.combinePredicates([].slice.call(args, 0), 'or');
    };
    /**
     * Adds new predicate on existing predicate with “or” condition.
     *
     * @param {string} field - Defines the column field.
     * @param {string} operator - Defines the operator how to filter data.
     * @param {string} value - Defines the values to match with data.
     * @param {boolean} ignoreCase? - If ignore case set to false, then filter data with exact match or else
     * filter data with case insensitive.
     * @param ignoreCase
     * @param ignoreAccent
     */
    Predicate.prototype.or = function (field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate.combine(this, field, operator, value, 'or', ignoreCase, ignoreAccent);
    };
    /**
     * Adds n-number of new predicates on existing predicate with “and not” condition.
     *
     * @param  {Object[]} args - Defines the collection of predicates.
     */
    Predicate.ornot = function () {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate.combinePredicates([].slice.call(args, 0), 'or not');
    };
    /**
     * Adds new predicate on existing predicate with “and not” condition.
     *
     * @param {string} field - Defines the column field.
     * @param {string} operator - Defines the operator how to filter data.
     * @param {string} value - Defines the values to match with data.
     * @param {boolean} ignoreCase? - If ignore case set to false, then filter data with exact match or else
     * filter data with case insensitive.
     * @param ignoreCase
     * @param ignoreAccent
     */
    Predicate.prototype.ornot = function (field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate.combine(this, field, operator, value, 'ornot', ignoreCase, ignoreAccent);
    };
    /**
     * Adds n-number of new predicates on existing predicate with “and not” condition.
     *
     * @param  {Object[]} args - Defines the collection of predicates.
     */
    Predicate.andnot = function () {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate.combinePredicates([].slice.call(args, 0), 'and not');
    };
    /**
     * Adds new predicate on existing predicate with “and not” condition.
     *
     * @param {string} field - Defines the column field.
     * @param {string} operator - Defines the operator how to filter data.
     * @param {string} value - Defines the values to match with data.
     * @param {boolean} ignoreCase? - If ignore case set to false, then filter data with exact match or else
     * filter data with case insensitive.
     * @param ignoreCase
     * @param ignoreAccent
     */
    Predicate.prototype.andnot = function (field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate.combine(this, field, operator, value, 'andnot', ignoreCase, ignoreAccent);
    };
    /**
     * Converts plain JavaScript object to Predicate object.
     *
     * @param  {Predicate[]|Predicate} json - Defines single or collection of Predicate.
     */
    Predicate.fromJson = function (json) {
      if (json instanceof Array) {
        var res = [];
        for (var i = 0, len = json.length; i < len; i++) {
          res.push(this.fromJSONData(json[i]));
        }
        return res;
      }
      var pred = json;
      return this.fromJSONData(pred);
    };
    /**
     * Validate the record based on the predicates.
     *
     * @param  {Object} record - Defines the datasource record.
     */
    Predicate.prototype.validate = function (record) {
      var predicate = this.predicates ? this.predicates : [];
      var ret;
      var isAnd;
      if (!this.isComplex && this.comparer) {
        if (this.condition && this.condition.indexOf('not') !== -1) {
          this.condition = this.condition.split('not')[0] === '' ? undefined : this.condition.split('not')[0];
          return !this.comparer.call(this, DataUtil.getObject(this.field, record), this.value, this.ignoreCase, this.ignoreAccent);
        } else {
          return this.comparer.call(this, DataUtil.getObject(this.field, record), this.value, this.ignoreCase, this.ignoreAccent);
        }
      }
      if (this.condition && this.condition.indexOf('not') !== -1) {
        isAnd = this.condition.indexOf('and') !== -1;
      } else {
        isAnd = this.condition === 'and';
      }
      for (var i = 0; i < predicate.length; i++) {
        if (i > 0 && this.condition && this.condition.indexOf('not') !== -1) {
          predicate[i].condition = predicate[i].condition ? predicate[i].condition + 'not' : 'not';
        }
        ret = predicate[i].validate(record);
        if (isAnd) {
          if (!ret) {
            return false;
          }
        } else {
          if (ret) {
            return true;
          }
        }
      }
      return isAnd;
    };
    /**
     * Converts predicates to plain JavaScript.
     * This method is uses Json stringify when serializing Predicate object.
     */
    Predicate.prototype.toJson = function () {
      var predicates;
      var p;
      if (this.isComplex) {
        predicates = [];
        p = this.predicates;
        for (var i = 0; i < p.length; i++) {
          predicates.push(p[i].toJson());
        }
      }
      return {
        isComplex: this.isComplex,
        field: this.field,
        operator: this.operator,
        value: this.value,
        ignoreCase: this.ignoreCase,
        ignoreAccent: this.ignoreAccent,
        condition: this.condition,
        predicates: predicates,
        matchCase: this.matchCase
      };
    };
    Predicate.combinePredicates = function (predicates, operator) {
      if (predicates.length === 1) {
        if (!(predicates[0] instanceof Array)) {
          return predicates[0];
        }
        predicates = predicates[0];
      }
      return new Predicate(predicates[0], operator, predicates.slice(1));
    };
    Predicate.combine = function (pred, field, operator, value, condition, ignoreCase, ignoreAccent) {
      if (field instanceof Predicate) {
        return Predicate[condition](pred, field);
      }
      if (typeof field === 'string') {
        return Predicate[condition](pred, new Predicate(field, operator, value, ignoreCase, ignoreAccent));
      }
      return DataUtil.throwError('Predicate - ' + condition + ' : invalid arguments');
    };
    Predicate.fromJSONData = function (json) {
      var preds = json.predicates || [];
      var len = preds.length;
      var predicates = [];
      var result;
      for (var i = 0; i < len; i++) {
        predicates.push(this.fromJSONData(preds[i]));
      }
      if (!json.isComplex) {
        result = new Predicate(json.field, json.operator, json.value, json.ignoreCase, json.ignoreAccent);
      } else {
        result = new Predicate(predicates[0], json.condition, predicates.slice(1));
      }
      return result;
    };
    return Predicate;
  }();

  /* eslint-disable valid-jsdoc */
  /* eslint-disable security/detect-object-injection */
  var consts = {
    GroupGuid: '{271bbba0-1ee7}'
  };
  /**
   * Data manager common utility methods.
   *
   * @hidden
   */
  var DataUtil = /** @class */function () {
    function DataUtil() {}
    /**
     * Returns the value by invoking the provided parameter function.
     * If the paramater is not of type function then it will be returned as it is.
     *
     * @param {Function|string|string[]|number} value
     * @param {Object} inst?
     * @param inst
     * @hidden
     */
    DataUtil.getValue = function (value, inst) {
      if (typeof value === 'function') {
        return value.call(inst || {});
      }
      return value;
    };
    /**
     * Returns true if the input string ends with given string.
     *
     * @param  {string} input
     * @param  {string} substr
     */
    DataUtil.endsWith = function (input, substr) {
      return input.slice && input.slice(-substr.length) === substr;
    };
    /**
     * Returns true if the input string not ends with given string.
     *
     * @param  {string} input
     * @param  {string} substr
     */
    DataUtil.notEndsWith = function (input, substr) {
      return input.slice && input.slice(-substr.length) !== substr;
    };
    /**
     * Returns true if the input string starts with given string.
     *
     * @param {string} str
     * @param {string} startstr
     * @param input
     * @param start
     */
    DataUtil.startsWith = function (input, start) {
      return input.slice(0, start.length) === start;
    };
    /**
     * Returns true if the input string not starts with given string.
     *
     * @param {string} str
     * @param {string} startstr
     * @param input
     * @param start
     */
    DataUtil.notStartsWith = function (input, start) {
      return input.slice(0, start.length) !== start;
    };
    /**
     * Returns true if the input string pattern(wildcard) matches with given string.
     *
     * @param {string} str
     * @param {string} startstr
     * @param input
     * @param pattern
     */
    DataUtil.wildCard = function (input, pattern) {
      var asteriskSplit;
      var optionalSplit;
      // special character allowed search
      if (pattern.indexOf('[') !== -1) {
        pattern = pattern.split('[').join('[[]');
      }
      if (pattern.indexOf('(') !== -1) {
        pattern = pattern.split('(').join('[(]');
      }
      if (pattern.indexOf(')') !== -1) {
        pattern = pattern.split(')').join('[)]');
      }
      if (pattern.indexOf('\\') !== -1) {
        pattern = pattern.split('\\').join('[\\\\]');
      }
      if (pattern.indexOf('*') !== -1) {
        if (pattern.charAt(0) !== '*') {
          pattern = '^' + pattern;
        }
        if (pattern.charAt(pattern.length - 1) !== '*') {
          pattern = pattern + '$';
        }
        asteriskSplit = pattern.split('*');
        for (var i = 0; i < asteriskSplit.length; i++) {
          if (asteriskSplit[i].indexOf('.') === -1) {
            asteriskSplit[i] = asteriskSplit[i] + '.*';
          } else {
            asteriskSplit[i] = asteriskSplit[i] + '*';
          }
        }
        pattern = asteriskSplit.join('');
      }
      if (pattern.indexOf('%3f') !== -1 || pattern.indexOf('?') !== -1) {
        optionalSplit = pattern.indexOf('%3f') !== -1 ? pattern.split('%3f') : pattern.split('?');
        pattern = optionalSplit.join('.');
      }
      // eslint-disable-next-line security/detect-non-literal-regexp
      var regexPattern = new RegExp(pattern, 'g');
      return regexPattern.test(input);
    };
    /**
     * Returns true if the input string pattern(like) matches with given string.
     *
     * @param {string} str
     * @param {string} startstr
     * @param input
     * @param pattern
     */
    DataUtil.like = function (input, pattern) {
      if (pattern.indexOf('%') !== -1) {
        if (pattern.charAt(0) === '%' && pattern.lastIndexOf('%') < 2) {
          pattern = pattern.substring(1, pattern.length);
          return DataUtil.startsWith(DataUtil.toLowerCase(input), DataUtil.toLowerCase(pattern));
        } else if (pattern.charAt(pattern.length - 1) === '%' && pattern.indexOf('%') > pattern.length - 3) {
          pattern = pattern.substring(0, pattern.length - 1);
          return DataUtil.endsWith(DataUtil.toLowerCase(input), DataUtil.toLowerCase(pattern));
        } else if (pattern.lastIndexOf('%') !== pattern.indexOf('%') && pattern.lastIndexOf('%') > pattern.indexOf('%') + 1) {
          pattern = pattern.substring(pattern.indexOf('%') + 1, pattern.lastIndexOf('%'));
          return input.indexOf(pattern) !== -1;
        } else {
          return input.indexOf(pattern) !== -1;
        }
      } else {
        return false;
      }
    };
    /**
     * To return the sorting function based on the string.
     *
     * @param  {string} order
     * @hidden
     */
    DataUtil.fnSort = function (order) {
      order = order ? DataUtil.toLowerCase(order) : 'ascending';
      if (order === 'ascending') {
        return this.fnAscending;
      }
      return this.fnDescending;
    };
    /**
     * Comparer function which is used to sort the data in ascending order.
     *
     * @param  {string|number} x
     * @param  {string|number} y
     * @returns number
     */
    DataUtil.fnAscending = function (x, y) {
      if (sf.base.isNullOrUndefined(x) && sf.base.isNullOrUndefined(y)) {
        return -1;
      }
      if (y === null || y === undefined) {
        return -1;
      }
      if (typeof x === 'string') {
        return x.localeCompare(y);
      }
      if (x === null || x === undefined) {
        return 1;
      }
      return x - y;
    };
    /**
     * Comparer function which is used to sort the data in descending order.
     *
     * @param  {string|number} x
     * @param  {string|number} y
     * @returns number
     */
    DataUtil.fnDescending = function (x, y) {
      if (sf.base.isNullOrUndefined(x) && sf.base.isNullOrUndefined(y)) {
        return -1;
      }
      if (y === null || y === undefined) {
        return 1;
      }
      if (typeof x === 'string') {
        return x.localeCompare(y) * -1;
      }
      if (x === null || x === undefined) {
        return -1;
      }
      return y - x;
    };
    DataUtil.extractFields = function (obj, fields) {
      var newObj = {};
      for (var i = 0; i < fields.length; i++) {
        newObj = this.setValue(fields[i], this.getObject(fields[i], obj), newObj);
      }
      return newObj;
    };
    /**
     * Select objects by given fields from jsonArray.
     *
     * @param  {Object[]} jsonArray
     * @param  {string[]} fields
     */
    DataUtil.select = function (jsonArray, fields) {
      var newData = [];
      for (var i = 0; i < jsonArray.length; i++) {
        newData.push(this.extractFields(jsonArray[i], fields));
      }
      return newData;
    };
    /**
     * Group the input data based on the field name.
     * It also performs aggregation of the grouped records based on the aggregates paramater.
     *
     * @param {Object[]} jsonArray
     * @param {string} field?
     * @param {Object[]} agg?
     * @param {number} level?
     * @param {Object[]} groupDs?
     * @param field
     * @param aggregates
     * @param level
     * @param groupDs
     * @param format
     * @param isLazyLoad
     */
    DataUtil.group = function (jsonArray, field, aggregates, level, groupDs, format, isLazyLoad) {
      level = level || 1;
      var jsonData = jsonArray;
      var guid = 'GroupGuid';
      if (jsonData.GroupGuid === consts[guid]) {
        var _loop_1 = function _loop_1(j) {
          if (!sf.base.isNullOrUndefined(groupDs)) {
            var indx = -1;
            var temp = groupDs.filter(function (e) {
              return e.key === jsonData[j].key;
            });
            indx = groupDs.indexOf(temp[0]);
            jsonData[j].items = this_1.group(jsonData[j].items, field, aggregates, jsonData.level + 1, groupDs[indx].items, format, isLazyLoad);
            jsonData[j].count = groupDs[indx].count;
          } else {
            jsonData[j].items = this_1.group(jsonData[j].items, field, aggregates, jsonData.level + 1, null, format, isLazyLoad);
            jsonData[j].count = jsonData[j].items.length;
          }
        };
        var this_1 = this;
        for (var j = 0; j < jsonData.length; j++) {
          _loop_1(j);
        }
        jsonData.childLevels += 1;
        return jsonData;
      }
      var grouped = {};
      var groupedArray = [];
      groupedArray.GroupGuid = consts[guid];
      groupedArray.level = level;
      groupedArray.childLevels = 0;
      groupedArray.records = jsonData;
      var _loop_2 = function _loop_2(i) {
        var val = this_2.getVal(jsonData, i, field);
        if (!sf.base.isNullOrUndefined(format)) {
          val = format(val, field);
        }
        if (!grouped[val]) {
          grouped[val] = {
            key: val,
            count: 0,
            items: [],
            aggregates: {},
            field: field
          };
          groupedArray.push(grouped[val]);
          if (!sf.base.isNullOrUndefined(groupDs)) {
            var tempObj = groupDs.filter(function (e) {
              return e.key === grouped[val].key;
            });
            grouped[val].count = tempObj[0].count;
          }
        }
        grouped[val].count = !sf.base.isNullOrUndefined(groupDs) ? grouped[val].count : grouped[val].count += 1;
        if (!isLazyLoad || isLazyLoad && aggregates.length) {
          grouped[val].items.push(jsonData[i]);
        }
      };
      var this_2 = this;
      for (var i = 0; i < jsonData.length; i++) {
        _loop_2(i);
      }
      if (aggregates && aggregates.length) {
        var _loop_3 = function _loop_3(i) {
          var res = {};
          var fn = void 0;
          var aggs = aggregates;
          for (var j = 0; j < aggregates.length; j++) {
            fn = DataUtil.aggregates[aggregates[j].type];
            if (!sf.base.isNullOrUndefined(groupDs)) {
              var temp = groupDs.filter(function (e) {
                return e.key === groupedArray[i].key;
              });
              if (fn) {
                res[aggs[j].field + ' - ' + aggs[j].type] = fn(temp[0].items, aggs[j].field);
              }
            } else {
              if (fn) {
                res[aggs[j].field + ' - ' + aggs[j].type] = fn(groupedArray[i].items, aggs[j].field);
              }
            }
          }
          groupedArray[i].aggregates = res;
        };
        for (var i = 0; i < groupedArray.length; i++) {
          _loop_3(i);
        }
      }
      if (isLazyLoad && groupedArray.length && aggregates.length) {
        for (var i = 0; i < groupedArray.length; i++) {
          groupedArray[i].items = [];
        }
      }
      return jsonData.length && groupedArray || jsonData;
    };
    /**
     * It is used to categorize the multiple items based on a specific field in jsonArray.
     * The hierarchical queries are commonly required when you use foreign key binding.
     *
     * @param {string} fKey
     * @param {string} from
     * @param {Object[]} source
     * @param {Group} lookup?
     * @param {string} pKey?
     * @param lookup
     * @param pKey
     * @hidden
     */
    DataUtil.buildHierarchy = function (fKey, from, source, lookup, pKey) {
      var i;
      var grp = {};
      var temp;
      if (lookup.result) {
        lookup = lookup.result;
      }
      if (lookup.GroupGuid) {
        this.throwError('DataManager: Do not have support Grouping in hierarchy');
      }
      for (i = 0; i < lookup.length; i++) {
        var fKeyData = this.getObject(fKey, lookup[i]);
        temp = grp[fKeyData] || (grp[fKeyData] = []);
        temp.push(lookup[i]);
      }
      for (i = 0; i < source.length; i++) {
        var fKeyData = this.getObject(pKey || fKey, source[i]);
        source[i][from] = grp[fKeyData];
      }
    };
    /**
     * The method used to get the field names which started with specified characters.
     *
     * @param {Object} obj
     * @param {string[]} fields?
     * @param {string} prefix?
     * @param fields
     * @param prefix
     * @hidden
     */
    DataUtil.getFieldList = function (obj, fields, prefix) {
      if (prefix === undefined) {
        prefix = '';
      }
      if (fields === undefined || fields === null) {
        return this.getFieldList(obj, [], prefix);
      }
      var copyObj = obj;
      var keys = Object.keys(obj);
      for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var prop = keys_1[_i];
        if (_typeof(copyObj[prop]) === 'object' && !(copyObj[prop] instanceof Array)) {
          this.getFieldList(copyObj[prop], fields, prefix + prop + '.');
        } else {
          fields.push(prefix + prop);
        }
      }
      return fields;
    };
    /**
     * Gets the value of the property in the given object.
     * The complex object can be accessed by providing the field names concatenated with dot(.).
     *
     * @param  {string} nameSpace - The name of the property to be accessed.
     * @param  {Object} from - Defines the source object.
     */
    DataUtil.getObject = function (nameSpace, from) {
      if (!nameSpace) {
        return from;
      }
      if (!from) {
        return undefined;
      }
      if (nameSpace.indexOf('.') === -1) {
        var lowerCaseNameSpace = nameSpace.charAt(0).toLowerCase() + nameSpace.slice(1);
        var upperCaseNameSpace = nameSpace.charAt(0).toUpperCase() + nameSpace.slice(1);
        if (!sf.base.isNullOrUndefined(from[nameSpace])) {
          return from[nameSpace];
        } else {
          if (!sf.base.isNullOrUndefined(from[lowerCaseNameSpace])) {
            return from[lowerCaseNameSpace];
          } else if (!sf.base.isNullOrUndefined(from[upperCaseNameSpace])) {
            return from[upperCaseNameSpace];
          } else {
            return null;
          }
        }
      }
      var value = from;
      var splits = nameSpace.split('.');
      for (var i = 0; i < splits.length; i++) {
        if (value == null) {
          break;
        }
        value = value[splits[i]];
        if (value === undefined) {
          var casing = splits[i].charAt(0).toUpperCase() + splits[i].slice(1);
          value = from[casing] || from[casing.charAt(0).toLowerCase() + casing.slice(1)] || null;
        }
        from = value;
      }
      return value;
    };
    /**
     * To set value for the nameSpace in desired object.
     *
     * @param {string} nameSpace - String value to the get the inner object.
     * @param {Object} value - Value that you need to set.
     * @param {Object} obj - Object to get the inner object value.
     * @return { [key: string]: Object; } | Object
     * @hidden
     */
    DataUtil.setValue = function (nameSpace, value, obj) {
      var keys = nameSpace.toString().split('.');
      var start = obj || {};
      var fromObj = start;
      var i;
      var length = keys.length;
      var key;
      for (i = 0; i < length; i++) {
        key = keys[i];
        if (i + 1 === length) {
          fromObj[key] = value === undefined ? undefined : value;
        } else if (sf.base.isNullOrUndefined(fromObj[key])) {
          fromObj[key] = {};
        }
        fromObj = fromObj[key];
      }
      return start;
    };
    /**
     * Sort the given data based on the field and comparer.
     *
     * @param  {Object[]} ds - Defines the input data.
     * @param  {string} field - Defines the field to be sorted.
     * @param  {Function} comparer - Defines the comparer function used to sort the records.
     */
    DataUtil.sort = function (ds, field, comparer) {
      if (ds.length <= 1) {
        return ds;
      }
      var middle = parseInt((ds.length / 2).toString(), 10);
      var left = ds.slice(0, middle);
      var right = ds.slice(middle);
      left = this.sort(left, field, comparer);
      right = this.sort(right, field, comparer);
      return this.merge(left, right, field, comparer);
    };
    DataUtil.ignoreDiacritics = function (value) {
      if (typeof value !== 'string') {
        return value;
      }
      var result = value.split('');
      var newValue = result.map(function (temp) {
        return temp in DataUtil.diacritics ? DataUtil.diacritics[temp] : temp;
      });
      return newValue.join('');
    };
    DataUtil.merge = function (left, right, fieldName, comparer) {
      var result = [];
      var current;
      while (left.length > 0 || right.length > 0) {
        if (left.length > 0 && right.length > 0) {
          if (comparer) {
            current = comparer(this.getVal(left, 0, fieldName), this.getVal(right, 0, fieldName), left[0], right[0]) <= 0 ? left : right;
          } else {
            current = left[0][fieldName] < left[0][fieldName] ? left : right;
          }
        } else {
          current = left.length > 0 ? left : right;
        }
        result.push(current.shift());
      }
      return result;
    };
    DataUtil.getVal = function (array, index, field) {
      return field ? this.getObject(field, array[index]) : array[index];
    };
    DataUtil.toLowerCase = function (val) {
      return val ? typeof val === 'string' ? val.toLowerCase() : val.toString() : val === 0 || val === false ? val.toString() : '';
    };
    /**
     * To perform the filter operation with specified adaptor and returns the result.
     *
     * @param {Object} adaptor
     * @param {string} fnName
     * @param {Object} param1?
     * @param {Object} param2?
     * @param param1
     * @param param2
     * @hidden
     */
    DataUtil.callAdaptorFunction = function (adaptor, fnName, param1, param2) {
      if (fnName in adaptor) {
        var res = adaptor[fnName](param1, param2);
        if (!sf.base.isNullOrUndefined(res)) {
          param1 = res;
        }
      }
      return param1;
    };
    DataUtil.getAddParams = function (adp, dm, query) {
      var req = {};
      DataUtil.callAdaptorFunction(adp, 'addParams', {
        dm: dm,
        query: query,
        params: query.params,
        reqParams: req
      });
      return req;
    };
    /**
     * Checks wheather the given input is a plain object or not.
     *
     * @param  {Object|Object[]} obj
     */
    DataUtil.isPlainObject = function (obj) {
      return !!obj && obj.constructor === Object;
    };
    /**
     * Returns true when the browser cross origin request.
     */
    DataUtil.isCors = function () {
      var xhr = null;
      var request = 'XMLHttpRequest';
      try {
        xhr = new window[request]();
      } catch (e) {
        // No exception handling
      }
      return !!xhr && 'withCredentials' in xhr;
    };
    /**
     * Generate random GUID value which will be prefixed with the given value.
     *
     * @param  {string} prefix
     */
    DataUtil.getGuid = function (prefix) {
      var hexs = '0123456789abcdef';
      var rand;
      return (prefix || '') + '00000000-0000-4000-0000-000000000000'.replace(/0/g, function (val, i) {
        if ('crypto' in window && 'getRandomValues' in crypto) {
          var arr = new Uint8Array(1);
          window.crypto.getRandomValues(arr);
          rand = arr[0] % 16 | 0;
        } else {
          rand = Math.random() * 16 | 0;
        }
        return hexs[i === 19 ? rand & 0x3 | 0x8 : rand];
      });
    };
    /**
     * Checks wheather the given value is null or not.
     *
     * @param  {string|Object} val
     * @returns boolean
     */
    DataUtil.isNull = function (val) {
      return val === undefined || val === null;
    };
    /**
     * To get the required items from collection of objects.
     *
     * @param  {Object[]} array
     * @param  {string} field
     * @param  {Function} comparer
     * @returns Object
     * @hidden
     */
    DataUtil.getItemFromComparer = function (array, field, comparer) {
      var keyVal;
      var current;
      var key;
      var i = 0;
      var castRequired = typeof DataUtil.getVal(array, 0, field) === 'string';
      if (array.length) {
        while (sf.base.isNullOrUndefined(keyVal) && i < array.length) {
          keyVal = DataUtil.getVal(array, i, field);
          key = array[i++];
        }
      }
      for (; i < array.length; i++) {
        current = DataUtil.getVal(array, i, field);
        if (sf.base.isNullOrUndefined(current)) {
          continue;
        }
        if (castRequired) {
          keyVal = +keyVal;
          current = +current;
        }
        if (comparer(keyVal, current) > 0) {
          keyVal = current;
          key = array[i];
        }
      }
      return key;
    };
    /**
     * To get distinct values of Array or Array of Objects.
     *
     * @param {Object[]} json
     * @param {string} field
     * @param fieldName
     * @param {boolean} requiresCompleteRecord
     * @returns Object[]
     * * distinct array of objects is return when requiresCompleteRecord set as true.
     * @hidden
     */
    DataUtil.distinct = function (json, fieldName, requiresCompleteRecord) {
      requiresCompleteRecord = sf.base.isNullOrUndefined(requiresCompleteRecord) ? false : requiresCompleteRecord;
      var result = [];
      var val;
      var tmp = {};
      json.forEach(function (data, index) {
        val = _typeof(json[index]) === 'object' ? DataUtil.getVal(json, index, fieldName) : json[index];
        if (!(val in tmp)) {
          result.push(!requiresCompleteRecord ? val : json[index]);
          tmp[val] = 1;
        }
      });
      return result;
    };
    /**
     * Process the given records based on the datamanager string.
     *
     * @param {string} datamanager
     * @param dm
     * @param {Object[]} records
     */
    DataUtil.processData = function (dm, records) {
      var query = this.prepareQuery(dm);
      var sampledata = new DataManager(records);
      if (dm.requiresCounts) {
        query.requiresCount();
      }
      /* eslint-disable @typescript-eslint/no-explicit-any */
      // tslint:disable-next-line:no-any
      var result = sampledata.executeLocal(query);
      /* eslint-enable @typescript-eslint/no-explicit-any */
      var returnValue = {
        result: dm.requiresCounts ? result.result : result,
        count: result.count,
        aggregates: JSON.stringify(result.aggregates)
      };
      return dm.requiresCounts ? returnValue : result;
    };
    DataUtil.prepareQuery = function (dm) {
      var _this = this;
      var query = new Query();
      if (dm.select) {
        query.select(dm.select);
      }
      if (dm.where) {
        var where = DataUtil.parse.parseJson(dm.where);
        where.filter(function (pred) {
          if (sf.base.isNullOrUndefined(pred.condition)) {
            query.where(pred.field, pred.operator, pred.value, pred.ignoreCase, pred.ignoreAccent);
          } else {
            var predicateList = [];
            if (pred.field) {
              predicateList.push(new Predicate(pred.field, pred.operator, pred.value, pred.ignoreCase, pred.ignoreAccent));
            } else {
              predicateList = predicateList.concat(_this.getPredicate(pred.predicates));
            }
            if (pred.condition === 'or') {
              query.where(Predicate.or(predicateList));
            } else if (pred.condition === 'and') {
              query.where(Predicate.and(predicateList));
            }
          }
        });
      }
      if (dm.search) {
        var search = DataUtil.parse.parseJson(dm.search);
        // tslint:disable-next-line:no-string-literal
        search.filter(function (e) {
          return query.search(e.key, e.fields, e['operator'],
          // tslint:disable-next-line:no-string-literal
          e['ignoreCase'], e['ignoreAccent']);
        });
      }
      if (dm.aggregates) {
        dm.aggregates.filter(function (e) {
          return query.aggregate(e.type, e.field);
        });
      }
      if (dm.sorted) {
        dm.sorted.filter(function (e) {
          return query.sortBy(e.name, e.direction);
        });
      }
      if (dm.skip) {
        query.skip(dm.skip);
      }
      if (dm.take) {
        query.take(dm.take);
      }
      if (dm.group) {
        dm.group.filter(function (grp) {
          return query.group(grp);
        });
      }
      return query;
    };
    DataUtil.getPredicate = function (pred) {
      var mainPred = [];
      for (var i = 0; i < pred.length; i++) {
        var e = pred[i];
        if (e.field) {
          mainPred.push(new Predicate(e.field, e.operator, e.value, e.ignoreCase, e.ignoreAccent));
        } else {
          var childPred = [];
          // tslint:disable-next-line:typedef
          var cpre = this.getPredicate(e.predicates);
          for (var _i = 0, _a = Object.keys(cpre); _i < _a.length; _i++) {
            var prop = _a[_i];
            childPred.push(cpre[prop]);
          }
          mainPred.push(e.condition === 'or' ? Predicate.or(childPred) : Predicate.and(childPred));
        }
      }
      return mainPred;
    };
    /**
     * Specifies the value which will be used to adjust the date value to server timezone.
     *
     * @default null
     */
    DataUtil.serverTimezoneOffset = null;
    /**
     * Species whether are not to be parsed with serverTimezoneOffset value.
     *
     * @hidden
     */
    DataUtil.timeZoneHandling = true;
    /**
     * Throw error with the given string as message.
     *
     * @param {string} er
     * @param error
     */
    DataUtil.throwError = function (error) {
      try {
        throw new Error(error);
      } catch (e) {
        // eslint-disable-next-line no-throw-literal
        throw e.message + '\n' + e.stack;
      }
    };
    DataUtil.aggregates = {
      /**
       * Calculate sum of the given field in the data.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      sum: function sum(ds, field) {
        var result = 0;
        var val;
        var castRequired = typeof DataUtil.getVal(ds, 0, field) !== 'number';
        for (var i = 0; i < ds.length; i++) {
          val = DataUtil.getVal(ds, i, field);
          if (!isNaN(val) && val !== null) {
            if (castRequired) {
              val = +val;
            }
            result += val;
          }
        }
        return result;
      },
      /**
       * Calculate average value of the given field in the data.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      average: function average(ds, field) {
        return DataUtil.aggregates.sum(ds, field) / ds.length;
      },
      /**
       * Returns the min value of the data based on the field.
       *
       * @param  {Object[]} ds
       * @param  {string|Function} field
       */
      min: function min(ds, field) {
        var comparer;
        if (typeof field === 'function') {
          comparer = field;
          field = null;
        }
        return DataUtil.getObject(field, DataUtil.getItemFromComparer(ds, field, comparer || DataUtil.fnAscending));
      },
      /**
       * Returns the max value of the data based on the field.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       * @returns number
       */
      max: function max(ds, field) {
        var comparer;
        if (typeof field === 'function') {
          comparer = field;
          field = null;
        }
        return DataUtil.getObject(field, DataUtil.getItemFromComparer(ds, field, comparer || DataUtil.fnDescending));
      },
      /**
       * Returns the total number of true value present in the data based on the given boolean field name.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      truecount: function truecount(ds, field) {
        return new DataManager(ds).executeLocal(new Query().where(field, 'equal', true, true)).length;
      },
      /**
       * Returns the total number of false value present in the data based on the given boolean field name.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      falsecount: function falsecount(ds, field) {
        return new DataManager(ds).executeLocal(new Query().where(field, 'equal', false, true)).length;
      },
      /**
       * Returns the length of the given data.
       *
       * @param {Object[]} ds
       * @param {string} field?
       * @param field
       * @returns number
       */
      count: function count(ds, field) {
        return ds.length;
      }
    };
    /**
     * Specifies the Object with filter operators.
     */
    DataUtil.operatorSymbols = {
      '<': 'lessthan',
      '>': 'greaterthan',
      '<=': 'lessthanorequal',
      '>=': 'greaterthanorequal',
      '==': 'equal',
      '!=': 'notequal',
      '*=': 'contains',
      '$=': 'endswith',
      '^=': 'startswith'
    };
    /**
     * Specifies the Object with filter operators which will be used for OData filter query generation.
     * * It will be used for date/number type filter query.
     */
    DataUtil.odBiOperator = {
      '<': ' lt ',
      '>': ' gt ',
      '<=': ' le ',
      '>=': ' ge ',
      '==': ' eq ',
      '!=': ' ne ',
      'lessthan': ' lt ',
      'lessthanorequal': ' le ',
      'greaterthan': ' gt ',
      'greaterthanorequal': ' ge ',
      'equal': ' eq ',
      'notequal': ' ne '
    };
    /**
     * Specifies the Object with filter operators which will be used for OData filter query generation.
     * It will be used for string type filter query.
     */
    DataUtil.odUniOperator = {
      '$=': 'endswith',
      '^=': 'startswith',
      '*=': 'substringof',
      'endswith': 'endswith',
      'startswith': 'startswith',
      'contains': 'substringof',
      'doesnotendwith': 'not endswith',
      'doesnotstartwith': 'not startswith',
      'doesnotcontain': 'not substringof',
      'wildcard': 'wildcard',
      'like': 'like'
    };
    /**
     * Specifies the Object with filter operators which will be used for ODataV4 filter query generation.
     * It will be used for string type filter query.
     */
    DataUtil.odv4UniOperator = {
      '$=': 'endswith',
      '^=': 'startswith',
      '*=': 'contains',
      'endswith': 'endswith',
      'startswith': 'startswith',
      'contains': 'contains',
      'doesnotendwith': 'not endswith',
      'doesnotstartwith': 'not startswith',
      'doesnotcontain': 'not contains',
      'wildcard': 'wildcard',
      'like': 'like'
    };
    DataUtil.diacritics = {
      "\u24B6": 'A',
      "\uFF21": 'A',
      "\xC0": 'A',
      "\xC1": 'A',
      "\xC2": 'A',
      "\u1EA6": 'A',
      "\u1EA4": 'A',
      "\u1EAA": 'A',
      "\u1EA8": 'A',
      "\xC3": 'A',
      "\u0100": 'A',
      "\u0102": 'A',
      "\u1EB0": 'A',
      "\u1EAE": 'A',
      "\u1EB4": 'A',
      "\u1EB2": 'A',
      "\u0226": 'A',
      "\u01E0": 'A',
      "\xC4": 'A',
      "\u01DE": 'A',
      "\u1EA2": 'A',
      "\xC5": 'A',
      "\u01FA": 'A',
      "\u01CD": 'A',
      "\u0200": 'A',
      "\u0202": 'A',
      "\u1EA0": 'A',
      "\u1EAC": 'A',
      "\u1EB6": 'A',
      "\u1E00": 'A',
      "\u0104": 'A',
      "\u023A": 'A',
      "\u2C6F": 'A',
      "\uA732": 'AA',
      "\xC6": 'AE',
      "\u01FC": 'AE',
      "\u01E2": 'AE',
      "\uA734": 'AO',
      "\uA736": 'AU',
      "\uA738": 'AV',
      "\uA73A": 'AV',
      "\uA73C": 'AY',
      "\u24B7": 'B',
      "\uFF22": 'B',
      "\u1E02": 'B',
      "\u1E04": 'B',
      "\u1E06": 'B',
      "\u0243": 'B',
      "\u0182": 'B',
      "\u0181": 'B',
      "\u24B8": 'C',
      "\uFF23": 'C',
      "\u0106": 'C',
      "\u0108": 'C',
      "\u010A": 'C',
      "\u010C": 'C',
      "\xC7": 'C',
      "\u1E08": 'C',
      "\u0187": 'C',
      "\u023B": 'C',
      "\uA73E": 'C',
      "\u24B9": 'D',
      "\uFF24": 'D',
      "\u1E0A": 'D',
      "\u010E": 'D',
      "\u1E0C": 'D',
      "\u1E10": 'D',
      "\u1E12": 'D',
      "\u1E0E": 'D',
      "\u0110": 'D',
      "\u018B": 'D',
      "\u018A": 'D',
      "\u0189": 'D',
      "\uA779": 'D',
      "\u01F1": 'DZ',
      "\u01C4": 'DZ',
      "\u01F2": 'Dz',
      "\u01C5": 'Dz',
      "\u24BA": 'E',
      "\uFF25": 'E',
      "\xC8": 'E',
      "\xC9": 'E',
      "\xCA": 'E',
      "\u1EC0": 'E',
      "\u1EBE": 'E',
      "\u1EC4": 'E',
      "\u1EC2": 'E',
      "\u1EBC": 'E',
      "\u0112": 'E',
      "\u1E14": 'E',
      "\u1E16": 'E',
      "\u0114": 'E',
      "\u0116": 'E',
      "\xCB": 'E',
      "\u1EBA": 'E',
      "\u011A": 'E',
      "\u0204": 'E',
      "\u0206": 'E',
      "\u1EB8": 'E',
      "\u1EC6": 'E',
      "\u0228": 'E',
      "\u1E1C": 'E',
      "\u0118": 'E',
      "\u1E18": 'E',
      "\u1E1A": 'E',
      "\u0190": 'E',
      "\u018E": 'E',
      "\u24BB": 'F',
      "\uFF26": 'F',
      "\u1E1E": 'F',
      "\u0191": 'F',
      "\uA77B": 'F',
      "\u24BC": 'G',
      "\uFF27": 'G',
      "\u01F4": 'G',
      "\u011C": 'G',
      "\u1E20": 'G',
      "\u011E": 'G',
      "\u0120": 'G',
      "\u01E6": 'G',
      "\u0122": 'G',
      "\u01E4": 'G',
      "\u0193": 'G',
      "\uA7A0": 'G',
      "\uA77D": 'G',
      "\uA77E": 'G',
      "\u24BD": 'H',
      "\uFF28": 'H',
      "\u0124": 'H',
      "\u1E22": 'H',
      "\u1E26": 'H',
      "\u021E": 'H',
      "\u1E24": 'H',
      "\u1E28": 'H',
      "\u1E2A": 'H',
      "\u0126": 'H',
      "\u2C67": 'H',
      "\u2C75": 'H',
      "\uA78D": 'H',
      "\u24BE": 'I',
      "\uFF29": 'I',
      "\xCC": 'I',
      "\xCD": 'I',
      "\xCE": 'I',
      "\u0128": 'I',
      "\u012A": 'I',
      "\u012C": 'I',
      "\u0130": 'I',
      "\xCF": 'I',
      "\u1E2E": 'I',
      "\u1EC8": 'I',
      "\u01CF": 'I',
      "\u0208": 'I',
      "\u020A": 'I',
      "\u1ECA": 'I',
      "\u012E": 'I',
      "\u1E2C": 'I',
      "\u0197": 'I',
      "\u24BF": 'J',
      "\uFF2A": 'J',
      "\u0134": 'J',
      "\u0248": 'J',
      "\u24C0": 'K',
      "\uFF2B": 'K',
      "\u1E30": 'K',
      "\u01E8": 'K',
      "\u1E32": 'K',
      "\u0136": 'K',
      "\u1E34": 'K',
      "\u0198": 'K',
      "\u2C69": 'K',
      "\uA740": 'K',
      "\uA742": 'K',
      "\uA744": 'K',
      "\uA7A2": 'K',
      "\u24C1": 'L',
      "\uFF2C": 'L',
      "\u013F": 'L',
      "\u0139": 'L',
      "\u013D": 'L',
      "\u1E36": 'L',
      "\u1E38": 'L',
      "\u013B": 'L',
      "\u1E3C": 'L',
      "\u1E3A": 'L',
      "\u0141": 'L',
      "\u023D": 'L',
      "\u2C62": 'L',
      "\u2C60": 'L',
      "\uA748": 'L',
      "\uA746": 'L',
      "\uA780": 'L',
      "\u01C7": 'LJ',
      "\u01C8": 'Lj',
      "\u24C2": 'M',
      "\uFF2D": 'M',
      "\u1E3E": 'M',
      "\u1E40": 'M',
      "\u1E42": 'M',
      "\u2C6E": 'M',
      "\u019C": 'M',
      "\u24C3": 'N',
      "\uFF2E": 'N',
      "\u01F8": 'N',
      "\u0143": 'N',
      "\xD1": 'N',
      "\u1E44": 'N',
      "\u0147": 'N',
      "\u1E46": 'N',
      "\u0145": 'N',
      "\u1E4A": 'N',
      "\u1E48": 'N',
      "\u0220": 'N',
      "\u019D": 'N',
      "\uA790": 'N',
      "\uA7A4": 'N',
      "\u01CA": 'NJ',
      "\u01CB": 'Nj',
      "\u24C4": 'O',
      "\uFF2F": 'O',
      "\xD2": 'O',
      "\xD3": 'O',
      "\xD4": 'O',
      "\u1ED2": 'O',
      "\u1ED0": 'O',
      "\u1ED6": 'O',
      "\u1ED4": 'O',
      "\xD5": 'O',
      "\u1E4C": 'O',
      "\u022C": 'O',
      "\u1E4E": 'O',
      "\u014C": 'O',
      "\u1E50": 'O',
      "\u1E52": 'O',
      "\u014E": 'O',
      "\u022E": 'O',
      "\u0230": 'O',
      "\xD6": 'O',
      "\u022A": 'O',
      "\u1ECE": 'O',
      "\u0150": 'O',
      "\u01D1": 'O',
      "\u020C": 'O',
      "\u020E": 'O',
      "\u01A0": 'O',
      "\u1EDC": 'O',
      "\u1EDA": 'O',
      "\u1EE0": 'O',
      "\u1EDE": 'O',
      "\u1EE2": 'O',
      "\u1ECC": 'O',
      "\u1ED8": 'O',
      "\u01EA": 'O',
      "\u01EC": 'O',
      "\xD8": 'O',
      "\u01FE": 'O',
      "\u0186": 'O',
      "\u019F": 'O',
      "\uA74A": 'O',
      "\uA74C": 'O',
      "\u01A2": 'OI',
      "\uA74E": 'OO',
      "\u0222": 'OU',
      "\u24C5": 'P',
      "\uFF30": 'P',
      "\u1E54": 'P',
      "\u1E56": 'P',
      "\u01A4": 'P',
      "\u2C63": 'P',
      "\uA750": 'P',
      "\uA752": 'P',
      "\uA754": 'P',
      "\u24C6": 'Q',
      "\uFF31": 'Q',
      "\uA756": 'Q',
      "\uA758": 'Q',
      "\u024A": 'Q',
      "\u24C7": 'R',
      "\uFF32": 'R',
      "\u0154": 'R',
      "\u1E58": 'R',
      "\u0158": 'R',
      "\u0210": 'R',
      "\u0212": 'R',
      "\u1E5A": 'R',
      "\u1E5C": 'R',
      "\u0156": 'R',
      "\u1E5E": 'R',
      "\u024C": 'R',
      "\u2C64": 'R',
      "\uA75A": 'R',
      "\uA7A6": 'R',
      "\uA782": 'R',
      "\u24C8": 'S',
      "\uFF33": 'S',
      "\u1E9E": 'S',
      "\u015A": 'S',
      "\u1E64": 'S',
      "\u015C": 'S',
      "\u1E60": 'S',
      "\u0160": 'S',
      "\u1E66": 'S',
      "\u1E62": 'S',
      "\u1E68": 'S',
      "\u0218": 'S',
      "\u015E": 'S',
      "\u2C7E": 'S',
      "\uA7A8": 'S',
      "\uA784": 'S',
      "\u24C9": 'T',
      "\uFF34": 'T',
      "\u1E6A": 'T',
      "\u0164": 'T',
      "\u1E6C": 'T',
      "\u021A": 'T',
      "\u0162": 'T',
      "\u1E70": 'T',
      "\u1E6E": 'T',
      "\u0166": 'T',
      "\u01AC": 'T',
      "\u01AE": 'T',
      "\u023E": 'T',
      "\uA786": 'T',
      "\uA728": 'TZ',
      "\u24CA": 'U',
      "\uFF35": 'U',
      "\xD9": 'U',
      "\xDA": 'U',
      "\xDB": 'U',
      "\u0168": 'U',
      "\u1E78": 'U',
      "\u016A": 'U',
      "\u1E7A": 'U',
      "\u016C": 'U',
      "\xDC": 'U',
      "\u01DB": 'U',
      "\u01D7": 'U',
      "\u01D5": 'U',
      "\u01D9": 'U',
      "\u1EE6": 'U',
      "\u016E": 'U',
      "\u0170": 'U',
      "\u01D3": 'U',
      "\u0214": 'U',
      "\u0216": 'U',
      "\u01AF": 'U',
      "\u1EEA": 'U',
      "\u1EE8": 'U',
      "\u1EEE": 'U',
      "\u1EEC": 'U',
      "\u1EF0": 'U',
      "\u1EE4": 'U',
      "\u1E72": 'U',
      "\u0172": 'U',
      "\u1E76": 'U',
      "\u1E74": 'U',
      "\u0244": 'U',
      "\u24CB": 'V',
      "\uFF36": 'V',
      "\u1E7C": 'V',
      "\u1E7E": 'V',
      "\u01B2": 'V',
      "\uA75E": 'V',
      "\u0245": 'V',
      "\uA760": 'VY',
      "\u24CC": 'W',
      "\uFF37": 'W',
      "\u1E80": 'W',
      "\u1E82": 'W',
      "\u0174": 'W',
      "\u1E86": 'W',
      "\u1E84": 'W',
      "\u1E88": 'W',
      "\u2C72": 'W',
      "\u24CD": 'X',
      "\uFF38": 'X',
      "\u1E8A": 'X',
      "\u1E8C": 'X',
      "\u24CE": 'Y',
      "\uFF39": 'Y',
      "\u1EF2": 'Y',
      "\xDD": 'Y',
      "\u0176": 'Y',
      "\u1EF8": 'Y',
      "\u0232": 'Y',
      "\u1E8E": 'Y',
      "\u0178": 'Y',
      "\u1EF6": 'Y',
      "\u1EF4": 'Y',
      "\u01B3": 'Y',
      "\u024E": 'Y',
      "\u1EFE": 'Y',
      "\u24CF": 'Z',
      "\uFF3A": 'Z',
      "\u0179": 'Z',
      "\u1E90": 'Z',
      "\u017B": 'Z',
      "\u017D": 'Z',
      "\u1E92": 'Z',
      "\u1E94": 'Z',
      "\u01B5": 'Z',
      "\u0224": 'Z',
      "\u2C7F": 'Z',
      "\u2C6B": 'Z',
      "\uA762": 'Z',
      "\u24D0": 'a',
      "\uFF41": 'a',
      "\u1E9A": 'a',
      "\xE0": 'a',
      "\xE1": 'a',
      "\xE2": 'a',
      "\u1EA7": 'a',
      "\u1EA5": 'a',
      "\u1EAB": 'a',
      "\u1EA9": 'a',
      "\xE3": 'a',
      "\u0101": 'a',
      "\u0103": 'a',
      "\u1EB1": 'a',
      "\u1EAF": 'a',
      "\u1EB5": 'a',
      "\u1EB3": 'a',
      "\u0227": 'a',
      "\u01E1": 'a',
      "\xE4": 'a',
      "\u01DF": 'a',
      "\u1EA3": 'a',
      "\xE5": 'a',
      "\u01FB": 'a',
      "\u01CE": 'a',
      "\u0201": 'a',
      "\u0203": 'a',
      "\u1EA1": 'a',
      "\u1EAD": 'a',
      "\u1EB7": 'a',
      "\u1E01": 'a',
      "\u0105": 'a',
      "\u2C65": 'a',
      "\u0250": 'a',
      "\uA733": 'aa',
      "\xE6": 'ae',
      "\u01FD": 'ae',
      "\u01E3": 'ae',
      "\uA735": 'ao',
      "\uA737": 'au',
      "\uA739": 'av',
      "\uA73B": 'av',
      "\uA73D": 'ay',
      "\u24D1": 'b',
      "\uFF42": 'b',
      "\u1E03": 'b',
      "\u1E05": 'b',
      "\u1E07": 'b',
      "\u0180": 'b',
      "\u0183": 'b',
      "\u0253": 'b',
      "\u24D2": 'c',
      "\uFF43": 'c',
      "\u0107": 'c',
      "\u0109": 'c',
      "\u010B": 'c',
      "\u010D": 'c',
      "\xE7": 'c',
      "\u1E09": 'c',
      "\u0188": 'c',
      "\u023C": 'c',
      "\uA73F": 'c',
      "\u2184": 'c',
      "\u24D3": 'd',
      "\uFF44": 'd',
      "\u1E0B": 'd',
      "\u010F": 'd',
      "\u1E0D": 'd',
      "\u1E11": 'd',
      "\u1E13": 'd',
      "\u1E0F": 'd',
      "\u0111": 'd',
      "\u018C": 'd',
      "\u0256": 'd',
      "\u0257": 'd',
      "\uA77A": 'd',
      "\u01F3": 'dz',
      "\u01C6": 'dz',
      "\u24D4": 'e',
      "\uFF45": 'e',
      "\xE8": 'e',
      "\xE9": 'e',
      "\xEA": 'e',
      "\u1EC1": 'e',
      "\u1EBF": 'e',
      "\u1EC5": 'e',
      "\u1EC3": 'e',
      "\u1EBD": 'e',
      "\u0113": 'e',
      "\u1E15": 'e',
      "\u1E17": 'e',
      "\u0115": 'e',
      "\u0117": 'e',
      "\xEB": 'e',
      "\u1EBB": 'e',
      "\u011B": 'e',
      "\u0205": 'e',
      "\u0207": 'e',
      "\u1EB9": 'e',
      "\u1EC7": 'e',
      "\u0229": 'e',
      "\u1E1D": 'e',
      "\u0119": 'e',
      "\u1E19": 'e',
      "\u1E1B": 'e',
      "\u0247": 'e',
      "\u025B": 'e',
      "\u01DD": 'e',
      "\u24D5": 'f',
      "\uFF46": 'f',
      "\u1E1F": 'f',
      "\u0192": 'f',
      "\uA77C": 'f',
      "\u24D6": 'g',
      "\uFF47": 'g',
      "\u01F5": 'g',
      "\u011D": 'g',
      "\u1E21": 'g',
      "\u011F": 'g',
      "\u0121": 'g',
      "\u01E7": 'g',
      "\u0123": 'g',
      "\u01E5": 'g',
      "\u0260": 'g',
      "\uA7A1": 'g',
      "\u1D79": 'g',
      "\uA77F": 'g',
      "\u24D7": 'h',
      "\uFF48": 'h',
      "\u0125": 'h',
      "\u1E23": 'h',
      "\u1E27": 'h',
      "\u021F": 'h',
      "\u1E25": 'h',
      "\u1E29": 'h',
      "\u1E2B": 'h',
      "\u1E96": 'h',
      "\u0127": 'h',
      "\u2C68": 'h',
      "\u2C76": 'h',
      "\u0265": 'h',
      "\u0195": 'hv',
      "\u24D8": 'i',
      "\uFF49": 'i',
      "\xEC": 'i',
      "\xED": 'i',
      "\xEE": 'i',
      "\u0129": 'i',
      "\u012B": 'i',
      "\u012D": 'i',
      "\xEF": 'i',
      "\u1E2F": 'i',
      "\u1EC9": 'i',
      "\u01D0": 'i',
      "\u0209": 'i',
      "\u020B": 'i',
      "\u1ECB": 'i',
      "\u012F": 'i',
      "\u1E2D": 'i',
      "\u0268": 'i',
      "\u0131": 'i',
      "\u24D9": 'j',
      "\uFF4A": 'j',
      "\u0135": 'j',
      "\u01F0": 'j',
      "\u0249": 'j',
      "\u24DA": 'k',
      "\uFF4B": 'k',
      "\u1E31": 'k',
      "\u01E9": 'k',
      "\u1E33": 'k',
      "\u0137": 'k',
      "\u1E35": 'k',
      "\u0199": 'k',
      "\u2C6A": 'k',
      "\uA741": 'k',
      "\uA743": 'k',
      "\uA745": 'k',
      "\uA7A3": 'k',
      "\u24DB": 'l',
      "\uFF4C": 'l',
      "\u0140": 'l',
      "\u013A": 'l',
      "\u013E": 'l',
      "\u1E37": 'l',
      "\u1E39": 'l',
      "\u013C": 'l',
      "\u1E3D": 'l',
      "\u1E3B": 'l',
      "\u017F": 'l',
      "\u0142": 'l',
      "\u019A": 'l',
      "\u026B": 'l',
      "\u2C61": 'l',
      "\uA749": 'l',
      "\uA781": 'l',
      "\uA747": 'l',
      "\u01C9": 'lj',
      "\u24DC": 'm',
      "\uFF4D": 'm',
      "\u1E3F": 'm',
      "\u1E41": 'm',
      "\u1E43": 'm',
      "\u0271": 'm',
      "\u026F": 'm',
      "\u24DD": 'n',
      "\uFF4E": 'n',
      "\u01F9": 'n',
      "\u0144": 'n',
      "\xF1": 'n',
      "\u1E45": 'n',
      "\u0148": 'n',
      "\u1E47": 'n',
      "\u0146": 'n',
      "\u1E4B": 'n',
      "\u1E49": 'n',
      "\u019E": 'n',
      "\u0272": 'n',
      "\u0149": 'n',
      "\uA791": 'n',
      "\uA7A5": 'n',
      "\u01CC": 'nj',
      "\u24DE": 'o',
      "\uFF4F": 'o',
      "\xF2": 'o',
      "\xF3": 'o',
      "\xF4": 'o',
      "\u1ED3": 'o',
      "\u1ED1": 'o',
      "\u1ED7": 'o',
      "\u1ED5": 'o',
      "\xF5": 'o',
      "\u1E4D": 'o',
      "\u022D": 'o',
      "\u1E4F": 'o',
      "\u014D": 'o',
      "\u1E51": 'o',
      "\u1E53": 'o',
      "\u014F": 'o',
      "\u022F": 'o',
      "\u0231": 'o',
      "\xF6": 'o',
      "\u022B": 'o',
      "\u1ECF": 'o',
      "\u0151": 'o',
      "\u01D2": 'o',
      "\u020D": 'o',
      "\u020F": 'o',
      "\u01A1": 'o',
      "\u1EDD": 'o',
      "\u1EDB": 'o',
      "\u1EE1": 'o',
      "\u1EDF": 'o',
      "\u1EE3": 'o',
      "\u1ECD": 'o',
      "\u1ED9": 'o',
      "\u01EB": 'o',
      "\u01ED": 'o',
      "\xF8": 'o',
      "\u01FF": 'o',
      "\u0254": 'o',
      "\uA74B": 'o',
      "\uA74D": 'o',
      "\u0275": 'o',
      "\u01A3": 'oi',
      "\u0223": 'ou',
      "\uA74F": 'oo',
      "\u24DF": 'p',
      "\uFF50": 'p',
      "\u1E55": 'p',
      "\u1E57": 'p',
      "\u01A5": 'p',
      "\u1D7D": 'p',
      "\uA751": 'p',
      "\uA753": 'p',
      "\uA755": 'p',
      "\u24E0": 'q',
      "\uFF51": 'q',
      "\u024B": 'q',
      "\uA757": 'q',
      "\uA759": 'q',
      "\u24E1": 'r',
      "\uFF52": 'r',
      "\u0155": 'r',
      "\u1E59": 'r',
      "\u0159": 'r',
      "\u0211": 'r',
      "\u0213": 'r',
      "\u1E5B": 'r',
      "\u1E5D": 'r',
      "\u0157": 'r',
      "\u1E5F": 'r',
      "\u024D": 'r',
      "\u027D": 'r',
      "\uA75B": 'r',
      "\uA7A7": 'r',
      "\uA783": 'r',
      "\u24E2": 's',
      "\uFF53": 's',
      "\xDF": 's',
      "\u015B": 's',
      "\u1E65": 's',
      "\u015D": 's',
      "\u1E61": 's',
      "\u0161": 's',
      "\u1E67": 's',
      "\u1E63": 's',
      "\u1E69": 's',
      "\u0219": 's',
      "\u015F": 's',
      "\u023F": 's',
      "\uA7A9": 's',
      "\uA785": 's',
      "\u1E9B": 's',
      "\u24E3": 't',
      "\uFF54": 't',
      "\u1E6B": 't',
      "\u1E97": 't',
      "\u0165": 't',
      "\u1E6D": 't',
      "\u021B": 't',
      "\u0163": 't',
      "\u1E71": 't',
      "\u1E6F": 't',
      "\u0167": 't',
      "\u01AD": 't',
      "\u0288": 't',
      "\u2C66": 't',
      "\uA787": 't',
      "\uA729": 'tz',
      "\u24E4": 'u',
      "\uFF55": 'u',
      "\xF9": 'u',
      "\xFA": 'u',
      "\xFB": 'u',
      "\u0169": 'u',
      "\u1E79": 'u',
      "\u016B": 'u',
      "\u1E7B": 'u',
      "\u016D": 'u',
      "\xFC": 'u',
      "\u01DC": 'u',
      "\u01D8": 'u',
      "\u01D6": 'u',
      "\u01DA": 'u',
      "\u1EE7": 'u',
      "\u016F": 'u',
      "\u0171": 'u',
      "\u01D4": 'u',
      "\u0215": 'u',
      "\u0217": 'u',
      "\u01B0": 'u',
      "\u1EEB": 'u',
      "\u1EE9": 'u',
      "\u1EEF": 'u',
      "\u1EED": 'u',
      "\u1EF1": 'u',
      "\u1EE5": 'u',
      "\u1E73": 'u',
      "\u0173": 'u',
      "\u1E77": 'u',
      "\u1E75": 'u',
      "\u0289": 'u',
      "\u24E5": 'v',
      "\uFF56": 'v',
      "\u1E7D": 'v',
      "\u1E7F": 'v',
      "\u028B": 'v',
      "\uA75F": 'v',
      "\u028C": 'v',
      "\uA761": 'vy',
      "\u24E6": 'w',
      "\uFF57": 'w',
      "\u1E81": 'w',
      "\u1E83": 'w',
      "\u0175": 'w',
      "\u1E87": 'w',
      "\u1E85": 'w',
      "\u1E98": 'w',
      "\u1E89": 'w',
      "\u2C73": 'w',
      "\u24E7": 'x',
      "\uFF58": 'x',
      "\u1E8B": 'x',
      "\u1E8D": 'x',
      "\u24E8": 'y',
      "\uFF59": 'y',
      "\u1EF3": 'y',
      "\xFD": 'y',
      "\u0177": 'y',
      "\u1EF9": 'y',
      "\u0233": 'y',
      "\u1E8F": 'y',
      "\xFF": 'y',
      "\u1EF7": 'y',
      "\u1E99": 'y',
      "\u1EF5": 'y',
      "\u01B4": 'y',
      "\u024F": 'y',
      "\u1EFF": 'y',
      "\u24E9": 'z',
      "\uFF5A": 'z',
      "\u017A": 'z',
      "\u1E91": 'z',
      "\u017C": 'z',
      "\u017E": 'z',
      "\u1E93": 'z',
      "\u1E95": 'z',
      "\u01B6": 'z',
      "\u0225": 'z',
      "\u0240": 'z',
      "\u2C6C": 'z',
      "\uA763": 'z',
      "\u0386": "\u0391",
      "\u0388": "\u0395",
      "\u0389": "\u0397",
      "\u038A": "\u0399",
      "\u03AA": "\u0399",
      "\u038C": "\u039F",
      "\u038E": "\u03A5",
      "\u03AB": "\u03A5",
      "\u038F": "\u03A9",
      "\u03AC": "\u03B1",
      "\u03AD": "\u03B5",
      "\u03AE": "\u03B7",
      "\u03AF": "\u03B9",
      "\u03CA": "\u03B9",
      "\u0390": "\u03B9",
      "\u03CC": "\u03BF",
      "\u03CD": "\u03C5",
      "\u03CB": "\u03C5",
      "\u03B0": "\u03C5",
      "\u03C9": "\u03C9",
      "\u03C2": "\u03C3"
    };
    DataUtil.fnOperators = {
      /**
       * Returns true when the actual input is equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param {boolean} ignoreAccent?
       * @param ignoreCase
       * @param ignoreAccent
       */
      equal: function equal(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return DataUtil.toLowerCase(actual) === DataUtil.toLowerCase(expected);
        }
        return actual === expected;
      },
      /**
       * Returns true when the actual input is not equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      notequal: function notequal(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        return !DataUtil.fnOperators.equal(actual, expected, ignoreCase);
      },
      /**
       * Returns true when the actual input is less than to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      lessthan: function lessthan(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil.toLowerCase(actual) < DataUtil.toLowerCase(expected);
        }
        if (sf.base.isNullOrUndefined(actual)) {
          actual = undefined;
        }
        return actual < expected;
      },
      /**
       * Returns true when the actual input is greater than to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      greaterthan: function greaterthan(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil.toLowerCase(actual) > DataUtil.toLowerCase(expected);
        }
        return actual > expected;
      },
      /**
       * Returns true when the actual input is less than or equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      lessthanorequal: function lessthanorequal(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil.toLowerCase(actual) <= DataUtil.toLowerCase(expected);
        }
        if (sf.base.isNullOrUndefined(actual)) {
          actual = undefined;
        }
        return actual <= expected;
      },
      /**
       * Returns true when the actual input is greater than or equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      greaterthanorequal: function greaterthanorequal(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil.toLowerCase(actual) >= DataUtil.toLowerCase(expected);
        }
        return actual >= expected;
      },
      /**
       * Returns true when the actual input contains the given string.
       *
       * @param {string|number} actual
       * @param {string|number} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      contains: function contains(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return !sf.base.isNullOrUndefined(actual) && !sf.base.isNullOrUndefined(expected) && DataUtil.toLowerCase(actual).indexOf(DataUtil.toLowerCase(expected)) !== -1;
        }
        return !sf.base.isNullOrUndefined(actual) && !sf.base.isNullOrUndefined(expected) && actual.toString().indexOf(expected) !== -1;
      },
      /**
       * Returns true when the actual input not contains the given string.
       *
       * @param  {string|number} actual
       * @param  {string|number} expected
       * @param  {boolean} ignoreCase?
       */
      doesnotcontain: function doesnotcontain(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return !sf.base.isNullOrUndefined(actual) && !sf.base.isNullOrUndefined(expected) && DataUtil.toLowerCase(actual).indexOf(DataUtil.toLowerCase(expected)) === -1;
        }
        return !sf.base.isNullOrUndefined(actual) && !sf.base.isNullOrUndefined(expected) && actual.toString().indexOf(expected) === -1;
      },
      /**
       * Returns true when the given input value is not null.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isnotnull: function isnotnull(actual) {
        return actual !== null && actual !== undefined;
      },
      /**
       * Returns true when the given input value is null.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isnull: function isnull(actual) {
        return actual === null || actual === undefined;
      },
      /**
       * Returns true when the actual input starts with the given string
       *
       * @param {string} actual
       * @param {string} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      startswith: function startswith(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil.startsWith(DataUtil.toLowerCase(actual), DataUtil.toLowerCase(expected));
        }
        return actual && expected && DataUtil.startsWith(actual, expected);
      },
      /**
       * Returns true when the actual input not starts with the given string
       *
       * @param  {string} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      doesnotstartwith: function doesnotstartwith(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil.notStartsWith(DataUtil.toLowerCase(actual), DataUtil.toLowerCase(expected));
        }
        return actual && expected && DataUtil.notStartsWith(actual, expected);
      },
      /**
       * Returns true when the actual input like with the given string.
       *
       * @param  {string} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      like: function like(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil.like(DataUtil.toLowerCase(actual), DataUtil.toLowerCase(expected));
        }
        return actual && expected && DataUtil.like(actual, expected);
      },
      /**
       * Returns true when the given input value is empty.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isempty: function isempty(actual) {
        return actual === undefined || actual === '';
      },
      /**
       * Returns true when the given input value is not empty.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isnotempty: function isnotempty(actual) {
        return actual !== undefined && actual !== '';
      },
      /**
       * Returns true when the actual input pattern(wildcard) matches with the given string.
       *
       * @param  {string|Date} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      wildcard: function wildcard(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return (actual || typeof actual === 'boolean') && expected && _typeof(actual) !== 'object' && DataUtil.wildCard(DataUtil.toLowerCase(actual), DataUtil.toLowerCase(expected));
        }
        return (actual || typeof actual === 'boolean') && expected && DataUtil.wildCard(actual, expected);
      },
      /**
       * Returns true when the actual input ends with the given string.
       *
       * @param {string} actual
       * @param {string} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      endswith: function endswith(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil.endsWith(DataUtil.toLowerCase(actual), DataUtil.toLowerCase(expected));
        }
        return actual && expected && DataUtil.endsWith(actual, expected);
      },
      /**
       * Returns true when the actual input not ends with the given string.
       *
       * @param  {string} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      doesnotendwith: function doesnotendwith(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil.ignoreDiacritics(actual);
          expected = DataUtil.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil.notEndsWith(DataUtil.toLowerCase(actual), DataUtil.toLowerCase(expected));
        }
        return actual && expected && DataUtil.notEndsWith(actual, expected);
      },
      /**
       * It will return the filter operator based on the filter symbol.
       *
       * @param  {string} operator
       * @hidden
       */
      processSymbols: function processSymbols(operator) {
        var fnName = DataUtil.operatorSymbols[operator];
        if (fnName) {
          var fn = DataUtil.fnOperators[fnName];
          return fn;
        }
        return DataUtil.throwError('Query - Process Operator : Invalid operator');
      },
      /**
       * It will return the valid filter operator based on the specified operators.
       *
       * @param  {string} operator
       * @hidden
       */
      processOperator: function processOperator(operator) {
        var fn = DataUtil.fnOperators[operator];
        if (fn) {
          return fn;
        }
        return DataUtil.fnOperators.processSymbols(operator);
      }
    };
    /**
     * To perform the parse operation on JSON data, like convert to string from JSON or convert to JSON from string.
     */
    DataUtil.parse = {
      /**
       * Parse the given string to the plain JavaScript object.
       *
       * @param  {string|Object|Object[]} jsonText
       */
      parseJson: function parseJson(jsonText) {
        if (typeof jsonText === 'string' && (/^[\s]*\[|^[\s]*\{(.)+:/g.test(jsonText) || jsonText.indexOf('"') === -1)) {
          jsonText = JSON.parse(jsonText, DataUtil.parse.jsonReviver);
        } else if (jsonText instanceof Array) {
          DataUtil.parse.iterateAndReviveArray(jsonText);
        } else if (_typeof(jsonText) === 'object' && jsonText !== null) {
          DataUtil.parse.iterateAndReviveJson(jsonText);
        }
        return jsonText;
      },
      /**
       * It will perform on array of values.
       *
       * @param  {string[]|Object[]} array
       * @hidden
       */
      iterateAndReviveArray: function iterateAndReviveArray(array) {
        for (var i = 0; i < array.length; i++) {
          if (_typeof(array[i]) === 'object' && array[i] !== null) {
            DataUtil.parse.iterateAndReviveJson(array[i]);
            // eslint-disable-next-line no-useless-escape
          } else if (typeof array[i] === 'string' && (!/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(array[i]) || array[i].toString().indexOf('"') === -1)) {
            array[i] = DataUtil.parse.jsonReviver('', array[i]);
          } else {
            array[i] = DataUtil.parse.parseJson(array[i]);
          }
        }
      },
      /**
       * It will perform on JSON values
       *
       * @param  {JSON} json
       * @hidden
       */
      iterateAndReviveJson: function iterateAndReviveJson(json) {
        var value;
        var keys = Object.keys(json);
        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {
          var prop = keys_2[_i];
          if (DataUtil.startsWith(prop, '__')) {
            continue;
          }
          value = json[prop];
          if (_typeof(value) === 'object') {
            if (value instanceof Array) {
              DataUtil.parse.iterateAndReviveArray(value);
            } else if (value) {
              DataUtil.parse.iterateAndReviveJson(value);
            }
          } else {
            json[prop] = DataUtil.parse.jsonReviver(json[prop], value);
          }
        }
      },
      /**
       * It will perform on JSON values
       *
       * @param  {string} field
       * @param  {string|Date} value
       * @hidden
       */
      jsonReviver: function jsonReviver(field, value) {
        if (typeof value === 'string') {
          // eslint-disable-next-line security/detect-unsafe-regex
          var ms = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(value);
          var offSet = DataUtil.timeZoneHandling ? DataUtil.serverTimezoneOffset : null;
          if (ms) {
            return DataUtil.dateParse.toTimeZone(new Date(parseInt(ms[1], 10)), offSet, true);
            // eslint-disable-next-line no-useless-escape, security/detect-unsafe-regex
          } else if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(value)) {
            var isUTC = value.indexOf('Z') > -1 || value.indexOf('z') > -1;
            var arr = value.split(/[^0-9.]/);
            if (isUTC) {
              if (arr[5].indexOf('.') > -1) {
                var secondsMs = arr[5].split('.');
                arr[5] = secondsMs[0];
                arr[6] = new Date(value).getUTCMilliseconds().toString();
              } else {
                arr[6] = '00';
              }
              value = DataUtil.dateParse.toTimeZone(new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10), parseInt(arr[3], 10), parseInt(arr[4], 10), parseInt(arr[5] ? arr[5] : '00', 10), parseInt(arr[6], 10)), DataUtil.serverTimezoneOffset, false);
            } else {
              var utcFormat = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10), parseInt(arr[3], 10), parseInt(arr[4], 10), parseInt(arr[5] ? arr[5] : '00', 10));
              var hrs = parseInt(arr[6], 10);
              var mins = parseInt(arr[7], 10);
              if (isNaN(hrs) && isNaN(mins)) {
                return utcFormat;
              }
              if (value.indexOf('+') > -1) {
                utcFormat.setHours(utcFormat.getHours() - hrs, utcFormat.getMinutes() - mins);
              } else {
                utcFormat.setHours(utcFormat.getHours() + hrs, utcFormat.getMinutes() + mins);
              }
              value = DataUtil.dateParse.toTimeZone(utcFormat, DataUtil.serverTimezoneOffset, false);
            }
            if (DataUtil.serverTimezoneOffset == null) {
              value = DataUtil.dateParse.addSelfOffset(value);
            }
          }
        }
        return value;
      },
      /**
       * Check wheather the given value is JSON or not.
       *
       * @param  {Object[]} jsonData
       */
      isJson: function isJson(jsonData) {
        if (typeof jsonData[0] === 'string') {
          return jsonData;
        }
        return DataUtil.parse.parseJson(jsonData);
      },
      /**
       * Checks wheather the given value is GUID or not.
       *
       * @param  {string} value
       */
      isGuid: function isGuid(value) {
        // eslint-disable-next-line security/detect-unsafe-regex
        var regex = /[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i;
        var match = regex.exec(value);
        return match != null;
      },
      /**
       * The method used to replace the value based on the type.
       *
       * @param  {Object} value
       * @param  {boolean} stringify
       * @hidden
       */
      replacer: function replacer(value, stringify) {
        if (DataUtil.isPlainObject(value)) {
          return DataUtil.parse.jsonReplacer(value, stringify);
        }
        if (value instanceof Array) {
          return DataUtil.parse.arrayReplacer(value);
        }
        if (value instanceof Date) {
          return DataUtil.parse.jsonReplacer({
            val: value
          }, stringify).val;
        }
        return value;
      },
      /**
       * It will replace the JSON value.
       *
       * @param {string} key
       * @param {Object} val
       * @param stringify
       * @hidden
       */
      jsonReplacer: function jsonReplacer(val, stringify) {
        var value;
        var keys = Object.keys(val);
        for (var _i = 0, keys_3 = keys; _i < keys_3.length; _i++) {
          var prop = keys_3[_i];
          value = val[prop];
          if (!(value instanceof Date)) {
            continue;
          }
          var d = value;
          if (DataUtil.serverTimezoneOffset == null) {
            val[prop] = DataUtil.dateParse.toTimeZone(d, null).toJSON();
          } else {
            d = new Date(+d + DataUtil.serverTimezoneOffset * 3600000);
            val[prop] = DataUtil.dateParse.toTimeZone(DataUtil.dateParse.addSelfOffset(d), null).toJSON();
          }
        }
        return val;
      },
      /**
       * It will replace the Array of value.
       *
       * @param  {string} key
       * @param  {Object[]} val
       * @hidden
       */
      arrayReplacer: function arrayReplacer(val) {
        for (var i = 0; i < val.length; i++) {
          if (DataUtil.isPlainObject(val[i])) {
            val[i] = DataUtil.parse.jsonReplacer(val[i]);
          } else if (val[i] instanceof Date) {
            val[i] = DataUtil.parse.jsonReplacer({
              date: val[i]
            }).date;
          }
        }
        return val;
      },
      /**
       * It will replace the Date object with respective to UTC format value.
       *
       * @param  {string} key
       * @param  {any} value
       * @hidden
       */
      /* eslint-disable @typescript-eslint/no-explicit-any */
      /* tslint:disable-next-line:no-any */
      jsonDateReplacer: function jsonDateReplacer(key, value) {
        /* eslint-enable @typescript-eslint/no-explicit-any */
        if (key === 'value' && value) {
          if (typeof value === 'string') {
            // eslint-disable-next-line security/detect-unsafe-regex
            var ms = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(value);
            if (ms) {
              value = DataUtil.dateParse.toTimeZone(new Date(parseInt(ms[1], 10)), null, true);
              // eslint-disable-next-line no-useless-escape, security/detect-unsafe-regex
            } else if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(value)) {
              var arr = value.split(/[^0-9]/);
              value = DataUtil.dateParse.toTimeZone(new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10), parseInt(arr[3], 10), parseInt(arr[4], 10), parseInt(arr[5], 10)), null, true);
            }
          }
          if (value instanceof Date) {
            value = DataUtil.dateParse.addSelfOffset(value);
            if (DataUtil.serverTimezoneOffset === null) {
              return DataUtil.dateParse.toTimeZone(DataUtil.dateParse.addSelfOffset(value), null).toJSON();
            } else {
              value = DataUtil.dateParse.toTimeZone(value, value.getTimezoneOffset() / 60 - DataUtil.serverTimezoneOffset, false);
              return value.toJSON();
            }
          }
        }
        return value;
      }
    };
    /**
     * @hidden
     */
    DataUtil.dateParse = {
      addSelfOffset: function addSelfOffset(input) {
        return new Date(+input - input.getTimezoneOffset() * 60000);
      },
      toUTC: function toUTC(input) {
        return new Date(+input + input.getTimezoneOffset() * 60000);
      },
      toTimeZone: function toTimeZone(input, offset, utc) {
        if (offset === null) {
          return input;
        }
        var unix = utc ? DataUtil.dateParse.toUTC(input) : input;
        return new Date(+unix - offset * 3600000);
      },
      toLocalTime: function toLocalTime(input) {
        var datefn = input;
        var timeZone = -datefn.getTimezoneOffset();
        var differenceString = timeZone >= 0 ? '+' : '-';
        var localtimefn = function localtimefn(num) {
          var norm = Math.floor(Math.abs(num));
          return (norm < 10 ? '0' : '') + norm;
        };
        var val = datefn.getFullYear() + '-' + localtimefn(datefn.getMonth() + 1) + '-' + localtimefn(datefn.getDate()) + 'T' + localtimefn(datefn.getHours()) + ':' + localtimefn(datefn.getMinutes()) + ':' + localtimefn(datefn.getSeconds()) + differenceString + localtimefn(timeZone / 60) + ':' + localtimefn(timeZone % 60);
        return val;
      }
    };
    return DataUtil;
  }();
  var __extends = undefined && undefined.__extends || function () {
    var _extendStatics = function extendStatics(d, b) {
      _extendStatics = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics(d, b);
    };
    return function (d, b) {
      _extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var consts$1 = {
    GroupGuid: '{271bbba0-1ee7}'
  };
  /**
   * Adaptors are specific data source type aware interfaces that are used by DataManager to communicate with DataSource.
   * This is the base adaptor class that other adaptors can extend.
   *
   * @hidden
   */
  var Adaptor = /** @class */function () {
    /**
     * Constructor for Adaptor class
     *
     * @param {DataOptions} ds?
     * @param ds
     * @hidden
     * @returns aggregates
     */
    function Adaptor(ds) {
      // common options for all the adaptors
      this.options = {
        from: 'table',
        requestType: 'json',
        sortBy: 'sorted',
        select: 'select',
        skip: 'skip',
        group: 'group',
        take: 'take',
        search: 'search',
        count: 'requiresCounts',
        where: 'where',
        aggregates: 'aggregates',
        expand: 'expand'
      };
      /**
       * Specifies the type of adaptor.
       *
       * @default Adaptor
       */
      this.type = Adaptor;
      this.dataSource = ds;
      this.pvt = {};
    }
    /**
     * Returns the data from the query processing.
     *
     * @param {Object} data
     * @param {DataOptions} ds?
     * @param {Query} query?
     * @param {Request} xhr?
     * @param ds
     * @param query
     * @param xhr
     * @returns Object
     */
    Adaptor.prototype.processResponse = function (data, ds, query, xhr) {
      return data;
    };
    return Adaptor;
  }();
  /**
   * JsonAdaptor is used to process JSON data. It contains methods to process the given JSON data based on the queries.
   *
   * @hidden
   */
  var JsonAdaptor = /** @class */function (_super) {
    __extends(JsonAdaptor, _super);
    function JsonAdaptor() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Process the JSON data based on the provided queries.
     *
     * @param  {DataManager} dataManager
     * @param  {Query} query
     * @returns Object
     */
    JsonAdaptor.prototype.processQuery = function (dataManager, query) {
      var result = dataManager.dataSource.json.slice(0);
      var count = result.length;
      var countFlg = true;
      var ret;
      var key;
      var lazyLoad = {};
      var keyCount = 0;
      var group = [];
      var page;
      for (var i = 0; i < query.lazyLoad.length; i++) {
        keyCount++;
        lazyLoad[query.lazyLoad[i].key] = query.lazyLoad[i].value;
      }
      var agg = {};
      for (var i = 0; i < query.queries.length; i++) {
        key = query.queries[i];
        if ((key.fn === 'onPage' || key.fn === 'onGroup') && query.lazyLoad.length) {
          if (key.fn === 'onGroup') {
            group.push(key.e);
          }
          if (key.fn === 'onPage') {
            page = key.e;
          }
          continue;
        }
        ret = this[key.fn].call(this, result, key.e, query);
        if (key.fn === 'onAggregates') {
          agg[key.e.field + ' - ' + key.e.type] = ret;
        } else {
          result = ret !== undefined ? ret : result;
        }
        if (key.fn === 'onPage' || key.fn === 'onSkip' || key.fn === 'onTake' || key.fn === 'onRange') {
          countFlg = false;
        }
        if (countFlg) {
          count = result.length;
        }
      }
      if (keyCount) {
        var args = {
          query: query,
          lazyLoad: lazyLoad,
          result: result,
          group: group,
          page: page
        };
        var lazyLoadData = this.lazyLoadGroup(args);
        result = lazyLoadData.result;
        count = lazyLoadData.count;
      }
      if (query.isCountRequired) {
        result = {
          result: result,
          count: count,
          aggregates: agg
        };
      }
      return result;
    };
    /**
     * Perform lazy load grouping in JSON array based on the given query and lazy load details.
     *
     * @param  {LazyLoadGroupArgs} args
     */
    JsonAdaptor.prototype.lazyLoadGroup = function (args) {
      var count = 0;
      var agg = this.getAggregate(args.query);
      var result = args.result;
      if (!sf.base.isNullOrUndefined(args.lazyLoad.onDemandGroupInfo)) {
        var req = args.lazyLoad.onDemandGroupInfo;
        for (var i = req.where.length - 1; i >= 0; i--) {
          result = this.onWhere(result, req.where[i]);
        }
        if (args.group.length !== req.level) {
          var field = args.group[req.level].fieldName;
          result = DataUtil.group(result, field, agg, null, null, args.group[0].comparer, true);
        }
        count = result.length;
        var data = result;
        result = result.slice(req.skip);
        result = result.slice(0, req.take);
        if (args.group.length !== req.level) {
          this.formGroupResult(result, data);
        }
      } else {
        var field = args.group[0].fieldName;
        result = DataUtil.group(result, field, agg, null, null, args.group[0].comparer, true);
        count = result.length;
        var data = result;
        if (args.page) {
          result = this.onPage(result, args.page, args.query);
        }
        this.formGroupResult(result, data);
      }
      return {
        result: result,
        count: count
      };
    };
    JsonAdaptor.prototype.formGroupResult = function (result, data) {
      if (result.length && data.length) {
        var uid = 'GroupGuid';
        var childLevel = 'childLevels';
        var level = 'level';
        var records = 'records';
        result[uid] = data[uid];
        result[childLevel] = data[childLevel];
        result[level] = data[level];
        result[records] = data[records];
      }
      return result;
    };
    /**
     * Separate the aggregate query from the given queries
     *
     * @param  {Query} query
     */
    JsonAdaptor.prototype.getAggregate = function (query) {
      var aggQuery = Query.filterQueries(query.queries, 'onAggregates');
      var agg = [];
      if (aggQuery.length) {
        var tmp = void 0;
        for (var i = 0; i < aggQuery.length; i++) {
          tmp = aggQuery[i].e;
          agg.push({
            type: tmp.type,
            field: DataUtil.getValue(tmp.field, query)
          });
        }
      }
      return agg;
    };
    /**
     * Performs batch update in the JSON array which add, remove and update records.
     *
     * @param  {DataManager} dm
     * @param  {CrudOptions} changes
     * @param  {RemoteArgs} e
     */
    JsonAdaptor.prototype.batchRequest = function (dm, changes, e) {
      var i;
      var deletedRecordsLen = changes.deletedRecords.length;
      for (i = 0; i < changes.addedRecords.length; i++) {
        this.insert(dm, changes.addedRecords[i]);
      }
      for (i = 0; i < changes.changedRecords.length; i++) {
        this.update(dm, e.key, changes.changedRecords[i]);
      }
      for (i = 0; i < deletedRecordsLen; i++) {
        this.remove(dm, e.key, changes.deletedRecords[i]);
      }
      return changes;
    };
    /**
     * Performs filter operation with the given data and where query.
     *
     * @param {Object[]} ds
     * @param {{validate:Function}} e
     * @param e.validate
     */
    JsonAdaptor.prototype.onWhere = function (ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.filter(function (obj) {
        if (e) {
          return e.validate(obj);
        }
      });
    };
    /**
     * Returns aggregate function based on the aggregate type.
     *
     * @param {Object[]} ds
     * @param e
     * @param {string} } type
     * @param e.field
     * @param e.type
     */
    JsonAdaptor.prototype.onAggregates = function (ds, e) {
      var fn = DataUtil.aggregates[e.type];
      if (!ds || !fn || ds.length === 0) {
        return null;
      }
      return fn(ds, e.field);
    };
    /**
     * Performs search operation based on the given query.
     *
     * @param  {Object[]} ds
     * @param  {QueryOptions} e
     */
    JsonAdaptor.prototype.onSearch = function (ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      if (e.fieldNames.length === 0) {
        DataUtil.getFieldList(ds[0], e.fieldNames);
      }
      return ds.filter(function (obj) {
        for (var j = 0; j < e.fieldNames.length; j++) {
          if (e.comparer.call(obj, DataUtil.getObject(e.fieldNames[j], obj), e.searchKey, e.ignoreCase, e.ignoreAccent)) {
            return true;
          }
        }
        return false;
      });
    };
    /**
     * Sort the data with given direction and field.
     *
     * @param {Object[]} ds
     * @param e
     * @param {Object} b
     * @param e.comparer
     * @param e.fieldName
     * @param query
     */
    JsonAdaptor.prototype.onSortBy = function (ds, e, query) {
      if (!ds || !ds.length) {
        return ds;
      }
      var fnCompare;
      var field = DataUtil.getValue(e.fieldName, query);
      if (!field) {
        return ds.sort(e.comparer);
      }
      if (field instanceof Array) {
        field = field.slice(0);
        for (var i = field.length - 1; i >= 0; i--) {
          if (!field[i]) {
            continue;
          }
          fnCompare = e.comparer;
          if (DataUtil.endsWith(field[i], ' desc')) {
            fnCompare = DataUtil.fnSort('descending');
            field[i] = field[i].replace(' desc', '');
          }
          ds = DataUtil.sort(ds, field[i], fnCompare);
        }
        return ds;
      }
      return DataUtil.sort(ds, field, e.comparer);
    };
    /**
     * Group the data based on the given query.
     *
     * @param  {Object[]} ds
     * @param  {QueryOptions} e
     * @param  {Query} query
     */
    JsonAdaptor.prototype.onGroup = function (ds, e, query) {
      if (!ds || !ds.length) {
        return ds;
      }
      var agg = this.getAggregate(query);
      return DataUtil.group(ds, DataUtil.getValue(e.fieldName, query), agg, null, null, e.comparer);
    };
    /**
     * Retrieves records based on the given page index and size.
     *
     * @param {Object[]} ds
     * @param e
     * @param {number} } pageIndex
     * @param e.pageSize
     * @param {Query} query
     * @param e.pageIndex
     */
    JsonAdaptor.prototype.onPage = function (ds, e, query) {
      var size = DataUtil.getValue(e.pageSize, query);
      var start = (DataUtil.getValue(e.pageIndex, query) - 1) * size;
      var end = start + size;
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(start, end);
    };
    /**
     * Retrieves records based on the given start and end index from query.
     *
     * @param {Object[]} ds
     * @param e
     * @param {number} } end
     * @param e.start
     * @param e.end
     */
    JsonAdaptor.prototype.onRange = function (ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(DataUtil.getValue(e.start), DataUtil.getValue(e.end));
    };
    /**
     * Picks the given count of records from the top of the datasource.
     *
     * @param {Object[]} ds
     * @param {{nos:number}} e
     * @param e.nos
     */
    JsonAdaptor.prototype.onTake = function (ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(0, DataUtil.getValue(e.nos));
    };
    /**
     * Skips the given count of records from the data source.
     *
     * @param {Object[]} ds
     * @param {{nos:number}} e
     * @param e.nos
     */
    JsonAdaptor.prototype.onSkip = function (ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(DataUtil.getValue(e.nos));
    };
    /**
     * Selects specified columns from the data source.
     *
     * @param {Object[]} ds
     * @param {{fieldNames:string}} e
     * @param e.fieldNames
     */
    JsonAdaptor.prototype.onSelect = function (ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return DataUtil.select(ds, DataUtil.getValue(e.fieldNames));
    };
    /**
     * Inserts new record in the table.
     *
     * @param {DataManager} dm
     * @param {Object} data
     * @param tableName
     * @param query
     * @param {number} position
     */
    JsonAdaptor.prototype.insert = function (dm, data, tableName, query, position) {
      if (sf.base.isNullOrUndefined(position)) {
        return dm.dataSource.json.push(data);
      } else {
        return dm.dataSource.json.splice(position, 0, data);
      }
    };
    /**
     * Remove the data from the dataSource based on the key field value.
     *
     * @param {DataManager} dm
     * @param {string} keyField
     * @param {Object} value
     * @param {string} tableName?
     * @param tableName
     * @returns null
     */
    JsonAdaptor.prototype.remove = function (dm, keyField, value, tableName) {
      var ds = dm.dataSource.json;
      var i;
      if (_typeof(value) === 'object' && !(value instanceof Date)) {
        value = DataUtil.getObject(keyField, value);
      }
      for (i = 0; i < ds.length; i++) {
        if (DataUtil.getObject(keyField, ds[i]) === value) {
          break;
        }
      }
      return i !== ds.length ? ds.splice(i, 1) : null;
    };
    /**
     * Updates existing record and saves the changes to the table.
     *
     * @param {DataManager} dm
     * @param {string} keyField
     * @param {Object} value
     * @param {string} tableName?
     * @param tableName
     * @returns null
     */
    JsonAdaptor.prototype.update = function (dm, keyField, value, tableName) {
      var ds = dm.dataSource.json;
      var i;
      var key;
      if (!sf.base.isNullOrUndefined(keyField)) {
        key = sf.base.getValue(keyField, value);
      }
      for (i = 0; i < ds.length; i++) {
        if (!sf.base.isNullOrUndefined(keyField) && sf.base.getValue(keyField, ds[i]) === key) {
          break;
        }
      }
      return i < ds.length ? sf.base.merge(ds[i], value) : null;
    };
    return JsonAdaptor;
  }(Adaptor);
  /**
   * URL Adaptor of DataManager can be used when you are required to use remote service to retrieve data.
   * It interacts with server-side for all DataManager Queries and CRUD operations.
   *
   * @hidden
   */
  var UrlAdaptor = /** @class */function (_super) {
    __extends(UrlAdaptor, _super);
    function UrlAdaptor() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Process the query to generate request body.
     *
     * @param {DataManager} dm
     * @param {Query} query
     * @param {Object[]} hierarchyFilters?
     * @param hierarchyFilters
     * @returns p
     */
    // tslint:disable-next-line:max-func-body-length
    UrlAdaptor.prototype.processQuery = function (dm, query, hierarchyFilters) {
      var queries = this.getQueryRequest(query);
      var singles = Query.filterQueryLists(query.queries, ['onSelect', 'onPage', 'onSkip', 'onTake', 'onRange']);
      var params = query.params;
      var url = dm.dataSource.url;
      var temp;
      var skip;
      var take = null;
      var options = this.options;
      var request = {
        sorts: [],
        groups: [],
        filters: [],
        searches: [],
        aggregates: []
      };
      // calc Paging & Range
      if ('onPage' in singles) {
        temp = singles.onPage;
        skip = DataUtil.getValue(temp.pageIndex, query);
        take = DataUtil.getValue(temp.pageSize, query);
        skip = (skip - 1) * take;
      } else if ('onRange' in singles) {
        temp = singles.onRange;
        skip = temp.start;
        take = temp.end - temp.start;
      }
      // Sorting
      for (var i = 0; i < queries.sorts.length; i++) {
        temp = DataUtil.getValue(queries.sorts[i].e.fieldName, query);
        request.sorts.push(DataUtil.callAdaptorFunction(this, 'onEachSort', {
          name: temp,
          direction: queries.sorts[i].e.direction
        }, query));
      }
      // hierarchy
      if (hierarchyFilters) {
        temp = this.getFiltersFrom(hierarchyFilters, query);
        if (temp) {
          request.filters.push(DataUtil.callAdaptorFunction(this, 'onEachWhere', temp.toJson(), query));
        }
      }
      // Filters
      for (var i = 0; i < queries.filters.length; i++) {
        var res = DataUtil.callAdaptorFunction(this, 'onEachWhere', queries.filters[i].e.toJson(), query);
        if (this.getModuleName && this.getModuleName() === 'ODataV4Adaptor' && !sf.base.isNullOrUndefined(queries.filters[i].e.key) && queries.filters.length > 1) {
          res = '(' + res + ')';
        }
        request.filters.push(res);
        var keys_3 = _typeof(request.filters[i]) === 'object' ? Object.keys(request.filters[i]) : [];
        for (var _i = 0, keys_1 = keys_3; _i < keys_1.length; _i++) {
          var prop = keys_1[_i];
          if (DataUtil.isNull(request[prop])) {
            delete request[prop];
          }
        }
      }
      // Searches
      for (var i = 0; i < queries.searches.length; i++) {
        temp = queries.searches[i].e;
        request.searches.push(DataUtil.callAdaptorFunction(this, 'onEachSearch', {
          fields: temp.fieldNames,
          operator: temp.operator,
          key: temp.searchKey,
          ignoreCase: temp.ignoreCase
        }, query));
      }
      // Grouping
      for (var i = 0; i < queries.groups.length; i++) {
        request.groups.push(DataUtil.getValue(queries.groups[i].e.fieldName, query));
      }
      // aggregates
      for (var i = 0; i < queries.aggregates.length; i++) {
        temp = queries.aggregates[i].e;
        request.aggregates.push({
          type: temp.type,
          field: DataUtil.getValue(temp.field, query)
        });
      }
      var req = {};
      this.getRequestQuery(options, query, singles, request, req);
      // Params
      DataUtil.callAdaptorFunction(this, 'addParams', {
        dm: dm,
        query: query,
        params: params,
        reqParams: req
      });
      if (query.lazyLoad.length) {
        for (var i = 0; i < query.lazyLoad.length; i++) {
          req[query.lazyLoad[i].key] = query.lazyLoad[i].value;
        }
      }
      // cleanup
      var keys = Object.keys(req);
      for (var _a = 0, keys_2 = keys; _a < keys_2.length; _a++) {
        var prop = keys_2[_a];
        if (DataUtil.isNull(req[prop]) || req[prop] === '' || req[prop].length === 0) {
          delete req[prop];
        }
      }
      if (!(options.skip in req && options.take in req) && take !== null) {
        req[options.skip] = DataUtil.callAdaptorFunction(this, 'onSkip', skip, query);
        req[options.take] = DataUtil.callAdaptorFunction(this, 'onTake', take, query);
      }
      var p = this.pvt;
      this.pvt = {};
      if (this.options.requestType === 'json') {
        return {
          data: JSON.stringify(req, DataUtil.parse.jsonDateReplacer),
          url: url,
          pvtData: p,
          type: 'POST',
          contentType: 'application/json; charset=utf-8'
        };
      }
      temp = this.convertToQueryString(req, query, dm);
      temp = (dm.dataSource.url.indexOf('?') !== -1 ? '&' : '/') + temp;
      return {
        type: 'GET',
        url: temp.length ? url.replace(/\/*$/, temp) : url,
        pvtData: p
      };
    };
    UrlAdaptor.prototype.getRequestQuery = function (options, query, singles, request, request1) {
      var param = 'param';
      var req = request1;
      req[options.from] = query.fromTable;
      if (options.apply && query.distincts.length) {
        req[options.apply] = 'onDistinct' in this ? DataUtil.callAdaptorFunction(this, 'onDistinct', query.distincts) : '';
      }
      if (!query.distincts.length && options.expand) {
        req[options.expand] = 'onExpand' in this && 'onSelect' in singles ? DataUtil.callAdaptorFunction(this, 'onExpand', {
          selects: DataUtil.getValue(singles.onSelect.fieldNames, query),
          expands: query.expands
        }, query) : query.expands;
      }
      req[options.select] = 'onSelect' in singles && !query.distincts.length ? DataUtil.callAdaptorFunction(this, 'onSelect', DataUtil.getValue(singles.onSelect.fieldNames, query), query) : '';
      req[options.count] = query.isCountRequired ? DataUtil.callAdaptorFunction(this, 'onCount', query.isCountRequired, query) : '';
      req[options.search] = request.searches.length ? DataUtil.callAdaptorFunction(this, 'onSearch', request.searches, query) : '';
      req[options.skip] = 'onSkip' in singles ? DataUtil.callAdaptorFunction(this, 'onSkip', DataUtil.getValue(singles.onSkip.nos, query), query) : '';
      req[options.take] = 'onTake' in singles ? DataUtil.callAdaptorFunction(this, 'onTake', DataUtil.getValue(singles.onTake.nos, query), query) : '';
      req[options.where] = request.filters.length || request.searches.length ? DataUtil.callAdaptorFunction(this, 'onWhere', request.filters, query) : '';
      req[options.sortBy] = request.sorts.length ? DataUtil.callAdaptorFunction(this, 'onSortBy', request.sorts, query) : '';
      req[options.group] = request.groups.length ? DataUtil.callAdaptorFunction(this, 'onGroup', request.groups, query) : '';
      req[options.aggregates] = request.aggregates.length ? DataUtil.callAdaptorFunction(this, 'onAggregates', request.aggregates, query) : '';
      req[param] = [];
    };
    /**
     * Convert the object from processQuery to string which can be added query string.
     *
     * @param {Object} req
     * @param request
     * @param {Query} query
     * @param {DataManager} dm
     */
    UrlAdaptor.prototype.convertToQueryString = function (request, query, dm) {
      return '';
      // this needs to be overridden
    };
    /**
     * Return the data from the data manager processing.
     *
     * @param {DataResult} data
     * @param {DataOptions} ds?
     * @param {Query} query?
     * @param {Request} xhr?
     * @param {Object} request?
     * @param {CrudOptions} changes?
     * @param ds
     * @param query
     * @param xhr
     * @param request
     * @param changes
     */
    UrlAdaptor.prototype.processResponse = function (data, ds, query, xhr, request, changes) {
      if (xhr && xhr.headers.get('Content-Type') && xhr.headers.get('Content-Type').indexOf('application/json') !== -1) {
        var handleTimeZone = DataUtil.timeZoneHandling;
        if (ds && !ds.timeZoneHandling) {
          DataUtil.timeZoneHandling = false;
        }
        data = DataUtil.parse.parseJson(data);
        DataUtil.timeZoneHandling = handleTimeZone;
      }
      var requests = request;
      var pvt = requests.pvtData || {};
      var groupDs = data ? data.groupDs : [];
      if (xhr && xhr.headers.get('Content-Type') && xhr.headers.get('Content-Type').indexOf('xml') !== -1) {
        return query.isCountRequired ? {
          result: [],
          count: 0
        } : [];
      }
      var d = JSON.parse(requests.data);
      if (d && d.action === 'batch' && data && data.addedRecords) {
        changes.addedRecords = data.addedRecords;
        return changes;
      }
      if (data && data.d) {
        data = data.d;
      }
      var args = {};
      if (data && 'count' in data) {
        args.count = data.count;
      }
      args.result = data && data.result ? data.result : data;
      var isExpand = false;
      if (Array.isArray(data.result) && data.result.length) {
        var key = 'key';
        var val = 'value';
        var level = 'level';
        if (!sf.base.isNullOrUndefined(data.result[0][key])) {
          args.result = this.formRemoteGroupedData(args.result, 1, pvt.groups.length - 1);
        }
        if (query && query.lazyLoad.length && pvt.groups.length) {
          for (var i = 0; i < query.lazyLoad.length; i++) {
            if (query.lazyLoad[i][key] === 'onDemandGroupInfo') {
              var value = query.lazyLoad[i][val][level];
              if (pvt.groups.length === value) {
                isExpand = true;
              }
            }
          }
        }
      }
      if (!isExpand) {
        this.getAggregateResult(pvt, data, args, groupDs, query);
      }
      return DataUtil.isNull(args.count) ? args.result : {
        result: args.result,
        count: args.count,
        aggregates: args.aggregates
      };
    };
    UrlAdaptor.prototype.formRemoteGroupedData = function (data, level, childLevel) {
      for (var i = 0; i < data.length; i++) {
        if (data[i].items.length && Object.keys(data[i].items[0]).indexOf('key') > -1) {
          this.formRemoteGroupedData(data[i].items, level + 1, childLevel - 1);
        }
      }
      var uid = 'GroupGuid';
      var childLvl = 'childLevels';
      var lvl = 'level';
      var records = 'records';
      data[uid] = consts$1[uid];
      data[lvl] = level;
      data[childLvl] = childLevel;
      data[records] = data[0].items.length ? this.getGroupedRecords(data, !sf.base.isNullOrUndefined(data[0].items[records])) : [];
      return data;
    };
    UrlAdaptor.prototype.getGroupedRecords = function (data, hasRecords) {
      var childGroupedRecords = [];
      var records = 'records';
      for (var i = 0; i < data.length; i++) {
        if (!hasRecords) {
          for (var j = 0; j < data[i].items.length; j++) {
            childGroupedRecords.push(data[i].items[j]);
          }
        } else {
          childGroupedRecords = childGroupedRecords.concat(data[i].items[records]);
        }
      }
      return childGroupedRecords;
    };
    /**
     * Add the group query to the adaptor`s option.
     *
     * @param  {Object[]} e
     * @returns void
     */
    UrlAdaptor.prototype.onGroup = function (e) {
      this.pvt.groups = e;
      return e;
    };
    /**
     * Add the aggregate query to the adaptor`s option.
     *
     * @param  {Aggregates[]} e
     * @returns void
     */
    UrlAdaptor.prototype.onAggregates = function (e) {
      this.pvt.aggregates = e;
    };
    /**
     * Prepare the request body based on the newly added, removed and updated records.
     * The result is used by the batch request.
     *
     * @param {DataManager} dm
     * @param {CrudOptions} changes
     * @param {Object} e
     * @param query
     * @param original
     */
    UrlAdaptor.prototype.batchRequest = function (dm, changes, e, query, original) {
      var url;
      var key;
      return {
        type: 'POST',
        url: dm.dataSource.batchUrl || dm.dataSource.crudUrl || dm.dataSource.removeUrl || dm.dataSource.url,
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        data: JSON.stringify(sf.base.extend({}, {
          changed: changes.changedRecords,
          added: changes.addedRecords,
          deleted: changes.deletedRecords,
          action: 'batch',
          table: e[url],
          key: e[key]
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    /**
     * Method will trigger before send the request to server side.
     * Used to set the custom header or modify the request options.
     *
     * @param  {DataManager} dm
     * @param  {Request} request
     * @returns void
     */
    UrlAdaptor.prototype.beforeSend = function (dm, request) {
      // need to extend this method
    };
    /**
     * Prepare and returns request body which is used to insert a new record in the table.
     *
     * @param {DataManager} dm
     * @param {Object} data
     * @param {string} tableName
     * @param query
     */
    UrlAdaptor.prototype.insert = function (dm, data, tableName, query) {
      return {
        url: dm.dataSource.insertUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(sf.base.extend({}, {
          value: data,
          table: tableName,
          action: 'insert'
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    /**
     * Prepare and return request body which is used to remove record from the table.
     *
     * @param {DataManager} dm
     * @param {string} keyField
     * @param {number|string} value
     * @param {string} tableName
     * @param query
     */
    UrlAdaptor.prototype.remove = function (dm, keyField, value, tableName, query) {
      return {
        type: 'POST',
        url: dm.dataSource.removeUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(sf.base.extend({}, {
          key: value,
          keyColumn: keyField,
          table: tableName,
          action: 'remove'
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    /**
     * Prepare and return request body which is used to update record.
     *
     * @param {DataManager} dm
     * @param {string} keyField
     * @param {Object} value
     * @param {string} tableName
     * @param query
     */
    UrlAdaptor.prototype.update = function (dm, keyField, value, tableName, query) {
      return {
        type: 'POST',
        url: dm.dataSource.updateUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(sf.base.extend({}, {
          value: value,
          action: 'update',
          keyColumn: keyField,
          key: DataUtil.getObject(keyField, value),
          table: tableName
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    /**
     * To generate the predicate based on the filtered query.
     *
     * @param  {Object[]|string[]|number[]} data
     * @param  {Query} query
     * @hidden
     */
    UrlAdaptor.prototype.getFiltersFrom = function (data, query) {
      var key = query.fKey;
      var value;
      var prop = key;
      var pKey = query.key;
      var predicats = [];
      if (_typeof(data[0]) !== 'object') {
        prop = null;
      }
      for (var i = 0; i < data.length; i++) {
        if (_typeof(data[0]) === 'object') {
          value = DataUtil.getObject(pKey || prop, data[i]);
        } else {
          value = data[i];
        }
        predicats.push(new Predicate(key, 'equal', value));
      }
      return Predicate.or(predicats);
    };
    UrlAdaptor.prototype.getAggregateResult = function (pvt, data, args, groupDs, query) {
      var pData = data;
      if (data && data.result) {
        pData = data.result;
      }
      if (pvt && pvt.aggregates && pvt.aggregates.length) {
        var agg = pvt.aggregates;
        var fn = void 0;
        var aggregateData = pData;
        var res = {};
        if (data.aggregate) {
          aggregateData = data.aggregate;
        }
        for (var i = 0; i < agg.length; i++) {
          fn = DataUtil.aggregates[agg[i].type];
          if (fn) {
            res[agg[i].field + ' - ' + agg[i].type] = fn(aggregateData, agg[i].field);
          }
        }
        args.aggregates = res;
      }
      var key = 'key';
      var isServerGrouping = Array.isArray(data.result) && data.result.length && !sf.base.isNullOrUndefined(data.result[0][key]);
      if (pvt && pvt.groups && pvt.groups.length && !isServerGrouping) {
        var groups = pvt.groups;
        for (var i = 0; i < groups.length; i++) {
          var level = null;
          if (!sf.base.isNullOrUndefined(groupDs)) {
            groupDs = DataUtil.group(groupDs, groups[i]);
          }
          var groupQuery = Query.filterQueries(query.queries, 'onGroup')[i].e;
          pData = DataUtil.group(pData, groups[i], pvt.aggregates, level, groupDs, groupQuery.comparer);
        }
        args.result = pData;
      }
      return args;
    };
    UrlAdaptor.prototype.getQueryRequest = function (query) {
      var req = {
        sorts: [],
        groups: [],
        filters: [],
        searches: [],
        aggregates: []
      };
      req.sorts = Query.filterQueries(query.queries, 'onSortBy');
      req.groups = Query.filterQueries(query.queries, 'onGroup');
      req.filters = Query.filterQueries(query.queries, 'onWhere');
      req.searches = Query.filterQueries(query.queries, 'onSearch');
      req.aggregates = Query.filterQueries(query.queries, 'onAggregates');
      return req;
    };
    UrlAdaptor.prototype.addParams = function (options) {
      var req = options.reqParams;
      if (options.params.length) {
        req.params = {};
      }
      for (var _i = 0, _a = options.params; _i < _a.length; _i++) {
        var tmp = _a[_i];
        if (req[tmp.key]) {
          throw new Error('Query() - addParams: Custom Param is conflicting other request arguments');
        }
        req[tmp.key] = tmp.value;
        if (tmp.fn) {
          req[tmp.key] = tmp.fn.call(options.query, tmp.key, options.query, options.dm);
        }
        req.params[tmp.key] = req[tmp.key];
      }
    };
    return UrlAdaptor;
  }(Adaptor);
  /**
   * OData Adaptor that is extended from URL Adaptor, is used for consuming data through OData Service.
   *
   * @hidden
   */
  var ODataAdaptor = /** @class */function (_super) {
    __extends(ODataAdaptor, _super);
    function ODataAdaptor(props) {
      var _this = _super.call(this) || this;
      // options replaced the default adaptor options
      _this.options = sf.base.extend({}, _this.options, {
        requestType: 'get',
        accept: 'application/json;odata=light;q=1,application/json;odata=verbose;q=0.5',
        multipartAccept: 'multipart/mixed',
        sortBy: '$orderby',
        select: '$select',
        skip: '$skip',
        take: '$top',
        count: '$inlinecount',
        where: '$filter',
        expand: '$expand',
        batch: '$batch',
        changeSet: '--changeset_',
        batchPre: 'batch_',
        contentId: 'Content-Id: ',
        batchContent: 'Content-Type: multipart/mixed; boundary=',
        changeSetContent: 'Content-Type: application/http\nContent-Transfer-Encoding: binary ',
        batchChangeSetContentType: 'Content-Type: application/json; charset=utf-8 ',
        updateType: 'PUT'
      });
      sf.base.extend(_this.options, props || {});
      return _this;
    }
    ODataAdaptor.prototype.getModuleName = function () {
      return 'ODataAdaptor';
    };
    /**
     * Generate request string based on the filter criteria from query.
     *
     * @param {Predicate} pred
     * @param {boolean} requiresCast?
     * @param predicate
     * @param query
     * @param requiresCast
     */
    ODataAdaptor.prototype.onPredicate = function (predicate, query, requiresCast) {
      var returnValue = '';
      var operator;
      var guid;
      var val = predicate.value;
      var type = _typeof(val);
      var field = predicate.field ? ODataAdaptor.getField(predicate.field) : null;
      if (val instanceof Date) {
        val = 'datetime\'' + DataUtil.parse.replacer(val) + '\'';
      }
      if (type === 'string') {
        val = val.replace(/'/g, '\'\'');
        if (predicate.ignoreCase) {
          val = val.toLowerCase();
        }
        if (predicate.operator !== 'like') {
          val = encodeURIComponent(val);
        }
        if (predicate.operator !== 'wildcard' && predicate.operator !== 'like') {
          val = '\'' + val + '\'';
        }
        if (requiresCast) {
          field = 'cast(' + field + ', \'Edm.String\')';
        }
        if (DataUtil.parse.isGuid(val)) {
          guid = 'guid';
        }
        if (predicate.ignoreCase) {
          if (!guid) {
            field = 'tolower(' + field + ')';
          }
          val = val.toLowerCase();
        }
      }
      if (predicate.operator === 'isempty' || predicate.operator === 'isnull' || predicate.operator === 'isnotempty' || predicate.operator === 'isnotnull') {
        operator = predicate.operator.indexOf('isnot') !== -1 ? DataUtil.odBiOperator['notequal'] : DataUtil.odBiOperator['equal'];
        val = predicate.operator === 'isnull' || predicate.operator === 'isnotnull' ? null : '\'\'';
      } else {
        operator = DataUtil.odBiOperator[predicate.operator];
      }
      if (operator) {
        returnValue += field;
        returnValue += operator;
        if (guid) {
          returnValue += guid;
        }
        return returnValue + val;
      }
      if (!sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor') {
        operator = DataUtil.odv4UniOperator[predicate.operator];
      } else {
        operator = DataUtil.odUniOperator[predicate.operator];
      }
      if (operator === 'like') {
        val = val;
        if (val.indexOf('%') !== -1) {
          if (val.charAt(0) === '%' && val.lastIndexOf('%') < 2) {
            val = val.substring(1, val.length);
            operator = !sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor' ? DataUtil.odv4UniOperator['startswith'] : DataUtil.odUniOperator['startswith'];
          } else if (val.charAt(val.length - 1) === '%' && val.indexOf('%') > val.length - 3) {
            val = val.substring(0, val.length - 1);
            operator = !sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor' ? DataUtil.odv4UniOperator['endswith'] : DataUtil.odUniOperator['endswith'];
          } else if (val.lastIndexOf('%') !== val.indexOf('%') && val.lastIndexOf('%') > val.indexOf('%') + 1) {
            val = val.substring(val.indexOf('%') + 1, val.lastIndexOf('%'));
            operator = !sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor' ? DataUtil.odv4UniOperator['contains'] : DataUtil.odUniOperator['contains'];
          } else {
            operator = !sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor' ? DataUtil.odv4UniOperator['contains'] : DataUtil.odUniOperator['contains'];
          }
        }
        val = encodeURIComponent(val);
        val = '\'' + val + '\'';
      } else if (operator === 'wildcard') {
        val = val;
        if (val.indexOf('*') !== -1) {
          var splittedStringValue = val.split('*');
          var splittedValue = void 0;
          var count = 0;
          if (val.indexOf('*') !== 0 && splittedStringValue[0].indexOf('%3f') === -1 && splittedStringValue[0].indexOf('?') === -1) {
            splittedValue = splittedStringValue[0];
            splittedValue = '\'' + splittedValue + '\'';
            operator = !sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor' ? DataUtil.odv4UniOperator['startswith'] : DataUtil.odUniOperator['startswith'];
            returnValue += operator + '(';
            returnValue += field + ',';
            if (guid) {
              returnValue += guid;
            }
            returnValue += splittedValue + ')';
            count++;
          }
          if (val.lastIndexOf('*') !== val.length - 1 && splittedStringValue[splittedStringValue.length - 1].indexOf('%3f') === -1 && splittedStringValue[splittedStringValue.length - 1].indexOf('?') === -1) {
            splittedValue = splittedStringValue[splittedStringValue.length - 1];
            splittedValue = '\'' + splittedValue + '\'';
            operator = !sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor' ? DataUtil.odv4UniOperator['endswith'] : DataUtil.odUniOperator['endswith'];
            if (count > 0) {
              returnValue += ' and ';
            }
            returnValue += operator + '(';
            returnValue += field + ',';
            if (guid) {
              returnValue += guid;
            }
            returnValue += splittedValue + ')';
            count++;
          }
          if (splittedStringValue.length > 2) {
            for (var i = 1; i < splittedStringValue.length - 1; i++) {
              if (splittedStringValue[i].indexOf('%3f') === -1 && splittedStringValue[i].indexOf('?') === -1) {
                splittedValue = splittedStringValue[i];
                splittedValue = '\'' + splittedValue + '\'';
                operator = !sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor' ? DataUtil.odv4UniOperator['contains'] : DataUtil.odUniOperator['contains'];
                if (count > 0) {
                  returnValue += ' and ';
                }
                if (operator === 'substringof' || operator === 'not substringof') {
                  var temp = splittedValue;
                  splittedValue = field;
                  field = temp;
                }
                returnValue += operator + '(';
                returnValue += field + ',';
                if (guid) {
                  returnValue += guid;
                }
                returnValue += splittedValue + ')';
                count++;
              }
            }
          }
          if (count === 0) {
            operator = !sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor' ? DataUtil.odv4UniOperator['contains'] : DataUtil.odUniOperator['contains'];
            if (val.indexOf('?') !== -1 || val.indexOf('%3f') !== -1) {
              val = val.indexOf('?') !== -1 ? val.split('?').join('') : val.split('%3f').join('');
            }
            val = '\'' + val + '\'';
          } else {
            operator = 'wildcard';
          }
        } else {
          operator = !sf.base.isNullOrUndefined(this.getModuleName) && this.getModuleName() === 'ODataV4Adaptor' ? DataUtil.odv4UniOperator['contains'] : DataUtil.odUniOperator['contains'];
          if (val.indexOf('?') !== -1 || val.indexOf('%3f') !== -1) {
            val = val.indexOf('?') !== -1 ? val.split('?').join('') : val.split('%3f').join('');
          }
          val = '\'' + val + '\'';
        }
      }
      if (operator === 'substringof' || operator === 'not substringof') {
        var temp = val;
        val = field;
        field = temp;
      }
      if (operator !== 'wildcard') {
        returnValue += operator + '(';
        returnValue += field + ',';
        if (guid) {
          returnValue += guid;
        }
        returnValue += val + ')';
      }
      return returnValue;
    };
    ODataAdaptor.prototype.addParams = function (options) {
      _super.prototype.addParams.call(this, options);
      delete options.reqParams.params;
    };
    /**
     * Generate request string based on the multiple filter criteria from query.
     *
     * @param {Predicate} pred
     * @param {boolean} requiresCast?
     * @param predicate
     * @param query
     * @param requiresCast
     */
    ODataAdaptor.prototype.onComplexPredicate = function (predicate, query, requiresCast) {
      var res = [];
      for (var i = 0; i < predicate.predicates.length; i++) {
        res.push('(' + this.onEachWhere(predicate.predicates[i], query, requiresCast) + ')');
      }
      return res.join(' ' + predicate.condition + ' ');
    };
    /**
     * Generate query string based on the multiple filter criteria from query.
     *
     * @param {Predicate} filter
     * @param {boolean} requiresCast?
     * @param query
     * @param requiresCast
     */
    ODataAdaptor.prototype.onEachWhere = function (filter, query, requiresCast) {
      return filter.isComplex ? this.onComplexPredicate(filter, query, requiresCast) : this.onPredicate(filter, query, requiresCast);
    };
    /**
     * Generate query string based on the multiple filter criteria from query.
     *
     * @param  {string[]} filters
     */
    ODataAdaptor.prototype.onWhere = function (filters) {
      if (this.pvt.search) {
        filters.push(this.onEachWhere(this.pvt.search, null, true));
      }
      return filters.join(' and ');
    };
    /**
     * Generate query string based on the multiple search criteria from query.
     *
     * @param e
     * @param {string} operator
     * @param {string} key
     * @param {boolean} } ignoreCase
     * @param e.fields
     * @param e.operator
     * @param e.key
     * @param e.ignoreCase
     */
    ODataAdaptor.prototype.onEachSearch = function (e) {
      if (e.fields && e.fields.length === 0) {
        DataUtil.throwError('Query() - Search : oData search requires list of field names to search');
      }
      var filter = this.pvt.search || [];
      for (var i = 0; i < e.fields.length; i++) {
        filter.push(new Predicate(e.fields[i], e.operator, e.key, e.ignoreCase));
      }
      this.pvt.search = filter;
    };
    /**
     * Generate query string based on the search criteria from query.
     *
     * @param  {Object} e
     */
    ODataAdaptor.prototype.onSearch = function (e) {
      this.pvt.search = Predicate.or(this.pvt.search);
      return '';
    };
    /**
     * Generate query string based on multiple sort criteria from query.
     *
     * @param  {QueryOptions} e
     */
    ODataAdaptor.prototype.onEachSort = function (e) {
      var res = [];
      if (e.name instanceof Array) {
        for (var i = 0; i < e.name.length; i++) {
          res.push(ODataAdaptor.getField(e.name[i]) + (e.direction === 'descending' ? ' desc' : ''));
        }
      } else {
        res.push(ODataAdaptor.getField(e.name) + (e.direction === 'descending' ? ' desc' : ''));
      }
      return res.join(',');
    };
    /**
     * Returns sort query string.
     *
     * @param  {string[]} e
     */
    ODataAdaptor.prototype.onSortBy = function (e) {
      return e.reverse().join(',');
    };
    /**
     * Adds the group query to the adaptor option.
     *
     * @param  {Object[]} e
     * @returns string
     */
    ODataAdaptor.prototype.onGroup = function (e) {
      this.pvt.groups = e;
      return [];
    };
    /**
     * Returns the select query string.
     *
     * @param  {string[]} e
     */
    ODataAdaptor.prototype.onSelect = function (e) {
      for (var i = 0; i < e.length; i++) {
        e[i] = ODataAdaptor.getField(e[i]);
      }
      return e.join(',');
    };
    /**
     * Add the aggregate query to the adaptor option.
     *
     * @param  {Object[]} e
     * @returns string
     */
    ODataAdaptor.prototype.onAggregates = function (e) {
      this.pvt.aggregates = e;
      return '';
    };
    /**
     * Returns the query string which requests total count from the data source.
     *
     * @param  {boolean} e
     * @returns string
     */
    ODataAdaptor.prototype.onCount = function (e) {
      return e === true ? 'allpages' : '';
    };
    /**
     * Method will trigger before send the request to server side.
     * Used to set the custom header or modify the request options.
     *
     * @param {DataManager} dm
     * @param {Request} request
     * @param {Fetch} settings?
     * @param settings
     */
    ODataAdaptor.prototype.beforeSend = function (dm, request, settings) {
      if (DataUtil.endsWith(settings.url, this.options.batch) && settings.type.toLowerCase() === 'post') {
        request.headers.set('Accept', this.options.multipartAccept);
        request.headers.set('DataServiceVersion', '2.0');
        //request.overrideMimeType('text/plain; charset=x-user-defined');
      } else {
        request.headers.set('Accept', this.options.accept);
      }
      request.headers.set('DataServiceVersion', '2.0');
      request.headers.set('MaxDataServiceVersion', '2.0');
    };
    /**
     * Returns the data from the query processing.
     *
     * @param {DataResult} data
     * @param {DataOptions} ds?
     * @param {Query} query?
     * @param {Request} xhr?
     * @param {Fetch} request?
     * @param {CrudOptions} changes?
     * @param ds
     * @param query
     * @param xhr
     * @param request
     * @param changes
     * @returns aggregateResult
     */
    ODataAdaptor.prototype.processResponse = function (data, ds, query, xhr, request, changes) {
      var metaCheck = 'odata.metadata';
      if (request && request.type === 'GET' && !this.rootUrl && data[metaCheck]) {
        var dataUrls = data[metaCheck].split('/$metadata#');
        this.rootUrl = dataUrls[0];
        this.resourceTableName = dataUrls[1];
      }
      var pvtData = 'pvtData';
      if (!sf.base.isNullOrUndefined(data.d)) {
        var dataCopy = query && query.isCountRequired ? data.d.results : data.d;
        var metaData = '__metadata';
        if (!sf.base.isNullOrUndefined(dataCopy)) {
          for (var i = 0; i < dataCopy.length; i++) {
            if (!sf.base.isNullOrUndefined(dataCopy[i][metaData])) {
              delete dataCopy[i][metaData];
            }
          }
        }
      }
      var pvt = request && request[pvtData];
      var emptyAndBatch = this.processBatchResponse(data, query, xhr, request, changes);
      if (emptyAndBatch) {
        return emptyAndBatch;
      }
      var versionCheck = xhr && request.fetchRequest.headers.get('DataServiceVersion');
      var count = null;
      var version = versionCheck && parseInt(versionCheck, 10) || 2;
      if (query && query.isCountRequired) {
        var oDataCount = '__count';
        if (data[oDataCount] || data['odata.count']) {
          count = data[oDataCount] || data['odata.count'];
        }
        if (data.d) {
          data = data.d;
        }
        if (data[oDataCount] || data['odata.count']) {
          count = data[oDataCount] || data['odata.count'];
        }
      }
      if (version === 3 && data.value) {
        data = data.value;
      }
      if (data.d) {
        data = data.d;
      }
      if (version < 3 && data.results) {
        data = data.results;
      }
      var args = {};
      args.count = count;
      args.result = data;
      this.getAggregateResult(pvt, data, args, null, query);
      return DataUtil.isNull(count) ? args.result : {
        result: args.result,
        count: args.count,
        aggregates: args.aggregates
      };
    };
    /**
     * Converts the request object to query string.
     *
     * @param {Object} req
     * @param request
     * @param {Query} query
     * @param {DataManager} dm
     * @returns tableName
     */
    ODataAdaptor.prototype.convertToQueryString = function (request, query, dm) {
      var res = [];
      var table = 'table';
      var tableName = request[table] || '';
      var format = '$format';
      delete request[table];
      if (dm.dataSource.requiresFormat) {
        request[format] = 'json';
      }
      var keys = Object.keys(request);
      for (var _i = 0, keys_4 = keys; _i < keys_4.length; _i++) {
        var prop = keys_4[_i];
        res.push(prop + '=' + request[prop]);
      }
      res = res.join('&');
      if (dm.dataSource.url && dm.dataSource.url.indexOf('?') !== -1 && !tableName) {
        return res;
      }
      return res.length ? tableName + '?' + res : tableName || '';
    };
    ODataAdaptor.prototype.localTimeReplacer = function (key, convertObj) {
      for (var _i = 0, _a = !sf.base.isNullOrUndefined(convertObj) ? Object.keys(convertObj) : []; _i < _a.length; _i++) {
        var prop = _a[_i];
        if (convertObj[prop] instanceof Date) {
          convertObj[prop] = DataUtil.dateParse.toLocalTime(convertObj[prop]);
        }
      }
      return convertObj;
    };
    /**
     * Prepare and returns request body which is used to insert a new record in the table.
     *
     * @param {DataManager} dm
     * @param {Object} data
     * @param {string} tableName?
     * @param tableName
     */
    ODataAdaptor.prototype.insert = function (dm, data, tableName) {
      return {
        url: (dm.dataSource.insertUrl || dm.dataSource.url).replace(/\/*$/, tableName ? '/' + tableName : ''),
        data: JSON.stringify(data, this.options.localTime ? this.localTimeReplacer : null)
      };
    };
    /**
     * Prepare and return request body which is used to remove record from the table.
     *
     * @param {DataManager} dm
     * @param {string} keyField
     * @param {number} value
     * @param {string} tableName?
     * @param tableName
     */
    ODataAdaptor.prototype.remove = function (dm, keyField, value, tableName) {
      var url;
      if (typeof value === 'string' && !DataUtil.parse.isGuid(value)) {
        url = "('" + value + "')";
      } else {
        url = "(" + value + ")";
      }
      return {
        type: 'DELETE',
        url: (dm.dataSource.removeUrl || dm.dataSource.url).replace(/\/*$/, tableName ? '/' + tableName : '') + url
      };
    };
    /**
     * Updates existing record and saves the changes to the table.
     *
     * @param {DataManager} dm
     * @param {string} keyField
     * @param {Object} value
     * @param {string} tableName?
     * @param tableName
     * @param query
     * @param original
     * @returns this
     */
    ODataAdaptor.prototype.update = function (dm, keyField, value, tableName, query, original) {
      if (this.options.updateType === 'PATCH' && !sf.base.isNullOrUndefined(original)) {
        value = this.compareAndRemove(value, original, keyField);
      }
      var url;
      if (typeof value[keyField] === 'string' && !DataUtil.parse.isGuid(value[keyField])) {
        url = "('" + value[keyField] + "')";
      } else {
        url = "(" + value[keyField] + ")";
      }
      return {
        type: this.options.updateType,
        url: (dm.dataSource.updateUrl || dm.dataSource.url).replace(/\/*$/, tableName ? '/' + tableName : '') + url,
        data: JSON.stringify(value, this.options.localTime ? this.localTimeReplacer : null),
        accept: this.options.accept
      };
    };
    /**
     * Prepare the request body based on the newly added, removed and updated records.
     * The result is used by the batch request.
     *
     * @param {DataManager} dm
     * @param {CrudOptions} changes
     * @param {RemoteArgs} e
     * @param query
     * @param original
     * @returns {Object}
     */
    ODataAdaptor.prototype.batchRequest = function (dm, changes, e, query, original) {
      var initialGuid = e.guid = DataUtil.getGuid(this.options.batchPre);
      var url = this.rootUrl ? this.rootUrl + '/' + this.options.batch : dm.dataSource.url.replace(/\/*$/, '/' + this.options.batch);
      e.url = this.resourceTableName ? this.resourceTableName : e.url;
      var args = {
        url: e.url,
        key: e.key,
        cid: 1,
        cSet: DataUtil.getGuid(this.options.changeSet)
      };
      var req = '--' + initialGuid + '\n';
      req += 'Content-Type: multipart/mixed; boundary=' + args.cSet.replace('--', '') + '\n';
      this.pvt.changeSet = 0;
      req += this.generateInsertRequest(changes.addedRecords, args, dm);
      req += this.generateUpdateRequest(changes.changedRecords, args, dm, original ? original.changedRecords : []);
      req += this.generateDeleteRequest(changes.deletedRecords, args, dm);
      req += args.cSet + '--\n';
      req += '--' + initialGuid + '--';
      return {
        type: 'POST',
        url: url,
        dataType: 'json',
        contentType: 'multipart/mixed; charset=UTF-8;boundary=' + initialGuid,
        data: req
      };
    };
    /**
     * Generate the string content from the removed records.
     * The result will be send during batch update.
     *
     * @param {Object[]} arr
     * @param {RemoteArgs} e
     * @param dm
     * @returns this
     */
    ODataAdaptor.prototype.generateDeleteRequest = function (arr, e, dm) {
      if (!arr) {
        return '';
      }
      var req = '';
      var stat = {
        'method': 'DELETE ',
        'url': function url(data, i, key) {
          var url = DataUtil.getObject(key, data[i]);
          if (typeof url === 'number' || DataUtil.parse.isGuid(url)) {
            return '(' + url + ')';
          } else if (url instanceof Date) {
            var dateTime = data[i][key];
            return '(' + dateTime.toJSON() + ')';
          } else {
            return "('" + url + "')";
          }
        },
        'data': function data(_data, i) {
          return '';
        }
      };
      req = this.generateBodyContent(arr, e, stat, dm);
      return req + '\n';
    };
    /**
     * Generate the string content from the inserted records.
     * The result will be send during batch update.
     *
     * @param {Object[]} arr
     * @param {RemoteArgs} e
     * @param dm
     */
    ODataAdaptor.prototype.generateInsertRequest = function (arr, e, dm) {
      if (!arr) {
        return '';
      }
      var req = '';
      var stat = {
        'method': 'POST ',
        'url': function url(data, i, key) {
          return '';
        },
        'data': function data(_data2, i) {
          return JSON.stringify(_data2[i]) + '\n\n';
        }
      };
      req = this.generateBodyContent(arr, e, stat, dm);
      return req;
    };
    /**
     * Generate the string content from the updated records.
     * The result will be send during batch update.
     *
     * @param {Object[]} arr
     * @param {RemoteArgs} e
     * @param dm
     * @param org
     */
    ODataAdaptor.prototype.generateUpdateRequest = function (arr, e, dm, org) {
      var _this = this;
      if (!arr) {
        return '';
      }
      var req = '';
      arr.forEach(function (change) {
        return change = _this.compareAndRemove(change, org.filter(function (o) {
          return DataUtil.getObject(e.key, o) === DataUtil.getObject(e.key, change);
        })[0], e.key);
      });
      var stat = {
        'method': this.options.updateType + ' ',
        'url': function url(data, i, key) {
          if (typeof data[i][key] === 'number' || DataUtil.parse.isGuid(data[i][key])) {
            return '(' + data[i][key] + ')';
          } else if (data[i][key] instanceof Date) {
            var date = data[i][key];
            return '(' + date.toJSON() + ')';
          } else {
            return "('" + data[i][key] + "')";
          }
        },
        'data': function data(_data3, i) {
          return JSON.stringify(_data3[i]) + '\n\n';
        }
      };
      req = this.generateBodyContent(arr, e, stat, dm);
      return req;
    };
    ODataAdaptor.getField = function (prop) {
      return prop.replace(/\./g, '/');
    };
    ODataAdaptor.prototype.generateBodyContent = function (arr, e, stat, dm) {
      var req = '';
      for (var i = 0; i < arr.length; i++) {
        req += '\n' + e.cSet + '\n';
        req += this.options.changeSetContent + '\n\n';
        req += stat.method;
        if (stat.method === 'POST ') {
          req += (dm.dataSource.insertUrl || dm.dataSource.crudUrl || e.url) + stat.url(arr, i, e.key) + ' HTTP/1.1\n';
        } else if (stat.method === 'PUT ' || stat.method === 'PATCH ') {
          req += (dm.dataSource.updateUrl || dm.dataSource.crudUrl || e.url) + stat.url(arr, i, e.key) + ' HTTP/1.1\n';
        } else if (stat.method === 'DELETE ') {
          req += (dm.dataSource.removeUrl || dm.dataSource.crudUrl || e.url) + stat.url(arr, i, e.key) + ' HTTP/1.1\n';
        }
        req += 'Accept: ' + this.options.accept + '\n';
        req += 'Content-Id: ' + this.pvt.changeSet++ + '\n';
        req += this.options.batchChangeSetContentType + '\n';
        if (!sf.base.isNullOrUndefined(arr[i]['@odata.etag'])) {
          req += 'If-Match: ' + arr[i]['@odata.etag'] + '\n\n';
          delete arr[i]['@odata.etag'];
        } else {
          req += '\n';
        }
        req += stat.data(arr, i);
      }
      return req;
    };
    ODataAdaptor.prototype.processBatchResponse = function (data, query, xhr, request, changes) {
      if (xhr && xhr.headers.get('Content-Type') && xhr.headers.get('Content-Type').indexOf('xml') !== -1) {
        return query.isCountRequired ? {
          result: [],
          count: 0
        } : [];
      }
      if (request && this.options.batch && DataUtil.endsWith(request.url, this.options.batch) && request.type.toLowerCase() === 'post') {
        var guid = xhr.headers.get('Content-Type');
        var cIdx = void 0;
        var jsonObj = void 0;
        var d = data + '';
        guid = guid.substring(guid.indexOf('=batchresponse') + 1);
        d = d.split(guid);
        if (d.length < 2) {
          return {};
        }
        d = d[1];
        var exVal = /(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(d);
        if (exVal) {
          d.replace(exVal[0], '');
        }
        var changeGuid = exVal ? exVal[1] : '';
        d = d.split(changeGuid);
        for (var i = d.length; i > -1; i--) {
          if (!/\bContent-ID:/i.test(d[i]) || !/\bHTTP.+201/.test(d[i])) {
            continue;
          }
          cIdx = parseInt(/\bContent-ID: (\d+)/i.exec(d[i])[1], 10);
          if (changes.addedRecords[cIdx]) {
            jsonObj = DataUtil.parse.parseJson(/^\{.+\}/m.exec(d[i])[0]);
            sf.base.extend({}, changes.addedRecords[cIdx], this.processResponse(jsonObj));
          }
        }
        return changes;
      }
      return null;
    };
    ODataAdaptor.prototype.compareAndRemove = function (data, original, key) {
      var _this = this;
      if (sf.base.isNullOrUndefined(original)) {
        return data;
      }
      Object.keys(data).forEach(function (prop) {
        if (prop !== key && prop !== '@odata.etag') {
          if (DataUtil.isPlainObject(data[prop])) {
            _this.compareAndRemove(data[prop], original[prop]);
            var _final = Object.keys(data[prop]).filter(function (data) {
              return data !== '@odata.etag';
            });
            if (_final.length === 0) {
              delete data[prop];
            }
          } else if (data[prop] === original[prop]) {
            delete data[prop];
          } else if (data[prop] && original[prop] && data[prop].valueOf() === original[prop].valueOf()) {
            delete data[prop];
          }
        }
      });
      return data;
    };
    return ODataAdaptor;
  }(UrlAdaptor);
  /**
   * The OData v4 is an improved version of OData protocols.
   * The DataManager uses the ODataV4Adaptor to consume OData v4 services.
   *
   * @hidden
   */
  var ODataV4Adaptor = /** @class */function (_super) {
    __extends(ODataV4Adaptor, _super);
    function ODataV4Adaptor(props) {
      var _this = _super.call(this, props) || this;
      // options replaced the default adaptor options
      _this.options = sf.base.extend({}, _this.options, {
        requestType: 'get',
        accept: 'application/json, text/javascript, */*; q=0.01',
        multipartAccept: 'multipart/mixed',
        sortBy: '$orderby',
        select: '$select',
        skip: '$skip',
        take: '$top',
        count: '$count',
        search: '$search',
        where: '$filter',
        expand: '$expand',
        batch: '$batch',
        changeSet: '--changeset_',
        batchPre: 'batch_',
        contentId: 'Content-Id: ',
        batchContent: 'Content-Type: multipart/mixed; boundary=',
        changeSetContent: 'Content-Type: application/http\nContent-Transfer-Encoding: binary ',
        batchChangeSetContentType: 'Content-Type: application/json; charset=utf-8 ',
        updateType: 'PATCH',
        localTime: false,
        apply: '$apply'
      });
      sf.base.extend(_this.options, props || {});
      return _this;
    }
    /**
     * @hidden
     */
    ODataV4Adaptor.prototype.getModuleName = function () {
      return 'ODataV4Adaptor';
    };
    /**
     * Returns the query string which requests total count from the data source.
     *
     * @param  {boolean} e
     * @returns string
     */
    ODataV4Adaptor.prototype.onCount = function (e) {
      return e === true ? 'true' : '';
    };
    /**
     * Generate request string based on the filter criteria from query.
     *
     * @param {Predicate} pred
     * @param {boolean} requiresCast?
     * @param predicate
     * @param query
     * @param requiresCast
     */
    ODataV4Adaptor.prototype.onPredicate = function (predicate, query, requiresCast) {
      var returnValue = '';
      var val = predicate.value;
      var isDate = val instanceof Date;
      if (query instanceof Query) {
        var queries = this.getQueryRequest(query);
        for (var i = 0; i < queries.filters.length; i++) {
          if (queries.filters[i].e.key === predicate.value) {
            requiresCast = true;
          }
        }
      }
      returnValue = _super.prototype.onPredicate.call(this, predicate, query, requiresCast);
      if (isDate) {
        returnValue = returnValue.replace(/datetime'(.*)'$/, '$1');
      }
      if (DataUtil.parse.isGuid(val)) {
        returnValue = returnValue.replace('guid', '').replace(/'/g, '');
      }
      return returnValue;
    };
    /**
     * Generate query string based on the multiple search criteria from query.
     *
     * @param e
     * @param {string} operator
     * @param {string} key
     * @param {boolean} } ignoreCase
     * @param e.fields
     * @param e.operator
     * @param e.key
     * @param e.ignoreCase
     */
    ODataV4Adaptor.prototype.onEachSearch = function (e) {
      var search = this.pvt.searches || [];
      search.push(e.key);
      this.pvt.searches = search;
    };
    /**
     *  Generate query string based on the search criteria from query.
     *
     * @param  {Object} e
     */
    ODataV4Adaptor.prototype.onSearch = function (e) {
      return this.pvt.searches.join(' OR ');
    };
    /**
     * Returns the expand query string.
     *
     * @param {string} e
     * @param e.selects
     * @param e.expands
     */
    ODataV4Adaptor.prototype.onExpand = function (e) {
      var _this = this;
      var selected = {};
      var expanded = {};
      var expands = e.expands.slice();
      var exArr = [];
      var selects = e.selects.filter(function (item) {
        return item.indexOf('.') > -1;
      });
      selects.forEach(function (select) {
        var splits = select.split('.');
        if (!(splits[0] in selected)) {
          selected[splits[0]] = [];
        }
        if (splits.length === 2) {
          if (selected[splits[0]].length && Object.keys(selected).indexOf(splits[0]) !== -1) {
            if (selected[splits[0]][0].indexOf('$expand') !== -1 && selected[splits[0]][0].indexOf(';$select=') === -1) {
              selected[splits[0]][0] = selected[splits[0]][0] + ';' + '$select=' + splits[1];
            } else {
              selected[splits[0]][0] = selected[splits[0]][0] + ',' + splits[1];
            }
          } else {
            selected[splits[0]].push('$select=' + splits[1]);
          }
        } else {
          var sel = '$select=' + splits[splits.length - 1];
          var exp = '';
          var close_1 = '';
          for (var i = 1; i < splits.length - 1; i++) {
            exp = exp + '$expand=' + splits[i] + '(';
            close_1 = close_1 + ')';
          }
          var combineVal = exp + sel + close_1;
          if (selected[splits[0]].length && Object.keys(selected).indexOf(splits[0]) !== -1 && _this.expandQueryIndex(selected[splits[0]], true)) {
            var idx = _this.expandQueryIndex(selected[splits[0]]);
            selected[splits[0]][idx] = selected[splits[0]][idx] + combineVal.replace('$expand=', ',');
          } else {
            selected[splits[0]].push(combineVal);
          }
        }
      });
      //Auto expand from select query
      Object.keys(selected).forEach(function (expand) {
        if (expands.indexOf(expand) === -1) {
          expands.push(expand);
        }
      });
      expands.forEach(function (expand) {
        expanded[expand] = expand in selected ? expand + "(" + selected[expand].join(';') + ")" : expand;
      });
      Object.keys(expanded).forEach(function (ex) {
        return exArr.push(expanded[ex]);
      });
      return exArr.join(',');
    };
    ODataV4Adaptor.prototype.expandQueryIndex = function (query, isExpand) {
      for (var i = 0; i < query.length; i++) {
        if (query[i].indexOf('$expand') !== -1) {
          return isExpand ? true : i;
        }
      }
      return isExpand ? false : 0;
    };
    /**
     * Returns the groupby query string.
     *
     * @param {string} e
     * @param distinctFields
     */
    ODataV4Adaptor.prototype.onDistinct = function (distinctFields) {
      var fields = distinctFields.map(function (field) {
        return ODataAdaptor.getField(field);
      }).join(',');
      return "groupby((" + fields + "))";
    };
    /**
     * Returns the select query string.
     *
     * @param  {string[]} e
     */
    ODataV4Adaptor.prototype.onSelect = function (e) {
      return _super.prototype.onSelect.call(this, e.filter(function (item) {
        return item.indexOf('.') === -1;
      }));
    };
    /**
     * Method will trigger before send the request to server side.
     * Used to set the custom header or modify the request options.
     *
     * @param  {DataManager} dm
     * @param  {Request} request
     * @param  {Fetch} settings
     * @returns void
     */
    ODataV4Adaptor.prototype.beforeSend = function (dm, request, settings) {
      if (settings.type === 'POST' || settings.type === 'PUT' || settings.type === 'PATCH') {
        request.headers.set('Prefer', 'return=representation');
      }
      request.headers.set('Accept', this.options.accept);
    };
    /**
     * Returns the data from the query processing.
     *
     * @param {DataResult} data
     * @param {DataOptions} ds?
     * @param {Query} query?
     * @param {Request} xhr?
     * @param {Fetch} request?
     * @param {CrudOptions} changes?
     * @param ds
     * @param query
     * @param xhr
     * @param request
     * @param changes
     * @returns aggregateResult
     */
    ODataV4Adaptor.prototype.processResponse = function (data, ds, query, xhr, request, changes) {
      var metaName = '@odata.context';
      var metaV4Name = '@context';
      if (request && request.type === 'GET' && !this.rootUrl && (data[metaName] || data[metaV4Name])) {
        var dataUrl = data[metaName] ? data[metaName].split('/$metadata#') : data[metaV4Name].split('/$metadata#');
        this.rootUrl = dataUrl[0];
        this.resourceTableName = dataUrl[1];
      }
      var pvtData = 'pvtData';
      var pvt = request && request[pvtData];
      var emptyAndBatch = _super.prototype.processBatchResponse.call(this, data, query, xhr, request, changes);
      if (emptyAndBatch) {
        return emptyAndBatch;
      }
      var count = null;
      var dataCount = '@odata.count';
      var dataV4Count = '@count';
      if (query && query.isCountRequired) {
        if (dataCount in data) {
          count = data[dataCount];
        } else if (dataV4Count in data) {
          count = data[dataV4Count];
        }
      }
      data = !sf.base.isNullOrUndefined(data.value) ? data.value : data;
      var args = {};
      args.count = count;
      args.result = data;
      this.getAggregateResult(pvt, data, args, null, query);
      return DataUtil.isNull(count) ? args.result : {
        result: args.result,
        count: count,
        aggregates: args.aggregates
      };
    };
    return ODataV4Adaptor;
  }(ODataAdaptor);
  /**
   * The Web API is a programmatic interface to define the request and response messages system that is mostly exposed in JSON or XML.
   * The DataManager uses the WebApiAdaptor to consume Web API.
   * Since this adaptor is targeted to interact with Web API created using OData endpoint, it is extended from ODataAdaptor
   *
   * @hidden
   */
  var WebApiAdaptor = /** @class */function (_super) {
    __extends(WebApiAdaptor, _super);
    function WebApiAdaptor() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    WebApiAdaptor.prototype.getModuleName = function () {
      return 'WebApiAdaptor';
    };
    /**
     * Prepare and returns request body which is used to insert a new record in the table.
     *
     * @param {DataManager} dm
     * @param {Object} data
     * @param {string} tableName?
     * @param tableName
     */
    WebApiAdaptor.prototype.insert = function (dm, data, tableName) {
      return {
        type: 'POST',
        url: dm.dataSource.url,
        data: JSON.stringify(data)
      };
    };
    /**
     * Prepare and return request body which is used to remove record from the table.
     *
     * @param {DataManager} dm
     * @param {string} keyField
     * @param {number} value
     * @param {string} tableName?
     * @param tableName
     */
    WebApiAdaptor.prototype.remove = function (dm, keyField, value, tableName) {
      return {
        type: 'DELETE',
        url: dm.dataSource.url + '/' + value,
        data: JSON.stringify(value)
      };
    };
    /**
     * Prepare and return request body which is used to update record.
     *
     * @param {DataManager} dm
     * @param {string} keyField
     * @param {Object} value
     * @param {string} tableName?
     * @param tableName
     */
    WebApiAdaptor.prototype.update = function (dm, keyField, value, tableName) {
      return {
        type: 'PUT',
        url: dm.dataSource.url,
        data: JSON.stringify(value)
      };
    };
    WebApiAdaptor.prototype.batchRequest = function (dm, changes, e) {
      var _this = this;
      var initialGuid = e.guid = DataUtil.getGuid(this.options.batchPre);
      var url = dm.dataSource.url.replace(/\/*$/, '/' + this.options.batch);
      e.url = this.resourceTableName ? this.resourceTableName : e.url;
      var req = [];
      var _loop_1 = function _loop_1(i, x) {
        changes.addedRecords.forEach(function (j, d) {
          var stat = {
            'method': 'POST ',
            'url': function url(data, i, key) {
              return '';
            },
            'data': function data(_data4, i) {
              return JSON.stringify(_data4[i]) + '\n\n';
            }
          };
          req.push('--' + initialGuid);
          req.push('Content-Type: application/http; msgtype=request', '');
          req.push('POST ' + '/api/' + (dm.dataSource.insertUrl || dm.dataSource.crudUrl || e.url) + stat.url(changes.addedRecords, i, e.key) + ' HTTP/1.1');
          req.push('Content-Type: ' + 'application/json; charset=utf-8');
          req.push('Host: ' + location.host);
          req.push('', j ? JSON.stringify(j) : '');
        });
      };
      //insertion
      for (var i = 0, x = changes.addedRecords.length; i < x; i++) {
        _loop_1(i, x);
      }
      var _loop_2 = function _loop_2(i, x) {
        changes.changedRecords.forEach(function (j, d) {
          var stat = {
            'method': _this.options.updateType + ' ',
            'url': function url(data, i, key) {
              return '';
            },
            'data': function data(_data5, i) {
              return JSON.stringify(_data5[i]) + '\n\n';
            }
          };
          req.push('--' + initialGuid);
          req.push('Content-Type: application/http; msgtype=request', '');
          req.push('PUT ' + '/api/' + (dm.dataSource.updateUrl || dm.dataSource.crudUrl || e.url) + stat.url(changes.changedRecords, i, e.key) + ' HTTP/1.1');
          req.push('Content-Type: ' + 'application/json; charset=utf-8');
          req.push('Host: ' + location.host);
          req.push('', j ? JSON.stringify(j) : '');
        });
      };
      //updation
      for (var i = 0, x = changes.changedRecords.length; i < x; i++) {
        _loop_2(i, x);
      }
      var _loop_3 = function _loop_3(i, x) {
        changes.deletedRecords.forEach(function (j, d) {
          var state = {
            'mtd': 'DELETE ',
            'url': function url(data, i, key) {
              var url = DataUtil.getObject(key, data[i]);
              if (typeof url === 'number' || DataUtil.parse.isGuid(url)) {
                return '/' + url;
              } else if (url instanceof Date) {
                var datTime = data[i][key];
                return '/' + datTime.toJSON();
              } else {
                return "/'" + url + "'";
              }
            },
            'data': function data(_data6, i) {
              return '';
            }
          };
          req.push('--' + initialGuid);
          req.push('Content-Type: application/http; msgtype=request', '');
          req.push('DELETE ' + '/api/' + (dm.dataSource.removeUrl || dm.dataSource.crudUrl || e.url) + state.url(changes.deletedRecords, i, e.key) + ' HTTP/1.1');
          req.push('Content-Type: ' + 'application/json; charset=utf-8');
          req.push('Host: ' + location.host);
          req.push('', j ? JSON.stringify(j) : '');
        });
      };
      //deletion
      for (var i = 0, x = changes.deletedRecords.length; i < x; i++) {
        _loop_3(i, x);
      }
      req.push('--' + initialGuid + '--', '');
      return {
        type: 'POST',
        url: url,
        contentType: 'multipart/mixed; boundary=' + initialGuid,
        data: req.join('\r\n')
      };
    };
    /**
     * Method will trigger before send the request to server side.
     * Used to set the custom header or modify the request options.
     *
     * @param  {DataManager} dm
     * @param  {Request} request
     * @param  {Fetch} settings
     * @returns void
     */
    WebApiAdaptor.prototype.beforeSend = function (dm, request, settings) {
      request.headers.set('Accept', 'application/json, text/javascript, */*; q=0.01');
    };
    /**
     * Returns the data from the query processing.
     *
     * @param {DataResult} data
     * @param {DataOptions} ds?
     * @param {Query} query?
     * @param {Request} xhr?
     * @param {Fetch} request?
     * @param {CrudOptions} changes?
     * @param ds
     * @param query
     * @param xhr
     * @param request
     * @param changes
     * @returns aggregateResult
     */
    WebApiAdaptor.prototype.processResponse = function (data, ds, query, xhr, request, changes) {
      var pvtData = 'pvtData';
      var pvt = request && request[pvtData];
      var count = null;
      var args = {};
      if (request && request.type.toLowerCase() !== 'post') {
        var versionCheck = xhr && request.fetchRequest.headers.get('DataServiceVersion');
        var version = versionCheck && parseInt(versionCheck, 10) || 2;
        if (query && query.isCountRequired) {
          if (!DataUtil.isNull(data.Count)) {
            count = data.Count;
          }
        }
        if (version < 3 && data.Items) {
          data = data.Items;
        }
        args.count = count;
        args.result = data;
        this.getAggregateResult(pvt, data, args, null, query);
      }
      args.result = args.result || data;
      return DataUtil.isNull(count) ? args.result : {
        result: args.result,
        count: args.count,
        aggregates: args.aggregates
      };
    };
    return WebApiAdaptor;
  }(ODataAdaptor);
  /**
   * WebMethodAdaptor can be used by DataManager to interact with web method.
   *
   * @hidden
   */
  var WebMethodAdaptor = /** @class */function (_super) {
    __extends(WebMethodAdaptor, _super);
    function WebMethodAdaptor() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Prepare the request body based on the query.
     * The query information can be accessed at the WebMethod using variable named `value`.
     *
     * @param {DataManager} dm
     * @param {Query} query
     * @param {Object[]} hierarchyFilters?
     * @param hierarchyFilters
     * @returns application
     */
    WebMethodAdaptor.prototype.processQuery = function (dm, query, hierarchyFilters) {
      var obj = new UrlAdaptor().processQuery(dm, query, hierarchyFilters);
      var getData = 'data';
      var data = DataUtil.parse.parseJson(obj[getData]);
      var result = {};
      var value = 'value';
      if (data.param) {
        for (var i = 0; i < data.param.length; i++) {
          var param = data.param[i];
          var key = Object.keys(param)[0];
          result[key] = param[key];
        }
      }
      result[value] = data;
      var pvtData = 'pvtData';
      var url = 'url';
      return {
        data: JSON.stringify(result),
        url: obj[url],
        pvtData: obj[pvtData],
        type: 'POST',
        contentType: 'application/json; charset=utf-8'
      };
    };
    return WebMethodAdaptor;
  }(UrlAdaptor);
  /**
   * RemoteSaveAdaptor, extended from JsonAdaptor and it is used for binding local data and performs all DataManager queries in client-side.
   * It interacts with server-side only for CRUD operations.
   *
   * @hidden
   */
  var RemoteSaveAdaptor = /** @class */function (_super) {
    __extends(RemoteSaveAdaptor, _super);
    /**
     * @hidden
     */
    function RemoteSaveAdaptor() {
      var _this = _super.call(this) || this;
      sf.base.setValue('beforeSend', UrlAdaptor.prototype.beforeSend, _this);
      return _this;
    }
    RemoteSaveAdaptor.prototype.insert = function (dm, data, tableName, query, position) {
      this.pvt.position = position;
      this.updateType = 'add';
      return {
        url: dm.dataSource.insertUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(sf.base.extend({}, {
          value: data,
          table: tableName,
          action: 'insert'
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor.prototype.remove = function (dm, keyField, val, tableName, query) {
      _super.prototype.remove.call(this, dm, keyField, val);
      return {
        type: 'POST',
        url: dm.dataSource.removeUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(sf.base.extend({}, {
          key: val,
          keyColumn: keyField,
          table: tableName,
          action: 'remove'
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor.prototype.update = function (dm, keyField, val, tableName, query) {
      this.updateType = 'update';
      this.updateKey = keyField;
      return {
        type: 'POST',
        url: dm.dataSource.updateUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(sf.base.extend({}, {
          value: val,
          action: 'update',
          keyColumn: keyField,
          key: val[keyField],
          table: tableName
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor.prototype.processResponse = function (data, ds, query, xhr, request, changes, e) {
      var i;
      var newData = request ? JSON.parse(request.data) : data;
      data = newData.action === 'batch' ? DataUtil.parse.parseJson(data) : data;
      if (this.updateType === 'add') {
        _super.prototype.insert.call(this, ds, data, null, null, this.pvt.position);
      }
      if (this.updateType === 'update') {
        _super.prototype.update.call(this, ds, this.updateKey, data);
      }
      this.updateType = undefined;
      if (data.added) {
        for (i = 0; i < data.added.length; i++) {
          _super.prototype.insert.call(this, ds, data.added[i]);
        }
      }
      if (data.changed) {
        for (i = 0; i < data.changed.length; i++) {
          _super.prototype.update.call(this, ds, e.key, data.changed[i]);
        }
      }
      if (data.deleted) {
        for (i = 0; i < data.deleted.length; i++) {
          _super.prototype.remove.call(this, ds, e.key, data.deleted[i]);
        }
      }
      return data;
    };
    /**
     * Prepare the request body based on the newly added, removed and updated records.
     * Also perform the changes in the locally cached data to sync with the remote data.
     * The result is used by the batch request.
     *
     * @param {DataManager} dm
     * @param {CrudOptions} changes
     * @param {RemoteArgs} e
     * @param query
     * @param original
     */
    RemoteSaveAdaptor.prototype.batchRequest = function (dm, changes, e, query, original) {
      return {
        type: 'POST',
        url: dm.dataSource.batchUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        data: JSON.stringify(sf.base.extend({}, {
          changed: changes.changedRecords,
          added: changes.addedRecords,
          deleted: changes.deletedRecords,
          action: 'batch',
          table: e.url,
          key: e.key
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor.prototype.addParams = function (options) {
      var urlParams = new UrlAdaptor();
      urlParams.addParams(options);
    };
    return RemoteSaveAdaptor;
  }(JsonAdaptor);
  /**
   * Fetch Adaptor that is extended from URL Adaptor, is used for handle data operations with user defined functions.
   *
   * @hidden
   */
  var CustomDataAdaptor = /** @class */function (_super) {
    __extends(CustomDataAdaptor, _super);
    function CustomDataAdaptor(props) {
      var _this = _super.call(this) || this;
      // options replaced the default adaptor options
      _this.options = sf.base.extend({}, _this.options, {
        getData: new Function(),
        addRecord: new Function(),
        updateRecord: new Function(),
        deleteRecord: new Function(),
        batchUpdate: new Function()
      });
      sf.base.extend(_this.options, props || {});
      return _this;
    }
    CustomDataAdaptor.prototype.getModuleName = function () {
      return 'CustomDataAdaptor';
    };
    return CustomDataAdaptor;
  }(UrlAdaptor);
  /**
   * The GraphqlAdaptor that is extended from URL Adaptor, is used for retrieving data from the Graphql server.
   * It interacts with the Graphql server with all the DataManager Queries and performs CRUD operations.
   *
   * @hidden
   */
  var GraphQLAdaptor = /** @class */function (_super) {
    __extends(GraphQLAdaptor, _super);
    function GraphQLAdaptor(options) {
      var _this = _super.call(this) || this;
      _this.opt = options;
      _this.schema = _this.opt.response;
      _this.query = _this.opt.query;
      /* eslint-disable @typescript-eslint/no-empty-function */
      // tslint:disable-next-line:no-empty
      _this.getVariables = _this.opt.getVariables ? _this.opt.getVariables : function () {};
      /* eslint-enable @typescript-eslint/no-empty-function */
      _this.getQuery = function () {
        return _this.query;
      };
      return _this;
    }
    GraphQLAdaptor.prototype.getModuleName = function () {
      return 'GraphQLAdaptor';
    };
    /**
     * Process the JSON data based on the provided queries.
     *
     * @param {DataManager} dm
     * @param {Query} query?
     * @param datamanager
     * @param query
     */
    GraphQLAdaptor.prototype.processQuery = function (datamanager, query) {
      var urlQuery = _super.prototype.processQuery.apply(this, arguments);
      var dm = JSON.parse(urlQuery.data);
      // constructing GraphQL parameters
      var keys = ['skip', 'take', 'sorted', 'table', 'select', 'where', 'search', 'requiresCounts', 'aggregates', 'params'];
      var temp = {};
      var str = 'searchwhereparams';
      keys.filter(function (e) {
        temp[e] = str.indexOf(e) > -1 ? JSON.stringify(dm[e]) : dm[e];
      });
      var vars = this.getVariables() || {};
      // tslint:disable-next-line:no-string-literal
      vars['datamanager'] = temp;
      var data = JSON.stringify({
        query: this.getQuery(),
        variables: vars
      });
      urlQuery.data = data;
      return urlQuery;
    };
    /**
     * Returns the data from the query processing.
     * It will also cache the data for later usage.
     *
     * @param {DataResult} data
     * @param {DataManager} ds?
     * @param {Query} query?
     * @param {Request} xhr?
     * @param {Object} request?
     * @param resData
     * @param ds
     * @param query
     * @param xhr
     * @param request
     * @returns DataResult
     */
    GraphQLAdaptor.prototype.processResponse = function (resData, ds, query, xhr, request) {
      var res = resData;
      var count;
      var aggregates;
      var result = sf.base.getValue(this.schema.result, res.data);
      if (this.schema.count) {
        count = sf.base.getValue(this.schema.count, res.data);
      }
      if (this.schema.aggregates) {
        aggregates = sf.base.getValue(this.schema.aggregates, res.data);
        aggregates = !sf.base.isNullOrUndefined(aggregates) ? DataUtil.parse.parseJson(aggregates) : aggregates;
      }
      var pvt = request.pvtData || {};
      var args = {
        result: result,
        aggregates: aggregates
      };
      var data = args;
      if (pvt && pvt.groups && pvt.groups.length) {
        this.getAggregateResult(pvt, data, args, null, query);
      }
      return !sf.base.isNullOrUndefined(count) ? {
        result: args.result,
        count: count,
        aggregates: aggregates
      } : args.result;
    };
    /**
     * Prepare and returns request body which is used to insert a new record in the table.
     */
    GraphQLAdaptor.prototype.insert = function () {
      var inserted = _super.prototype.insert.apply(this, arguments);
      return this.generateCrudData(inserted, 'insert');
    };
    /**
     * Prepare and returns request body which is used to update a new record in the table.
     */
    GraphQLAdaptor.prototype.update = function () {
      var inserted = _super.prototype.update.apply(this, arguments);
      return this.generateCrudData(inserted, 'update');
    };
    /**
     * Prepare and returns request body which is used to remove a new record in the table.
     */
    GraphQLAdaptor.prototype.remove = function () {
      var inserted = _super.prototype.remove.apply(this, arguments);
      return this.generateCrudData(inserted, 'remove');
    };
    /**
     * Prepare the request body based on the newly added, removed and updated records.
     * The result is used by the batch request.
     *
     * @param {DataManager} dm
     * @param {CrudOptions} changes
     * @param {Object} e
     * @param e.key
     * @param {Query} query
     * @param {Object} original
     */
    GraphQLAdaptor.prototype.batchRequest = function (dm, changes, e, query, original) {
      var batch = _super.prototype.batchRequest.apply(this, arguments);
      // tslint:disable-next-line:typedef
      var bData = JSON.parse(batch.data);
      bData.key = e.key;
      batch.data = JSON.stringify(bData);
      return this.generateCrudData(batch, 'batch');
    };
    GraphQLAdaptor.prototype.generateCrudData = function (crudData, action) {
      var parsed = JSON.parse(crudData.data);
      crudData.data = JSON.stringify({
        query: this.opt.getMutation(action),
        variables: parsed
      });
      return crudData;
    };
    return GraphQLAdaptor;
  }(UrlAdaptor);
  /**
   * Cache Adaptor is used to cache the data of the visited pages. It prevents new requests for the previously visited pages.
   * You can configure cache page size and duration of caching by using cachingPageSize and timeTillExpiration properties of the DataManager
   *
   * @hidden
   */
  var CacheAdaptor = /** @class */function (_super) {
    __extends(CacheAdaptor, _super);
    /**
     * Constructor for CacheAdaptor class.
     *
     * @param {CacheAdaptor} adaptor?
     * @param {number} timeStamp?
     * @param {number} pageSize?
     * @param adaptor
     * @param timeStamp
     * @param pageSize
     * @hidden
     */
    function CacheAdaptor(adaptor, timeStamp, pageSize) {
      var _this = _super.call(this) || this;
      _this.isCrudAction = false;
      _this.isInsertAction = false;
      if (!sf.base.isNullOrUndefined(adaptor)) {
        _this.cacheAdaptor = adaptor;
      }
      _this.pageSize = pageSize;
      _this.guidId = DataUtil.getGuid('cacheAdaptor');
      var obj = {
        keys: [],
        results: []
      };
      window.localStorage.setItem(_this.guidId, JSON.stringify(obj));
      var guid = _this.guidId;
      if (!sf.base.isNullOrUndefined(timeStamp)) {
        setInterval(function () {
          var data = DataUtil.parse.parseJson(window.localStorage.getItem(guid));
          var forDel = [];
          for (var i = 0; i < data.results.length; i++) {
            var currentTime = +new Date();
            var requestTime = +new Date(data.results[i].timeStamp);
            data.results[i].timeStamp = currentTime - requestTime;
            if (currentTime - requestTime > timeStamp) {
              forDel.push(i);
            }
          }
          for (var i = 0; i < forDel.length; i++) {
            data.results.splice(forDel[i], 1);
            data.keys.splice(forDel[i], 1);
          }
          window.localStorage.removeItem(guid);
          window.localStorage.setItem(guid, JSON.stringify(data));
        }, timeStamp);
      }
      return _this;
    }
    /**
     * It will generate the key based on the URL when we send a request to server.
     *
     * @param {string} url
     * @param {Query} query?
     * @param query
     * @hidden
     */
    CacheAdaptor.prototype.generateKey = function (url, query) {
      var queries = this.getQueryRequest(query);
      var singles = Query.filterQueryLists(query.queries, ['onSelect', 'onPage', 'onSkip', 'onTake', 'onRange']);
      var key = url;
      var page = 'onPage';
      if (page in singles) {
        key += singles[page].pageIndex;
      }
      queries.sorts.forEach(function (obj) {
        key += obj.e.direction + obj.e.fieldName;
      });
      queries.groups.forEach(function (obj) {
        key += obj.e.fieldName;
      });
      queries.searches.forEach(function (obj) {
        key += obj.e.searchKey;
      });
      for (var filter = 0; filter < queries.filters.length; filter++) {
        var currentFilter = queries.filters[filter];
        if (currentFilter.e.isComplex) {
          var newQuery = query.clone();
          newQuery.queries = [];
          for (var i = 0; i < currentFilter.e.predicates.length; i++) {
            newQuery.queries.push({
              fn: 'onWhere',
              e: currentFilter.e.predicates[i],
              filter: query.queries.filter
            });
          }
          key += currentFilter.e.condition + this.generateKey(url, newQuery);
        } else {
          key += currentFilter.e.field + currentFilter.e.operator + currentFilter.e.value;
        }
      }
      return key;
    };
    /**
     * Process the query to generate request body.
     * If the data is already cached, it will return the cached data.
     *
     * @param {DataManager} dm
     * @param {Query} query?
     * @param {Object[]} hierarchyFilters?
     * @param query
     * @param hierarchyFilters
     */
    CacheAdaptor.prototype.processQuery = function (dm, query, hierarchyFilters) {
      var key = this.generateKey(dm.dataSource.url, query);
      var cachedItems = DataUtil.parse.parseJson(window.localStorage.getItem(this.guidId));
      var data = cachedItems ? cachedItems.results[cachedItems.keys.indexOf(key)] : null;
      if (data != null && !this.isCrudAction && !this.isInsertAction) {
        return data;
      }
      this.isCrudAction = null;
      this.isInsertAction = null;
      /* eslint-disable prefer-spread */
      return this.cacheAdaptor.processQuery.apply(this.cacheAdaptor, [].slice.call(arguments, 0));
      /* eslint-enable prefer-spread */
    };
    /**
     * Returns the data from the query processing.
     * It will also cache the data for later usage.
     *
     * @param {DataResult} data
     * @param {DataManager} ds?
     * @param {Query} query?
     * @param {Request} xhr?
     * @param {Fetch} request?
     * @param {CrudOptions} changes?
     * @param ds
     * @param query
     * @param xhr
     * @param request
     * @param changes
     */
    CacheAdaptor.prototype.processResponse = function (data, ds, query, xhr, request, changes) {
      if (this.isInsertAction || request && this.cacheAdaptor.options.batch && DataUtil.endsWith(request.url, this.cacheAdaptor.options.batch) && request.type.toLowerCase() === 'post') {
        return this.cacheAdaptor.processResponse(data, ds, query, xhr, request, changes);
      }
      /* eslint-disable prefer-spread */
      data = this.cacheAdaptor.processResponse.apply(this.cacheAdaptor, [].slice.call(arguments, 0));
      /* eslint-enable prefer-spread */
      var key = query ? this.generateKey(ds.dataSource.url, query) : ds.dataSource.url;
      var obj = {};
      obj = DataUtil.parse.parseJson(window.localStorage.getItem(this.guidId));
      var index = obj.keys.indexOf(key);
      if (index !== -1) {
        obj.results.splice(index, 1);
        obj.keys.splice(index, 1);
      }
      obj.results[obj.keys.push(key) - 1] = {
        keys: key,
        result: data.result,
        timeStamp: new Date(),
        count: data.count
      };
      while (obj.results.length > this.pageSize) {
        obj.results.splice(0, 1);
        obj.keys.splice(0, 1);
      }
      window.localStorage.setItem(this.guidId, JSON.stringify(obj));
      return data;
    };
    /**
     * Method will trigger before send the request to server side. Used to set the custom header or modify the request options.
     *
     * @param {DataManager} dm
     * @param {Request} request
     * @param {Fetch} settings?
     * @param settings
     */
    CacheAdaptor.prototype.beforeSend = function (dm, request, settings) {
      if (!sf.base.isNullOrUndefined(this.cacheAdaptor.options.batch) && DataUtil.endsWith(settings.url, this.cacheAdaptor.options.batch) && settings.type.toLowerCase() === 'post') {
        request.headers.set('Accept', this.cacheAdaptor.options.multipartAccept);
      }
      if (!dm.dataSource.crossDomain) {
        request.headers.set('Accept', this.cacheAdaptor.options.accept);
      }
    };
    /**
     * Updates existing record and saves the changes to the table.
     *
     * @param  {DataManager} dm
     * @param  {string} keyField
     * @param  {Object} value
     * @param  {string} tableName
     */
    CacheAdaptor.prototype.update = function (dm, keyField, value, tableName) {
      this.isCrudAction = true;
      return this.cacheAdaptor.update(dm, keyField, value, tableName);
    };
    /**
     * Prepare and returns request body which is used to insert a new record in the table.
     *
     * @param {DataManager} dm
     * @param {Object} data
     * @param {string} tableName?
     * @param tableName
     */
    CacheAdaptor.prototype.insert = function (dm, data, tableName) {
      this.isInsertAction = true;
      return this.cacheAdaptor.insert(dm, data, tableName);
    };
    /**
     * Prepare and return request body which is used to remove record from the table.
     *
     * @param {DataManager} dm
     * @param {string} keyField
     * @param {Object} value
     * @param {string} tableName?
     * @param tableName
     */
    CacheAdaptor.prototype.remove = function (dm, keyField, value, tableName) {
      this.isCrudAction = true;
      return this.cacheAdaptor.remove(dm, keyField, value, tableName);
    };
    /**
     * Prepare the request body based on the newly added, removed and updated records.
     * The result is used by the batch request.
     *
     * @param  {DataManager} dm
     * @param  {CrudOptions} changes
     * @param  {RemoteArgs} e
     */
    CacheAdaptor.prototype.batchRequest = function (dm, changes, e) {
      return this.cacheAdaptor.batchRequest(dm, changes, e);
    };
    return CacheAdaptor;
  }(UrlAdaptor);

  /* eslint-disable valid-jsdoc */
  /* eslint-disable security/detect-object-injection */
  /**
   * DataManager is used to manage and manipulate relational data.
   */
  var DataManager = /** @class */function () {
    /**
     * Constructor for DataManager class
     *
     * @param {DataOptions|JSON[]} dataSource?
     * @param {Query} query?
     * @param {AdaptorOptions|string} adaptor?
     * @param dataSource
     * @param query
     * @param adaptor
     * @hidden
     */
    function DataManager(dataSource, query, adaptor) {
      var _this = this;
      /** @hidden */
      this.dateParse = true;
      /** @hidden */
      this.timeZoneHandling = true;
      this.persistQuery = {};
      this.isInitialLoad = false;
      this.requests = [];
      this.isInitialLoad = true;
      if (!dataSource && !this.dataSource) {
        dataSource = [];
      }
      adaptor = adaptor || dataSource.adaptor;
      if (dataSource && dataSource.timeZoneHandling === false) {
        this.timeZoneHandling = dataSource.timeZoneHandling;
      }
      var data;
      if (dataSource instanceof Array) {
        data = {
          json: dataSource,
          offline: true
        };
      } else if (_typeof(dataSource) === 'object') {
        if (!dataSource.json) {
          dataSource.json = [];
        }
        if (!dataSource.enablePersistence) {
          dataSource.enablePersistence = false;
        }
        if (!dataSource.id) {
          dataSource.id = '';
        }
        if (!dataSource.ignoreOnPersist) {
          dataSource.ignoreOnPersist = [];
        }
        data = {
          url: dataSource.url,
          insertUrl: dataSource.insertUrl,
          removeUrl: dataSource.removeUrl,
          updateUrl: dataSource.updateUrl,
          crudUrl: dataSource.crudUrl,
          batchUrl: dataSource.batchUrl,
          json: dataSource.json,
          headers: dataSource.headers,
          accept: dataSource.accept,
          data: dataSource.data,
          timeTillExpiration: dataSource.timeTillExpiration,
          cachingPageSize: dataSource.cachingPageSize,
          enableCaching: dataSource.enableCaching,
          requestType: dataSource.requestType,
          key: dataSource.key,
          crossDomain: dataSource.crossDomain,
          jsonp: dataSource.jsonp,
          dataType: dataSource.dataType,
          offline: dataSource.offline !== undefined ? dataSource.offline : dataSource.adaptor instanceof RemoteSaveAdaptor || dataSource.adaptor instanceof CustomDataAdaptor ? false : dataSource.url ? false : true,
          requiresFormat: dataSource.requiresFormat,
          enablePersistence: dataSource.enablePersistence,
          id: dataSource.id,
          ignoreOnPersist: dataSource.ignoreOnPersist
        };
      } else {
        DataUtil.throwError('DataManager: Invalid arguments');
      }
      if (data.requiresFormat === undefined && !DataUtil.isCors()) {
        data.requiresFormat = sf.base.isNullOrUndefined(data.crossDomain) ? true : data.crossDomain;
      }
      if (data.dataType === undefined) {
        data.dataType = 'json';
      }
      this.dataSource = data;
      this.defaultQuery = query;
      if (this.dataSource.enablePersistence && this.dataSource.id) {
        window.addEventListener('unload', this.setPersistData.bind(this));
      }
      if (data.url && data.offline && !data.json.length) {
        this.isDataAvailable = false;
        this.adaptor = adaptor || new ODataAdaptor();
        this.dataSource.offline = false;
        this.ready = this.executeQuery(query || new Query());
        this.ready.then(function (e) {
          _this.dataSource.offline = true;
          _this.isDataAvailable = true;
          data.json = e.result;
          _this.adaptor = new JsonAdaptor();
        });
      } else {
        this.adaptor = data.offline ? new JsonAdaptor() : new ODataAdaptor();
      }
      if (!data.jsonp && this.adaptor instanceof ODataAdaptor) {
        data.jsonp = 'callback';
      }
      this.adaptor = adaptor || this.adaptor;
      if (data.enableCaching) {
        this.adaptor = new CacheAdaptor(this.adaptor, data.timeTillExpiration, data.cachingPageSize);
      }
      return this;
    }
    /**
     * Get the queries maintained in the persisted state.
     * @param {string} id - The identifier of the persisted query to retrieve.
     * @returns {object} The persisted data object.
     */
    DataManager.prototype.getPersistedData = function (id) {
      var persistedData = localStorage.getItem(id || this.dataSource.id);
      return JSON.parse(persistedData);
    };
    /**
    * Set the queries to be maintained in the persisted state.
    * @param {Event} e - The event parameter that triggers the setPersistData method.
    * @param {string} id - The identifier of the persisted query to set.
    * @param {object} persistData - The data to be persisted.
    * @returns {void} .
    */
    DataManager.prototype.setPersistData = function (e, id, persistData) {
      localStorage.setItem(id || this.dataSource.id, JSON.stringify(persistData || this.persistQuery));
    };
    DataManager.prototype.setPersistQuery = function (query) {
      var _this = this;
      var persistedQuery = this.getPersistedData();
      if (this.isInitialLoad && persistedQuery && Object.keys(persistedQuery).length) {
        this.persistQuery = persistedQuery;
        this.persistQuery.queries = this.persistQuery.queries.filter(function (query) {
          if (_this.dataSource.ignoreOnPersist && _this.dataSource.ignoreOnPersist.length) {
            if (query.fn && _this.dataSource.ignoreOnPersist.some(function (keyword) {
              return query.fn === keyword;
            })) {
              return false; // Exclude the matching query
            }
          }
          if (query.fn === 'onWhere') {
            var e = query.e;
            if (e && e.isComplex && e.predicates instanceof Array) {
              var allPredicates = e.predicates.map(function (predicateObj) {
                if (predicateObj.predicates && predicateObj.predicates instanceof Array) {
                  // Process nested predicate array
                  var nestedPredicates = predicateObj.predicates.map(function (nestedPredicate) {
                    var field = nestedPredicate.field,
                      operator = nestedPredicate.operator,
                      value = nestedPredicate.value,
                      ignoreCase = nestedPredicate.ignoreCase,
                      ignoreAccent = nestedPredicate.ignoreAccent,
                      matchCase = nestedPredicate.matchCase;
                    return new Predicate(field, operator, value, ignoreCase, ignoreAccent, matchCase);
                  });
                  return predicateObj.condition === 'and' ? Predicate.and(nestedPredicates) : Predicate.or(nestedPredicates);
                } else {
                  // Process individual predicate
                  var field = predicateObj.field,
                    operator = predicateObj.operator,
                    value = predicateObj.value,
                    ignoreCase = predicateObj.ignoreCase,
                    ignoreAccent = predicateObj.ignoreAccent,
                    matchCase = predicateObj.matchCase;
                  return new Predicate(field, operator, value, ignoreCase, ignoreAccent, matchCase);
                }
              });
              query.e = new Predicate(allPredicates[0], e.condition, allPredicates.slice(1));
            }
          }
          return true; // Keep all other queries
        });
        var newQuery = sf.base.extend(new Query(), this.persistQuery);
        this.isInitialLoad = false;
        return newQuery;
      } else {
        this.persistQuery = query;
        this.isInitialLoad = false;
        return query;
      }
    };
    /**
     * Overrides DataManager's default query with given query.
     *
     * @param  {Query} query - Defines the new default query.
     */
    DataManager.prototype.setDefaultQuery = function (query) {
      this.defaultQuery = query;
      return this;
    };
    /**
     * Executes the given query with local data source.
     *
     * @param  {Query} query - Defines the query to retrieve data.
     */
    DataManager.prototype.executeLocal = function (query) {
      if (!this.defaultQuery && !(query instanceof Query)) {
        DataUtil.throwError('DataManager - executeLocal() : A query is required to execute');
      }
      if (!this.dataSource.json) {
        DataUtil.throwError('DataManager - executeLocal() : Json data is required to execute');
      }
      if (this.dataSource.enablePersistence && this.dataSource.id) {
        query = this.setPersistQuery(query);
      }
      query = query || this.defaultQuery;
      var result = this.adaptor.processQuery(this, query);
      if (query.subQuery) {
        var from = query.subQuery.fromTable;
        var lookup = query.subQuery.lookups;
        var res = query.isCountRequired ? result.result : result;
        if (lookup && lookup instanceof Array) {
          DataUtil.buildHierarchy(query.subQuery.fKey, from, res, lookup, query.subQuery.key);
        }
        for (var j = 0; j < res.length; j++) {
          if (res[j][from] instanceof Array) {
            res[j] = sf.base.extend({}, {}, res[j]);
            res[j][from] = this.adaptor.processResponse(query.subQuery.using(new DataManager(res[j][from].slice(0))).executeLocal(), this, query);
          }
        }
      }
      return this.adaptor.processResponse(result, this, query);
    };
    /**
     * Executes the given query with either local or remote data source.
     * It will be executed as asynchronously and returns Promise object which will be resolved or rejected after action completed.
     *
     * @param  {Query|Function} query - Defines the query to retrieve data.
     * @param  {Function} done - Defines the callback function and triggers when the Promise is resolved.
     * @param  {Function} fail - Defines the callback function and triggers when the Promise is rejected.
     * @param  {Function} always - Defines the callback function and triggers when the Promise is resolved or rejected.
     */
    DataManager.prototype.executeQuery = function (query, done, fail, always) {
      var _this = this;
      var makeRequest = 'makeRequest';
      if (this.dataSource.enablePersistence && this.dataSource.id) {
        query = this.setPersistQuery(query);
      }
      if (typeof query === 'function') {
        always = fail;
        fail = done;
        done = query;
        query = null;
      }
      if (!query) {
        query = this.defaultQuery;
      }
      if (!(query instanceof Query)) {
        DataUtil.throwError('DataManager - executeQuery() : A query is required to execute');
      }
      var deffered = new Deferred();
      var args = {
        query: query
      };
      if (!this.dataSource.offline && this.dataSource.url !== undefined && this.dataSource.url !== '' || !sf.base.isNullOrUndefined(this.adaptor[makeRequest]) || this.isCustomDataAdaptor(this.adaptor)) {
        var result = this.adaptor.processQuery(this, query);
        if (!sf.base.isNullOrUndefined(this.adaptor[makeRequest])) {
          this.adaptor[makeRequest](result, deffered, args, query);
        } else if (!sf.base.isNullOrUndefined(result.url) || this.isCustomDataAdaptor(this.adaptor)) {
          this.requests = [];
          this.makeRequest(result, deffered, args, query);
        } else {
          args = DataManager.getDeferedArgs(query, result, args);
          deffered.resolve(args);
        }
      } else {
        DataManager.nextTick(function () {
          var res = _this.executeLocal(query);
          args = DataManager.getDeferedArgs(query, res, args);
          deffered.resolve(args);
        });
      }
      if (done || fail) {
        deffered.promise.then(done, fail);
      }
      if (always) {
        deffered.promise.then(always, always);
      }
      return deffered.promise;
    };
    DataManager.getDeferedArgs = function (query, result, args) {
      if (query.isCountRequired) {
        args.result = result.result;
        args.count = result.count;
        args.aggregates = result.aggregates;
      } else {
        args.result = result;
      }
      return args;
    };
    DataManager.nextTick = function (fn) {
      /* eslint-disable @typescript-eslint/no-explicit-any */
      // tslint:disable-next-line:no-any
      (window.setImmediate || window.setTimeout)(fn, 0);
      /* eslint-enable @typescript-eslint/no-explicit-any */
    };
    DataManager.prototype.extendRequest = function (url, fnSuccess, fnFail) {
      return sf.base.extend({}, {
        type: 'GET',
        dataType: this.dataSource.dataType,
        crossDomain: this.dataSource.crossDomain,
        jsonp: this.dataSource.jsonp,
        cache: true,
        processData: false,
        onSuccess: fnSuccess,
        onFailure: fnFail
      }, url);
    };
    // tslint:disable-next-line:max-func-body-length
    DataManager.prototype.makeRequest = function (url, deffered, args, query) {
      var _this = this;
      var isSelector = !!query.subQuerySelector;
      var fnFail = function fnFail(e) {
        args.error = e;
        deffered.reject(args);
      };
      var process = function process(data, count, xhr, request, actual, aggregates, virtualSelectRecords) {
        args.xhr = xhr;
        args.count = count ? parseInt(count.toString(), 10) : 0;
        args.result = data;
        args.request = request;
        args.aggregates = aggregates;
        args.actual = actual;
        args.virtualSelectRecords = virtualSelectRecords;
        deffered.resolve(args);
      };
      var fnQueryChild = function fnQueryChild(data, selector) {
        var subDeffer = new Deferred();
        var childArgs = {
          parent: args
        };
        query.subQuery.isChild = true;
        var subUrl = _this.adaptor.processQuery(_this, query.subQuery, data ? _this.adaptor.processResponse(data) : selector);
        var childReq = _this.makeRequest(subUrl, subDeffer, childArgs, query.subQuery);
        if (!isSelector) {
          subDeffer.then(function (subData) {
            if (data) {
              DataUtil.buildHierarchy(query.subQuery.fKey, query.subQuery.fromTable, data, subData, query.subQuery.key);
              process(data, subData.count, subData.xhr);
            }
          }, fnFail);
        }
        return childReq;
      };
      var fnSuccess = function fnSuccess(data, request) {
        if (_this.isGraphQLAdaptor(_this.adaptor)) {
          // tslint:disable-next-line:no-string-literal
          if (!sf.base.isNullOrUndefined(data['errors'])) {
            // tslint:disable-next-line:no-string-literal
            return fnFail(data['errors'], request);
          }
        }
        if (_this.isCustomDataAdaptor(_this.adaptor)) {
          request = sf.base.extend({}, _this.fetchReqOption, request);
        }
        if (request.contentType.indexOf('xml') === -1 && _this.dateParse) {
          data = DataUtil.parse.parseJson(data);
        }
        var result = _this.adaptor.processResponse(data, _this, query, request.fetchRequest, request);
        var count = 0;
        var aggregates = null;
        var virtualSelectRecords = 'virtualSelectRecords';
        var virtualRecords = data[virtualSelectRecords];
        if (query.isCountRequired) {
          count = result.count;
          aggregates = result.aggregates;
          result = result.result;
        }
        if (!query.subQuery) {
          process(result, count, request.fetchRequest, request.type, data, aggregates, virtualRecords);
          return;
        }
        if (!isSelector) {
          fnQueryChild(result, request);
        }
      };
      var req = this.extendRequest(url, fnSuccess, fnFail);
      if (!this.isCustomDataAdaptor(this.adaptor)) {
        var fetch_1 = new sf.base.Fetch(req);
        fetch_1.beforeSend = function () {
          _this.beforeSend(fetch_1.fetchRequest, fetch_1);
        };
        req = fetch_1.send();
        req["catch"](function (e) {
          return true;
        }); // to handle failure remote requests.
        this.requests.push(fetch_1);
      } else {
        this.fetchReqOption = req;
        var request = req;
        this.adaptor.options.getData({
          data: request.data,
          onSuccess: request.onSuccess,
          onFailure: request.onFailure
        });
      }
      if (isSelector) {
        var promise = void 0;
        var res = query.subQuerySelector.call(this, {
          query: query.subQuery,
          parent: query
        });
        if (res && res.length) {
          promise = Promise.all([req, fnQueryChild(null, res)]);
          promise.then(function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
              args[_i] = arguments[_i];
            }
            var result = args[0];
            var pResult = _this.adaptor.processResponse(result[0], _this, query, _this.requests[0].fetchRequest, _this.requests[0]);
            var count = 0;
            if (query.isCountRequired) {
              count = pResult.count;
              pResult = pResult.result;
            }
            var cResult = _this.adaptor.processResponse(result[1], _this, query.subQuery, _this.requests[1].fetchRequest, _this.requests[1]);
            count = 0;
            if (query.subQuery.isCountRequired) {
              count = cResult.count;
              cResult = cResult.result;
            }
            DataUtil.buildHierarchy(query.subQuery.fKey, query.subQuery.fromTable, pResult, cResult, query.subQuery.key);
            isSelector = false;
            process(pResult, count, _this.requests[0].fetchRequest);
          });
        } else {
          isSelector = false;
        }
      }
      return req;
    };
    DataManager.prototype.beforeSend = function (request, settings) {
      this.adaptor.beforeSend(this, request, settings);
      var headers = this.dataSource.headers;
      var props;
      for (var i = 0; headers && i < headers.length; i++) {
        props = [];
        var keys = Object.keys(headers[i]);
        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
          var prop = keys_1[_i];
          props.push(prop);
          request.headers.set(prop, headers[i][prop]);
        }
      }
    };
    /**
     * Save bulk changes to the given table name.
     * User can add a new record, edit an existing record, and delete a record at the same time.
     * If the datasource from remote, then updated in a single post.
     *
     * @param {Object} changes - Defines the CrudOptions.
     * @param {string} key - Defines the column field.
     * @param {string|Query} tableName - Defines the table name.
     * @param {Query} query - Sets default query for the DataManager.
     * @param original
     */
    DataManager.prototype.saveChanges = function (changes, key, tableName, query, original) {
      var _this = this;
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var args = {
        url: tableName,
        key: key || this.dataSource.key
      };
      var req = this.adaptor.batchRequest(this, changes, args, query || new Query(), original);
      var dofetchRequest = 'dofetchRequest';
      if (this.dataSource.offline) {
        return req;
      }
      if (!sf.base.isNullOrUndefined(this.adaptor[dofetchRequest])) {
        return this.adaptor[dofetchRequest](req);
      } else if (!this.isCustomDataAdaptor(this.adaptor)) {
        var deff_1 = new Deferred();
        var fetch_2 = new sf.base.Fetch(req);
        fetch_2.beforeSend = function () {
          _this.beforeSend(fetch_2.fetchRequest, fetch_2);
        };
        fetch_2.onSuccess = function (data, request) {
          if (_this.isGraphQLAdaptor(_this.adaptor)) {
            // tslint:disable-next-line:no-string-literal
            if (!sf.base.isNullOrUndefined(data['errors'])) {
              // tslint:disable-next-line:no-string-literal
              fetch_2.onFailure(JSON.stringify(data['errors']));
            }
          }
          deff_1.resolve(_this.adaptor.processResponse(data, _this, null, request.fetchRequest, request, changes, args));
        };
        fetch_2.onFailure = function (e) {
          deff_1.reject([{
            error: e
          }]);
        };
        fetch_2.send()["catch"](function (e) {
          return true;
        }); // to handle the failure requests.
        return deff_1.promise;
      } else {
        return this.dofetchRequest(req, this.adaptor.options.batchUpdate);
      }
    };
    /**
     * Inserts new record in the given table.
     *
     * @param {Object} data - Defines the data to insert.
     * @param {string|Query} tableName - Defines the table name.
     * @param {Query} query - Sets default query for the DataManager.
     * @param position
     */
    DataManager.prototype.insert = function (data, tableName, query, position) {
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var req = this.adaptor.insert(this, data, tableName, query, position);
      var dofetchRequest = 'dofetchRequest';
      if (this.dataSource.offline) {
        return req;
      }
      if (!sf.base.isNullOrUndefined(this.adaptor[dofetchRequest])) {
        return this.adaptor[dofetchRequest](req);
      } else {
        return this.dofetchRequest(req, this.adaptor.options.addRecord);
      }
    };
    /**
     * Removes data from the table with the given key.
     *
     * @param  {string} keyField - Defines the column field.
     * @param  {Object} value - Defines the value to find the data in the specified column.
     * @param  {string|Query} tableName - Defines the table name
     * @param  {Query} query - Sets default query for the DataManager.
     */
    DataManager.prototype.remove = function (keyField, value, tableName, query) {
      if (_typeof(value) === 'object') {
        value = DataUtil.getObject(keyField, value);
      }
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var res = this.adaptor.remove(this, keyField, value, tableName, query);
      var dofetchRequest = 'dofetchRequest';
      if (this.dataSource.offline) {
        return res;
      }
      if (!sf.base.isNullOrUndefined(this.adaptor[dofetchRequest])) {
        return this.adaptor[dofetchRequest](res);
      } else {
        var remove = this.adaptor.options.deleteRecord;
        return this.dofetchRequest(res, remove);
      }
    };
    /**
     * Updates existing record in the given table.
     *
     * @param {string} keyField - Defines the column field.
     * @param {Object} value - Defines the value to find the data in the specified column.
     * @param {string|Query} tableName - Defines the table name
     * @param {Query} query - Sets default query for the DataManager.
     * @param original
     */
    DataManager.prototype.update = function (keyField, value, tableName, query, original) {
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var res = this.adaptor.update(this, keyField, value, tableName, query, original);
      var dofetchRequest = 'dofetchRequest';
      if (this.dataSource.offline) {
        return res;
      }
      if (!sf.base.isNullOrUndefined(this.adaptor[dofetchRequest])) {
        return this.adaptor[dofetchRequest](res);
      } else {
        var update = this.adaptor.options.updateRecord;
        return this.dofetchRequest(res, update);
      }
    };
    DataManager.prototype.isCustomDataAdaptor = function (dataSource) {
      return this.adaptor.getModuleName && this.adaptor.getModuleName() === 'CustomDataAdaptor';
    };
    DataManager.prototype.isGraphQLAdaptor = function (dataSource) {
      return this.adaptor.getModuleName && this.adaptor.getModuleName() === 'GraphQLAdaptor';
    };
    DataManager.prototype.successFunc = function (record, request) {
      if (this.isGraphQLAdaptor(this.adaptor)) {
        var data = JSON.parse(record);
        // tslint:disable-next-line:no-string-literal
        if (!sf.base.isNullOrUndefined(data['errors'])) {
          // tslint:disable-next-line:no-string-literal
          this.failureFunc(JSON.stringify(data['errors']));
        }
      }
      if (this.isCustomDataAdaptor(this.adaptor)) {
        request = sf.base.extend({}, this.fetchReqOption, request);
      }
      try {
        DataUtil.parse.parseJson(record);
      } catch (e) {
        record = [];
      }
      record = this.adaptor.processResponse(DataUtil.parse.parseJson(record), this, null, request.fetchRequest, request);
      this.fetchDeffered.resolve(record);
    };
    DataManager.prototype.failureFunc = function (e) {
      this.fetchDeffered.reject([{
        error: e
      }]);
    };
    DataManager.prototype.dofetchRequest = function (res, fetchFunc) {
      var _this = this;
      res = sf.base.extend({}, {
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        processData: false
      }, res);
      this.fetchDeffered = new Deferred();
      if (!this.isCustomDataAdaptor(this.adaptor)) {
        var fetch_3 = new sf.base.Fetch(res);
        fetch_3.beforeSend = function () {
          _this.beforeSend(fetch_3.fetchRequest, fetch_3);
        };
        fetch_3.onSuccess = this.successFunc.bind(this);
        fetch_3.onFailure = this.failureFunc.bind(this);
        fetch_3.send()["catch"](function (e) {
          return true;
        }); // to handle the failure requests.
      } else {
        this.fetchReqOption = res;
        fetchFunc.call(this, {
          data: res.data,
          onSuccess: this.successFunc.bind(this),
          onFailure: this.failureFunc.bind(this)
        });
      }
      return this.fetchDeffered.promise;
    };
    DataManager.prototype.clearPersistence = function () {
      window.removeEventListener('unload', this.setPersistData.bind(this));
      this.dataSource.enablePersistence = false;
      this.persistQuery = {};
      window.localStorage.setItem(this.dataSource.id, '[]');
    };
    return DataManager;
  }();
  /**
   * Deferred is used to handle asynchronous operation.
   */
  var Deferred = /** @class */function () {
    function Deferred() {
      var _this = this;
      /**
       * Promise is an object that represents a value that may not be available yet, but will be resolved at some point in the future.
       */
      this.promise = new Promise(function (resolve, reject) {
        _this.resolve = resolve;
        _this.reject = reject;
      });
      /**
       * Defines the callback function triggers when the Deferred object is resolved.
       */
      this.then = this.promise.then.bind(this.promise);
      /**
       * Defines the callback function triggers when the Deferred object is rejected.
       */
      this["catch"] = this.promise["catch"].bind(this.promise);
    }
    return Deferred;
  }();

  /**
   * Data modules
   */

  exports.DataManager = DataManager;
  exports.Deferred = Deferred;
  exports.Query = Query;
  exports.Predicate = Predicate;
  exports.Adaptor = Adaptor;
  exports.JsonAdaptor = JsonAdaptor;
  exports.UrlAdaptor = UrlAdaptor;
  exports.ODataAdaptor = ODataAdaptor;
  exports.ODataV4Adaptor = ODataV4Adaptor;
  exports.WebApiAdaptor = WebApiAdaptor;
  exports.WebMethodAdaptor = WebMethodAdaptor;
  exports.RemoteSaveAdaptor = RemoteSaveAdaptor;
  exports.CustomDataAdaptor = CustomDataAdaptor;
  exports.GraphQLAdaptor = GraphQLAdaptor;
  exports.CacheAdaptor = CacheAdaptor;
  exports.DataUtil = DataUtil;
  return exports;
};
sf.data = sf.data({});
sfBlazor.initBlazorAdaptor();

/***/ }),

/***/ "./modules/drawings.js":
/*!*****************************!*\
  !*** ./modules/drawings.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
window.sf = window.sf || {};
window.sf.drawings = function (exports) {
  'use strict';

  var __extends = undefined && undefined.__extends || function () {
    var _extendStatics = function extendStatics(d, b) {
      _extendStatics = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics(d, b);
    };
    return function (d, b) {
      _extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  /**   @private  */
  var getGradientType = function getGradientType(obj) {
    switch (obj.type) {
      case 'Linear':
        return LinearGradient;
      case 'Radial':
        return RadialGradient;
      default:
        return LinearGradient;
    }
  };
  /**
   * Layout Model module defines the styles and types to arrange objects in containers
   */
  var Thickness = /** @class */function () {
    function Thickness(left, right, top, bottom) {
      this.left = left;
      this.right = right;
      this.top = top;
      this.bottom = bottom;
    }
    return Thickness;
  }();
  /**
   * Defines the space to be left between an object and its immediate parent
   */
  var Margin = /** @class */function (_super) {
    __extends(Margin, _super);
    function Margin() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate([sf.base.Property(0)], Margin.prototype, "left", void 0);
    __decorate([sf.base.Property(0)], Margin.prototype, "right", void 0);
    __decorate([sf.base.Property(0)], Margin.prototype, "top", void 0);
    __decorate([sf.base.Property(0)], Margin.prototype, "bottom", void 0);
    return Margin;
  }(sf.base.ChildProperty);
  /**
   * Defines the different colors and the region of color transitions
   * ```html
   * <div id='diagram'></div>
   * ```
   * ```typescript
   * let stopscol: StopModel[] = [];
   * let stops1: StopModel = { color: 'white', offset: 0, opacity: 0.7 };
   * stopscol.push(stops1);
   * let stops2: StopModel = { color: 'red', offset: 0, opacity: 0.3 };
   * stopscol.push(stops2);
   * let gradient: RadialGradientModel = { cx: 50, cy: 50, fx: 50, fy: 50, stops: stopscol, type: 'Radial' };
   * let nodes: NodeModel[] = [{ id: 'node1', width: 100, height: 100,
   * style: { gradient: gradient }
   * }];
   * let diagram: Diagram = new Diagram({
   * ...
   *   nodes: nodes,
   * ...
   * });
   * diagram.appendTo('#diagram');
   * ```
   */
  var Stop = /** @class */function (_super) {
    __extends(Stop, _super);
    function Stop() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @private
     * Returns the name of class Stop
     */
    Stop.prototype.getClassName = function () {
      return 'Stop';
    };
    __decorate([sf.base.Property('')], Stop.prototype, "color", void 0);
    __decorate([sf.base.Property(0)], Stop.prototype, "offset", void 0);
    __decorate([sf.base.Property(1)], Stop.prototype, "opacity", void 0);
    return Stop;
  }(sf.base.ChildProperty);
  /**
   * Paints the node with a smooth transition from one color to another color
   */
  var Gradient = /** @class */function (_super) {
    __extends(Gradient, _super);
    function Gradient() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate([sf.base.Collection([], Stop)], Gradient.prototype, "stops", void 0);
    __decorate([sf.base.Property('None')], Gradient.prototype, "type", void 0);
    __decorate([sf.base.Property('')], Gradient.prototype, "id", void 0);
    return Gradient;
  }(sf.base.ChildProperty);
  /**
   * Defines the linear gradient of styles
   * ```html
   * <div id='diagram'></div>
   * ```
   * ```typescript
   * let stopscol: StopModel[] = [];
   * let stops1: StopModel = { color: 'white', offset: 0, opacity: 0.7 };
   * stopscol.push(stops1);
   * let stops2: StopModel = { color: 'red', offset: 0, opacity: 0.3 };
   * stopscol.push(stops2);
   * let gradient: LinearGradientModel = { x1: 0, x2: 50, y1: 0, y2: 50, stops: stopscol, type: 'Linear' };
   * let nodes: NodeModel[] = [{ id: 'node1', width: 100, height: 100,
   * style: { gradient: gradient }
   * }];
   * let diagram: Diagram = new Diagram({
   * ...
   *   nodes: nodes,
   * ...
   * });
   * diagram.appendTo('#diagram');
   * ```
   */
  /**
   * Paints the node with linear color transitions
   */
  var LinearGradient = /** @class */function (_super) {
    __extends(LinearGradient, _super);
    function LinearGradient() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate([sf.base.Property(0)], LinearGradient.prototype, "x1", void 0);
    __decorate([sf.base.Property(0)], LinearGradient.prototype, "x2", void 0);
    __decorate([sf.base.Property(0)], LinearGradient.prototype, "y1", void 0);
    __decorate([sf.base.Property(0)], LinearGradient.prototype, "y2", void 0);
    return LinearGradient;
  }(Gradient);
  /**
   * A focal point defines the beginning of the gradient, and a circle defines the end point of the gradient
   * ```html
   * <div id='diagram'></div>
   * ```
   * ```typescript
   * let stopscol: StopModel[] = [];
   * let stops1: StopModel = { color: 'white', offset: 0, opacity: 0.7 };
   * stopscol.push(stops1);
   * let stops2: StopModel = { color: 'red', offset: 0, opacity: 0.3 };
   * stopscol.push(stops2);
   * let gradient: RadialGradientModel = { cx: 50, cy: 50, fx: 50, fy: 50, stops: stopscol, type: 'Radial' };
   * let nodes: NodeModel[] = [{ id: 'node1', width: 100, height: 100,
   * style: { gradient: gradient }
   * }];
   * let diagram: Diagram = new Diagram({
   * ...
   *   nodes: nodes,
   * ...
   * });
   * diagram.appendTo('#diagram');
   * ```
   */
  var RadialGradient = /** @class */function (_super) {
    __extends(RadialGradient, _super);
    function RadialGradient() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate([sf.base.Property(0)], RadialGradient.prototype, "cx", void 0);
    __decorate([sf.base.Property(0)], RadialGradient.prototype, "cy", void 0);
    __decorate([sf.base.Property(0)], RadialGradient.prototype, "fx", void 0);
    __decorate([sf.base.Property(0)], RadialGradient.prototype, "fy", void 0);
    __decorate([sf.base.Property(50)], RadialGradient.prototype, "r", void 0);
    return RadialGradient;
  }(Gradient);
  /**
   * Defines the style of shape/path
   */
  var ShapeStyle = /** @class */function (_super) {
    __extends(ShapeStyle, _super);
    function ShapeStyle() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate([sf.base.Property('white')], ShapeStyle.prototype, "fill", void 0);
    __decorate([sf.base.Property('black')], ShapeStyle.prototype, "strokeColor", void 0);
    __decorate([sf.base.Property('')], ShapeStyle.prototype, "strokeDashArray", void 0);
    __decorate([sf.base.Property(1)], ShapeStyle.prototype, "strokeWidth", void 0);
    __decorate([sf.base.Property(1)], ShapeStyle.prototype, "opacity", void 0);
    __decorate([sf.base.ComplexFactory(getGradientType)], ShapeStyle.prototype, "gradient", void 0);
    return ShapeStyle;
  }(sf.base.ChildProperty);
  /**
   * Defines the stroke style of a path
   */
  var StrokeStyle = /** @class */function (_super) {
    __extends(StrokeStyle, _super);
    function StrokeStyle() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate([sf.base.Property('transparent')], StrokeStyle.prototype, "fill", void 0);
    return StrokeStyle;
  }(ShapeStyle);
  /**
   * Defines the appearance of text
   * ```html
   * <div id='diagram'></div>
   * ```
   * ```typescript
   * let style: TextStyleModel = { strokeColor: 'black', opacity: 0.5, strokeWidth: 1 };
   * let node: NodeModel;
   * node = {
   * ...
   * id: 'node', width: 100, height: 100, offsetX: 100, offsetY: 100,
   * annotations : [{
   * content: 'text', style: style }];
   * ...
   * };
   * let diagram: Diagram = new Diagram({
   * ...
   *   nodes: [node],
   * ...
   * });
   * diagram.appendTo('#diagram');
   * ```
   */
  var TextStyle = /** @class */function (_super) {
    __extends(TextStyle, _super);
    function TextStyle() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate([sf.base.Property('black')], TextStyle.prototype, "color", void 0);
    __decorate([sf.base.Property('Arial')], TextStyle.prototype, "fontFamily", void 0);
    __decorate([sf.base.Property(12)], TextStyle.prototype, "fontSize", void 0);
    __decorate([sf.base.Property(false)], TextStyle.prototype, "italic", void 0);
    __decorate([sf.base.Property(false)], TextStyle.prototype, "bold", void 0);
    __decorate([sf.base.Property('CollapseSpace')], TextStyle.prototype, "whiteSpace", void 0);
    __decorate([sf.base.Property('WrapWithOverflow')], TextStyle.prototype, "textWrapping", void 0);
    __decorate([sf.base.Property('Center')], TextStyle.prototype, "textAlign", void 0);
    __decorate([sf.base.Property('None')], TextStyle.prototype, "textDecoration", void 0);
    __decorate([sf.base.Property('Wrap')], TextStyle.prototype, "textOverflow", void 0);
    __decorate([sf.base.Property('transparent')], TextStyle.prototype, "fill", void 0);
    return TextStyle;
  }(ShapeStyle);

  /**
   * enum module defines the public enumerations
   */
  /**
   * Defines the container/canvas transform
   * Self - Sets the transform type as Self
   * Parent - Sets the transform type as Parent
   */

  (function (RotateTransform) {
    /** Self - Sets the transform type as Self */
    RotateTransform[RotateTransform["Self"] = 1] = "Self";
    /** Parent - Sets the transform type as Parent */
    RotateTransform[RotateTransform["Parent"] = 2] = "Parent";
  })(exports.RotateTransform || (exports.RotateTransform = {}));
  /** Enables/Disables The element actions
   * None - Diables all element actions are none
   * ElementIsPort - Enable element action is port
   * ElementIsGroup - Enable element action as Group
   * @private
   */

  (function (ElementAction) {
    /** Disables all element actions are none  */
    ElementAction[ElementAction["None"] = 0] = "None";
    /** Enable the element action is Port  */
    ElementAction[ElementAction["ElementIsPort"] = 2] = "ElementIsPort";
    /** Enable the element action as Group  */
    ElementAction[ElementAction["ElementIsGroup"] = 4] = "ElementIsGroup";
  })(exports.ElementAction || (exports.ElementAction = {}));
  /**
   * Defines the constraints to enable/disable certain features of connector.
   * * None - Interaction of the connectors cannot be done.
   * * Select - Selects the connector.
   * * Delete - Delete the connector.
   * * Drag - Drag the connector.
   * * DragSourceEnd - Drag the source end of the connector.
   * * DragTargetEnd - Drag the target end of the connector.
   * * DragSegmentThump - Drag the segment thumb of the connector.
   * * AllowDrop - Allow to drop a node.
   * * Bridging - Creates bridge  on intersection of two connectors.
   * * BridgeObstacle -
   * * InheritBridging - Creates bridge  on intersection of two connectors.
   * * PointerEvents - Sets the pointer events.
   * * Tooltip - Displays a tooltip for the connectors.
   * * InheritToolTip - Displays a tooltip for the connectors.
   * * Interaction - Features of the connector used for interaction.
   * * ReadOnly - Enables ReadOnly
   * * Default - Default features of the connector.
   * @aspNumberEnum
   * @IgnoreSingular
   */

  (function (ConnectorConstraints) {
    /** Disable all connector Constraints. */
    ConnectorConstraints[ConnectorConstraints["None"] = 1] = "None";
    /** Enables connector to be selected. */
    ConnectorConstraints[ConnectorConstraints["Select"] = 2] = "Select";
    /** Enables connector to be Deleted. */
    ConnectorConstraints[ConnectorConstraints["Delete"] = 4] = "Delete";
    /** Enables connector to be Dragged. */
    ConnectorConstraints[ConnectorConstraints["Drag"] = 8] = "Drag";
    /** Enables connectors source end to be selected. */
    ConnectorConstraints[ConnectorConstraints["DragSourceEnd"] = 16] = "DragSourceEnd";
    /** Enables connectors target end to be selected. */
    ConnectorConstraints[ConnectorConstraints["DragTargetEnd"] = 32] = "DragTargetEnd";
    /** Enables control point and end point of every segment in a connector for editing. */
    ConnectorConstraints[ConnectorConstraints["DragSegmentThumb"] = 64] = "DragSegmentThumb";
    /** Enables AllowDrop constraints to the  connector. */
    ConnectorConstraints[ConnectorConstraints["AllowDrop"] = 128] = "AllowDrop";
    /** Enables bridging to the connector. */
    ConnectorConstraints[ConnectorConstraints["Bridging"] = 256] = "Bridging";
    /** Enables or Disables Bridge Obstacles with overlapping of connectors. */
    ConnectorConstraints[ConnectorConstraints["BridgeObstacle"] = 512] = "BridgeObstacle";
    /** Enables bridging to the connector. */
    ConnectorConstraints[ConnectorConstraints["InheritBridging"] = 1024] = "InheritBridging";
    /** Used to set the pointer events. */
    ConnectorConstraints[ConnectorConstraints["PointerEvents"] = 2048] = "PointerEvents";
    /** Enables or disables tool tip for the connectors */
    ConnectorConstraints[ConnectorConstraints["Tooltip"] = 4096] = "Tooltip";
    /** Enables or disables tool tip for the connectors */
    ConnectorConstraints[ConnectorConstraints["InheritTooltip"] = 8192] = "InheritTooltip";
    /** Enables Interaction. */
    ConnectorConstraints[ConnectorConstraints["Interaction"] = 4218] = "Interaction";
    /** Enables ReadOnly */
    ConnectorConstraints[ConnectorConstraints["ReadOnly"] = 16384] = "ReadOnly";
    /** Enables all constraints. */
    ConnectorConstraints[ConnectorConstraints["Default"] = 11838] = "Default";
  })(exports.ConnectorConstraints || (exports.ConnectorConstraints = {}));
  /** Enables/Disables the handles of the selector
   * Rotate - Enable Rotate Thumb
   * ConnectorSource - Enable Connector source point
   * ConnectorTarget - Enable Connector target point
   * ResizeNorthEast - Enable ResizeNorthEast Resize
   * ResizeEast - Enable ResizeEast Resize
   * ResizeSouthEast - Enable ResizeSouthEast Resize
   * ResizeSouth - Enable ResizeSouth Resize
   * ResizeSouthWest - Enable ResizeSouthWest Resize
   * ResizeWest - Enable ResizeWest Resize
   * ResizeNorthWest - Enable ResizeNorthWest Resize
   * ResizeNorth - Enable ResizeNorth Resize
   * Default - Enables all constraints
   * @private
   */

  (function (ThumbsConstraints) {
    /** Enable Rotate Thumb  */
    ThumbsConstraints[ThumbsConstraints["Rotate"] = 2] = "Rotate";
    /** Enable Connector source point  */
    ThumbsConstraints[ThumbsConstraints["ConnectorSource"] = 4] = "ConnectorSource";
    /** Enable Connector target point  */
    ThumbsConstraints[ThumbsConstraints["ConnectorTarget"] = 8] = "ConnectorTarget";
    /** Enable ResizeNorthEast Resize  */
    ThumbsConstraints[ThumbsConstraints["ResizeNorthEast"] = 16] = "ResizeNorthEast";
    /** Enable ResizeEast Resize  */
    ThumbsConstraints[ThumbsConstraints["ResizeEast"] = 32] = "ResizeEast";
    /** Enable ResizeSouthEast Resize */
    ThumbsConstraints[ThumbsConstraints["ResizeSouthEast"] = 64] = "ResizeSouthEast";
    /** Enable ResizeSouth Resize */
    ThumbsConstraints[ThumbsConstraints["ResizeSouth"] = 128] = "ResizeSouth";
    /** Enable ResizeSouthWest Resize */
    ThumbsConstraints[ThumbsConstraints["ResizeSouthWest"] = 256] = "ResizeSouthWest";
    /** Enable ResizeWest Resize */
    ThumbsConstraints[ThumbsConstraints["ResizeWest"] = 512] = "ResizeWest";
    /** Enable ResizeNorthWest Resize */
    ThumbsConstraints[ThumbsConstraints["ResizeNorthWest"] = 1024] = "ResizeNorthWest";
    /** Enable ResizeNorth Resize */
    ThumbsConstraints[ThumbsConstraints["ResizeNorth"] = 2048] = "ResizeNorth";
    /** Enables all constraints */
    ThumbsConstraints[ThumbsConstraints["Default"] = 4094] = "Default";
  })(exports.ThumbsConstraints || (exports.ThumbsConstraints = {}));
  /**
   * Defines the visibility of the selector handles
   * None - Hides all the selector elements
   * ConnectorSourceThumb - Shows/hides the source thumb of the connector
   * ConnectorTargetThumb - Shows/hides the target thumb of the connector
   * ResizeSouthEast - Shows/hides the bottom right resize handle of the selector
   * ResizeSouthWest - Shows/hides the bottom left resize handle of the selector
   * ResizeNorthEast - Shows/hides the top right resize handle of the selector
   * ResizeNorthWest - Shows/hides the top left resize handle of the selector
   * ResizeEast - Shows/hides the middle right resize handle of the selector
   * ResizeWest - Shows/hides the middle left resize handle of the selector
   * ResizeSouth - Shows/hides the bottom center resize handle of the selector
   * ResizeNorth - Shows/hides the top center resize handle of the selector
   * Rotate - Shows/hides the rotate handle of the selector
   * UserHandles - Shows/hides the user handles of the selector
   * Resize - Shows/hides all resize handles of the selector
   * @aspNumberEnum
   * @IgnoreSingular
   */

  (function (SelectorConstraints) {
    /** Hides all the selector elements */
    SelectorConstraints[SelectorConstraints["None"] = 1] = "None";
    /** Shows/hides the source thumb of the connector */
    SelectorConstraints[SelectorConstraints["ConnectorSourceThumb"] = 2] = "ConnectorSourceThumb";
    /** Shows/hides the target thumb of the connector */
    SelectorConstraints[SelectorConstraints["ConnectorTargetThumb"] = 4] = "ConnectorTargetThumb";
    /** Shows/hides the bottom right resize handle of the selector */
    SelectorConstraints[SelectorConstraints["ResizeSouthEast"] = 8] = "ResizeSouthEast";
    /** Shows/hides the bottom left resize handle of the selector */
    SelectorConstraints[SelectorConstraints["ResizeSouthWest"] = 16] = "ResizeSouthWest";
    /** Shows/hides the top right resize handle of the selector */
    SelectorConstraints[SelectorConstraints["ResizeNorthEast"] = 32] = "ResizeNorthEast";
    /** Shows/hides the top left resize handle of the selector */
    SelectorConstraints[SelectorConstraints["ResizeNorthWest"] = 64] = "ResizeNorthWest";
    /** Shows/hides the middle right resize handle of the selector  */
    SelectorConstraints[SelectorConstraints["ResizeEast"] = 128] = "ResizeEast";
    /** Shows/hides the middle left resize handle of the selector */
    SelectorConstraints[SelectorConstraints["ResizeWest"] = 256] = "ResizeWest";
    /** Shows/hides the bottom center resize handle of the selector */
    SelectorConstraints[SelectorConstraints["ResizeSouth"] = 512] = "ResizeSouth";
    /** Shows/hides the top center resize handle of the selector */
    SelectorConstraints[SelectorConstraints["ResizeNorth"] = 1024] = "ResizeNorth";
    /**  Shows/hides the rotate handle of the selector */
    SelectorConstraints[SelectorConstraints["Rotate"] = 2048] = "Rotate";
    /** Shows/hides the user handles of the selector */
    SelectorConstraints[SelectorConstraints["UserHandle"] = 4096] = "UserHandle";
    /** Shows/hides the default tooltip of nodes and connectors */
    SelectorConstraints[SelectorConstraints["ToolTip"] = 8192] = "ToolTip";
    /** Shows/hides all resize handles of the selector */
    SelectorConstraints[SelectorConstraints["ResizeAll"] = 2046] = "ResizeAll";
    /** Shows all handles of the selector  */
    SelectorConstraints[SelectorConstraints["All"] = 16382] = "All";
  })(exports.SelectorConstraints || (exports.SelectorConstraints = {}));
  /** @private */

  (function (NoOfSegments) {
    NoOfSegments[NoOfSegments["Zero"] = 0] = "Zero";
    NoOfSegments[NoOfSegments["One"] = 1] = "One";
    NoOfSegments[NoOfSegments["Two"] = 2] = "Two";
    NoOfSegments[NoOfSegments["Three"] = 3] = "Three";
    NoOfSegments[NoOfSegments["Four"] = 4] = "Four";
    NoOfSegments[NoOfSegments["Five"] = 5] = "Five";
  })(exports.NoOfSegments || (exports.NoOfSegments = {}));

  /**
   * Size defines and processes the size(width/height) of the objects
   */
  var Size = /** @class */function () {
    function Size(width, height) {
      this.width = width;
      this.height = height;
    }
    // /**   @private  */
    // public isEmpty(): boolean {
    //     return this.height === 0 && this.width === 0;
    // }
    /**   @private  */
    Size.prototype.clone = function () {
      return new Size(this.width, this.height);
    };
    return Size;
  }();

  /**
   * Rect defines and processes rectangular regions
   */
  var Rect = /** @class */function () {
    function Rect(x, y, width, height) {
      /**
       * Sets the x-coordinate of the starting point of a rectangular region
       * @default 0
       */
      this.x = Number.MAX_VALUE;
      /**
       * Sets the y-coordinate of the starting point of a rectangular region
       * @default 0
       */
      this.y = Number.MAX_VALUE;
      /**
       * Sets the width of a rectangular region
       * @default 0
       */
      this.width = 0;
      /**
       * Sets the height of a rectangular region
       * @default 0
       */
      this.height = 0;
      if (x === undefined || y === undefined) {
        x = y = Number.MAX_VALUE;
        width = height = 0;
      } else {
        if (width === undefined) {
          width = 0;
        }
        if (height === undefined) {
          height = 0;
        }
      }
      this.x = x;
      this.y = y;
      this.width = width;
      this.height = height;
    }
    Object.defineProperty(Rect.prototype, "left", {
      /**   @private  */
      get: function get() {
        return this.x;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "right", {
      /**   @private  */
      get: function get() {
        return this.x + this.width;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "top", {
      /**   @private  */
      get: function get() {
        return this.y;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "bottom", {
      /**   @private  */
      get: function get() {
        return this.y + this.height;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "topLeft", {
      /**   @private  */
      get: function get() {
        return {
          x: this.left,
          y: this.top
        };
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "topRight", {
      /**   @private  */
      get: function get() {
        return {
          x: this.right,
          y: this.top
        };
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "bottomLeft", {
      /**   @private  */
      get: function get() {
        return {
          x: this.left,
          y: this.bottom
        };
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "bottomRight", {
      /**   @private  */
      get: function get() {
        return {
          x: this.right,
          y: this.bottom
        };
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "middleLeft", {
      /**   @private  */
      get: function get() {
        return {
          x: this.left,
          y: this.y + this.height / 2
        };
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "middleRight", {
      /**   @private  */
      get: function get() {
        return {
          x: this.right,
          y: this.y + this.height / 2
        };
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "topCenter", {
      /**   @private  */
      get: function get() {
        return {
          x: this.x + this.width / 2,
          y: this.top
        };
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "bottomCenter", {
      /**   @private  */
      get: function get() {
        return {
          x: this.x + this.width / 2,
          y: this.bottom
        };
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Rect.prototype, "center", {
      /**   @private  */
      get: function get() {
        return {
          x: this.x + this.width / 2,
          y: this.y + this.height / 2
        };
      },
      enumerable: true,
      configurable: true
    });
    /**   @private  */
    Rect.prototype.equals = function (rect1, rect2) {
      return rect1.x === rect2.x && rect1.y === rect2.y && rect1.width === rect2.width && rect1.height === rect2.height;
    };
    /**   @private  */
    Rect.prototype.uniteRect = function (rect) {
      var right = Math.max(Number.NaN === this.right || this.x === Number.MAX_VALUE ? rect.right : this.right, rect.right);
      var bottom = Math.max(Number.NaN === this.bottom || this.y === Number.MAX_VALUE ? rect.bottom : this.bottom, rect.bottom);
      this.x = Math.min(this.left, rect.left);
      this.y = Math.min(this.top, rect.top);
      this.width = right - this.x;
      this.height = bottom - this.y;
      return this;
    };
    /**   @private  */
    Rect.prototype.unitePoint = function (point) {
      if (this.x === Number.MAX_VALUE) {
        this.x = point.x;
        this.y = point.y;
        return;
      }
      var x = Math.min(this.left, point.x);
      var y = Math.min(this.top, point.y);
      var right = Math.max(this.right, point.x);
      var bottom = Math.max(this.bottom, point.y);
      this.x = x;
      this.y = y;
      this.width = right - this.x;
      this.height = bottom - this.y;
    };
    Rect.prototype.intersection = function (rect) {
      if (this.intersects(rect)) {
        var left = Math.max(this.left, rect.left);
        var top_1 = Math.max(this.top, rect.top);
        var right = Math.min(this.right, rect.right);
        var bottom = Math.min(this.bottom, rect.bottom);
        return new Rect(left, top_1, right - left, bottom - top_1);
      }
      return Rect.empty;
    };
    /**   @private  */
    Rect.prototype.Inflate = function (padding) {
      this.x -= padding;
      this.y -= padding;
      this.width += padding * 2;
      this.height += padding * 2;
      return this;
    };
    // public Inflate(size: Size): Rect {
    //    this.x -= size.Width;
    //    this.y -= size.Height;
    //    this.width += size.Width * 2;
    //    this.height += size.Height * 2;
    //    return this;
    // }
    // public inflate(width: number, height: number): void {
    //     this.x -= width;
    //     this.y -= height;
    //     this.width += width * 2;
    //     this.height += height * 2;
    // }
    /**   @private  */
    Rect.prototype.intersects = function (rect) {
      if (this.right < rect.left || this.left > rect.right || this.top > rect.bottom || this.bottom < rect.top) {
        return false;
      }
      return true;
    };
    /**   @private  */
    Rect.prototype.containsRect = function (rect) {
      return this.left <= rect.left && this.right >= rect.right && this.top <= rect.top && this.bottom >= rect.bottom;
    };
    /**   @private  */
    Rect.prototype.containsPoint = function (point, padding) {
      if (padding === void 0) {
        padding = 0;
      }
      return this.left - padding <= point.x && this.right + padding >= point.x && this.top - padding <= point.y && this.bottom + padding >= point.y;
    };
    Rect.prototype.toPoints = function () {
      var points = [];
      points.push(this.topLeft);
      points.push(this.topRight);
      points.push(this.bottomLeft);
      points.push(this.bottomRight);
      return points;
    };
    /**   @private  */
    Rect.toBounds = function (points) {
      var rect = new Rect();
      for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {
        var pt = points_1[_i];
        rect.unitePoint(pt);
      }
      return rect;
    };
    Rect.prototype.scale = function (scaleX, scaleY) {
      this.width *= scaleX;
      this.height *= scaleY;
    };
    Rect.prototype.offset = function (offsetX, offsetY) {
      this.x += offsetX;
      this.y += offsetY;
    };
    /**   @private  */
    Rect.empty = new Rect(Number.MAX_VALUE, Number.MIN_VALUE, 0, 0);
    return Rect;
  }();

  /**
   * Matrix module is used to transform points based on offsets, angle
   */
  /** @private */

  (function (MatrixTypes) {
    MatrixTypes[MatrixTypes["Identity"] = 0] = "Identity";
    MatrixTypes[MatrixTypes["Translation"] = 1] = "Translation";
    MatrixTypes[MatrixTypes["Scaling"] = 2] = "Scaling";
    MatrixTypes[MatrixTypes["Unknown"] = 4] = "Unknown";
  })(exports.MatrixTypes || (exports.MatrixTypes = {}));
  /** @private */
  var Matrix = /** @class */function () {
    function Matrix(m11, m12, m21, m22, offsetX, offsetY, type) {
      this.m11 = m11;
      this.m12 = m12;
      this.m21 = m21;
      this.m22 = m22;
      this.offsetX = offsetX;
      this.offsetY = offsetY;
      // if (type === undefined) {
      //     this.type = MatrixTypes.Unknown;
      // } else {
      //     this.type = type;
      // }
      this.type = type;
    }
    return Matrix;
  }();
  /** @private */
  function identityMatrix() {
    return new Matrix(1, 0, 0, 1, 0, 0, exports.MatrixTypes.Identity);
  }
  /** @private */
  function transformPointByMatrix(matrix, point) {
    var pt = multiplyPoint(matrix, point.x, point.y);
    return {
      x: Math.round(pt.x * 100) / 100,
      y: Math.round(pt.y * 100) / 100
    };
  }
  /** @private */
  function transformPointsByMatrix(matrix, points) {
    var transformedPoints = [];
    for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {
      var point = points_1[_i];
      transformedPoints.push(transformPointByMatrix(matrix, point));
    }
    return transformedPoints;
  }
  /** @private */
  function rotateMatrix(matrix, angle, centerX, centerY) {
    angle %= 360.0;
    multiplyMatrix(matrix, createRotationRadians(angle * 0.017453292519943295, centerX ? centerX : 0, centerY ? centerY : 0));
  }
  /** @private */
  function scaleMatrix(matrix, scaleX, scaleY, centerX, centerY) {
    if (centerX === void 0) {
      centerX = 0;
    }
    if (centerY === void 0) {
      centerY = 0;
    }
    multiplyMatrix(matrix, createScaling(scaleX, scaleY, centerX, centerY));
  }
  /** @private */
  function translateMatrix(matrix, offsetX, offsetY) {
    if (matrix.type & exports.MatrixTypes.Identity) {
      matrix.type = exports.MatrixTypes.Translation;
      setMatrix(matrix, 1.0, 0.0, 0.0, 1.0, offsetX, offsetY);
      return;
    }
    if (matrix.type & exports.MatrixTypes.Unknown) {
      matrix.offsetX += offsetX;
      matrix.offsetY += offsetY;
      return;
    }
    matrix.offsetX += offsetX;
    matrix.offsetY += offsetY;
    matrix.type |= exports.MatrixTypes.Translation;
  }
  /** @private */
  function createScaling(scaleX, scaleY, centerX, centerY) {
    var result = identityMatrix();
    result.type = !(centerX || centerY) ? exports.MatrixTypes.Scaling : exports.MatrixTypes.Scaling | exports.MatrixTypes.Translation;
    setMatrix(result, scaleX, 0.0, 0.0, scaleY, centerX - scaleX * centerX, centerY - scaleY * centerY);
    return result;
  }
  /** @private */
  function createRotationRadians(angle, centerX, centerY) {
    var result = identityMatrix();
    var num = Math.sin(angle);
    var num2 = Math.cos(angle);
    var offsetX = centerX * (1.0 - num2) + centerY * num;
    var offsetY = centerY * (1.0 - num2) - centerX * num;
    result.type = exports.MatrixTypes.Unknown;
    setMatrix(result, num2, num, -num, num2, offsetX, offsetY);
    return result;
  }
  /** @private */
  function multiplyPoint(matrix, x, y) {
    switch (matrix.type) {
      case exports.MatrixTypes.Identity:
        break;
      case exports.MatrixTypes.Translation:
        x += matrix.offsetX;
        y += matrix.offsetY;
        break;
      case exports.MatrixTypes.Scaling:
        x *= matrix.m11;
        y *= matrix.m22;
        break;
      case exports.MatrixTypes.Translation | exports.MatrixTypes.Scaling:
        x *= matrix.m11;
        x += matrix.offsetX;
        y *= matrix.m22;
        y += matrix.offsetY;
        break;
      default:
        var num = y * matrix.m21 + matrix.offsetX;
        var num2 = x * matrix.m12 + matrix.offsetY;
        x *= matrix.m11;
        x += num;
        y *= matrix.m22;
        y += num2;
        break;
    }
    return {
      x: x,
      y: y
    };
  }
  /** @private */
  function multiplyMatrix(matrix1, matrix2) {
    var type = matrix1.type;
    var type2 = matrix2.type;
    if (type2 === exports.MatrixTypes.Identity) {
      return;
    }
    if (type === exports.MatrixTypes.Identity) {
      assignMatrix(matrix1, matrix2);
      matrix1.type = matrix2.type;
      return;
    }
    if (type2 === exports.MatrixTypes.Translation) {
      matrix1.offsetX += matrix2.offsetX;
      matrix1.offsetY += matrix2.offsetY;
      if (type !== exports.MatrixTypes.Unknown) {
        matrix1.type |= exports.MatrixTypes.Translation;
      }
      return;
    }
    if (type !== exports.MatrixTypes.Translation) {
      var num = type << 4 | type2;
      switch (num) {
        case 34:
          matrix1.m11 *= matrix2.m11;
          matrix1.m22 *= matrix2.m22;
          return;
        case 35:
          matrix1.m11 *= matrix2.m11;
          matrix1.m22 *= matrix2.m22;
          matrix1.offsetX = matrix2.offsetX;
          matrix1.offsetY = matrix2.offsetY;
          matrix1.type = exports.MatrixTypes.Translation | exports.MatrixTypes.Scaling;
          return;
        case 36:
          break;
        default:
          {
            switch (num) {
              case 50:
                matrix1.m11 *= matrix2.m11;
                matrix1.m22 *= matrix2.m22;
                matrix1.offsetX *= matrix2.m11;
                matrix1.offsetY *= matrix2.m22;
                return;
              case 51:
                matrix1.m11 *= matrix2.m11;
                matrix1.m22 *= matrix2.m22;
                matrix1.offsetX = matrix2.m11 * matrix1.offsetX + matrix2.offsetX;
                matrix1.offsetY = matrix2.m22 * matrix1.offsetY + matrix2.offsetY;
                return;
              case 52:
                break;
              default:
                switch (num) {
                  case 66:
                  case 67:
                  case 68:
                    break;
                  default:
                    return;
                }
                break;
            }
            break;
          }
      }
      var result = identityMatrix();
      var m11New = matrix1.m11 * matrix2.m11 + matrix1.m12 * matrix2.m21;
      var m12New = matrix1.m11 * matrix2.m12 + matrix1.m12 * matrix2.m22;
      var m21New = matrix1.m21 * matrix2.m11 + matrix1.m22 * matrix2.m21;
      var m22New = matrix1.m21 * matrix2.m12 + matrix1.m22 * matrix2.m22;
      var offsetX_1 = matrix1.offsetX * matrix2.m11 + matrix1.offsetY * matrix2.m21 + matrix2.offsetX;
      var offsetY_1 = matrix1.offsetX * matrix2.m12 + matrix1.offsetY * matrix2.m22 + matrix2.offsetY;
      setMatrix(result, m11New, m12New, m21New, m22New, offsetX_1, offsetY_1);
      if (result.m21 || result.m12) {
        result.type = exports.MatrixTypes.Unknown;
      } else {
        if (result.m11 && result.m11 !== 1.0 || result.m22 && result.m22 !== 1.0) {
          result.type = exports.MatrixTypes.Scaling;
        }
        if (result.offsetX || result.offsetY) {
          result.type |= exports.MatrixTypes.Translation;
        }
        if ((result.type & (exports.MatrixTypes.Translation | exports.MatrixTypes.Scaling)) === exports.MatrixTypes.Identity) {
          result.type = exports.MatrixTypes.Identity;
        }
        result.type = exports.MatrixTypes.Scaling | exports.MatrixTypes.Translation;
      }
      assignMatrix(matrix1, result);
      matrix1.type = result.type;
      return;
    }
    var offsetX = matrix1.offsetX;
    var offsetY = matrix1.offsetY;
    matrix1.offsetX = offsetX * matrix2.m11 + offsetY * matrix2.m21 + matrix2.offsetX;
    matrix1.offsetY = offsetX * matrix2.m12 + offsetY * matrix2.m22 + matrix2.offsetY;
    if (type2 === exports.MatrixTypes.Unknown) {
      matrix1.type = exports.MatrixTypes.Unknown;
      return;
    }
    matrix1.type = exports.MatrixTypes.Translation | exports.MatrixTypes.Scaling;
  }
  /** @private */
  function setMatrix(mat, m11, m12, m21, m22, x, y) {
    mat.m11 = m11;
    mat.m12 = m12;
    mat.m21 = m21;
    mat.m22 = m22;
    mat.offsetX = x;
    mat.offsetY = y;
  }
  /** @private */
  function assignMatrix(matrix1, matrix2) {
    matrix1.m11 = matrix2.m11;
    matrix1.m12 = matrix2.m12;
    matrix1.m21 = matrix2.m21;
    matrix1.m22 = matrix2.m22;
    matrix1.offsetX = matrix2.offsetX;
    matrix1.offsetY = matrix2.offsetY;
    matrix1.type = matrix2.type;
  }

  /**
   * Defines the functionalities that need to access DOM
   */
  function getChildNode(node) {
    var child;
    var collection = [];
    if (sf.base.Browser.info.name === 'msie' || sf.base.Browser.info.name === 'edge') {
      for (var i = 0; i < node.childNodes.length; i++) {
        child = node.childNodes[parseInt(i.toString(), 10)];
        if (child.nodeType === 1) {
          collection.push(child);
        }
      }
    } else {
      collection = node.children;
    }
    return collection;
  }
  function translatePoints(element, points) {
    var translatedPts = [];
    for (var _i = 0, points_1 = points; _i < points_1.length; _i++) {
      var point = points_1[_i];
      var pt1 = {
        x: element.offsetX - element.actualSize.width * element.pivot.x + point.x,
        y: element.offsetY - element.actualSize.height * element.pivot.y + point.y
      };
      var matrix = void 0;
      var angle = element.rotateAngle + element.parentTransform;
      if (angle) {
        matrix = identityMatrix();
        rotateMatrix(matrix, angle, element.offsetX, element.offsetY);
      }
      if (matrix) {
        pt1 = transformPointByMatrix(matrix, pt1);
      }
      translatedPts.push(pt1);
    }
    return translatedPts;
  }
  /** @private */
  function measurePath(data) {
    var path = 'pathTable';
    // eslint-disable-next-line
    if (!window[path]) {
      // eslint-disable-next-line
      window[path] = {};
    }
    if (data) {
      var measureElement = 'measureElement';
      // eslint-disable-next-line
      window[measureElement].style.visibility = 'visible';
      // eslint-disable-next-line
      var svg = window[measureElement].children[2];
      var element = getChildNode(svg)[0];
      element.setAttribute('d', data);
      //let bounds: SVGRect = element.getBBox();
      var bounds = void 0;
      // eslint-disable-next-line
      if (window[path][data]) {
        // eslint-disable-next-line
        bounds = window[path][data];
      } else {
        // eslint-disable-next-line
        window[path][data] = bounds = element.getBBox();
        if ((bounds.x === 0 || bounds.y === 0) && (bounds.width === 0 || bounds.height === 0)) {
          // eslint-disable-next-line
          window[path][data] = bounds = getBBox(data);
        }
      }
      var svgBounds = new Rect(bounds.x, bounds.y, bounds.width, bounds.height);
      // eslint-disable-next-line
      window[measureElement].style.visibility = 'hidden';
      return svgBounds;
    }
    return new Rect(0, 0, 0, 0);
  }
  // tslint:disable-next-line
  function getBBox(path) {
    var xmin = 0;
    var xmax = 0;
    var ymin = 0;
    var ymax = 0;
    // tslint:disable-next-line
    var currentValue;
    // tslint:disable-next-line
    var currentpath = path;
    currentpath = currentpath.replace(/[a-z].*/g, ' ').replace(/[\sA-Z]+/gi, ' ').trim().split(' ');
    for (var i = 0; i < currentpath.length; i++) {
      if (currentpath[parseInt(i.toString(), 10)].length > 1) {
        currentValue = currentpath[parseInt(i.toString(), 10)].split(',');
        xmin = xmax = currentValue[0];
        ymin = ymax = currentValue[1];
      }
    }
    for (var i = 0; i < currentpath.length; i++) {
      currentValue = currentpath[parseInt(i.toString(), 10)].split(',');
      if (!currentValue[1]) {
        currentValue[0] = xmin;
        currentValue[1] = ymin;
      }
      xmin = Math.min(xmin, currentValue[0]);
      xmax = Math.max(xmax, currentValue[0]);
      ymin = Math.min(ymin, currentValue[1]);
      ymax = Math.max(ymax, currentValue[1]);
    }
    return {
      x: xmin,
      y: ymin,
      width: xmax - xmin,
      height: ymax - ymin
    };
  }
  function getTextOptions(element, maxWidth) {
    var options = {
      fill: element.style.fill,
      stroke: element.style.strokeColor,
      angle: element.rotateAngle + element.parentTransform,
      pivotX: element.pivot.x,
      pivotY: element.pivot.y,
      strokeWidth: element.style.strokeWidth,
      dashArray: element.style.strokeDashArray,
      opacity: element.style.opacity,
      visible: element.visible,
      id: element.id,
      width: maxWidth || element.actualSize.width,
      height: element.actualSize.height,
      x: element.offsetX - element.actualSize.width * element.pivot.x + 0.5,
      y: element.offsetY - element.actualSize.height * element.pivot.y + 0.5
    };
    options.fontSize = element.style.fontSize;
    options.fontFamily = element.style.fontFamily;
    options.textOverflow = element.style.textOverflow;
    options.textDecoration = element.style.textDecoration;
    options.doWrap = element.doWrap;
    options.whiteSpace = whiteSpaceToString(element.style.whiteSpace, element.style.textWrapping);
    options.content = element.content;
    options.textWrapping = element.style.textWrapping;
    options.breakWord = wordBreakToString(element.style.textWrapping);
    options.textAlign = textAlignToString(element.style.textAlign);
    options.color = element.style.color;
    options.italic = element.style.italic;
    options.bold = element.style.bold;
    options.dashArray = '';
    options.strokeWidth = 0;
    options.fill = '';
    return options;
  }
  function wrapSvgText(text, textValue) {
    var childNodes = [];
    var k = 0;
    var txtValue;
    var bounds1;
    var content = textValue || text.content;
    if (text.whiteSpace !== 'nowrap' && text.whiteSpace !== 'pre') {
      if (text.breakWord === 'breakall') {
        txtValue = '';
        txtValue += content[0];
        for (k = 0; k < content.length; k++) {
          bounds1 = bBoxText(txtValue, text);
          if (bounds1 >= text.width && txtValue.length > 0) {
            childNodes[childNodes.length] = {
              text: txtValue,
              x: 0,
              dy: 0,
              width: bounds1
            };
            txtValue = '';
          } else {
            txtValue = txtValue + (content[k + 1] || '');
            // if (txtValue.indexOf('\n') > -1) {
            //     txtValue = txtValue.replace('\n', '');
            // }
            var width = bBoxText(txtValue, text);
            if (Math.ceil(width) + 2 >= text.width && txtValue.length > 0 || txtValue.indexOf('\n') > -1) {
              childNodes[childNodes.length] = {
                text: txtValue,
                x: 0,
                dy: 0,
                width: width
              };
              txtValue = '';
            }
            if (k === content.length - 1 && txtValue.length > 0) {
              childNodes[childNodes.length] = {
                text: txtValue,
                x: 0,
                dy: 0,
                width: width
              };
              txtValue = '';
            }
          }
        }
      } else {
        childNodes = wordWrapping(text, textValue);
      }
    } else {
      childNodes[childNodes.length] = {
        text: content,
        x: 0,
        dy: 0,
        width: bBoxText(content, text)
      };
    }
    return childNodes;
  }
  function wordWrapping(text, textValue) {
    var childNodes = [];
    var txtValue = '';
    var j = 0;
    var i = 0;
    var wrap = text.whiteSpace !== 'nowrap' ? true : false;
    var content = textValue || text.content;
    var bounds1;
    var eachLine = content.split('\n');
    var words;
    var newText;
    var existingWidth;
    var existingText;
    for (j = 0; j < eachLine.length; j++) {
      words = text.textWrapping !== 'NoWrap' ? eachLine[parseInt(j.toString(), 10)].split(' ') : eachLine;
      for (i = 0; i < words.length; i++) {
        bounds1 = bBoxText(words[parseInt(i.toString(), 10)], text);
        if (bounds1 > text.width && words[parseInt(i.toString(), 10)].length > 0 && text.textWrapping !== 'NoWrap') {
          if (eachLine.length > 1) {
            words[parseInt(i.toString(), 10)] = words[parseInt(i.toString(), 10)] + '\n';
          }
          text.content = words[parseInt(i.toString(), 10)];
          childNodes = wrapText(text, txtValue, childNodes);
        } else {
          txtValue += ((i !== 0 || words.length === 1) && wrap && txtValue.length > 0 ? ' ' : '') + words[parseInt(i.toString(), 10)];
          newText = txtValue + (words[i + 1] || '');
          var width = bBoxText(newText, text);
          if (eachLine.length > 1 && i === words.length - 1) {
            txtValue = txtValue + '\n';
          }
          if (Math.floor(width) > text.width - 2 && txtValue.length > 0) {
            textValue = txtValue;
            childNodes[childNodes.length] = {
              text: txtValue.indexOf('\n') === -1 ? txtValue + ' ' : textValue,
              x: 0,
              dy: 0,
              width: newText === txtValue ? width : txtValue === existingText ? existingWidth : bBoxText(txtValue, text)
            };
            txtValue = '';
          } else {
            if (i === words.length - 1) {
              childNodes[childNodes.length] = {
                text: txtValue,
                x: 0,
                dy: 0,
                width: width
              };
              txtValue = '';
            }
          }
          existingText = newText;
          existingWidth = width;
        }
      }
    }
    return childNodes;
  }
  function wrapText(txt, textValue, childNode) {
    var k = 0;
    var txtValue;
    var bounds1;
    var content = textValue || txt.content;
    txtValue = '';
    txtValue += content[0];
    for (k = 0; k < content.length; k++) {
      bounds1 = bBoxText(txtValue, txt);
      if (bounds1 >= txt.width && txtValue.length > 0) {
        childNode[childNode.length] = {
          text: txtValue,
          x: 0,
          dy: 0,
          width: bounds1
        };
        txtValue = '';
      } else {
        txtValue = txtValue + (content[k + 1] || '');
        var width = bBoxText(txtValue, txt);
        if (Math.ceil(width) + 2 >= txt.width && txtValue.length > 0 || txtValue.indexOf('\n') > -1) {
          txtValue = txtValue.slice(0, -1);
          childNode[childNode.length] = {
            text: txtValue,
            x: 0,
            dy: 0,
            width: width
          };
          txtValue = content[k + 1] || '';
        }
        if (k === content.length - 1 && txtValue.length > 0) {
          childNode[childNode.length] = {
            text: txtValue,
            x: 0,
            dy: 0,
            width: width
          };
          txtValue = '';
        }
      }
    }
    return childNode;
  }
  function wrapSvgTextAlign(text, childNodes) {
    var wrapBounds = {
      x: 0,
      width: 0
    };
    var k = 0;
    var txtWidth;
    var width;
    for (k = 0; k < childNodes.length; k++) {
      txtWidth = childNodes[parseInt(k.toString(), 10)].width;
      width = txtWidth;
      if (text.textAlign === 'left') {
        txtWidth = 0;
      } else if (text.textAlign === 'center') {
        if (txtWidth > text.width && (text.textOverflow === 'Ellipsis' || text.textOverflow === 'Clip')) {
          txtWidth = 0;
        } else {
          txtWidth = -txtWidth / 2;
        }
      } else if (text.textAlign === 'right') {
        txtWidth = -txtWidth;
      } else {
        txtWidth = childNodes.length > 1 ? 0 : -txtWidth / 2;
      }
      childNodes[parseInt(k.toString(), 10)].dy = text.fontSize * 1.2;
      childNodes[parseInt(k.toString(), 10)].x = txtWidth;
      if (!wrapBounds) {
        wrapBounds = {
          x: txtWidth,
          width: width
        };
      } else {
        wrapBounds.x = Math.min(wrapBounds.x, txtWidth);
        wrapBounds.width = Math.max(wrapBounds.width, width);
      }
    }
    return wrapBounds;
  }
  /** @private */
  function measureText(text, style, content, maxWidth, textValue) {
    var bounds = new Size(0, 0);
    var childNodes;
    var wrapBounds;
    var options = getTextOptions(text, maxWidth);
    text.childNodes = childNodes = wrapSvgText(options, textValue);
    text.wrapBounds = wrapBounds = wrapSvgTextAlign(options, childNodes);
    bounds.width = wrapBounds.width;
    if (text.wrapBounds.width >= maxWidth && options.textOverflow !== 'Wrap') {
      bounds.width = maxWidth;
    }
    bounds.height = childNodes.length * text.style.fontSize * 1.2;
    return bounds;
  }
  /** @private */
  function getDiagramElement(elementId, contentId) {
    var diagramElement;
    var element;
    if (contentId && typeof document !== 'undefined') {
      element = document.getElementById(contentId);
    }
    diagramElement = element ? element.querySelector('#' + elementId) : typeof document !== 'undefined' ? document.getElementById(elementId) : null;
    return diagramElement;
  }
  /** @private */
  function createHtmlElement(elementType, attribute) {
    var element = sf.base.createElement(elementType);
    setAttributeHtml(element, attribute);
    return element;
  }
  /** @private */
  function setAttributeHtml(element, attributes) {
    var keys = Object.keys(attributes);
    for (var i = 0; i < keys.length; i++) {
      element.setAttribute(keys[parseInt(i.toString(), 10)], attributes[keys[parseInt(i.toString(), 10)]]);
    }
  }
  /**
   * @private
   */
  function getAdornerLayerSvg(diagramId, index) {
    var adornerLayerSvg = null;
    var diagramElement = getDiagramElement(diagramId + index + '_diagramAdornerLayer');
    var elementcoll;
    if (diagramElement) {
      elementcoll = diagramElement.getElementsByClassName('e-adorner-layer' + index);
      adornerLayerSvg = elementcoll[0];
    }
    return adornerLayerSvg;
  }
  /** @private */
  function getSelectorElement(diagramId, index) {
    var adornerLayer = null;
    var adornerSvg = getAdornerLayerSvg(diagramId, index);
    if (adornerSvg) {
      adornerLayer = adornerSvg.getElementById(diagramId + '_SelectorElement');
    }
    return adornerLayer;
  }
  /** @private */
  function createMeasureElements() {
    var measureElement = 'measureElement';
    // eslint-disable-next-line
    if (!window[measureElement]) {
      var divElement = createHtmlElement('div', {
        id: 'measureElement',
        style: 'visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;'
      });
      var text = createHtmlElement('span', {
        'style': 'display:inline-block ; line-height: normal'
      });
      divElement.appendChild(text);
      var imageElement = void 0;
      imageElement = createHtmlElement('img', {});
      divElement.appendChild(imageElement);
      if (typeof document !== 'undefined') {
        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        svg.setAttribute('xlink', 'http://www.w3.org/1999/xlink');
        divElement.appendChild(svg);
        var element = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        svg.appendChild(element);
        var data = document.createTextNode('');
        var tSpan = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');
        svg.appendChild(tSpan);
        // eslint-disable-next-line
        window[measureElement] = divElement;
        // eslint-disable-next-line
        window[measureElement].usageCount = 1;
        document.body.appendChild(divElement);
      }
    } else {
      // eslint-disable-next-line
      window[measureElement].usageCount += 1;
    }
  }
  /** @private */
  function measureImage(source, contentSize) {
    var measureElement = 'measureElement';
    // eslint-disable-next-line
    window[measureElement].style.visibility = 'visible';
    // eslint-disable-next-line
    var imageElement = window[measureElement].children[1];
    imageElement.setAttribute('src', source);
    var bounds = imageElement.getBoundingClientRect();
    var width = bounds.width;
    var height = bounds.height;
    contentSize = new Size(width, height);
    // eslint-disable-next-line
    window[measureElement].style.visibility = 'hidden';
    return contentSize;
  }

  /**
   * Implements the basic functionalities
   */
  /** @private */
  function randomId() {
    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';
    var id = '';
    var num;
    for (var i = 0; i < 5; i++) {
      if ('crypto' in window && 'getRandomValues' in crypto) {
        var count = new Uint16Array(1);
        // tslint:disable-next-line:no-any
        var intCrypto = window.msCrypto || window.crypto;
        num = intCrypto.getRandomValues(count)[0] % (chars.length - 1);
      } else {
        num = Math.floor(Math.random() * chars.length);
      }
      if (i === 0 && num < 10) {
        i--;
        continue;
      }
      id += chars.substring(num, num + 1);
    }
    return id;
  }
  /** @private */
  function cornersPointsBeforeRotation(ele) {
    var bounds = new Rect();
    var top = ele.offsetY - ele.actualSize.height * ele.pivot.y;
    var bottom = ele.offsetY + ele.actualSize.height * (1 - ele.pivot.y);
    var left = ele.offsetX - ele.actualSize.width * ele.pivot.x;
    var right = ele.offsetX + ele.actualSize.width * (1 - ele.pivot.x);
    var topLeft = {
      x: left,
      y: top
    };
    var topRight = {
      x: right,
      y: top
    };
    var bottomLeft = {
      x: left,
      y: bottom
    };
    var bottomRight = {
      x: right,
      y: bottom
    };
    bounds = Rect.toBounds([topLeft, topRight, bottomLeft, bottomRight]);
    return bounds;
  }
  /** @private */
  function rotateSize(size, angle) {
    var matrix = identityMatrix();
    rotateMatrix(matrix, angle, 0, 0);
    var topLeft = transformPointByMatrix(matrix, {
      x: 0,
      y: 0
    });
    var topRight = transformPointByMatrix(matrix, {
      x: size.width,
      y: 0
    });
    var bottomLeft = transformPointByMatrix(matrix, {
      x: 0,
      y: size.height
    });
    var bottomRight = transformPointByMatrix(matrix, {
      x: size.width,
      y: size.height
    });
    var minX = Math.min(topLeft.x, topRight.x, bottomLeft.x, bottomRight.x);
    var minY = Math.min(topLeft.y, topRight.y, bottomLeft.y, bottomRight.y);
    var maxX = Math.max(topLeft.x, topRight.x, bottomLeft.x, bottomRight.x);
    var maxY = Math.max(topLeft.y, topRight.y, bottomLeft.y, bottomRight.y);
    return new Size(maxX - minX, maxY - minY);
  }
  /** @private */
  function getBounds(element) {
    var bounds = new Rect();
    var corners;
    corners = cornersPointsBeforeRotation(element);
    var middleLeft = corners.middleLeft;
    var topCenter = corners.topCenter;
    var bottomCenter = corners.bottomCenter;
    var middleRight = corners.middleRight;
    var topLeft = corners.topLeft;
    var topRight = corners.topRight;
    var bottomLeft = corners.bottomLeft;
    var bottomRight = corners.bottomRight;
    element.corners = {
      topLeft: topLeft,
      topCenter: topCenter,
      topRight: topRight,
      middleLeft: middleLeft,
      middleRight: middleRight,
      bottomLeft: bottomLeft,
      bottomCenter: bottomCenter,
      bottomRight: bottomRight
    };
    if (element.rotateAngle !== 0 || element.parentTransform !== 0) {
      var matrix = identityMatrix();
      rotateMatrix(matrix, element.rotateAngle + element.parentTransform, element.offsetX, element.offsetY);
      element.corners.topLeft = topLeft = transformPointByMatrix(matrix, topLeft);
      element.corners.topCenter = topCenter = transformPointByMatrix(matrix, topCenter);
      element.corners.topRight = topRight = transformPointByMatrix(matrix, topRight);
      element.corners.middleLeft = middleLeft = transformPointByMatrix(matrix, middleLeft);
      element.corners.middleRight = middleRight = transformPointByMatrix(matrix, middleRight);
      element.corners.bottomLeft = bottomLeft = transformPointByMatrix(matrix, bottomLeft);
      element.corners.bottomCenter = bottomCenter = transformPointByMatrix(matrix, bottomCenter);
      element.corners.bottomRight = bottomRight = transformPointByMatrix(matrix, bottomRight);
      //Set corners based on rotate angle
    }
    bounds = Rect.toBounds([topLeft, topRight, bottomLeft, bottomRight]);
    element.corners.left = bounds.left;
    element.corners.right = bounds.right;
    element.corners.top = bounds.top;
    element.corners.bottom = bounds.bottom;
    element.corners.center = bounds.center;
    element.corners.width = bounds.width;
    element.corners.height = bounds.height;
    return bounds;
  }
  /** @private */
  function textAlignToString(value) {
    var state = '';
    switch (value) {
      case 'Center':
        state = 'center';
        break;
      case 'Left':
        state = 'left';
        break;
      case 'Right':
        state = 'right';
        break;
    }
    return state;
  }
  /** @private */
  function wordBreakToString(value) {
    var state = '';
    switch (value) {
      case 'Wrap':
        state = 'breakall';
        break;
      case 'NoWrap':
        state = 'keepall';
        break;
      case 'WrapWithOverflow':
        state = 'normal';
        break;
      case 'LineThrough':
        state = 'line-through';
        break;
    }
    return state;
  }
  function bBoxText(textContent, options) {
    var measureElement = 'measureElement';
    // eslint-disable-next-line
    window[measureElement].style.visibility = 'visible';
    // eslint-disable-next-line
    var svg = window[measureElement].children[2];
    var text = getChildNode(svg)[1];
    text.textContent = textContent;
    text.setAttribute('style', 'font-size:' + options.fontSize + 'px; font-family:' + options.fontFamily + ';font-weight:' + (options.bold ? 'bold' : 'normal'));
    var bBox = text.getBBox().width;
    // eslint-disable-next-line
    window[measureElement].style.visibility = 'hidden';
    return bBox;
  }
  /** @private */
  function middleElement(i, j) {
    var m = 0;
    m = (i + j) / 2;
    return m;
  }
  /** @private */
  function whiteSpaceToString(value, wrap) {
    if (wrap === 'NoWrap' && value === 'PreserveAll') {
      return 'pre';
    }
    var state = '';
    switch (value) {
      case 'CollapseAll':
        state = 'nowrap';
        break;
      case 'CollapseSpace':
        state = 'pre-line';
        break;
      case 'PreserveAll':
        state = 'pre-wrap';
        break;
    }
    return state;
  }
  /** @private */
  function rotatePoint(angle, pivotX, pivotY, point) {
    if (angle !== 0) {
      var matrix = identityMatrix();
      rotateMatrix(matrix, angle, pivotX, pivotY);
      return transformPointByMatrix(matrix, point);
    }
    return point;
  }
  /** @private */
  function getOffset(topLeft, obj) {
    var offX = topLeft.x + obj.desiredSize.width * obj.pivot.x;
    var offY = topLeft.y + obj.desiredSize.height * obj.pivot.y;
    return {
      x: offX,
      y: offY
    };
  }

  /**
   * DiagramElement module defines the basic unit of diagram
   */
  var DrawingElement = /** @class */function () {
    function DrawingElement() {
      /**
       * Sets/Gets the reference point of the element
       * ```html
       * <div id='diagram'></div>
       * ```
       * ```typescript
       * let stackPanel: StackPanel = new StackPanel();
       * stackPanel.offsetX = 300; stackPanel.offsetY = 200;
       * stackPanel.width = 100; stackPanel.height = 100;
       * stackPanel.style.fill = 'red';
       * stackPanel.pivot = { x: 0.5, y: 0.5 };
       * let diagram: Diagram = new Diagram({
       * ...
       * basicElements: [stackPanel],
       * ...
       * });
       * diagram.appendTo('#diagram');
       * ```
       */
      this.pivot = {
        x: 0.5,
        y: 0.5
      };
      this.rotateValue = {
        x: 0,
        y: 0,
        angle: 0
      };
      /**
       * Sets or gets whether the content of the element needs to be measured
       */
      this.isDirt = true;
      /**
       * Sets/Gets the x-coordinate of the element
       */
      this.offsetX = 0;
      /**
       * Sets/Gets the y-coordinate of the element
       */
      this.offsetY = 0;
      /**
       * Set the corner of the element
       */
      this.cornerRadius = 0;
      /**
       * Sets/Gets the minimum height of the element
       */
      this.minHeight = undefined;
      /**
       * Sets/Gets the minimum width of the element
       */
      this.minWidth = undefined;
      /**
       * Sets/Gets the maximum width of the element
       */
      this.maxWidth = undefined;
      /**
       * Sets/Gets the maximum height of the element
       */
      this.maxHeight = undefined;
      /**
       * Sets/Gets the width of the element
       */
      this.width = undefined;
      /**
       * Sets/Gets the height of the element
       */
      this.height = undefined;
      /**
       * Sets/Gets how the element has to be horizontally arranged with respect to its immediate parent
       * * Stretch - Stretches the diagram element throughout its immediate parent
       * * Left - Aligns the diagram element at the left of its immediate parent
       * * Right - Aligns the diagram element at the right of its immediate parent
       * * Center - Aligns the diagram element at the center of its immediate parent
       * * Auto - Aligns the diagram element based on the characteristics of its immediate parent
       */
      this.horizontalAlignment = 'Auto';
      /**
       * Sets/Gets how the element has to be vertically arranged with respect to its immediate parent
       * * Stretch - Stretches the diagram element throughout its immediate parent
       * * Top - Aligns the diagram element at the top of its immediate parent
       * * Bottom - Aligns the diagram element at the bottom of its immediate parent
       * * Center - Aligns the diagram element at the center of its immediate parent
       * * Auto - Aligns the diagram element based on the characteristics of its immediate parent
       */
      this.verticalAlignment = 'Auto';
      /**
       * Sets or gets whether the content of the element to be visible
       */
      this.visible = true;
      /**
       * Sets/Gets the rotate angle of the element
       */
      this.rotateAngle = 0;
      /**
       * Sets/Gets the margin of the element
       */
      this.margin = {
        left: 0,
        right: 0,
        top: 0,
        bottom: 0
      };
      /**
       * Sets whether the element has to be aligned with respect to a point/with respect to its immediate parent
       * * Point - Diagram elements will be aligned with respect to a point
       * * Object - Diagram elements will be aligned with respect to its immediate parent
       */
      this.relativeMode = 'Point';
      /**
       * Sets whether the element has to be transformed based on its parent or not
       * * Self - Sets the transform type as Self
       * * Parent - Sets the transform type as Parent
       */
      /** @private */
      this.transform = exports.RotateTransform.Self | exports.RotateTransform.Parent;
      /**
       * Sets the style of the element
       */
      this.style = {
        fill: 'white',
        strokeColor: 'black',
        opacity: 1,
        strokeWidth: 1
      };
      /**
       * Gets the minimum size that is required by the element
       */
      this.desiredSize = new Size();
      /**
       * Gets the size that the element will be rendered
       */
      this.actualSize = new Size();
      /**
       * Gets the rotate angle that is set to the immediate parent of the element
       */
      this.parentTransform = 0;
      /** @private */
      this.preventContainer = false;
      /**
       * Gets/Sets the boundary of the element
       */
      this.bounds = new Rect(0, 0, 0, 0);
      /**
       * Defines whether the element has to be measured or not
       */
      this.staticSize = false;
      /**
       * check whether the element is rect or not
       */
      /** @private */
      this.isRectElement = false;
      /** @private */
      this.isCalculateDesiredSize = true;
      /**
       * Defines whether the element is group or port
       */
      /** @private */
      this.elementActions = exports.ElementAction.None;
      //private variables
      this.position = undefined;
      this.unitMode = undefined;
      /**   @private  */
      this["float"] = false;
      this.floatingBounds = undefined;
    }
    // public constructor() {
    //     this.id = randomId();
    // }
    /**
     * Sets the offset of the element with respect to its parent
     * @param x
     * @param y
     * @param mode
     */
    DrawingElement.prototype.setOffsetWithRespectToBounds = function (x, y, mode) {
      this.unitMode = mode;
      this.position = {
        x: x,
        y: y
      };
    };
    /**
     * Gets the position of the element with respect to its parent
     * @param size
     */
    DrawingElement.prototype.getAbsolutePosition = function (size) {
      if (this.position !== undefined) {
        if (this.unitMode === 'Absolute') {
          return this.position;
        } else {
          return {
            x: this.position.x * size.width,
            y: this.position.y * size.height
          };
        }
      }
      return undefined;
    };
    Object.defineProperty(DrawingElement.prototype, "outerBounds", {
      get: function get() {
        return this.floatingBounds || this.bounds;
      },
      /**
       * used to set the outer bounds value
       * @private
       */
      set: function set(bounds) {
        this.floatingBounds = bounds;
      },
      enumerable: true,
      configurable: true
    });
    /**
     * Measures the minimum space that the element requires
     * @param availableSize
     */
    DrawingElement.prototype.measure = function (availableSize) {
      var width = this.width !== undefined ? this.width : (availableSize.width || 0) - this.margin.left - this.margin.right;
      var height = this.height !== undefined ? this.height : (availableSize.height || 0) - this.margin.top - this.margin.bottom;
      this.desiredSize = new Size(width, height);
      if (this.isCalculateDesiredSize) {
        this.desiredSize = this.validateDesiredSize(this.desiredSize, availableSize);
      }
      return this.desiredSize;
    };
    /**
     * Arranges the element
     * @param desiredSize
     */
    DrawingElement.prototype.arrange = function (desiredSize) {
      this.actualSize = desiredSize;
      this.updateBounds();
      return this.actualSize;
    };
    /**
     * Updates the bounds of the element
     */
    DrawingElement.prototype.updateBounds = function () {
      this.bounds = getBounds(this);
    };
    /**
     * Validates the size of the element with respect to its minimum and maximum size
     * @param desiredSize
     * @param availableSize
     */
    DrawingElement.prototype.validateDesiredSize = function (desiredSize, availableSize) {
      //Empty canvas
      if (this.isRectElement && !this.width && !this.minWidth && !this.maxWidth) {
        desiredSize.width = 50;
      }
      if (this.isRectElement && !this.height && !this.minHeight && !this.maxHeight) {
        desiredSize.height = 50;
      }
      if (desiredSize === undefined || this.width !== undefined && this.height !== undefined) {
        desiredSize = desiredSize || new Size();
        desiredSize.width = this.width === undefined ? (availableSize.width || 0) - this.margin.left - this.margin.right : this.width;
        desiredSize.height = this.height === undefined ? (availableSize.height || 0) - this.margin.top - this.margin.bottom : this.height;
      }
      //Considering min values
      if (this.minWidth !== undefined) {
        desiredSize.width = Math.max(desiredSize.width, this.minWidth);
      }
      if (this.minHeight !== undefined) {
        desiredSize.height = Math.max(desiredSize.height, this.minHeight);
      }
      //Considering max values
      if (this.maxWidth !== undefined) {
        desiredSize.width = Math.min(desiredSize.width, this.maxWidth);
      }
      if (this.maxHeight !== undefined) {
        desiredSize.height = Math.min(desiredSize.height, this.maxHeight);
      }
      return desiredSize;
    };
    return DrawingElement;
  }();
  var __extends$2 = undefined && undefined.__extends || function () {
    var _extendStatics2 = function extendStatics(d, b) {
      _extendStatics2 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics2(d, b);
    };
    return function (d, b) {
      _extendStatics2(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  /**
   * Container module is used to group related objects
   */
  var Container = /** @class */function (_super) {
    __extends$2(Container, _super);
    function Container() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      //private members    
      _this.desiredBounds = undefined;
      /** @private */
      _this.measureChildren = true;
      /**   @private  */
      _this.prevRotateAngle = 0;
      return _this;
    }
    /**
     * returns whether the container has child elements or not
     */
    Container.prototype.hasChildren = function () {
      if (this.children !== undefined && this.children.length > 0) {
        return true;
      }
      return false;
    };
    /**
     * Measures the minimum space that the container requires
     *
     * @param availableSize
     */
    Container.prototype.measure = function (availableSize) {
      // measure the element and find the desired size
      this.desiredBounds = undefined;
      var desired = undefined;
      var child;
      var childBounds;
      if (this.hasChildren()) {
        //Measuring the children
        for (var i = 0; i < this.children.length; i++) {
          child = this.children[parseInt(i.toString(), 10)];
          if (child.horizontalAlignment === 'Stretch' && !availableSize.width) {
            availableSize.width = child.bounds.width;
          }
          if (child.verticalAlignment === 'Stretch' && !availableSize.height) {
            availableSize.height = child.bounds.height;
          }
          var force = child.horizontalAlignment === 'Stretch' || child.verticalAlignment === 'Stretch';
          if (this.measureChildren || force || child instanceof Container && child.measureChildren !== undefined) {
            child.measure(availableSize);
          }
          childBounds = this.GetChildrenBounds(child);
          if (child.horizontalAlignment !== 'Stretch' && child.verticalAlignment !== 'Stretch') {
            if (this.desiredBounds === undefined) {
              this.desiredBounds = childBounds;
            } else {
              this.desiredBounds.uniteRect(childBounds);
            }
          } else if (this.actualSize && !this.actualSize.width && !this.actualSize.height && !child.preventContainer && child.horizontalAlignment === 'Stretch' && child.verticalAlignment === 'Stretch') {
            if (this.desiredBounds === undefined) {
              this.desiredBounds = child.bounds;
            } else {
              this.desiredBounds.uniteRect(child.bounds);
            }
          }
        }
        if (this.desiredBounds !== undefined && this.rotateAngle !== 0) {
          var offsetPt = {
            x: this.desiredBounds.x + this.desiredBounds.width * this.pivot.x,
            y: this.desiredBounds.y + this.desiredBounds.height * this.pivot.y
          };
          var newPoint = rotatePoint(this.rotateAngle, undefined, undefined, offsetPt);
          this.desiredBounds.x = newPoint.x - this.desiredBounds.width * this.pivot.x;
          this.desiredBounds.y = newPoint.y - this.desiredBounds.height * this.pivot.y;
        }
        if (this.desiredBounds) {
          desired = new Size(this.desiredBounds.width, this.desiredBounds.height);
        }
      }
      desired = this.validateDesiredSize(desired, availableSize);
      this.stretchChildren(desired);
      this.desiredSize = desired;
      return desired;
    };
    /**
     * Arranges the container and its children
     * @param desiredSize
     */
    Container.prototype.arrange = function (desiredSize) {
      var child;
      var childBounds = this.desiredBounds;
      if (childBounds) {
        var x = this.offsetX;
        var y = this.offsetY;
        this.offsetX = childBounds.x + childBounds.width * this.pivot.x;
        this.offsetY = childBounds.y + childBounds.height * this.pivot.y;
        // container has rotateAngle
        if (this.hasChildren()) {
          //Measuring the children
          for (var i = 0; i < this.children.length; i++) {
            child = this.children[parseInt(i.toString(), 10)];
            var arrange = false;
            if (child.horizontalAlignment === 'Stretch') {
              child.offsetX = this.offsetX;
              child.parentTransform = this.parentTransform + this.rotateAngle;
              arrange = true;
            }
            if (child.verticalAlignment === 'Stretch') {
              child.offsetY = this.offsetY;
              child.parentTransform = this.parentTransform + this.rotateAngle;
              arrange = true;
            }
            if (arrange || this.measureChildren || child instanceof Container && child.measureChildren !== undefined) {
              child.arrange(child.desiredSize);
            }
          }
        }
      }
      this.actualSize = desiredSize;
      this.updateBounds();
      this.prevRotateAngle = this.rotateAngle;
      return desiredSize;
    };
    //protected methods
    /**
     * Stretches the child elements based on the size of the container
     * @param size
     */
    Container.prototype.stretchChildren = function (size) {
      if (this.hasChildren()) {
        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {
          var child = _a[_i];
          if (child.horizontalAlignment === 'Stretch' || child.desiredSize.width === undefined) {
            child.desiredSize.width = size.width - child.margin.left - child.margin.right;
          }
          if (child.verticalAlignment === 'Stretch' || child.desiredSize.height === undefined) {
            child.desiredSize.height = size.height - child.margin.top - child.margin.bottom;
          }
          if (child instanceof Container) {
            child.stretchChildren(child.desiredSize);
          }
        }
      }
    };
    /**
     * Finds the offset of the child element with respect to the container
     * @param child
     * @param center
     */
    Container.prototype.findChildOffsetFromCenter = function (child, center) {
      var topLeft = {
        x: center.x - child.desiredSize.width / 2,
        y: center.y - child.desiredSize.height / 2
      };
      var offset = getOffset(topLeft, child);
      //Rotate based on child rotate angle
      offset = rotatePoint(child.rotateAngle, center.x, center.y, offset);
      //Rotate based on parent pivot
      offset = rotatePoint(this.rotateAngle + this.parentTransform, this.offsetX, this.offsetY, offset);
      child.offsetX = offset.x;
      child.offsetY = offset.y;
    };
    //private methods - check its need
    Container.prototype.GetChildrenBounds = function (child) {
      var childSize;
      childSize = child.desiredSize.clone();
      var diffAngle = child.rotateAngle - this.rotateAngle;
      var refPoint = {
        x: child.offsetX,
        y: child.offsetY
      };
      var left = refPoint.x - childSize.width * child.pivot.x;
      var top = refPoint.y - childSize.height * child.pivot.y;
      var right = left + childSize.width;
      var bottom = top + childSize.height;
      var topLeft = {
        x: left,
        y: top
      };
      var topRight = {
        x: right,
        y: top
      };
      var bottomLeft = {
        x: left,
        y: bottom
      };
      var bottomRight = {
        x: right,
        y: bottom
      };
      topLeft = rotatePoint(child.rotateAngle, child.offsetX, child.offsetY, topLeft);
      topRight = rotatePoint(child.rotateAngle, child.offsetX, child.offsetY, topRight);
      bottomLeft = rotatePoint(child.rotateAngle, child.offsetX, child.offsetY, bottomLeft);
      bottomRight = rotatePoint(child.rotateAngle, child.offsetX, child.offsetY, bottomRight);
      if (this.rotateAngle !== 0) {
        topLeft = rotatePoint(-this.rotateAngle, undefined, undefined, topLeft);
        topRight = rotatePoint(-this.rotateAngle, undefined, undefined, topRight);
        bottomLeft = rotatePoint(-this.rotateAngle, undefined, undefined, bottomLeft);
        bottomRight = rotatePoint(-this.rotateAngle, undefined, undefined, bottomRight);
      }
      return Rect.toBounds([topLeft, topRight, bottomLeft, bottomRight]);
    };
    return Container;
  }(DrawingElement);
  var __extends$3 = undefined && undefined.__extends || function () {
    var _extendStatics3 = function extendStatics(d, b) {
      _extendStatics3 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics3(d, b);
    };
    return function (d, b) {
      _extendStatics3(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  /**
   * TextElement is used to display text/annotations
   */
  var TextElement = /** @class */function (_super) {
    __extends$3(TextElement, _super);
    /**
     * set the id for each element
     */
    function TextElement() {
      var _this = _super.call(this) || this;
      /**
       * sets or gets the image source
       */
      _this.textContent = '';
      /** @private */
      _this.canMeasure = true;
      /** @private */
      _this.canConsiderBounds = true;
      /** @private */
      _this.doWrap = true;
      _this.textNodes = [];
      /**
       * Defines the appearance of the text element
       */
      _this.style = {
        color: 'black',
        fill: 'transparent',
        strokeColor: 'black',
        strokeWidth: 1,
        fontFamily: 'Arial',
        fontSize: 12,
        whiteSpace: 'CollapseSpace',
        textWrapping: 'WrapWithOverflow',
        textAlign: 'Center',
        italic: false,
        bold: false,
        textDecoration: 'None',
        strokeDashArray: '',
        opacity: 1,
        textOverflow: 'Wrap'
      };
      _this.style.fill = 'transparent';
      _this.style.strokeColor = 'transparent';
      return _this;
    }
    Object.defineProperty(TextElement.prototype, "content", {
      /**
       * gets the content for the text element
       */
      get: function get() {
        return this.textContent;
      },
      /**
       * sets the content for the text element
       */
      set: function set(value) {
        if (this.textContent !== value) {
          this.textContent = value;
          this.isDirt = true;
          this.doWrap = true;
        }
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(TextElement.prototype, "childNodes", {
      /**
       * sets the content for the text element
       */
      get: function get() {
        return this.textNodes;
      },
      /**
       * gets the content for the text element
       */
      set: function set(value) {
        this.textNodes = value;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(TextElement.prototype, "wrapBounds", {
      /**
       * gets the wrapBounds for the text
       */
      get: function get() {
        return this.textWrapBounds;
      },
      /**
       * sets the wrapBounds for the text
       */
      set: function set(value) {
        this.textWrapBounds = value;
      },
      enumerable: true,
      configurable: true
    });
    /** @private */
    TextElement.prototype.refreshTextElement = function () {
      this.isDirt = true;
    };
    /**
     * Measures the minimum size that is required for the text element
     * @param availableSize
     */
    TextElement.prototype.measure = function (availableSize) {
      var size;
      if (this.isDirt && this.canMeasure) {
        size = measureText(this, this.style, this.content, this.width || availableSize.width);
      } else {
        size = this.desiredSize;
      }
      if (this.width === undefined || this.height === undefined) {
        this.desiredSize = new Size(size.width, size.height);
      } else {
        this.desiredSize = new Size(this.width, this.height);
      }
      this.desiredSize = this.validateDesiredSize(this.desiredSize, availableSize);
      return this.desiredSize;
    };
    /**
     * Arranges the text element
     * @param desiredSize
     */
    TextElement.prototype.arrange = function (desiredSize) {
      if (desiredSize.width !== this.actualSize.width || desiredSize.height !== this.actualSize.height || this.isDirt) {
        this.doWrap = true;
      }
      this.actualSize = desiredSize;
      this.updateBounds();
      this.isDirt = false;
      return this.actualSize;
    };
    return TextElement;
  }(DrawingElement);
  var __extends$1 = undefined && undefined.__extends || function () {
    var _extendStatics4 = function extendStatics(d, b) {
      _extendStatics4 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics4(d, b);
    };
    return function (d, b) {
      _extendStatics4(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  /**
   * Canvas module is used to define a plane(canvas) and to arrange the children based on margin
   */
  var Canvas = /** @class */function (_super) {
    __extends$1(Canvas, _super);
    function Canvas() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      /**
       * Not applicable for canvas
       *  @private
       */
      _this.measureChildren = undefined;
      return _this;
    }
    /**
     * Measures the minimum space that the canvas requires
     * @param availableSize
     */
    Canvas.prototype.measure = function (availableSize) {
      var desired = undefined;
      var desiredBounds = undefined;
      if (this.hasChildren()) {
        //Measuring the children
        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {
          var child = _a[_i];
          if (child instanceof TextElement) {
            if (child.canMeasure) {
              availableSize.width = availableSize.width || this.maxWidth || this.minWidth;
              child.measure(availableSize);
            } else {
              break;
            }
          } else if (!(child instanceof TextElement)) {
            child.measure(availableSize);
          }
          var childSize = child.desiredSize.clone();
          if (child.rotateAngle !== 0) {
            childSize = rotateSize(childSize, child.rotateAngle);
          }
          var right = childSize.width + child.margin.right;
          var bottom = childSize.height + child.margin.bottom;
          var childBounds = new Rect(child.margin.left, child.margin.top, right, bottom);
          if (child["float"]) {
            var position = child.getAbsolutePosition(childSize);
            if (position !== undefined) {
              continue;
            }
          }
          if (!(child instanceof TextElement) || child instanceof TextElement && child.canConsiderBounds) {
            if (desiredBounds === undefined) {
              desiredBounds = childBounds;
            } else {
              desiredBounds.uniteRect(childBounds);
            }
          }
        }
        if (desiredBounds) {
          var leftMargin = 0;
          var topMargin = 0;
          leftMargin = Math.max(desiredBounds.left, 0);
          topMargin = Math.max(desiredBounds.top, 0);
          desired = new Size(desiredBounds.width + leftMargin, desiredBounds.height + topMargin);
        }
      }
      desired = _super.prototype.validateDesiredSize.call(this, desired, availableSize);
      _super.prototype.stretchChildren.call(this, desired);
      this.desiredSize = desired;
      return desired;
    };
    /**
     * Arranges the child elements of the canvas
     */
    Canvas.prototype.arrange = function (desiredSize) {
      this.outerBounds = new Rect();
      if (this.hasChildren()) {
        var y = void 0;
        var x = void 0;
        y = this.offsetY - desiredSize.height * this.pivot.y;
        x = this.offsetX - desiredSize.width * this.pivot.x;
        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {
          var child = _a[_i];
          if ((child.transform & exports.RotateTransform.Parent) !== 0) {
            child.parentTransform = this.parentTransform + this.rotateAngle;
            var childSize = child.desiredSize.clone();
            var topLeft = void 0;
            var center = {
              x: 0,
              y: 0
            };
            var childX = x;
            var childY = y;
            if (child.relativeMode === 'Point') {
              var position = child.getAbsolutePosition(desiredSize);
              if (position !== undefined) {
                childX += position.x;
                childY += position.y;
              }
            }
            if (child.relativeMode === 'Object') {
              topLeft = this.alignChildBasedOnParent(child, childSize, desiredSize, childX, childY);
            } else {
              topLeft = this.alignChildBasedOnaPoint(child, childX, childY);
            }
            center = {
              x: topLeft.x + childSize.width / 2,
              y: topLeft.y + childSize.height / 2
            };
            if (child.rotateValue) {
              var rotateValue = {
                x: this.offsetX + (child.rotateValue.x || 0),
                y: this.offsetY + (child.rotateValue.y || 0)
              };
              var centerPoint = {
                x: this.offsetX,
                y: this.offsetY
              };
              var angle = child.rotateValue.angle | 0;
              var matrix = identityMatrix();
              rotateMatrix(matrix, angle, centerPoint.x, centerPoint.y);
              center = transformPointByMatrix(matrix, rotateValue);
            }
            _super.prototype.findChildOffsetFromCenter.call(this, child, center);
          }
          if (child.horizontalAlignment === 'Stretch' || child.verticalAlignment === 'Stretch') {
            child.arrange(desiredSize);
          } else {
            if (child instanceof TextElement && child.canMeasure) {
              child.arrange(child.desiredSize);
              this.outerBounds.uniteRect(child.outerBounds);
            } else if (!(child instanceof TextElement)) {
              child.arrange(child.desiredSize);
              this.outerBounds.uniteRect(child.outerBounds);
            }
          }
        }
      }
      this.actualSize = desiredSize;
      this.updateBounds();
      this.outerBounds.uniteRect(this.bounds);
      return desiredSize;
    };
    /**
     * Aligns the child element based on its parent
     * @param child
     * @param childSize
     * @param parentSize
     * @param x
     * @param y
     */
    Canvas.prototype.alignChildBasedOnParent = function (child, childSize, parentSize, x, y) {
      switch (child.horizontalAlignment) {
        case 'Auto':
        case 'Left':
          x += child.margin.left;
          break;
        case 'Right':
          x += parentSize.width - childSize.width - child.margin.right;
          break;
        case 'Stretch':
        case 'Center':
          x += parentSize.width / 2 - childSize.width / 2;
          break;
      }
      switch (child.verticalAlignment) {
        case 'Auto':
        case 'Top':
          y += child.margin.top;
          break;
        case 'Bottom':
          y += parentSize.height - childSize.height - child.margin.bottom;
          break;
        case 'Stretch':
        case 'Center':
          y += parentSize.height / 2 - childSize.height / 2;
          break;
      }
      return {
        x: x,
        y: y
      };
    };
    /**
     * Aligns the child elements based on a point
     * @param child
     * @param x
     * @param y
     */
    Canvas.prototype.alignChildBasedOnaPoint = function (child, x, y) {
      x += child.margin.left - child.margin.right;
      y += child.margin.top - child.margin.bottom;
      switch (child.horizontalAlignment) {
        case 'Auto':
        case 'Left':
          x = x;
          break;
        case 'Stretch':
        case 'Center':
          x -= child.desiredSize.width * child.pivot.x;
          break;
        case 'Right':
          x -= child.desiredSize.width;
          break;
      }
      switch (child.verticalAlignment) {
        case 'Auto':
        case 'Top':
          y = y;
          break;
        case 'Stretch':
        case 'Center':
          y -= child.desiredSize.height * child.pivot.y;
          break;
        case 'Bottom':
          y -= child.desiredSize.height;
          break;
      }
      return {
        x: x,
        y: y
      };
    };
    return Canvas;
  }(Container);

  /**
   * Diagram component exported items
   */

  var __extends$4 = undefined && undefined.__extends || function () {
    var _extendStatics5 = function extendStatics(d, b) {
      _extendStatics5 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics5(d, b);
    };
    return function (d, b) {
      _extendStatics5(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  /**
   * ImageElement defines a basic image elements
   */
  var ImageElement = /** @class */function (_super) {
    __extends$4(ImageElement, _super);
    /**
     * set the id for each element
     */
    function ImageElement() {
      var _this = _super.call(this) || this;
      /**
       * sets or gets the image source
       */
      _this.imageSource = '';
      /**
       * sets or gets the print id
       * @private
       */
      _this.printID = '';
      /**
       * sets scaling factor of the image
       */
      _this.imageScale = 'None';
      /**
       * sets the alignment of the image
       */
      _this.imageAlign = 'None';
      /**
       * Sets how to stretch the image
       */
      _this.stretch = 'Stretch';
      return _this;
    }
    Object.defineProperty(ImageElement.prototype, "source", {
      /**
       * Gets the source for the image element
       */
      get: function get() {
        return this.imageSource;
      },
      /**
       * Sets the source for the image element
       */
      set: function set(value) {
        this.imageSource = value;
        this.isDirt = true;
      },
      enumerable: true,
      configurable: true
    });
    /**
     * Measures minimum space that is required to render the image
     * @param availableSize
     */
    ImageElement.prototype.measure = function (availableSize) {
      if (this.isDirt && (this.stretch !== 'Stretch' || this.width === undefined && this.height === undefined)) {
        this.contentSize = measureImage(this.source, this.contentSize);
        this.isDirt = false;
      }
      if (this.width !== undefined && this.height !== undefined) {
        this.desiredSize = new Size(this.width, this.height);
        this.contentSize = this.desiredSize;
      } else {
        this.desiredSize = this.contentSize;
      }
      this.desiredSize = this.validateDesiredSize(this.desiredSize, availableSize);
      return this.desiredSize;
    };
    /**
     * Arranges the image
     * @param desiredSize
     */
    ImageElement.prototype.arrange = function (desiredSize) {
      this.actualSize = new Size(this.desiredSize.width, this.desiredSize.height);
      this.updateBounds();
      return this.actualSize;
    };
    return ImageElement;
  }(DrawingElement);

  /**
   * These utility methods help to process the data and to convert it to desired dimensions
   */
  /** @private */
  function processPathData(data) {
    var collection = [];
    var j;
    var arrayCollection = parsePathData(data);
    if (arrayCollection.length > 0) {
      for (var i = 0; i < arrayCollection.length; i++) {
        var ob = arrayCollection[parseInt(i.toString(), 10)];
        var _char = '';
        _char = ob[0];
        switch (_char.toLowerCase()) {
          case 'm':
            for (j = 1; j < ob.length; j++) {
              collection.push({
                command: _char,
                x: ob[parseInt(j.toString(), 10)],
                y: ob[j + 1]
              });
              j = j + 1;
              if (_char === 'm') {
                _char = 'l';
              } else if (_char === 'M') {
                _char = 'L';
              }
            }
            break;
          case 'l':
          case 't':
            for (j = 1; j < ob.length; j++) {
              collection.push({
                command: _char,
                x: ob[parseInt(j.toString(), 10)],
                y: ob[j + 1]
              });
              j = j + 1;
            }
            break;
          case 'h':
            for (j = 1; j < ob.length; j++) {
              collection.push({
                command: _char,
                x: ob[parseInt(j.toString(), 10)]
              });
            }
            break;
          case 'v':
            for (j = 1; j < ob.length; j++) {
              collection.push({
                command: _char,
                y: ob[parseInt(j.toString(), 10)]
              });
            }
            break;
          case 'z':
            collection.push({
              command: _char
            });
            break;
          case 'c':
            for (j = 1; j < ob.length; j++) {
              collection.push({
                command: _char,
                x1: ob[parseInt(j.toString(), 10)],
                y1: ob[j + 1],
                x2: ob[j + 2],
                y2: ob[j + 3],
                x: ob[j + 4],
                y: ob[j + 5]
              });
              j = j + 5;
            }
            break;
          case 's':
            for (j = 1; j < ob.length; j++) {
              collection.push({
                command: _char,
                x2: ob[parseInt(j.toString(), 10)],
                y2: ob[j + 1],
                x: ob[j + 2],
                y: ob[j + 3]
              });
              j = j + 3;
            }
            break;
          case 'q':
            for (j = 1; j < ob.length; j++) {
              collection.push({
                command: _char,
                x1: ob[parseInt(j.toString(), 10)],
                y1: ob[j + 1],
                x: ob[j + 2],
                y: ob[j + 3]
              });
              j = j + 3;
            }
            break;
          case 'a':
            for (j = 1; j < ob.length; j++) {
              collection.push({
                command: _char,
                r1: ob[parseInt(j.toString(), 10)],
                r2: ob[j + 1],
                angle: ob[j + 2],
                largeArc: ob[j + 3],
                sweep: ob[j + 4],
                x: ob[j + 5],
                y: ob[j + 6]
              });
              j = j + 6;
            }
            break;
        }
      }
    }
    return collection;
  }
  /** @private */
  function parsePathData(data) {
    var tokenizer = /([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi;
    var current = [];
    var commands = [];
    var match = {};
    tokenizer.lastIndex = 0;
    var isExponential = false;
    match = tokenizer.exec(data);
    while (match) {
      if (match[1] === 'e') {
        isExponential = true;
      } else if (match[1]) {
        if (match[1].toLowerCase() === 'zm') {
          if (current.length) {
            commands.push(current);
          }
          commands.push(['Z']);
          current = [match[1].substring(1, 2)];
        } else {
          if (current.length) {
            commands.push(current);
          }
          current = [match[1]];
        }
        isExponential = false;
      } else {
        if (!current.length) {
          current = [];
        }
        if (!isExponential) {
          current.push(Number(match[2]));
        }
        isExponential = false;
      }
      match = tokenizer.exec(data);
    }
    if (current.length) {
      commands.push(current);
    }
    return commands;
  }
  /**
   * Used to find the path for rounded rect
   */
  function getRectanglePath(cornerRadius, height, width) {
    if (cornerRadius > height / 2) {
      cornerRadius = height / 2;
    }
    if (cornerRadius > width / 2) {
      cornerRadius = width / 2;
    }
    var x = 0;
    var y = 0;
    var path = '';
    var points = [{
      x: x + cornerRadius,
      y: y
    }, {
      x: x + width - cornerRadius,
      y: y
    }, {
      x: x + width,
      y: y + cornerRadius
    }, {
      x: x + width,
      y: y + height - cornerRadius
    }, {
      x: x + width - cornerRadius,
      y: y + height
    }, {
      x: x + cornerRadius,
      y: y + height
    }, {
      x: x,
      y: y + height - cornerRadius
    }, {
      x: x,
      y: y + cornerRadius
    }];
    var corners = [{
      x: x + width,
      y: y
    }, {
      x: x + width,
      y: y + height
    }, {
      x: x,
      y: y + height
    }, {
      x: x,
      y: y
    }];
    var corner = 0;
    var point2;
    var next;
    path = 'M' + points[0].x + ' ' + points[0].y;
    var i;
    for (i = 0; i < points.length; i = i + 2) {
      point2 = points[i + 1];
      path += 'L' + point2.x + ' ' + point2.y;
      next = points[i + 2] || points[0];
      // eslint-disable-next-line
      path += 'Q' + corners[corner].x + ' ' + corners[corner].y + ' ' + next.x + ' ' + next.y;
      corner++;
    }
    return path;
  }
  /** @private */
  function pathSegmentCollection(collection) {
    var x0;
    var y0;
    var x1;
    var y1;
    var x2;
    var y2;
    var x;
    var y;
    var length;
    var i;
    var segments = [];
    for (x = 0, y = 0, i = 0, length = collection.length; i < length; ++i) {
      var obj = collection[parseInt(i.toString(), 10)];
      var seg = obj;
      var _char2 = '';
      _char2 = seg.command;
      if ('y1' in seg) {
        y1 = seg.y1;
      }
      if ('y2' in seg) {
        y2 = seg.y2;
      }
      if ('x1' in seg) {
        x1 = seg.x1;
      }
      if ('x2' in seg) {
        x2 = seg.x2;
      }
      if ('x' in seg) {
        x = seg.x;
      }
      if ('y' in seg) {
        y = seg.y;
      }
      var prev = segments[segments.length - 1];
      switch (_char2) {
        case 'M':
          segments.push({
            command: 'M',
            x: x,
            y: y
          });
          break;
        case 'L':
          segments.push({
            command: 'L',
            x0: x0,
            y0: y0,
            x: x,
            y: y
          });
          break;
        case 'H':
          segments.push({
            command: 'L',
            x0: x0,
            y0: y0,
            x: x,
            y: y0
          });
          break;
        case 'V':
          segments.push({
            command: 'L',
            x0: x0,
            y0: y0,
            x: x0,
            y: y
          });
          break;
        case 'C':
          segments.push({
            command: 'C',
            x0: x0,
            y0: y0,
            x1: x1,
            y1: y1,
            x2: x2,
            y2: y2,
            x: x,
            y: y
          });
          break;
        case 'S':
          if (prev) {
            var ctrl = void 0;
            if (prev.command === 'C' || prev.command === 'S') {
              ctrl = {
                x: prev.x2,
                y: prev.y2
              };
            } else {
              ctrl = {
                x: x0,
                y: y0
              };
            }
            var cpt2 = {
              x: 2 * x0 - ctrl.x,
              y: 2 * y0 - ctrl.y
            };
            segments.push({
              command: 'C',
              x0: x0,
              y0: y0,
              x1: cpt2.x,
              y1: cpt2.y,
              x2: x2,
              y2: y2,
              x: x,
              y: y
            });
          }
          break;
        case 'Q':
          //ctx.quadraticCurveTo(x1, y1, x, y);
          segments.push({
            command: 'Q',
            x0: x0,
            y0: y0,
            x1: x1,
            y1: y1,
            x: x,
            y: y
          });
          break;
        case 'T':
          if (prev) {
            var ctrl = void 0;
            if (prev.command === 'Q') {
              ctrl = {
                x: prev.x1,
                y: prev.y1
              };
            } else {
              ctrl = {
                x: x0,
                y: y0
              };
            }
            var cpt2 = {
              x: 2 * x0 - ctrl.x,
              y: 2 * y0 - ctrl.y
            };
            segments.push({
              command: 'Q',
              x0: x0,
              y0: y0,
              x1: cpt2.x,
              y1: cpt2.y,
              x: x,
              y: y
            });
          }
          break;
        case 'A':
          var newSeg = seg;
          newSeg.command = 'A';
          segments.push(newSeg);
          break;
        case 'Z':
        case 'z':
          segments.push({
            command: 'Z'
          });
          x = x0;
          y = y0;
          break;
      }
      x0 = x;
      y0 = y;
    }
    return segments;
  }
  /** @private */
  function transformPath(arr, sX, sY, s, bX, bY, iX, iY) {
    var x1;
    var y1;
    var x2;
    var y2;
    var x;
    var y;
    var length;
    var i;
    var newSeg;
    for (x = 0, y = 0, i = 0, length = arr.length; i < length; ++i) {
      var obj = arr[parseInt(i.toString(), 10)];
      var seg = obj;
      var _char3 = seg.command;
      if ('x' in seg) {
        x = seg.x;
      }
      if ('y' in seg) {
        y = seg.y;
      }
      if ('y1' in seg) {
        y1 = seg.y1;
      }
      if ('y2' in seg) {
        y2 = seg.y2;
      }
      if ('x1' in seg) {
        x1 = seg.x1;
      }
      if ('x2' in seg) {
        x2 = seg.x2;
      }
      if (s) {
        if (x !== undefined) {
          x = scalePathData(x, sX, bX, iX);
        }
        if (y !== undefined) {
          y = scalePathData(y, sY, bY, iY);
        }
        if (x1 !== undefined) {
          x1 = scalePathData(x1, sX, bX, iX);
        }
        if (y1 !== undefined) {
          y1 = scalePathData(y1, sY, bY, iY);
        }
        if (x2 !== undefined) {
          x2 = scalePathData(x2, sX, bX, iX);
        }
        if (y2 !== undefined) {
          y2 = scalePathData(y2, sY, bY, iY);
        }
      } else {
        if (x !== undefined) {
          x = Number((x + sX).toFixed(2));
        }
        if (y !== undefined) {
          y = Number((y + sY).toFixed(2));
        }
        if (x1 !== undefined) {
          x1 = Number((x1 + sX).toFixed(2));
        }
        if (y1 !== undefined) {
          y1 = Number((y1 + sY).toFixed(2));
        }
        if (x2 !== undefined) {
          x2 = Number((x2 + sX).toFixed(2));
        }
        if (y2 !== undefined) {
          y2 = Number((y2 + sY).toFixed(2));
        }
      }
      var scaledPath = {
        x: x,
        y: y,
        x1: x1,
        y1: y1,
        x2: x2,
        y2: y2,
        r1: seg.r1,
        r2: seg.r2
      };
      newSeg = updatedSegment(seg, _char3, scaledPath, s, sX, sY);
      if (newSeg) {
        arr[parseInt(i.toString(), 10)] = newSeg;
      }
      // Record the start of a subpath
    }
    var pathData = getPathString(arr);
    return pathData;
  }
  /** @private */
  function updatedSegment(segment, _char4, obj, isScale, sX, sY) {
    switch (_char4) {
      case 'M':
        segment.x = obj.x;
        segment.y = obj.y;
        break;
      case 'L':
        segment.x = obj.x;
        segment.y = obj.y;
        break;
      case 'H':
        segment.x = obj.x;
        break;
      case 'V':
        segment.y = obj.y;
        break;
      case 'C':
        segment.x = obj.x;
        segment.y = obj.y;
        segment.x1 = obj.x1;
        segment.y1 = obj.y1;
        segment.x2 = obj.x2;
        segment.y2 = obj.y2;
        break;
      case 'S':
        segment.x = obj.x;
        segment.y = obj.y;
        segment.x2 = obj.x2;
        segment.y2 = obj.y2;
        break;
      case 'Q':
        segment.x = obj.x;
        segment.y = obj.y;
        segment.x1 = obj.x1;
        segment.y1 = obj.y1;
        break;
      case 'T':
        segment.x = obj.x;
        segment.y = obj.y;
        break;
      case 'A':
        var r1 = obj.r1;
        var r2 = obj.r2;
        if (isScale) {
          obj.r1 = r1 = r1 * sX;
          obj.r2 = r2 = r2 * sY;
        }
        segment.x = obj.x;
        segment.y = obj.y;
        segment.r1 = obj.r1;
        segment.r2 = obj.r2;
        break;
      case 'z':
      case 'Z':
        segment = {
          command: 'Z'
        };
        break;
    }
    return segment;
  }
  /** @private */
  function scalePathData(val, scaleFactor, oldOffset, newOffset) {
    if (val !== oldOffset) {
      if (newOffset !== oldOffset) {
        val = val * scaleFactor - (Number(oldOffset) * scaleFactor - Number(oldOffset)) + (newOffset - Number(oldOffset));
      } else {
        val = Number(val) * scaleFactor - (Number(oldOffset) * scaleFactor - Number(oldOffset));
      }
    } else {
      if (newOffset !== oldOffset) {
        val = newOffset;
      }
    }
    return Number(val.toFixed(2));
  }
  /** @private */
  function splitArrayCollection(arrayCollection) {
    var x0;
    var y0;
    var x1;
    var y1;
    var x2;
    var y2;
    var x;
    var y;
    var length;
    var i;
    for (x = 0, y = 0, i = 0, length = arrayCollection.length; i < length; ++i) {
      var path = arrayCollection[parseInt(i.toString(), 10)];
      var seg = path;
      var _char5 = seg.command;
      if (/[MLHVCSQTA]/.test(_char5)) {
        if ('x' in seg) {
          seg.x = x = seg.x;
        }
        if ('y' in seg) {
          seg.y = y = seg.y;
        }
      } else {
        if ('x1' in seg) {
          seg.x1 = x1 = x + seg.x1;
        }
        if ('x2' in seg) {
          seg.x2 = x2 = x + seg.x2;
        }
        if ('y1' in seg) {
          seg.y1 = y1 = y + seg.y1;
        }
        if ('y2' in seg) {
          seg.y2 = y2 = y + seg.y2;
        }
        if ('x' in seg) {
          seg.x = x += seg.x;
        }
        if ('y' in seg) {
          seg.y = y += seg.y;
        }
        var newSeg = void 0;
        switch (_char5) {
          case 'm':
          case 'M':
            newSeg = {
              command: 'M',
              x: x,
              y: y
            };
            break;
          case 'l':
          case 'L':
            newSeg = {
              command: 'L',
              x: x,
              y: y
            };
            break;
          case 'h':
          case 'H':
            newSeg = {
              command: 'H',
              x: x
            };
            break;
          case 'v':
          case 'V':
            newSeg = {
              command: 'V',
              y: y
            };
            break;
          case 'c':
          case 'C':
            newSeg = {
              command: 'C',
              x: x,
              y: y,
              x1: x1,
              y1: y1,
              x2: x2,
              y2: y2
            };
            break;
          case 's':
          case 'S':
            newSeg = {
              command: 'S',
              x: x,
              y: y,
              x2: x2,
              y2: y2
            };
            break;
          case 'q':
          case 'Q':
            newSeg = {
              command: 'Q',
              x: x,
              y: y,
              x1: x1,
              y1: y1
            };
            break;
          case 't':
          case 'T':
            newSeg = {
              command: 'T',
              x: x,
              y: y
            };
            break;
          case 'a':
          case 'A':
            newSeg = {
              command: 'A',
              x: x,
              y: y
            };
            newSeg.r1 = seg.r1;
            newSeg.r2 = seg.r2;
            newSeg.angle = seg.angle;
            newSeg.largeArc = seg.largeArc;
            newSeg.sweep = seg.sweep;
            break;
          case 'z':
          case 'Z':
            newSeg = {
              command: 'Z'
            };
            x = x0;
            y = y0;
            newSeg = arrayCollection[parseInt(i.toString(), 10)];
            break;
        }
        if (newSeg) {
          arrayCollection[parseInt(i.toString(), 10)] = newSeg;
        }
      }
      if (_char5 === 'M' || _char5 === 'm') {
        x0 = x;
        y0 = y;
      }
    }
    return arrayCollection;
  }
  /** @private */
  function getPathString(arrayCollection) {
    var getNewString = '';
    var i;
    for (i = 0; i < arrayCollection.length; i++) {
      if (i === 0) {
        getNewString += getString(arrayCollection[parseInt(i.toString(), 10)]);
      } else {
        getNewString += ' ' + getString(arrayCollection[parseInt(i.toString(), 10)]);
      }
    }
    return getNewString;
  }
  /** @private */
  function getString(obj) {
    var string = '';
    switch (obj.command) {
      case 'Z':
      case 'z':
        string = obj.command;
        break;
      case 'M':
      case 'm':
      case 'L':
      case 'l':
        string = obj.command + ' ' + obj.x + ' ' + obj.y;
        break;
      case 'C':
      case 'c':
        string = obj.command + ' ' + obj.x1 + ' ' + obj.y1 + ' ' + obj.x2 + ' ' + obj.y2 + ' ' + obj.x + ' ' + obj.y;
        break;
      case 'Q':
      case 'q':
        string = obj.command + ' ' + obj.x1 + ' ' + obj.y1 + ' ' + obj.x + ' ' + obj.y;
        break;
      case 'A':
      case 'a':
        var cmd = obj.command;
        var ang = obj.angle;
        var l = obj.largeArc ? '1' : '0';
        var s = obj.sweep ? '1' : '0';
        string = cmd + ' ' + obj.r1 + ' ' + obj.r2 + ' ' + ang + ' ' + l + ' ' + s + ' ' + obj.x + ' ' + obj.y;
        break;
      case 'H':
      case 'h':
        string = obj.command + ' ' + obj.x;
        break;
      case 'V':
      case 'v':
        string = obj.command + ' ' + obj.y;
        break;
      case 'S':
      case 's':
        string = obj.command + ' ' + obj.x2 + ' ' + obj.y2 + ' ' + obj.x + ' ' + obj.y;
        break;
      case 'T':
      case 't':
        string = obj.command + ' ' + obj.x + ' ' + obj.y;
    }
    return string;
  }
  var __extends$5 = undefined && undefined.__extends || function () {
    var _extendStatics6 = function extendStatics(d, b) {
      _extendStatics6 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics6(d, b);
    };
    return function (d, b) {
      _extendStatics6(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  /**
   * PathElement takes care of how to align the path based on offsetX and offsetY
   */
  var PathElement = /** @class */function (_super) {
    __extends$5(PathElement, _super);
    /**
     * set the id for each element
     */
    function PathElement() {
      var _this = _super.call(this) || this;
      /**
       * Gets or sets the geometry of the path element
       */
      _this.pathData = '';
      /**
       * Gets/Sets whether the path has to be transformed to fit the given x,y, width, height
       */
      _this.transformPath = true;
      /**
       * Gets/Sets the equivalent path, that will have the origin as 0,0
       */
      _this.absolutePath = '';
      /**   @private  */
      _this.canMeasurePath = false;
      //Private variables
      /**   @private  */
      _this.absoluteBounds = new Rect();
      return _this;
    }
    Object.defineProperty(PathElement.prototype, "data", {
      /**
       * Gets the geometry of the path element
       */
      get: function get() {
        return this.pathData;
      },
      /**
       * Sets the geometry of the path element
       */
      set: function set(value) {
        if (this.pathData !== value) {
          this.pathData = value;
          this.isDirt = true;
        }
      },
      enumerable: true,
      configurable: true
    });
    /**
     * Measures the minimum space that is required to render the element
     * @param availableSize
     */
    PathElement.prototype.measure = function (availableSize) {
      //Performance issue - Avoiding measuring the connector path
      if (this.staticSize && this.width !== undefined && this.height !== undefined) {
        this.absoluteBounds = new Rect(this.offsetX - this.width * this.pivot.x, this.offsetY - this.height * this.pivot.y, this.width, this.height);
      } else if (this.isDirt && (this.transformPath || this.width === undefined || this.height === undefined) && (!this.absoluteBounds || this.absoluteBounds.height === 0) || this.canMeasurePath) {
        //Measure the element only whent the path data is changed/ size is not specified
        this.absoluteBounds = measurePath(this.data ? this.data : '');
      }
      if (this.width === undefined) {
        this.desiredSize = new Size(this.absoluteBounds.width, this.height || this.absoluteBounds.height);
      } else if (this.height === undefined) {
        this.desiredSize = new Size(this.width || this.absoluteBounds.width, this.absoluteBounds.height);
      } else {
        this.desiredSize = new Size(this.width, this.height);
      }
      this.desiredSize = this.validateDesiredSize(this.desiredSize, availableSize);
      this.canMeasurePath = false;
      return this.desiredSize;
    };
    /**
     * Arranges the path element
     * @param desiredSize
     */
    PathElement.prototype.arrange = function (desiredSize) {
      if (this.isDirt || this.actualSize.width !== desiredSize.width || this.actualSize.height !== desiredSize.height) {
        this.isDirt = true;
        this.absolutePath = this.updatePath(this.data, this.absoluteBounds, desiredSize);
        if (!this.staticSize) {
          this.points = null;
        }
      }
      this.actualSize = this.desiredSize;
      this.updateBounds();
      this.isDirt = false;
      return this.actualSize;
    };
    /**
     * Translates the path to 0,0 and scales the path based on the actual size
     * @param pathData
     * @param bounds
     * @param actualSize
     */
    PathElement.prototype.updatePath = function (pathData, bounds, actualSize) {
      var isScale = false;
      var newPathString = '';
      var scaleX = -bounds.x;
      var scaleY = -bounds.y;
      var arrayCollection = [];
      if (actualSize.width !== bounds.width || actualSize.height !== bounds.height) {
        scaleX = actualSize.width / Number(bounds.width ? bounds.width : 1);
        scaleY = actualSize.height / Number(bounds.height ? bounds.height : 1);
        isScale = true;
      }
      arrayCollection = processPathData(pathData);
      arrayCollection = splitArrayCollection(arrayCollection);
      if ((isScale || this.isDirt) && this.transformPath) {
        newPathString = transformPath(arrayCollection, scaleX, scaleY, isScale, bounds.x, bounds.y, 0, 0);
      } else {
        newPathString = getPathString(arrayCollection);
      }
      isScale = false;
      return newPathString;
    };
    return PathElement;
  }(DrawingElement);

  /**
   * Diagram component exported items
   */

  /**
   * Diagram component exported items
   */

  /**
   * Diagram component exported items
   */

  var __extends$6 = undefined && undefined.__extends || function () {
    var _extendStatics7 = function extendStatics(d, b) {
      _extendStatics7 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics7(d, b);
    };
    return function (d, b) {
      _extendStatics7(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  /**
   * Defines and processes coordinates
   */
  var Point = /** @class */function (_super) {
    __extends$6(Point, _super);
    function Point() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    /**   @private  */
    Point.equals = function (point1, point2) {
      if (point1 === point2) {
        return true;
      }
      if (!point1 || !point2) {
        return false;
      }
      return !point1 || !point2 || point1.x === point2.x && point1.y === point2.y;
    };
    /**
     * check whether the points are given
     */
    Point.isEmptyPoint = function (point) {
      if (point.x && point.y) {
        return false;
      }
      return true;
    };
    /**   @private  */
    Point.transform = function (point, angle, length) {
      var pt = {
        x: 0,
        y: 0
      };
      pt.x = Math.round((point.x + length * Math.cos(angle * Math.PI / 180)) * 100) / 100;
      pt.y = Math.round((point.y + length * Math.sin(angle * Math.PI / 180)) * 100) / 100;
      return pt;
    };
    /**   @private  */
    Point.findLength = function (s, e) {
      var length = Math.sqrt(Math.pow(s.x - e.x, 2) + Math.pow(s.y - e.y, 2));
      return length;
    };
    /**   @private  */
    Point.findAngle = function (point1, point2) {
      var angle = Math.atan2(point2.y - point1.y, point2.x - point1.x);
      angle = 180 * angle / Math.PI;
      angle %= 360;
      if (angle < 0) {
        angle += 360;
      }
      return angle;
    };
    /**   @private  */
    Point.distancePoints = function (pt1, pt2) {
      return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));
    };
    /**   @private  */
    Point.getLengthFromListOfPoints = function (points) {
      var length = 0;
      for (var j = 0; j < points.length - 1; j++) {
        length += this.distancePoints(points[parseInt(j.toString(), 10)], points[j + 1]);
      }
      return length;
    };
    /**   @private  */
    Point.adjustPoint = function (source, target, isStart, length) {
      var pt = isStart ? {
        x: source.x,
        y: source.y
      } : {
        x: target.x,
        y: target.y
      };
      var angle;
      if (source.x === target.x) {
        if (source.y < target.y && isStart || source.y > target.y && !isStart) {
          pt.y += length;
        } else {
          pt.y -= length;
        }
      } else if (source.y === target.y) {
        if (source.x < target.x && isStart || source.x > target.x && !isStart) {
          pt.x += length;
        } else {
          pt.x -= length;
        }
      } else {
        if (isStart) {
          angle = this.findAngle(source, target);
          pt = this.transform(source, angle, length);
        } else {
          angle = this.findAngle(target, source);
          pt = this.transform(target, angle, length);
        }
      }
      return pt;
    };
    /**   @private  */
    Point.direction = function (pt1, pt2) {
      if (Math.abs(pt2.x - pt1.x) > Math.abs(pt2.y - pt1.y)) {
        return pt1.x < pt2.x ? 'Right' : 'Left';
      } else {
        return pt1.y < pt2.y ? 'Bottom' : 'Top';
      }
    };
    /**
     * @private
     * Returns the name of class Point
     */
    Point.prototype.getClassName = function () {
      return 'Point';
    };
    __decorate$1([sf.base.Property(0)], Point.prototype, "x", void 0);
    __decorate$1([sf.base.Property(0)], Point.prototype, "y", void 0);
    return Point;
  }(sf.base.ChildProperty);

  /**
   * Diagram component exported items
   */

  // import { overFlow } from './../utility/base-util';
  /**
   * Canvas Renderer
   */
  /** @private */
  var CanvasRenderer = /** @class */function () {
    function CanvasRenderer() {}
    /**   @private  */
    CanvasRenderer.getContext = function (canvas) {
      return canvas.getContext('2d');
    };
    CanvasRenderer.prototype.setStyle = function (canvas, style) {
      var ctx = CanvasRenderer.getContext(canvas);
      if (style.fill === 'none') {
        style.fill = 'transparent';
      }
      if (style.stroke === 'none') {
        style.stroke = 'transparent';
      }
      ctx.strokeStyle = style.stroke;
      ctx.lineWidth = style.strokeWidth;
      if (style.strokeWidth === 0) {
        ctx.strokeStyle = 'transparent';
      }
      ctx.globalAlpha = style.opacity;
      var dashArray = [];
      if (style.dashArray) {
        dashArray = this.parseDashArray(style.dashArray);
      }
      ctx.setLineDash(dashArray);
      ctx.fillStyle = style.fill;
    };
    CanvasRenderer.prototype.rotateContext = function (canvas, angle, x, y) {
      var ctx = CanvasRenderer.getContext(canvas);
      ctx.translate(x, y);
      ctx.rotate(angle * Math.PI / 180);
      ctx.translate(-x, -y);
    };
    CanvasRenderer.prototype.setFontStyle = function (canvas, text) {
      var ctx = CanvasRenderer.getContext(canvas);
      var font = '';
      if (text.italic) {
        font += 'italic ';
      }
      if (text.bold) {
        font += 'bold ';
      }
      font += text.fontSize + 'px ';
      font += text.fontFamily;
      ctx.font = font;
    };
    /**   @private  */
    CanvasRenderer.prototype.parseDashArray = function (dashArray) {
      var dashes = [];
      var separator = dashArray.indexOf(' ') !== -1 ? ' ' : ',';
      var splittedDashes = dashArray.split(separator);
      for (var _i = 0, splittedDashes_1 = splittedDashes; _i < splittedDashes_1.length; _i++) {
        var i = splittedDashes_1[_i];
        dashes.push(Number(i));
      }
      return dashes;
    };
    //Rendering Part
    /**   @private  */
    CanvasRenderer.prototype.drawRectangle = function (canvas, options) {
      if (options.visible === true) {
        if (options.cornerRadius) {
          options.data = getRectanglePath(options.cornerRadius, options.height, options.width);
          this.drawPath(canvas, options);
        } else {
          var ctx = CanvasRenderer.getContext(canvas);
          ctx.save();
          ctx.beginPath();
          var cornerRadius = options.cornerRadius;
          var pivotX = options.x + options.width * options.pivotX;
          var pivotY = options.y + options.height * options.pivotY;
          this.rotateContext(canvas, options.angle, pivotX, pivotY);
          this.setStyle(canvas, options);
          ctx.rect(options.x, options.y, options.width, options.height);
          ctx.fillRect(options.x, options.y, options.width, options.height);
          ctx.fill();
          ctx.stroke();
          ctx.closePath();
          ctx.restore();
        }
      }
    };
    /**   @private  */
    CanvasRenderer.prototype.drawPath = function (canvas, options) {
      var collection = [];
      collection = processPathData(options.data);
      collection = pathSegmentCollection(collection);
      var ctx = CanvasRenderer.getContext(canvas);
      ctx.save();
      ctx.beginPath();
      var pivotY = options.y + options.height * options.pivotY;
      var pivotX = options.x + options.width * options.pivotX;
      this.rotateContext(canvas, options.angle, pivotX, pivotY);
      this.setStyle(canvas, options);
      ctx.translate(options.x, options.y);
      this.renderPath(canvas, options, collection);
      ctx.fill();
      ctx.translate(-options.x, -options.y);
      ctx.stroke();
      ctx.restore();
    };
    /**   @private  */
    CanvasRenderer.prototype.renderPath = function (canvas, options, collection) {
      if (options.visible === true) {
        var ctx = CanvasRenderer.getContext(canvas);
        var x0 = void 0;
        var y0 = void 0;
        var x1 = void 0;
        var y1 = void 0;
        var x2 = void 0;
        var y2 = void 0;
        var x = void 0;
        var y = void 0;
        var length_1;
        var i = void 0;
        var segs = collection;
        for (x = 0, y = 0, i = 0, length_1 = segs.length; i < length_1; ++i) {
          var obj = segs[parseInt(i.toString(), 10)];
          var seg = obj;
          var _char6 = seg.command;
          if ('x1' in seg) {
            x1 = seg.x1;
          }
          if ('x2' in seg) {
            x2 = seg.x2;
          }
          if ('y1' in seg) {
            y1 = seg.y1;
          }
          if ('y2' in seg) {
            y2 = seg.y2;
          }
          if ('x' in seg) {
            x = seg.x;
          }
          if ('y' in seg) {
            y = seg.y;
          }
          switch (_char6) {
            case 'M':
              ctx.moveTo(x, y);
              seg.x = x;
              seg.y = y;
              break;
            case 'L':
              ctx.lineTo(x, y);
              seg.x = x;
              seg.y = y;
              break;
            case 'C':
              ctx.bezierCurveTo(x1, y1, x2, y2, x, y);
              seg.x = x;
              seg.y = y;
              seg.x1 = x1;
              seg.y1 = y1;
              seg.x2 = x2;
              seg.y2 = y2;
              break;
            case 'Q':
              ctx.quadraticCurveTo(x1, y1, x, y);
              seg.x = x;
              seg.y = y;
              seg.x1 = x1;
              seg.y1 = y1;
              break;
            case 'A':
              var curr = {
                x: x0,
                y: y0
              };
              var rx = seg.r1;
              var ry = seg.r2;
              var xAxisRotation = seg.angle * (Math.PI / 180.0);
              var largeArc = seg.largeArc;
              var sweep = seg.sweep;
              var cp = {
                x: x,
                y: y
              };
              var currp = {
                x: Math.cos(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.sin(xAxisRotation) * (curr.y - cp.y) / 2.0,
                y: -Math.sin(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.cos(xAxisRotation) * (curr.y - cp.y) / 2.0
              };
              var l = Math.pow(currp.x, 2) / Math.pow(rx, 2) + Math.pow(currp.y, 2) / Math.pow(ry, 2);
              if (l > 1) {
                rx *= Math.sqrt(l);
                ry *= Math.sqrt(l);
              }
              var k = Math.pow(ry, 2) * Math.pow(currp.x, 2);
              var s = (largeArc === sweep ? -1 : 1) * Math.sqrt((Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(currp.y, 2) - k) / (Math.pow(rx, 2) * Math.pow(currp.y, 2) + Math.pow(ry, 2) * Math.pow(currp.x, 2)));
              if (isNaN(s)) {
                s = 0;
              }
              var cpp = {
                x: s * rx * currp.y / ry,
                y: s * -ry * currp.x / rx
              };
              var centp = {
                x: (curr.x + cp.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y,
                y: (curr.y + cp.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y
              };
              var a1 = this.a([1, 0], [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry]);
              var u = [(currp.x - cpp.x) / rx, (currp.y - cpp.y) / ry];
              var v = [(-currp.x - cpp.x) / rx, (-currp.y - cpp.y) / ry];
              var ad = this.a(u, v);
              if (this.r(u, v) <= -1) {
                ad = Math.PI;
              }
              if (this.r(u, v) >= 1) {
                ad = 0;
              }
              seg.centp = centp;
              seg.xAxisRotation = xAxisRotation;
              seg.rx = rx;
              seg.ry = ry;
              seg.a1 = a1;
              seg.ad = ad;
              seg.sweep = sweep;
              if (ctx != null) {
                var ra = rx > ry ? rx : ry;
                var sx = rx > ry ? 1 : rx / ry;
                var sy = rx > ry ? ry / rx : 1;
                ctx.save();
                ctx.translate(centp.x, centp.y);
                ctx.rotate(xAxisRotation);
                ctx.scale(sx, sy);
                ctx.arc(0, 0, ra, a1, a1 + ad, !sweep);
                ctx.scale(1 / sx, 1 / sy);
                ctx.rotate(-xAxisRotation);
                ctx.translate(-centp.x, -centp.y);
                ctx.restore();
              }
              break;
            case 'Z':
            case 'z':
              ctx.closePath();
              x = x0;
              y = y0;
              break;
          }
          x0 = x;
          y0 = y;
        }
      }
    };
    /**   @private  */
    CanvasRenderer.prototype.drawText = function (canvas, options) {
      if (options.content && options.visible === true) {
        var ctx = CanvasRenderer.getContext(canvas);
        ctx.save();
        this.setStyle(canvas, options);
        var pivotX = options.x + options.width * options.pivotX;
        var pivotY = options.y + options.height * options.pivotY;
        this.rotateContext(canvas, options.angle, pivotX, pivotY);
        this.setFontStyle(canvas, options);
        var i = 0;
        var childNodes = [];
        childNodes = options.childNodes;
        var wrapBounds = options.wrapBounds;
        ctx.fillStyle = options.color;
        if (wrapBounds) {
          var position = this.labelAlign(options, wrapBounds, childNodes);
          for (i = 0; i < childNodes.length; i++) {
            var child = childNodes[parseInt(i.toString(), 10)];
            if (child.text !== '\n') {
              var offsetX = position.x + child.x - wrapBounds.x;
              var offsetY = position.y + child.dy * i + options.fontSize * 0.8;
              // if (wrapBounds.width > options.width && options.textOverflow !== 'Wrap') {
              //     child.text = overFlow(child.text, options);
              // }
              ctx.fillText(child.text, offsetX, offsetY);
              if (options.textDecoration === 'Underline' || options.textDecoration === 'Overline' || options.textDecoration === 'LineThrough') {
                var startPointX = offsetX;
                var startPointY = void 0;
                var textlength = ctx.measureText(child.text).width;
                var endPointX = offsetX + textlength;
                var endPointY = void 0;
                switch (options.textDecoration) {
                  case 'Underline':
                    startPointY = offsetY + 2;
                    endPointY = offsetY + 2;
                    break;
                  case 'Overline':
                    startPointY = position.y + child.dy * i;
                    endPointY = position.y + child.dy * i;
                    break;
                  case 'LineThrough':
                    startPointY = (offsetY + position.y + child.dy * i) / 2 + 2;
                    endPointY = (offsetY + position.y + child.dy * i) / 2 + 2;
                }
                ctx.beginPath();
                ctx.moveTo(startPointX, startPointY);
                ctx.lineTo(endPointX, endPointY);
                ctx.strokeStyle = options.color;
                ctx.lineWidth = options.fontSize * .08;
                ctx.globalAlpha = options.opacity;
                ctx.stroke();
              }
            }
          }
        }
        ctx.restore();
      }
    };
    //end region
    // vector magnitude
    CanvasRenderer.prototype.m = function (v) {
      return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));
    };
    // ratio between two vectors
    CanvasRenderer.prototype.r = function (u, v) {
      return (u[0] * v[0] + u[1] * v[1]) / (this.m(u) * this.m(v));
    };
    // angle between two vectors
    CanvasRenderer.prototype.a = function (u, v) {
      return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(this.r(u, v));
    };
    CanvasRenderer.prototype.getMeetOffset = function (arg, res, dest) {
      var max = Math.max(res, dest);
      var min = Math.min(res, dest);
      switch (arg) {
        case 'min':
          return 0;
        case 'mid':
          return (max - min) / 2;
        case 'max':
          return max - min;
        default:
          return 0;
      }
    };
    CanvasRenderer.prototype.getSliceOffset = function (arg, res, dest, src) {
      switch (arg) {
        case 'min':
          return 0;
        case 'mid':
          return (res - dest) / 2 * src / res;
        case 'max':
          return (res - dest) * src / res;
        default:
          return 0;
      }
    };
    CanvasRenderer.prototype.image = function (ctx, image, x, y, width, height, alignOptions) {
      ctx.beginPath();
      var srcWidth = image.width;
      var srcHeight = image.height;
      var destinationW = width;
      var destinationH = height;
      var resultWidth = 0;
      var resultHeight = 0;
      ctx.globalAlpha = alignOptions.opacity;
      if (alignOptions && alignOptions.alignment !== 'None') {
        var xalign = alignOptions.alignment.toLowerCase().substr(1, 3);
        var yalign = alignOptions.alignment.toLowerCase().substr(5, 3);
        if (alignOptions.scale === 'Slice') {
          var a = function a() {
            resultWidth = destinationW;
            resultHeight = srcHeight * destinationW / srcWidth;
          };
          var b = function b() {
            resultWidth = srcWidth * destinationH / srcHeight;
            resultHeight = destinationH;
          };
          if (destinationW > destinationH) {
            a();
            if (destinationH > resultHeight) {
              b();
            }
          } else if (destinationW === destinationH) {
            if (srcWidth > srcHeight) {
              b();
            } else {
              a();
            }
          } else {
            b();
            if (destinationW > resultWidth) {
              a();
            }
          }
          var x1 = this.getSliceOffset(xalign, resultWidth, destinationW, srcWidth);
          var y1 = this.getSliceOffset(yalign, resultHeight, destinationH, srcHeight);
          var sWidth = srcWidth - x1;
          var sHeight = srcHeight - y1;
          var dWidth = resultWidth - x1 * (resultWidth / srcWidth);
          var dHeight = resultHeight - y1 * (resultHeight / srcHeight);
          var canvas1 = createHtmlElement('canvas', {
            'width': width.toString(),
            'height': height.toString()
          });
          var ctx1 = canvas1.getContext('2d');
          ctx1.drawImage(image, x1, y1, sWidth, sHeight, 0, 0, dWidth, dHeight);
          ctx.drawImage(canvas1, x, y, width, height);
        } else if (alignOptions.scale === 'Meet') {
          var srcRatio = srcHeight / srcWidth;
          var destRatio = destinationH / destinationW;
          resultWidth = destRatio > srcRatio ? destinationW : destinationH / srcRatio;
          resultHeight = destRatio > srcRatio ? destinationW * srcRatio : destinationH;
          x += this.getMeetOffset(xalign, resultWidth, destinationW);
          y += this.getMeetOffset(yalign, resultHeight, destinationH);
          ctx.drawImage(image, 0, 0, srcWidth, srcHeight, x, y, resultWidth, resultHeight);
        } else {
          ctx.drawImage(image, x, y, width, height);
        }
      } else {
        if (image.complete) {
          ctx.drawImage(image, x, y, width, height);
        } else {
          var transform_1 = ctx.getTransform();
          image.onload = function () {
            ctx.setTransform(transform_1.a, transform_1.b, transform_1.c, transform_1.d, transform_1.e, transform_1.f);
            ctx.drawImage(image, x, y, width, height);
          };
        }
      }
      ctx.closePath();
    };
    // text utility
    CanvasRenderer.prototype.loadImage = function (ctx, obj, canvas, pivotX, pivotY) {
      this.rotateContext(canvas, obj.angle, pivotX, pivotY);
      var image;
      if (window.customStampCollection && window.customStampCollection.get(obj.printID)) {
        image = window.customStampCollection.get(obj.printID);
      } else {
        image = new Image();
        image.src = obj.source;
      }
      this.image(ctx, image, obj.x, obj.y, obj.width, obj.height, obj);
    };
    /**   @private  */
    CanvasRenderer.prototype.drawImage = function (canvas, obj, parentSvg, fromPalette) {
      var _this = this;
      if (obj.visible) {
        var ctx_1 = CanvasRenderer.getContext(canvas);
        ctx_1.save();
        var pivotX_1 = obj.x + obj.width * obj.pivotX;
        var pivotY_1 = obj.y + obj.height * obj.pivotY;
        var imageObj = new Image();
        imageObj.src = obj.source;
        var id = ctx_1.canvas.id.split('_');
        var value = id[id.length - 1] === ('diagram' || false) ? true : false;
        /**
         *  Since Clipping portion for node with slice option is not calculated properly
         * if (obj.sourceX !== undefined && obj.sourceY !== undefined && obj.sourceWidth !== undefined
         *  && obj.sourceHeight !== undefined) {
         *  ctx.drawImage(imageObj, obj.sourceX, obj.sourceY, obj.sourceWidth, obj.sourceHeight, obj.x, obj.y, obj.width, obj.height);
         *  } else {
         *             ctx.drawImage(imageObj, obj.x, obj.y, obj.width, obj.height);
         * }
         */
        if (!fromPalette) {
          this.loadImage(ctx_1, obj, canvas, pivotX_1, pivotY_1);
        } else {
          imageObj.onload = function () {
            _this.loadImage(ctx_1, obj, canvas, pivotX_1, pivotY_1);
          };
        }
        ctx_1.restore();
      }
    };
    /**   @private  */
    CanvasRenderer.prototype.labelAlign = function (text, wrapBounds, childNodes) {
      var bounds = new Size(wrapBounds.width, childNodes.length * (text.fontSize * 1.2));
      var position = {
        x: 0,
        y: 0
      };
      var labelX = text.x;
      var labelY = text.y;
      var offsetx = text.width * 0.5;
      var offsety = text.height * 0.5;
      var pointx = offsetx;
      var pointy = offsety;
      if (text.textAlign === 'left') {
        pointx = 0;
      } else if (text.textAlign === 'center') {
        if (wrapBounds.width > text.width && (text.textOverflow === 'Ellipsis' || text.textOverflow === 'Clip')) {
          pointx = 0;
        } else {
          pointx = text.width * 0.5;
        }
      } else if (text.textAlign === 'right') {
        pointx = text.width * 1;
      }
      position.x = labelX + pointx + (wrapBounds ? wrapBounds.x : 0);
      position.y = labelY + pointy - bounds.height / 2;
      return position;
    };
    return CanvasRenderer;
  }();
  function refreshDiagramElements(canvas, drawingObjects, renderer) {
    for (var i = 0; i < drawingObjects.length; i++) {
      renderer.renderElement(drawingObjects[parseInt(i.toString(), 10)], canvas, undefined);
    }
  }

  /**
   * Renderer module is used to render basic diagram elements
   */
  /** @private */
  var DrawingRenderer = /** @class */function () {
    function DrawingRenderer(name, isSvgMode) {
      /**   @private  */
      this.renderer = null;
      // private svgRenderer: SvgRenderer;
      /** @private */
      this.isSvgMode = true;
      this.diagramId = name;
      this.element = getDiagramElement(this.diagramId);
      this.isSvgMode = isSvgMode;
      this.renderer = new CanvasRenderer();
      //  this.svgRenderer = new SvgRenderer();
    }
    // /** @private */
    // public setLayers(): void {
    //     this.adornerSvgLayer = this.element.getElementsByClassName('e-adorner-layer')[0] as SVGSVGElement;
    // }
    /**   @private  */
    DrawingRenderer.prototype.renderElement = function (element, canvas, htmlLayer, transform, parentSvg, createParent, fromPalette, indexValue) {
      if (element instanceof Container) {
        this.renderContainer(element, canvas, htmlLayer, transform, parentSvg, createParent, fromPalette, indexValue);
      } else if (element instanceof ImageElement) {
        this.renderImageElement(element, canvas, transform, parentSvg, fromPalette);
      } else if (element instanceof PathElement) {
        this.renderPathElement(element, canvas, transform, parentSvg, fromPalette);
      } else if (element instanceof TextElement) {
        this.renderTextElement(element, canvas, transform, parentSvg, fromPalette);
      } else {
        this.renderRect(element, canvas, transform, parentSvg);
      }
    };
    /**   @private  */
    DrawingRenderer.prototype.renderImageElement = function (element, canvas, transform, parentSvg, fromPalette) {
      var options = this.getBaseAttributes(element, transform);
      options.cornerRadius = 0;
      this.renderer.drawRectangle(canvas, options);
      // let sx: number; let sy: number;
      var imageWidth;
      var imageHeight;
      var sourceWidth;
      var sourceHeight;
      if (element.stretch === 'Stretch') {
        imageWidth = element.actualSize.width;
        imageHeight = element.actualSize.height;
      } else {
        var contentWidth = element.contentSize.width;
        var contentHeight = element.contentSize.height;
        var widthRatio = options.width / contentWidth;
        var heightRatio = options.height / contentHeight;
        var ratio = void 0;
        switch (element.stretch) {
          case 'Meet':
            ratio = Math.min(widthRatio, heightRatio);
            imageWidth = contentWidth * ratio;
            imageHeight = contentHeight * ratio;
            options.x += Math.abs(options.width - imageWidth) / 2;
            options.y += Math.abs(options.height - imageHeight) / 2;
            break;
          case 'Slice':
            widthRatio = options.width / contentWidth;
            heightRatio = options.height / contentHeight;
            ratio = Math.max(widthRatio, heightRatio);
            imageWidth = contentWidth * ratio;
            imageHeight = contentHeight * ratio;
            sourceWidth = options.width / imageWidth * contentWidth;
            sourceHeight = options.height / imageHeight * contentHeight;
            break;
          case 'None':
            imageWidth = contentWidth;
            imageHeight = contentHeight;
            break;
        }
      }
      options.width = imageWidth;
      options.height = imageHeight;
      //Commented for code coverage
      //(options as ImageAttributes).sourceX = sx;
      //(options as ImageAttrib                                                                           utes).sourceY = sy;
      options.sourceWidth = sourceWidth;
      options.sourceHeight = sourceHeight;
      options.source = element.source;
      options.alignment = element.imageAlign;
      options.scale = element.imageScale;
      options.printID = element.printID;
      this.renderer.drawImage(canvas, options, parentSvg, fromPalette);
    };
    /**   @private  */
    DrawingRenderer.prototype.renderPathElement = function (element, canvas, transform, parentSvg, fromPalette) {
      var options = this.getBaseAttributes(element, transform);
      options.data = element.absolutePath;
      options.data = element.absolutePath;
      var ariaLabel = element.id;
      if (!this.isSvgMode) {
        options.x = options.x;
        options.y = options.y;
      }
      this.renderer.drawPath(canvas, options);
    };
    /**   @private  */
    DrawingRenderer.prototype.renderTextElement = function (element, canvas, transform, parentSvg, fromPalette) {
      var options = this.getBaseAttributes(element, transform);
      options.cornerRadius = 0;
      options.whiteSpace = whiteSpaceToString(element.style.whiteSpace, element.style.textWrapping);
      options.content = element.content;
      options.breakWord = wordBreakToString(element.style.textWrapping);
      options.textAlign = textAlignToString(element.style.textAlign);
      options.color = element.style.color;
      options.italic = element.style.italic;
      options.bold = element.style.bold;
      options.fontSize = element.style.fontSize;
      options.fontFamily = element.style.fontFamily;
      options.textOverflow = element.style.textOverflow;
      options.textDecoration = element.style.textDecoration;
      options.doWrap = element.doWrap;
      options.wrapBounds = element.wrapBounds;
      options.childNodes = element.childNodes;
      options.dashArray = '';
      options.strokeWidth = 0;
      options.fill = element.style.fill;
      var ariaLabel = element.content ? element.content : element.id;
      this.renderer.drawRectangle(canvas, options);
      this.renderer.drawText(canvas, options);
    };
    /**   @private  */
    DrawingRenderer.prototype.renderContainer = function (group, canvas, htmlLayer, transform, parentSvg, createParent, fromPalette, indexValue) {
      transform = {
        tx: 0,
        ty: 0,
        scale: 1
      };
      if (this.diagramId) {
        parentSvg = parentSvg;
      }
      this.renderRect(group, canvas, transform, parentSvg);
      if (group.hasChildren()) {
        var parentG = void 0;
        for (var _i = 0, _a = group.children; _i < _a.length; _i++) {
          var child = _a[_i];
          this.renderElement(child, parentG || canvas, htmlLayer, transform, parentSvg, true, fromPalette, indexValue);
        }
      }
    };
    /**   @private  */
    DrawingRenderer.prototype.renderRect = function (element, canvas, transform, parentSvg) {
      var options = this.getBaseAttributes(element, transform);
      options.cornerRadius = element.cornerRadius || 0;
      var ariaLabel = element.id;
      this.renderer.drawRectangle(canvas, options);
    };
    /**   @private  */
    DrawingRenderer.prototype.getBaseAttributes = function (element, transform) {
      var options = {
        width: element.actualSize.width,
        height: element.actualSize.height,
        x: element.offsetX - element.actualSize.width * element.pivot.x + 0.5,
        y: element.offsetY - element.actualSize.height * element.pivot.y + 0.5,
        fill: element.style.fill,
        stroke: element.style.strokeColor,
        angle: element.rotateAngle + element.parentTransform,
        pivotX: element.pivot.x,
        pivotY: element.pivot.y,
        strokeWidth: element.style.strokeWidth,
        dashArray: element.style.strokeDashArray || '',
        opacity: element.style.opacity,
        visible: element.visible,
        id: element.id,
        gradient: element.style.gradient
      };
      if (transform) {
        options.x += transform.tx;
        options.y += transform.ty;
      }
      return options;
    };
    return DrawingRenderer;
  }();

  /**
   * SVG Renderer
   */
  /** @private */
  var SvgRenderer = /** @class */function () {
    function SvgRenderer() {}
    /**   @private  */
    SvgRenderer.prototype.parseDashArray = function (dashArray) {
      var dashes = [];
      return dashes;
    };
    /**   @private  */
    SvgRenderer.prototype.drawRectangle = function (svg, options, diagramId, onlyRect, isSelector, parentSvg, ariaLabel) {
      var id;
      if (options.id === svg.id) {
        id = options.id + '_container';
      } else {
        id = options.id;
      }
      var rect;
      if (!rect || isSelector) {
        rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        svg.appendChild(rect);
      }
      var attr = {
        'id': id,
        'x': options.x.toString(),
        'y': options.y.toString(),
        'width': options.width.toString(),
        'height': options.height.toString(),
        'visibility': options.visible ? 'visible' : 'hidden',
        'transform': 'rotate(' + options.angle + ',' + (options.x + options.width * options.pivotX) + ',' + (options.y + options.height * options.pivotY) + ')',
        'rx': options.cornerRadius || 0,
        'ry': options.cornerRadius || 0,
        'opacity': options.opacity,
        'aria-label': ariaLabel ? ariaLabel : ''
      };
      if (options["class"]) {
        attr['class'] = options["class"];
      }
      var poiterEvents = 'pointer-events';
      if (!ariaLabel) {
        // eslint-disable-next-line
        attr[poiterEvents] = 'none';
      }
      setAttributeSvg(rect, attr);
      this.setSvgStyle(rect, options, diagramId);
    };
    /**   @private  */
    SvgRenderer.prototype.updateSelectionRegion = function (gElement, options) {
      var rect;
      rect = gElement.parentNode.getElementById(options.id);
      var attr;
      attr = {
        'id': options.id,
        'x': options.x.toString(),
        'y': options.y.toString(),
        'width': options.width.toString(),
        'height': options.height.toString(),
        'transform': 'rotate(' + options.angle + ',' + (options.x + options.width * options.pivotX) + ',' + (options.y + options.height * options.pivotY) + ')',
        "class": 'e-diagram-selected-region'
      };
      if (!rect) {
        rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        gElement.appendChild(rect);
      }
      this.setSvgStyle(rect, options);
      setAttributeSvg(rect, attr);
    };
    /**   @private  */
    SvgRenderer.prototype.createGElement = function (elementType, attribute) {
      var gElement = createSvgElement(elementType, attribute);
      return gElement;
    };
    /** @private */
    SvgRenderer.prototype.drawCircle = function (gElement, options, enableSelector, ariaLabel) {
      var circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
      this.setSvgStyle(circle, options);
      var classval = options["class"] || '';
      if (!enableSelector) {
        classval += ' e-disabled';
      }
      var attr = {
        'id': options.id,
        'cx': options.centerX,
        'cy': options.centerY,
        'r': options.radius,
        'visibility': options.visible ? 'visible' : 'hidden',
        'class': classval,
        'aria-label': ariaLabel ? ariaLabel['aria-label'] : ''
      };
      var pointerEvents = 'pointer-events';
      if (attr['aria-label'] === '') {
        // eslint-disable-next-line
        attr[pointerEvents] = 'none';
      }
      circle.style.display = options.visible ? 'block' : 'none';
      setAttributeSvg(circle, attr);
      gElement.appendChild(circle);
    };
    /**   @private  */
    SvgRenderer.prototype.setSvgStyle = function (svg, style, diagramId) {
      if (style.canApplyStyle || style.canApplyStyle === undefined) {
        if (style.fill === 'none') {
          style.fill = 'transparent';
        }
        if (style.stroke === 'none') {
          style.stroke = 'transparent';
        }
        var dashArray = [];
        var fill = void 0;
        if (style.dashArray !== undefined) {
          var canvasRenderer = new CanvasRenderer();
          dashArray = canvasRenderer.parseDashArray(style.dashArray);
        }
        fill = style.fill;
        if (style.stroke) {
          svg.setAttribute('stroke', style.stroke);
        }
        if (style.strokeWidth !== undefined && style.strokeWidth !== null) {
          svg.setAttribute('stroke-width', style.strokeWidth.toString());
        }
        if (dashArray) {
          svg.setAttribute('stroke-dasharray', dashArray.toString());
        }
        if (fill) {
          svg.setAttribute('fill', fill);
        }
      }
    };
    //end region
    // text utility
    /**   @private  */
    SvgRenderer.prototype.svgLabelAlign = function (text, wrapBound, childNodes) {
      var bounds = new Size(wrapBound.width, childNodes.length * (text.fontSize * 1.2));
      var pos = {
        x: 0,
        y: 0
      };
      var x = 0;
      var y = 1.2;
      var offsetX = text.width * 0.5;
      var offsety = text.height * 0.5;
      var pointX = offsetX;
      var pointY = offsety;
      if (text.textAlign === 'left') {
        pointX = 0;
      } else if (text.textAlign === 'center') {
        if (wrapBound.width > text.width && (text.textOverflow === 'Ellipsis' || text.textOverflow === 'Clip')) {
          pointX = 0;
        } else {
          pointX = text.width * 0.5;
        }
      } else if (text.textAlign === 'right') {
        pointX = text.width * 1;
      }
      pos.x = x + pointX + (wrapBound ? wrapBound.x : 0);
      pos.y = y + pointY - bounds.height / 2;
      return pos;
    };
    /** @private */
    SvgRenderer.prototype.drawLine = function (gElement, options) {
      var line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
      this.setSvgStyle(line, options);
      var pivotX = options.x + options.width * options.pivotX;
      var pivotY = options.y + options.height * options.pivotY;
      var attr = {
        'id': options.id,
        'x1': options.startPoint.x + options.x,
        'y1': options.startPoint.y + options.y,
        'x2': options.endPoint.x + options.x,
        'y2': options.endPoint.y + options.y,
        'stroke': options.stroke,
        'stroke-width': options.strokeWidth.toString(),
        'opacity': options.opacity.toString(),
        'transform': 'rotate(' + options.angle + ' ' + pivotX + ' ' + pivotY + ')',
        'visibility': options.visible ? 'visible' : 'hidden'
      };
      if (options["class"]) {
        attr['class'] = options["class"];
      }
      setAttributeSvg(line, attr);
      gElement.appendChild(line);
    };
    /**   @private  */
    SvgRenderer.prototype.drawPath = function (svg, options, diagramId, isSelector, parentSvg, ariaLabel) {
      var id;
      var x = Math.floor(Math.random() * 10 + 1);
      id = svg.id + '_shape' + x.toString();
      var collection = [];
      collection = processPathData(options.data);
      collection = pathSegmentCollection(collection);
      var shadowElement;
      if (parentSvg) {
        shadowElement = parentSvg.getElementById(options.id + '_groupElement_shadow');
        if (shadowElement) {
          shadowElement.parentNode.removeChild(shadowElement);
        }
      }
      var path;
      if (parentSvg) {
        path = parentSvg.getElementById(options.id);
      }
      if (!path || isSelector) {
        path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        svg.appendChild(path);
      }
      this.renderPath(path, options, collection);
      var attr = {
        'id': options.id,
        'transform': 'rotate(' + options.angle + ',' + (options.x + options.width * options.pivotX) + ',' + (options.y + options.height * options.pivotY) + ')' + 'translate(' + options.x + ',' + options.y + ')',
        'visibility': options.visible ? 'visible' : 'hidden',
        'opacity': options.opacity,
        'aria-label': ariaLabel ? ariaLabel : ''
      };
      if (options["class"]) {
        attr['class'] = options["class"];
      }
      setAttributeSvg(path, attr);
      this.setSvgStyle(path, options, diagramId);
    };
    /**   @private  */
    SvgRenderer.prototype.renderPath = function (svg, options, collection) {
      var x1;
      var y1;
      var x2;
      var y2;
      var x;
      var y;
      var length;
      var i;
      var segments = collection;
      var d = '';
      for (x = 0, y = 0, i = 0, length = segments.length; i < length; ++i) {
        var obj = segments[parseInt(i.toString(), 10)];
        var segment = obj;
        var _char7 = segment.command;
        if ('x1' in segment) {
          x1 = segment.x1;
        }
        if ('x2' in segment) {
          x2 = segment.x2;
        }
        if ('y1' in segment) {
          y1 = segment.y1;
        }
        if ('y2' in segment) {
          y2 = segment.y2;
        }
        if ('x' in segment) {
          x = segment.x;
        }
        if ('y' in segment) {
          y = segment.y;
        }
        switch (_char7) {
          case 'M':
            d = d + 'M' + x.toString() + ',' + y.toString() + ' ';
            break;
          case 'L':
            d = d + 'L' + x.toString() + ',' + y.toString() + ' ';
            break;
          case 'C':
            d = d + 'C' + x1.toString() + ',' + y1.toString() + ',' + x2.toString() + ',' + y2.toString() + ',';
            d += x.toString() + ',' + y.toString() + ' ';
            break;
          case 'Q':
            d = d + 'Q' + x1.toString() + ',' + y1.toString() + ',' + x.toString() + ',' + y.toString() + ' ';
            break;
          case 'A':
            d = d + 'A' + segment.r1.toString() + ',' + segment.r2.toString() + ',' + segment.angle.toString() + ',';
            d += segment.largeArc.toString() + ',' + segment.sweep + ',' + x.toString() + ',' + y.toString() + ' ';
            break;
          case 'Z':
          case 'z':
            d = d + 'Z' + ' ';
            break;
        }
      }
      svg.setAttribute('d', d);
    };
    return SvgRenderer;
  }();
  /** @private */
  function setAttributeSvg(svg, attributes) {
    var keys = Object.keys(attributes);
    for (var i = 0; i < keys.length; i++) {
      svg.setAttribute(keys[parseInt(i.toString(), 10)], attributes[keys[parseInt(i.toString(), 10)]]);
    }
  }
  /** @private */
  function createSvgElement(elementType, attribute) {
    var element = document.createElementNS('http://www.w3.org/2000/svg', elementType);
    setAttributeSvg(element, attribute);
    return element;
  }
  /** @private */
  function createSvg(id, width, height) {
    var svgObj = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    setAttributeSvg(svgObj, {
      'id': id,
      'width': width,
      'height': height
    });
    return svgObj;
  }
  function getParentSvg(element, targetElement, canvas) {
    if (element && element.id) {
      if (targetElement && targetElement === 'selector') {
        return this.pdfViewer.adornerSvgLayer;
      }
    }
    return canvas;
  }

  /**
   * Implements the drawing functionalities
   */
  /** @private */
  function findNearestPoint(reference, start, end) {
    var shortestPoint;
    var shortest = Point.findLength(start, reference);
    var shortest1 = Point.findLength(end, reference);
    if (shortest > shortest1) {
      shortestPoint = end;
    } else {
      shortestPoint = start;
    }
    var angleBWStAndEnd = Point.findAngle(start, end);
    var angleBWStAndRef = Point.findAngle(shortestPoint, reference);
    var r = Point.findLength(shortestPoint, reference);
    var vaAngle = angleBWStAndRef + (angleBWStAndEnd - angleBWStAndRef) * 2;
    return {
      x: shortestPoint.x + r * Math.cos(vaAngle * Math.PI / 180),
      y: shortestPoint.y + r * Math.sin(vaAngle * Math.PI / 180)
    };
  }
  /** @private */
  function findElementUnderMouse(obj, position, padding) {
    return findTargetElement(obj.wrapper, position, padding);
  }
  /** @private */
  function findTargetElement(container, position, padding) {
    for (var i = container.children.length - 1; i >= 0; i--) {
      var element = container.children[parseInt(i.toString(), 10)];
      if (element && element.bounds.containsPoint(position, 0)) {
        if (element instanceof Container) {
          var target = this.findTargetElement(element, position);
          if (target) {
            return target;
          }
        }
        if (element.bounds.containsPoint(position, 0)) {
          return element;
        }
      }
    }
    if (container.bounds.containsPoint(position, padding) && container.style.fill !== 'none') {
      return container;
    }
    return null;
  }
  /** @private */
  function intersect3(lineUtil1, lineUtil2) {
    var point = {
      x: 0,
      y: 0
    };
    var l1 = lineUtil1;
    var l2 = lineUtil2;
    var d = (l2.y2 - l2.y1) * (l1.x2 - l1.x1) - (l2.x2 - l2.x1) * (l1.y2 - l1.y1);
    var na = (l2.x2 - l2.x1) * (l1.y1 - l2.y1) - (l2.y2 - l2.y1) * (l1.x1 - l2.x1);
    var nb = (l1.x2 - l1.x1) * (l1.y1 - l2.y1) - (l1.y2 - l1.y1) * (l1.x1 - l2.x1);
    if (d === 0) {
      return {
        enabled: false,
        intersectPt: point
      };
    }
    var ua = na / d;
    var ub = nb / d;
    if (ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1) {
      point.x = l1.x1 + ua * (l1.x2 - l1.x1);
      point.y = l1.y1 + ua * (l1.y2 - l1.y1);
      return {
        enabled: true,
        intersectPt: point
      };
    }
    return {
      enabled: false,
      intersectPt: point
    };
  }
  /** @private */
  function intersect2(start1, end1, start2, end2) {
    var point = {
      x: 0,
      y: 0
    };
    var lineUtil1 = getLineSegment(start1.x, start1.y, end1.x, end1.y);
    var lineUtil2 = getLineSegment(start2.x, start2.y, end2.x, end2.y);
    var line3 = intersect3(lineUtil1, lineUtil2);
    if (line3.enabled) {
      return line3.intersectPt;
    } else {
      return point;
    }
  }
  /** @private */
  function getLineSegment(x1, y1, x2, y2) {
    return {
      'x1': Number(x1) || 0,
      'y1': Number(y1) || 0,
      'x2': Number(x2) || 0,
      'y2': Number(y2) || 0
    };
  }
  /** @private */
  function getPoints(element, corners, padding) {
    var line = [];
    padding = padding || 0;
    var left = {
      x: corners.topLeft.x - padding,
      y: corners.topLeft.y
    };
    var right = {
      x: corners.topRight.x + padding,
      y: corners.topRight.y
    };
    var top = {
      x: corners.bottomRight.x,
      y: corners.bottomRight.y - padding
    };
    var bottom = {
      x: corners.bottomLeft.x,
      y: corners.bottomLeft.y + padding
    };
    line.push(left);
    line.push(right);
    line.push(top);
    line.push(bottom);
    return line;
  }
  /** @private */
  function getBezierDirection(src, tar) {
    if (Math.abs(tar.x - src.x) > Math.abs(tar.y - src.y)) {
      return src.x < tar.x ? 'right' : 'left';
    } else {
      return src.y < tar.y ? 'bottom' : 'top';
    }
  }
  /** @private */
  function updateStyle(changedObject, target) {
    //since text style model is the super set of shape style model, we used text style model
    var style = target.style;
    var textElement = target;
    for (var _i = 0, _a = Object.keys(changedObject); _i < _a.length; _i++) {
      var key = _a[_i];
      switch (key) {
        case 'fill':
          style.fill = changedObject.fill;
          if (style instanceof StrokeStyle) {
            /* tslint:disable:no-string-literal */
            style['fill'] = 'transparent';
          }
          break;
        case 'textOverflow':
          style.textOverflow = changedObject.textOverflow;
          break;
        case 'opacity':
          style.opacity = changedObject.opacity;
          break;
        case 'strokeColor':
          style.strokeColor = changedObject.strokeColor;
          break;
        case 'strokeDashArray':
          style.strokeDashArray = changedObject.strokeDashArray;
          break;
        case 'strokeWidth':
          style.strokeWidth = changedObject.strokeWidth;
          break;
        case 'bold':
          style.bold = changedObject.bold;
          break;
        case 'color':
          style.color = changedObject.color;
          break;
        case 'textWrapping':
          style.textWrapping = changedObject.textWrapping;
          break;
        case 'fontFamily':
          style.fontFamily = changedObject.fontFamily;
          break;
        case 'fontSize':
          style.fontSize = changedObject.fontSize;
          break;
        case 'italic':
          style.italic = changedObject.italic;
          break;
        case 'textAlign':
          style.textAlign = changedObject.textAlign;
          break;
        case 'whiteSpace':
          style.whiteSpace = changedObject.whiteSpace;
          break;
        case 'textDecoration':
          style.textDecoration = changedObject.textDecoration;
          break;
      }
    }
    if (target instanceof TextElement) {
      textElement.refreshTextElement();
    }
  }
  /** @private */
  function scaleElement(element, sw, sh, refObject) {
    if (element.width !== undefined && element.height !== undefined) {
      element.width *= sw;
      element.height *= sh;
    }
    if (element instanceof Container) {
      var matrix = identityMatrix();
      var width = refObject.width || refObject.actualSize.width;
      var height = refObject.height || refObject.actualSize.height;
      if (width !== undefined && height !== undefined) {
        var x = refObject.offsetX - width * refObject.pivot.x;
        var y = refObject.offsetY - height * refObject.pivot.y;
        var refPoint = {
          x: x + width * refObject.pivot.x,
          y: y + height * refObject.pivot.y
        };
        refPoint = rotatePoint(refObject.rotateAngle, refObject.offsetX, refObject.offsetY, refPoint);
        rotateMatrix(matrix, -refObject.rotateAngle, refPoint.x, refPoint.y);
        //    scaleMatrix(matrix, sw, sh, refPoint.x, refPoint.y);
        rotateMatrix(matrix, refObject.rotateAngle, refPoint.x, refPoint.y);
        for (var _i = 0, _a = element.children; _i < _a.length; _i++) {
          var child = _a[_i];
          if (child.width !== undefined && child.height !== undefined) {
            var newPosition = transformPointByMatrix(matrix, {
              x: child.offsetX,
              y: child.offsetY
            });
            child.offsetX = newPosition.x;
            child.offsetY = newPosition.y;
            scaleElement(child, sw, sh, refObject);
          }
        }
      }
    }
  }
  /** @private */
  function contains(mousePosition, corner, padding) {
    if (mousePosition.x >= corner.x - padding && mousePosition.x <= corner.x + padding) {
      if (mousePosition.y >= corner.y - padding && mousePosition.y <= corner.y + padding) {
        return true;
      }
    }
    return false;
  }
  /** @private */
  function getPoint(x, y, w, h, angle, offsetX, offsetY, cornerPoint) {
    var pivot = {
      x: 0,
      y: 0
    };
    var trans = identityMatrix();
    rotateMatrix(trans, angle, offsetX, offsetY);
    switch (cornerPoint.x) {
      case 0:
        switch (cornerPoint.y) {
          case 0:
            pivot = transformPointByMatrix(trans, {
              x: x,
              y: y
            });
            break;
          case 0.5:
            pivot = transformPointByMatrix(trans, {
              x: x,
              y: y + h / 2
            });
            break;
          case 1:
            pivot = transformPointByMatrix(trans, {
              x: x,
              y: y + h
            });
            break;
        }
        break;
      case 0.5:
        switch (cornerPoint.y) {
          case 0:
            pivot = transformPointByMatrix(trans, {
              x: x + w / 2,
              y: y
            });
            break;
          case 0.5:
            pivot = transformPointByMatrix(trans, {
              x: x + w / 2,
              y: y + h / 2
            });
            break;
          case 1:
            pivot = transformPointByMatrix(trans, {
              x: x + w / 2,
              y: y + h
            });
            break;
        }
        break;
      case 1:
        switch (cornerPoint.y) {
          case 0:
            pivot = transformPointByMatrix(trans, {
              x: x + w,
              y: y
            });
            break;
          case 0.5:
            pivot = transformPointByMatrix(trans, {
              x: x + w,
              y: y + h / 2
            });
            break;
          case 1:
            pivot = transformPointByMatrix(trans, {
              x: x + w,
              y: y + h
            });
            break;
        }
        break;
    }
    return {
      x: pivot.x,
      y: pivot.y
    };
  }

  /**
   * Diagram component exported items
   */

  /**
   * Diagram component exported items
   */

  exports.Thickness = Thickness;
  exports.Margin = Margin;
  exports.Stop = Stop;
  exports.Gradient = Gradient;
  exports.LinearGradient = LinearGradient;
  exports.RadialGradient = RadialGradient;
  exports.ShapeStyle = ShapeStyle;
  exports.StrokeStyle = StrokeStyle;
  exports.TextStyle = TextStyle;
  exports.Canvas = Canvas;
  exports.Container = Container;
  exports.DrawingElement = DrawingElement;
  exports.ImageElement = ImageElement;
  exports.PathElement = PathElement;
  exports.TextElement = TextElement;
  exports.Matrix = Matrix;
  exports.identityMatrix = identityMatrix;
  exports.transformPointByMatrix = transformPointByMatrix;
  exports.transformPointsByMatrix = transformPointsByMatrix;
  exports.rotateMatrix = rotateMatrix;
  exports.scaleMatrix = scaleMatrix;
  exports.translateMatrix = translateMatrix;
  exports.multiplyMatrix = multiplyMatrix;
  exports.Point = Point;
  exports.Rect = Rect;
  exports.Size = Size;
  exports.CanvasRenderer = CanvasRenderer;
  exports.refreshDiagramElements = refreshDiagramElements;
  exports.DrawingRenderer = DrawingRenderer;
  exports.SvgRenderer = SvgRenderer;
  exports.setAttributeSvg = setAttributeSvg;
  exports.createSvgElement = createSvgElement;
  exports.createSvg = createSvg;
  exports.getParentSvg = getParentSvg;
  exports.randomId = randomId;
  exports.cornersPointsBeforeRotation = cornersPointsBeforeRotation;
  exports.rotateSize = rotateSize;
  exports.getBounds = getBounds;
  exports.textAlignToString = textAlignToString;
  exports.wordBreakToString = wordBreakToString;
  exports.bBoxText = bBoxText;
  exports.middleElement = middleElement;
  exports.whiteSpaceToString = whiteSpaceToString;
  exports.rotatePoint = rotatePoint;
  exports.getOffset = getOffset;
  exports.findNearestPoint = findNearestPoint;
  exports.findElementUnderMouse = findElementUnderMouse;
  exports.findTargetElement = findTargetElement;
  exports.intersect3 = intersect3;
  exports.intersect2 = intersect2;
  exports.getLineSegment = getLineSegment;
  exports.getPoints = getPoints;
  exports.getBezierDirection = getBezierDirection;
  exports.updateStyle = updateStyle;
  exports.scaleElement = scaleElement;
  exports.contains = contains;
  exports.getPoint = getPoint;
  exports.getChildNode = getChildNode;
  exports.translatePoints = translatePoints;
  exports.measurePath = measurePath;
  exports.measureText = measureText;
  exports.getDiagramElement = getDiagramElement;
  exports.createHtmlElement = createHtmlElement;
  exports.setAttributeHtml = setAttributeHtml;
  exports.getAdornerLayerSvg = getAdornerLayerSvg;
  exports.getSelectorElement = getSelectorElement;
  exports.createMeasureElements = createMeasureElements;
  exports.measureImage = measureImage;
  exports.processPathData = processPathData;
  exports.parsePathData = parsePathData;
  exports.getRectanglePath = getRectanglePath;
  exports.pathSegmentCollection = pathSegmentCollection;
  exports.transformPath = transformPath;
  exports.updatedSegment = updatedSegment;
  exports.scalePathData = scalePathData;
  exports.splitArrayCollection = splitArrayCollection;
  exports.getPathString = getPathString;
  exports.getString = getString;
  return exports;
};
sf.drawings = sf.drawings({});

/***/ }),

/***/ "./modules/navigationsbase.js":
/*!************************************!*\
  !*** ./modules/navigationsbase.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
window.sf = window.sf || {};
var navigationsbase = function navigationsbase(exports) {
  'use strict';

  var __extends = undefined && undefined.__extends || function () {
    var _extendStatics = function extendStatics(d, b) {
      _extendStatics = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics(d, b);
    };
    return function (d, b) {
      _extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var CLS_ROOT = 'e-hscroll';
  var CLS_RTL = 'e-rtl';
  var CLS_DISABLE = 'e-overlay';
  var CLS_HSCROLLBAR = 'e-hscroll-bar';
  var CLS_HSCROLLCON = 'e-hscroll-content';
  var CLS_NAVARROW = 'e-nav-arrow';
  var CLS_NAVRIGHTARROW = 'e-nav-right-arrow';
  var CLS_NAVLEFTARROW = 'e-nav-left-arrow';
  var CLS_HSCROLLNAV = 'e-scroll-nav';
  var CLS_HSCROLLNAVRIGHT = 'e-scroll-right-nav';
  var CLS_HSCROLLNAVLEFT = 'e-scroll-left-nav';
  var CLS_DEVICE = 'e-scroll-device';
  var CLS_OVERLAY = 'e-scroll-overlay';
  var CLS_RIGHTOVERLAY = 'e-scroll-right-overlay';
  var CLS_LEFTOVERLAY = 'e-scroll-left-overlay';
  var OVERLAY_MAXWID = 40;
  /**
   * HScroll module is introduces horizontal scroller when content exceeds the current viewing area.
   * It can be useful for the components like Toolbar, Tab which needs horizontal scrolling alone.
   * Hidden content can be view by touch moving or icon click.
   * ```html
   * <div id="scroll"/>
   * <script>
   *   var scrollObj = new HScroll();
   *   scrollObj.appendTo("#scroll");
   * </script>
   * ```
   */
  var HScroll = /** @class */function (_super) {
    __extends(HScroll, _super);
    /**
     * Initializes a new instance of the HScroll class.
     *
     * @param {HScrollModel} options  - Specifies HScroll model properties as options.
     * @param {string | HTMLElement} element  - Specifies the element for which horizontal scrolling applies.
     */
    function HScroll(options, element) {
      return _super.call(this, options, element) || this;
    }
    /**
     * Initialize the event handler
     *
     * @private
     * @returns {void}
     */
    HScroll.prototype.preRender = function () {
      this.browser = sf.base.Browser.info.name;
      this.browserCheck = this.browser === 'mozilla';
      this.isDevice = sf.base.Browser.isDevice;
      this.customStep = true;
      var element = this.element;
      this.ieCheck = this.browser === 'edge' || this.browser === 'msie';
      this.initialize();
      if (element.id === '') {
        element.id = sf.base.getUniqueID('hscroll');
        this.uniqueId = true;
      }
      element.style.display = 'block';
      if (this.enableRtl) {
        element.classList.add(CLS_RTL);
      }
    };
    /**
     * To Initialize the horizontal scroll  rendering
     *
     * @private
     * @returns {void}
     */
    HScroll.prototype.render = function () {
      this.touchModule = new sf.base.Touch(this.element, {
        scroll: this.touchHandler.bind(this),
        swipe: this.swipeHandler.bind(this)
      });
      sf.base.EventHandler.add(this.scrollEle, 'scroll', this.scrollHandler, this);
      if (!this.isDevice) {
        this.createNavIcon(this.element);
      } else {
        this.element.classList.add(CLS_DEVICE);
        this.createOverlay(this.element);
      }
      this.setScrollState();
    };
    HScroll.prototype.setScrollState = function () {
      if (sf.base.isNullOrUndefined(this.scrollStep) || this.scrollStep < 0) {
        this.scrollStep = this.scrollEle.offsetWidth;
        this.customStep = false;
      } else {
        this.customStep = true;
      }
    };
    HScroll.prototype.initialize = function () {
      var scrollEle = this.createElement('div', {
        className: CLS_HSCROLLCON
      });
      var scrollDiv = this.createElement('div', {
        className: CLS_HSCROLLBAR
      });
      scrollDiv.setAttribute('tabindex', '-1');
      var ele = this.element;
      var innerEle = [].slice.call(ele.children);
      for (var _i = 0, innerEle_1 = innerEle; _i < innerEle_1.length; _i++) {
        var ele_1 = innerEle_1[_i];
        scrollEle.appendChild(ele_1);
      }
      scrollDiv.appendChild(scrollEle);
      ele.appendChild(scrollDiv);
      scrollDiv.style.overflowX = 'hidden';
      this.scrollEle = scrollDiv;
      this.scrollItems = scrollEle;
    };
    HScroll.prototype.getPersistData = function () {
      var keyEntity = ['scrollStep'];
      return this.addOnPersist(keyEntity);
    };
    /**
     * Returns the current module name.
     *
     * @returns {string} - It returns the current module name.
     * @private
     */
    HScroll.prototype.getModuleName = function () {
      return 'hScroll';
    };
    /**
     * Removes the control from the DOM and also removes all its related events.
     *
     * @returns {void}
     */
    HScroll.prototype.destroy = function () {
      var ele = this.element;
      ele.style.display = '';
      ele.classList.remove(CLS_ROOT);
      ele.classList.remove(CLS_DEVICE);
      ele.classList.remove(CLS_RTL);
      var nav = sf.base.selectAll('.e-' + ele.id + '_nav.' + CLS_HSCROLLNAV, ele);
      var overlay = sf.base.selectAll('.' + CLS_OVERLAY, ele);
      [].slice.call(overlay).forEach(function (ele) {
        sf.base.detach(ele);
      });
      for (var _i = 0, _a = [].slice.call(this.scrollItems.children); _i < _a.length; _i++) {
        var elem = _a[_i];
        ele.appendChild(elem);
      }
      if (this.uniqueId) {
        this.element.removeAttribute('id');
      }
      sf.base.detach(this.scrollEle);
      if (nav.length > 0) {
        sf.base.detach(nav[0]);
        if (!sf.base.isNullOrUndefined(nav[1])) {
          sf.base.detach(nav[1]);
        }
      }
      sf.base.EventHandler.remove(this.scrollEle, 'scroll', this.scrollHandler);
      this.touchModule.destroy();
      this.touchModule = null;
      _super.prototype.destroy.call(this);
    };
    /**
     * Specifies the value to disable/enable the HScroll component.
     * When set to `true` , the component will be disabled.
     *
     * @param  {boolean} value - Based on this Boolean value, HScroll will be enabled (false) or disabled (true).
     * @returns {void}.
     */
    HScroll.prototype.disable = function (value) {
      var navEles = sf.base.selectAll('.e-scroll-nav:not(.' + CLS_DISABLE + ')', this.element);
      if (value) {
        this.element.classList.add(CLS_DISABLE);
      } else {
        this.element.classList.remove(CLS_DISABLE);
      }
      [].slice.call(navEles).forEach(function (el) {
        el.setAttribute('tabindex', !value ? '0' : '-1');
      });
    };
    HScroll.prototype.createOverlay = function (element) {
      var id = element.id.concat('_nav');
      var rightOverlayEle = this.createElement('div', {
        className: CLS_OVERLAY + ' ' + CLS_RIGHTOVERLAY
      });
      var clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);
      var rightEle = this.createElement('div', {
        id: id.concat('_right'),
        className: clsRight
      });
      var navItem = this.createElement('div', {
        className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons'
      });
      rightEle.appendChild(navItem);
      var leftEle = this.createElement('div', {
        className: CLS_OVERLAY + ' ' + CLS_LEFTOVERLAY
      });
      if (this.ieCheck) {
        rightEle.classList.add('e-ie-align');
      }
      element.appendChild(rightOverlayEle);
      element.appendChild(rightEle);
      element.insertBefore(leftEle, element.firstChild);
      this.eventBinding([rightEle]);
    };
    HScroll.prototype.createNavIcon = function (element) {
      var id = element.id.concat('_nav');
      var clsRight = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVRIGHT);
      var rightAttributes = {
        'role': 'button',
        'id': id.concat('_right'),
        'aria-label': 'Scroll right'
      };
      var nav = this.createElement('div', {
        className: clsRight,
        attrs: rightAttributes
      });
      nav.setAttribute('aria-disabled', 'false');
      var navItem = this.createElement('div', {
        className: CLS_NAVRIGHTARROW + ' ' + CLS_NAVARROW + ' e-icons'
      });
      var clsLeft = 'e-' + element.id.concat('_nav ' + CLS_HSCROLLNAV + ' ' + CLS_HSCROLLNAVLEFT);
      var leftAttributes = {
        'role': 'button',
        'id': id.concat('_left'),
        'aria-label': 'Scroll left'
      };
      var navEle = this.createElement('div', {
        className: clsLeft + ' ' + CLS_DISABLE,
        attrs: leftAttributes
      });
      navEle.setAttribute('aria-disabled', 'true');
      var navLeftItem = this.createElement('div', {
        className: CLS_NAVLEFTARROW + ' ' + CLS_NAVARROW + ' e-icons'
      });
      navEle.appendChild(navLeftItem);
      nav.appendChild(navItem);
      element.appendChild(nav);
      element.insertBefore(navEle, element.firstChild);
      if (this.ieCheck) {
        nav.classList.add('e-ie-align');
        navEle.classList.add('e-ie-align');
      }
      this.eventBinding([nav, navEle]);
    };
    HScroll.prototype.onKeyPress = function (e) {
      var _this = this;
      if (e.key === 'Enter') {
        var timeoutFun_1 = function timeoutFun_1() {
          _this.keyTimeout = true;
          _this.eleScrolling(10, e.target, true);
        };
        this.keyTimer = window.setTimeout(function () {
          timeoutFun_1();
        }, 100);
      }
    };
    HScroll.prototype.onKeyUp = function (e) {
      if (e.key !== 'Enter') {
        return;
      }
      if (this.keyTimeout) {
        this.keyTimeout = false;
      } else {
        e.target.click();
      }
      clearTimeout(this.keyTimer);
    };
    HScroll.prototype.eventBinding = function (ele) {
      var _this = this;
      [].slice.call(ele).forEach(function (el) {
        new sf.base.Touch(el, {
          tapHold: _this.tabHoldHandler.bind(_this),
          tapHoldThreshold: 500
        });
        el.addEventListener('keydown', _this.onKeyPress.bind(_this));
        el.addEventListener('keyup', _this.onKeyUp.bind(_this));
        el.addEventListener('mouseup', _this.repeatScroll.bind(_this));
        el.addEventListener('touchend', _this.repeatScroll.bind(_this));
        el.addEventListener('contextmenu', function (e) {
          e.preventDefault();
        });
        sf.base.EventHandler.add(el, 'click', _this.clickEventHandler, _this);
      });
    };
    HScroll.prototype.repeatScroll = function () {
      clearInterval(this.timeout);
    };
    HScroll.prototype.tabHoldHandler = function (e) {
      var _this = this;
      var trgt = e.originalEvent.target;
      trgt = this.contains(trgt, CLS_HSCROLLNAV) ? trgt.firstElementChild : trgt;
      var scrollDis = 10;
      var timeoutFun = function timeoutFun() {
        _this.eleScrolling(scrollDis, trgt, true);
      };
      this.timeout = window.setInterval(function () {
        timeoutFun();
      }, 50);
    };
    HScroll.prototype.contains = function (ele, className) {
      return ele.classList.contains(className);
    };
    HScroll.prototype.eleScrolling = function (scrollDis, trgt, isContinuous) {
      var rootEle = this.element;
      var classList$$1 = trgt.classList;
      if (classList$$1.contains(CLS_HSCROLLNAV)) {
        classList$$1 = trgt.querySelector('.' + CLS_NAVARROW).classList;
      }
      if (this.contains(rootEle, CLS_RTL) && this.browserCheck) {
        scrollDis = -scrollDis;
      }
      if (!this.contains(rootEle, CLS_RTL) || this.browserCheck || this.ieCheck) {
        if (classList$$1.contains(CLS_NAVRIGHTARROW)) {
          this.frameScrollRequest(scrollDis, 'add', isContinuous);
        } else {
          this.frameScrollRequest(scrollDis, '', isContinuous);
        }
      } else {
        if (classList$$1.contains(CLS_NAVLEFTARROW)) {
          this.frameScrollRequest(scrollDis, 'add', isContinuous);
        } else {
          this.frameScrollRequest(scrollDis, '', isContinuous);
        }
      }
    };
    HScroll.prototype.clickEventHandler = function (e) {
      this.eleScrolling(this.scrollStep, e.target, false);
    };
    HScroll.prototype.swipeHandler = function (e) {
      var swipeEle = this.scrollEle;
      var distance;
      if (e.velocity <= 1) {
        distance = e.distanceX / (e.velocity * 10);
      } else {
        distance = e.distanceX / e.velocity;
      }
      var start = 0.5;
      var animate = function animate() {
        var step = Math.sin(start);
        if (step <= 0) {
          window.cancelAnimationFrame(step);
        } else {
          if (e.swipeDirection === 'Left') {
            swipeEle.scrollLeft += distance * step;
          } else if (e.swipeDirection === 'Right') {
            swipeEle.scrollLeft -= distance * step;
          }
          start -= 0.5;
          window.requestAnimationFrame(animate);
        }
      };
      animate();
    };
    HScroll.prototype.scrollUpdating = function (scrollVal, action) {
      if (action === 'add') {
        this.scrollEle.scrollLeft += scrollVal;
      } else {
        this.scrollEle.scrollLeft -= scrollVal;
      }
      if (this.enableRtl && this.scrollEle.scrollLeft > 0) {
        this.scrollEle.scrollLeft = 0;
      }
    };
    HScroll.prototype.frameScrollRequest = function (scrollVal, action, isContinuous) {
      var _this = this;
      var step = 10;
      if (isContinuous) {
        this.scrollUpdating(scrollVal, action);
        return;
      }
      if (!this.customStep) {
        [].slice.call(sf.base.selectAll('.' + CLS_OVERLAY, this.element)).forEach(function (el) {
          scrollVal -= el.offsetWidth;
        });
      }
      var animate = function animate() {
        var scrollValue;
        var scrollStep;
        if (_this.contains(_this.element, CLS_RTL) && _this.browserCheck) {
          scrollValue = -scrollVal;
          scrollStep = -step;
        } else {
          scrollValue = scrollVal;
          scrollStep = step;
        }
        if (scrollValue < step) {
          window.cancelAnimationFrame(scrollStep);
        } else {
          _this.scrollUpdating(scrollStep, action);
          scrollVal -= scrollStep;
          window.requestAnimationFrame(animate);
        }
      };
      animate();
    };
    HScroll.prototype.touchHandler = function (e) {
      var ele = this.scrollEle;
      var distance = e.distanceX;
      if (this.ieCheck && this.contains(this.element, CLS_RTL)) {
        distance = -distance;
      }
      if (e.scrollDirection === 'Left') {
        ele.scrollLeft = ele.scrollLeft + distance;
      } else if (e.scrollDirection === 'Right') {
        ele.scrollLeft = ele.scrollLeft - distance;
      }
    };
    HScroll.prototype.arrowDisabling = function (addDisable, removeDisable) {
      if (this.isDevice) {
        var arrowEle = sf.base.isNullOrUndefined(addDisable) ? removeDisable : addDisable;
        var arrowIcon = arrowEle.querySelector('.' + CLS_NAVARROW);
        if (sf.base.isNullOrUndefined(addDisable)) {
          sf.base.classList(arrowIcon, [CLS_NAVRIGHTARROW], [CLS_NAVLEFTARROW]);
        } else {
          sf.base.classList(arrowIcon, [CLS_NAVLEFTARROW], [CLS_NAVRIGHTARROW]);
        }
      } else if (addDisable && removeDisable) {
        addDisable.classList.add(CLS_DISABLE);
        addDisable.setAttribute('aria-disabled', 'true');
        addDisable.removeAttribute('tabindex');
        removeDisable.classList.remove(CLS_DISABLE);
        removeDisable.setAttribute('aria-disabled', 'false');
        removeDisable.setAttribute('tabindex', '0');
      }
      this.repeatScroll();
    };
    HScroll.prototype.scrollHandler = function (e) {
      var target = e.target;
      var width = target.offsetWidth;
      var rootEle = this.element;
      var navLeftEle = this.element.querySelector('.' + CLS_HSCROLLNAVLEFT);
      var navRightEle = this.element.querySelector('.' + CLS_HSCROLLNAVRIGHT);
      var leftOverlay = this.element.querySelector('.' + CLS_LEFTOVERLAY);
      var rightOverlay = this.element.querySelector('.' + CLS_RIGHTOVERLAY);
      var scrollLeft = target.scrollLeft;
      if (scrollLeft <= 0) {
        scrollLeft = -scrollLeft;
      }
      if (this.isDevice) {
        if (this.enableRtl && !(this.browserCheck || this.ieCheck)) {
          leftOverlay = this.element.querySelector('.' + CLS_RIGHTOVERLAY);
          rightOverlay = this.element.querySelector('.' + CLS_LEFTOVERLAY);
        }
        if (scrollLeft < OVERLAY_MAXWID) {
          leftOverlay.style.width = scrollLeft + 'px';
        } else {
          leftOverlay.style.width = '40px';
        }
        if (target.scrollWidth - Math.ceil(width + scrollLeft) < OVERLAY_MAXWID) {
          rightOverlay.style.width = target.scrollWidth - Math.ceil(width + scrollLeft) + 'px';
        } else {
          rightOverlay.style.width = '40px';
        }
      }
      if (scrollLeft === 0) {
        this.arrowDisabling(navLeftEle, navRightEle);
      } else if (Math.ceil(width + scrollLeft + .1) >= target.scrollWidth) {
        this.arrowDisabling(navRightEle, navLeftEle);
      } else {
        var disEle = this.element.querySelector('.' + CLS_HSCROLLNAV + '.' + CLS_DISABLE);
        if (disEle) {
          disEle.classList.remove(CLS_DISABLE);
          disEle.setAttribute('aria-disabled', 'false');
          disEle.setAttribute('tabindex', '0');
        }
      }
    };
    /**
     * Gets called when the model property changes.The data that describes the old and new values of property that changed.
     *
     * @param  {HScrollModel} newProp - It contains the new value of data.
     * @param  {HScrollModel} oldProp - It contains the old value of data.
     * @returns {void}
     * @private
     */
    HScroll.prototype.onPropertyChanged = function (newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case 'scrollStep':
            this.setScrollState();
            break;
          case 'enableRtl':
            newProp.enableRtl ? this.element.classList.add(CLS_RTL) : this.element.classList.remove(CLS_RTL);
            break;
        }
      }
    };
    __decorate([sf.base.Property(null)], HScroll.prototype, "scrollStep", void 0);
    HScroll = __decorate([sf.base.NotifyPropertyChanges], HScroll);
    return HScroll;
  }(sf.base.Component);
  var __extends$1 = undefined && undefined.__extends || function () {
    var _extendStatics2 = function extendStatics(d, b) {
      _extendStatics2 = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics2(d, b);
    };
    return function (d, b) {
      _extendStatics2(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var CLS_ROOT$1 = 'e-vscroll';
  var CLS_RTL$1 = 'e-rtl';
  var CLS_DISABLE$1 = 'e-overlay';
  var CLS_VSCROLLBAR = 'e-vscroll-bar';
  var CLS_VSCROLLCON = 'e-vscroll-content';
  var CLS_NAVARROW$1 = 'e-nav-arrow';
  var CLS_NAVUPARROW = 'e-nav-up-arrow';
  var CLS_NAVDOWNARROW = 'e-nav-down-arrow';
  var CLS_VSCROLLNAV = 'e-scroll-nav';
  var CLS_VSCROLLNAVUP = 'e-scroll-up-nav';
  var CLS_VSCROLLNAVDOWN = 'e-scroll-down-nav';
  var CLS_DEVICE$1 = 'e-scroll-device';
  var CLS_OVERLAY$1 = 'e-scroll-overlay';
  var CLS_UPOVERLAY = 'e-scroll-up-overlay';
  var CLS_DOWNOVERLAY = 'e-scroll-down-overlay';
  var OVERLAY_MAXWID$1 = 40;
  /**
   * VScroll module is introduces vertical scroller when content exceeds the current viewing area.
   * It can be useful for the components like Toolbar, Tab which needs vertical scrolling alone.
   * Hidden content can be view by touch moving or icon click.
   * ```html
   * <div id="scroll"/>
   * <script>
   *   var scrollObj = new VScroll();
   *   scrollObj.appendTo("#scroll");
   * </script>
   * ```
   */
  var VScroll = /** @class */function (_super) {
    __extends$1(VScroll, _super);
    /**
     * Initializes a new instance of the VScroll class.
     *
     * @param {VScrollModel} options  - Specifies VScroll model properties as options.
     * @param {string | HTMLElement} element  - Specifies the element for which vertical scrolling applies.
     */
    function VScroll(options, element) {
      return _super.call(this, options, element) || this;
    }
    /**
     * Initialize the event handler
     *
     * @private
     * @returns {void}
     */
    VScroll.prototype.preRender = function () {
      this.browser = sf.base.Browser.info.name;
      this.browserCheck = this.browser === 'mozilla';
      this.isDevice = sf.base.Browser.isDevice;
      this.customStep = true;
      var ele = this.element;
      this.ieCheck = this.browser === 'edge' || this.browser === 'msie';
      this.initialize();
      if (ele.id === '') {
        ele.id = sf.base.getUniqueID('vscroll');
        this.uniqueId = true;
      }
      ele.style.display = 'block';
      if (this.enableRtl) {
        ele.classList.add(CLS_RTL$1);
      }
    };
    /**
     * To Initialize the vertical scroll rendering
     *
     * @private
     * @returns {void}
     */
    VScroll.prototype.render = function () {
      this.touchModule = new sf.base.Touch(this.element, {
        scroll: this.touchHandler.bind(this),
        swipe: this.swipeHandler.bind(this)
      });
      sf.base.EventHandler.add(this.scrollEle, 'scroll', this.scrollEventHandler, this);
      if (!this.isDevice) {
        this.createNavIcon(this.element);
      } else {
        this.element.classList.add(CLS_DEVICE$1);
        this.createOverlayElement(this.element);
      }
      this.setScrollState();
      sf.base.EventHandler.add(this.element, 'wheel', this.wheelEventHandler, this);
    };
    VScroll.prototype.setScrollState = function () {
      if (sf.base.isNullOrUndefined(this.scrollStep) || this.scrollStep < 0) {
        this.scrollStep = this.scrollEle.offsetHeight;
        this.customStep = false;
      } else {
        this.customStep = true;
      }
    };
    VScroll.prototype.initialize = function () {
      var scrollCnt = sf.base.createElement('div', {
        className: CLS_VSCROLLCON
      });
      var scrollBar = sf.base.createElement('div', {
        className: CLS_VSCROLLBAR
      });
      scrollBar.setAttribute('tabindex', '-1');
      var ele = this.element;
      var innerEle = [].slice.call(ele.children);
      for (var _i = 0, innerEle_1 = innerEle; _i < innerEle_1.length; _i++) {
        var ele_1 = innerEle_1[_i];
        scrollCnt.appendChild(ele_1);
      }
      scrollBar.appendChild(scrollCnt);
      ele.appendChild(scrollBar);
      scrollBar.style.overflow = 'hidden';
      this.scrollEle = scrollBar;
      this.scrollItems = scrollCnt;
    };
    VScroll.prototype.getPersistData = function () {
      var keyEntity = ['scrollStep'];
      return this.addOnPersist(keyEntity);
    };
    /**
     * Returns the current module name.
     *
     * @returns {string} - It returns the current module name.
     * @private
     */
    VScroll.prototype.getModuleName = function () {
      return 'vScroll';
    };
    /**
     * Removes the control from the DOM and also removes all its related events.
     *
     * @returns {void}
     */
    VScroll.prototype.destroy = function () {
      var el = this.element;
      el.style.display = '';
      sf.base.removeClass([this.element], [CLS_ROOT$1, CLS_DEVICE$1, CLS_RTL$1]);
      var navs = sf.base.selectAll('.e-' + el.id + '_nav.' + CLS_VSCROLLNAV, el);
      var overlays = sf.base.selectAll('.' + CLS_OVERLAY$1, el);
      [].slice.call(overlays).forEach(function (ele) {
        sf.base.detach(ele);
      });
      for (var _i = 0, _a = [].slice.call(this.scrollItems.children); _i < _a.length; _i++) {
        var elem = _a[_i];
        el.appendChild(elem);
      }
      if (this.uniqueId) {
        this.element.removeAttribute('id');
      }
      sf.base.detach(this.scrollEle);
      if (navs.length > 0) {
        sf.base.detach(navs[0]);
        if (!sf.base.isNullOrUndefined(navs[1])) {
          sf.base.detach(navs[1]);
        }
      }
      sf.base.EventHandler.remove(this.scrollEle, 'scroll', this.scrollEventHandler);
      this.touchModule.destroy();
      this.touchModule = null;
      _super.prototype.destroy.call(this);
    };
    /**
     * Specifies the value to disable/enable the VScroll component.
     * When set to `true` , the component will be disabled.
     *
     * @param  {boolean} value - Based on this Boolean value, VScroll will be enabled (false) or disabled (true).
     * @returns {void}.
     */
    VScroll.prototype.disable = function (value) {
      var navEle = sf.base.selectAll('.e-scroll-nav:not(.' + CLS_DISABLE$1 + ')', this.element);
      if (value) {
        this.element.classList.add(CLS_DISABLE$1);
      } else {
        this.element.classList.remove(CLS_DISABLE$1);
      }
      [].slice.call(navEle).forEach(function (el) {
        el.setAttribute('tabindex', !value ? '0' : '-1');
      });
    };
    VScroll.prototype.createOverlayElement = function (element) {
      var id = element.id.concat('_nav');
      var downOverlayEle = sf.base.createElement('div', {
        className: CLS_OVERLAY$1 + ' ' + CLS_DOWNOVERLAY
      });
      var clsDown = 'e-' + element.id.concat('_nav ' + CLS_VSCROLLNAV + ' ' + CLS_VSCROLLNAVDOWN);
      var downEle = sf.base.createElement('div', {
        id: id.concat('down'),
        className: clsDown
      });
      var navItem = sf.base.createElement('div', {
        className: CLS_NAVDOWNARROW + ' ' + CLS_NAVARROW$1 + ' e-icons'
      });
      downEle.appendChild(navItem);
      var upEle = sf.base.createElement('div', {
        className: CLS_OVERLAY$1 + ' ' + CLS_UPOVERLAY
      });
      if (this.ieCheck) {
        downEle.classList.add('e-ie-align');
      }
      element.appendChild(downOverlayEle);
      element.appendChild(downEle);
      element.insertBefore(upEle, element.firstChild);
      this.eventBinding([downEle]);
    };
    VScroll.prototype.createNavIcon = function (element) {
      var id = element.id.concat('_nav');
      var clsDown = 'e-' + element.id.concat('_nav ' + CLS_VSCROLLNAV + ' ' + CLS_VSCROLLNAVDOWN);
      var nav = sf.base.createElement('div', {
        id: id.concat('_down'),
        className: clsDown
      });
      nav.setAttribute('aria-disabled', 'false');
      var navItem = sf.base.createElement('div', {
        className: CLS_NAVDOWNARROW + ' ' + CLS_NAVARROW$1 + ' e-icons'
      });
      var clsUp = 'e-' + element.id.concat('_nav ' + CLS_VSCROLLNAV + ' ' + CLS_VSCROLLNAVUP);
      var navElement = sf.base.createElement('div', {
        id: id.concat('_up'),
        className: clsUp + ' ' + CLS_DISABLE$1
      });
      navElement.setAttribute('aria-disabled', 'true');
      var navUpItem = sf.base.createElement('div', {
        className: CLS_NAVUPARROW + ' ' + CLS_NAVARROW$1 + ' e-icons'
      });
      navElement.appendChild(navUpItem);
      nav.appendChild(navItem);
      nav.setAttribute('tabindex', '0');
      element.appendChild(nav);
      element.insertBefore(navElement, element.firstChild);
      if (this.ieCheck) {
        nav.classList.add('e-ie-align');
        navElement.classList.add('e-ie-align');
      }
      this.eventBinding([nav, navElement]);
    };
    VScroll.prototype.onKeyPress = function (ev) {
      var _this = this;
      if (ev.key === 'Enter') {
        var timeoutFun_1 = function timeoutFun_1() {
          _this.keyTimeout = true;
          _this.eleScrolling(10, ev.target, true);
        };
        this.keyTimer = window.setTimeout(function () {
          timeoutFun_1();
        }, 100);
      }
    };
    VScroll.prototype.onKeyUp = function (ev) {
      if (ev.key !== 'Enter') {
        return;
      }
      if (this.keyTimeout) {
        this.keyTimeout = false;
      } else {
        ev.target.click();
      }
      clearTimeout(this.keyTimer);
    };
    VScroll.prototype.eventBinding = function (element) {
      var _this = this;
      [].slice.call(element).forEach(function (ele) {
        new sf.base.Touch(ele, {
          tapHold: _this.tabHoldHandler.bind(_this),
          tapHoldThreshold: 500
        });
        ele.addEventListener('keydown', _this.onKeyPress.bind(_this));
        ele.addEventListener('keyup', _this.onKeyUp.bind(_this));
        ele.addEventListener('mouseup', _this.repeatScroll.bind(_this));
        ele.addEventListener('touchend', _this.repeatScroll.bind(_this));
        ele.addEventListener('contextmenu', function (e) {
          e.preventDefault();
        });
        sf.base.EventHandler.add(ele, 'click', _this.clickEventHandler, _this);
      });
    };
    VScroll.prototype.repeatScroll = function () {
      clearInterval(this.timeout);
    };
    VScroll.prototype.tabHoldHandler = function (ev) {
      var _this = this;
      var trgt = ev.originalEvent.target;
      trgt = this.contains(trgt, CLS_VSCROLLNAV) ? trgt.firstElementChild : trgt;
      var scrollDistance = 10;
      var timeoutFun = function timeoutFun() {
        _this.eleScrolling(scrollDistance, trgt, true);
      };
      this.timeout = window.setInterval(function () {
        timeoutFun();
      }, 50);
    };
    VScroll.prototype.contains = function (element, className) {
      return element.classList.contains(className);
    };
    VScroll.prototype.eleScrolling = function (scrollDis, trgt, isContinuous) {
      var classList$$1 = trgt.classList;
      if (classList$$1.contains(CLS_VSCROLLNAV)) {
        classList$$1 = trgt.querySelector('.' + CLS_NAVARROW$1).classList;
      }
      if (classList$$1.contains(CLS_NAVDOWNARROW)) {
        this.frameScrollRequest(scrollDis, 'add', isContinuous);
      } else if (classList$$1.contains(CLS_NAVUPARROW)) {
        this.frameScrollRequest(scrollDis, '', isContinuous);
      }
    };
    VScroll.prototype.clickEventHandler = function (event) {
      this.eleScrolling(this.scrollStep, event.target, false);
    };
    VScroll.prototype.wheelEventHandler = function (e) {
      e.preventDefault();
      this.frameScrollRequest(this.scrollStep, e.deltaY > 0 ? 'add' : '', false);
    };
    VScroll.prototype.swipeHandler = function (e) {
      var swipeElement = this.scrollEle;
      var distance;
      if (e.velocity <= 1) {
        distance = e.distanceY / (e.velocity * 10);
      } else {
        distance = e.distanceY / e.velocity;
      }
      var start = 0.5;
      var animate = function animate() {
        var step = Math.sin(start);
        if (step <= 0) {
          window.cancelAnimationFrame(step);
        } else {
          if (e.swipeDirection === 'Up') {
            swipeElement.scrollTop += distance * step;
          } else if (e.swipeDirection === 'Down') {
            swipeElement.scrollTop -= distance * step;
          }
          start -= 0.02;
          window.requestAnimationFrame(animate);
        }
      };
      animate();
    };
    VScroll.prototype.scrollUpdating = function (scrollVal, action) {
      if (action === 'add') {
        this.scrollEle.scrollTop += scrollVal;
      } else {
        this.scrollEle.scrollTop -= scrollVal;
      }
    };
    VScroll.prototype.frameScrollRequest = function (scrollValue, action, isContinuous) {
      var _this = this;
      var step = 10;
      if (isContinuous) {
        this.scrollUpdating(scrollValue, action);
        return;
      }
      if (!this.customStep) {
        [].slice.call(sf.base.selectAll('.' + CLS_OVERLAY$1, this.element)).forEach(function (el) {
          scrollValue -= el.offsetHeight;
        });
      }
      var animate = function animate() {
        if (scrollValue < step) {
          window.cancelAnimationFrame(step);
        } else {
          _this.scrollUpdating(step, action);
          scrollValue -= step;
          window.requestAnimationFrame(animate);
        }
      };
      animate();
    };
    VScroll.prototype.touchHandler = function (e) {
      var el = this.scrollEle;
      var distance = e.distanceY;
      if (e.scrollDirection === 'Up') {
        el.scrollTop = el.scrollTop + distance;
      } else if (e.scrollDirection === 'Down') {
        el.scrollTop = el.scrollTop - distance;
      }
    };
    VScroll.prototype.arrowDisabling = function (addDisableCls, removeDisableCls) {
      if (this.isDevice) {
        var arrowEle = sf.base.isNullOrUndefined(addDisableCls) ? removeDisableCls : addDisableCls;
        var arrowIcon = arrowEle.querySelector('.' + CLS_NAVARROW$1);
        if (sf.base.isNullOrUndefined(addDisableCls)) {
          sf.base.classList(arrowIcon, [CLS_NAVDOWNARROW], [CLS_NAVUPARROW]);
        } else {
          sf.base.classList(arrowIcon, [CLS_NAVUPARROW], [CLS_NAVDOWNARROW]);
        }
      } else {
        addDisableCls.classList.add(CLS_DISABLE$1);
        addDisableCls.setAttribute('aria-disabled', 'true');
        addDisableCls.removeAttribute('tabindex');
        removeDisableCls.classList.remove(CLS_DISABLE$1);
        removeDisableCls.setAttribute('aria-disabled', 'false');
        removeDisableCls.setAttribute('tabindex', '0');
      }
      this.repeatScroll();
    };
    VScroll.prototype.scrollEventHandler = function (e) {
      var target = e.target;
      var height = target.offsetHeight;
      var navUpEle = this.element.querySelector('.' + CLS_VSCROLLNAVUP);
      var navDownEle = this.element.querySelector('.' + CLS_VSCROLLNAVDOWN);
      var upOverlay = this.element.querySelector('.' + CLS_UPOVERLAY);
      var downOverlay = this.element.querySelector('.' + CLS_DOWNOVERLAY);
      var scrollTop = target.scrollTop;
      if (scrollTop <= 0) {
        scrollTop = -scrollTop;
      }
      if (this.isDevice) {
        if (scrollTop < OVERLAY_MAXWID$1) {
          upOverlay.style.height = scrollTop + 'px';
        } else {
          upOverlay.style.height = '40px';
        }
        if (target.scrollHeight - Math.ceil(height + scrollTop) < OVERLAY_MAXWID$1) {
          downOverlay.style.height = target.scrollHeight - Math.ceil(height + scrollTop) + 'px';
        } else {
          downOverlay.style.height = '40px';
        }
      }
      if (scrollTop === 0) {
        this.arrowDisabling(navUpEle, navDownEle);
      } else if (Math.ceil(height + scrollTop + .1) >= target.scrollHeight) {
        this.arrowDisabling(navDownEle, navUpEle);
      } else {
        var disEle = this.element.querySelector('.' + CLS_VSCROLLNAV + '.' + CLS_DISABLE$1);
        if (disEle) {
          disEle.classList.remove(CLS_DISABLE$1);
          disEle.setAttribute('aria-disabled', 'false');
          disEle.setAttribute('tabindex', '0');
        }
      }
    };
    /**
     * Gets called when the model property changes.The data that describes the old and new values of property that changed.
     *
     * @param  {VScrollModel} newProp - It contains the new value of data.
     * @param  {VScrollModel} oldProp - It contains the old value of data.
     * @returns {void}
     * @private
     */
    VScroll.prototype.onPropertyChanged = function (newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case 'scrollStep':
            this.setScrollState();
            break;
          case 'enableRtl':
            if (newProp.enableRtl) {
              this.element.classList.add(CLS_RTL$1);
            } else {
              this.element.classList.remove(CLS_RTL$1);
            }
            break;
        }
      }
    };
    __decorate$1([sf.base.Property(null)], VScroll.prototype, "scrollStep", void 0);
    VScroll = __decorate$1([sf.base.NotifyPropertyChanges], VScroll);
    return VScroll;
  }(sf.base.Component);

  /**
   * Used to add scroll in menu.
   *
   * @param {createElementType} createElement - Specifies the create element model
   * @param {HTMLElement} container - Specifies the element container
   * @param {HTMLElement} content - Specifies the content element
   * @param {string} scrollType - Specifies the scroll type
   * @param {boolean} enableRtl - Specifies the enable RTL property
   * @param {boolean} offset - Specifies the offset value
   * @returns {HTMLElement} - Element
   * @hidden
   */
  function addScrolling(createElement$$1, container, content, scrollType, enableRtl, offset) {
    var containerOffset;
    var contentOffset;
    var parentElem = container.parentElement;
    if (scrollType === 'vscroll') {
      containerOffset = offset || container.getBoundingClientRect().height;
      contentOffset = content.getBoundingClientRect().height;
    } else {
      containerOffset = container.getBoundingClientRect().width;
      contentOffset = content.getBoundingClientRect().width;
    }
    if (containerOffset < contentOffset) {
      return createScrollbar(createElement$$1, container, content, scrollType, enableRtl, offset);
    } else if (parentElem) {
      var width = parentElem.getBoundingClientRect().width;
      if (width < containerOffset && scrollType === 'hscroll') {
        contentOffset = width;
        container.style.maxWidth = width + 'px';
        return createScrollbar(createElement$$1, container, content, scrollType, enableRtl, offset);
      }
      return content;
    } else {
      return content;
    }
  }
  /**
   * Used to create scroll bar in menu.
   *
   * @param {createElementType} createElement - Specifies the create element model
   * @param {HTMLElement} container - Specifies the element container
   * @param {HTMLElement} content - Specifies the content element
   * @param {string} scrollType - Specifies the scroll type
   * @param {boolean} enableRtl - Specifies the enable RTL property
   * @param {boolean} offset - Specifies the offset value
   * @returns {HTMLElement} - Element
   * @hidden
   */
  function createScrollbar(createElement$$1, container, content, scrollType, enableRtl, offset) {
    var scrollEle = createElement$$1('div', {
      className: 'e-menu-' + scrollType
    });
    container.appendChild(scrollEle);
    scrollEle.appendChild(content);
    if (offset) {
      scrollEle.style.overflow = 'hidden';
      scrollEle.style.height = offset + 'px';
    } else {
      scrollEle.style.maxHeight = container.style.maxHeight;
      container.style.overflow = 'hidden';
    }
    var scrollObj;
    if (scrollType === 'vscroll') {
      scrollObj = new VScroll({
        enableRtl: enableRtl
      }, scrollEle);
      scrollObj.scrollStep = sf.base.select('.e-' + scrollType + '-bar', container).offsetHeight / 2;
    } else {
      scrollObj = new HScroll({
        enableRtl: enableRtl
      }, scrollEle);
      scrollObj.scrollStep = sf.base.select('.e-' + scrollType + '-bar', container).offsetWidth;
    }
    return scrollEle;
  }
  /**
   * Used to destroy the scroll option.
   *
   * @param {VScroll | HScroll} scrollObj - Specifies the scroller object
   * @param {Element} element - Specifies the element
   * @param {HTMLElement} skipEle - Specifies the skip  element
   * @returns {void}
   * @hidden
   */
  function destroyScroll(scrollObj, element, skipEle) {
    if (scrollObj) {
      var menu = sf.base.select('.e-menu-parent', element);
      if (menu) {
        if (!skipEle || skipEle === menu) {
          scrollObj.destroy();
          element.parentElement.appendChild(menu);
          sf.base.detach(element);
        }
      } else {
        scrollObj.destroy();
        sf.base.detach(element);
      }
    }
  }
  exports.HScroll = HScroll;
  exports.VScroll = VScroll;
  exports.addScrolling = addScrolling;
  exports.destroyScroll = destroyScroll;
  return exports;
};
window.sf.navigations = window.sf.base.extend({}, window.sf.navigations, navigationsbase({}));

/***/ }),

/***/ "./modules/popup.js":
/*!**************************!*\
  !*** ./modules/popup.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
window.sf = window.sf || {};
var sfpopup = function sfpopup(exports) {
  'use strict';

  var __extends = undefined && undefined.__extends || function () {
    var _extendStatics = function extendStatics(d, b) {
      _extendStatics = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics(d, b);
    };
    return function (d, b) {
      _extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  /**
   * Specifies the offset position values.
   */
  var PositionData = /** @class */function (_super) {
    __extends(PositionData, _super);
    function PositionData() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate([sf.base.Property('left')], PositionData.prototype, "X", void 0);
    __decorate([sf.base.Property('top')], PositionData.prototype, "Y", void 0);
    return PositionData;
  }(sf.base.ChildProperty);
  // don't use space in classNames
  var CLASSNAMES = {
    ROOT: 'e-popup',
    RTL: 'e-rtl',
    OPEN: 'e-popup-open',
    CLOSE: 'e-popup-close'
  };
  /**
   * Represents the Popup Component
   * ```html
   * <div id="popup" style="position:absolute;height:100px;width:100px;">
   * <div style="margin:35px 25px;">Popup Content</div></div>
   * ```
   * ```typescript
   * <script>
   *   var popupObj = new Popup();
   *   popupObj.appendTo("#popup");
   * </script>
   * ```
   */
  var Popup = /** @class */function (_super) {
    __extends(Popup, _super);
    function Popup(element, options) {
      return _super.call(this, options, element) || this;
    }
    /**
     * Called internally if any of the property value changed.
     *
     * @param {PopupModel} newProp - specifies the new property
     * @param {PopupModel} oldProp - specifies the old property
     * @private
     * @returns {void}
     */
    Popup.prototype.onPropertyChanged = function (newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case 'width':
            sf.base.setStyleAttribute(this.element, {
              'width': sf.base.formatUnit(newProp.width)
            });
            break;
          case 'height':
            sf.base.setStyleAttribute(this.element, {
              'height': sf.base.formatUnit(newProp.height)
            });
            break;
          case 'zIndex':
            sf.base.setStyleAttribute(this.element, {
              'zIndex': newProp.zIndex
            });
            break;
          case 'enableRtl':
            this.setEnableRtl();
            break;
          case 'position':
          case 'relateTo':
            this.refreshPosition();
            break;
          case 'offsetX':
            // eslint-disable-next-line
            var x = newProp.offsetX - oldProp.offsetX;
            this.element.style.left = (parseInt(this.element.style.left, 10) + x).toString() + 'px';
            break;
          case 'offsetY':
            // eslint-disable-next-line
            var y = newProp.offsetY - oldProp.offsetY;
            this.element.style.top = (parseInt(this.element.style.top, 10) + y).toString() + 'px';
            break;
          case 'content':
            this.setContent();
            break;
          case 'actionOnScroll':
            if (newProp.actionOnScroll !== 'none') {
              this.wireScrollEvents();
            } else {
              this.unwireScrollEvents();
            }
            break;
        }
      }
    };
    /**
     * gets the Component module name.
     *
     * @returns {void}
     * @private
     */
    Popup.prototype.getModuleName = function () {
      return 'popup';
    };
    /**
     * To resolve if any collision occurs.
     *
     * @returns {void}
     */
    Popup.prototype.resolveCollision = function () {
      this.checkCollision();
    };
    /**
     * gets the persisted state properties of the Component.
     *
     * @returns {void}
     */
    Popup.prototype.getPersistData = function () {
      return this.addOnPersist([]);
    };
    /**
     * To destroy the control.
     *
     * @returns {void}
     */
    Popup.prototype.destroy = function () {
      if (this.element.classList.contains('e-popup-open')) {
        this.unwireEvents();
      }
      this.element.classList.remove(CLASSNAMES.ROOT, CLASSNAMES.RTL, CLASSNAMES.OPEN, CLASSNAMES.CLOSE);
      this.content = null;
      this.relateTo = null;
      _super.prototype.destroy.call(this);
    };
    /**
     * To Initialize the control rendering
     *
     * @returns {void}
     * @private
     */
    Popup.prototype.render = function () {
      this.element.classList.add(CLASSNAMES.ROOT);
      var styles = {};
      if (this.zIndex !== 1000) {
        styles.zIndex = this.zIndex;
      }
      if (this.width !== 'auto') {
        styles.width = sf.base.formatUnit(this.width);
      }
      if (this.height !== 'auto') {
        styles.height = sf.base.formatUnit(this.height);
      }
      sf.base.setStyleAttribute(this.element, styles);
      this.fixedParent = false;
      this.setEnableRtl();
      this.setContent();
    };
    Popup.prototype.wireEvents = function () {
      if (sf.base.Browser.isDevice) {
        sf.base.EventHandler.add(window, 'orientationchange', this.orientationOnChange, this);
      }
      if (this.actionOnScroll !== 'none') {
        this.wireScrollEvents();
      }
    };
    Popup.prototype.wireScrollEvents = function () {
      if (this.getRelateToElement()) {
        for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {
          var parent_1 = _a[_i];
          sf.base.EventHandler.add(parent_1, 'scroll', this.scrollRefresh, this);
        }
      }
    };
    Popup.prototype.unwireEvents = function () {
      if (sf.base.Browser.isDevice) {
        sf.base.EventHandler.remove(window, 'orientationchange', this.orientationOnChange);
      }
      if (this.actionOnScroll !== 'none') {
        this.unwireScrollEvents();
      }
    };
    Popup.prototype.unwireScrollEvents = function () {
      if (this.getRelateToElement()) {
        for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {
          var parent_2 = _a[_i];
          sf.base.EventHandler.remove(parent_2, 'scroll', this.scrollRefresh);
        }
      }
    };
    Popup.prototype.getRelateToElement = function () {
      var relateToElement = this.relateTo === '' || sf.base.isNullOrUndefined(this.relateTo) ? document.body : this.relateTo;
      this.setProperties({
        relateTo: relateToElement
      }, true);
      return typeof this.relateTo === 'string' ? document.querySelector(this.relateTo) : this.relateTo;
    };
    Popup.prototype.scrollRefresh = function (e) {
      if (this.actionOnScroll === 'reposition') {
        if (!sf.base.isNullOrUndefined(this.element) && !(this.element.offsetParent === e.target || this.element.offsetParent && this.element.offsetParent.tagName === 'BODY' && e.target.parentElement == null)) {
          this.refreshPosition();
        }
      } else if (this.actionOnScroll === 'hide') {
        this.hide();
      }
      if (this.actionOnScroll !== 'none') {
        if (this.getRelateToElement()) {
          var targetVisible = this.isElementOnViewport(this.getRelateToElement(), e.target);
          if (!targetVisible && !this.targetInvisibleStatus) {
            this.trigger('targetExitViewport');
            this.targetInvisibleStatus = true;
          } else if (targetVisible) {
            this.targetInvisibleStatus = false;
          }
        }
      }
    };
    /**
     * This method is to get the element visibility on viewport when scroll
     * the page. This method will returns true even though 1 px of element
     * part is in visible.
     *
     * @param {HTMLElement} relateToElement - specifies the element
     * @param {HTMLElement} scrollElement - specifies the scroll element
     * @returns {boolean} - retruns the boolean
     */
    // eslint-disable-next-line
    Popup.prototype.isElementOnViewport = function (relateToElement, scrollElement) {
      var scrollParents = this.getScrollableParent(relateToElement);
      for (var parent_3 = 0; parent_3 < scrollParents.length; parent_3++) {
        if (this.isElementVisible(relateToElement, scrollParents[parent_3])) {
          continue;
        } else {
          return false;
        }
      }
      return true;
    };
    Popup.prototype.isElementVisible = function (relateToElement, scrollElement) {
      var rect = this.checkGetBoundingClientRect(relateToElement);
      if (!rect.height || !rect.width) {
        return false;
      }
      if (!sf.base.isNullOrUndefined(this.checkGetBoundingClientRect(scrollElement))) {
        var parent_4 = scrollElement.getBoundingClientRect();
        return !(rect.bottom < parent_4.top) && !(rect.bottom > parent_4.bottom) && !(rect.right > parent_4.right) && !(rect.left < parent_4.left);
      } else {
        var win = window;
        var windowView = {
          top: win.scrollY,
          left: win.scrollX,
          right: win.scrollX + win.outerWidth,
          bottom: win.scrollY + win.outerHeight
        };
        var off = sf.popups.calculatePosition(relateToElement);
        var ele = {
          top: off.top,
          left: off.left,
          right: off.left + rect.width,
          bottom: off.top + rect.height
        };
        var elementView = {
          top: windowView.bottom - ele.top,
          left: windowView.right - ele.left,
          bottom: ele.bottom - windowView.top,
          right: ele.right - windowView.left
        };
        return elementView.top > 0 && elementView.left > 0 && elementView.right > 0 && elementView.bottom > 0;
      }
    };
    /**
     * Initialize the event handler
     *
     * @returns {void}
     * @private
     */
    Popup.prototype.preRender = function () {
      //There is no event handler
    };
    Popup.prototype.setEnableRtl = function () {
      this.reposition();
      // eslint-disable-next-line
      this.enableRtl ? this.element.classList.add(CLASSNAMES.RTL) : this.element.classList.remove(CLASSNAMES.RTL);
    };
    Popup.prototype.setContent = function () {
      if (!sf.base.isNullOrUndefined(this.content)) {
        this.element.innerHTML = '';
        if (typeof this.content === 'string') {
          this.element.textContent = this.content;
        } else {
          var relateToElem = this.getRelateToElement();
          // eslint-disable-next-line
          var props = this.content.props;
          if (!relateToElem.classList.contains('e-dropdown-btn') || sf.base.isNullOrUndefined(props)) {
            this.element.appendChild(this.content);
          }
        }
      }
    };
    Popup.prototype.orientationOnChange = function () {
      var _this = this;
      setTimeout(function () {
        _this.refreshPosition();
      }, 200);
    };
    // eslint-disable-next-line
    /**
     * Based on the `relative` element and `offset` values, `Popup` element position will refreshed.
     *
     * @returns {void}
     */
    Popup.prototype.refreshPosition = function (target, collision) {
      if (!sf.base.isNullOrUndefined(target)) {
        this.checkFixedParent(target);
      }
      this.reposition();
      if (!collision) {
        this.checkCollision();
      }
    };
    Popup.prototype.reposition = function () {
      var pos;
      var position;
      var relateToElement = this.getRelateToElement();
      if (typeof this.position.X === 'number' && typeof this.position.Y === 'number') {
        pos = {
          left: this.position.X,
          top: this.position.Y
        };
      } else if (typeof this.position.X === 'string' && typeof this.position.Y === 'number' || typeof this.position.X === 'number' && typeof this.position.Y === 'string') {
        var parentDisplay = void 0;
        var display = this.element.style.display;
        this.element.style.display = 'block';
        if (this.element.classList.contains('e-dlg-modal')) {
          parentDisplay = this.element.parentElement.style.display;
          this.element.parentElement.style.display = 'block';
        }
        position = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);
        if (typeof this.position.X === 'string') {
          pos = {
            left: position.left,
            top: this.position.Y
          };
        } else {
          pos = {
            left: this.position.X,
            top: position.top
          };
        }
        this.element.style.display = display;
        if (this.element.classList.contains('e-dlg-modal')) {
          this.element.parentElement.style.display = parentDisplay;
        }
      } else if (relateToElement) {
        var height = this.element.clientHeight;
        var display = this.element.style.display;
        this.element.style.display = 'block';
        pos = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY, height);
        this.element.style.display = display;
      } else {
        pos = {
          left: 0,
          top: 0
        };
      }
      if (!sf.base.isNullOrUndefined(pos)) {
        this.element.style.left = pos.left + 'px';
        this.element.style.top = pos.top + 'px';
      }
    };
    Popup.prototype.checkGetBoundingClientRect = function (ele) {
      var eleRect;
      try {
        eleRect = ele.getBoundingClientRect();
        return eleRect;
      } catch (error) {
        return null;
      }
    };
    Popup.prototype.getAnchorPosition = function (anchorEle, ele, position, offsetX, offsetY, height) {
      if (height === void 0) {
        height = 0;
      }
      var eleRect = this.checkGetBoundingClientRect(ele);
      var anchorRect = this.checkGetBoundingClientRect(anchorEle);
      if (sf.base.isNullOrUndefined(eleRect) || sf.base.isNullOrUndefined(anchorRect)) {
        return null;
      }
      var anchor = anchorEle;
      var anchorPos = {
        left: 0,
        top: 0
      };
      if (ele.offsetParent && ele.offsetParent.tagName === 'BODY' && anchorEle.tagName === 'BODY') {
        anchorPos = sf.popups.calculatePosition(anchorEle);
      } else {
        if (ele.classList.contains('e-dlg-modal') && anchor.tagName !== 'BODY') {
          ele = ele.parentElement;
        }
        anchorPos = sf.popups.calculateRelativeBasedPosition(anchor, ele);
      }
      switch (position.X) {
        default:
        case 'left':
          break;
        case 'center':
          if (ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container') {
            anchorPos.left += window.innerWidth / 2 - eleRect.width / 2;
          } else if (this.targetType === 'container') {
            anchorPos.left += anchorRect.width / 2 - eleRect.width / 2;
          } else {
            anchorPos.left += anchorRect.width / 2;
          }
          break;
        case 'right':
          if (ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container') {
            anchorPos.left += window.innerWidth - eleRect.width;
          } else if (this.targetType === 'container') {
            anchorPos.left += anchorRect.width - eleRect.width;
          } else {
            anchorPos.left += anchorRect.width;
          }
          break;
      }
      switch (position.Y) {
        default:
        case 'top':
          break;
        case 'center':
          if (ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container') {
            anchorPos.top += window.innerHeight / 2 - eleRect.height / 2;
          } else if (this.targetType === 'container') {
            anchorPos.top += anchorRect.height / 2 - eleRect.height / 2;
          } else {
            anchorPos.top += anchorRect.height / 2;
          }
          break;
        case 'bottom':
          if (ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container') {
            anchorPos.top += window.innerHeight - eleRect.height;
          } else if (this.targetType === 'container' && !ele.classList.contains('e-dialog')) {
            anchorPos.top += anchorRect.height - eleRect.height;
          } else if (this.targetType === 'container' && ele.classList.contains('e-dialog')) {
            anchorPos.top += anchorRect.height - height;
          } else {
            anchorPos.top += anchorRect.height;
          }
          break;
      }
      anchorPos.left += offsetX;
      anchorPos.top += offsetY;
      return anchorPos;
    };
    Popup.prototype.callFlip = function (param) {
      var relateToElement = this.getRelateToElement();
      sf.popups.flip(this.element, relateToElement, this.offsetX, this.offsetY, this.position.X, this.position.Y, this.viewPortElement, param, this.fixedParent);
    };
    Popup.prototype.callFit = function (param) {
      if (sf.popups.isCollide(this.element, this.viewPortElement).length !== 0) {
        if (sf.base.isNullOrUndefined(this.viewPortElement)) {
          var data = sf.popups.fit(this.element, this.viewPortElement, param);
          if (param.X) {
            this.element.style.left = data.left + 'px';
          }
          if (param.Y) {
            this.element.style.top = data.top + 'px';
          }
        } else {
          var elementRect = this.checkGetBoundingClientRect(this.element);
          var viewPortRect = this.checkGetBoundingClientRect(this.viewPortElement);
          if (sf.base.isNullOrUndefined(elementRect) || sf.base.isNullOrUndefined(viewPortRect)) {
            return null;
          }
          if (param && param.Y === true) {
            if (viewPortRect.top > elementRect.top) {
              this.element.style.top = '0px';
            } else if (viewPortRect.bottom < elementRect.bottom) {
              this.element.style.top = parseInt(this.element.style.top, 10) - (elementRect.bottom - viewPortRect.bottom) + 'px';
            }
          }
          if (param && param.X === true) {
            if (viewPortRect.right < elementRect.right) {
              this.element.style.left = parseInt(this.element.style.left, 10) - (elementRect.right - viewPortRect.right) + 'px';
            } else if (viewPortRect.left > elementRect.left) {
              this.element.style.left = parseInt(this.element.style.left, 10) + (viewPortRect.left - elementRect.left) + 'px';
            }
          }
        }
      }
    };
    Popup.prototype.checkCollision = function () {
      var horz = this.collision.X;
      var vert = this.collision.Y;
      if (horz === 'none' && vert === 'none') {
        return;
      }
      if (horz === 'flip' && vert === 'flip') {
        this.callFlip({
          X: true,
          Y: true
        });
      } else if (horz === 'fit' && vert === 'fit') {
        this.callFit({
          X: true,
          Y: true
        });
      } else {
        if (horz === 'flip') {
          this.callFlip({
            X: true,
            Y: false
          });
        } else if (vert === 'flip') {
          this.callFlip({
            Y: true,
            X: false
          });
        }
        if (horz === 'fit') {
          this.callFit({
            X: true,
            Y: false
          });
        } else if (vert === 'fit') {
          this.callFit({
            X: false,
            Y: true
          });
        }
      }
    };
    /**
     * Shows the popup element from screen.
     *
     * @returns {void}
     * @param {AnimationModel} animationOptions - specifies the model
     * @param { HTMLElement } relativeElement - To calculate the zIndex value dynamically.
     */
    Popup.prototype.show = function (animationOptions, relativeElement) {
      var _this = this;
      var relateToElement = this.getRelateToElement();
      if (relateToElement.classList.contains('e-filemanager')) {
        this.fmDialogContainer = this.element.getElementsByClassName('e-file-select-wrap')[0];
      }
      this.wireEvents();
      if (!sf.base.isNullOrUndefined(this.fmDialogContainer) && sf.base.Browser.isIos) {
        this.fmDialogContainer.style.display = 'block';
      }
      if (this.zIndex === 1000 || !sf.base.isNullOrUndefined(relativeElement)) {
        var zIndexElement = sf.base.isNullOrUndefined(relativeElement) ? this.element : relativeElement;
        this.zIndex = getZindexPartial(zIndexElement);
        sf.base.setStyleAttribute(this.element, {
          'zIndex': this.zIndex
        });
      }
      animationOptions = !sf.base.isNullOrUndefined(animationOptions) && _typeof(animationOptions) === 'object' ? animationOptions : this.showAnimation;
      if (this.collision.X !== 'none' || this.collision.Y !== 'none') {
        sf.base.removeClass([this.element], CLASSNAMES.CLOSE);
        sf.base.addClass([this.element], CLASSNAMES.OPEN);
        this.checkCollision();
        sf.base.removeClass([this.element], CLASSNAMES.OPEN);
        sf.base.addClass([this.element], CLASSNAMES.CLOSE);
      }
      if (!sf.base.isNullOrUndefined(animationOptions)) {
        animationOptions.begin = function () {
          if (!_this.isDestroyed) {
            sf.base.removeClass([_this.element], CLASSNAMES.CLOSE);
            sf.base.addClass([_this.element], CLASSNAMES.OPEN);
          }
        };
        animationOptions.end = function () {
          if (!_this.isDestroyed) {
            _this.trigger('open');
          }
        };
        new sf.base.Animation(animationOptions).animate(this.element);
      } else {
        sf.base.removeClass([this.element], CLASSNAMES.CLOSE);
        sf.base.addClass([this.element], CLASSNAMES.OPEN);
        this.trigger('open');
      }
    };
    /**
     * Hides the popup element from screen.
     *
     * @param {AnimationModel} animationOptions - To give the animation options.
     * @returns {void}
     */
    Popup.prototype.hide = function (animationOptions) {
      var _this = this;
      animationOptions = !sf.base.isNullOrUndefined(animationOptions) && _typeof(animationOptions) === 'object' ? animationOptions : this.hideAnimation;
      if (!sf.base.isNullOrUndefined(animationOptions)) {
        animationOptions.end = function () {
          if (!_this.isDestroyed) {
            sf.base.removeClass([_this.element], CLASSNAMES.OPEN);
            sf.base.addClass([_this.element], CLASSNAMES.CLOSE);
            _this.trigger('close');
          }
        };
        new sf.base.Animation(animationOptions).animate(this.element);
      } else {
        sf.base.removeClass([this.element], CLASSNAMES.OPEN);
        sf.base.addClass([this.element], CLASSNAMES.CLOSE);
        this.trigger('close');
      }
      this.unwireEvents();
    };
    /**
     * Gets scrollable parent elements for the given element.
     *
     * @returns {void}
     * @param { HTMLElement } element - Specify the element to get the scrollable parents of it.
     */
    Popup.prototype.getScrollableParent = function (element) {
      this.checkFixedParent(element);
      return getScrollableParent(element, this.fixedParent);
    };
    Popup.prototype.checkFixedParent = function (element) {
      var parent = element.parentElement;
      while (parent && parent.tagName !== 'HTML') {
        var parentStyle = getComputedStyle(parent);
        if (parentStyle.position === 'fixed' && !sf.base.isNullOrUndefined(this.element) && this.element.offsetParent && this.element.offsetParent.tagName === 'BODY' && getComputedStyle(this.element.offsetParent).overflow !== 'hidden') {
          this.element.style.top = window.scrollY > parseInt(this.element.style.top, 10) ? sf.base.formatUnit(window.scrollY - parseInt(this.element.style.top, 10)) : sf.base.formatUnit(parseInt(this.element.style.top, 10) - window.scrollY);
          this.element.style.position = 'fixed';
          this.fixedParent = true;
        }
        parent = parent.parentElement;
        if (!sf.base.isNullOrUndefined(this.element) && sf.base.isNullOrUndefined(this.element.offsetParent) && parentStyle.position === 'fixed' && this.element.style.position === 'fixed') {
          this.fixedParent = true;
        }
      }
    };
    __decorate([sf.base.Property('auto')], Popup.prototype, "height", void 0);
    __decorate([sf.base.Property('auto')], Popup.prototype, "width", void 0);
    __decorate([sf.base.Property(null)], Popup.prototype, "content", void 0);
    __decorate([sf.base.Property('container')], Popup.prototype, "targetType", void 0);
    __decorate([sf.base.Property(null)], Popup.prototype, "viewPortElement", void 0);
    __decorate([sf.base.Property({
      X: 'none',
      Y: 'none'
    })], Popup.prototype, "collision", void 0);
    __decorate([sf.base.Property('')], Popup.prototype, "relateTo", void 0);
    __decorate([sf.base.Complex({}, PositionData)], Popup.prototype, "position", void 0);
    __decorate([sf.base.Property(0)], Popup.prototype, "offsetX", void 0);
    __decorate([sf.base.Property(0)], Popup.prototype, "offsetY", void 0);
    __decorate([sf.base.Property(1000)], Popup.prototype, "zIndex", void 0);
    __decorate([sf.base.Property(false)], Popup.prototype, "enableRtl", void 0);
    __decorate([sf.base.Property('reposition')], Popup.prototype, "actionOnScroll", void 0);
    __decorate([sf.base.Property(null)], Popup.prototype, "showAnimation", void 0);
    __decorate([sf.base.Property(null)], Popup.prototype, "hideAnimation", void 0);
    __decorate([sf.base.Event()], Popup.prototype, "open", void 0);
    __decorate([sf.base.Event()], Popup.prototype, "close", void 0);
    __decorate([sf.base.Event()], Popup.prototype, "targetExitViewport", void 0);
    Popup = __decorate([sf.base.NotifyPropertyChanges], Popup);
    return Popup;
  }(sf.base.Component);
  /**
   * Gets scrollable parent elements for the given element.
   *
   * @param { HTMLElement } element - Specify the element to get the scrollable parents of it.
   * @param {boolean} fixedParent - specifies the parent element
   * @private
   * @returns {void}
   */
  function getScrollableParent(element, fixedParent) {
    var eleStyle = getComputedStyle(element);
    var scrollParents = [];
    var overflowRegex = /(auto|scroll)/;
    var parent = element.parentElement;
    while (parent && parent.tagName !== 'HTML') {
      var parentStyle = getComputedStyle(parent);
      if (!(eleStyle.position === 'absolute' && parentStyle.position === 'static') && overflowRegex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {
        scrollParents.push(parent);
      }
      parent = parent.parentElement;
    }
    if (!fixedParent) {
      scrollParents.push(document);
    }
    return scrollParents;
  }
  /**
   * Gets the maximum z-index of the given element.
   *
   * @returns {void}
   * @param { HTMLElement } element - Specify the element to get the maximum z-index of it.
   * @private
   */
  function getZindexPartial(element) {
    // upto body traversal
    var parent = element.parentElement;
    var parentZindex = [];
    while (parent) {
      if (parent.tagName !== 'BODY') {
        var index = document.defaultView.getComputedStyle(parent, null).getPropertyValue('z-index');
        var position = document.defaultView.getComputedStyle(parent, null).getPropertyValue('position');
        if (index !== 'auto' && position !== 'static') {
          parentZindex.push(index);
        }
        parent = parent.parentElement;
      } else {
        break;
      }
    }
    var childrenZindex = [];
    for (var i = 0; i < document.body.children.length; i++) {
      if (!element.isEqualNode(document.body.children[i])) {
        var index = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('z-index');
        var position = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('position');
        if (index !== 'auto' && position !== 'static') {
          childrenZindex.push(index);
        }
      }
    }
    childrenZindex.push('999');
    var siblingsZindex = [];
    if (!sf.base.isNullOrUndefined(element.parentElement) && element.parentElement.tagName !== 'BODY') {
      var childNodes = [].slice.call(element.parentElement.children);
      for (var i = 0; i < childNodes.length; i++) {
        if (!element.isEqualNode(childNodes[i])) {
          var index = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue('z-index');
          var position = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue('position');
          if (index !== 'auto' && position !== 'static') {
            siblingsZindex.push(index);
          }
        }
      }
    }
    var finalValue = parentZindex.concat(childrenZindex, siblingsZindex);
    // eslint-disable-next-line
    var currentZindexValue = Math.max.apply(Math, finalValue) + 1;
    return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;
  }
  /**
   * Gets the maximum z-index of the page.
   *
   * @returns {void}
   * @param { HTMLElement } tagName - Specify the tagName to get the maximum z-index of it.
   * @private
   */
  function getMaxZindex(tagName) {
    if (tagName === void 0) {
      tagName = ['*'];
    }
    var maxZindex = [];
    for (var i = 0; i < tagName.length; i++) {
      var elements = document.getElementsByTagName(tagName[i]);
      for (var i_1 = 0; i_1 < elements.length; i_1++) {
        var index = document.defaultView.getComputedStyle(elements[i_1], null).getPropertyValue('z-index');
        var position = document.defaultView.getComputedStyle(elements[i_1], null).getPropertyValue('position');
        if (index !== 'auto' && position !== 'static') {
          maxZindex.push(index);
        }
      }
    }
    // eslint-disable-next-line
    var currentZindexValue = Math.max.apply(Math, maxZindex) + 1;
    return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;
  }

  /**
   * Popup Components
   */

  exports.PositionData = PositionData;
  exports.Popup = Popup;
  exports.getScrollableParent = getScrollableParent;
  exports.getZindexPartial = getZindexPartial;
  exports.getMaxZindex = getMaxZindex;
  return exports;
};
sf.popups = sf.base.extend({}, sf.popups, sfpopup({}));

/***/ }),

/***/ "./modules/popupsbase.js":
/*!*******************************!*\
  !*** ./modules/popupsbase.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

window.sf = window.sf || {};
var popupsbase = function popupsbase(exports) {
  'use strict';

  /**
   * Position library
   */
  var elementRect;
  var popupRect;
  var element;
  var parentDocument$1;
  var fixedParent = false;
  /**
   *
   * @param {HTMLElement} anchor - specifies the element
   * @param {HTMLElement} element - specifies the element
   * @returns {OffsetPosition} - returns the value
   */
  function calculateRelativeBasedPosition(anchor, element) {
    var fixedElement = false;
    var anchorPos = {
      left: 0,
      top: 0
    };
    var tempAnchor = anchor;
    if (!anchor || !element) {
      return anchorPos;
    }
    if (sf.base.isNullOrUndefined(element.offsetParent) && element.style.position === 'fixed') {
      fixedElement = true;
    }
    while ((element.offsetParent || fixedElement) && anchor && element.offsetParent !== anchor) {
      anchorPos.left += anchor.offsetLeft;
      anchorPos.top += anchor.offsetTop;
      anchor = anchor.offsetParent;
    }
    anchor = tempAnchor;
    while ((element.offsetParent || fixedElement) && anchor && element.offsetParent !== anchor) {
      anchorPos.left -= anchor.scrollLeft;
      anchorPos.top -= anchor.scrollTop;
      anchor = anchor.parentElement;
    }
    return anchorPos;
  }
  /**
   *
   * @param {Element} currentElement - specifies the element
   * @param {string} positionX - specifies the position
   * @param {string} positionY - specifies the position
   * @param {boolean} parentElement - specifies the boolean
   * @param {ClientRect} targetValues - specifies the client
   * @returns {OffsetPosition} - returns the position
   */
  function calculatePosition(currentElement, positionX, positionY, parentElement, targetValues) {
    popupRect = undefined;
    popupRect = targetValues;
    fixedParent = parentElement ? true : false;
    if (!currentElement) {
      return {
        left: 0,
        top: 0
      };
    }
    if (!positionX) {
      positionX = 'left';
    }
    if (!positionY) {
      positionY = 'top';
    }
    parentDocument$1 = currentElement.ownerDocument;
    element = currentElement;
    var pos = {
      left: 0,
      top: 0
    };
    return updatePosition(positionX.toLowerCase(), positionY.toLowerCase(), pos);
  }
  /**
   *
   * @param {number} value - specifies the number
   * @param {OffsetPosition} pos - specifies the position
   * @returns {void}
   */
  function setPosx(value, pos) {
    pos.left = value;
  }
  /**
   *
   * @param {number} value - specifies the number
   * @param {OffsetPosition} pos - specifies the position
   * @returns {void}
   */
  function setPosy(value, pos) {
    pos.top = value;
  }
  /**
   *
   * @param {string} posX - specifies the position
   * @param {string} posY - specifies the position
   * @param {OffsetPosition} pos - specifies the position
   * @returns {OffsetPosition} - returns the postion
   */
  function updatePosition(posX, posY, pos) {
    elementRect = element.getBoundingClientRect();
    switch (posY + posX) {
      case 'topcenter':
        setPosx(getElementHCenter(), pos);
        setPosy(getElementTop(), pos);
        break;
      case 'topright':
        setPosx(getElementRight(), pos);
        setPosy(getElementTop(), pos);
        break;
      case 'centercenter':
        setPosx(getElementHCenter(), pos);
        setPosy(getElementVCenter(), pos);
        break;
      case 'centerright':
        setPosx(getElementRight(), pos);
        setPosy(getElementVCenter(), pos);
        break;
      case 'centerleft':
        setPosx(getElementLeft(), pos);
        setPosy(getElementVCenter(), pos);
        break;
      case 'bottomcenter':
        setPosx(getElementHCenter(), pos);
        setPosy(getElementBottom(), pos);
        break;
      case 'bottomright':
        setPosx(getElementRight(), pos);
        setPosy(getElementBottom(), pos);
        break;
      case 'bottomleft':
        setPosx(getElementLeft(), pos);
        setPosy(getElementBottom(), pos);
        break;
      default:
      case 'topleft':
        setPosx(getElementLeft(), pos);
        setPosy(getElementTop(), pos);
        break;
    }
    element = null;
    return pos;
  }
  /**
   * @returns {number} - specifies the number value
   */
  function getBodyScrollTop$1() {
    return parentDocument$1.documentElement.scrollTop || parentDocument$1.body.scrollTop;
  }
  /**
   * @returns {number} - specifies the number value
   */
  function getBodyScrollLeft$1() {
    return parentDocument$1.documentElement.scrollLeft || parentDocument$1.body.scrollLeft;
  }
  /**
   * @returns {number} - specifies the number value
   */
  function getElementBottom() {
    return fixedParent ? elementRect.bottom : elementRect.bottom + getBodyScrollTop$1();
  }
  /**
   * @returns {number} - specifies the number value
   */
  function getElementVCenter() {
    return getElementTop() + elementRect.height / 2;
  }
  /**
   * @returns {number} - specifies the number value
   */
  function getElementTop() {
    return fixedParent ? elementRect.top : elementRect.top + getBodyScrollTop$1();
  }
  /**
   * @returns {number} - specifies the number value
   */
  function getElementLeft() {
    return elementRect.left + getBodyScrollLeft$1();
  }
  /**
   * @returns {number} - specifies the number value
   */
  function getElementRight() {
    var popupWidth = element && (element.classList.contains('e-date-wrapper') || element.classList.contains('e-datetime-wrapper') || element.classList.contains('e-date-range-wrapper') || element.classList.contains('e-multiselect')) ? popupRect ? popupRect.width : 0 : popupRect && elementRect.width >= popupRect.width ? popupRect.width : 0;
    return elementRect.right + getBodyScrollLeft$1() - popupWidth;
  }
  /**
   * @returns {number} - specifies the number value
   */
  function getElementHCenter() {
    return getElementLeft() + elementRect.width / 2;
  }

  /**
   * Collision module.
   */
  var parentDocument;
  var targetContainer;
  /**
   *
   * @param {HTMLElement} element - specifies the element
   * @param {HTMLElement} viewPortElement - specifies the element
   * @param {CollisionCoordinates} axis - specifies the collision coordinates
   * @param {OffsetPosition} position - specifies the position
   * @returns {void}
   */
  function fit(element, viewPortElement, axis, position) {
    if (viewPortElement === void 0) {
      viewPortElement = null;
    }
    if (axis === void 0) {
      axis = {
        X: false,
        Y: false
      };
    }
    if (!axis.Y && !axis.X) {
      return {
        left: 0,
        top: 0
      };
    }
    var elemData = element.getBoundingClientRect();
    targetContainer = viewPortElement;
    parentDocument = element.ownerDocument;
    if (!position) {
      position = calculatePosition(element, 'left', 'top');
    }
    if (axis.X) {
      var containerWidth = targetContainer ? getTargetContainerWidth() : getViewPortWidth();
      var containerLeft = ContainerLeft();
      var containerRight = ContainerRight();
      var overLeft = containerLeft - position.left;
      var overRight = position.left + elemData.width - containerRight;
      if (elemData.width > containerWidth) {
        if (overLeft > 0 && overRight <= 0) {
          position.left = containerRight - elemData.width;
        } else if (overRight > 0 && overLeft <= 0) {
          position.left = containerLeft;
        } else {
          position.left = overLeft > overRight ? containerRight - elemData.width : containerLeft;
        }
      } else if (overLeft > 0) {
        position.left += overLeft;
      } else if (overRight > 0) {
        position.left -= overRight;
      }
    }
    if (axis.Y) {
      var containerHeight = targetContainer ? getTargetContainerHeight() : getViewPortHeight();
      var containerTop = ContainerTop();
      var containerBottom = ContainerBottom();
      var overTop = containerTop - position.top;
      var overBottom = position.top + elemData.height - containerBottom;
      if (elemData.height > containerHeight) {
        if (overTop > 0 && overBottom <= 0) {
          position.top = containerBottom - elemData.height;
        } else if (overBottom > 0 && overTop <= 0) {
          position.top = containerTop;
        } else {
          position.top = overTop > overBottom ? containerBottom - elemData.height : containerTop;
        }
      } else if (overTop > 0) {
        position.top += overTop;
      } else if (overBottom > 0) {
        position.top -= overBottom;
      }
    }
    return position;
  }
  /**
   *
   * @param {HTMLElement} element - specifies the html element
   * @param {HTMLElement} viewPortElement - specifies the html element
   * @param {number} x - specifies the number
   * @param {number} y - specifies the number
   * @returns {string[]} - returns the string value
   */
  function isCollide(element, viewPortElement, x, y) {
    if (viewPortElement === void 0) {
      viewPortElement = null;
    }
    var elemOffset = calculatePosition(element, 'left', 'top');
    if (x) {
      elemOffset.left = x;
    }
    if (y) {
      elemOffset.top = y;
    }
    var data = [];
    targetContainer = viewPortElement;
    parentDocument = element.ownerDocument;
    var elementRect = element.getBoundingClientRect();
    var top = elemOffset.top;
    var left = elemOffset.left;
    var right = elemOffset.left + elementRect.width;
    var bottom = elemOffset.top + elementRect.height;
    // eslint-disable-next-line
    var yAxis = topCollideCheck(top, bottom);
    var xAxis = leftCollideCheck(left, right);
    if (yAxis.topSide) {
      data.push('top');
    }
    if (xAxis.rightSide) {
      data.push('right');
    }
    if (xAxis.leftSide) {
      data.push('left');
    }
    if (yAxis.bottomSide) {
      data.push('bottom');
    }
    return data;
  }
  /**
   *
   * @param {HTMLElement} element - specifies the element
   * @param {HTMLElement} target - specifies the element
   * @param {number} offsetX - specifies the number
   * @param {number} offsetY - specifies the number
   * @param {string} positionX - specifies the string value
   * @param {string} positionY - specifies the string value
   * @param {HTMLElement} viewPortElement - specifies the element
   * @param {CollisionCoordinates} axis - specifies the collision axis
   * @param {boolean} fixedParent - specifies the boolean
   * @returns {void}
   */
  function flip(element, target, offsetX, offsetY, positionX, positionY, viewPortElement, /* eslint-disable */
  axis, fixedParent) {
    if (viewPortElement === void 0) {
      viewPortElement = null;
    }
    if (axis === void 0) {
      axis = {
        X: true,
        Y: true
      };
    }
    if (!target || !element || !positionX || !positionY || !axis.X && !axis.Y) {
      return;
    }
    var tEdge = {
        TL: null,
        TR: null,
        BL: null,
        BR: null
      },
      eEdge = {
        TL: null,
        TR: null,
        BL: null,
        BR: null
        /* eslint-enable */
      };
    var elementRect;
    if (window.getComputedStyle(element).display === 'none') {
      var oldVisibility = element.style.visibility;
      element.style.visibility = 'hidden';
      element.style.display = 'block';
      elementRect = element.getBoundingClientRect();
      element.style.removeProperty('display');
      element.style.visibility = oldVisibility;
    } else {
      elementRect = element.getBoundingClientRect();
    }
    var pos = {
      posX: positionX,
      posY: positionY,
      offsetX: offsetX,
      offsetY: offsetY,
      position: {
        left: 0,
        top: 0
      }
    };
    targetContainer = viewPortElement;
    parentDocument = target.ownerDocument;
    updateElementData(target, tEdge, pos, fixedParent, elementRect);
    setPosition(eEdge, pos, elementRect);
    if (axis.X) {
      leftFlip(target, eEdge, tEdge, pos, elementRect, true);
    }
    if (axis.Y && tEdge.TL.top > -1) {
      topFlip(target, eEdge, tEdge, pos, elementRect, true);
    }
    setPopup(element, pos, elementRect);
  }
  /**
   *
   * @param {HTMLElement} element - specifies the element
   * @param {PositionLocation} pos - specifies the location
   * @param {ClientRect} elementRect - specifies the client rect
   * @returns {void}
   */
  function setPopup(element, pos, elementRect) {
    //eslint-disable-next-line
    var left = 0,
      top = 0;
    if (element.offsetParent != null && (getComputedStyle(element.offsetParent).position === 'absolute' || getComputedStyle(element.offsetParent).position === 'relative')) {
      var data = calculatePosition(element.offsetParent, 'left', 'top', false, elementRect);
      left = data.left;
      top = data.top;
    }
    var scaleX = 1;
    var scaleY = 1;
    if (element.offsetParent) {
      var transformStyle = getComputedStyle(element.offsetParent).transform;
      if (transformStyle !== 'none') {
        var matrix = new DOMMatrix(transformStyle);
        scaleX = matrix.a;
        scaleY = matrix.d;
      }
    }
    element.style.top = pos.position.top / scaleY + pos.offsetY - top + 'px';
    element.style.left = pos.position.left / scaleX + pos.offsetX - left + 'px';
  }
  /**
   *
   * @param {HTMLElement} target - specifies the element
   * @param {EdgeOffset} edge - specifies the offset
   * @param {PositionLocation} pos - specifies theloaction
   * @param {boolean} fixedParent - specifies the boolean
   * @param {ClientRect} elementRect - specifies the client rect
   * @returns {void}
   */
  function updateElementData(target, edge, pos, fixedParent, elementRect) {
    pos.position = calculatePosition(target, pos.posX, pos.posY, fixedParent, elementRect);
    edge.TL = calculatePosition(target, 'left', 'top', fixedParent, elementRect);
    edge.TR = calculatePosition(target, 'right', 'top', fixedParent, elementRect);
    edge.BR = calculatePosition(target, 'left', 'bottom', fixedParent, elementRect);
    edge.BL = calculatePosition(target, 'right', 'bottom', fixedParent, elementRect);
  }
  /**
   *
   * @param {EdgeOffset} eStatus - specifies the status
   * @param {PositionLocation} pos - specifies the location
   * @param {ClientRect} elementRect - specifies the client
   * @returns {void}
   */
  function setPosition(eStatus, pos, elementRect) {
    eStatus.TL = {
      top: pos.position.top + pos.offsetY,
      left: pos.position.left + pos.offsetX
    };
    eStatus.TR = {
      top: eStatus.TL.top,
      left: eStatus.TL.left + elementRect.width
    };
    eStatus.BL = {
      top: eStatus.TL.top + elementRect.height,
      left: eStatus.TL.left
    };
    eStatus.BR = {
      top: eStatus.TL.top + elementRect.height,
      left: eStatus.TL.left + elementRect.width
    };
  }
  /**
   *
   * @param {number} left - specifies the  number
   * @param {number} right - specifies the number
   * @returns {LeftCorners} - returns the value
   */
  function leftCollideCheck(left, right) {
    //eslint-disable-next-line
    var leftSide = false,
      rightSide = false;
    if (left - getBodyScrollLeft() < ContainerLeft()) {
      leftSide = true;
    }
    if (right > ContainerRight()) {
      rightSide = true;
    }
    return {
      leftSide: leftSide,
      rightSide: rightSide
    };
  }
  /**
   *
   * @param {HTMLElement} target - specifies the element
   * @param {EdgeOffset} edge - specifes the element
   * @param {EdgeOffset} tEdge - specifies the edge offset
   * @param {PositionLocation} pos - specifes the location
   * @param {ClientRect} elementRect - specifies the client
   * @param {boolean} deepCheck - specifies the boolean value
   * @returns {void}
   */
  function leftFlip(target, edge, tEdge, pos, elementRect, deepCheck) {
    var collideSide = leftCollideCheck(edge.TL.left, edge.TR.left);
    if (tEdge.TL.left - getBodyScrollLeft() <= ContainerLeft()) {
      collideSide.leftSide = false;
    }
    if (tEdge.TR.left > ContainerRight()) {
      collideSide.rightSide = false;
    }
    if (collideSide.leftSide && !collideSide.rightSide || !collideSide.leftSide && collideSide.rightSide) {
      if (pos.posX === 'right') {
        pos.posX = 'left';
      } else {
        pos.posX = 'right';
      }
      pos.offsetX = pos.offsetX + elementRect.width;
      pos.offsetX = -1 * pos.offsetX;
      pos.position = calculatePosition(target, pos.posX, pos.posY, false);
      setPosition(edge, pos, elementRect);
      if (deepCheck) {
        leftFlip(target, edge, tEdge, pos, elementRect, false);
      }
    }
  }
  /**
   *
   * @param {HTMLElement} target - specifies the element
   * @param {EdgeOffset} edge - specifies the offset
   * @param {EdgeOffset} tEdge - specifies the offset
   * @param {PositionLocation} pos - specifies the location
   * @param {ClientRect} elementRect - specifies the client rect
   * @param {boolean} deepCheck - specifies the boolean
   * @returns {void}
   */
  function topFlip(target, edge, tEdge, pos, elementRect, deepCheck) {
    var collideSide = topCollideCheck(edge.TL.top, edge.BL.top);
    if (tEdge.TL.top - getBodyScrollTop() <= ContainerTop()) {
      collideSide.topSide = false;
    }
    if (tEdge.BL.top >= ContainerBottom() && target.getBoundingClientRect().bottom < window.innerHeight) {
      collideSide.bottomSide = false;
    }
    if (collideSide.topSide && !collideSide.bottomSide || !collideSide.topSide && collideSide.bottomSide) {
      if (pos.posY === 'top') {
        pos.posY = 'bottom';
      } else {
        pos.posY = 'top';
      }
      pos.offsetY = pos.offsetY + elementRect.height;
      pos.offsetY = -1 * pos.offsetY;
      pos.position = calculatePosition(target, pos.posX, pos.posY, false, elementRect);
      setPosition(edge, pos, elementRect);
      if (deepCheck) {
        topFlip(target, edge, tEdge, pos, elementRect, false);
      }
    }
  }
  /**
   *
   * @param {number} top - specifies the number
   * @param {number} bottom - specifies the number
   * @returns {TopCorners} - retyrns the value
   */
  function topCollideCheck(top, bottom) {
    //eslint-disable-next-line
    var topSide = false,
      bottomSide = false;
    if (top - getBodyScrollTop() < ContainerTop()) {
      topSide = true;
    }
    if (bottom > ContainerBottom()) {
      bottomSide = true;
    }
    return {
      topSide: topSide,
      bottomSide: bottomSide
    };
  }
  /**
   * @returns {void}
   */
  function getTargetContainerWidth() {
    return targetContainer.getBoundingClientRect().width;
  }
  /**
   * @returns {void}
   */
  function getTargetContainerHeight() {
    return targetContainer.getBoundingClientRect().height;
  }
  /**
   * @returns {void}
   */
  function getTargetContainerLeft() {
    return targetContainer.getBoundingClientRect().left;
  }
  /**
   * @returns {void}
   */
  function getTargetContainerTop() {
    return targetContainer.getBoundingClientRect().top;
  }
  //eslint-disable-next-line
  function ContainerTop() {
    if (targetContainer) {
      return getTargetContainerTop();
    }
    return 0;
  }
  //eslint-disable-next-line
  function ContainerLeft() {
    if (targetContainer) {
      return getTargetContainerLeft();
    }
    return 0;
  }
  //eslint-disable-next-line
  function ContainerRight() {
    if (targetContainer) {
      return getBodyScrollLeft() + getTargetContainerLeft() + getTargetContainerWidth();
    }
    return getBodyScrollLeft() + getViewPortWidth();
  }
  //eslint-disable-next-line
  function ContainerBottom() {
    if (targetContainer) {
      return getBodyScrollTop() + getTargetContainerTop() + getTargetContainerHeight();
    }
    return getBodyScrollTop() + getViewPortHeight();
  }
  /**
   * @returns {void}
   */
  function getBodyScrollTop() {
    // if(targetContainer)
    //     return targetContainer.scrollTop;
    return parentDocument.documentElement.scrollTop || parentDocument.body.scrollTop;
  }
  /**
   * @returns {void}
   */
  function getBodyScrollLeft() {
    // if(targetContainer)
    //     return targetContainer.scrollLeft;
    return parentDocument.documentElement.scrollLeft || parentDocument.body.scrollLeft;
  }
  /**
   * @returns {void}
   */
  function getViewPortHeight() {
    return window.innerHeight;
  }
  /**
   * @returns {void}
   */
  function getViewPortWidth() {
    var windowWidth = window.innerWidth;
    var documentReact = document.documentElement.getBoundingClientRect();
    var offsetWidth = sf.base.isNullOrUndefined(document.documentElement) ? 0 : documentReact.width;
    return windowWidth - (windowWidth - offsetWidth);
  }

  /**
   * Resize library
   */
  /* eslint-disable */
  var elementClass = ['north-west', 'north', 'north-east', 'west', 'east', 'south-west', 'south', 'south-east'];
  var RESIZE_HANDLER = 'e-resize-handle';
  var FOCUSED_HANDLER = 'e-focused-handle';
  var DIALOG_RESIZABLE = 'e-dlg-resizable';
  var RESTRICT_LEFT = ['e-restrict-left'];
  var RESIZE_WITHIN_VIEWPORT = 'e-resize-viewport';
  var dialogBorderResize = ['north', 'west', 'east', 'south'];
  var targetElement;
  var selectedHandler;
  var originalWidth = 0;
  var originalHeight = 0;
  var originalX = 0;
  var originalY = 0;
  var originalMouseX = 0;
  var originalMouseY = 0;
  var minHeight;
  var maxHeight;
  var minWidth;
  var maxWidth;
  var containerElement;
  var resizeStart = null;
  var resize = null;
  var resizeEnd = null;
  /* eslint-enable */
  var resizeWestWidth;
  var setLeft = true;
  var previousWidth = 0;
  var setWidth = true;
  // eslint-disable-next-line
  var proxy;
  /**
   *
   * @param {ResizeArgs} args - specifies the resize args
   * @returns {void}
   */
  function createResize(args) {
    resizeStart = args.resizeBegin;
    resize = args.resizing;
    resizeEnd = args.resizeComplete;
    targetElement = getDOMElement(args.element);
    containerElement = getDOMElement(args.boundary);
    var directions = args.direction.split(' ');
    for (var i = 0; i < directions.length; i++) {
      if (dialogBorderResize.indexOf(directions[i]) >= 0 && directions[i]) {
        setBorderResizeElm(directions[i]);
      } else if (directions[i].trim() !== '') {
        var resizeHandler = sf.base.createElement('div', {
          className: 'e-icons ' + RESIZE_HANDLER + ' ' + 'e-' + directions[i]
        });
        targetElement.appendChild(resizeHandler);
      }
    }
    minHeight = args.minHeight;
    minWidth = args.minWidth;
    maxWidth = args.maxWidth;
    maxHeight = args.maxHeight;
    if (args.proxy && args.proxy.element && args.proxy.element.classList.contains('e-dialog')) {
      wireEvents(args.proxy);
    } else {
      wireEvents();
    }
  }
  /**
   *
   * @param {string} direction - specifies the string
   * @returns {void}
   */
  function setBorderResizeElm(direction) {
    calculateValues();
    var borderBottom = sf.base.createElement('span', {
      attrs: {
        'unselectable': 'on',
        'contenteditable': 'false'
      }
    });
    borderBottom.setAttribute('class', 'e-dialog-border-resize e-' + direction);
    if (direction === 'south') {
      borderBottom.style.height = '2px';
      borderBottom.style.width = '100%';
      borderBottom.style.bottom = '0px';
      borderBottom.style.left = '0px';
    }
    if (direction === 'north') {
      borderBottom.style.height = '2px';
      borderBottom.style.width = '100%';
      borderBottom.style.top = '0px';
      borderBottom.style.left = '0px';
    }
    if (direction === 'east') {
      borderBottom.style.height = '100%';
      borderBottom.style.width = '2px';
      borderBottom.style.right = '0px';
      borderBottom.style.top = '0px';
    }
    if (direction === 'west') {
      borderBottom.style.height = '100%';
      borderBottom.style.width = '2px';
      borderBottom.style.left = '0px';
      borderBottom.style.top = '0px';
    }
    targetElement.appendChild(borderBottom);
  }
  /**
   *
   * @param {string} element - specifies the element
   * @returns {HTMLElement} - returns the element
   */
  function getDOMElement(element) {
    var domElement;
    if (!sf.base.isNullOrUndefined(element)) {
      if (typeof element === 'string') {
        domElement = document.querySelector(element);
      } else {
        domElement = element;
      }
    }
    return domElement;
  }
  // eslint-disable-next-line
  function wireEvents(args) {
    if (sf.base.isNullOrUndefined(args)) {
      args = this;
    }
    var resizers = targetElement.querySelectorAll('.' + RESIZE_HANDLER);
    for (var i = 0; i < resizers.length; i++) {
      selectedHandler = resizers[i];
      sf.base.EventHandler.add(selectedHandler, 'mousedown', onMouseDown, args);
      var eventName = sf.base.Browser.info.name === 'msie' ? 'pointerdown' : 'touchstart';
      sf.base.EventHandler.add(selectedHandler, eventName, onTouchStart, args);
    }
    var borderResizers = targetElement.querySelectorAll('.e-dialog-border-resize');
    if (!sf.base.isNullOrUndefined(borderResizers)) {
      for (var i = 0; i < borderResizers.length; i++) {
        selectedHandler = borderResizers[i];
        sf.base.EventHandler.add(selectedHandler, 'mousedown', onMouseDown, args);
        var eventName = sf.base.Browser.info.name === 'msie' ? 'pointerdown' : 'touchstart';
        sf.base.EventHandler.add(selectedHandler, eventName, onTouchStart, args);
      }
    }
  }
  /* istanbul ignore next */
  /**
   *
   * @param {string} e - specifies the string
   * @returns {string} - returns the string
   */
  function getEventType(e) {
    return e.indexOf('mouse') > -1 ? 'mouse' : 'touch';
  }
  /* istanbul ignore next */
  /**
   *
   * @param {MouseEvent} e - specifies the mouse event
   * @returns {void}
   */
  function onMouseDown(e) {
    e.preventDefault();
    targetElement = e.target.parentElement;
    calculateValues();
    originalMouseX = e.pageX;
    originalMouseY = e.pageY;
    e.target.classList.add(FOCUSED_HANDLER);
    if (!sf.base.isNullOrUndefined(resizeStart)) {
      proxy = this;
      if (resizeStart(e, proxy) === true) {
        return;
      }
    }
    if (this.targetEle && targetElement && targetElement.querySelector('.' + DIALOG_RESIZABLE)) {
      containerElement = this.target === ('body' || false || false) ? null : this.targetEle;
      maxWidth = this.targetEle.clientWidth;
      maxHeight = this.targetEle.clientHeight;
    }
    var target = sf.base.isNullOrUndefined(containerElement) ? document : containerElement;
    sf.base.EventHandler.add(target, 'mousemove', onMouseMove, this);
    sf.base.EventHandler.add(document, 'mouseup', onMouseUp, this);
    for (var i = 0; i < RESTRICT_LEFT.length; i++) {
      if (targetElement.classList.contains(RESTRICT_LEFT[i])) {
        setLeft = false;
      } else {
        setLeft = true;
      }
    }
  }
  /* istanbul ignore next */
  /**
   *
   * @param {MouseEvent} e - specifies the event
   * @returns {void}
   */
  function onMouseUp(e) {
    var touchMoveEvent = sf.base.Browser.info.name === 'msie' ? 'pointermove' : 'touchmove';
    var touchEndEvent = sf.base.Browser.info.name === 'msie' ? 'pointerup' : 'touchend';
    var target = sf.base.isNullOrUndefined(containerElement) ? document : containerElement;
    var eventName = sf.base.Browser.info.name === 'msie' ? 'pointerdown' : 'touchstart';
    sf.base.EventHandler.remove(target, 'mousemove', onMouseMove);
    sf.base.EventHandler.remove(target, touchMoveEvent, onMouseMove);
    sf.base.EventHandler.remove(target, eventName, onMouseMove);
    if (!sf.base.isNullOrUndefined(document.body.querySelector('.' + FOCUSED_HANDLER))) {
      document.body.querySelector('.' + FOCUSED_HANDLER).classList.remove(FOCUSED_HANDLER);
    }
    if (!sf.base.isNullOrUndefined(resizeEnd)) {
      proxy = this;
      resizeEnd(e, proxy);
    }
    sf.base.EventHandler.remove(document, 'mouseup', onMouseUp);
    sf.base.EventHandler.remove(document, touchEndEvent, onMouseUp);
  }
  /* istanbul ignore next */
  /**
   * @returns {void}
   */
  function calculateValues() {
    originalWidth = parseFloat(getComputedStyle(targetElement, null).getPropertyValue('width').replace('px', ''));
    originalHeight = parseFloat(getComputedStyle(targetElement, null).getPropertyValue('height').replace('px', ''));
    originalX = targetElement.getBoundingClientRect().left;
    originalY = targetElement.getBoundingClientRect().top;
  }
  /* istanbul ignore next */
  /**
   *
   * @param {MouseEvent} e - specifies the event
   * @returns {void}
   */
  function onTouchStart(e) {
    targetElement = e.target.parentElement;
    calculateValues();
    var dialogResizeElement = targetElement.classList.contains('e-dialog');
    if ((e.target.classList.contains(RESIZE_HANDLER) || e.target.classList.contains('e-dialog-border-resize')) && dialogResizeElement) {
      e.target.classList.add(FOCUSED_HANDLER);
    }
    var coordinates = e.touches ? e.changedTouches[0] : e;
    originalMouseX = coordinates.pageX;
    originalMouseY = coordinates.pageY;
    if (!sf.base.isNullOrUndefined(resizeStart)) {
      proxy = this;
      if (resizeStart(e, proxy) === true) {
        return;
      }
    }
    var touchMoveEvent = sf.base.Browser.info.name === 'msie' ? 'pointermove' : 'touchmove';
    var touchEndEvent = sf.base.Browser.info.name === 'msie' ? 'pointerup' : 'touchend';
    var target = sf.base.isNullOrUndefined(containerElement) ? document : containerElement;
    sf.base.EventHandler.add(target, touchMoveEvent, onMouseMove, this);
    sf.base.EventHandler.add(document, touchEndEvent, onMouseUp, this);
  }
  /* istanbul ignore next */
  /**
   *
   * @param {MouseEvent} e - specifies the event
   * @returns {void}
   */
  function onMouseMove(e) {
    if (e.target.classList.contains(RESIZE_HANDLER) && e.target.classList.contains(FOCUSED_HANDLER)) {
      selectedHandler = e.target;
    } else if (!sf.base.isNullOrUndefined(document.body.querySelector('.' + FOCUSED_HANDLER))) {
      selectedHandler = document.body.querySelector('.' + FOCUSED_HANDLER);
    }
    if (!sf.base.isNullOrUndefined(selectedHandler)) {
      var resizeTowards = '';
      for (var i = 0; i < elementClass.length; i++) {
        if (selectedHandler.classList.contains('e-' + elementClass[i])) {
          resizeTowards = elementClass[i];
        }
      }
      if (!sf.base.isNullOrUndefined(resize)) {
        proxy = this;
        resize(e, proxy);
      }
      switch (resizeTowards) {
        case 'south':
          resizeSouth(e);
          break;
        case 'north':
          resizeNorth(e);
          break;
        case 'west':
          resizeWest(e);
          break;
        case 'east':
          resizeEast(e);
          break;
        case 'south-east':
          resizeSouth(e);
          resizeEast(e);
          break;
        case 'south-west':
          resizeSouth(e);
          resizeWest(e);
          break;
        case 'north-east':
          resizeNorth(e);
          resizeEast(e);
          break;
        case 'north-west':
          resizeNorth(e);
          resizeWest(e);
          break;
        default:
          break;
      }
    }
  }
  /* istanbul ignore next */
  /**
   *
   * @param {HTMLElement} element - specifies the eleemnt
   * @returns {ClientRect} - returns the client
   */
  function getClientRectValues(element) {
    return element.getBoundingClientRect();
  }
  /* istanbul ignore next */
  // eslint-disable-next-line
  function resizeSouth(e) {
    var documentHeight = document.documentElement.clientHeight;
    var calculateValue = false;
    var coordinates = e.touches ? e.changedTouches[0] : e;
    var currentpageY = coordinates.pageY;
    var targetRectValues = getClientRectValues(targetElement);
    var containerRectValues;
    if (!sf.base.isNullOrUndefined(containerElement)) {
      containerRectValues = getClientRectValues(containerElement);
    }
    if (!sf.base.isNullOrUndefined(containerElement)) {
      calculateValue = true;
    } else if (sf.base.isNullOrUndefined(containerElement) && (documentHeight - currentpageY >= 0 || targetRectValues.top < 0)) {
      calculateValue = true;
    }
    var calculatedHeight = originalHeight + (currentpageY - originalMouseY);
    calculatedHeight = calculatedHeight > minHeight ? calculatedHeight : minHeight;
    var containerTop = 0;
    if (!sf.base.isNullOrUndefined(containerElement)) {
      containerTop = containerRectValues.top;
    }
    var borderValue = sf.base.isNullOrUndefined(containerElement) ? 0 : containerElement.offsetHeight - containerElement.clientHeight;
    var topWithoutborder = targetRectValues.top - containerTop - borderValue / 2;
    topWithoutborder = topWithoutborder < 0 ? 0 : topWithoutborder;
    if (targetRectValues.top > 0 && topWithoutborder + calculatedHeight > maxHeight) {
      calculateValue = false;
      if (targetElement.classList.contains(RESIZE_WITHIN_VIEWPORT)) {
        return;
      }
      targetElement.style.height = maxHeight - parseInt(topWithoutborder.toString(), 10) + 'px';
      return;
    }
    var targetTop = 0;
    if (calculateValue) {
      if (targetRectValues.top < 0 && documentHeight + (targetRectValues.height + targetRectValues.top) > 0) {
        targetTop = targetRectValues.top;
        if (calculatedHeight + targetTop <= 30) {
          calculatedHeight = targetRectValues.height - (targetRectValues.height + targetRectValues.top) + 30;
        }
      }
      if (calculatedHeight + targetRectValues.top >= maxHeight) {
        targetElement.style.height = targetRectValues.height + (documentHeight - (targetRectValues.height + targetRectValues.top)) + 'px';
      }
      var calculatedTop = sf.base.isNullOrUndefined(containerElement) ? targetTop : topWithoutborder;
      if (calculatedHeight >= minHeight && calculatedHeight + calculatedTop <= maxHeight) {
        targetElement.style.height = calculatedHeight + 'px';
      }
    }
  }
  /* istanbul ignore next */
  // eslint-disable-next-line
  function resizeNorth(e) {
    var calculateValue = false;
    var boundaryRectValues;
    var pageY = getEventType(e.type) === 'mouse' ? e.pageY : e.touches[0].pageY;
    var targetRectValues = getClientRectValues(targetElement);
    if (!sf.base.isNullOrUndefined(containerElement)) {
      boundaryRectValues = getClientRectValues(containerElement);
    }
    if (!sf.base.isNullOrUndefined(containerElement) && targetRectValues.top - boundaryRectValues.top > 0) {
      calculateValue = true;
    } else if (sf.base.isNullOrUndefined(containerElement) && pageY > 0) {
      calculateValue = true;
    }
    var currentHeight = originalHeight - (pageY - originalMouseY);
    if (calculateValue) {
      if (currentHeight >= minHeight && currentHeight <= maxHeight) {
        var containerTop = 0;
        if (!sf.base.isNullOrUndefined(containerElement)) {
          containerTop = boundaryRectValues.top;
        }
        var top_1 = originalY - containerTop + (pageY - originalMouseY);
        top_1 = top_1 > 0 ? top_1 : 1;
        targetElement.style.height = currentHeight + 'px';
        targetElement.style.top = top_1 + 'px';
      }
    }
  }
  /* istanbul ignore next */
  // eslint-disable-next-line
  function resizeWest(e) {
    var documentWidth = document.documentElement.clientWidth;
    var calculateValue = false;
    var rectValues;
    if (!sf.base.isNullOrUndefined(containerElement)) {
      rectValues = getClientRectValues(containerElement);
    }
    var pageX = getEventType(e.type) === 'mouse' ? e.pageX : e.touches[0].pageX;
    var targetRectValues = getClientRectValues(targetElement);
    var borderValue = sf.base.isNullOrUndefined(containerElement) ? 0 : containerElement.offsetWidth - containerElement.clientWidth;
    /* eslint-disable */
    var left = sf.base.isNullOrUndefined(containerElement) ? 0 : rectValues.left;
    var containerWidth = sf.base.isNullOrUndefined(containerElement) ? 0 : rectValues.width;
    /* eslint-enable */
    if (sf.base.isNullOrUndefined(resizeWestWidth)) {
      if (!sf.base.isNullOrUndefined(containerElement)) {
        resizeWestWidth = targetRectValues.left - left - borderValue / 2 + targetRectValues.width;
        resizeWestWidth = resizeWestWidth + (containerWidth - borderValue - resizeWestWidth);
      } else {
        resizeWestWidth = documentWidth;
      }
    }
    if (!sf.base.isNullOrUndefined(containerElement) && Math.floor(targetRectValues.left - rectValues.left + targetRectValues.width + (rectValues.right - targetRectValues.right)) - borderValue <= maxWidth) {
      calculateValue = true;
    } else if (sf.base.isNullOrUndefined(containerElement) && pageX >= 0) {
      calculateValue = true;
    }
    var calculatedWidth = originalWidth - (pageX - originalMouseX);
    if (setLeft) {
      calculatedWidth = calculatedWidth > resizeWestWidth ? resizeWestWidth : calculatedWidth;
    }
    if (calculateValue) {
      if (calculatedWidth >= minWidth && calculatedWidth <= maxWidth) {
        var containerLeft = 0;
        if (!sf.base.isNullOrUndefined(containerElement)) {
          containerLeft = rectValues.left;
        }
        var left_1 = originalX - containerLeft + (pageX - originalMouseX);
        left_1 = left_1 > 0 ? left_1 : 1;
        if (calculatedWidth !== previousWidth && setWidth) {
          targetElement.style.width = calculatedWidth + 'px';
        }
        if (setLeft) {
          targetElement.style.left = left_1 + 'px';
          if (left_1 === 1) {
            setWidth = false;
          } else {
            setWidth = true;
          }
        }
      }
    }
    previousWidth = calculatedWidth;
  }
  /* istanbul ignore next */
  // eslint-disable-next-line
  function resizeEast(e) {
    var documentWidth = document.documentElement.clientWidth;
    var calculateValue = false;
    var containerRectValues;
    if (!sf.base.isNullOrUndefined(containerElement)) {
      containerRectValues = getClientRectValues(containerElement);
    }
    var coordinates = e.touches ? e.changedTouches[0] : e;
    var pageX = coordinates.pageX;
    var targetRectValues = getClientRectValues(targetElement);
    if (!sf.base.isNullOrUndefined(containerElement) && (targetRectValues.left - containerRectValues.left + targetRectValues.width <= maxWidth || targetRectValues.right - containerRectValues.left >= targetRectValues.width)) {
      calculateValue = true;
    } else if (sf.base.isNullOrUndefined(containerElement) && documentWidth - pageX > 0) {
      calculateValue = true;
    }
    var calculatedWidth = originalWidth + (pageX - originalMouseX);
    var containerLeft = 0;
    if (!sf.base.isNullOrUndefined(containerElement)) {
      containerLeft = containerRectValues.left;
    }
    if (targetRectValues.left - containerLeft + calculatedWidth > maxWidth) {
      calculateValue = false;
      if (targetElement.classList.contains(RESIZE_WITHIN_VIEWPORT)) {
        return;
      }
      targetElement.style.width = maxWidth - (targetRectValues.left - containerLeft) + 'px';
    }
    if (calculateValue) {
      if (calculatedWidth >= minWidth && calculatedWidth <= maxWidth) {
        targetElement.style.width = calculatedWidth + 'px';
      }
    }
  }
  /* istanbul ignore next */
  /**
   *
   * @param {number} minimumHeight - specifies the number
   * @returns {void}
   */
  function setMinHeight(minimumHeight) {
    minHeight = minimumHeight;
  }
  /**
   *
   * @param {number} value - specifies the number value
   * @returns {void}
   */
  function setMaxWidth(value) {
    maxWidth = value;
  }
  /**
   *
   * @param {number} value - specifies the number value
   * @returns {void}
   */
  function setMaxHeight(value) {
    maxHeight = value;
  }
  /**
   * @returns {void}
   */
  function removeResize() {
    var handlers = targetElement.querySelectorAll('.' + RESIZE_HANDLER);
    for (var i = 0; i < handlers.length; i++) {
      sf.base.detach(handlers[i]);
    }
    var borderResizers = targetElement.querySelectorAll('.e-dialog-border-resize');
    if (!sf.base.isNullOrUndefined(borderResizers)) {
      for (var i = 0; i < borderResizers.length; i++) {
        sf.base.detach(borderResizers[i]);
      }
    }
  }
  exports.fit = fit;
  exports.isCollide = isCollide;
  exports.flip = flip;
  exports.calculateRelativeBasedPosition = calculateRelativeBasedPosition;
  exports.calculatePosition = calculatePosition;
  exports.createResize = createResize;
  exports.setMinHeight = setMinHeight;
  exports.setMaxWidth = setMaxWidth;
  exports.setMaxHeight = setMaxHeight;
  exports.removeResize = removeResize;
  return exports;
};
window.sf.popups = window.sf.base.extend({}, window.sf.popups, popupsbase({}));

/***/ }),

/***/ "./modules/sf-colorpicker.js":
/*!***********************************!*\
  !*** ./modules/sf-colorpicker.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.ColorPicker = function () {
  'use strict';

  var HSV_CONTAINER = '.e-hsv-container';
  var COLOR_PICKER = '.e-split-colorpicker';
  var COLOR_PALETTE = 'e-color-palette';
  var PALETTE = '.e-palette';
  var HSV_COLOR = '.e-hsv-color';
  var SET_OFFSET = 'SetOffset';
  var DROPDOWN_BTN = '.e-dropdown-btn';
  var HANDLER = '.e-handler';
  var MODEL = '.e-colorpicker.e-modal';
  var EMPTY = '';
  var CONTAINER = '.e-container';
  var SPLIT_BUTTON = '.sf-colorpicker';
  var INPUTS = '.e-selected-value';
  var CONTROL_BTN = '.e-switch-ctrl-btn';
  var PIXEL = 'px';
  var SCROLL = 'scroll';
  var DEFAULT = '100%';
  var PALETTES = 'e-palette';
  var TILE = "e-tile";
  var SELECT = 'e-selected';
  var CLICK = 'Click';
  var CLOSE = 'Close';
  var FOCUS = 'Focus';
  /**
   * Client side scripts for Blazor color picker
   */
  var SfColorPicker = /** @class */function () {
    function SfColorPicker(dataId, element, dotnetRef, inline) {
      this.dataId = dataId;
      this.element = element;
      this.dotnetRef = dotnetRef;
      this.inline = inline;
      window.sfBlazor.setCompInstance(this);
      if (inline) {
        this.addScrollEvents(true);
        this.setPaletteWidth(this.element.querySelector(CONTAINER), false);
      }
    }
    SfColorPicker.prototype.getOffset = function (element) {
      var colorPicker = element.querySelector(HSV_CONTAINER);
      if (!colorPicker) {
        return {
          IsDevice: sf.base.Browser.isDevice
        };
      }
      var offset = colorPicker.getBoundingClientRect();
      var color = colorPicker.querySelector(HSV_COLOR);
      var handler = colorPicker.querySelector(HANDLER);
      if (handler) {
        handler.focus();
      }
      return {
        Left: offset.left,
        Top: offset.top,
        Width: offset.width,
        Height: offset.height,
        Right: offset.right,
        ClientLeft: color.offsetLeft,
        ClientTop: color.offsetTop,
        ClientWidth: color.offsetWidth,
        ClientHeight: color.offsetHeight,
        IsDevice: sf.base.Browser.isDevice
      };
    };
    SfColorPicker.prototype.setOffset = function (element, zIndex) {
      var offset = this.getOffset(element);
      if (zIndex && !sf.base.Browser.isDevice) {
        this.setZIndex(this.element, zIndex, COLOR_PICKER);
        this.setZIndex(this.element, zIndex, DROPDOWN_BTN);
      }
      if (offset) {
        this.dotnetRef.invokeMethodAsync(SET_OFFSET, offset);
      }
    };
    SfColorPicker.prototype.setZIndex = function (element, zIndex, cls) {
      var btnEle = element.querySelector(cls);
      if (btnEle) {
        btnEle.style.zIndex = zIndex + 1 + EMPTY;
      }
    };
    SfColorPicker.prototype.removeZIndex = function () {
      var cls = COLOR_PICKER;
      var btncls = DROPDOWN_BTN;
      var Ele = this.element.querySelector(cls);
      var btnEle = this.element.querySelector(btncls);
      if (Ele) {
        Ele.style.zIndex = EMPTY;
      }
      if (btnEle) {
        btnEle.style.zIndex = EMPTY;
      }
    };
    SfColorPicker.prototype.setPaletteWidth = function (container, modeSwitch, zIndex) {
      if (sf.base.Browser.isDevice && !sf.base.isNullOrUndefined(zIndex)) {
        var model = container.querySelector(MODEL);
        if (model) {
          model.style.zIndex = zIndex - 1 + EMPTY;
          document.body.insertBefore(model, container.parentElement);
          model.style.display = EMPTY;
        }
      }
      if (container.querySelector(HSV_CONTAINER)) {
        container.style.width = EMPTY;
      } else {
        var width = parseInt(getComputedStyle(container).borderBottomWidth, 10);
        container.style.width = container.children[0].offsetWidth + width + width + PIXEL;
        var containers = container.querySelector(INPUTS);
        if (containers) {
          containers.style.width = DEFAULT;
          containers = container.querySelector(CONTROL_BTN);
          if (containers) {
            containers.style.width = DEFAULT;
          }
        }
      }
      if (modeSwitch) {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        var instance = window.sfBlazor.getCompInstance(this.dataId);
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        var colorPickerBtn = instance.element.querySelector(SPLIT_BUTTON);
        if (colorPickerBtn && sf.base.Browser.isDevice) {
          // eslint-disable-next-line @typescript-eslint/no-explicit-any
          instance = window.sfBlazor.getCompInstance(instance.element.parentElement.getAttribute('dataid'));
          if (instance) {
            instance.setPosition(instance.element.id.indexOf('imageEditor') === -1);
          }
        }
      }
    };
    SfColorPicker.prototype.scrollHandler = function (e) {
      if (!this.element.parentElement) {
        sf.base.EventHandler.remove(e.target, SCROLL, this.scrollHandler);
        return;
      }
      this.setOffset(this.element);
    };
    SfColorPicker.prototype.addScrollEvents = function (add) {
      var elements = sf.popups.getScrollableParent(this.element);
      for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
        var element = elements_1[_i];
        add ? sf.base.EventHandler.add(element, SCROLL, this.scrollHandler, this) : sf.base.EventHandler.remove(element, SCROLL, this.scrollHandler);
      }
      add ? sf.base.EventHandler.add(this.element, 'keydown', this.paletteKeyDown, this) : sf.base.EventHandler.remove(this.element, 'keydown', this.paletteKeyDown);
    };
    SfColorPicker.prototype.focusIn = function (element, inline) {
      if (inline) {
        var container = element.querySelector(CONTAINER);
        if (container) {
          if (container.classList.contains(COLOR_PALETTE)) {
            this.setFocus(PALETTE);
          } else {
            this.setFocus(HANDLER);
          }
        }
      } else {
        this.setFocus(COLOR_PICKER);
      }
    };
    SfColorPicker.prototype.setFocus = function (cls) {
      var btn = this.element.querySelector(cls);
      if (this.element && this.element.parentElement) {
        var dropdownInstance = window.sfBlazor.getCompInstance(this.element.parentElement.getAttribute('dataid'));
        if (dropdownInstance && dropdownInstance.element.classList.contains("e-dropdown-btn")) {
          btn = dropdownInstance.element;
        }
      }
      if (btn) {
        btn.focus();
      }
    };
    SfColorPicker.prototype.paletteKeyDown = function (e, Rtl) {
      var target = e.target;
      if (target.classList.contains(PALETTES) || target.classList.contains('e-tile')) {
        var selectedEle = void 0;
        var idx = void 0;
        var colorvalue = void 0;
        if (target.classList.contains('e-tile') && target.tagName === 'SPAN') {
          target = target.offsetParent.querySelector(PALETTE);
        }
        var tiles = [].slice.call(sf.base.selectAll('.' + TILE, target));
        var prevSelectedEle = tiles.filter(function (tile) {
          return tile.classList.contains('e-selected');
        }).pop();
        var container = target.parentElement;
        switch (!e.altKey && e.keyCode) {
          case 39:
            e.preventDefault();
            selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, Rtl ? -1 : 1)] : tiles[Rtl ? tiles.length - 1 : 0];
            colorvalue = selectedEle.getAttribute("aria-label");
            this.keySelectionChanges(selectedEle, container, colorvalue);
            break;
          case 37:
            e.preventDefault();
            selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, Rtl ? 1 : -1)] : tiles[Rtl ? 0 : tiles.length - 1];
            colorvalue = selectedEle.getAttribute("aria-label");
            this.keySelectionChanges(selectedEle, container, colorvalue);
            break;
          case 38:
            e.preventDefault();
            idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -10) : 0;
            selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - 10];
            colorvalue = selectedEle.getAttribute("aria-label");
            this.keySelectionChanges(selectedEle, container, colorvalue);
            break;
          case 40:
            e.preventDefault();
            idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, 10) : tiles.length - 1;
            if (tiles[idx]) {
              selectedEle = tiles[idx];
            } else {
              idx %= tiles.length;
              idx += tiles[tiles.length - 1].parentElement.childElementCount;
              selectedEle = tiles[idx];
            }
            colorvalue = selectedEle.getAttribute("aria-label");
            this.keySelectionChanges(selectedEle, container, colorvalue);
            break;
          case 13:
            e.preventDefault();
            if (prevSelectedEle) {
              var cValue = prevSelectedEle.getAttribute('aria-label');
              this.dotnetRef.invokeMethodAsync(CLOSE);
              this.dotnetRef.invokeMethodAsync(FOCUS);
            }
            break;
        }
      }
    };
    SfColorPicker.prototype.tilePosition = function (items, element, cIdx) {
      items = Array.prototype.slice.call(items);
      var n = items.length;
      var emptyCount = 10 - items[n - 1].parentElement.childElementCount;
      var idx = items.indexOf(element);
      idx += cIdx;
      if (idx < 0) {
        idx += n + emptyCount;
      } else {
        idx %= n + emptyCount;
      }
      return idx;
    };
    SfColorPicker.prototype.keySelectionChanges = function (newEle, container, colorvalue) {
      this.removeTileSelection(container);
      this.addTileSelection(newEle);
      this.dotnetRef.invokeMethodAsync(CLICK, colorvalue);
    };
    SfColorPicker.prototype.removeTileSelection = function (container) {
      var selectedEle = [].slice.call(sf.base.selectAll('.' + SELECT, container.children[0]));
      selectedEle.forEach(function (ele) {
        ele.classList.remove(SELECT);
        ele.setAttribute('aria-selected', 'false');
      });
    };
    SfColorPicker.prototype.addTileSelection = function (ele) {
      ele.classList.add(SELECT);
      ele.setAttribute('aria-selected', 'true');
    };
    return SfColorPicker;
  }();
  // eslint-disable-next-line @typescript-eslint/naming-convention, no-underscore-dangle, id-blacklist, id-match
  var ColorPicker = {
    initialize: function initialize(dataId, element, dotnetRef, inline) {
      if (!sf.base.isNullOrUndefined(element)) {
        new SfColorPicker(dataId, element, dotnetRef, inline);
        var instance = window.sfBlazor.getCompInstance(dataId);
        return instance.getOffset(element);
      }
      return null;
    },
    getOffset: function getOffset(dataId, container) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.setPaletteWidth(container, true);
        return instance.getOffset(container);
      }
      return null;
    },
    focusIn: function focusIn(dataId, element, inline) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.focusIn(element, inline);
      }
    },
    destroy: function destroy(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.addScrollEvents(false);
      }
    }
  };
  return ColorPicker;
}();

/***/ }),

/***/ "./modules/sf-contextmenu.js":
/*!***********************************!*\
  !*** ./modules/sf-contextmenu.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.ContextMenu = function () {
  'use strict';

  var MENUITEM$1 = 'e-menu-item';
  var FOCUSED$1 = 'e-focused';
  var SELECTED$1 = 'e-selected';
  var CONTAINER = 'e-menu-container';
  var MENU$1 = 'e-contextmenu';
  var SUBMENU = 'e-ul';
  var SEPARATOR = 'e-separator';
  var DISABLED = 'e-disabled';
  var HIDE = 'e-menu-hide';
  var MENUPARENT = 'e-menu-parent';
  var RTL = 'e-rtl';
  var HAMBURGER = '.e-hamburger';
  var SCROLLMENU$1 = '.e-menu-vscroll';
  var NONE$1 = 'none';
  var DOT$1 = '.';
  var ESC = 27;
  var ENTER = 13;
  var UP = 38;
  var DOWN = 40;
  var LEFT = 37;
  var RIGHT = 39;
  /**
   * Keyboard action handler common for menu and context menu.
   * @hidden
   */
  function keyActionHandler(container, target, keyCode, menuId) {
    if (keyCode === 9 && menuId) {
      keyCode = RIGHT;
    }
    if (keyCode === DOWN || keyCode === UP) {
      var index = void 0;
      var ul = void 0;
      var focusedLi = void 0;
      if (target.classList.contains(MENUPARENT)) {
        ul = target;
        focusedLi = ul.querySelector("" + DOT$1 + MENUITEM$1 + DOT$1 + FOCUSED$1);
        if (focusedLi) {
          index = Array.prototype.indexOf.call(ul.children, focusedLi);
          index = keyCode === DOWN ? index === ul.childElementCount - 1 ? 0 : index + 1 : index === 0 ? ul.childElementCount - 1 : index - 1;
        } else {
          index = 0;
        }
        index = isValidLI(ul, index, keyCode === DOWN);
      } else if (target.classList.contains(MENUITEM$1)) {
        ul = target.parentElement;
        focusedLi = ul.querySelector("" + DOT$1 + MENUITEM$1 + DOT$1 + FOCUSED$1);
        index = Array.prototype.indexOf.call(ul.children, focusedLi ? focusedLi : target);
        index = keyCode === DOWN ? index === ul.childElementCount - 1 ? 0 : index + 1 : index === 0 ? ul.childElementCount - 1 : index - 1;
        index = isValidLI(ul, index, keyCode === DOWN);
      }
      if (ul && index !== -1) {
        ul.children[index].focus();
      }
    } else if (((container.classList.contains(RTL) ? keyCode === RIGHT : keyCode === LEFT) || keyCode === ESC || keyCode === RIGHT && !target.classList.contains("e-menu-caret-icon") && menuId || keyCode === ENTER && sf.base.closest(target, DOT$1 + CONTAINER)) && (target.classList.contains(SUBMENU) || target.classList.contains(MENUITEM$1) && !target.parentElement.classList.contains(MENU$1))) {
      var menuContainer = void 0;
      if (menuId) {
        menuContainer = sf.base.select(menuId);
      }
      var ul = target.classList.contains(SUBMENU) ? target : target.parentElement;
      var menu = sf.base.closest(ul, SCROLLMENU$1);
      var selectedLi = void 0;
      var previousUl = menu ? menu.previousElementSibling : ul.previousElementSibling;
      if (menuContainer && (!previousUl || keyCode === ENTER)) {
        selectedLi = sf.base.select("" + DOT$1 + MENUITEM$1 + DOT$1 + SELECTED$1, menuContainer);
        menu = sf.base.select(SCROLLMENU$1, container);
        // tslint:disable-next-line:no-any
        if (menu) {
          menuContainer.blazor__instance.destroyScroll(NONE$1);
        }
      } else {
        var hamburgerMenu = sf.base.closest(ul, HAMBURGER);
        if (hamburgerMenu) {
          selectedLi = sf.base.select("" + DOT$1 + MENUITEM$1 + DOT$1 + SELECTED$1, hamburgerMenu);
        } else {
          selectedLi = sf.base.select("" + DOT$1 + MENUITEM$1 + DOT$1 + SELECTED$1, previousUl);
        }
      }
      if (selectedLi) {
        selectedLi.focus();
      }
    }
  }
  function isValidLI(ul, index, isKeyDown, count) {
    if (count === void 0) {
      count = 0;
    }
    var cli = ul.children[index];
    if (count === ul.childElementCount) {
      return -1;
    }
    if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {
      index = isKeyDown ? index === ul.childElementCount - 1 ? 0 : index + 1 : index === 0 ? ul.childElementCount - 1 : index - 1;
      count++;
    }
    cli = ul.children[index];
    if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {
      index = isValidLI(ul, index, isKeyDown);
    }
    return index;
  }
  var TRANSPARENT = 'e-transparent';
  var MENU = 'e-menu-parent';
  var MENUITEM = 'e-menu-item';
  var FOCUSED = 'e-focused';
  var SELECTED = 'e-selected';
  var CLOSE = 'CloseMenuAsync';
  var KEYDOWN = 'keydown';
  var SCROLLMENU = '.e-menu-vscroll';
  var SCROLLNAV = '.e-scroll-nav';
  var SPACE = ' ';
  var HIDDEN = 'hidden';
  var OPENMENU = 'OpenContextMenuAsync';
  var PIXEL = 'px';
  var MOUSEDOWN = 'mousedown touchstart';
  var MOUSEOVER = 'mouseover';
  var SCROLL = 'scroll';
  var NONE = 'none';
  var HASH = '#';
  var EMPTY = '';
  var DOT = '.';
  var TARGET = 'Target';
  var FILTER = 'Filter';
  var SHOWON = 'ShowOn';
  var CARET = 'e-caret';
  /**
   * Client side scripts for Blazor context menu
   */
  var SfContextMenu = /** @class */function () {
    function SfContextMenu(dataId, element, target, filter, showOn, closeOn, enableScrolling, dotnetRef) {
      this.dataId = dataId;
      this.element = element;
      this.target = target;
      this.filter = filter;
      this.showOn = showOn;
      this.closeOn = closeOn;
      this.dotnetRef = dotnetRef;
      this.enableScrolling = enableScrolling;
      window.sfBlazor.setCompInstance(this);
      this.addContextMenuEvent();
      this.addEventListener();
    }
    SfContextMenu.prototype.addContextMenuEvent = function (add) {
      if (add === void 0) {
        add = true;
      }
      var target;
      if (this.target) {
        var targetElems = sf.base.selectAll(this.target);
        if (targetElems.length) {
          for (var i = 0, len = targetElems.length; i < len; i++) {
            target = targetElems[i];
            if (add) {
              if (sf.base.Browser.isIos) {
                new sf.base.Touch(target, {
                  tapHold: this.touchHandler.bind(this)
                });
              } else {
                sf.base.EventHandler.add(target, this.showOn, this.cmenuHandler, this);
              }
            } else {
              if (sf.base.Browser.isIos) {
                var touchModule = sf.base.getInstance(target, sf.base.Touch);
                if (touchModule) {
                  touchModule.destroy();
                }
              } else {
                sf.base.EventHandler.remove(target, this.showOn, this.cmenuHandler);
              }
            }
          }
          if (sf.base.isNullOrUndefined(this.targetElement)) {
            this.targetElement = target;
          }
          if (add) {
            sf.base.EventHandler.add(this.targetElement, SCROLL, this.scrollHandler, this);
            for (var _i = 0, _a = sf.popups.getScrollableParent(this.targetElement); _i < _a.length; _i++) {
              var parent_1 = _a[_i];
              sf.base.EventHandler.add(parent_1, SCROLL, this.scrollHandler, this);
            }
          } else {
            var scrollableParents = void 0;
            if (this.targetElement.parentElement) {
              sf.base.EventHandler.remove(this.targetElement, SCROLL, this.scrollHandler);
              scrollableParents = sf.popups.getScrollableParent(this.targetElement);
            } else {
              scrollableParents = sf.popups.getScrollableParent(target);
            }
            for (var _b = 0, scrollableParents_1 = scrollableParents; _b < scrollableParents_1.length; _b++) {
              var parent_2 = scrollableParents_1[_b];
              sf.base.EventHandler.remove(parent_2, SCROLL, this.scrollHandler);
            }
            this.targetElement = null;
          }
        }
      }
    };
    SfContextMenu.prototype.scrollHandler = function () {
      if (sf.base.select(DOT + MENU, this.element)) {
        this.dotnetRef.invokeMethodAsync(CLOSE, 0, false, true, false);
        if (this.enableScrolling) {
          var proxy_1 = this;
          setTimeout(function () {
            proxy_1.destroyScroll();
          }, 100);
        }
      }
    };
    SfContextMenu.prototype.vscrollHandler = function () {
      var scrollEle = this.element.querySelector(".e-menu-parent");
      if (scrollEle != null && scrollEle.classList.contains("e-transparent")) {
        scrollEle.classList.remove("e-transparent");
      }
    };
    SfContextMenu.prototype.touchHandler = function (e) {
      this.cmenuHandler(e.originalEvent);
    };
    SfContextMenu.prototype.keyDownHandler = function (e) {
      var classList = e.target.classList;
      if (classList.contains(MENUITEM) || classList.contains(MENU)) {
        e.preventDefault();
      }
      keyActionHandler(this.element, e.target, e.keyCode, this.menuId);
    };
    SfContextMenu.prototype.cmenuHandler = function (e) {
      this.cmTarget = e.target;
      if (this.filter) {
        var canOpen = false;
        var filter = this.filter.split(SPACE);
        for (var i = 0, len = filter.length; i < len; i++) {
          if (sf.base.closest(e.target, filter[i])) {
            canOpen = true;
            break;
          }
        }
        if (!canOpen) {
          return;
        }
      }
      e.preventDefault();
      e.stopPropagation();
      var left = e.changedTouches ? e.changedTouches[0].clientX : e.clientX;
      var top = e.changedTouches ? e.changedTouches[0].clientY : e.clientY;
      if (this.showOn === "mouseover") {
        var rect = this.cmTarget.getBoundingClientRect();
        if (rect.right > left && left > rect.right - 5) {
          left = left - 10;
        }
        if (rect.bottom > top && top > rect.bottom - 5) {
          top = top - 10;
        }
      }
      if (this.closeOn !== MOUSEDOWN) {
        sf.base.EventHandler.remove(e.target, this.showOn, this.cmenuHandler);
        if (this.closeOn === "mouseleave") {
          sf.base.EventHandler.add(e.target, this.closeOn, this.mouseLeaveHandler, this);
        } else {
          sf.base.EventHandler.add(document, this.closeOn, this.delegateMouseDownHandler, this);
        }
      }
      this.dotnetRef.invokeMethodAsync(OPENMENU, Math.ceil(left), Math.ceil(top), this.cmTarget.id);
    };
    SfContextMenu.prototype.mouseLeaveHandler = function (e, isMouseOver) {
      var rect = this.cmTarget.getBoundingClientRect();
      var top = rect.top < e.clientY && rect.bottom - 3 > e.clientY;
      var left = rect.left < e.clientX && rect.right > e.clientX;
      if (!left || !top || isMouseOver) {
        this.dotnetRef.invokeMethodAsync(CLOSE, 0, false, true, false);
        if (this.enableScrolling) {
          var proxy_2 = this;
          setTimeout(function () {
            proxy_2.destroyScroll();
          }, 100);
        }
        sf.base.EventHandler.remove(this.cmTarget, this.closeOn, this.mouseLeaveHandler);
        sf.base.EventHandler.add(this.cmTarget, this.showOn, this.cmenuHandler, this);
      }
    };
    SfContextMenu.prototype.clickHandler = function (isUnwire) {
      if (isUnwire) {
        sf.base.EventHandler.add(this.cmTarget, this.showOn, this.cmenuHandler, this);
        if (this.closeOn === 'mouseleave') {
          sf.base.EventHandler.remove(this.cmTarget, this.closeOn, this.mouseLeaveHandler);
        } else {
          sf.base.EventHandler.remove(document, this.closeOn, this.delegateMouseDownHandler);
        }
      }
      if (this.enableScrolling) {
        var proxy_3 = this;
        setTimeout(function () {
          proxy_3.destroyScroll(null, true);
        }, 100);
      }
    };
    SfContextMenu.prototype.contextMenuPosition = function (left, top, rtl, subMenu, isCollision, scrollHeight) {
      var cmenu = this.hideMenu(true);
      if (!cmenu) {
        return;
      }
      this.subMenuOpen = false;
      this.setBlankIconStyle(cmenu, rtl);
      var cmenuOffset = cmenu.getBoundingClientRect();
      var cmenuWidth = this.getMenuWidth(cmenu, cmenuOffset.width, rtl);
      if (subMenu && sf.base.Browser.isDevice) {
        cmenu.style.width = Math.ceil(cmenuWidth) + PIXEL;
        cmenu.style.visibility = EMPTY;
        return;
      }
      if (isCollision) {
        if (top + cmenuOffset.height > document.documentElement.clientHeight) {
          var newTop = document.documentElement.clientHeight - cmenuOffset.height - 20;
          if (newTop > document.documentElement.clientTop) {
            top = newTop;
          }
        }
        if (left + cmenuWidth > document.documentElement.clientWidth) {
          var newLeft = document.documentElement.clientWidth - cmenuWidth - 20;
          if (newLeft > document.documentElement.clientLeft) {
            left = newLeft;
          }
        }
      }
      cmenu = this.updateScroll(scrollHeight, cmenu);
      var ul = cmenu.classList.contains('e-menu-parent') ? cmenu : sf.base.select('.e-menu-parent', cmenu);
      this.element.style.top = Math.ceil(top + 1) + pageYOffset + PIXEL;
      this.element.style.left = Math.ceil(left + 1) + pageXOffset + PIXEL;
      cmenu.style.width = Math.ceil(cmenuWidth) + PIXEL;
      this.element.style.zIndex = sf.popups.getZindexPartial(this.element).toString();
      cmenu.style.visibility = EMPTY;
      ul.style.visibility = EMPTY;
      cmenu.focus();
    };
    SfContextMenu.prototype.setBlankIconStyle = function (menu, isRtl) {
      var blankIconList = [].slice.call(menu.getElementsByClassName('e-blankicon'));
      var cssProp = isRtl ? {
        padding: 'paddingRight',
        cssSelector: 'padding-right',
        margin: 'marginLeft'
      } : {
        padding: 'paddingLeft',
        cssSelector: 'padding-left',
        margin: 'marginRight'
      };
      [].slice.call(menu.querySelectorAll('.e-menu-item[style*="' + cssProp.cssSelector + '"]:not(.e-blankicon)')).forEach(function (li) {
        // tslint:disable-next-line:no-any
        li.style[cssProp.padding] = EMPTY;
      });
      if (!blankIconList.length) {
        return;
      }
      var iconLi = menu.querySelector('.e-menu-item:not(.e-blankicon):not(.e-separator)');
      var icon = iconLi.querySelector('.e-menu-icon');
      if (!icon) {
        return;
      }
      var iconCssProps = getComputedStyle(icon);
      var iconSize = parseInt(iconCssProps.fontSize, 10);
      if (!!parseInt(iconCssProps.width, 10) && parseInt(iconCssProps.width, 10) > iconSize) {
        iconSize = parseInt(iconCssProps.width, 10);
      }
      // tslint:disable
      var size = iconSize + parseInt(iconCssProps[cssProp.margin], 10) + parseInt(getComputedStyle(iconLi)[cssProp.padding], 10) + "px";
      blankIconList.forEach(function (li) {
        li.style[cssProp.padding] = size;
      });
      // tslint:enable
    };
    SfContextMenu.prototype.getMenuWidth = function (cmenu, width, isRtl) {
      var caretIcon = cmenu.getElementsByClassName(CARET)[0];
      if (caretIcon) {
        width += parseInt(getComputedStyle(caretIcon)[isRtl ? 'marginRight' : 'marginLeft'], 10);
      }
      return width < 120 ? 120 : width;
    };
    SfContextMenu.prototype.addEventListener = function () {
      this.delegateMouseDownHandler = this.mouseDownHandler.bind(this);
      this.delegateMouseOverHandler = this.mouseOverHandler.bind(this);
      if (this.closeOn === MOUSEDOWN) {
        sf.base.EventHandler.add(document, MOUSEDOWN, this.delegateMouseDownHandler, this);
      }
      sf.base.EventHandler.add(document, MOUSEOVER, this.delegateMouseOverHandler, this);
      sf.base.EventHandler.add(this.element, KEYDOWN, this.keyDownHandler, this);
    };
    SfContextMenu.prototype.removeEventListener = function () {
      sf.base.EventHandler.remove(document, MOUSEDOWN, this.delegateMouseDownHandler);
      sf.base.EventHandler.remove(document, MOUSEOVER, this.delegateMouseOverHandler);
      sf.base.EventHandler.remove(this.element, KEYDOWN, this.keyDownHandler);
    };
    SfContextMenu.prototype.mouseDownHandler = function (e) {
      var target = e.target;
      if (target.tagName === 'DIV' || target.tagName === 'SPAN') {
        if (target.className.indexOf('scroll') > -1 || target.className.indexOf('arrow') > -1) {
          return;
        }
      }
      if (!document.getElementById(this.element.id)) {
        this.removeEventListener();
        return;
      }
      var closestElem;
      if (/^\d+$/.test(this.element.id) || !this.element.id.includes('sfcontextmenu')) {
        closestElem = this.getClosest(e.target, this.element.id);
      } else {
        closestElem = sf.base.closest(e.target, HASH + this.element.id);
      }
      if (!closestElem && (sf.base.isNullOrUndefined(this.menuId) || !sf.base.closest(e.target, this.menuId)) && sf.base.select(DOT + MENU, this.element)) {
        if (!sf.base.closest(sf.base.select(DOT + MENU, this.element), '.e-dropdown-popup')) {
          this.dotnetRef.invokeMethodAsync(CLOSE, 0, false, true, false);
        }
        if (this.enableScrolling) {
          var proxy_4 = this;
          setTimeout(function () {
            proxy_4.destroyScroll();
          }, 100);
        }
        if (this.closeOn !== MOUSEDOWN) {
          sf.base.EventHandler.remove(document, this.closeOn, this.delegateMouseDownHandler);
          sf.base.EventHandler.add(this.cmTarget, this.showOn, this.cmenuHandler, this);
        }
      }
    };
    SfContextMenu.prototype.getClosest = function (target, id) {
      var closestElement = null;
      var currentElement = target;
      while (currentElement) {
        if (currentElement.id === id) {
          closestElement = currentElement;
          break;
        }
        currentElement = currentElement.parentElement;
      }
      return closestElement;
    };
    SfContextMenu.prototype.isHavingChild = function (target) {
      if (target && target.tagName === 'LI' && target.className.indexOf('e-menu-item') < 0) {
        target = target.closest('.e-menu-item');
      }
      if (target && target.tagName === 'LI' && target.className.indexOf('e-menu-item') > -1 && target.className.indexOf('e-menu-caret-icon') > -1) {
        return true;
      }
      return false;
    };
    SfContextMenu.prototype.mouseOverHandler = function (e) {
      var target = e.target;
      if (target.tagName === 'DIV' || target.tagName === 'SPAN') {
        if (target.className.indexOf('scroll') > -1 || target.className.indexOf('arrow') > -1) {
          return;
        }
      }
      if (!document.getElementById(this.element.id)) {
        this.removeEventListener();
        return;
      }
      var menus = [].slice.call(sf.base.selectAll(DOT + MENU, this.element));
      if (!menus.length) {
        return;
      }
      var scrollNav = sf.base.closest(target, SCROLLNAV);
      if (this.enableScrolling && !this.isHavingChild(target)) {
        var proxy = this;
        setTimeout(function () {
          var subMenus = [].slice.call(sf.base.selectAll(SCROLLMENU, this.element));
          for (var i = 0; i < subMenus.length; i++) {
            if (target && target.tagName === 'LI' && target.className.indexOf('e-menu-item') < 0) {
              target = target.closest('.e-menu-item');
            }
            if (target && target.parentElement != subMenus[i].querySelectorAll('.e-menu-parent')[0] && i == subMenus.length - 1) {
              proxy.destroyScroll(subMenus[i]);
            }
          }
        }, 100);
      }
      if (this.subMenuOpen && (menus.length > 1 || !sf.base.isNullOrUndefined(this.menuId) && !scrollNav)) {
        var closestEle = void 0;
        if (/^\d+$/.test(this.element.id) || !this.element.id.includes('sfcontextmenu')) {
          closestEle = this.getClosest(target, this.element.id);
        } else {
          closestEle = sf.base.closest(target, HASH + this.element.id);
        }
        if (!closestEle && (sf.base.isNullOrUndefined(this.menuId) || !sf.base.closest(target, this.menuId)) || scrollNav) {
          var index_1 = 1;
          if (!sf.base.isNullOrUndefined(this.menuId)) {
            index_1 = 0;
            if (scrollNav) {
              index_1 = menus.indexOf(sf.base.select(DOT + MENU, scrollNav.parentElement)) + 1;
              if (index_1 === menus.length) {
                return;
              }
            }
          }
          this.dotnetRef.invokeMethodAsync(CLOSE, index_1, false, true, false);
          if (this.enableScrolling) {
            var proxy_5 = this;
            setTimeout(function () {
              for (var i = index_1; i < menus.length; i++) {
                proxy_5.destroyScroll(menus[i]);
              }
            }, 100);
          }
          if (this.closeOn === 'mouseleave') {
            this.mouseLeaveHandler(e);
            sf.base.EventHandler.remove(this.menuTarget, this.closeOn, this.menuMouseLeave);
          }
          if (!sf.base.isNullOrUndefined(this.menuId) && !sf.base.closest(target, SCROLLNAV)) {
            this.destroyMenuScroll(null);
          }
        }
        var closestElem = void 0;
        if (/^\d+$/.test(this.element.id) || !this.element.id.includes('sfcontextmenu')) {
          closestElem = this.getClosest(target, this.element.id);
        } else {
          closestElem = sf.base.closest(target, HASH + this.element.id);
        }
        if (!sf.base.isNullOrUndefined(this.menuId) && (closestElem || sf.base.closest(target, this.menuId)) && sf.base.closest(target, DOT + MENUITEM) && !sf.base.closest(target, DOT + SELECTED)) {
          this.destroyMenuScroll(sf.base.closest(target, DOT + MENU));
        }
      } else if (this.closeOn === 'mouseleave' && target.classList.contains('e-menu-item')) {
        this.menuTarget = target.parentElement;
        sf.base.EventHandler.add(this.menuTarget, this.closeOn, this.menuMouseLeave, this);
      }
      if (!this.openAsMenu) {
        var activeEle = document.activeElement;
        var closestElem = void 0;
        if (/^\d+$/.test(this.element.id) || !this.element.id.includes('sfcontextmenu')) {
          closestElem = this.getClosest(activeEle, this.element.id);
        } else {
          closestElem = sf.base.closest(activeEle, "" + HASH + this.element.id);
        }
        if (!closestElem && menus.length && activeEle.tagName == "BODY") {
          var lastChild = this.getLastMenu();
          if (lastChild) {
            lastChild.focus();
          }
        }
      }
    };
    SfContextMenu.prototype.menuMouseLeave = function (e) {
      var rect = this.menuTarget.getBoundingClientRect();
      var top = rect.top < e.clientY && rect.bottom > e.clientY;
      var left = rect.left < e.clientX && rect.right > e.clientX;
      if (!left || !top) {
        this.mouseLeaveHandler(e, true);
        sf.base.EventHandler.remove(this.menuTarget, this.closeOn, this.menuMouseLeave);
      }
    };
    SfContextMenu.prototype.destroyMenuScroll = function (menu) {
      if (!sf.base.select(SCROLLMENU, this.element)) {
        return;
      }
      var instance = window.sfBlazor.getCompInstance(this.dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.destroyScroll(NONE, menu);
      }
    };
    SfContextMenu.prototype.hideMenu = function (first) {
      var cMenu;
      if (first) {
        cMenu = sf.base.select(DOT + MENU, this.element);
        if (!cMenu || sf.base.isNullOrUndefined(this.element.parentElement)) {
          return null;
        }
        if (this.element.parentElement !== document.body) {
          document.body.appendChild(this.element);
        }
      } else {
        var menus = sf.base.selectAll(DOT + MENU, this.element);
        if (menus.length < 2) {
          return null;
        }
        cMenu = menus[menus.length - 1];
      }
      cMenu.style.width = EMPTY;
      cMenu.style.visibility = HIDDEN;
      cMenu.classList.remove(TRANSPARENT);
      return cMenu;
    };
    SfContextMenu.prototype.subMenuPosition = function (cmenu, isRtl, showOnClick, isNull, scrollHeight, isContextMenu, enterKey) {
      if (!cmenu) {
        return;
      }
      var menus = sf.base.selectAll(DOT + MENU, this.element);
      var parentLi = menus[menus.length - 2].querySelector("." + MENUITEM + "." + SELECTED);
      var parentOffset = parentLi.getBoundingClientRect();
      var containerOffset = this.element.getBoundingClientRect();
      var menu = cmenu.classList.contains(MENU) ? cmenu : sf.base.select(DOT + MENU, cmenu);
      this.setBlankIconStyle(menu, isRtl);
      var curUlOffset = menu.getBoundingClientRect();
      var cmenuWidth = this.getMenuWidth(menu, curUlOffset.width, isRtl);
      var left;
      var borderLeft;
      if (isRtl) {
        borderLeft = parseInt(getComputedStyle(menu).borderWidth, 10);
        left = parentOffset.left - cmenuWidth - containerOffset.left;
      } else if (this.closeOn == 'mouseleave') {
        left = parentOffset.right - containerOffset.left - 10;
      } else {
        left = parentOffset.right - containerOffset.left;
      }
      var top = parentOffset.top - containerOffset.top;
      if (isRtl) {
        if (parentOffset.left - borderLeft - cmenuWidth < document.documentElement.clientLeft) {
          if (parentOffset.right + cmenuWidth < document.documentElement.clientWidth) {
            left = parentOffset.right - containerOffset.left;
          }
        }
      } else if (parentOffset.right + cmenuWidth > document.documentElement.clientWidth) {
        var newLeft = parentOffset.left - cmenuWidth;
        if (newLeft > document.documentElement.clientLeft) {
          left = newLeft - containerOffset.left;
          if (this.closeOn == 'mouseleave') {
            left = newLeft - containerOffset.left + 10;
          }
        }
      }
      var height = scrollHeight || curUlOffset.height;
      if (parentOffset.top + height > document.documentElement.clientHeight) {
        var newTop = document.documentElement.clientHeight - height - 20;
        if (newTop > document.documentElement.clientTop) {
          top = newTop - containerOffset.top;
        }
      }
      if (isContextMenu) {
        cmenu = this.updateScroll(scrollHeight, cmenu);
        if (cmenu.className.indexOf('scroll') > -1) {
          menu.style.left = 0 + PIXEL;
          menu.style.top = 0 + PIXEL;
        }
      }
      this.subMenuOpen = !showOnClick;
      cmenu.style.left = Math.ceil(left) + PIXEL;
      cmenu.style.top = Math.ceil(top) + PIXEL;
      cmenu.style.width = Math.ceil(cmenuWidth) + PIXEL;
      menu.style.visibility = EMPTY;
      var focusedLi = menu.querySelector("" + DOT + MENUITEM + DOT + FOCUSED);
      if (focusedLi) {
        focusedLi.focus();
      } else if (enterKey) {
        menu.focus();
      }
      if (isNull) {
        this.openAsMenu = true;
      }
    };
    SfContextMenu.prototype.updateScroll = function (scrollHeight, menu) {
      if (this.enableScrolling) {
        this.destroyScroll(menu);
        if (scrollHeight > 0 && menu) {
          menu = sf.navigations.addScrolling(sf.base.createElement, this.element, menu, "vscroll", false, scrollHeight);
        }
        var scrollElement = this.element.querySelector('.e-vscroll-bar');
        if (scrollElement) {
          sf.base.EventHandler.add(scrollElement, "scroll", this.vscrollHandler, this);
        }
      }
      return menu;
    };
    SfContextMenu.prototype.destroyScroll = function (curMenu, isParent) {
      var scrollElements = sf.base.selectAll('.e-menu-vscroll', this.element);
      scrollElements.forEach(function (element) {
        if (isParent && !element.querySelector('ul') || !isParent) {
          sf.navigations.destroyScroll(sf.base.getInstance(element, sf.navigations.VScroll), element, curMenu);
        }
      });
    };
    SfContextMenu.prototype.getLastMenu = function () {
      var menus = sf.base.selectAll(DOT + MENU, this.element);
      return menus.length ? menus[menus.length - 1] : null;
    };
    SfContextMenu.prototype.onPropertyChanged = function (key, result) {
      switch (key) {
        case TARGET:
          this.addContextMenuEvent(false);
          this.target = result;
          this.addContextMenuEvent();
          break;
        case FILTER:
          this.filter = result;
          break;
        case SHOWON:
          this.addContextMenuEvent(false);
          this.showOn = result;
          this.addContextMenuEvent();
          break;
      }
    };
    SfContextMenu.prototype.destroy = function (refElement) {
      this.removeEventListener();
      this.addContextMenuEvent(false);
      if (refElement && refElement.parentElement && refElement.previousElementSibling !== this.element) {
        refElement.parentElement.insertBefore(this.element, refElement);
      }
      if ((!refElement || !refElement.parentElement) && this.element.parentElement && this.element.parentElement === document.body) {
        document.body.removeChild(this.element);
      }
    };
    SfContextMenu.prototype.updateProperty = function (showItemOnClick, menu) {
      if (menu) {
        this.menuId = HASH + menu.id;
      }
      this.subMenuOpen = !showItemOnClick;
    };
    return SfContextMenu;
  }();
  // tslint:disable-next-line:variable-name
  var ContextMenu = {
    initialize: function initialize(dataId, element, target, filter, showOn, closeOn, enableScrolling, dotnetRef) {
      if (!sf.base.isNullOrUndefined(element)) {
        new SfContextMenu(dataId, element, target, filter, showOn, closeOn, enableScrolling, dotnetRef);
      }
    },
    contextMenuPosition: function contextMenuPosition(dataId, left, top, isRtl, subMenu, isCollision, scrollHeight) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.contextMenuPosition(left, top, isRtl, subMenu, isCollision, scrollHeight);
      }
    },
    subMenuPosition: function subMenuPosition(dataId, isRtl, showOnClick, isNull, scrollHeight) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        var cmenu = instance.hideMenu();
        instance.subMenuPosition(cmenu, isRtl, showOnClick, isNull, scrollHeight, true);
      }
    },
    onPropertyChanged: function onPropertyChanged(dataId, key, result) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.onPropertyChanged(key, result);
      }
    },
    click: function click(dataId, isUnwire) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.clickHandler(isUnwire);
      }
    },
    destroy: function destroy(dataId, refElement) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.destroy(refElement);
      }
    }
  };
  return ContextMenu;
}();

/***/ }),

/***/ "./modules/sf-dialog.js":
/*!******************************!*\
  !*** ./modules/sf-dialog.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.Dialog = function () {
  'use strict';

  var TAB = 9;
  var ENTER = 13;
  var ESCAPE = 27;
  var BTN = 'e-btn';
  var HIDE = 'e-hide';
  var FADE = 'e-fade';
  var ICON = 'e-icons';
  var POPUP = 'e-popup';
  var DIALOG = 'e-dialog';
  var DEVICE = 'e-device';
  var PRIMARY = 'e-primary';
  var DLG_MODAL = 'e-dlg-modal';
  var DRAGGABLE = 'e-draggable';
  var POPUP_OPEN = 'e-popup-open';
  var DLG_TARGET = 'e-dlg-target';
  var DLG_CONTENT = 'e-dlg-content';
  var DLG_OVERLAY = 'e-dlg-overlay';
  var DLG_RESIZABLE = 'e-dlg-resizable';
  var DLG_FULLSCREEN = 'e-dlg-fullscreen';
  var FOOTER_CONTENT = 'e-footer-content';
  var SCROLL_DISABLED = 'e-scroll-disabled';
  var DLG_REF_ELEMENT = 'e-dlg-ref-element';
  var DLG_RESTRICT_LEFT = 'e-restrict-left';
  var DLG_RESIZE_HANDLE = 'e-resize-handle';
  var DLG_RESIZE_VIEWPORT = 'e-resize-viewport';
  var DLG_CLOSE_ICON_BTN = 'e-dlg-closeicon-btn';
  var DLG_HEADER_CONTENT = 'e-dlg-header-content';
  var SfDialog = /** @class */function () {
    function SfDialog(options) {
      /* Component variables */
      this.popupObj = null;
      /* Number variables */
      this.zIndex = 1000;
      this.height = "auto";
      this.width = "100%";
      this.resizeIconDirection = 'SouthEast';
      this.visible = true;
      this.isModal = false;
      this.enableRtl = false;
      this.enableResize = false;
      this.closeOnEscape = true;
      this.allowDragging = false;
      this.allowMaxHeight = true;
      this.allowPrerender = false;
      this.hasFocusableNode = false;
      this.openedEnabled = false;
      this.closedEnabled = false;
      this.onDragEnabled = false;
      this.onDragStartEnabled = false;
      this.onDragStopEnabled = false;
      this.resizingEnabled = false;
      this.onResizeStartEnabled = false;
      this.onResizeStopEnabled = false;
      this.isOpenFullScreen = false;
      this.enablePersistence = false;
      this.dlgContainer = undefined;
      /* Complex variables */
      this.animationSettings = {
        delay: 0,
        duration: 400,
        effect: 'Fade'
      };
      this.position = {
        X: 'center',
        Y: 'center'
      };
      window.sfBlazor = window.sfBlazor;
      this.updateContext(options);
      this.isInitialLoad = options.isInitial;
      window.sfBlazor.setCompInstance(this);
      this.initialize();
    }
    SfDialog.prototype.updateContext = function (dlgObj) {
      sf.base.extend(this, this, dlgObj);
    };
    SfDialog.prototype.initialize = function () {
      this.calculatezIndex = this.zIndex === 1000;
      this.render();
      this.element.classList.remove('e-blazor-hidden');
      this.setWidth();
      this.setMinHeight();
      if (this.enableResize) {
        this.setResize(true);
        if (this.animationSettings.effect === 'None' && sf.base.animationMode !== 'Enable' || sf.base.animationMode === 'Disable') {
          this.getMinHeight();
        }
      }
      this.bindEvent(this.element);
    };
    SfDialog.prototype.setWidth = function () {
      if (this.width === '100%') {
        this.element.style.width = '';
      } else {
        sf.base.setStyleAttribute(this.element, {
          'width': sf.base.formatUnit(this.width)
        });
        if (this.width === 'auto') {
          this.refreshPosition();
        }
      }
    };
    SfDialog.prototype.setHeight = function () {
      sf.base.setStyleAttribute(this.element, {
        'height': sf.base.formatUnit(this.height)
      });
    };
    SfDialog.prototype.setMinHeight = function () {
      if (this.minHeight !== '') {
        sf.base.setStyleAttribute(this.element, {
          'minHeight': sf.base.formatUnit(this.minHeight)
        });
      }
    };
    SfDialog.prototype.render = function () {
      var _this = this;
      this.checkPositionData();
      this.targetEle = this.getTargetEle(this.target);
      if (sf.base.Browser.isDevice) {
        sf.base.addClass([this.element], DEVICE);
      }
      if (sf.base.isNullOrUndefined(this.headerContent)) {
        this.headerContent = this.element.querySelector('.' + DLG_HEADER_CONTENT);
      }
      if (sf.base.isNullOrUndefined(this.contentEle)) {
        this.contentEle = this.element.querySelector('.' + DLG_CONTENT);
      }
      this.setMaxHeight();
      if (this.zIndex === 1000) {
        this.setzIndex(this.element, false);
      }
      if (this.allowDragging && !sf.base.isNullOrUndefined(this.headerContent)) {
        this.setAllowDragging();
      }
      if (this.isModal && sf.base.isNullOrUndefined(this.dlgContainer)) {
        this.dlgContainer = this.element.parentElement;
        this.dlgOverlay = this.element.parentElement.getElementsByClassName(DLG_OVERLAY)[0];
      }
      if (!sf.base.isNullOrUndefined(this.element.parentElement) && (this.allowPrerender || !this.allowPrerender && (!this.isInitialLoad || this.visible && this.isInitialLoad))) {
        var parentEle = this.isModal ? this.dlgContainer.parentElement : this.element.parentElement;
        this.refElement = sf.base.createElement('div', {
          className: DLG_REF_ELEMENT
        });
        parentEle.insertBefore(this.refElement, this.isModal ? this.dlgContainer : this.element);
      }
      if (!sf.base.isNullOrUndefined(this.targetEle)) {
        this.isModal ? this.targetEle.appendChild(this.dlgContainer) : this.targetEle.appendChild(this.element);
      }
      this.popupObj = new sf.popups.Popup(this.element, {
        height: this.height,
        width: this.width,
        zIndex: this.zIndex,
        relateTo: this.targetEle,
        actionOnScroll: 'none',
        enableRtl: this.enableRtl,
        position: {
          X: this.position.X,
          Y: this.position.Y
        },
        open: function open() {
          if (_this.enableResize) {
            _this.resetResizeIcon();
          }
          if (_this.openedEnabled) {
            _this.dotNetRef.invokeMethodAsync('OpenEvent', _this.element.classList.toString());
          } else {
            _this.focusContent();
          }
        },
        close: function close() {
          if (_this.isModal) {
            sf.base.addClass([_this.dlgOverlay], FADE);
            _this.dlgContainer.style.display = 'none';
          }
          _this.hasFocusableNode = false;
          if (_this.closedEnabled) {
            _this.dotNetRef.invokeMethodAsync('CloseEvent', _this.element.classList.toString());
          } else {
            _this.popupCloseHandler();
          }
        }
      });
      if (this.isModal) {
        this.positionChange();
      }
    };
    SfDialog.prototype.checkPositionData = function () {
      if (!sf.base.isNullOrUndefined(this.position)) {
        if (this.isNumberString(this.position.X)) {
          this.position.X = parseFloat(this.position.X);
        }
        if (this.isNumberString(this.position.Y)) {
          this.position.Y = parseFloat(this.position.Y);
        }
      }
    };
    SfDialog.prototype.isNumberString = function (val) {
      return !sf.base.isNullOrUndefined(val) && typeof val !== 'number' && /^[-+]?\d*\.?\d+$/.test(val);
    };
    SfDialog.prototype.getTargetEle = function (target) {
      var targetEle;
      if (!sf.base.isNullOrUndefined(target) && typeof target === 'string') {
        targetEle = document.querySelector(target);
      }
      return sf.base.isNullOrUndefined(targetEle) ? document.body : targetEle;
    };
    SfDialog.prototype.setMaxHeight = function () {
      if (!this.allowMaxHeight) {
        return;
      }
      var display = this.element.style.display;
      this.element.style.display = 'none';
      this.element.style.maxHeight = !sf.base.isNullOrUndefined(this.target) && this.targetEle.offsetHeight < window.innerHeight ? this.targetEle.offsetHeight - 20 + 'px' : window.innerHeight - 20 + 'px';
      this.element.style.display = display;
      if (sf.base.Browser.isIE && this.height === 'auto' && !sf.base.isNullOrUndefined(this.contentEle) && this.element.offsetHeight < this.contentEle.offsetHeight) {
        this.element.style.height = 'inherit';
      }
    };
    SfDialog.prototype.setzIndex = function (zIndexElement, setPopupZindex) {
      this.zIndex = sf.popups.getZindexPartial(zIndexElement);
      if (setPopupZindex) {
        this.popupObj.zIndex = this.zIndex;
      }
    };
    SfDialog.prototype.updatezIndex = function () {
      this.popupObj.zIndex = this.zIndex;
      if (this.isModal) {
        this.setOverlayZindex(this.zIndex);
      }
      this.calculatezIndex = this.element.style.zIndex !== this.zIndex.toString() ? false : true;
    };
    SfDialog.prototype.updateTarget = function () {
      this.targetEle = this.getTargetEle(this.target);
      this.popupObj.relateTo = this.targetEle;
      if (this.dragObj) {
        this.dragObj.dragArea = this.targetEle;
      }
      this.setMaxHeight();
      if (this.isModal) {
        this.targetEle.appendChild(this.dlgContainer);
      }
      if (this.enableResize) {
        this.setResize(false);
      }
    };
    SfDialog.prototype.resetResizeIcon = function () {
      var dialogConHeight = this.getMinHeight();
      if (this.targetEle.offsetHeight < dialogConHeight) {
        var resizeIcon = this.element.querySelector('.' + this.resizeIconDirection);
        if (!sf.base.isNullOrUndefined(resizeIcon)) {
          resizeIcon.style.bottom = '-' + dialogConHeight.toString() + 'px';
        }
      }
    };
    SfDialog.prototype.getMouseEvtArgs = function (e) {
      return {
        altKey: e.altKey,
        button: e.button,
        buttons: e.buttons,
        clientX: e.clientX,
        clientY: e.clientY,
        ctrlKey: e.ctrlKey,
        detail: e.detail,
        metaKey: e.metaKey,
        screenX: e.screenX,
        screenY: e.screenY,
        shiftKey: e.shiftKey,
        type: e.type
      };
    };
    SfDialog.prototype.setAllowDragging = function () {
      var _this = this;
      var proxy = this;
      this.dragObj = new sf.base.Draggable(this.element, {
        clone: false,
        isDragScroll: true,
        abort: '.' + DLG_CLOSE_ICON_BTN,
        handle: '.' + DLG_HEADER_CONTENT,
        dragStart: function dragStart(e) {
          if (_this.onDragStartEnabled) {
            proxy.dotNetRef.invokeMethodAsync('DragStartEvent', {
              target: {
                ID: e.target.id
              },
              event: proxy.getMouseEvtArgs(e.event)
            });
          }
          e.bindEvents(e.dragElement);
        },
        drag: function drag(e) {
          if (_this.onDragEnabled) {
            proxy.dotNetRef.invokeMethodAsync('DragEvent', {
              target: {
                ID: e.target.id
              },
              event: proxy.getMouseEvtArgs(e.event)
            });
          }
        },
        dragStop: function dragStop(e) {
          if (proxy.isModal) {
            if (!sf.base.isNullOrUndefined(proxy.position)) {
              proxy.dlgContainer.classList.remove('e-dlg-' + proxy.position.X + '-' + proxy.position.Y);
            }
            var htmlElement = document.querySelector('html');
            var dirValue = htmlElement.getAttribute('dir');
            proxy.element.style.position = !sf.base.isNullOrUndefined(dirValue) && dirValue === 'rtl' ? proxy.element.style.position : 'relative';
          }
          if (_this.onDragStopEnabled) {
            proxy.dotNetRef.invokeMethodAsync('DragStopEvent', {
              target: {
                ID: e.target.id
              },
              event: proxy.getMouseEvtArgs(e.event)
            });
          }
          proxy.element.classList.remove(DLG_RESTRICT_LEFT);
          _this.updatePersistData();
        }
      });
      if (!sf.base.isNullOrUndefined(this.targetEle)) {
        this.dragObj.dragArea = this.targetEle;
      }
    };
    SfDialog.prototype.positionChange = function () {
      if (this.isModal) {
        if (!isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y))) {
          this.setPopupPosition();
        } else if (!isNaN(parseFloat(this.position.X)) && isNaN(parseFloat(this.position.Y)) || isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y))) {
          this.setPopupPosition();
        } else {
          this.element.style.top = '0px';
          this.element.style.left = '0px';
          this.dlgContainer.classList.add('e-dlg-' + this.position.X + '-' + this.position.Y);
        }
      } else {
        this.setPopupPosition();
      }
    };
    SfDialog.prototype.setPopupPosition = function () {
      this.popupObj.setProperties({
        position: {
          X: this.position.X,
          Y: this.position.Y
        }
      });
    };
    SfDialog.prototype.setEnableRTL = function () {
      var resizeElement = this.element.querySelector('.' + DLG_RESIZE_HANDLE);
      if (!sf.base.isNullOrUndefined(resizeElement) && resizeElement.parentElement === this.element) {
        sf.popups.removeResize();
        this.setResize(false);
      }
    };
    SfDialog.prototype.setResize = function (initialLoad) {
      if (this.enableResize) {
        if (!sf.base.isNullOrUndefined(this.element.querySelector('.' + ICON + '.' + DLG_RESIZE_HANDLE))) {
          return;
        }
        var computedHeight = getComputedStyle(this.element).minHeight;
        var computedWidth = getComputedStyle(this.element).minWidth;
        if (this.isModal && this.enableRtl) {
          this.element.classList.add(DLG_RESTRICT_LEFT);
        } else if (this.isModal && (this.target === document.body || this.target === 'body')) {
          this.element.classList.add(DLG_RESIZE_VIEWPORT);
        }
        sf.popups.createResize({
          element: this.element,
          direction: this.resizeIconDirection,
          minHeight: parseInt(computedHeight.slice(0, computedWidth.indexOf('p')), 10),
          maxHeight: this.targetEle.clientHeight,
          minWidth: parseInt(computedWidth.slice(0, computedWidth.indexOf('p')), 10),
          maxWidth: this.targetEle.clientWidth,
          boundary: this.target === 'body' || this.target === 'document.body' ? null : this.targetEle,
          resizeBegin: this.onResizeStart.bind(this),
          resizeComplete: this.onResizeComplete.bind(this),
          resizing: this.onResizing.bind(this),
          proxy: this
        });
        this.wireWindowResizeEvent();
      } else {
        if (initialLoad) {
          return;
        }
        sf.popups.removeResize();
        this.unWireWindowResizeEvent();
        if (this.isModal) {
          this.element.classList.remove(DLG_RESTRICT_LEFT);
        } else {
          this.element.classList.remove(DLG_RESIZE_VIEWPORT);
        }
      }
    };
    SfDialog.prototype.getMinHeight = function () {
      var computedHeaderHeight = '0px';
      var computedFooterHeight = '0px';
      if (!sf.base.isNullOrUndefined(this.element.querySelector('.' + DLG_HEADER_CONTENT))) {
        computedHeaderHeight = getComputedStyle(this.headerContent).height;
      }
      var footerEle = sf.base.select('.' + FOOTER_CONTENT, this.element);
      if (!sf.base.isNullOrUndefined(footerEle)) {
        computedFooterHeight = getComputedStyle(footerEle).height;
      }
      var headerHeight = parseInt(computedHeaderHeight.slice(0, computedHeaderHeight.indexOf('p')), 10);
      var footerHeight = parseInt(computedFooterHeight.slice(0, computedFooterHeight.indexOf('p')), 10);
      sf.popups.setMinHeight(headerHeight + 30 + (isNaN(footerHeight) ? 0 : footerHeight));
      return headerHeight + 30 + footerHeight;
    };
    SfDialog.prototype.changePosition = function (dlgObj) {
      if (this.isModal && this.dlgContainer.classList.contains('e-dlg-' + this.position.X + '-' + this.position.Y)) {
        this.dlgContainer.classList.remove('e-dlg-' + this.position.X + '-' + this.position.Y);
      }
      this.updateContext(dlgObj);
      this.checkPositionData();
      this.positionChange();
      this.updatePersistData();
    };
    SfDialog.prototype.setOverlayZindex = function (zIndexValue) {
      var zIndex;
      if (sf.base.isNullOrUndefined(zIndexValue)) {
        zIndex = parseInt(this.element.style.zIndex, 10) ? parseInt(this.element.style.zIndex, 10) : this.zIndex;
      } else {
        zIndex = zIndexValue;
      }
      this.dlgOverlay.style.zIndex = (zIndex - 1).toString();
      this.dlgContainer.style.zIndex = zIndex.toString();
    };
    SfDialog.prototype.focusContent = function () {
      var element = this.getAutoFocusNode(this.element);
      var node = !sf.base.isNullOrUndefined(element) ? element : this.element;
      node.focus();
      this.hasFocusableNode = true;
    };
    SfDialog.prototype.getAutoFocusNode = function (container) {
      var node = container.querySelector('.' + DLG_CLOSE_ICON_BTN);
      var value = '[autofocus]';
      var items = container.querySelectorAll(value);
      var validNode = this.getValidFocusNode(items);
      this.primaryButtonEle = this.element.getElementsByClassName(PRIMARY)[0];
      if (!sf.base.isNullOrUndefined(validNode)) {
        node = validNode;
      } else {
        validNode = this.focusableElements(this.contentEle);
        if (!sf.base.isNullOrUndefined(validNode)) {
          return node = validNode;
        } else if (!sf.base.isNullOrUndefined(this.primaryButtonEle)) {
          return this.element.querySelector('.' + PRIMARY);
        }
      }
      return node;
    };
    SfDialog.prototype.getValidFocusNode = function (items) {
      var node;
      for (var u = 0; u < items.length; u++) {
        node = items[u];
        if ((node.clientHeight > 0 || node.tagName.toLowerCase() === 'a' && node.hasAttribute('href')) && node.tabIndex > -1 && !node.disabled && !this.disableElement(node, '[disabled],[aria-disabled="true"],[type="hidden"]')) {
          return node;
        } else {
          node = null;
        }
      }
      return node;
    };
    SfDialog.prototype.disableElement = function (element, t) {
      var elementMatch = element ? element.matches || element.webkitMatchesSelector || element.msGetRegionContent : null;
      if (elementMatch) {
        for (; element; element = element.parentNode) {
          if (element instanceof Element && elementMatch.call(element, t)) {
            return element;
          }
        }
      }
      return null;
    };
    SfDialog.prototype.focusableElements = function (content) {
      if (!sf.base.isNullOrUndefined(content)) {
        var value = 'input,select,textarea,button,a,[contenteditable="true"],[tabindex]';
        var items = content.querySelectorAll(value);
        return this.getValidFocusNode(items);
      }
      return null;
    };
    SfDialog.prototype.getMaxHeight = function () {
      return this.element.style.maxHeight;
    };
    SfDialog.prototype.OnPropertyChanged = function (props) {
      this.updateContext(props);
      for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {
        var key = _a[_i];
        switch (key) {
          case 'width':
            sf.base.setStyleAttribute(this.element, {
              'width': sf.base.formatUnit(this.width)
            });
            this.refreshPosition();
            this.updatePersistData();
            break;
          case 'height':
            this.setHeight();
            this.refreshPosition();
            this.updatePersistData();
            break;
          case 'minHeight':
            this.setMinHeight();
            break;
          case 'target':
            this.updateTarget();
            break;
          case 'zIndex':
            this.updatezIndex();
            break;
          case 'allowDragging':
            if (this.allowDragging) {
              this.setAllowDragging();
            } else {
              this.destroyDraggable();
            }
            break;
          case 'enableRtl':
            this.setEnableRTL();
            break;
          case 'enableResize':
            this.setResize(false);
            break;
        }
      }
    };
    SfDialog.prototype.fullScreen = function (enable) {
      if (enable) {
        sf.base.addClass([this.element], DLG_FULLSCREEN);
        if (!this.isModal) {
          this.element.style.top = document.scrollingElement.scrollTop + 'px';
        }
        var display = this.element.style.display;
        this.element.style.display = 'none';
        this.element.style.maxHeight = !sf.base.isNullOrUndefined(this.target) ? this.targetEle.offsetHeight + 'px' : window.innerHeight + 'px';
        this.element.style.display = display;
        sf.base.addClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
        if (this.allowDragging && !sf.base.isNullOrUndefined(this.dragObj)) {
          this.dragObj.destroy();
          this.dragObj = undefined;
        }
      } else {
        sf.base.removeClass([this.element], DLG_FULLSCREEN);
        sf.base.removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
        if (this.allowDragging && !sf.base.isNullOrUndefined(this.headerContent) && sf.base.isNullOrUndefined(this.dragObj)) {
          this.setAllowDragging();
        }
      }
    };
    SfDialog.prototype.show = function (isFullScreen, maxHeight) {
      this.isOpenFullScreen = isFullScreen;
      if (!this.element.classList.contains(POPUP_OPEN) || !sf.base.isNullOrUndefined(isFullScreen)) {
        if (!sf.base.isNullOrUndefined(isFullScreen)) {
          this.fullScreen(isFullScreen);
        }
        if (this.element.style.maxHeight !== maxHeight) {
          this.allowMaxHeight = false;
          this.element.style.maxHeight = maxHeight;
        }
        this.storeActiveElement = document.activeElement;
        this.element.tabIndex = -1;
        if (this.isModal && sf.base.isNullOrUndefined(this.dlgOverlay)) {
          this.dlgOverlay = this.element.parentElement.querySelector('.' + DLG_OVERLAY);
        }
        if (this.isModal && !sf.base.isNullOrUndefined(this.dlgOverlay)) {
          this.dlgOverlay.style.display = 'block';
          this.dlgContainer.style.display = 'flex';
          sf.base.removeClass([this.dlgOverlay], FADE);
          if (!sf.base.isNullOrUndefined(this.targetEle)) {
            if (this.targetEle === document.body) {
              this.dlgContainer.style.position = 'fixed';
            } else {
              this.dlgContainer.style.position = 'absolute';
            }
            this.dlgOverlay.style.position = 'absolute';
            this.element.style.position = 'relative';
            sf.base.addClass([this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);
          } else {
            sf.base.addClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
          }
        }
        var openAnimation = {
          name: this.animationSettings.effect === 'None' && sf.base.animationMode === 'Enable' ? 'Fade' : this.animationSettings.effect + 'In',
          duration: this.animationSettings.duration,
          delay: this.animationSettings.delay
        };
        var zIndexElement = this.isModal ? this.element.parentElement : this.element;
        if (this.calculatezIndex) {
          this.setzIndex(zIndexElement, true);
          sf.base.setStyleAttribute(this.element, {
            'zIndex': this.zIndex
          });
          if (this.isModal) {
            this.setOverlayZindex(this.zIndex);
          }
        }
        this.animationSettings.effect === 'None' && sf.base.animationMode !== 'Enable' || sf.base.animationMode === 'Disable' ? this.popupObj.show() : this.popupObj.show(openAnimation);
      }
    };
    SfDialog.prototype.hide = function () {
      if (this.isModal || this.isOpenFullScreen) {
        sf.base.removeClass([this.targetEle, document.body], [DLG_TARGET, SCROLL_DISABLED]);
      }
      var closeAnimation = {
        name: this.animationSettings.effect === 'None' && sf.base.animationMode === 'Enable' ? 'Fade' : this.animationSettings.effect + 'Out',
        duration: this.animationSettings.duration,
        delay: this.animationSettings.delay
      };
      this.animationSettings.effect === 'None' && sf.base.animationMode !== 'Enable' || sf.base.animationMode === 'Disable' ? this.popupObj.hide() : this.popupObj.hide(closeAnimation);
      if (!this.allowPrerender) {
        this.destroyRefElement();
      }
      return this.element.classList.toString();
    };
    SfDialog.prototype.refreshPosition = function () {
      if (this.isModal && isNaN(parseFloat(this.position.X)) && isNaN(parseFloat(this.position.Y))) {
        this.element.style.top = this.element.style.left = "0px";
        this.dlgContainer.classList.add('e-dlg-' + this.position.X + '-' + this.position.Y);
      } else {
        this.popupObj.refreshPosition();
      }
    };
    SfDialog.prototype.getDimension = function () {
      var dialogWidth = this.element.offsetWidth;
      var dialogHeight = this.element.offsetHeight;
      return {
        width: dialogWidth,
        height: dialogHeight
      };
    };
    SfDialog.prototype.destroyDraggable = function () {
      if (!sf.base.isNullOrUndefined(this.dragObj)) {
        this.dragObj.destroy();
        this.dragObj = undefined;
      }
    };
    SfDialog.prototype.destroyRefElement = function () {
      if (!sf.base.isNullOrUndefined(this.refElement) && !sf.base.isNullOrUndefined(this.refElement.parentElement)) {
        this.refElement.parentElement.insertBefore(this.isModal ? this.dlgContainer : this.element, this.refElement);
        sf.base.detach(this.refElement);
        this.refElement = undefined;
      }
    };
    SfDialog.prototype.destroy = function (dlgObj, isClientApp) {
      this.updateContext(dlgObj);
      var attrs = ['role', 'aria-modal', 'aria-labelledby', 'aria-describedby', 'aria-grabbed', 'tabindex', 'style'];
      if (!sf.base.isNullOrUndefined(this.cssClass) && this.cssClass !== '') {
        var classes = this.cssClass.split(' ');
        sf.base.removeClass([this.element], classes);
      }
      if (sf.base.Browser.isDevice) {
        sf.base.removeClass([this.element], DEVICE);
      }
      sf.base.removeClass([this.getTargetEle(this.target)], [DLG_TARGET, SCROLL_DISABLED]);
      this.unBindEvent(this.element);
      if (this.element.classList.contains(DLG_FULLSCREEN)) {
        sf.base.removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
      }
      if (this.isModal) {
        sf.base.removeClass([!sf.base.isNullOrUndefined(this.targetEle) ? this.targetEle : document.body], SCROLL_DISABLED);
      }
      if (this.element.classList.contains(DLG_RESIZABLE)) {
        this.element.classList.remove(DLG_RESIZABLE);
      }
      if (this.element.classList.contains(DRAGGABLE)) {
        this.dragObj.destroy();
        this.dragObj = undefined;
      }
      if (this.element.classList.contains(POPUP)) {
        this.popupObj.destroy();
        this.popupObj = undefined;
      }
      this.destroyRefElement();
      if (isClientApp) {
        for (var i = 0; i < this.element.children.length; i++) {
          this.element.children[i].classList.add(HIDE);
        }
      } else {
        if (!sf.base.isNullOrUndefined(this.element.children)) {
          for (var i = 0; i <= this.element.children.length; i++) {
            i = i - i;
            sf.base.detach(this.element.children[i]);
          }
        }
      }
      for (var i = 0; i < attrs.length; i++) {
        this.element.removeAttribute(attrs[i]);
      }
      if (this.isModal) {
        sf.base.detach(this.element.nextElementSibling);
        var parent_1 = this.element.parentElement;
        parent_1.removeAttribute('class');
        parent_1.removeAttribute('style');
        this.element.classList.remove(DLG_MODAL);
      }
      this.element.classList.remove(DIALOG);
    };
    SfDialog.prototype.bindEvent = function (element) {
      sf.base.EventHandler.add(element, 'keydown', this.keyDown, this);
      if (sf.base.Browser.isDevice) {
        sf.base.EventHandler.add(window, 'orientationchange', this.orientationOnChange, this);
      }
    };
    SfDialog.prototype.unBindEvent = function (element) {
      sf.base.EventHandler.remove(element, 'keydown', this.keyDown);
      if (sf.base.Browser.isDevice) {
        sf.base.EventHandler.remove(window, 'orientationchange', this.orientationOnChange);
      }
    };
    SfDialog.prototype.wireWindowResizeEvent = function () {
      window.addEventListener('resize', this.windowResizeHandler.bind(this));
    };
    SfDialog.prototype.unWireWindowResizeEvent = function () {
      window.removeEventListener('resize', this.windowResizeHandler.bind(this));
    };
    SfDialog.prototype.orientationOnChange = function () {
      var proxy = this;
      this.element.style.display = 'none';
      setTimeout(function () {
        sf.popups.setMaxWidth(proxy.targetEle.clientWidth);
        sf.popups.setMaxHeight(proxy.targetEle.clientHeight);
        proxy.setMaxHeight();
        proxy.refreshPosition();
        proxy.element.style.display = '';
      }, 250);
    };
    /* Event handlers begin */
    SfDialog.prototype.popupCloseHandler = function () {
      var activeEle = document.activeElement;
      if (!sf.base.isNullOrUndefined(activeEle) && !sf.base.isNullOrUndefined(activeEle.blur)) {
        activeEle.blur();
      }
      if (!sf.base.isNullOrUndefined(this.storeActiveElement) && !sf.base.isNullOrUndefined(this.storeActiveElement.focus)) {
        this.storeActiveElement.focus();
      }
    };
    SfDialog.prototype.windowResizeHandler = function () {
      sf.popups.setMaxWidth(this.targetEle.clientWidth);
      sf.popups.setMaxHeight(this.targetEle.clientHeight);
      this.setMaxHeight();
    };
    SfDialog.prototype.onResizeStart = function (args, dialogObj) {
      var evtArgs = this.getMouseEvtArgs(args);
      if (this.onResizeStartEnabled) {
        this.dotNetRef.invokeMethodAsync('ResizeStartEvent', evtArgs);
      }
    };
    SfDialog.prototype.onResizing = function (args, dialogObj) {
      if (this.resizingEnabled) {
        this.dotNetRef.invokeMethodAsync('ResizingEvent', this.getMouseEvtArgs(args));
      }
    };
    SfDialog.prototype.onResizeComplete = function (args, dialogObj) {
      if (this.onResizeStopEnabled) {
        this.dotNetRef.invokeMethodAsync('ResizeStopEvent', this.getMouseEvtArgs(args));
      }
      this.updatePersistData();
    };
    SfDialog.prototype.updatePersistData = function () {
      if (this.enablePersistence) {
        window.localStorage.setItem(this.dataId, JSON.stringify({
          width: this.element.style.width,
          height: this.element.style.height,
          X: parseFloat(this.element.style.left),
          Y: parseFloat(this.element.style.top)
        }));
      }
    };
    SfDialog.prototype.getFocusElement = function (target) {
      var value = 'input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]';
      var items = target.querySelectorAll(value);
      return items[items.length - 1];
    };
    SfDialog.prototype.keyDown = function (e) {
      var _this = this;
      if (e.keyCode === TAB && this.isModal) {
        var btn = void 0;
        var btns = void 0;
        var footer = this.element.querySelector('.' + FOOTER_CONTENT);
        if (!sf.base.isNullOrUndefined(footer)) {
          btns = footer.querySelectorAll('button');
          if (!sf.base.isNullOrUndefined(btn) && btns.length > 0) {
            btn = btns[btns.length - 1];
          }
          if (sf.base.isNullOrUndefined(btn) && footer.childNodes.length > 0) {
            btn = this.getFocusElement(footer);
          }
        }
        if (sf.base.isNullOrUndefined(footer) && !sf.base.isNullOrUndefined(this.contentEle)) {
          btn = this.getFocusElement(this.contentEle);
        }
        if (!sf.base.isNullOrUndefined(btn) && document.activeElement === btn && !e.shiftKey) {
          e.preventDefault();
          this.focusableElements(this.element).focus();
        }
        if (document.activeElement === this.focusableElements(this.element) && e.shiftKey) {
          e.preventDefault();
          if (!sf.base.isNullOrUndefined(btn)) {
            btn.focus();
          }
        }
      }
      if (e.keyCode === ESCAPE && this.closeOnEscape) {
        // 'document.querySelector' is used to find the elements rendered based on body
        if (!document.querySelector('.e-popup-open:not(.e-dialog, .e-tooltip-wrap, .e-toolbar-pop)')) {
          this.dotNetRef.invokeMethodAsync('CloseDialog', {
            altKey: e.altKey,
            ctrlKey: e.ctrlKey,
            code: e.code,
            key: e.key,
            location: e.location,
            repeat: e.repeat,
            shiftKey: e.shiftKey,
            metaKey: e.metaKey,
            type: e.type
          });
        }
      }
      if (this.hasFocusableNode) {
        var element = document.activeElement;
        var isTagName = ['input', 'textarea'].indexOf(element.tagName.toLowerCase()) > -1;
        var isContentEdit = false;
        if (!isTagName) {
          isContentEdit = element.hasAttribute('contenteditable') && element.getAttribute('contenteditable') === 'true';
        }
        if (e.keyCode === ENTER && !e.ctrlKey && element.tagName.toLowerCase() !== 'textarea' && isTagName && !sf.base.isNullOrUndefined(this.primaryButtonEle) || e.keyCode === ENTER && e.ctrlKey && (element.tagName.toLowerCase() === 'textarea' || isContentEdit) && !sf.base.isNullOrUndefined(this.primaryButtonEle)) {
          setTimeout(function () {
            var primaryButton = _this.element.querySelector('.' + FOOTER_CONTENT + ' button.' + BTN + '.' + PRIMARY);
            if (primaryButton !== null) {
              primaryButton.click();
            }
          });
        }
      }
    };
    return SfDialog;
  }();
  // eslint-disable-next-line
  var Dialog = {
    initialize: function initialize(options) {
      if (options.dataId) {
        new SfDialog(options);
      }
    },
    getClassList: function getClassList(element) {
      return element && element.classList.toString();
    },
    getMaxHeight: function getMaxHeight(dataId) {
      return dataId && window.sfBlazor.getCompInstance(dataId).getMaxHeight();
    },
    changePosition: function changePosition(dlgObj) {
      if (dlgObj.dataId) {
        window.sfBlazor.getCompInstance(dlgObj.dataId).changePosition(dlgObj);
      }
    },
    updateAnimation: function updateAnimation(dlgObj) {
      if (dlgObj.dataId) {
        window.sfBlazor.getCompInstance(dlgObj.dataId).updateContext(dlgObj);
      }
    },
    focusContent: function focusContent(dataId) {
      dataId && window.sfBlazor.getCompInstance(dataId).focusContent();
    },
    refreshPosition: function refreshPosition(dataId) {
      dataId && window.sfBlazor.getCompInstance(dataId).refreshPosition();
    },
    getDimension: function getDimension(dataId) {
      return dataId && window.sfBlazor.getCompInstance(dataId).getDimension();
    },
    popupCloseHandler: function popupCloseHandler(dataId) {
      dataId && window.sfBlazor.getCompInstance(dataId).popupCloseHandler();
    },
    propertyChanged: function propertyChanged(changedProps) {
      if (changedProps.dataId) {
        window.sfBlazor.getCompInstance(changedProps.dataId).OnPropertyChanged(changedProps);
      }
    },
    show: function show(options) {
      if (options.dataId) {
        window.sfBlazor.getCompInstance(options.dataId).show(options.fullScreen, options.maxHeight);
      }
    },
    hide: function hide(dataId) {
      return dataId && window.sfBlazor.getCompInstance(dataId).hide();
    },
    destroy: function destroy(dlgObj) {
      if (dlgObj.dataId) {
        window.sfBlazor.getCompInstance(dlgObj.dataId).destroy(dlgObj, dlgObj.isClient);
      }
    }
  };
  return Dialog;
}();

/***/ }),

/***/ "./modules/sf-drop-down-button.js":
/*!****************************************!*\
  !*** ./modules/sf-drop-down-button.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.DropDownButton = function () {
  'use strict';

  /* eslint-disable @typescript-eslint/no-explicit-any */
  var HIDDEN = 'hidden';
  var TRANSPARENT = 'e-transparent';
  var EMPTY = '';
  var PIXEL = 'px';
  var DOT = '.';
  var HASH = '#';
  var BTN_CLICK = 'ButtonClickAsync';
  var DROPDOWN = 'e-dropdown-menu';
  var COLOR_PICKER = 'e-colorpicker-container';
  var HSV_MODEL = 'e-hsv-model';
  var MODEL = '.e-colorpicker.e-modal';
  var CONTAINER = '.e-container';
  var ITEM = 'e-item';
  var FOCUSED = 'e-focused';
  var WRAPPER = 'e-split-btn-wrapper';
  var ELEMENT = 'e-dropdown-btn';
  var MOUSEDOWN = 'mousedown touchstart';
  var KEYDOWN = 'keydown';
  var CLICK = 'click';
  var SCROLL = 'scroll';
  var ESC = 27;
  var UP = 38;
  var DOWN = 40;
  var ENTER = 13;
  var TAB = 9;
  var RTL = 'e-rtl';
  /**
   * Dropdown Button Blazor introp module
   */
  var SfDropDownButton = /** @class */function () {
    function SfDropDownButton(element, popup, dotnetRef, dataId, cp_dataId) {
      this.isPopupClick = false;
      this.dataId = dataId;
      this.cp_dataId = cp_dataId;
      this.element = element;
      this.dotNetRef = dotnetRef;
      this.popup = popup;
      window.sfBlazor.setCompInstance(this);
      this.addScrollEvents(true);
    }
    SfDropDownButton.prototype.openPopup = function (blankIcon) {
      this.popup.style.visibility = HIDDEN;
      document.body.appendChild(this.popup);
      if (blankIcon) {
        sf.splitbuttons.setBlankIconStyle(this.popup);
      }
      this.popup.classList.remove("e-hidden");
      this.popup.classList.remove(TRANSPARENT);
      var zIndex = sf.popups.getZindexPartial(this.element);
      var isColorPicker = this.element.parentElement.classList.contains(COLOR_PICKER);
      if (isColorPicker) {
        var instance = window.sfBlazor.getCompInstance(this.cp_dataId);
        instance.setPaletteWidth(this.popup.querySelector(CONTAINER), false, zIndex);
      }
      this.setPosition(isColorPicker);
      sf.base.EventHandler.remove(document, MOUSEDOWN, this.mouseDownHandler);
      this.addEventListener();
      this.popup.style.zIndex = zIndex + EMPTY;
      this.popup.style.visibility = EMPTY;
      if (isColorPicker) {
        var instance = window.sfBlazor.getCompInstance(this.cp_dataId);
        instance.setOffset(this.popup, zIndex);
      }
      if (this.popup.firstElementChild) {
        if (this.popup.firstElementChild.firstElementChild && isColorPicker) {
          this.popup.firstElementChild.firstElementChild.focus();
        } else {
          var palette = this.popup.firstElementChild.querySelector('.e-palette');
          if (palette) {
            palette.focus();
          } else {
            this.popup.firstElementChild.focus();
          }
        }
      }
    };
    SfDropDownButton.prototype.setPosition = function (isColorPicker) {
      var left;
      var top;
      var btnLeft;
      var btnTop;
      var popupOffset = this.popup.getBoundingClientRect();
      var height = popupOffset.height;
      var width = popupOffset.width;
      this.popup.style.display = "none";
      var btnOffset = this.element.getBoundingClientRect();
      if (isColorPicker && sf.base.Browser.isDevice) {
        left = document.documentElement.clientWidth / 2 - popupOffset.width / 2 + pageXOffset;
        top = document.documentElement.clientHeight / 2 - popupOffset.height / 2 + pageYOffset;
      } else {
        left = btnOffset.left + pageXOffset;
        top = btnOffset.bottom + pageYOffset;
        btnTop = btnOffset.top + pageYOffset;
        btnLeft = btnOffset.left + pageXOffset;
        if (btnOffset.left + popupOffset.width > document.documentElement.clientWidth) {
          if (btnOffset.left + btnOffset.width - popupOffset.width > document.documentElement.clientLeft) {
            left = left + btnOffset.width - popupOffset.width;
          }
        }
        // Check if there's not enough space in the bottom
        if (btnOffset.top + btnOffset.height + popupOffset.height > document.documentElement.clientHeight) {
          // No space in bottom
          // Position the popup above the button if there's space
          top = btnTop - (popupOffset.height + 4);
          if (top < 0) {
            // No space in top
            top = 0; // Adjust the top to view full color picker
            if (top + popupOffset.height < document.documentElement.clientHeight) {
              // There is enough viewport size.
              if (btnOffset.left + btnOffset.width + popupOffset.width < document.documentElement.clientWidth) {
                // There is enough space in right
                left = btnLeft + btnOffset.width;
              } else {
                left = btnLeft - popupOffset.width;
              }
            } else {
              top = btnOffset.bottom + pageYOffset; // popup opened in bottom
            }
          }
        }
      }
      if (this.element.id.indexOf('imageEditor') !== -1 && sf.base.Browser.isDevice) {
        left = document.documentElement.clientWidth / 2 - popupOffset.width / 2 + pageXOffset;
      }
      this.popup.style.left = Math.ceil(left) + PIXEL;
      this.popup.style.top = Math.ceil(top) + PIXEL;
      this.popup.style.display = "block";
    };
    SfDropDownButton.prototype.mouseDownHandler = function (e) {
      if (this.popup.parentElement) {
        var target = e.target;
        var prevent = true;
        var isColorPicker = this.element.parentElement.classList.contains(COLOR_PICKER);
        if (isColorPicker) {
          var instance = window.sfBlazor.getCompInstance(this.cp_dataId);
          if (sf.base.closest(target, '.e-apply') || sf.base.closest(target, '.e-cancel')) {
            instance.removeZIndex();
          }
        }
        if (!sf.base.Browser.isDevice && target.classList.contains(HSV_MODEL)) {
          var ref = target.parentElement.getBoundingClientRect();
          var btn = this.element.getBoundingClientRect();
          prevent = e.clientX >= ref.left && e.clientX <= ref.right && e.clientY >= ref.top && e.clientY <= ref.bottom || e.clientX >= btn.left && e.clientX <= btn.right && e.clientY >= btn.top && e.clientY <= btn.bottom;
        }
        if (!prevent || !sf.base.closest(target, HASH + this.getDropDownButton().id) && !sf.base.closest(e.target, HASH + this.popup.id) && !sf.base.closest(e.target, MODEL)) {
          if (isColorPicker) {
            var instance = window.sfBlazor.getCompInstance(this.cp_dataId);
            instance.removeZIndex();
          }
          this.dotNetRef.invokeMethodAsync(BTN_CLICK, null);
          this.removeEventListener();
        }
      } else {
        this.removeEventListener();
      }
    };
    SfDropDownButton.prototype.keydownHandler = function (e) {
      var element = this.getElement();
      var isColorPicker = this.element.parentElement.classList.contains(COLOR_PICKER);
      var Rtl = this.element.parentElement.classList.contains(RTL);
      if (isColorPicker) {
        var instance = window.sfBlazor.getCompInstance(this.cp_dataId);
        instance.paletteKeyDown(e, Rtl);
      }
      if (e.altKey) {
        if (e.keyCode === UP) {
          e.stopPropagation();
          e.preventDefault();
          this.dotNetRef.invokeMethodAsync(BTN_CLICK, null);
          element.focus();
          this.removeEventListener();
        }
      } else {
        var ul = this.popup.firstElementChild;
        if (e.keyCode === ESC || e.keyCode === TAB && !isColorPicker) {
          e.stopPropagation();
          this.dotNetRef.invokeMethodAsync(BTN_CLICK, null);
          if (e.keyCode === ESC) {
            e.preventDefault();
          }
          element.focus();
          this.removeEventListener();
        }
        if (!ul || !ul.classList.contains(DROPDOWN)) {
          return;
        }
        if (e.keyCode === ENTER) {
          e.preventDefault();
          if (e.target.classList.contains(ITEM) && e.target.classList.contains(FOCUSED)) {
            element.focus();
            this.removeEventListener();
          } else {
            e.stopPropagation();
          }
          return;
        }
        if (e.keyCode === UP || e.keyCode === DOWN) {
          if (e.target.classList.contains(DROPDOWN)) {
            e.stopPropagation();
          }
          e.preventDefault();
          sf.splitbuttons.upDownKeyHandler(ul, e.keyCode);
        }
      }
    };
    SfDropDownButton.prototype.getElement = function () {
      return this.element.classList.contains(WRAPPER) ? this.element.firstElementChild : this.element;
    };
    SfDropDownButton.prototype.getDropDownButton = function () {
      return this.element.classList.contains(WRAPPER) ? this.element.getElementsByClassName(ELEMENT)[0] : this.element;
    };
    SfDropDownButton.prototype.closePopup = function () {
      this.removeEventListener();
      if (this.isPopupClick) {
        this.getElement().focus();
        this.isPopupClick = false;
      }
      var isColorPicker = this.element.parentElement.classList.contains(COLOR_PICKER);
      if (isColorPicker && sf.base.Browser.isDevice) {
        var popup = this.popup;
        if (popup && popup.firstElementChild) {
          var model = document.querySelector(MODEL);
          var ctrlBtn = popup.querySelector('.e-ctrl-btn');
          if (model && !ctrlBtn) {
            model.remove();
          }
        }
      }
    };
    SfDropDownButton.prototype.dropDownClickHandler = function (e) {
      var isColorPicker = this.element.parentElement.classList.contains(COLOR_PICKER);
      if (isColorPicker) {
        var instance = window.sfBlazor.getCompInstance(this.cp_dataId);
        if (sf.base.closest(e.target, '.e-dropdown-btn')) {
          instance.removeZIndex();
        }
      }
    };
    SfDropDownButton.prototype.scrollHandler = function (e) {
      if (!this.popup || !document.getElementById(this.popup.id)) {
        var ddb = this.getDropDownButton();
        if (!ddb || !document.getElementById(ddb.id)) {
          sf.base.EventHandler.remove(e.target, SCROLL, this.scrollHandler);
        }
        return;
      }
      var isColorPicker = this.element.parentElement.classList.contains(COLOR_PICKER);
      this.setPosition(isColorPicker);
      if (isColorPicker) {
        var instance = window.sfBlazor.getCompInstance(this.cp_dataId);
        instance.setOffset(this.popup);
      }
    };
    SfDropDownButton.prototype.clickHandler = function (e) {
      this.isPopupClick = true;
    };
    SfDropDownButton.prototype.addEventListener = function (setFocus) {
      sf.base.EventHandler.add(document, MOUSEDOWN, this.mouseDownHandler, this);
      sf.base.EventHandler.add(this.popup, CLICK, this.clickHandler, this);
      sf.base.EventHandler.add(this.popup, KEYDOWN, this.keydownHandler, this);
      sf.base.EventHandler.add(this.element, CLICK, this.dropDownClickHandler, this);
      if (setFocus && this.popup.firstElementChild) {
        var focusEle = this.popup.querySelector(DOT + FOCUSED);
        focusEle ? focusEle.focus() : this.popup.firstElementChild.focus();
      }
    };
    SfDropDownButton.prototype.removeEventListener = function (reposition) {
      sf.base.EventHandler.remove(document, MOUSEDOWN, this.mouseDownHandler);
      sf.base.EventHandler.remove(this.element, CLICK, this.dropDownClickHandler);
      if (this.popup.parentElement) {
        sf.base.EventHandler.remove(this.popup, CLICK, this.clickHandler);
        sf.base.EventHandler.remove(this.popup, KEYDOWN, this.keydownHandler);
        if (reposition) {
          var ddb = this.getDropDownButton();
          if (ddb && document.getElementById(ddb.id)) {
            this.addScrollEvents(false);
            this.element.appendChild(this.popup);
          }
        }
      }
    };
    SfDropDownButton.prototype.addScrollEvents = function (add) {
      var elements = sf.popups.getScrollableParent(this.element);
      for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
        var element = elements_1[_i];
        add ? sf.base.EventHandler.add(element, SCROLL, this.scrollHandler, this) : sf.base.EventHandler.remove(element, SCROLL, this.scrollHandler);
      }
    };
    return SfDropDownButton;
  }();
  // eslint-disable-next-line @typescript-eslint/naming-convention, no-underscore-dangle, id-blacklist, id-match
  var DropDownButton = {
    openPopup: function openPopup(element, popup, dotnetRef, blankIcon, dataId, cp_dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(element)) {
        if (sf.base.isNullOrUndefined(instance)) {
          new SfDropDownButton(element, popup, dotnetRef, dataId, cp_dataId);
          instance = window.sfBlazor.getCompInstance(dataId);
        } else {
          instance.popup = popup;
        }
        instance.openPopup(blankIcon);
      }
    },
    addEventListener: function addEventListener(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      instance.removeEventListener();
      instance.addEventListener(true);
    },
    removeEventListener: function removeEventListener(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      instance.removeEventListener(true);
    },
    closePopup: function closePopup(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      instance.closePopup();
    },
    setIconStyle: function setIconStyle(dataId, blankIcon) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      sf.splitbuttons.setBlankIconStyle(instance.popup, blankIcon);
    }
  };
  return DropDownButton;
}();

/***/ }),

/***/ "./modules/sf-dropdownlist.js":
/*!************************************!*\
  !*** ./modules/sf-dropdownlist.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.DropDownList = function () {
  'use strict';

  var __assign = undefined && undefined.__assign || function () {
    __assign = Object.assign || function (t) {
      for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
      return t;
    };
    return __assign.apply(this, arguments);
  };
  var POPUP_CONTENT = 'e-content';
  var LIST_ITEM = 'e-list-item';
  var CLOSE_POPUP = 'ClosePopup';
  var ITEM_FOCUS = 'e-item-focus';
  var DDL_DEVICE = 'e-ddl-device';
  var MOBILE_FILTER = 'e-ddl-device-filter';
  var POPUP_FULL_SCREEN = 'e-popup-full-page';
  var INPUT_FOCUS = 'e-input-focus';
  var FIXED_HEAD = 'e-fixed-head';
  var GROUP = 'e-list-group-item';
  var SELECTED = 'e-active';
  var HOVER = 'e-hover';
  var HIDE = 'Hide';
  var ICON_ANIM = 'e-icon-anim';
  var UPDATE_LIST_HEIGHT = 'UpdateListHeight';
  var POPUP = '_popup';
  var SfDropDownList = /** @class */function () {
    // tslint:disable
    function SfDropDownList(dataId, containerElement, element, dotnetRef, options) {
      var _this = this;
      this.activeIndex = null;
      this.prevSelectPoints = {};
      window.sfBlazor = window.sfBlazor;
      this.preStartIndex = 0;
      this.startIndex = 0;
      this.currentPage = 0;
      this.virtualPopupHeight = 0;
      this.isKeyBoardAction = false;
      this.scrollPreStartIndex = 0;
      this.isScrollActionMade = false;
      this.preventScrollAction = false;
      this.preventKeyAction = false;
      this.isVirtualAction = false;
      this.keyDownAction = false;
      this.isUpwardScroll = false;
      this.mouseScrollAction = false;
      this.firstRender = true;
      this.virtualListHeight = 0;
      this.bindScrollEvent = function () {
        _this.observe(function (scrollArgs) {
          return _this.scrollListener(scrollArgs);
        });
      };
      this.sentinelInfo = {
        'up': {
          check: function check(rect, info) {
            var top = rect.top - _this.containerRect.top;
            info.entered = top >= 0;
            return top + _this.listHeight * _this.options.virtualizedItemsCount / 2 >= 0;
          },
          axis: 'Y'
        },
        'down': {
          check: function check(rect, info) {
            var cHeight = _this.popupContentEle.clientHeight;
            var top = rect.bottom;
            info.entered = rect.bottom <= _this.containerRect.bottom;
            return top - _this.listHeight * _this.options.virtualizedItemsCount / 2 <= _this.listHeight * _this.options.virtualizedItemsCount / 2;
          },
          axis: 'Y'
        }
      };
      this.IsScrollerAtEnd = function () {
        return this.list && this.list.scrollTop + this.list.clientHeight >= this.list.scrollHeight;
      };
      this.dataId = dataId;
      this.containerElement = containerElement;
      this.element = element;
      this.options = options;
      window.sfBlazor.setCompInstance(this);
      this.dotNetRef = dotnetRef;
    }
    SfDropDownList.prototype.initialize = function () {
      this.keyConfigure = {
        tab: 'tab',
        enter: '13',
        escape: '27',
        end: '35',
        home: '36',
        down: '40',
        up: '38',
        pageUp: '33',
        pageDown: '34',
        open: 'alt+40',
        close: 'shift+tab',
        hide: 'alt+38',
        space: '32'
      };
      if (!sf.base.Browser.isDevice) {
        new sf.base.KeyboardEvents(this.containerElement, {
          keyAction: this.keyActionHandler.bind(this),
          keyConfigs: this.keyConfigure,
          eventName: 'keydown'
        });
        if (this.options.enableVirtualization) {
          sf.base.EventHandler.add(this.containerElement, 'keyup', this.keyUpHandler, this);
        }
      } else {
        sf.base.EventHandler.add(window, 'orientationchange', this.scrollHandler, this);
      }
      if (this.options.moduleName === 'SfComboBox') {
        sf.base.EventHandler.add(this.element, 'keydown', this.onFilterDown, this);
      }
      sf.base.EventHandler.add(window, 'resize', this.windowResize, this);
    };
    SfDropDownList.prototype.keyUpHandler = function (e) {
      this.keyDownAction = false;
    };
    SfDropDownList.prototype.findListElement = function (list, findNode, attribute, value) {
      var liElement = null;
      if (list) {
        var listArr = [].slice.call(list.querySelectorAll(findNode));
        for (var index = 0; index < listArr.length; index++) {
          if (listArr[index].getAttribute(attribute) === value + '') {
            liElement = listArr[index];
            break;
          }
        }
      }
      return liElement;
    };
    SfDropDownList.prototype.windowResize = function () {
      if (this.isPopupOpen()) {
        this.popupObj.refreshPosition(this.containerElement);
      }
    };
    SfDropDownList.prototype.updateSelectionList = function () {
      var selectedItem = this.list.querySelector('.' + SELECTED);
      if (!selectedItem && this.options.value) {
        var findEle = this.findListElement(this.list, 'li', 'data-value', this.options.value);
        if (findEle) {
          findEle.classList.add(SELECTED);
        }
      }
    };
    SfDropDownList.prototype.scrollListener = function (scrollArgs) {
      var _this = this;
      if (!this.preventScrollAction) {
        var info = scrollArgs.sentinel;
        var pStartIndex = this.preStartIndex;
        this.viewInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset, false);
        this.isUpwardScroll = false;
        if (this.preStartIndex !== pStartIndex && !this.isKeyBoardAction) {
          this.isScrollActionMade = false;
          this.currentPage = this.viewInfo.currentPage;
          this.virtualInfo = __assign({}, this.viewInfo);
          this.preventKeyAction = true;
          this.isVirtualAction = true;
          setTimeout(function () {
            _this.dotNetRef.invokeMethodAsync("VirtualScrollRefreshAsync", {
              virtualItemStartIndex: _this.viewInfo.startIndex,
              virtualItemEndIndex: _this.viewInfo.endIndex,
              listItemHeight: _this.virtualListHeight,
              scrollTop: _this.viewInfo.offsets.top,
              pageCount: _this.getPageCount(_this.popupObj.element, true),
              isMouseScrollAction: _this.mouseScrollAction
            }).then(function () {
              if (_this.popupObj) {
                _this.list = _this.popupObj.element.querySelector('.' + POPUP_CONTENT) || sf.base.select('.' + POPUP_CONTENT);
                _this.updateSelectionList();
                _this.liCollections = _this.getItems();
              }
              _this.isVirtualAction = false;
              _this.preventKeyAction = false;
            });
          }, 10);
        } else if (this.isScrollActionMade) {
          this.preventKeyAction = false;
          this.isScrollActionMade = false;
          var virtualListCount = this.list.querySelectorAll('.e-virtual-list').length;
          var listElement = this.list.querySelector('.' + LIST_ITEM);
          var translateY = scrollArgs.offset.top - listElement.offsetHeight * virtualListCount;
          this.list.getElementsByClassName('e-virtual-ddl-content')[0].style.transform = "translate(0px," + translateY + "px)";
        }
        this.prevInfo = this.viewInfo;
        this.isKeyBoardAction = false;
      }
    };
    SfDropDownList.prototype.getInfoFromView = function (direction, info, e, isscrollAction) {
      var infoType = {
        direction: direction,
        sentinelInfo: info,
        offsets: e,
        startIndex: this.preStartIndex,
        endIndex: this.preEndIndex
      };
      var vHeight = this.popupContentEle.getBoundingClientRect().height;
      //Row Start and End Index calculation
      var rowHeight = this.listHeight == 0 ? this.virtualListHeight : this.listHeight;
      var exactTopIndex = e.top / rowHeight;
      var infoViewIndices = vHeight / rowHeight;
      var exactEndIndex = exactTopIndex + infoViewIndices;
      var pageSizeBy4 = this.options.virtualizedItemsCount / 4;
      var totalCount = this.options.totalCount;
      if (infoType.direction === 'down') {
        var sIndex = Math.round(exactEndIndex) - Math.round(pageSizeBy4);
        if (sf.base.isNullOrUndefined(infoType.startIndex) || exactEndIndex > infoType.startIndex + Math.round(this.options.virtualizedItemsCount / 2 + pageSizeBy4) && infoType.endIndex !== totalCount) {
          infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;
          infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;
          var eIndex = infoType.startIndex + this.options.virtualizedItemsCount;
          infoType.startIndex = eIndex < exactEndIndex ? Math.ceil(exactEndIndex) - this.options.virtualizedItemsCount : infoType.startIndex;
          infoType.endIndex = eIndex < totalCount ? eIndex : totalCount;
          infoType.startIndex = eIndex >= totalCount ? infoType.endIndex - this.options.virtualizedItemsCount > 0 ? infoType.endIndex - this.options.virtualizedItemsCount : 0 : infoType.startIndex;
          infoType.currentPage = Math.ceil(infoType.endIndex / this.options.virtualizedItemsCount);
        }
      } else if (infoType.direction === 'up') {
        if (infoType.startIndex && infoType.endIndex) {
          var loadAtIndex = Math.round((infoType.startIndex * rowHeight + pageSizeBy4 * rowHeight) / rowHeight);
          if (exactTopIndex < loadAtIndex) {
            var idxAddedToExactTop = pageSizeBy4 > infoViewIndices ? pageSizeBy4 : infoViewIndices + infoViewIndices / 4;
            var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);
            infoType.endIndex = eIndex < totalCount ? eIndex : totalCount;
            var sIndex = infoType.endIndex - this.options.virtualizedItemsCount;
            infoType.startIndex = sIndex > 0 ? sIndex : 0;
            infoType.endIndex = sIndex < 0 ? this.options.virtualizedItemsCount : infoType.endIndex;
            infoType.currentPage = Math.ceil(infoType.startIndex / this.options.virtualizedItemsCount);
          }
        }
      }
      if (!isscrollAction) {
        this.preStartIndex = infoType.startIndex;
        this.startIndex = infoType.startIndex;
        this.preEndIndex = infoType.endIndex;
      } else {
        this.scrollPreStartIndex = infoType.startIndex;
      }
      return infoType;
    };
    SfDropDownList.prototype.observe = function (callback) {
      this.containerRect = this.popupContentEle.getBoundingClientRect();
      sf.base.EventHandler.add(this.popupContentEle, 'wheel mousedown', this.popupScrollHandler, this);
      this.touchModule = new sf.base.Touch(this.popupContentEle, {
        scroll: this.popupScrollHandler.bind(this)
      });
      sf.base.EventHandler.add(this.popupContentEle, 'scroll', this.virtualScrollHandler(callback), this);
    };
    SfDropDownList.prototype.popupScrollHandler = function (e) {
      this.mouseScrollAction = true;
      this.preventScrollAction = false;
    };
    SfDropDownList.prototype.virtualScrollHandler = function (callback) {
      var _this = this;
      var delay = sf.base.Browser.info.name === 'chrome' ? 200 : 100;
      var prevTop = 0;
      var debounced100 = sf.base.debounce(callback, delay);
      var debounced50 = sf.base.debounce(callback, 50);
      return function (e) {
        var top = e.target.scrollTop;
        var left = e.target.scrollLeft;
        var direction = prevTop < top && !_this.isUpwardScroll ? 'down' : 'up';
        prevTop = top;
        var current = _this.sentinelInfo[direction];
        var pstartIndex = _this.scrollPreStartIndex;
        var scrollOffsetargs = {
          top: top,
          left: left
        };
        if (_this.list.querySelectorAll('.e-virtual-list').length > 0) {
          var infoview = _this.getInfoFromView(direction, current, scrollOffsetargs, true);
          if (_this.scrollPreStartIndex != pstartIndex && !_this.preventScrollAction) {
            _this.isScrollActionMade = true;
            var virtualPoup = _this.list.querySelector('.e-virtual-ddl-content');
            virtualPoup.style.transform = "translate(0px," + top + "px)";
          }
        }
        var debounceFunction = debounced100;
        if (current.axis === 'X') {
          debounceFunction = debounced50;
        }
        debounceFunction({
          direction: direction,
          sentinel: current,
          offset: {
            top: top,
            left: left
          },
          focusElement: document.activeElement
        });
      };
    };
    SfDropDownList.prototype.setAutoFillSelection = function (currentValue) {
      if (!this.isAndroidAutoFill(currentValue)) {
        this.autoFillSelection(currentValue);
      }
    };
    SfDropDownList.prototype.onFilterDown = function (e) {
      if (!(e.keyCode === 13 || e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 9)) {
        this.prevSelectPoints = this.getSelectionPoints();
      }
    };
    SfDropDownList.prototype.getSelectionPoints = function () {
      var input = this.element;
      return {
        start: Math.abs(input.selectionStart),
        end: Math.abs(input.selectionEnd)
      };
    };
    SfDropDownList.prototype.autoFillSelection = function (currentValue) {
      var selection = this.getSelectionPoints();
      var value = this.element.value.substr(0, selection.start);
      if (value && value.toLowerCase() === currentValue.substr(0, selection.start).toLowerCase()) {
        var inputValue = value + currentValue.substr(value.length, currentValue.length);
        this.element.value = inputValue;
        this.element.setSelectionRange(selection.start, this.element.value.length);
      } else {
        this.element.value = currentValue;
        this.element.setSelectionRange(0, this.element.value.length);
      }
    };
    SfDropDownList.prototype.isAndroidAutoFill = function (value) {
      if (sf.base.Browser.isAndroid) {
        var currentPoints = this.getSelectionPoints();
        var prevEnd = this.prevSelectPoints.end;
        var curEnd = currentPoints.end;
        var prevStart = this.prevSelectPoints.start;
        var curStart = currentPoints.start;
        if (prevEnd !== 0 && (prevEnd === value.length && prevStart === value.length || prevStart > curStart && prevEnd > curEnd || prevEnd === curEnd && prevStart === curStart)) {
          return true;
        } else {
          return false;
        }
      } else {
        return false;
      }
    };
    SfDropDownList.prototype.removeFillSelection = function () {
      var selection = this.getSelectionPoints();
      this.element.setSelectionRange(selection.end, selection.end);
    };
    SfDropDownList.prototype.keyActionHandler = function (e) {
      if (this.preventKeyAction && this.options.enableVirtualization) {
        e.preventDefault();
      } else {
        var keyEventsArgs = {
          Action: e.action,
          Key: e.key,
          Events: e,
          Type: e.type
        };
        if (!this.isDisposed) {
          if (e.action === 'space' && e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
            e.preventDefault();
          }
          this.dotNetRef.invokeMethodAsync('KeyActionHandler', keyEventsArgs);
        }
        if (e.action !== 'tab' && e.action !== 'close' && e.action !== 'space' && e.action !== 'enter' && e.action !== 'open' && (this.options.moduleName === 'SfDropDownList' || e.action !== 'home' && e.action !== 'end') || e.action === 'enter' && !sf.base.isNullOrUndefined(this.isPopupOpen())) {
          e.preventDefault();
        }
      }
      this.keyDownAction = true;
    };
    SfDropDownList.prototype.getOffsetValue = function (popupEle) {
      var popupStyles = getComputedStyle(popupEle);
      var borderTop = parseInt(popupStyles.borderTopWidth, 10);
      var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);
      return this.setPopupPosition(borderTop + borderBottom);
    };
    SfDropDownList.prototype.setPopupPosition = function (border) {
      var offsetValue;
      var popupOffset = border;
      var selectedLI = this.list.querySelector('.' + ITEM_FOCUS) || this.list.querySelector('.' + SELECTED);
      var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];
      var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];
      var liHeight = firstItem.getBoundingClientRect().height;
      var listHeight = this.list.offsetHeight / 2;
      var height = sf.base.isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;
      var lastItemOffsetValue = lastItem.offsetTop;
      if (lastItemOffsetValue - listHeight < height && !sf.base.isNullOrUndefined(this.liCollections) && this.liCollections.length > 0 && !sf.base.isNullOrUndefined(selectedLI)) {
        var count = this.list.offsetHeight / liHeight;
        var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);
        offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;
        this.list.scrollTop = selectedLI.offsetTop;
      } else if (height > listHeight) {
        offsetValue = listHeight - liHeight / 2;
        this.list.scrollTop = height - listHeight + liHeight / 2;
      } else {
        offsetValue = height;
      }
      var inputHeight = this.containerElement.offsetHeight;
      offsetValue = offsetValue + liHeight + popupOffset - (liHeight - inputHeight) / 2;
      return -offsetValue;
    };
    SfDropDownList.prototype.getItems = function () {
      return this.list ? this.list.querySelectorAll('.' + LIST_ITEM) : [];
    };
    SfDropDownList.prototype.getListHeight = function () {
      var listParent = sf.base.createElement('div', {
        className: 'e-dropdownbase'
      });
      var item = sf.base.createElement('li', {
        className: 'e-list-item'
      });
      var listParentHeight = sf.base.formatUnit(this.options.popupHeight);
      listParent.style.height = parseInt(listParentHeight, 10).toString() + 'px';
      listParent.appendChild(item);
      document.body.appendChild(listParent);
      this.virtualPopupHeight = listParent.getBoundingClientRect().height;
      var liHeight = Math.ceil(item.getBoundingClientRect().height);
      listParent.remove();
      this.virtualListHeight = liHeight;
      return liHeight;
    };
    // tslint:disable
    SfDropDownList.prototype.renderPopup = function (popupElement, popupHolderEle, openEventArgs, isModifiedPopup, options, dataItem) {
      var _this = this;
      this.options = options;
      this.popupHolder = popupHolderEle;
      this.popupContentEle = popupElement.querySelector('.e-content');
      this.list = popupHolderEle.querySelector('.' + POPUP_CONTENT) || sf.base.select('.' + POPUP_CONTENT, this.popupContainer);
      this.liCollections = this.getItems();
      var offsetValue = 0;
      var left;
      this.preventScrollAction = true;
      var listHeight = sf.base.formatUnit(this.options.popupHeight);
      var searchBoxContainer;
      this.wireListEvents();
      if (popupElement) {
        var oldPopupEle = document.getElementById(popupElement.id);
        if (oldPopupEle) {
          sf.base.remove(oldPopupEle);
        }
      }
      document.body.appendChild(popupElement);
      popupElement.style.visibility = 'hidden';
      if (this.options.allowFiltering) {
        if (this.options.moduleName === 'SfDropDownList') {
          this.filterInput = popupElement.querySelector('input.e-input');
          searchBoxContainer = this.filterInput.parentElement;
          new sf.base.KeyboardEvents(this.filterInput, {
            keyAction: this.keyActionHandler.bind(this),
            keyConfigs: this.keyConfigure,
            eventName: 'keydown'
          });
          if (this.options.enableVirtualization) {
            sf.base.EventHandler.add(this.filterInput, 'keyup', this.keyUpHandler, this);
          }
        } else {
          this.filterInput = this.element;
        }
      }
      if (this.options.popupHeight !== 'auto') {
        var searchBoxHeight = 0;
        if (!sf.base.isNullOrUndefined(searchBoxContainer)) {
          searchBoxHeight = searchBoxContainer.parentElement.getBoundingClientRect().height;
          listHeight = (parseInt(listHeight, 10) - searchBoxHeight).toString() + 'px';
        }
        if (popupElement.querySelector('.e-ddl-header')) {
          var header = popupElement.querySelector('.e-ddl-header');
          var height = Math.round(header.getBoundingClientRect().height);
          if (popupElement.classList.contains('e-multi-column')) {
            height = height + 13;
          }
          listHeight = (parseInt(listHeight, 10) - (height + searchBoxHeight)).toString() + 'px';
        }
        if (popupElement.querySelector('.e-ddl-footer')) {
          var footer = popupElement.querySelector('.e-ddl-footer');
          var height = Math.round(footer.getBoundingClientRect().height);
          if (popupElement.classList.contains('e-multi-column')) {
            height = height + 13;
          }
          listHeight = (parseInt(listHeight, 10) - (height + searchBoxHeight)).toString() + 'px';
        }
        this.list.style.maxHeight = (parseInt(listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property
        popupElement.style.maxHeight = sf.base.formatUnit(this.options.popupHeight);
      } else {
        popupElement.style.height = 'auto';
      }
      if (this.list && !(this.options.moduleName === 'SfAutoComplete') && !this.list.classList.contains("e-nodata")) {
        if (!this.listHeight) {
          var firstList = this.options.enableVirtualization && this.options.hasItemTemplate ? popupElement.querySelectorAll('li.e-list-item:not(.e-virtual-list)') : popupElement.querySelectorAll('li.e-list-item');
          this.listHeight = this.virtualListHeight = firstList.length > 0 ? Math.ceil(firstList[0].getBoundingClientRect().height) : 0;
        }
        this.setScrollPosition();
      }
      if (sf.base.Browser.isDevice && !this.options.allowFiltering && (this.options.moduleName === 'SfDropDownList' || this.options.moduleName === 'SfComboBox')) {
        offsetValue = this.getOffsetValue(popupElement);
        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];
        left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.element).paddingLeft, 10) + parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth, 10));
      }
      this.popupCreation(popupElement, offsetValue, left);
      var firstList = this.options.enableVirtualization && this.options.hasItemTemplate ? popupElement.querySelectorAll('li.e-list-item:not(.e-virtual-list)') : popupElement.querySelectorAll('li.e-list-item');
      this.listHeight = this.virtualListHeight = firstList.length > 0 ? Math.ceil(firstList[0].getBoundingClientRect().height) : 0;
      this.virtualListHeight = this.virtualListHeight < this.listHeight ? this.listHeight : this.virtualListHeight;
      if (this.options.enableVirtualization && this.options.hasItemTemplate && this.firstRender) {
        this.dotNetRef.invokeMethodAsync(UPDATE_LIST_HEIGHT, this.listHeight);
        this.firstRender = false;
      }
      this.checkCollision(popupElement);
      if (sf.base.Browser.isDevice) {
        this.popupObj.element.classList.add(DDL_DEVICE);
        if (this.options.moduleName === 'SfDropDownList' || this.options.moduleName === 'SfComboBox' && !this.options.allowFiltering) {
          this.popupObj.collision = {
            X: 'fit',
            Y: 'fit'
          };
        }
        if (this.options.allowFiltering && this.options.moduleName === 'SfDropDownList') {
          this.popupObj.element.classList.add(MOBILE_FILTER);
          this.popupObj.position = {
            X: 0,
            Y: 0
          };
          this.popupObj.dataBind();
          sf.base.attributes(this.popupObj.element, {
            style: 'left:0px;right:0px;top:0px;bottom:0px;' + ('z-index:' + this.options.zIndex.toString() + ';')
          });
          sf.base.addClass([document.body, this.popupObj.element], POPUP_FULL_SCREEN);
          this.setSearchBoxPosition();
        }
      }
      popupElement.style.visibility = 'visible';
      var iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);
      if (this.options.allowFiltering && this.options.moduleName === 'SfDropDownList' && sf.base.Browser.isDevice && iOS) {
        popupElement.style.position = 'fixed';
      }
      sf.base.addClass([popupElement], 'e-popup-close');
      if (sf.base.Browser.isDevice) {
        if (this.options.moduleName === 'SfDropDownList' && !this.options.allowFiltering || this.options.moduleName === 'SfComboBox' && !this.options.allowFiltering) {
          var scrollParentElements = this.popupObj.getScrollableParent(this.containerElement);
          for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {
            var element = scrollParentElements_1[_i];
            sf.base.EventHandler.add(element, 'scroll', this.scrollHandler, this);
          }
        }
        if (this.isFilterLayout()) {
          sf.base.EventHandler.add(this.list, 'scroll', this.listScroll, this);
        }
      }
      if (openEventArgs !== null && openEventArgs.popup !== null && isModifiedPopup) {
        for (var _a = 0, _b = Object.keys(openEventArgs.popup); _a < _b.length; _a++) {
          var prop = _b[_a];
          switch (prop) {
            case 'collision':
              if (openEventArgs.popup.collision && (this.popupObj.collision.X !== openEventArgs.popup.collision.X.toLowerCase() || this.popupObj.collision.Y !== openEventArgs.popup.collision.Y.toLowerCase())) {
                this.popupObj.collision = {
                  X: openEventArgs.popup.collision.X.toLowerCase(),
                  Y: openEventArgs.popup.collision.Y.toLowerCase()
                };
              }
              break;
            case 'position':
              if (this.popupObj.position && (this.popupObj.position.X !== openEventArgs.popup.position.X || this.popupObj.position.Y !== openEventArgs.popup.position.Y)) {
                this.popupObj.position = {
                  X: openEventArgs.popup.position.X,
                  Y: openEventArgs.popup.position.Y
                };
              }
              break;
            case 'relateTo':
              if (this.popupObj.relateTo !== openEventArgs.popup.relateTo) {
                this.popupObj.relateTo = openEventArgs.popup.relateTo;
              }
              break;
            case 'targetType':
              if (this.popupObj.targetType !== openEventArgs.popup.targetType.toLowerCase()) {
                this.popupObj.targetType = openEventArgs.popup.targetType;
              }
              break;
            case 'offsetX':
              if (this.popupObj.offsetX !== openEventArgs.popup.offsetX) {
                this.popupObj.offsetX = openEventArgs.popup.offsetX;
              }
              break;
            case 'offsetY':
              if (this.popupObj.offsetY !== openEventArgs.popup.offsetY) {
                this.popupObj.offsetY = openEventArgs.popup.offsetY;
              }
              break;
          }
        }
        this.popupObj.dataBind();
        this.popupObj.refreshPosition(this.popupObj.relateTo, true);
      }
      if (this.options.enableVirtualization) {
        this.bindScrollEvent();
        setTimeout(function () {
          _this.updateSelectionList();
          if (_this.options.value) {
            if (_this.options.scrollTop) {
              _this.list.scrollTop = _this.options.scrollTop;
            }
          }
        }, 10);
      }
      if (this.options.moduleName !== 'SfDropDownList') {
        sf.base.attributes(this.element, {
          'aria-expanded': 'true'
        });
      }
      sf.base.attributes(this.element, {
        'aria-owns': this.element.id + POPUP
      });
      var inputParent = this.options.allowFiltering ? this.filterInput.parentElement : this.containerElement;
      sf.base.addClass([inputParent], [INPUT_FOCUS]);
      var animModel = {
        name: 'FadeIn',
        duration: 100
      };
      this.popupObj.show(new sf.base.Animation(animModel), this.options.zIndex === 1000 ? this.element : null);
    };
    SfDropDownList.prototype.wireListEvents = function () {
      sf.base.EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);
      sf.base.EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);
    };
    SfDropDownList.prototype.unWireListEvents = function () {
      sf.base.EventHandler.remove(this.list, 'mouseover', this.onMouseOver);
      sf.base.EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);
    };
    SfDropDownList.prototype.onMouseOver = function (e) {
      var currentLi = sf.base.closest(e.target, '.' + LIST_ITEM);
      this.setHover(currentLi);
    };
    SfDropDownList.prototype.onMouseLeave = function (e) {
      this.removeHover();
    };
    SfDropDownList.prototype.listScroll = function () {
      this.filterInput.blur();
    };
    SfDropDownList.prototype.scrollHandler = function (e) {
      if (!this.isDisposed && (e.type === 'scroll' && this.element && !this.isElementInViewport(this.element) || e.type !== 'scroll')) {
        this.dotNetRef.invokeMethodAsync(HIDE);
      }
    };
    SfDropDownList.prototype.isElementInViewport = function (element) {
      var elementRect = element.getBoundingClientRect();
      return elementRect.top >= 0 && elementRect.left >= 0 && elementRect.bottom <= window.innerHeight && elementRect.right <= window.innerWidth;
    };
    SfDropDownList.prototype.setFloatingHeader = function (e) {
      var list = this.popupContainer && this.popupContainer.querySelector('.e-content');
      if (list && list.classList.contains('e-nodata') && this.fixedHeaderElement) {
        sf.base.remove(this.fixedHeaderElement);
        this.fixedHeaderElement = null;
      } else if (this.list && this.list.querySelector('li')) {
        if (sf.base.isNullOrUndefined(this.fixedHeaderElement)) {
          this.fixedHeaderElement = sf.base.createElement('div', {
            className: FIXED_HEAD
          });
          if (!this.list.querySelector('li').classList.contains(GROUP)) {
            this.fixedHeaderElement.style.display = 'none';
          }
          sf.base.prepend([this.fixedHeaderElement], this.list);
          this.setFixedHeader();
        }
        this.scrollStop(e);
      }
    };
    SfDropDownList.prototype.setFixedHeader = function () {
      this.list.parentElement.style.display = 'block';
      var borderWidth = 0;
      if (this.list && this.list.parentElement) {
        borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);
      }
      var liWidth = (this.list ? this.list.querySelectorAll(".e-list-item")[0].offsetWidth : 0) - borderWidth;
      this.fixedHeaderElement.style.width = liWidth.toString() + 'px';
      sf.base.setStyleAttribute(this.fixedHeaderElement, {
        zIndex: 10
      });
      var firstLi = this.list.querySelector('.' + GROUP);
      this.fixedHeaderElement.innerHTML = firstLi.innerHTML;
    };
    SfDropDownList.prototype.scrollStop = function (e) {
      var target = e.target;
      var liCollections = this.list.querySelectorAll('li');
      var liHeight = parseInt(getComputedStyle(liCollections[0], null).getPropertyValue('height'), 10);
      var topIndex = Math.round(target.scrollTop / liHeight);
      var skeletonCount = 0;
      if (this.list.querySelectorAll('.e-virtual-list')) {
        skeletonCount = this.list.querySelectorAll('.e-virtual-list').length;
      }
      for (var i = topIndex; i > -1; i--) {
        if (!sf.base.isNullOrUndefined(liCollections[i + skeletonCount]) && liCollections[i + skeletonCount].classList.contains(GROUP)) {
          var currentLi = liCollections[i + skeletonCount];
          this.fixedHeaderElement.innerHTML = currentLi.innerHTML;
          this.fixedHeaderElement.style.top = e.target.scrollTop + 'px';
          this.fixedHeaderElement.style.display = 'block';
          break;
        } else {
          this.fixedHeaderElement.style.display = 'none';
          this.fixedHeaderElement.style.top = 'none';
        }
      }
    };
    SfDropDownList.prototype.isFilterLayout = function () {
      return this.options.moduleName === 'SfDropDownList' && this.options.allowFiltering;
    };
    SfDropDownList.prototype.setSearchBoxPosition = function () {
      var searchBoxHeight = this.popupObj.element.querySelector('span.e-filter-parent').getBoundingClientRect().height;
      var footerELement = this.popupObj.element.querySelector('.e-ddl-footer');
      var headerElement = this.popupObj.element.querySelector('.e-ddl-header');
      this.popupObj.element.style.maxHeight = '100%';
      this.popupObj.element.style.width = '100%';
      var footerHeight = footerELement ? footerELement.getBoundingClientRect().height : 0;
      var headerHeight = headerElement ? headerElement.getBoundingClientRect().height : 0;
      // inset 4px is added from the script so removed it statically
      this.list.style.maxHeight = this.list.style.height = window.innerHeight - (footerHeight + headerHeight + searchBoxHeight + 4) + 'px';
    };
    SfDropDownList.prototype.checkCollision = function (popupEle) {
      if (!sf.base.Browser.isDevice || sf.base.Browser.isDevice && !(this.options.moduleName === 'SfDropDownList')) {
        var collision = sf.popups.isCollide(popupEle);
        if (collision.length > 0) {
          popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';
        }
      }
    };
    SfDropDownList.prototype.destroy = function () {
      sf.base.EventHandler.remove(document, 'mousedown', this.onDocumentClick);
      if (sf.base.Browser.isDevice) {
        sf.base.EventHandler.remove(window, 'orientationchange', this.scrollHandler);
      }
    };
    SfDropDownList.prototype.refreshPopup = function (isTyped, options) {
      if (this.isPopupOpen()) {
        if (this.options.enableVirtualization && isTyped) {
          this.preventScrollAction = true;
          this.list.scrollTop = 0;
          this.preStartIndex = 0;
          this.virtualInfo = null;
          this.preStartIndex = 0;
          if (this.listHeight === 0 && options.totalCount > 0) {
            var firstList = this.popupContainer.querySelectorAll('li.e-list-item:not(.e-virtual-list)');
            this.listHeight = firstList.length > 0 ? Math.ceil(firstList[0].getBoundingClientRect().height) : this.virtualListHeight;
          }
        }
        this.options.totalCount = options.totalCount;
        this.popupObj.refreshPosition(this.containerElement);
        var list = this.popupObj.element.querySelector('.e-content');
        if (list.classList.contains('e-nodata') && this.fixedHeaderElement) {
          sf.base.remove(this.fixedHeaderElement);
          this.fixedHeaderElement = null;
        }
      }
    };
    SfDropDownList.prototype.popupCreation = function (popupElement, offsetValue, left) {
      var _this = this;
      this.popupContainer = popupElement;
      this.popupObj = new sf.popups.Popup(this.popupContainer, {
        width: this.setWidth(),
        targetType: 'relative',
        relateTo: this.containerElement,
        collision: {
          X: 'flip',
          Y: 'flip'
        },
        offsetY: offsetValue,
        enableRtl: this.options.enableRtl,
        offsetX: left,
        position: {
          X: 'left',
          Y: 'bottom'
        },
        zIndex: this.options.zIndex,
        close: function close() {
          sf.base.EventHandler.remove(_this.list, 'scroll', _this.setFloatingHeader);
          sf.base.removeClass([_this.containerElement], ICON_ANIM);
          if (_this.options.moduleName === 'SfAutoComplete') {
            if (_this.options.value == null) {
              _this.preStartIndex = 0;
              _this.preEndIndex = 0;
            }
            _this.virtualInfo = null;
          }
          _this.fixedHeaderElement = null;
          _this.popupHolder.appendChild(_this.popupContainer);
          _this.unWireListEvents();
          var scrollableParentElements = _this.popupObj.getScrollableParent(_this.containerElement);
          for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {
            var element = scrollableParentElements_1[_i];
            sf.base.EventHandler.remove(element, 'scroll', _this.scrollHandler);
          }
          if (sf.base.Browser.isDevice && _this.isFilterLayout()) {
            sf.base.removeClass([document.body, _this.popupObj.element], POPUP_FULL_SCREEN);
            sf.base.EventHandler.remove(_this.list, 'scroll', _this.listScroll);
          }
          if (_this.options.enableVirtualization) {
            sf.base.EventHandler.remove(_this.popupContentEle, 'scroll', _this.virtualScrollHandler());
            if (_this.options.moduleName === 'SfDropDownList' && _this.filterInput) {
              sf.base.EventHandler.remove(_this.filterInput, 'keyup', _this.keyUpHandler);
            }
          }
          if (_this.popupObj) {
            _this.popupObj.destroy();
          }
          if (!_this.isDisposed && document.body.contains(_this.element)) {
            // tslint:disable
            _this.dotNetRef.invokeMethodAsync(CLOSE_POPUP)["catch"](function () {});
          }
        },
        open: function open() {
          if (_this.options.value == null && _this.options.moduleName === 'SfAutoComplete') {
            _this.preStartIndex = 0;
          }
          var IsGrouping = _this.list.querySelector('li') && _this.list.querySelector('li').classList.contains(GROUP);
          if (_this.options.enableVirtualization) {
            IsGrouping = _this.list.querySelector('li') && _this.list.querySelector('li.e-list-group-item') && _this.list.querySelector('li.e-list-group-item').classList.contains(GROUP);
          }
          var IsNoRecord = !sf.base.isNullOrUndefined(_this.list) && _this.list.classList.contains("e-nodata");
          sf.base.EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);
          if (_this.options.allowFiltering && _this.filterInput) {
            _this.filterInput.focus();
          }
          if (IsGrouping) {
            sf.base.EventHandler.add(_this.list, 'scroll', _this.setFloatingHeader, _this);
          }
        },
        targetExitViewport: function targetExitViewport() {
          if (!sf.base.Browser.isDevice && !_this.isDisposed) {
            _this.dotNetRef.invokeMethodAsync(HIDE);
          }
        }
      });
    };
    SfDropDownList.prototype.isEmptyList = function () {
      return !sf.base.isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;
    };
    SfDropDownList.prototype.setWidth = function () {
      var width = sf.base.formatUnit(this.options.popupWidth);
      if (width.indexOf('%') > -1) {
        var inputWidth = this.containerElement.offsetWidth * parseFloat(width) / 100;
        width = inputWidth.toString() + 'px';
      }
      if (sf.base.Browser.isDevice && !this.options.allowFiltering && (this.options.moduleName === 'SfDropDownList' || this.options.moduleName === 'SfComboBox')) {
        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];
        width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.element).paddingLeft, 10) + parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth, 10)) * 2 + 'px';
      }
      return width;
    };
    SfDropDownList.prototype.onDocumentClick = function (e) {
      var target = e.target;
      if (!(!sf.base.isNullOrUndefined(this.popupObj) && sf.base.closest(target, '[id=' + '\'' + this.popupObj.element.id + '\'' + ']')) && !this.containerElement.contains(e.target)) {
        if ((this.containerElement.classList.contains(INPUT_FOCUS) || this.isPopupOpen()) && !this.isDisposed) {
          this.dotNetRef.invokeMethodAsync(HIDE);
        }
      } else if (target !== this.element && !(this.options.allowFiltering && target === this.filterInput) && !(this.options.moduleName === 'SfComboBox' && !this.options.allowFiltering && sf.base.Browser.isDevice && target === this.containerElement.querySelector('.e-ddl-icon'))) {
        e.preventDefault();
      }
    };
    SfDropDownList.prototype.closePopup = function (closeEventArgs, options) {
      this.options = options;
      if (this.options.refreshVirtualIndices) {
        this.virtualInfo = null;
        this.preStartIndex = 0;
      }
      if (this.isPopupOpen() && !closeEventArgs.cancel && this.popupObj) {
        var animModel = {
          name: 'FadeOut',
          duration: 20,
          delay: 0
        };
        if (this.options.moduleName !== 'SfDropDownList') {
          sf.base.attributes(this.element, {
            'aria-expanded': 'false'
          });
        }
        this.element.removeAttribute('aria-owns');
        this.popupObj.hide(new sf.base.Animation(animModel));
      }
    };
    SfDropDownList.prototype.setScrollPosition = function (e, virtualAction) {
      this.preventScrollAction = true;
      if (!this.preventKeyAction) {
        if (!sf.base.isNullOrUndefined(e) && sf.base.isNullOrUndefined(virtualAction)) {
          switch (e.action) {
            case 'pageDown':
            case 'down':
            case 'end':
              this.mouseScrollAction = false;
              this.isKeyBoardAction = true;
              this.scrollBottom(false, false, e.action);
              break;
            default:
              this.mouseScrollAction = false;
              this.isKeyBoardAction = e.action == 'up' || e.action == 'pageUp' || e.action == 'open';
              this.scrollTop(e.action);
              break;
          }
        } else {
          if (virtualAction != null) {
            this.viewInfo = this.virtualInfo = virtualAction;
            this.viewInfo.startIndex = this.virtualInfo.startIndex = virtualAction.virtualItemStartIndex;
            this.viewInfo.endIndex = this.virtualInfo.endIndex = virtualAction.virtualItemEndIndex;
          }
          this.isKeyBoardAction = false;
          if (this.list) {
            this.scrollBottom(true);
          }
        }
      }
    };
    SfDropDownList.prototype.scrollBottom = function (isInitial, isInitialSelection, keyAction) {
      if (isInitialSelection === void 0) {
        isInitialSelection = false;
      }
      if (keyAction === void 0) {
        keyAction = null;
      }
      if (this.list && (this.list.querySelector('.' + ITEM_FOCUS) || this.list.querySelector('.' + SELECTED)) || this.options.enableVirtualization) {
        var selectedLI = this.list.querySelector('.' + ITEM_FOCUS) || this.list.querySelector('.' + SELECTED);
        if (selectedLI == null && this.options.enableVirtualization) {
          selectedLI = this.list.querySelector('.' + LIST_ITEM);
        }
        this.isUpwardScroll = false;
        var virtualListCount = this.list.querySelectorAll('.e-virtual-list').length;
        var currentOffset = this.list.offsetHeight;
        var groupBy = this.list.querySelector('li') ? this.list.querySelector('li').classList.contains(GROUP) : null;
        var lastElementValue = this.list.querySelector('li:last-of-type') ? this.list.querySelector('li:last-of-type').getAttribute('data-value') : null;
        var selectedLiOffsetTop = this.virtualInfo && this.virtualInfo.startIndex ? selectedLI.offsetTop + this.virtualInfo.startIndex * selectedLI.offsetHeight : selectedLI.offsetTop;
        var nextBottom = selectedLiOffsetTop - virtualListCount * selectedLI.offsetHeight + selectedLI.offsetHeight - this.list.scrollTop;
        var nextOffset = this.list.scrollTop + nextBottom - currentOffset;
        var isScrollerCHanged = false;
        nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10);
        var boxRange = selectedLiOffsetTop - virtualListCount * selectedLI.offsetHeight + selectedLI.offsetHeight - this.list.scrollTop;
        boxRange = groupBy && !sf.base.isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;
        if (this.activeIndex === 0) {
          this.list.scrollTop = 0;
          isScrollerCHanged = this.isKeyBoardAction;
        } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {
          var currentElementValue = selectedLI ? selectedLI.getAttribute('data-value') : null;
          var liCount = keyAction == "pageDown" ? this.getPageCount(this.popupObj.element) - 2 : 1;
          if (!this.options.enableVirtualization || this.isKeyBoardAction || isInitialSelection) {
            if (this.isKeyBoardAction && this.options.enableVirtualization && lastElementValue && currentElementValue === lastElementValue && keyAction != "end" && !this.isVirtualAction) {
              this.preventKeyAction = true;
              var filterInputHeight = this.options.moduleName === 'SfDropDownList' && keyAction == "pageDown" && this.filterInput ? this.filterInput.offsetHeight : 0;
              this.list.scrollTop += selectedLI.offsetHeight * liCount + filterInputHeight;
              this.preventKeyAction = this.IsScrollerAtEnd() ? false : this.preventKeyAction;
              this.isKeyBoardAction = false;
              this.preventScrollAction = false;
            } else if (this.options.enableVirtualization && keyAction == "end") {
              this.preventKeyAction = false;
              this.isKeyBoardAction = false;
              this.preventScrollAction = false;
              this.list.scrollTop = this.list.scrollHeight;
            } else {
              if (keyAction == "pageDown" && this.options.enableVirtualization && !this.isVirtualAction) {
                this.preventKeyAction = false;
                this.isKeyBoardAction = false;
                this.preventScrollAction = false;
                nextOffset = nextOffset + selectedLI.offsetHeight * liCount;
                this.list.scrollTop = nextOffset;
              } else if (selectedLI.previousElementSibling && selectedLI.previousElementSibling.classList.contains('e-virtual-list') && this.virtualInfo && this.virtualInfo.startIndex) {
                this.list.scrollTop = this.virtualInfo.startIndex * this.listHeight;
              } else {
                this.list.scrollTop = nextOffset;
              }
            }
          } else {
            this.list.scrollTop = this.virtualInfo && this.virtualInfo.startIndex ? this.virtualInfo.startIndex * this.listHeight : 0;
          }
          isScrollerCHanged = this.isKeyBoardAction;
        }
        this.isKeyBoardAction = isScrollerCHanged;
      }
    };
    SfDropDownList.prototype.scrollTop = function (keyAction) {
      if (keyAction === void 0) {
        keyAction = null;
      }
      if (this.list && (this.list.querySelector('.' + ITEM_FOCUS) || this.list.querySelector('.' + SELECTED))) {
        var virtualListCount = this.list.querySelectorAll('.e-virtual-list').length;
        var selectedLI = this.list.querySelector('.' + ITEM_FOCUS) || this.list.querySelector('.' + SELECTED);
        var selectedLiOffsetTop = this.virtualInfo && this.virtualInfo.startIndex ? selectedLI.offsetTop + this.virtualInfo.startIndex * selectedLI.offsetHeight : selectedLI.offsetTop;
        var nextOffset = selectedLiOffsetTop - virtualListCount * selectedLI.offsetHeight - this.list.scrollTop;
        var groupBy = this.list.querySelector('li:not(.e-virtual-list)').classList.contains(GROUP);
        var firstElementValue = this.list.querySelector('li.e-list-item:not(.e-virtual-list)') ? this.list.querySelector('li.e-list-item:not(.e-virtual-list)').getAttribute('data-value') : null;
        nextOffset = groupBy && !sf.base.isNullOrUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;
        var boxRange = selectedLiOffsetTop - virtualListCount * selectedLI.offsetHeight + selectedLI.offsetHeight - this.list.scrollTop;
        var isPageUpKeyAction = this.options.enableVirtualization && this.options.moduleName === 'SfAutoComplete' && nextOffset <= 0;
        if (this.activeIndex === 0) {
          this.list.scrollTop = 0;
        } else if (nextOffset < 0 || isPageUpKeyAction || nextOffset == 0 && keyAction == "home") {
          var currentElementValue = selectedLI ? selectedLI.getAttribute('data-value') : null;
          var liCount = keyAction == "pageUp" ? this.getPageCount(this.popupObj.element) - 2 : 1;
          if (this.options.enableVirtualization && this.isKeyBoardAction && firstElementValue && currentElementValue === firstElementValue && keyAction != "home" && !this.isVirtualAction) {
            this.isUpwardScroll = true;
            this.preventKeyAction = true;
            this.list.scrollTop -= selectedLI.offsetHeight * liCount;
            this.preventKeyAction = this.list.scrollTop != 0 ? this.preventKeyAction : false;
            this.isKeyBoardAction = false;
            this.preventScrollAction = false;
          } else if (this.options.enableVirtualization && keyAction == "home") {
            this.preventScrollAction = false;
            this.preventKeyAction = true;
            this.isKeyBoardAction = false;
            this.list.scrollTo(0, 0);
          } else {
            if (keyAction == "pageUp" && this.options.enableVirtualization && !this.isVirtualAction) {
              this.preventKeyAction = false;
              this.isKeyBoardAction = false;
              this.preventScrollAction = false;
              nextOffset = nextOffset - selectedLI.offsetHeight * liCount;
            }
            this.list.scrollTop = this.list.scrollTop + nextOffset;
          }
        } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {
          this.list.scrollTop = selectedLiOffsetTop - (groupBy && !sf.base.isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);
        }
      }
    };
    SfDropDownList.prototype.setHover = function (li) {
      if (li && !li.classList.contains(HOVER) && !li.classList.contains('e-virtual-list')) {
        this.removeHover();
        sf.base.addClass([li], HOVER);
      }
    };
    SfDropDownList.prototype.removeHover = function () {
      if (this.list) {
        var hoveredItem = this.list.querySelectorAll('.' + HOVER);
        if (hoveredItem && hoveredItem.length) {
          sf.base.removeClass(hoveredItem, HOVER);
        }
      }
    };
    SfDropDownList.prototype.isPopupOpen = function () {
      return this.popupObj && document.body.contains(this.popupObj.element);
    };
    SfDropDownList.prototype.getPageCount = function (popupElement, returnExactCount) {
      if (returnExactCount === void 0) {
        returnExactCount = false;
      }
      var list = popupElement && popupElement.querySelector('.e-content');
      if (list) {
        var liHeight = list.classList.contains('e-nodata') ? null : getComputedStyle(list.querySelectorAll('.e-list-item')[0], null).getPropertyValue('height');
        var pageCount = list.getBoundingClientRect().height / parseInt(liHeight, 10);
        return returnExactCount ? pageCount : Math.round(pageCount);
      }
      return 0;
    };
    return SfDropDownList;
  }();
  // tslint:disable
  var DropDownList = {
    initialize: function initialize(dataId, containerElement, element, dotnetRef, options) {
      if (element) {
        var instance = new SfDropDownList(dataId, containerElement, element, dotnetRef, options);
        instance.initialize();
        if (!sf.base.isNullOrUndefined(sf.base.closest(element, "fieldset")) && sf.base.closest(element, "fieldset").disabled) {
          var enabled = options.enabled = false;
          instance.dotNetRef.invokeMethodAsync('UpdateFieldSetStatus', enabled);
        }
        if (options.enableVirtualization) {
          return {
            'itemSize': instance.getListHeight(),
            'fullPopupHeight': window.outerHeight,
            'virtualPopupHeight': instance.virtualPopupHeight
          };
        }
      }
      return {
        'itemSize': 0,
        'fullPopupHeight': 0,
        'virtualPopupHeight': 0
      };
    },
    renderPopup: function renderPopup(dataId, popupElement, popupHolderEle, openEventArgs, isModifiedPopup, options, dataItem) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && popupElement && popupHolderEle) {
        instance.renderPopup(popupElement, popupHolderEle, openEventArgs, isModifiedPopup, options, dataItem);
      }
    },
    refreshPopup: function refreshPopup(dataId, isTyped, options) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.refreshPopup(isTyped, options);
      }
    },
    refreshVirtualIndices: function refreshVirtualIndices(dataId, totalCount) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.virtualInfo = null;
        instance.preStartIndex = 0;
        instance.options.totalCount = totalCount;
        instance.preEndIndex = 0;
      }
    },
    closePopup: function closePopup(dataId, closeEventArgs, options) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.closePopup(closeEventArgs, options);
      }
    },
    updateScrollPosition: function updateScrollPosition(dataId, args, virtualAction) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.preventKeyAction = false;
        instance.setScrollPosition(args, virtualAction);
        instance.isVirtualAction = false;
      }
    },
    getPageCount: function getPageCount(dataId, popupEle) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && popupEle) {
        return instance.getPageCount(popupEle);
      }
      return 0;
    },
    setAutoFillSelection: function setAutoFillSelection(dataId, currentValue) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.setAutoFillSelection(currentValue);
      }
    },
    removeFillSelection: function removeFillSelection(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.removeFillSelection();
      }
    },
    focusIn: function focusIn(dataId, isDropDown) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        if (isDropDown) {
          instance.containerElement.focus();
        } else {
          instance.element.focus();
        }
      }
    },
    focusOut: function focusOut(dataId, isDropDown) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        if (isDropDown) {
          instance.containerElement.blur();
        } else {
          instance.element.blur();
        }
      }
    },
    destroy: function destroy(dataId, popupElement, popupHolderEle, closeEventArgs, options) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        if (popupElement && popupElement instanceof HTMLElement && popupHolderEle) {
          instance.isDisposed = true;
          instance.closePopup(closeEventArgs, options);
        }
        instance.destroy();
      }
    }
  };
  return DropDownList;
}();

/***/ }),

/***/ "./modules/sf-listbox.js":
/*!*******************************!*\
  !*** ./modules/sf-listbox.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.ListBox = function () {
  'use strict';

  var CONTAINER = 'e-listbox-container';
  var LIST = '.e-ul';
  var LISTITEM = 'e-list-item';
  var SELECTED = 'e-selected';
  var DATAVALUE = 'data-value';
  var DRAGEND = 'DragEndAsync';
  var DOT = '.';
  var PLACEHOLDER = 'e-placeholder';
  var SPAN = 'span';
  var BADGE = 'e-list-badge';
  var PREVENT = 'e-drag-prevent';
  var KEYDOWN = 'keydown';
  var SORTABLE = 'sortable';
  var EMPTY = '';
  var UP = 38;
  var DOWN = 40;
  var KEYA = 65;
  var ITEMTEMPLATE;
  /**
   * Client side scripts for SfListBox
   */
  var SfListBox = /** @class */function () {
    function SfListBox(element, scope, allowDragDrop, dotnetRef, itemTemplate) {
      this.element = element;
      this.dotnetRef = dotnetRef;
      this.allowDragAndDrop = allowDragDrop;
      ITEMTEMPLATE = itemTemplate;
      this.element.blazor__instance = this;
      this.scope = scope;
      sf.base.EventHandler.add(this.element, KEYDOWN, this.keyDownHandler, this);
      if (allowDragDrop) {
        this.initializeDraggable();
      }
    }
    SfListBox.prototype.initializeDraggable = function () {
      var _this = this;
      if (!this.allowDragAndDrop) {
        return;
      }
      var ul = sf.base.select(LIST, this.element);
      var sortable = new sf.lists.Sortable(ul, {
        scope: this.scope,
        itemClass: LISTITEM,
        beforeDragStart: this.triggerBeforeDragStart.bind(this),
        drag: this.triggerDrag.bind(this),
        dragStart: this.triggerDragStart.bind(this),
        beforeDrop: this.dragEnd.bind(this),
        placeHolder: function placeHolder() {
          return sf.base.createElement(SPAN, {
            className: PLACEHOLDER
          });
        },
        helper: function helper(e) {
          var element = _this.element.cloneNode();
          var target = e.sender.cloneNode(true);
          element.appendChild(target);
          var refEle = sf.base.select(DOT + LISTITEM, _this.element);
          element.style.width = refEle.offsetWidth + 'px';
          element.style.height = refEle.offsetHeight + 'px';
          var selectedList = [].slice.call(sf.base.selectAll(DOT + LISTITEM + DOT + SELECTED, _this.element));
          if (selectedList.length && selectedList.length > 1 && selectedList.indexOf(e.sender) > -1) {
            target.appendChild(sf.base.createElement(SPAN, {
              className: BADGE,
              innerHTML: selectedList.length.toString()
            }));
          }
          element.style.zIndex = sf.popups.getZindexPartial(_this.element).toString();
          return element;
        }
      });
      this.updateDraggable(sortable, this.allowDragAndDrop);
    };
    SfListBox.prototype.triggerBeforeDragStart = function (args) {
      args.cancel = args.target.classList.contains(PREVENT);
    };
    SfListBox.prototype.triggerDragStart = function (args) {
      args.bindEvents(args.dragElement);
    };
    SfListBox.prototype.triggerDrag = function (args) {
      var scrollParent;
      var boundRect;
      var scrollMoved = 36;
      var diff = 0;
      var scrollHeight = 10;
      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      var event = args.event;
      var wrapper;
      if (ITEMTEMPLATE) {
        scrollHeight = args.target.scrollHeight;
      }
      if (args.target && (args.target.classList.contains("e-listbox-container") || args.target.classList.contains("e-list-item") || args.target.classList.contains("e-input-group") || args.target.classList.contains("e-filter-parent"))) {
        if (args.target.classList.contains("e-list-item") || args.target.classList.contains("e-input-group") || args.target.classList.contains("e-filter-parent")) {
          wrapper = args.target.closest('.e-listbox-container');
          if (sf.base.isNullOrUndefined(wrapper)) {
            wrapper = this.element;
          }
        } else {
          wrapper = args.target;
        }
        scrollParent = wrapper.querySelector('.e-list-parent');
        boundRect = scrollParent.getBoundingClientRect();
        if (wrapper.classList.contains("e-filter-list")) {
          diff = 40;
        }
        if (boundRect.y + scrollParent.offsetHeight - (event.pageY + scrollMoved) < 1) {
          scrollParent.scrollTop = scrollParent.scrollTop + scrollHeight;
        } else if (event.pageY - scrollMoved - (boundRect.y + diff) < 1) {
          scrollParent.scrollTop = scrollParent.scrollTop - scrollHeight;
        }
      }
      if (args.target === null) {
        return;
      }
    };
    SfListBox.prototype.dragEnd = function (args) {
      var isOutsideListbox = false;
      var scopedListBox = false;
      var sameListBox = false;
      var targetScope;
      var targetRef;
      var targetElement;
      targetElement = args.target.parentElement.parentElement;
      if (args.target.tagName == "UL" && args.target.className.indexOf("e-list-parent") > -1) {
        targetElement = args.target.parentElement;
      }
      // when filtering and toolbar enabled
      if (!targetElement.blazor__instance) {
        targetElement = targetElement.parentElement;
        if (targetElement.className.indexOf("e-list-item") > -1 || targetElement.className.indexOf("e-filter-list") > -1 && targetElement.closest(".e-listboxtool-wrapper")) {
          targetElement = targetElement.parentElement;
        }
        if (targetElement.className.indexOf("e-list-parent") > -1) {
          targetElement = targetElement.parentElement.parentElement;
        } else if (targetElement.className.indexOf("e-list-wrap") > -1) {
          targetElement = targetElement.parentElement;
        }
      }
      args.cancel = true;
      if (targetElement.blazor__instance) {
        targetScope = targetElement.blazor__instance.scope;
        targetRef = targetElement.blazor__instance.dotnetRef;
        if (this.scope === targetScope) {
          scopedListBox = true;
        } else {
          scopedListBox = false;
        }
        if (this.element === targetElement) {
          sameListBox = true;
          scopedListBox = false;
        } else if (!targetScope) {
          isOutsideListbox = true;
        }
      } else {
        isOutsideListbox = true;
      }
      // eslint-disable-next-line @typescript-eslint/no-explicit-any
      var targetPosition = args.helper.getBoundingClientRect();
      this.dotnetRef.invokeMethodAsync(DRAGEND, isOutsideListbox, args.droppedElement.getAttribute(DATAVALUE), sameListBox, scopedListBox, args.previousIndex, args.currentIndex, targetRef, targetPosition.x, targetPosition.y);
    };
    SfListBox.prototype.keyDownHandler = function (e) {
      var target = e.target;
      if (e.keyCode === UP || e.keyCode === DOWN) {
        e.preventDefault();
        if (target.classList.contains(CONTAINER)) {
          var listEle = sf.base.select(DOT + LISTITEM, this.element);
          if (listEle) {
            listEle.focus();
          }
        } else {
          var list = [].slice.call(sf.base.selectAll(DOT + LISTITEM, this.element));
          var index = list.indexOf(target);
          if (index < 0) {
            return;
          }
          index = e.keyCode === UP ? index - 1 : index + 1;
          if (index < 0 || index > list.length - 1) {
            return;
          }
          list[index].focus();
        }
      } else if (e.keyCode === KEYA && e.ctrlKey && !e.target.classList.contains('e-input-filter')) {
        e.preventDefault();
      }
    };
    SfListBox.prototype.updateDraggable = function (sortable, allowDragAndDrop) {
      if (sortable) {
        var draggable = sf.base.getComponent(sortable.element, sf.base.Draggable);
        if (allowDragAndDrop) {
          draggable.abort = EMPTY;
        } else {
          draggable.abort = DOT + LISTITEM;
        }
      }
    };
    SfListBox.prototype.destroyDraggable = function () {
      var sortable = sf.base.getComponent(sf.base.select(LIST, this.element), SORTABLE);
      if (!sf.base.isNullOrUndefined(sortable)) {
        this.updateDraggable(sortable, this.allowDragAndDrop);
        sortable.destroy();
      }
    };
    SfListBox.prototype.destroy = function () {
      this.destroyDraggable();
      sf.base.EventHandler.remove(this.element, KEYDOWN, this.keyDownHandler);
    };
    SfListBox.prototype.onPropertyChanged = function (result) {
      this.allowDragAndDrop = result;
      if (result) {
        this.initializeDraggable();
      } else {
        this.destroyDraggable();
      }
    };
    SfListBox.prototype.getScopedElement = function (scope) {
      return sf.base.select("#" + scope).blazor__instance.dotnetRef;
    };
    return SfListBox;
  }();
  // eslint-disable-next-line @typescript-eslint/naming-convention, no-underscore-dangle, id-blacklist, id-match
  var ListBox = {
    initialize: function initialize(element, scope, allowDragDrop, dotnetRef, itemTemplate) {
      if (!sf.base.isNullOrUndefined(element)) {
        new SfListBox(element, scope, allowDragDrop, dotnetRef, itemTemplate);
        var isHold_1 = false;
        var holdTimer_1;
        var target_1;
        element.addEventListener("touchstart", function () {
          isHold_1 = false;
          target_1 = null;
          holdTimer_1 = setTimeout(function () {
            isHold_1 = true;
          }, 500);
        });
        element.addEventListener("touchmove", function (args) {
          target_1 = args.target;
        });
        element.addEventListener("touchend", function (args) {
          clearTimeout(holdTimer_1);
          if (sf.base.isNullOrUndefined(target_1)) {
            if (isHold_1) {
              args.preventDefault();
            }
            dotnetRef.invokeMethodAsync('TouchHoldAsync', isHold_1, args.target.getAttribute('data-value'));
          }
        });
      }
    },
    destroy: function destroy(element) {
      if (!sf.base.isNullOrUndefined(element) && !sf.base.isNullOrUndefined(element.blazor__instance)) {
        element.blazor__instance.destroy();
      }
    },
    onPropertyChanged: function onPropertyChanged(element, result) {
      if (!sf.base.isNullOrUndefined(element) && !sf.base.isNullOrUndefined(element.blazor__instance)) {
        element.blazor__instance.onPropertyChanged(result);
      }
    },
    getScopedListBox: function getScopedListBox(element, scope) {
      return element.blazor__instance.getScopedElement(scope);
    }
  };
  return ListBox;
}();

/***/ }),

/***/ "./modules/sf-listview.js":
/*!********************************!*\
  !*** ./modules/sf-listview.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.ListView = function () {
  'use strict';

  var effectsConfig = {
    'None': [],
    'SlideLeft': ['SlideRightOut', 'SlideLeftOut', 'SlideLeftIn', 'SlideRightIn'],
    'SlideDown': ['SlideTopOut', 'SlideBottomOut', 'SlideBottomIn', 'SlideTopIn'],
    'Zoom': ['FadeOut', 'FadeZoomOut', 'FadeZoomIn', 'FadeIn'],
    'Fade': ['FadeOut', 'FadeOut', 'FadeIn', 'FadeIn']
  };
  var effectsRTLConfig = {
    'None': [],
    'SlideLeft': ['SlideLeftOut', 'SlideRightOut', 'SlideRightIn', 'SlideLeftIn'],
    'SlideDown': ['SlideBottomOut', 'SlideTopOut', 'SlideTopIn', 'SlideBottomIn'],
    'Zoom': ['FadeZoomOut', 'FadeOut', 'FadeIn', 'FadeZoomIn'],
    'Fade': ['FadeOut', 'FadeOut', 'FadeIn', 'FadeIn']
  };
  var SWIPEVELOCITY = 0.5;
  var DATASOURCEKEY = 'defaultData_Key';
  var HOVER = 'e-hover';
  var FOCUSED = 'e-focused';
  var LISTITEM = 'e-list-item';
  var GROUPLISTITEM = 'e-list-group-item';
  var HASCHILD = 'e-has-child';
  var HEADER = 'e-list-header';
  var HEADERTEXT = 'e-headertext';
  var DISABLE = 'e-disabled';
  var BACKICON = 'e-icon-back';
  var CHECKBOXWRAPPER = 'e-checkbox-wrapper';
  var CHECKED = 'e-check';
  var CHECKBOXICON = 'e-frame';
  var NONE = 'none';
  var VIRTUALULCONTAINER = 'e-list-virtualcontainer';
  var LISTNAVIGATION = 'e-list-navigation';
  var SfListView = /** @class */function () {
    // tslint:disable
    function SfListView(dataId, element, dotnetRef, properties, enableSelectEvent, datasource) {
      this.dataSourceLevel = [DATASOURCEKEY];
      this.currentDataSourceKey = DATASOURCEKEY;
      this.isWindow = false;
      this.liDifference = 0;
      this.liHeight = 0;
      this.virtualListDifference = 0;
      this.isCheckAll = false;
      // used to identify the focus action for list element 
      this.isFocus = false;
      // tslint:enable
      this.element = element;
      this.dotNetRef = dotnetRef;
      this.dataId = dataId;
      this.showCheckBox = properties.ShowCheckBox;
      this.showHeader = properties.ShowHeader;
      this.enable = properties.Enabled;
      this.currentUlElement = element.querySelector('ul');
      this.enableVirtualization = properties.EnableVirtualization;
      this.isWindow = properties.Height ? false : true;
      this.enableSelectEvent = enableSelectEvent;
      this.height = properties.Height;
      this.headerTitleInfo = [properties.HeaderTitle];
      this.selectedItems = {
        defaultData_Key: properties.SelectedElementIdInfo
      };
      this.enableRtl = properties.EnableRtl;
      this.animation = properties.Animation;
      this.isTemplate = properties.Template;
      this.focusId = [];
      window.sfBlazor.setCompInstance(this);
      this.datasource = datasource;
    }
    SfListView.prototype.initialize = function () {
      if (this.enableVirtualization) {
        if (this.isWindow) {
          this.dotNetRef.invokeMethodAsync('GetComponenetHeight', window.innerHeight);
        } else if (this.height.indexOf('%') !== -1) {
          var parentContainerHeight = this.element.parentElement.getBoundingClientRect().height;
          this.dotNetRef.invokeMethodAsync('GetComponenetHeight', parentContainerHeight / 100 * parseFloat(this.height));
        }
        this.updateLiElementHeight();
      }
      this.headerElement = this.element.querySelector('.' + HEADERTEXT);
      this.animationObject = new sf.base.Animation(this.animateOptions);
      this.wireEvents();
    };
    SfListView.prototype.wireEvents = function () {
      sf.base.EventHandler.add(this.element, 'focus', this.focusHandler, this);
      sf.base.EventHandler.add(this.element, 'mousedown', this.mouseDownHandler, this);
      sf.base.EventHandler.add(this.element, 'keydown', this.keyActionHandler, this);
      sf.base.EventHandler.add(this.element, 'click', this.clickHandler, this);
      sf.base.EventHandler.add(this.element, 'focusout', this.removeFocus, this);
      this.touchModule = new sf.base.Touch(this.element, {
        swipe: this.swipeActionHandler.bind(this)
      });
      if (this.enableVirtualization) {
        sf.base.EventHandler.add(this.element, 'scroll', this.scrollHandler, this);
        if (this.isWindow) {
          window.addEventListener('scroll', this.scrollHandler.bind(this));
        }
      } else {
        sf.base.EventHandler.add(this.element, 'mouseover', this.mouseHoverHandler, this);
        sf.base.EventHandler.add(this.element, 'mouseout', this.mouseOutHandler, this);
      }
    };
    SfListView.prototype.unWireEvents = function () {
      sf.base.EventHandler.remove(this.element, 'focus', this.focusHandler);
      sf.base.EventHandler.remove(this.element, 'mousedown', this.mouseDownHandler);
      sf.base.EventHandler.remove(this.element, 'keydown', this.keyActionHandler);
      sf.base.EventHandler.remove(this.element, 'click', this.clickHandler);
      sf.base.EventHandler.remove(this.element, 'focusout', this.removeFocus);
      if (this.enableVirtualization) {
        sf.base.EventHandler.remove(this.element, 'scroll', this.scrollHandler);
        if (this.isWindow) {
          window.removeEventListener('scroll', this.scrollHandler.bind(this));
        }
      } else {
        sf.base.EventHandler.remove(this.element, 'mouseover', this.mouseHoverHandler);
        sf.base.EventHandler.remove(this.element, 'mouseout', this.mouseOutHandler);
      }
      this.touchModule.destroy();
    };
    SfListView.prototype.swipeActionHandler = function (event) {
      if (event.swipeDirection === 'Right' && event.velocity > SWIPEVELOCITY && event.originalEvent.type === 'touchend') {
        if (this.showCheckBox && this.dataSourceLevel[this.dataSourceLevel.length - 1]) {
          this.uncheckAllItems();
        }
        this.back();
      }
    };
    SfListView.prototype.showHideItem = function (item, display) {
      var liElement = this.getLi(item);
      if (liElement) {
        liElement.style.display = display;
      }
    };
    SfListView.prototype.enableState = function (item, isEnable) {
      var liElement = this.getLi(item);
      if (liElement) {
        isEnable ? liElement.classList.remove('e-disabled') : liElement.classList.add('e-disabled');
      }
    };
    SfListView.prototype.getLi = function (item) {
      var liElement;
      if (this.element) {
        liElement = this.element.querySelector('[data-uid="' + item.id + '"]');
      }
      return liElement;
    };
    SfListView.prototype.scrollHandler = function (event) {
      var listDiff;
      // tslint:disable
      var scrollTop = this.isWindow ? event.target.documentElement.scrollTop : event.target.scrollTop;
      // tslint:enable
      if (!this.liHeight) {
        this.updateLiElementHeight();
      }
      listDiff = Math.round(scrollTop / this.liHeight);
      if (listDiff - this.liDifference >= this.virtualListDifference || listDiff - this.liDifference <= -1) {
        var focuseElement = this.currentUlElement.querySelector('.' + FOCUSED);
        if (focuseElement) {
          this.focusedElementId = focuseElement.getAttribute('data-uid');
        }
        var virtualElementContainer = this.element.querySelector('.' + VIRTUALULCONTAINER);
        if (virtualElementContainer) {
          virtualElementContainer.style.top = (listDiff - 1) * this.liHeight < 0 ? '0px' : (listDiff - 2) * this.liHeight + 'px';
          this.liDifference = listDiff;
          this.dotNetRef.invokeMethodAsync('VirtualScrolling', listDiff - 2);
        }
      }
    };
    SfListView.prototype.preventSelection = function (cancelArgs) {
      var target = this.mouseEvent.target;
      var liElement = sf.base.closest(target, '.' + LISTITEM);
      if (cancelArgs) {
        if (this.dataSourceLevel.length > 1) {
          this.dataSourceLevel.pop();
        }
      } else {
        this.performSelection(liElement);
      }
    };
    SfListView.prototype.performSelection = function (liElement) {
      if (liElement !== null) {
        if (!liElement.classList.contains(DISABLE) && this.enable) {
          this.removeFocus();
          this.focusId = [];
          this.addFocusId(liElement.getAttribute('data-uid'));
          if (!this.showCheckBox) {
            if (this.currentUlElement.querySelector('.' + FOCUSED)) {
              this.currentUlElement.querySelector('.' + FOCUSED).classList.remove(FOCUSED);
            }
            if (liElement.classList.contains(HASCHILD)) {
              this.setSelectLI(liElement, this.mouseEvent);
            } else {
              if (!liElement.classList.contains(FOCUSED)) {
                liElement.classList.add(FOCUSED);
                this.selectedItems[this.currentDataSourceKey][0] = liElement.getAttribute('data-uid');
              }
            }
          } else if (this.mouseEvent.target.classList.contains(CHECKBOXICON)) {
            this.checkUncheckItem(liElement);
          } else if (liElement.classList.contains(HASCHILD)) {
            this.removeHover();
            this.removeFocus();
            this.setSelectLI(liElement, this.mouseEvent);
          } else {
            this.checkUncheckItem(liElement);
          }
        }
      }
    };
    SfListView.prototype.updateLiElementHeight = function () {
      var virtualElementContainer = this.element.querySelector('.' + VIRTUALULCONTAINER);
      if (virtualElementContainer) {
        if (!this.currentUlElement) {
          this.currentUlElement = this.element.querySelector('ul');
        }
        var liElement = virtualElementContainer.children[0];
        if (liElement) {
          this.liHeight = liElement.getBoundingClientRect().height;
          if (this.liHeight) {
            if (this.enableVirtualization) {
              var parentContainerHeight = virtualElementContainer.getBoundingClientRect().height;
              virtualElementContainer.parentElement.style.height = parentContainerHeight + "px";
            }
          }
        } else {
          var dynamicElem = sf.base.createElement('li', {
            className: LISTITEM
          });
          virtualElementContainer.appendChild(dynamicElem);
          this.liHeight = virtualElementContainer.children[0].getBoundingClientRect().height;
          sf.base.detach(dynamicElem);
        }
        if (this.liHeight) {
          this.dotNetRef.invokeMethodAsync('UpdateLiElementHeight', this.liHeight);
        }
      }
    };
    SfListView.prototype.updateElementDifference = function (listDifference) {
      this.virtualListDifference = listDifference;
      if (this.enableVirtualization) {
        this.updateLiElementHeight();
      }
    };
    SfListView.prototype.selectItem = function (item) {
      var listItem = this.getLi(item);
      if (this.showCheckBox) {
        this.setChecked(listItem, listItem.querySelector('.' + CHECKBOXWRAPPER));
      } else {
        sf.base.isNullOrUndefined(listItem) ? this.removeFocus() : this.setSelectLI(listItem, null);
        this.selectedItems[this.currentDataSourceKey][0] = listItem.getAttribute('data-uid');
      }
    };
    SfListView.prototype.clickHandler = function (event) {
      if (this.currentUlElement && !this.element.classList.contains("e-disabled")) {
        var target = event.target;
        var classList = target.classList;
        this.mouseEvent = event;
        if (classList.contains(BACKICON) || classList.contains(HEADERTEXT)) {
          this.back();
        } else {
          var liElement = sf.base.closest(target.parentNode, '.' + LISTITEM) ? sf.base.closest(target.parentNode, '.' + LISTITEM) : sf.base.closest(target, '.' + LISTITEM);
          if (!this.enableSelectEvent) {
            this.performSelection(liElement);
          }
          if (liElement !== null && !liElement.classList.contains(DISABLE) && this.enable) {
            if (liElement.classList.contains(HASCHILD)) {
              var uID = liElement.getAttribute('data-uid');
              if (this.dataSourceLevel.indexOf(uID) === -1) this.dataSourceLevel.push(uID);
            }
            if (this.enableSelectEvent) {
              this.isFocus = false;
              this.getSelectEventData(liElement, event);
            }
          }
        }
      }
    };
    SfListView.prototype.checkUncheckItem = function (item) {
      item.classList.add(FOCUSED);
      !item.querySelector('.' + CHECKED) ? this.setChecked(item, item.querySelector('.' + CHECKBOXWRAPPER)) : this.uncheckItem(item);
      this.dotNetRef.invokeMethodAsync('UpdateData', !sf.base.isNullOrUndefined(item.querySelector('.' + CHECKED)), item.getAttribute("data-uid"));
    };
    SfListView.prototype.back = function () {
      if (this.dataSourceLevel.length > 1) {
        var ulElement = this.element.querySelectorAll('ul');
        var headerElement = this.element.querySelector('.' + HEADER);
        for (var i = 0; i < ulElement.length; i++) {
          if (this.dataSourceLevel.length > 2) {
            if (ulElement[i].getAttribute('pid') === this.dataSourceLevel[this.dataSourceLevel.length - 2]) {
              this.switchView(this.currentUlElement, ulElement[i], true);
              this.currentUlElement = ulElement[i];
            } else {
              ulElement[i].style.display = NONE;
            }
          } else if (ulElement[i].getAttribute('pid') === null) {
            this.switchView(this.currentUlElement, ulElement[i], true);
            this.currentUlElement = ulElement[i];
          } else {
            ulElement[i].style.display = NONE;
          }
        }
        this.dataSourceLevel.pop();
        if (!this.showCheckBox) {
          var focused_element = this.currentUlElement.querySelectorAll('.' + FOCUSED);
          focused_element[0].setAttribute('aria-selected', "false");
        }
        if (!this.isTemplate) {
          if (this.headerTitleInfo.length > 1) this.headerTitleInfo.pop();
          if (this.headerElement) {
            this.headerElement.innerText = this.headerTitleInfo[this.headerTitleInfo.length - 1];
          }
        }
        this.currentDataSourceKey = this.dataSourceLevel[this.dataSourceLevel.length - 1];
        if (this.dataSourceLevel.length === 1 && headerElement) {
          headerElement.children[0].style.display = NONE;
          headerElement.classList.remove(LISTNAVIGATION);
        }
        var backEventArgs = {
          IsInteracted: event || this.isRootFocus ? true : false,
          Level: this.dataSourceLevel.length > 0 ? this.dataSourceLevel.length - 1 : this.dataSourceLevel.length
        };
        this.dotNetRef.invokeMethodAsync('TriggerBackEvent', backEventArgs);
      }
    };
    SfListView.prototype.setHoverLI = function (liElement) {
      if (!this.element.classList.contains(DISABLE) && !liElement.classList.contains(DISABLE)) {
        liElement.classList.add(HOVER);
      }
    };
    SfListView.prototype.mouseHoverHandler = function (event) {
      var currentLiElemet = sf.base.closest(event.target.parentNode, '.' + LISTITEM);
      if (currentLiElemet) {
        this.setHoverLI(currentLiElemet);
      }
    };
    SfListView.prototype.mouseOutHandler = function (event) {
      this.removeHover();
    };
    SfListView.prototype.removeHover = function () {
      var hoverLI = this.element.querySelector('.' + HOVER);
      if (hoverLI) {
        hoverLI.classList.remove(HOVER);
      }
    };
    SfListView.prototype.removeFocus = function () {
      if (!this.currentUlElement) {
        this.currentUlElement = this.element.querySelector('ul');
      }
      var focusedLI = this.currentUlElement.querySelectorAll('.' + FOCUSED);
      for (var _i = 0, focusedLI_1 = focusedLI; _i < focusedLI_1.length; _i++) {
        var element = focusedLI_1[_i];
        element.classList.remove(FOCUSED);
      }
      this.isRestrictFocus = undefined;
    };
    SfListView.prototype.isValidLI = function (liElement) {
      return liElement && liElement.classList.contains(LISTITEM) && !liElement.classList.contains(GROUPLISTITEM) && !liElement.classList.contains(DISABLE);
    };
    SfListView.prototype.setSelectLI = function (liElement, e) {
      if (this.enable && this.isValidLI(liElement) && !liElement.classList.contains(FOCUSED)) {
        var focusedElement = this.currentUlElement.querySelector('.' + FOCUSED);
        if (focusedElement) {
          this.removeFocusId(focusedElement.getAttribute('data-uid'));
        }
        this.removeFocus();
        this.addAriaAttribute(true, liElement);
        this.removeHover();
        if (liElement.classList.contains(HASCHILD)) {
          this.renderSubList(liElement);
        }
      }
    };
    SfListView.prototype.addAriaAttribute = function (isSelected, element) {
      if (isSelected) {
        if (!this.isCheckAll) {
          element.classList.add(FOCUSED);
        }
        this.addFocusId(element.getAttribute('data-uid'));
      } else if (!this.showCheckBox && !isSelected && element.classList.contains(FOCUSED)) {
        element.classList.remove(FOCUSED);
        if (this.focusId.indexOf(element.getAttribute('data-uid')) >= 0) {
          this.focusId.splice(this.focusId.indexOf(element.getAttribute('data-uid')), 1);
        }
      }
      if (this.showCheckBox || element.classList.contains(HASCHILD)) {
        element.setAttribute('aria-selected', isSelected.toString());
      }
    };
    SfListView.prototype.renderSubList = function (listItem) {
      var liElement = listItem;
      var uID = listItem.getAttribute('data-uid');
      var headerElement = this.element.querySelector('.' + HEADER);
      listItem.classList.remove(FOCUSED);
      listItem.classList.add(FOCUSED);
      if (this.showHeader && headerElement) {
        headerElement.children[0].style.display = null;
        headerElement.classList.add(LISTNAVIGATION);
      }
      if (liElement.classList.contains(HASCHILD) && uID) {
        var ulElement = this.element.querySelector('[pid=\'' + uID + '\']');
        if (!ulElement) {
          var args = {
            ElementId: uID,
            Key: this.currentDataSourceKey
          };
          // tslint:disable
          this.dotNetRef.invokeMethodAsync('ListChildDataSource', args);
          // tslint:enable   
        } else {
          this.renderChildList(uID, [uID]);
        }
        if (!this.isTemplate) {
          this.headerTitleInfo.push(liElement.innerText.trim());
          if (this.headerElement) {
            this.headerElement.innerText = this.headerTitleInfo[this.headerTitleInfo.length - 1];
          }
        }
        if (this.dataSourceLevel.indexOf(uID) == -1) {
          this.dataSourceLevel.push(uID);
        }
        this.currentDataSourceKey = uID;
      }
    };
    SfListView.prototype.renderChildList = function (id, selectedItems) {
      var ulElement = this.element.querySelectorAll('ul');
      if (!ulElement[ulElement.length - 1].getAttribute('pid')) {
        ulElement[ulElement.length - 1].setAttribute('pid', id);
      }
      for (var i = 0; i < ulElement.length; i++) {
        if (ulElement[i].getAttribute('pid') === id) {
          this.switchView(this.currentUlElement, ulElement[i], false);
          this.currentUlElement = ulElement[i];
          var list_item = ulElement[i].querySelectorAll(".e-list-item");
          if (list_item[0].getAttribute("aria-level") !== i.toString()) {
            for (var j = 0; j < list_item.length; j++) {
              list_item[j].setAttribute('aria-level', i.toString());
            }
          }
          if (selectedItems) {
            this.selectedItems[id] = selectedItems;
          }
        }
      }
    };
    SfListView.prototype.mouseDownHandler = function () {
      this.isRestrictFocus = this.isRestrictFocus == undefined ? true : this.isRestrictFocus;
    };
    SfListView.prototype.focusHandler = function (e) {
      if (!this.isRestrictFocus) {
        if (sf.base.isNullOrUndefined(this.focusId) || this.focusId.length == 0) {
          this.isRootFocus = true;
          this.arrowKeyHandler(e);
          this.isRootFocus = false;
        } else {
          this.isFocus = true;
          this.updateFocusElement(e);
        }
      } else {
        this.isRestrictFocus = false;
      }
    };
    SfListView.prototype.keyActionHandler = function (event) {
      if (event.target.tagName != "INPUT" && event.target.tagName != "TEXTAREA") {
        switch (event.keyCode) {
          case 36:
            this.homeKeyHandler(event);
            break;
          case 35:
            this.homeKeyHandler(event, true);
            break;
          case 40:
            this.arrowKeyHandler(event);
            break;
          case 38:
            this.arrowKeyHandler(event, true);
            break;
          case 39:
            this.arrowKeyHandler(event);
            break;
          case 37:
            this.arrowKeyHandler(event, true);
            break;
          case 13:
            this.enterKeyHandler(event);
            break;
          case 8:
            var backIconElement = this.element.querySelector('.' + HEADER + ' .' + BACKICON);
            if (backIconElement && backIconElement.style.display != NONE) {
              if (this.showCheckBox && this.currentDataSourceKey) {
                this.uncheckAllItems();
              }
              this.back();
            }
            break;
          case 32:
            this.spaceKeyHandler(event);
            break;
        }
      }
    };
    SfListView.prototype.addFocusId = function (id) {
      if (this.focusId.indexOf(id) < 0) {
        this.focusId.push(id);
      }
    };
    SfListView.prototype.removeFocusId = function (id) {
      if (this.focusId.indexOf(id) >= 0) {
        this.focusId.splice(this.focusId.indexOf(id), 1);
      }
    };
    SfListView.prototype.updateFocusElement = function (event) {
      var focusedElement = this.currentUlElement.querySelector('.' + FOCUSED);
      if (focusedElement) {
        focusedElement.classList.remove(FOCUSED);
        if (this.focusId.indexOf(focusedElement.getAttribute('data-uid')) >= 0) {
          this.focusId.splice(this.focusId.indexOf(focusedElement.getAttribute('data-uid')), 1);
        }
      }
      var liCollection = this.currentUlElement.children;
      for (var i = 0; i < liCollection.length; i++) {
        if (this.focusId.indexOf(liCollection[i].getAttribute('data-uid')) >= 0) {
          liCollection[i].classList.add(FOCUSED);
          this.addFocusId(liCollection[i].getAttribute('data-uid'));
          this.addAriaAttribute(true, liCollection[i]);
          this.element.setAttribute('aria-activedescendant', liCollection[i].id.toString());
          if (this.enableSelectEvent) {
            this.getSelectEventData(liCollection[i], event);
            this.isFocus = false;
          }
        }
      }
    };
    SfListView.prototype.homeKeyHandler = function (event, end) {
      event.preventDefault();
      var focusedElement = this.currentUlElement.querySelector('.' + FOCUSED);
      if (focusedElement) {
        focusedElement.classList.remove(FOCUSED);
        this.removeFocusId(focusedElement.getAttribute('data-uid'));
      }
      var index = !end ? 0 : this.currentUlElement.children.length - 1;
      index = this.currentUlElement.children[index].classList.contains(GROUPLISTITEM) && this.currentUlElement.children.length > 1 ? index + 1 : index;
      var liElement = this.currentUlElement.children[index];
      this.addAriaAttribute(true, liElement);
      liElement.classList.add(FOCUSED);
      this.addFocusId(liElement.getAttribute('data-uid'));
      if (this.currentUlElement.children[index]) {
        this.element.setAttribute('aria-activedescendant', this.currentUlElement.children[index].id.toString());
      } else {
        this.element.removeAttribute('aria-activedescendant');
      }
      if (this.enableSelectEvent) {
        this.getSelectEventData(liElement, event);
      }
    };
    SfListView.prototype.onArrowKeyDown = function (event, previouse) {
      var siblingLI;
      var liElement;
      var hasChildElement = !sf.base.isNullOrUndefined(this.currentUlElement.querySelector('.' + HASCHILD)) ? true : false;
      if (hasChildElement || this.showCheckBox) {
        liElement = this.currentUlElement.querySelector('.' + FOCUSED) || this.currentUlElement.querySelector('.' + FOCUSED);
        if (liElement) {
          this.removeFocusId(liElement.getAttribute('data-uid'));
        }
        siblingLI = this.getSiblingLI(this.currentUlElement.querySelectorAll('.' + LISTITEM), liElement, previouse);
        if (!sf.base.isNullOrUndefined(siblingLI)) {
          if (liElement) {
            liElement.classList.remove(FOCUSED);
            if (!this.showCheckBox) {
              liElement.classList.remove(FOCUSED);
            }
            this.removeFocusId(liElement.getAttribute('data-uid'));
          }
          if (siblingLI.classList.contains(HASCHILD) || this.showCheckBox) {
            siblingLI.classList.add(FOCUSED);
          } else {
            this.setSelectLI(siblingLI, event);
          }
        }
      } else {
        liElement = this.currentUlElement.querySelector('.' + FOCUSED);
        siblingLI = this.getSiblingLI(this.currentUlElement.querySelectorAll('.' + LISTITEM), liElement, previouse);
        this.setSelectLI(siblingLI, event);
      }
      if (siblingLI) {
        this.element.setAttribute('aria-activedescendant', siblingLI.id.toString());
      } else {
        this.element.removeAttribute('aria-activedescendant');
      }
      return siblingLI;
    };
    SfListView.prototype.getSiblingLI = function (elementArray, element, isPrevious) {
      var siblingLiItem;
      var listIndex;
      var listCollections = Array.prototype.slice.call(elementArray);
      if (element) {
        listIndex = listCollections.indexOf(element);
      } else {
        listIndex = isPrevious === true ? listCollections.length : -1;
      }
      siblingLiItem = listCollections[listIndex + (isPrevious === true ? -1 : 1)];
      while (siblingLiItem && siblingLiItem.classList.contains(DISABLE)) {
        siblingLiItem = isPrevious === true ? siblingLiItem.previousElementSibling : siblingLiItem.nextElementSibling;
      }
      return siblingLiItem;
    };
    SfListView.prototype.arrowKeyHandler = function (event, previous) {
      if (!this.isRootFocus) {
        event.preventDefault();
      }
      if (this.currentUlElement) {
        var siblingLI = this.onArrowKeyDown(event, previous);
        if (siblingLI) {
          this.addFocusId(siblingLI.getAttribute('data-uid'));
        }
        var elementTop = this.element.getBoundingClientRect().top;
        var elementHeight = this.element.getBoundingClientRect().height;
        var heightDiff = void 0;
        if (siblingLI) {
          var siblingTop = siblingLI.getBoundingClientRect().top;
          var siblingHeight = siblingLI.getBoundingClientRect().height;
          if (!previous) {
            var height = this.isWindow ? window.innerHeight : elementHeight;
            heightDiff = this.isWindow ? siblingTop + siblingHeight : siblingTop - elementTop + siblingHeight;
            if (heightDiff > height) {
              this.isWindow ? window.scroll(0, pageYOffset + (heightDiff - height)) : this.element.scrollTop = this.element.scrollTop + (heightDiff - height);
            }
          } else {
            heightDiff = this.isWindow ? siblingTop : siblingTop - elementTop;
            if (heightDiff < 0) {
              this.isWindow ? window.scroll(0, pageYOffset + heightDiff) : this.element.scrollTop = this.element.scrollTop + heightDiff;
            }
          }
        }
      }
    };
    SfListView.prototype.enterKeyHandler = function (event) {
      if (this.currentUlElement) {
        var liElement = this.currentUlElement.querySelector('.' + FOCUSED);
        if (this.currentUlElement.querySelector('.' + HASCHILD) && liElement) {
          liElement.classList.remove(FOCUSED);
          if (this.showCheckBox) {
            this.removeFocus();
            this.removeHover();
          }
          this.setSelectLI(liElement, event);
        } else if (!sf.base.isNullOrUndefined(liElement)) {
          this.spaceKeyHandler(event);
        }
      }
    };
    SfListView.prototype.checkAllItems = function () {
      this.isCheckAll = true;
      this.updateCheckBoxState(true);
      this.isCheckAll = false;
    };
    SfListView.prototype.uncheckAllItems = function () {
      this.updateCheckBoxState(false);
    };
    SfListView.prototype.updateCheckBoxState = function (isChecked) {
      if (this.showCheckBox) {
        var liCollection = this.currentUlElement.querySelectorAll('li');
        var liElementCount = !this.enableVirtualization ? this.currentUlElement.childElementCount : this.currentUlElement.querySelector('.' + VIRTUALULCONTAINER).childElementCount;
        for (var i = 0; i < liElementCount; i++) {
          var checkIcon = liCollection[i].querySelector('.' + CHECKBOXICON);
          if (checkIcon) {
            if (isChecked && !checkIcon.classList.contains(CHECKED)) {
              this.checkItem(liCollection[i]);
            } else if (!isChecked && checkIcon.classList.contains(CHECKED)) {
              this.uncheckItem(liCollection[i]);
            }
          }
        }
      }
    };
    SfListView.prototype.checkItem = function (item) {
      this.toggleCheckBox(item, true);
    };
    //tslint:disable-next-line
    SfListView.prototype.getCheckData = function (item, isCheck, fieldId) {
      var id = item.id;
      if (fieldId !== item.id || sf.base.isNullOrUndefined(item.id)) {
        fieldId = fieldId.toLowerCase();
        //tslint:disable-next-line
        for (var _i = 0, _a = Object.entries(item); _i < _a.length; _i++) {
          var _b = _a[_i],
            key = _b[0],
            value = _b[1];
          var tempItem = "" + key;
          var tempVal = "" + value;
          tempItem = tempItem.toLowerCase();
          if (tempItem === fieldId) {
            id = tempVal;
          }
        }
      }
      var liItem = this.currentUlElement.querySelector('[data-uid=\'' + id + '\']');
      isCheck ? this.checkItem(liItem) : this.uncheckItem(liItem);
      this.removeFocus();
    };
    SfListView.prototype.spaceKeyHandler = function (event) {
      if (!this.isTemplate) {
        event.preventDefault();
      }
      if (this.enable && this.showCheckBox && this.currentUlElement) {
        var liElement = this.currentUlElement.querySelector('.' + FOCUSED);
        if (!sf.base.isNullOrUndefined(liElement) && sf.base.isNullOrUndefined(liElement.querySelector('.' + CHECKED))) {
          this.setChecked(liElement, liElement.querySelector('.' + CHECKBOXWRAPPER));
        } else {
          this.uncheckItem(liElement);
        }
        if (this.enableSelectEvent) {
          this.getSelectEventData(liElement, event);
        }
      }
    };
    SfListView.prototype.setChecked = function (item, checkboxElement) {
      this.removeFocus();
      item.classList.add(FOCUSED);
      this.addAriaAttribute(true, item);
      if (checkboxElement) {
        checkboxElement.querySelector('.' + CHECKBOXICON).classList.add(CHECKED);
        checkboxElement.setAttribute('aria-checked', 'true');
      }
      if (this.selectedItems[this.currentDataSourceKey] && this.selectedItems[this.currentDataSourceKey].indexOf(item.getAttribute('data-uid')) === -1) {
        this.selectedItems[this.currentDataSourceKey].push(item.getAttribute('data-uid'));
      }
    };
    SfListView.prototype.toggleCheckBox = function (item, isChecked) {
      if (this.showCheckBox) {
        var liElement = item;
        if (!sf.base.isNullOrUndefined(liElement)) {
          var checkboxIconElement = liElement.querySelector('.' + CHECKBOXICON);
          this.addAriaAttribute(isChecked, liElement);
          if (!sf.base.isNullOrUndefined(checkboxIconElement)) {
            isChecked ? checkboxIconElement.classList.add(CHECKED) : checkboxIconElement.classList.remove(CHECKED);
            checkboxIconElement.parentElement.setAttribute('aria-checked', isChecked ? 'true' : 'false');
          }
        }
      }
    };
    SfListView.prototype.uncheckItem = function (item) {
      if (item) {
        if (this.selectedItems[this.currentDataSourceKey] && this.selectedItems[this.currentDataSourceKey].indexOf(item.getAttribute('data-uid')) !== -1) {
          this.selectedItems[this.currentDataSourceKey].splice(this.selectedItems[this.currentDataSourceKey].indexOf(item.getAttribute('data-uid')), 1);
        }
        this.toggleCheckBox(item, false);
      }
    };
    SfListView.prototype.addCheckClass = function () {
      if (!this.currentUlElement) {
        this.currentUlElement = this.element.querySelector('ul');
      }
      var liCollection = this.enableVirtualization ? this.currentUlElement.querySelector('.' + VIRTUALULCONTAINER).children : this.currentUlElement.children;
      var selectedItemsId = this.selectedItems[this.currentDataSourceKey];
      for (var i = 0; i < liCollection.length; i++) {
        if (!this.showCheckBox) {
          if (selectedItemsId[0] === liCollection[i].getAttribute('data-uid')) {
            liCollection[i].classList.add(FOCUSED);
          } else {
            liCollection[i].classList.remove(FOCUSED);
          }
        } else {
          if (this.focusedElementId) {
            this.focusedElementId === liCollection[i].getAttribute('data-uid') ? liCollection[i].classList.add(FOCUSED) : liCollection[i].classList.remove(FOCUSED);
          }
          if (selectedItemsId.length > 0) {
            if (selectedItemsId.indexOf(liCollection[i].getAttribute('data-uid')) !== -1) {
              this.toggleCheckBox(liCollection[i], true);
            } else {
              this.toggleCheckBox(liCollection[i], false);
            }
          }
        }
      }
      for (var i = 0; i < liCollection.length; i++) {
        if (!this.showCheckBox) {
          if (selectedItemsId && selectedItemsId[0] === liCollection[i].getAttribute('data-uid')) {
            liCollection[i].classList.add(FOCUSED);
          } else {
            liCollection[i].classList.remove(FOCUSED);
          }
        } else {
          if (this.focusedElementId) {
            this.focusedElementId === liCollection[i].getAttribute('data-uid') ? liCollection[i].classList.add(FOCUSED) : liCollection[i].classList.remove(FOCUSED);
          }
          if (selectedItemsId.length > 0) {
            if (selectedItemsId.indexOf(liCollection[i].getAttribute('data-uid')) !== -1) {
              this.toggleCheckBox(liCollection[i], true);
            } else {
              this.toggleCheckBox(liCollection[i], false);
            }
          }
        }
      }
    };
    SfListView.prototype.getSelectedItems = function () {
      var liCollection = this.currentUlElement.querySelectorAll(".e-check");
      this.selectedItems[this.currentDataSourceKey] = [];
      for (var i = 0; i < liCollection.length; i++) {
        var item = sf.base.closest(liCollection[i], '.' + LISTITEM);
        if (this.selectedItems[this.currentDataSourceKey] && this.selectedItems[this.currentDataSourceKey].indexOf(item.getAttribute('data-uid')) === -1) {
          this.selectedItems[this.currentDataSourceKey].push(item.getAttribute('data-uid'));
        }
      }
      return {
        ElementId: this.selectedItems[this.currentDataSourceKey],
        Key: this.currentDataSourceKey
      };
    };
    SfListView.prototype.getSelectEventData = function (liElement, event) {
      if (liElement) {
        var checked = event.type === 'click' ? liElement.querySelector('.' + CHECKED) ? false : true : liElement.querySelector('.' + CHECKED) ? true : false;
        var clickEventArgs = {
          ElementId: liElement.getAttribute('data-uid'),
          IsChecked: checked,
          Key: liElement.classList.contains(HASCHILD) && !event.target.classList.contains(CHECKBOXICON) ? this.dataSourceLevel[this.dataSourceLevel.length - 2] : this.currentDataSourceKey,
          IsInteracted: event || this.isRootFocus ? true : false,
          Level: this.dataSourceLevel.length > 0 ? this.dataSourceLevel.length - 1 : this.dataSourceLevel.length
        };
        if (!this.isFocus) {
          this.dotNetRef.invokeMethodAsync('TriggerClickEvent', clickEventArgs);
        }
      }
    };
    // Animation Related Functions
    SfListView.prototype.switchView = function (fromView, toView, reverse) {
      var _this = this;
      if (fromView && toView) {
        var fromViewPosition_1 = fromView.style.position;
        var overflow_1 = this.element.style.overflow !== 'hidden' ? this.element.style.overflow : '';
        var animationEffect = void 0;
        var duration = this.animation.duration;
        fromView.style.position = 'absolute';
        fromView.classList.add('e-view');
        if (sf.base.animationMode === 'Disable') {
          var animationNone = 'None';
          animationEffect = this.enableRtl ? effectsRTLConfig[animationNone] : effectsConfig[animationNone];
          reverse = this.enableRtl;
          duration = 0;
        } else if (this.animation.effect) {
          if (this.animation.effect === 'None' && sf.base.animationMode === 'Enable') {
            this.animation.effect = 'SlideLeft';
          }
          animationEffect = this.enableRtl ? effectsRTLConfig[this.animation.effect] : effectsConfig[this.animation.effect];
        } else {
          var slideLeft = 'SlideLeft';
          animationEffect = effectsConfig[slideLeft];
          reverse = this.enableRtl;
          duration = 0;
        }
        this.element.style.overflow = 'hidden';
        this.animationObject.animate(fromView, {
          name: reverse ? animationEffect[0] : animationEffect[1],
          duration: duration,
          timingFunction: this.animation.easing,
          end: function end(model) {
            fromView.style.display = NONE;
            _this.element.style.overflow = overflow_1;
            fromView.style.position = fromViewPosition_1;
            fromView.classList.remove('e-view');
          }
        });
        toView.style.display = '';
        this.animationObject.animate(toView, {
          name: reverse ? animationEffect[2] : animationEffect[3],
          duration: duration,
          timingFunction: this.animation.easing,
          end: function end() {
            _this.dotNetRef.invokeMethodAsync('TriggerActionComplete', _this.datasource);
          }
        });
        this.currentUlElement = toView;
      }
    };
    SfListView.prototype.setAnimation = function (animation) {
      this.animation = animation;
    };
    SfListView.prototype.setSelectedItems = function (selectedElementIdInfo) {
      var headerElement = this.element.querySelector('.' + HEADER);
      if (!sf.base.isNullOrUndefined(selectedElementIdInfo)) {
        this.selectedItems = {
          defaultData_Key: selectedElementIdInfo
        };
      }
      if (selectedElementIdInfo.length > 0) {
        this.currentUlElement = this.element.querySelector('[data-uid="' + selectedElementIdInfo + '"]').closest("ul");
      } else {
        this.currentUlElement = this.element.querySelector("ul");
      }
      var isChild = this.element.querySelector('[data-uid="' + selectedElementIdInfo + '"]').classList.contains("e-has-child");
      if (isChild) {
        this.dataSourceLevel = [DATASOURCEKEY];
        this.currentUlElement.style.removeProperty('display');
        this.addCheckClass();
        this.currentDataSourceKey = DATASOURCEKEY;
      } else {
        this.selectedItems[this.currentDataSourceKey] = [this.currentDataSourceKey];
      }
      if (this.showCheckBox) {
        this.removeFocus();
      }
      if (this.headerElement && isChild) {
        this.headerTitleInfo = this.headerTitleInfo.splice(0, 1);
        this.headerElement.innerText = this.headerTitleInfo[this.headerTitleInfo.length - 1];
      }
      if (this.dataSourceLevel.length === 1 && headerElement && isChild) {
        headerElement.children[0].style.display = NONE;
        headerElement.classList.remove(LISTNAVIGATION);
      }
    };
    SfListView.prototype.updateHeaderTitle = function (title) {
      this.headerTitleInfo[0] = title;
      if (this.headerElement) {
        this.headerElement.innerText = title;
      }
    };
    SfListView.prototype.destroy = function () {
      this.element.style.display = NONE;
      this.unWireEvents();
    };
    return SfListView;
  }();
  var listView = {
    // tslint:disable
    initialize: function initialize(dataId, element, dotnetRef, properties, isSelect, liDiff, datasource) {
      // tslint:enable
      if (element && dataId) {
        new SfListView(dataId, element, dotnetRef, properties, isSelect, datasource);
        var instance = window.sfBlazor.getCompInstance(dataId);
        instance.initialize();
        instance.updateElementDifference(liDiff);
      }
    },
    renderChildList: function renderChildList(dataId, parentId, selectedItems) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.renderChildList(parentId, selectedItems);
      }
    },
    addActiveClass: function addActiveClass(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.addCheckClass();
      }
    },
    // tslint:disable
    showHideItem: function showHideItem(dataId, item, display) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      // tslint:enable
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.showHideItem(item, display);
      }
    },
    // tslint:disable
    enableState: function enableState(dataId, item, isEnable) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      // tslint:enable
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.enableState(item, isEnable);
      }
    },
    back: function back(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.back();
      }
    },
    checkAllItems: function checkAllItems(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.checkAllItems();
      }
    },
    uncheckAllItems: function uncheckAllItems(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.uncheckAllItems();
      }
    },
    // tslint:disable
    getCheckData: function getCheckData(dataId, item, isCheck, fieldId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      // tslint:enable
      if (!sf.base.isNullOrUndefined(instance) && item != null) {
        for (var i = 0; i < item.length; i++) {
          instance.getCheckData(item[i], isCheck, fieldId);
        }
      }
    },
    // tslint:disable
    selectItem: function selectItem(dataId, item) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      // tslint:enable
      if (!sf.base.isNullOrUndefined(instance) && item != null) {
        for (var i = 0; i < item.length; i++) {
          instance.selectItem(item[i]);
        }
      }
    },
    preventSelection: function preventSelection(dataId, cancelArgs) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.preventSelection(cancelArgs);
      }
    },
    updateLiElementHeight: function updateLiElementHeight(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateLiElementHeight();
      }
    },
    getCheckedItems: function getCheckedItems(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      return !sf.base.isNullOrUndefined(instance) ? instance.getSelectedItems() : {};
    },
    setAnimation: function setAnimation(dataId, animaton) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.setAnimation(animaton);
      }
    },
    setCheckedItems: function setCheckedItems(dataId, selectedElementIdInfo) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.setSelectedItems(selectedElementIdInfo);
      }
    },
    updateHeaderTitle: function updateHeaderTitle(dataId, title) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateHeaderTitle(title);
      }
    },
    destroy: function destroy(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.destroy();
      }
    },
    updateElementDifference: function updateElementDifference(dataId, listDiff) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateElementDifference(listDiff);
      }
    }
  };
  return listView;
}();

/***/ }),

/***/ "./modules/sf-menu.js":
/*!****************************!*\
  !*** ./modules/sf-menu.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.Menu = function () {
  'use strict';

  var MENUITEM$1 = 'e-menu-item';
  var FOCUSED$1 = 'e-focused';
  var SELECTED$1 = 'e-selected';
  var CONTAINER$1 = 'e-menu-container';
  var MENU$1 = 'e-contextmenu';
  var SUBMENU = 'e-ul';
  var SEPARATOR = 'e-separator';
  var DISABLED = 'e-disabled';
  var HIDE = 'e-menu-hide';
  var MENUPARENT$1 = 'e-menu-parent';
  var RTL = 'e-rtl';
  var HAMBURGER$1 = '.e-hamburger';
  var SCROLLMENU$1 = '.e-menu-vscroll';
  var NONE$1 = 'none';
  var DOT$1 = '.';
  var ESC = 27;
  var ENTER = 13;
  var UP$1 = 38;
  var DOWN$1 = 40;
  var LEFT$1 = 37;
  var RIGHT$1 = 39;
  /**
   * Keyboard action handler common for menu and context menu.
   * @hidden
   */
  function keyActionHandler(container, target, keyCode, menuId) {
    if (keyCode === 9 && menuId) {
      keyCode = RIGHT$1;
    }
    if (keyCode === DOWN$1 || keyCode === UP$1) {
      var index = void 0;
      var ul = void 0;
      var focusedLi = void 0;
      if (target.classList.contains(MENUPARENT$1)) {
        ul = target;
        focusedLi = ul.querySelector("" + DOT$1 + MENUITEM$1 + DOT$1 + FOCUSED$1);
        if (focusedLi) {
          index = Array.prototype.indexOf.call(ul.children, focusedLi);
          index = keyCode === DOWN$1 ? index === ul.childElementCount - 1 ? 0 : index + 1 : index === 0 ? ul.childElementCount - 1 : index - 1;
        } else {
          index = 0;
        }
        index = isValidLI(ul, index, keyCode === DOWN$1);
      } else if (target.classList.contains(MENUITEM$1)) {
        ul = target.parentElement;
        focusedLi = ul.querySelector("" + DOT$1 + MENUITEM$1 + DOT$1 + FOCUSED$1);
        index = Array.prototype.indexOf.call(ul.children, focusedLi ? focusedLi : target);
        index = keyCode === DOWN$1 ? index === ul.childElementCount - 1 ? 0 : index + 1 : index === 0 ? ul.childElementCount - 1 : index - 1;
        index = isValidLI(ul, index, keyCode === DOWN$1);
      }
      if (ul && index !== -1) {
        ul.children[index].focus();
      }
    } else if (((container.classList.contains(RTL) ? keyCode === RIGHT$1 : keyCode === LEFT$1) || keyCode === ESC || keyCode === RIGHT$1 && !target.classList.contains("e-menu-caret-icon") && menuId || keyCode === ENTER && sf.base.closest(target, DOT$1 + CONTAINER$1)) && (target.classList.contains(SUBMENU) || target.classList.contains(MENUITEM$1) && !target.parentElement.classList.contains(MENU$1))) {
      var menuContainer = void 0;
      if (menuId) {
        menuContainer = sf.base.select(menuId);
      }
      var ul = target.classList.contains(SUBMENU) ? target : target.parentElement;
      var menu = sf.base.closest(ul, SCROLLMENU$1);
      var selectedLi = void 0;
      var previousUl = menu ? menu.previousElementSibling : ul.previousElementSibling;
      if (menuContainer && (!previousUl || keyCode === ENTER)) {
        selectedLi = sf.base.select("" + DOT$1 + MENUITEM$1 + DOT$1 + SELECTED$1, menuContainer);
        menu = sf.base.select(SCROLLMENU$1, container);
        // tslint:disable-next-line:no-any
        if (menu) {
          menuContainer.blazor__instance.destroyScroll(NONE$1);
        }
      } else {
        var hamburgerMenu = sf.base.closest(ul, HAMBURGER$1);
        if (hamburgerMenu) {
          selectedLi = sf.base.select("" + DOT$1 + MENUITEM$1 + DOT$1 + SELECTED$1, hamburgerMenu);
        } else {
          selectedLi = sf.base.select("" + DOT$1 + MENUITEM$1 + DOT$1 + SELECTED$1, previousUl);
        }
      }
      if (selectedLi) {
        selectedLi.focus();
      }
    }
  }
  function isValidLI(ul, index, isKeyDown, count) {
    if (count === void 0) {
      count = 0;
    }
    var cli = ul.children[index];
    if (count === ul.childElementCount) {
      return -1;
    }
    if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {
      index = isKeyDown ? index === ul.childElementCount - 1 ? 0 : index + 1 : index === 0 ? ul.childElementCount - 1 : index - 1;
      count++;
    }
    cli = ul.children[index];
    if (cli.classList.contains(SEPARATOR) || cli.classList.contains(DISABLED) || cli.classList.contains(HIDE)) {
      index = isValidLI(ul, index, isKeyDown);
    }
    return index;
  }
  var CONTAINER = 'e-menu-container';
  var MENUCLASS = '.e-menu';
  var MENUITEM = 'e-menu-item';
  var FOCUSED = '.e-focused';
  var SELECTED = '.e-selected';
  var MENU = '.e-ul';
  var MOUSEDOWNHANDLER = 'DocumentMouseDownAsync';
  var PIXEL = 'px';
  var MOUSEDOWN = 'mousedown touchstart';
  var MOUSEOVER = 'mouseover';
  var CLICK = 'click';
  var RESIZE = 'resize';
  var HASH = '#';
  var EMPTY = '';
  var DOT = '.';
  var MENUPARENT = 'e-menu-parent';
  var MENUCARET = 'e-menu-caret-icon';
  var KEYDOWN = 'keydown';
  var HAMBURGER = 'e-hamburger';
  var VERTICAL = 'e-vertical';
  var VSCROLL = 'vscroll';
  var HSCROLL = 'hscroll';
  var SCROLLMENU = 'e-menu-';
  var SCROLLNAV = '.e-scroll-nav';
  var NONE = 'none';
  var SCROLL = 'scroll';
  var LEFT = 37;
  var RIGHT = 39;
  var UP = 38;
  var DOWN = 40;
  var SUBMENUITEM;
  /**
   * Client side scripts for SfMenu
   */
  var SfMenu = /** @class */function () {
    function SfMenu(options, dotnetRef) {
      this.dataId = options.dataId;
      this.element = options.element;
      this.dotnetRef = dotnetRef;
      this.enableScroller = options.enableScrolling;
      window.sfBlazor.setCompInstance(this);
      this.addEventListener();
      this.updateScroll(options.enableScrolling, options.isRtl, false);
    }
    SfMenu.prototype.calculatePosition = function (args, enterKey) {
      SUBMENUITEM = args;
      var left;
      var top;
      var parent = args.element.getElementsByClassName(MENUITEM)[args.itemIndex];
      var offset = parent.getBoundingClientRect();
      this.popupInstance = window.sfBlazor.getCompInstance(args.popupDataId);
      var menu = this.popupInstance.hideMenu(true);
      if (!menu) {
        return;
      }
      this.popup = args.popup;
      if (args.enableScrolling) {
        menu = this.positionHelper(args, menu);
        var scrollElement = this.popup.querySelector('.e-vscroll-bar');
        if (scrollElement) {
          sf.base.EventHandler.add(scrollElement, SCROLL, this.scrollHandler, this);
        }
      }
      var ul = menu.classList.contains(MENUPARENT) ? menu : sf.base.select(DOT + MENUPARENT, menu);
      this.popupInstance.setBlankIconStyle(ul, args.isRtl);
      var menuOffset = ul.getBoundingClientRect();
      var width = this.popupInstance.getMenuWidth(ul, menuOffset.width, args.isRtl);
      if (args.isVertical) {
        top = offset.top;
        if (args.isRtl) {
          left = offset.left;
          if (left - width < document.documentElement.clientLeft) {
            var newLeft = offset.right + width;
            if (newLeft < document.documentElement.clientWidth) {
              left = newLeft;
            }
          }
        } else {
          left = offset.right;
          if (left + width > document.documentElement.clientWidth) {
            var newLeft = offset.left - width;
            if (newLeft > document.documentElement.clientLeft) {
              left = newLeft;
            }
          }
        }
      } else {
        top = offset.bottom;
        if (args.isRtl) {
          left = offset.right;
          if (offset.right - width < document.documentElement.clientLeft) {
            var newLeft = offset.left + width;
            if (newLeft < document.documentElement.clientWidth) {
              left = newLeft;
            }
          }
        } else {
          left = offset.left;
          if (left + width > document.documentElement.clientWidth) {
            var newLeft = offset.right - width;
            if (newLeft > document.documentElement.clientLeft) {
              left = newLeft;
            }
          }
        }
      }
      var height = args.scrollHeight || menuOffset.height;
      if (top + height > document.documentElement.clientHeight) {
        var newTop = document.documentElement.clientHeight - height - 20;
        if (newTop > document.documentElement.clientTop) {
          top = newTop;
        }
      }
      this.popupInstance.updateProperty(args.showItemOnClick, args.element);
      this.popup.style.zIndex = sf.popups.getZindexPartial(this.popup).toString();
      menu.style.width = Math.ceil(width) + PIXEL;
      this.popup.style.left = Math.ceil(left) + PIXEL;
      this.popup.style.top = Math.ceil(top) + PIXEL;
      ul.style.visibility = EMPTY;
      if (enterKey) {
        ul.focus();
      }
    };
    SfMenu.prototype.subMenuPosition = function (args, enterKey) {
      var popupInstance = window.sfBlazor.getCompInstance(args.popupDataId);
      var menu = popupInstance.hideMenu();
      if (args.enableScrolling && menu) {
        menu = this.positionHelper(args, menu);
      }
      popupInstance.subMenuPosition(menu, args.isRtl, args.showItemOnClick, false, args.scrollHeight, false, enterKey);
    };
    SfMenu.prototype.positionHelper = function (args, menu) {
      this.destroyScroll(null, menu);
      return args.scrollHeight ? sf.navigations.addScrolling(sf.base.createElement, args.popup, menu, VSCROLL, args.isRtl, args.scrollHeight) : menu;
    };
    SfMenu.prototype.clickHandler = function (e) {
      var target = e.target;
      if (!sf.base.isNullOrUndefined(this.popup) && sf.base.closest(target, HASH + this.popup.id)) {
        var li = sf.base.closest(target, DOT + MENUITEM);
        if (li && !li.classList.contains(MENUCARET)) {
          if (!sf.base.closest(target, DOT + MENUITEM + SELECTED)) {
            this.destroyScroll(NONE);
          }
          var selectedLi = sf.base.select(SELECTED, this.element);
          if (selectedLi && (!sf.base.closest(document.activeElement, HASH + this.popup.id) || document.activeElement.tagName === "LI")) {
            selectedLi.focus();
          }
        }
      } else if (sf.base.closest(target, HASH + this.element.id + DOT + HAMBURGER) && !target.classList.contains(MENUPARENT) && !target.classList.contains(CONTAINER)) {
        var li = target.classList.contains(MENUITEM) ? target : sf.base.closest(target, DOT + MENUITEM + FOCUSED);
        if (li && !li.classList.contains(MENUCARET)) {
          this.focusMenu(true);
        }
      }
    };
    SfMenu.prototype.resizeMenu = function () {
      if (this.enableScroller) {
        var menuElement = this.element.parentElement.querySelectorAll('.e-menu-container')[0];
        var ulElement = menuElement.getElementsByClassName('e-menu-parent')[0];
        var scrollElement = sf.base.select('.e-menu-hscroll', menuElement);
        var menuWidth = ulElement && ulElement.offsetWidth;
        var leftWidth = window.innerWidth - ulElement.getBoundingClientRect().left;
        if (menuWidth > leftWidth) {
          menuElement.style.width = Math.ceil(leftWidth) + 'px';
          if (!scrollElement) {
            var menu = sf.base.select('.e-menu', menuElement);
            if (menu) {
              sf.navigations.addScrolling(sf.base.createElement, menuElement, menu, 'hscroll', false);
            }
          }
        } else {
          if (scrollElement) {
            var scrollInstance = this.element.classList.contains(VERTICAL) ? sf.base.getInstance(scrollElement, sf.navigations.VScroll) : sf.base.getInstance(scrollElement, sf.navigations.HScroll);
            sf.navigations.destroyScroll(scrollInstance, scrollElement);
            menuElement.style.width = '';
          }
        }
      }
    };
    SfMenu.prototype.scrollHandler = function () {
      var scrollEle = this.popup.querySelector(".e-menu-parent");
      if (scrollEle != null && scrollEle.classList.contains("e-transparent")) {
        scrollEle.classList.remove("e-transparent");
      }
    };
    SfMenu.prototype.keyDownHandler = function (e) {
      this.element.children[0].tabIndex = -1;
      if (e.keyCode !== 9 && !e.shiftKey) {
        e.preventDefault();
      }
      if (this.element.classList.contains(HAMBURGER)) {
        keyActionHandler(this.element, e.target, e.keyCode);
      } else {
        var isVertical = sf.base.select(MENUCLASS, this.element).classList.contains(VERTICAL);
        if (isVertical) {
          if (e.keyCode === UP || e.keyCode === DOWN) {
            keyActionHandler(this.element, e.target, e.keyCode);
          }
        } else {
          if (e.keyCode === LEFT || e.keyCode === RIGHT) {
            keyActionHandler(this.element, e.target, e.keyCode === LEFT ? UP : DOWN);
          }
        }
      }
      if (this.isTabFocused) {
        e.target.classList.remove("e-focused");
        this.isTabFocused = false;
      }
      if (e.keyCode === 9 || e.keyCode === 9 && e.shiftKey) {
        e.target.blur();
        var proxy_1 = this;
        setTimeout(function () {
          proxy_1.element.children[0].tabIndex = 0;
        }, 5);
      }
    };
    SfMenu.prototype.focusHandler = function (e) {
      if (e.relatedTarget) {
        var focusedLi = e.target.querySelector("" + DOT + MENUITEM + FOCUSED);
        if (!focusedLi) {
          this.element.children[0].tabIndex = -1;
          e.target.children[0].focus();
          e.target.children[0].classList.add('e-focused');
          this.isTabFocused = true;
        }
      }
    };
    SfMenu.prototype.focusMenu = function (first) {
      if (sf.base.select(DOT + SCROLLMENU + VSCROLL, this.popup)) {
        this.destroyScroll(EMPTY);
        var menu = this.popupInstance.getLastMenu();
        if (menu) {
          menu.focus();
        }
        return;
      }
      var menuCollections = sf.base.selectAll(DOT + MENUPARENT, this.element);
      if (menuCollections.length) {
        if (first) {
          menuCollections[0].focus();
        } else {
          var focusedEle = sf.base.select(DOT + MENUITEM + FOCUSED, menuCollections[menuCollections.length - 1]);
          (focusedEle ? focusedEle : menuCollections[menuCollections.length - 1]).focus();
        }
      }
    };
    SfMenu.prototype.destroyScroll = function (display, curMenu, isVisible) {
      var scrollElements = sf.base.selectAll(DOT + SCROLLMENU + VSCROLL, this.popup);
      var menus = [].slice.call(sf.base.selectAll(DOT + MENUPARENT, this.popup));
      var menu;
      var index = -1;
      if (!sf.base.isNullOrUndefined(display) && curMenu) {
        index = menus.indexOf(curMenu);
      }
      scrollElements.forEach(function (element) {
        menu = null;
        menu = sf.base.select(MENU, element);
        if (isVisible || menu && !sf.base.isNullOrUndefined(display)) {
          if (curMenu) {
            if (menus.indexOf(menu) > index) {
              element.style.display = display;
            }
          } else {
            element.style.display = display;
          }
        } else {
          sf.navigations.destroyScroll(sf.base.getInstance(element, sf.navigations.VScroll), element, curMenu);
        }
      });
    };
    SfMenu.prototype.mouseDownHandler = function (e) {
      var target = e.target;
      if (this.isTabFocused) {
        var focusli = this.element.querySelector("" + DOT + MENUITEM + FOCUSED);
        if (focusli) {
          focusli.classList.remove('e-focused');
          this.isTabFocused = false;
        }
      }
      this.element.children[0].tabIndex = 0;
      var isEleAvailable = !document.body.contains(this.element);
      if (sf.base.isNullOrUndefined(this.element) || isEleAvailable) {
        this.removeEventListener(false);
      }
      var scrollNav = sf.base.closest(target, SCROLLNAV);
      if (sf.base.isNullOrUndefined(this.popup) || !sf.base.closest(target, HASH + this.popup.id) || scrollNav) {
        var menuLength = sf.base.selectAll(MENU, this.element).length;
        if (!isEleAvailable && (sf.base.select(FOCUSED, this.element) || sf.base.select(SELECTED, this.element)) && !sf.base.closest(e.target, HASH + this.element.id) && (!scrollNav || menuLength > 1)) {
          this.dotnetRef.invokeMethodAsync(MOUSEDOWNHANDLER, true, false, !sf.base.isNullOrUndefined(scrollNav), false, false);
        }
        if (!sf.base.isNullOrUndefined(this.popup) && !sf.base.isNullOrUndefined(this.popupInstance) && (!sf.base.closest(e.target, DOT + MENUITEM + SELECTED) || !this.popupInstance.subMenuOpen) && !scrollNav) {
          if (!this.popupInstance.subMenuOpen) {
            var menu = sf.base.closest(e.target, MENU);
            if (sf.base.select(DOT + SCROLLMENU + VSCROLL, this.popup)) {
              this.destroyScroll(NONE, menu);
            }
          } else {
            this.destroyScroll(NONE);
          }
        }
      }
    };
    SfMenu.prototype.mouseOverHandler = function (e) {
      var isEleAvailable = document.body.contains(this.element);
      if (sf.base.isNullOrUndefined(this.element) || !isEleAvailable) {
        this.removeEventListener(false);
      }
      var li = sf.base.closest(e.target, DOT + MENUITEM);
      if (this.popup && this.popupInstance.subMenuOpen && sf.base.closest(e.target, HASH + this.element.id) && li) {
        if (!li.querySelector(".e-caret") || parseInt(this.popup.style.top) !== Math.ceil(e.target.getBoundingClientRect().top)) {
          this.destroyScroll(NONE, sf.base.closest(e.target, MENU), true);
          if (this.enableScroller && SUBMENUITEM) {
            this.calculatePosition(SUBMENUITEM);
          }
        }
      }
      if (isEleAvailable && sf.base.select(FOCUSED, this.element) && !sf.base.closest(e.target, HASH + this.element.id)) {
        this.dotnetRef.invokeMethodAsync(MOUSEDOWNHANDLER, false, false, false, true, true);
      }
    };
    SfMenu.prototype.updateScroll = function (enableScrolling, isRtl, destroy) {
      if (enableScrolling) {
        // tslint:disable-next-line:no-any
        sf.base.EventHandler.add(window, RESIZE, this.resizeMenu, this);
        var menu = sf.base.select(MENUCLASS, this.element);
        if (menu && sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))) {
          sf.navigations.addScrolling(sf.base.createElement, this.element, menu, menu.classList.contains(VERTICAL) ? VSCROLL : HSCROLL, isRtl);
        }
      } else if (destroy) {
        var scrollElement = sf.base.select(DOT + SCROLLMENU + (this.element.classList.contains(VERTICAL) ? VSCROLL : HSCROLL), this.element);
        if (scrollElement) {
          // tslint:disable-next-line:no-any
          sf.base.EventHandler.remove(window, RESIZE, this.resizeMenu);
          var scrollInstance = this.element.classList.contains(VERTICAL) ? sf.base.getInstance(scrollElement, sf.navigations.VScroll) : sf.base.getInstance(scrollElement, sf.navigations.HScroll);
          sf.navigations.destroyScroll(scrollInstance, scrollElement);
        }
      }
    };
    SfMenu.prototype.orientationScroll = function (enableScrolling, isRtl) {
      var scrollElement = sf.base.select(DOT + SCROLLMENU + (this.element.classList.contains(VERTICAL) ? VSCROLL : HSCROLL), this.element);
      if (scrollElement) {
        // tslint:disable-next-line:no-any
        sf.base.EventHandler.remove(window, RESIZE, this.resizeMenu);
        var scrollInstance = this.element.classList.contains(VERTICAL) ? sf.base.getInstance(scrollElement, sf.navigations.VScroll) : sf.base.getInstance(scrollElement, sf.navigations.HScroll);
        sf.navigations.destroyScroll(scrollInstance, scrollElement);
      } else if (enableScrolling && !scrollElement) {
        // tslint:disable-next-line:no-any
        sf.base.EventHandler.add(window, RESIZE, this.resizeMenu, this);
        var menu = sf.base.select(MENUCLASS, this.element);
        if (menu && sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))) {
          sf.navigations.addScrolling(sf.base.createElement, this.element, menu, menu.classList.contains(VERTICAL) ? VSCROLL : HSCROLL, isRtl);
        }
      }
    };
    SfMenu.prototype.addDocEvent = function (element, eventName, listener, bindTo) {
      element.__eventList = {};
      var eventData = element.__eventList.events = [];
      var debounceListener = listener;
      if (bindTo) {
        debounceListener = debounceListener.bind(bindTo);
      }
      var event = eventName.split(' ');
      for (var i = 0; i < event.length; i++) {
        eventData.push({
          name: event[i],
          listener: listener,
          debounce: debounceListener,
          id: bindTo.element.id
        });
        if (sf.base.Browser.isIE) {
          element.addEventListener(event[i], debounceListener);
        } else {
          element.addEventListener(event[i], debounceListener, {
            passive: false
          });
        }
      }
      return debounceListener;
    };
    SfMenu.prototype.removeDocEvent = function (element, eventName, listener, id) {
      var eventData;
      var index = -1;
      var debounceListener;
      if ('__eventList' in element) {
        eventData = element.__eventList.events;
      }
      var events = eventName.split(' ');
      for (var i = 0; i < events.length; i++) {
        for (var j = eventData.length - 1; j >= 0; j--) {
          if (eventData[j].name === events[i] && eventData[j].listener === listener && eventData[j].id === id) {
            index = j;
            debounceListener = eventData[j].debounce;
          }
        }
        if (index !== -1) {
          eventData.splice(index, 1);
        }
        if (debounceListener) {
          element.removeEventListener(events[i], debounceListener);
        }
      }
    };
    SfMenu.prototype.addEventListener = function () {
      sf.base.EventHandler.add(this.element, KEYDOWN, this.keyDownHandler, this);
      sf.base.EventHandler.add(this.element.children[0], 'focus', this.focusHandler, this);
      this.addDocEvent(document, MOUSEDOWN, this.mouseDownHandler, this);
      this.addDocEvent(document, MOUSEOVER, this.mouseOverHandler, this);
      this.addDocEvent(document, CLICK, this.clickHandler, this);
    };
    SfMenu.prototype.removeEventListener = function (isEleAvailable) {
      if (isEleAvailable) {
        sf.base.EventHandler.remove(this.element, KEYDOWN, this.keyDownHandler);
        sf.base.EventHandler.remove(this.element.children[0], 'focus', this.focusHandler);
      }
      this.removeDocEvent(document, MOUSEDOWN, this.mouseDownHandler, this.element.id);
      this.removeDocEvent(document, MOUSEOVER, this.mouseOverHandler, this.element.id);
      this.removeDocEvent(document, CLICK, this.clickHandler, this.element.id);
    };
    return SfMenu;
  }();
  // tslint:disable-next-line:variable-name
  var Menu = {
    initialize: function initialize(args, dotnetRef) {
      if (!sf.base.isNullOrUndefined(args.element)) {
        new SfMenu(args, dotnetRef);
      }
    },
    calculatePosition: function calculatePosition(args, enterKey) {
      var instance = window.sfBlazor.getCompInstance(args.dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.calculatePosition(args, enterKey);
      }
    },
    subMenuPosition: function subMenuPosition(args, enterKey) {
      var instance = window.sfBlazor.getCompInstance(args.dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.subMenuPosition(args, enterKey);
      }
    },
    focusMenu: function focusMenu(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && document.activeElement.tagName !== 'INPUT' && document.activeElement.className.indexOf('e-input') < 0) {
        instance.focusMenu(false);
      }
    },
    updateScroll: function updateScroll(dataId, enableScrolling, isRtl) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateScroll(enableScrolling, isRtl, true);
      }
    },
    orientationScroll: function orientationScroll(dataId, enableScrolling, isRtl) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.orientationScroll(enableScrolling, isRtl);
      }
    },
    destroy: function destroy(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.removeEventListener(true);
      }
    }
  };
  return Menu;
}();

/***/ }),

/***/ "./modules/sf-numerictextbox.js":
/*!**************************************!*\
  !*** ./modules/sf-numerictextbox.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.NumericTextBox = function () {
  'use strict';

  /**
   * Blazor numeric texbot interop handler
   */
  var INTREGEXP = new RegExp('^(-)?(\\d*)$');
  var ENTER = 13;
  var ARROW_UP = 38;
  var ARROW_DOWN = 40;
  var BACK_SPACE = 8;
  var WHEEL_DELTA = 120;
  var DELTA = 3;
  var LEFT_BUTTON = 0;
  var RIGHT_BUTTON = 3;
  var MOBILE_INTERVEL_TIME = 600;
  var INTERVEL_TIME = 30;
  var TIMEOUT = 150;
  var MOUSE_BUTTON = 2;
  var IE_VERSION = '11.0';
  var INCREMENT = 'increment';
  var DECREMENT = 'decrement';
  var MOUSE_MOVE = 'mouseleave';
  var ROOT = 'e-input-group-icon';
  var MOUSE_UP = 'mouseup';
  var MOUSE_WHEEL = 'mousewheel DOMMouseScroll';
  var SERVER_ACTION = 'ServerAction';
  var SPIN_UP = 'e-spin-up';
  var SPIN_DOWN = 'e-spin-down';
  var FOCUS = 'focus';
  var BLUR = 'blur';
  var KEY_PRESS = 'keypress';
  var KEY_DOWN = 'keydown';
  var PASTE = 'paste';
  var SCROLL = 'scroll';
  var selectionTimeOut = 0;
  var beforePasteValue = null;
  var SfNumericTextBox = /** @class */function () {
    function SfNumericTextBox(dataId, wrapperElement, element, dotnetRef, options) {
      window.sfBlazor = window.sfBlazor;
      this.keyCharCodeHelper = function (event) {
        return this.element.value.substring(0, this.element.selectionStart) + String.fromCharCode(event.which) + this.element.value.substring(this.element.selectionEnd);
      };
      this.keyHelper = function (event) {
        return this.element.value.substring(0, this.element.selectionStart) + event.key + this.element.value.substring(this.element.selectionEnd);
      };
      this.dataId = dataId;
      this.wrapperElement = wrapperElement;
      this.element = element;
      this.options = options;
      window.sfBlazor.setCompInstance(this);
      this.dotNetRef = dotnetRef;
    }
    SfNumericTextBox.prototype.initialize = function () {
      this.spinButtonEvents();
      sf.base.EventHandler.add(this.element, FOCUS, this.focusHandler, this);
      sf.base.EventHandler.add(this.element, BLUR, this.focusOutHandler, this);
      sf.base.EventHandler.add(this.element, KEY_PRESS, this.keyPressHandler, this);
      sf.base.EventHandler.add(this.element, KEY_DOWN, this.keyDownHandler, this);
      sf.base.EventHandler.add(this.element, PASTE, this.pasteHandler, this);
      if (sf.base.Browser.isDevice) {
        sf.base.EventHandler.add(document, SCROLL, this.scrollHandler);
      }
    };
    SfNumericTextBox.prototype.clearInvalid = function (clearValue) {
      this.element.value = clearValue;
      beforePasteValue = null;
    };
    SfNumericTextBox.prototype.keyPressHandler = function (event) {
      if (!this.options.enabled || this.options.readonly) {
        return true;
      }
      var action = event.keyCode;
      if (event.which === LEFT_BUTTON || event.metaKey || event.ctrlKey || action === BACK_SPACE || action === ENTER) {
        return true;
      }
      var decimalSeparator = this.options.decimalSeparator;
      var currentChar = String.fromCharCode(event.which);
      var isAlterNumPadDecimalChar = event.code === "NumpadDecimal" && this.keyCharCodeHelper(event) !== decimalSeparator;
      if (isAlterNumPadDecimalChar) {
        currentChar = decimalSeparator;
      }
      var text = this.element.value;
      text = text.substring(0, this.element.selectionStart) + currentChar + text.substring(this.element.selectionEnd);
      if (!this.numericRegex().test(text)) {
        event.preventDefault();
        event.stopPropagation();
        return false;
      } else {
        if (isAlterNumPadDecimalChar) {
          var start = this.element.selectionStart + 1;
          this.element.value = text;
          this.element.setSelectionRange(start, start);
          event.preventDefault();
          event.stopPropagation();
        }
        return true;
      }
    };
    SfNumericTextBox.prototype.pasteHandler = function (event) {
      if (!(!this.options.enabled || this.options.readonly)) {
        var pasteValue = event.clipboardData.getData('text/plain');
        if (!this.numericRegex().test(pasteValue.trim())) {
          pasteValue = pasteValue.replace(/[^0-9.]/g, "");
          if (beforePasteValue && beforePasteValue == pasteValue) {
            event.preventDefault();
          } else {
            this.dotNetRef.invokeMethodAsync('InvokePasteHandler', pasteValue);
            beforePasteValue = pasteValue;
          }
        } else {
          this.dotNetRef.invokeMethodAsync('InvokePasteHandler', pasteValue);
        }
      }
    };
    SfNumericTextBox.prototype.preventHandler = function () {
      var _this = this;
      var iOS = !!navigator.platform && /iPad|iPhone|iPod|MacIntel/.test(navigator.platform);
      setTimeout(function () {
        if (_this.element.selectionStart > 0) {
          var currentPos = _this.element.selectionStart;
          var prevPos = _this.element.selectionStart - 1;
          var start = 0;
          var valArray = _this.element.value.split('');
          var decimalSeparator = _this.options.decimalSeparator;
          var ignoreKeyCode = decimalSeparator.charCodeAt(0);
          if (_this.element.value[prevPos] === ' ' && _this.element.selectionStart > 0 && !iOS) {
            if (sf.base.isNullOrUndefined(_this.prevVal)) {
              _this.element.value = _this.element.value.trim();
            } else if (prevPos !== 0) {
              _this.element.value = _this.prevVal;
            } else if (prevPos === 0) {
              _this.element.value = _this.element.value.trim();
            }
            _this.element.setSelectionRange(prevPos, prevPos);
          } else if (isNaN(parseFloat(_this.element.value[_this.element.selectionStart - 1])) && _this.element.value[_this.element.selectionStart - 1].charCodeAt(0) !== 45) {
            if (valArray.indexOf(_this.element.value[_this.element.selectionStart - 1]) !== valArray.lastIndexOf(_this.element.value[_this.element.selectionStart - 1]) && _this.element.value[_this.element.selectionStart - 1].charCodeAt(0) === ignoreKeyCode || _this.element.value[_this.element.selectionStart - 1].charCodeAt(0) !== ignoreKeyCode) {
              _this.element.value = _this.element.value.substring(0, prevPos) + _this.element.value.substring(currentPos, _this.element.value.length);
              _this.element.setSelectionRange(prevPos, prevPos);
              if (isNaN(parseFloat(_this.element.value[_this.element.selectionStart - 1])) && _this.element.selectionStart > 0 && _this.element.value.length) {
                _this.preventHandler();
              }
            }
          } else if (isNaN(parseFloat(_this.element.value[_this.element.selectionStart - 2])) && _this.element.selectionStart > 1 && _this.element.value[_this.element.selectionStart - 2].charCodeAt(0) !== 45) {
            if (valArray.indexOf(_this.element.value[_this.element.selectionStart - 2]) !== valArray.lastIndexOf(_this.element.value[_this.element.selectionStart - 2]) && _this.element.value[_this.element.selectionStart - 2].charCodeAt(0) === ignoreKeyCode || _this.element.value[_this.element.selectionStart - 2].charCodeAt(0) !== ignoreKeyCode) {
              _this.element.setSelectionRange(prevPos, prevPos);
              _this.nextEle = _this.element.value[_this.element.selectionStart];
              _this.cursorPosChanged = true;
              _this.preventHandler();
            }
          }
          if (_this.cursorPosChanged === true && _this.element.value[_this.element.selectionStart] === _this.nextEle && isNaN(parseFloat(_this.element.value[_this.element.selectionStart - 1]))) {
            _this.element.setSelectionRange(_this.element.selectionStart + 1, _this.element.selectionStart + 1);
            _this.cursorPosChanged = false;
            _this.nextEle = null;
          }
          if (_this.element.value.trim() === '') {
            _this.element.setSelectionRange(start, start);
          }
          if (_this.element.selectionStart > 0) {
            if (_this.element.value[_this.element.selectionStart - 1].charCodeAt(0) === 45 && _this.element.selectionStart > 1) {
              if (sf.base.isNullOrUndefined(_this.prevVal)) {
                // eslint-disable-next-line no-self-assign
                _this.element.value = _this.element.value;
              } else {
                _this.element.value = _this.prevVal;
              }
              _this.element.setSelectionRange(_this.element.selectionStart, _this.element.selectionStart);
            }
          }
          _this.prevVal = _this.element.value;
        }
      });
    };
    SfNumericTextBox.prototype.keyDownHandler = function (event) {
      var iOS = !!navigator.platform && /iPad|iPhone|iPod|MacIntel/.test(navigator.platform);
      if (!this.options.readonly) {
        if (sf.base.Browser.isDevice && !(event.keyCode === ARROW_UP || event.keyCode === ARROW_DOWN) && !(event.keyCode === BACK_SPACE)) {
          if (!(this.numericRegex().test(this.keyCharCodeHelper(event)) || this.numericRegex().test(this.keyHelper(event)))) {
            if (iOS && sf.base.Browser.isDevice) {
              this.preventHandler();
            } else {
              event.preventDefault();
            }
          }
        }
        if (!iOS && sf.base.Browser.isDevice) {
          this.preventHandler();
        }
        if (event.keyCode === ARROW_UP) {
          event.preventDefault();
          this.dotNetRef.invokeMethodAsync(SERVER_ACTION, INCREMENT, event, this.element.value);
        } else if (event.keyCode === ARROW_DOWN) {
          event.preventDefault();
          this.dotNetRef.invokeMethodAsync(SERVER_ACTION, DECREMENT, event, this.element.value);
        }
      }
    };
    SfNumericTextBox.prototype.numericRegex = function () {
      var decimalSeparator = this.options.decimalSeparator;
      var fractionRule = '*';
      if (decimalSeparator === '.') {
        decimalSeparator = '\\' + decimalSeparator;
      }
      if (this.options.decimals === 0 && this.options.validateDecimalOnType) {
        return INTREGEXP;
      }
      if (this.options.decimals && this.options.validateDecimalOnType) {
        fractionRule = '{0,' + this.options.decimals + '}';
      }
      return new RegExp('^(-)?(((\\d+(' + decimalSeparator + '\\d' + fractionRule + ')?)|(' + decimalSeparator + '\\d' + fractionRule + ')))?$');
    };
    SfNumericTextBox.prototype.mouseWheel = function (event) {
      event.preventDefault();
      var delta;
      // tslint:disable-next-line
      var rawEvent = event;
      if (rawEvent.wheelDelta) {
        delta = rawEvent.wheelDelta / WHEEL_DELTA;
      } else if (rawEvent.detail) {
        delta = -rawEvent.detail / DELTA;
      }
      if (delta > 0) {
        this.dotNetRef.invokeMethodAsync(SERVER_ACTION, INCREMENT, event, this.element.value);
      } else if (delta < 0) {
        this.dotNetRef.invokeMethodAsync(SERVER_ACTION, DECREMENT, event, this.element.value);
      }
    };
    SfNumericTextBox.prototype.focusHandler = function (event) {
      this.isFocused = true;
      if (!(!this.options.enabled || this.options.readonly)) {
        if (!sf.base.Browser.isDevice) {
          sf.base.EventHandler.add(this.element, MOUSE_WHEEL, this.mouseWheel, this);
        }
      }
    };
    SfNumericTextBox.prototype.focusOutHandler = function (event) {
      this.isFocused = false;
      event.preventDefault();
      if (!sf.base.Browser.isDevice) {
        sf.base.EventHandler.remove(this.element, MOUSE_WHEEL, this.mouseWheel);
      }
    };
    SfNumericTextBox.prototype.mouseDownOnSpinner = function (event) {
      var _this = this;
      if (this.options.enabled && !this.options.readonly) {
        if (this.isFocused) {
          this.isPrevFocused = true;
          if (event.cancelable) {
            event.preventDefault();
          }
        }
        var target = event.currentTarget;
        var action_1 = target.classList.contains(SPIN_UP) ? INCREMENT : DECREMENT;
        sf.base.EventHandler.add(target, MOUSE_MOVE, this.mouseUpClick, this);
        // tslint:disable
        this.timeOut = setInterval(function () {
          _this.isCalled = true;
          _this.dotNetRef.invokeMethodAsync(SERVER_ACTION, action_1, event, _this.element.value);
        }, TIMEOUT);
        sf.base.EventHandler.add(document, MOUSE_UP, this.mouseUpClick, this);
      }
    };
    SfNumericTextBox.prototype.mouseUpOnSpinner = function (event) {
      if (this.options.enabled && !this.options.readonly) {
        if (this.isPrevFocused) {
          this.element.focus();
          if (!sf.base.Browser.isDevice && event.cancelable) {
            this.isPrevFocused = false;
          }
        }
        if (!sf.base.Browser.isDevice) {
          event.preventDefault();
        }
        if (!this.getElementData(event)) {
          return;
        }
        var target = event.currentTarget;
        var action = target.classList.contains(SPIN_UP) ? INCREMENT : DECREMENT;
        sf.base.EventHandler.remove(target, MOUSE_MOVE, this.mouseUpClick);
        if (!this.isCalled) {
          this.dotNetRef.invokeMethodAsync(SERVER_ACTION, action, event, this.element.value);
        }
        this.isCalled = false;
        sf.base.EventHandler.remove(document, MOUSE_UP, this.mouseUpClick);
      }
    };
    SfNumericTextBox.prototype.touchMoveOnSpinner = function (event) {
      if (!this.options.enabled || this.options.readonly) {
        var target = document.elementFromPoint(event.clientX, event.clientY);
        if (!target.classList.contains(ROOT)) {
          clearInterval(this.timeOut);
        }
      } else {
        clearInterval(this.timeOut);
      }
    };
    SfNumericTextBox.prototype.scrollHandler = function (event) {
      clearInterval(this.timeOut);
    };
    SfNumericTextBox.prototype.getElementData = function (event) {
      if (event.which && event.which === RIGHT_BUTTON || event.button && event.button === MOUSE_BUTTON || !this.options.enabled || this.options.readonly) {
        return false;
      }
      clearInterval(this.timeOut);
      return true;
    };
    SfNumericTextBox.prototype.mouseUpClick = function (event) {
      event.stopPropagation();
      clearInterval(this.timeOut);
      this.isCalled = false;
      sf.base.EventHandler.remove(this.spinUp, MOUSE_MOVE, this.mouseUpClick);
      sf.base.EventHandler.remove(this.spinDown, MOUSE_MOVE, this.mouseUpClick);
    };
    SfNumericTextBox.prototype.selectRange = function (formatValue) {
      var _this = this;
      clearTimeout(selectionTimeOut);
      if (!sf.base.Browser.isDevice && sf.base.Browser.info.version === IE_VERSION) {
        this.element.setSelectionRange(0, formatValue.length);
      } else {
        var delay = sf.base.Browser.isDevice && sf.base.Browser.isIos ? MOBILE_INTERVEL_TIME : INTERVEL_TIME;
        selectionTimeOut = setTimeout(function () {
          if (_this.element.type !== 'number') {
            _this.element.setSelectionRange(0, formatValue.length);
          }
        }, delay);
      }
    };
    SfNumericTextBox.prototype.isDevice = function () {
      return sf.base.Browser.isDevice;
    };
    SfNumericTextBox.prototype.spinButtonEvents = function () {
      this.spinDown = this.wrapperElement ? this.wrapperElement.querySelector('.' + SPIN_DOWN) : null;
      this.spinUp = this.wrapperElement ? this.wrapperElement.querySelector('.' + SPIN_UP) : null;
      if (this.spinDown && this.spinUp) {
        this.unBindSpinButton();
        this.bindSpinButton();
      }
    };
    SfNumericTextBox.prototype.bindSpinButton = function () {
      sf.base.EventHandler.add(this.spinUp, sf.base.Browser.touchStartEvent, this.mouseDownOnSpinner, this);
      sf.base.EventHandler.add(this.spinDown, sf.base.Browser.touchStartEvent, this.mouseDownOnSpinner, this);
      sf.base.EventHandler.add(this.spinUp, sf.base.Browser.touchEndEvent, this.mouseUpOnSpinner, this);
      sf.base.EventHandler.add(this.spinDown, sf.base.Browser.touchEndEvent, this.mouseUpOnSpinner, this);
      sf.base.EventHandler.add(this.spinUp, sf.base.Browser.touchMoveEvent, this.touchMoveOnSpinner, this);
      sf.base.EventHandler.add(this.spinDown, sf.base.Browser.touchMoveEvent, this.touchMoveOnSpinner, this);
    };
    SfNumericTextBox.prototype.unBindSpinButton = function () {
      sf.base.EventHandler.remove(this.spinUp, sf.base.Browser.touchStartEvent, this.mouseDownOnSpinner);
      sf.base.EventHandler.remove(this.spinDown, sf.base.Browser.touchStartEvent, this.mouseDownOnSpinner);
      sf.base.EventHandler.remove(this.spinUp, sf.base.Browser.touchEndEvent, this.mouseUpOnSpinner);
      sf.base.EventHandler.remove(this.spinDown, sf.base.Browser.touchEndEvent, this.mouseUpOnSpinner);
      sf.base.EventHandler.remove(this.spinUp, sf.base.Browser.touchMoveEvent, this.touchMoveOnSpinner);
      sf.base.EventHandler.remove(this.spinDown, sf.base.Browser.touchMoveEvent, this.touchMoveOnSpinner);
    };
    SfNumericTextBox.prototype.destroy = function () {
      sf.base.EventHandler.remove(this.element, FOCUS, this.focusHandler);
      sf.base.EventHandler.remove(this.element, BLUR, this.focusOutHandler);
      sf.base.EventHandler.remove(this.element, KEY_PRESS, this.keyPressHandler);
      sf.base.EventHandler.remove(this.element, KEY_DOWN, this.keyDownHandler);
      sf.base.EventHandler.remove(this.element, PASTE, this.pasteHandler);
      if (sf.base.Browser.isDevice) {
        sf.base.EventHandler.remove(document, SCROLL, this.scrollHandler);
      }
    };
    return SfNumericTextBox;
  }();
  // tslint:disable
  var NumericTextBox = {
    initialize: function initialize(dataId, wrapperElement, element, dotnetRef, options) {
      if (element && dataId) {
        var instance = new SfNumericTextBox(dataId, wrapperElement, element, dotnetRef, options);
        instance.initialize();
      }
    },
    selectRange: function selectRange(dataId, formatValue) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.selectRange(formatValue);
      }
    },
    propertyChanges: function propertyChanges(dataId, options) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.options = options;
      }
    },
    focusIn: function focusIn(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.element.focus();
      }
    },
    focusOut: function focusOut(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.element.blur();
      }
    },
    spinButtonEvents: function spinButtonEvents(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.spinButtonEvents();
      }
    },
    clearInvalid: function clearInvalid(dataId, clearValue) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.clearInvalid(clearValue);
      }
    },
    destroy: function destroy(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.destroy();
      }
    }
  };
  return NumericTextBox;
}();

/***/ }),

/***/ "./modules/sf-pdfviewer2.js":
/*!**********************************!*\
  !*** ./modules/sf-pdfviewer2.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o;}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o;},_typeof(o);}window.sfBlazor=window.sfBlazor||{};window.sfBlazor.SfPdfViewer=function(){'use strict';var __extends=undefined&&undefined.__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return _extendStatics(d,b);};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r;};var __awaiter$1=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator$1=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};/* eslint-disable */ // eslint-disable-next-line max-len
// eslint-disable-next-line max-len
// eslint-disable-next-line max-len
/**
 * The `ToolbarSettings` module is used to provide the toolbar settings of PDF viewer.
 */var ToolbarSettings=/** @class */function(_super){__extends(ToolbarSettings,_super);function ToolbarSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(true)],ToolbarSettings.prototype,"showTooltip",void 0);__decorate([sf.base.Property()],ToolbarSettings.prototype,"toolbarItems",void 0);__decorate([sf.base.Property()],ToolbarSettings.prototype,"annotationToolbarItems",void 0);return ToolbarSettings;}(sf.base.ChildProperty);/**
 * The `AjaxRequestSettings` module is used to set the ajax Request Headers of PDF viewer.
 */var AjaxRequestSettings=/** @class */function(_super){__extends(AjaxRequestSettings,_super);function AjaxRequestSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property()],AjaxRequestSettings.prototype,"ajaxHeaders",void 0);__decorate([sf.base.Property(false)],AjaxRequestSettings.prototype,"withCredentials",void 0);return AjaxRequestSettings;}(sf.base.ChildProperty);/**
 * The `CustomStamp` module is used to provide the custom stamp added in stamp menu of the PDF Viewer toolbar.
 */var CustomStamp=/** @class */function(_super){__extends(CustomStamp,_super);function CustomStamp(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('')],CustomStamp.prototype,"customStampName",void 0);__decorate([sf.base.Property('')],CustomStamp.prototype,"customStampImageSource",void 0);return CustomStamp;}(sf.base.ChildProperty);/**
 * The `AnnotationToolbarSettings` module is used to provide the annotation toolbar settings of the PDF viewer.
 */var AnnotationToolbarSettings=/** @class */function(_super){__extends(AnnotationToolbarSettings,_super);function AnnotationToolbarSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(true)],AnnotationToolbarSettings.prototype,"showTooltip",void 0);__decorate([sf.base.Property()],AnnotationToolbarSettings.prototype,"annotationToolbarItem",void 0);return AnnotationToolbarSettings;}(sf.base.ChildProperty);/**
 * The `SignatureFieldSettings` module is used to set the properties of signature field in PDF Viewer
 */var SignatureFieldSettings=/** @class */function(_super){__extends(SignatureFieldSettings,_super);function SignatureFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],SignatureFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],SignatureFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property(false)],SignatureFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],SignatureFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],SignatureFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],SignatureFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],SignatureFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(0)],SignatureFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property()],SignatureFieldSettings.prototype,"signatureDialogSettings",void 0);__decorate([sf.base.Property()],SignatureFieldSettings.prototype,"signatureIndicatorSettings",void 0);return SignatureFieldSettings;}(sf.base.ChildProperty);/**
 * The `InitialFieldSettings` module is used to set the properties of initial field in PDF Viewer
 */var InitialFieldSettings=/** @class */function(_super){__extends(InitialFieldSettings,_super);function InitialFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],InitialFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],InitialFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property(false)],InitialFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],InitialFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],InitialFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],InitialFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],InitialFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(0)],InitialFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(false)],InitialFieldSettings.prototype,"isInitialField",void 0);__decorate([sf.base.Property()],InitialFieldSettings.prototype,"initialDialogSettings",void 0);__decorate([sf.base.Property()],InitialFieldSettings.prototype,"initialIndicatorSettings",void 0);return InitialFieldSettings;}(sf.base.ChildProperty);/**
 * The `SignatureIndicatorSettings` module is used to provide the properties of signature Indicator in the signature field
 */var SignatureIndicatorSettings=/** @class */function(_super){__extends(SignatureIndicatorSettings,_super);function SignatureIndicatorSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],SignatureIndicatorSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('orange')],SignatureIndicatorSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property(19)],SignatureIndicatorSettings.prototype,"width",void 0);__decorate([sf.base.Property(10)],SignatureIndicatorSettings.prototype,"height",void 0);__decorate([sf.base.Property(10)],SignatureIndicatorSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(null)],SignatureIndicatorSettings.prototype,"text",void 0);__decorate([sf.base.Property('black')],SignatureIndicatorSettings.prototype,"color",void 0);return SignatureIndicatorSettings;}(sf.base.ChildProperty);/**
 * The `SignatureDialogSettings` module is used to customize the signature dialog box.
 */var SignatureDialogSettings=/** @class */function(_super){__extends(SignatureDialogSettings,_super);function SignatureDialogSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('Draw')],SignatureDialogSettings.prototype,"displayMode",void 0);__decorate([sf.base.Property(false)],SignatureDialogSettings.prototype,"hideSaveSignature",void 0);return SignatureDialogSettings;}(sf.base.ChildProperty);/**
 * The `ServerActionSettings` module is used to provide the server action methods of PDF viewer.
 */var ServerActionSettings=/** @class */function(_super){__extends(ServerActionSettings,_super);function ServerActionSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('Load')],ServerActionSettings.prototype,"load",void 0);__decorate([sf.base.Property('Unload')],ServerActionSettings.prototype,"unload",void 0);__decorate([sf.base.Property('RenderPdfPages')],ServerActionSettings.prototype,"renderPages",void 0);__decorate([sf.base.Property('RenderPdfPages')],ServerActionSettings.prototype,"print",void 0);__decorate([sf.base.Property('Download')],ServerActionSettings.prototype,"download",void 0);__decorate([sf.base.Property('RenderThumbnailImages')],ServerActionSettings.prototype,"renderThumbnail",void 0);__decorate([sf.base.Property('RenderAnnotationComments')],ServerActionSettings.prototype,"renderComments",void 0);__decorate([sf.base.Property('ImportAnnotations')],ServerActionSettings.prototype,"importAnnotations",void 0);__decorate([sf.base.Property('ExportAnnotations')],ServerActionSettings.prototype,"exportAnnotations",void 0);__decorate([sf.base.Property('ImportFormFields')],ServerActionSettings.prototype,"importFormFields",void 0);__decorate([sf.base.Property('ExportFormFields')],ServerActionSettings.prototype,"exportFormFields",void 0);__decorate([sf.base.Property('RenderPdfTexts')],ServerActionSettings.prototype,"renderTexts",void 0);return ServerActionSettings;}(sf.base.ChildProperty);/**
 * The `StrikethroughSettings` module is used to provide the properties to Strikethrough annotation.
 */var StrikethroughSettings=/** @class */function(_super){__extends(StrikethroughSettings,_super);function StrikethroughSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],StrikethroughSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],StrikethroughSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ff0000')],StrikethroughSettings.prototype,"color",void 0);__decorate([sf.base.Property('Guest')],StrikethroughSettings.prototype,"author",void 0);__decorate([sf.base.Property('')],StrikethroughSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(null)],StrikethroughSettings.prototype,"customData",void 0);__decorate([sf.base.Property(false)],StrikethroughSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(false)],StrikethroughSettings.prototype,"enableMultiPageAnnotation",void 0);__decorate([sf.base.Property(false)],StrikethroughSettings.prototype,"enableTextMarkupResizer",void 0);__decorate([sf.base.Property(['None'])],StrikethroughSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],StrikethroughSettings.prototype,"isPrint",void 0);return StrikethroughSettings;}(sf.base.ChildProperty);/**
 * The `UnderlineSettings` module is used to provide the properties to Underline annotation.
 */var UnderlineSettings=/** @class */function(_super){__extends(UnderlineSettings,_super);function UnderlineSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],UnderlineSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],UnderlineSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#00ff00')],UnderlineSettings.prototype,"color",void 0);__decorate([sf.base.Property('Guest')],UnderlineSettings.prototype,"author",void 0);__decorate([sf.base.Property('')],UnderlineSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(null)],UnderlineSettings.prototype,"customData",void 0);__decorate([sf.base.Property(false)],UnderlineSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(false)],UnderlineSettings.prototype,"enableMultiPageAnnotation",void 0);__decorate([sf.base.Property(false)],UnderlineSettings.prototype,"enableTextMarkupResizer",void 0);__decorate([sf.base.Property(['None'])],UnderlineSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],UnderlineSettings.prototype,"isPrint",void 0);return UnderlineSettings;}(sf.base.ChildProperty);/**
 * The `HighlightSettings` module is used to provide the properties to Highlight annotation.
 */var HighlightSettings=/** @class */function(_super){__extends(HighlightSettings,_super);function HighlightSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],HighlightSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],HighlightSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffff00')],HighlightSettings.prototype,"color",void 0);__decorate([sf.base.Property('Guest')],HighlightSettings.prototype,"author",void 0);__decorate([sf.base.Property('')],HighlightSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(null)],HighlightSettings.prototype,"customData",void 0);__decorate([sf.base.Property(false)],HighlightSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(false)],HighlightSettings.prototype,"enableMultiPageAnnotation",void 0);__decorate([sf.base.Property(false)],HighlightSettings.prototype,"enableTextMarkupResizer",void 0);__decorate([sf.base.Property(['None'])],HighlightSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],HighlightSettings.prototype,"isPrint",void 0);return HighlightSettings;}(sf.base.ChildProperty);/**
 * The `LineSettings` module is used to provide the properties to line annotation.
 */var LineSettings=/** @class */function(_super){__extends(LineSettings,_super);function LineSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],LineSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],LineSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],LineSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],LineSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],LineSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],LineSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],LineSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('None')],LineSettings.prototype,"lineHeadStartStyle",void 0);__decorate([sf.base.Property('None')],LineSettings.prototype,"lineHeadEndStyle",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"borderDashArray",void 0);__decorate([sf.base.Property('')],LineSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],LineSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],LineSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],LineSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],LineSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],LineSettings.prototype,"isPrint",void 0);return LineSettings;}(sf.base.ChildProperty);/**
 * The `ArrowSettings` module is used to provide the properties to arrow annotation.
 */var ArrowSettings=/** @class */function(_super){__extends(ArrowSettings,_super);function ArrowSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],ArrowSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],ArrowSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],ArrowSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],ArrowSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],ArrowSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],ArrowSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],ArrowSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('None')],ArrowSettings.prototype,"lineHeadStartStyle",void 0);__decorate([sf.base.Property('None')],ArrowSettings.prototype,"lineHeadEndStyle",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"borderDashArray",void 0);__decorate([sf.base.Property('')],ArrowSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],ArrowSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],ArrowSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],ArrowSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],ArrowSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],ArrowSettings.prototype,"isPrint",void 0);return ArrowSettings;}(sf.base.ChildProperty);/**
 * The `RectangleSettings` module is used to provide the properties to rectangle annotation.
 */var RectangleSettings=/** @class */function(_super){__extends(RectangleSettings,_super);function RectangleSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],RectangleSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],RectangleSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(100)],RectangleSettings.prototype,"width",void 0);__decorate([sf.base.Property(50)],RectangleSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],RectangleSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],RectangleSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],RectangleSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],RectangleSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],RectangleSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],RectangleSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],RectangleSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],RectangleSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],RectangleSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],RectangleSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],RectangleSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],RectangleSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],RectangleSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],RectangleSettings.prototype,"isPrint",void 0);return RectangleSettings;}(sf.base.ChildProperty);/**
 * The `CircleSettings` module is used to provide the properties to circle annotation.
 */var CircleSettings=/** @class */function(_super){__extends(CircleSettings,_super);function CircleSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],CircleSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],CircleSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(100)],CircleSettings.prototype,"width",void 0);__decorate([sf.base.Property(100)],CircleSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],CircleSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],CircleSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],CircleSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],CircleSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],CircleSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],CircleSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],CircleSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],CircleSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],CircleSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],CircleSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],CircleSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],CircleSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],CircleSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],CircleSettings.prototype,"isPrint",void 0);return CircleSettings;}(sf.base.ChildProperty);/**
 * The `ShapeLabelSettings` module is used to provide the properties to rectangle annotation.
 */var ShapeLabelSettings=/** @class */function(_super){__extends(ShapeLabelSettings,_super);function ShapeLabelSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],ShapeLabelSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],ShapeLabelSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#000')],ShapeLabelSettings.prototype,"fontColor",void 0);__decorate([sf.base.Property(16)],ShapeLabelSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property('Helvetica')],ShapeLabelSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property('Label')],ShapeLabelSettings.prototype,"labelContent",void 0);__decorate([sf.base.Property('')],ShapeLabelSettings.prototype,"notes",void 0);return ShapeLabelSettings;}(sf.base.ChildProperty);/**
 * The `PolygonSettings` module is used to provide the properties to polygon annotation.
 */var PolygonSettings=/** @class */function(_super){__extends(PolygonSettings,_super);function PolygonSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],PolygonSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],PolygonSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],PolygonSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],PolygonSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],PolygonSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],PolygonSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],PolygonSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],PolygonSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],PolygonSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],PolygonSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],PolygonSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],PolygonSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],PolygonSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],PolygonSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],PolygonSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],PolygonSettings.prototype,"isPrint",void 0);return PolygonSettings;}(sf.base.ChildProperty);/**
 * The `stampSettings` module is used to provide the properties to stamp annotation.
 */var StampSettings=/** @class */function(_super){__extends(StampSettings,_super);function StampSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],StampSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],StampSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(150)],StampSettings.prototype,"width",void 0);__decorate([sf.base.Property(50)],StampSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],StampSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('Guest')],StampSettings.prototype,"author",void 0);__decorate([sf.base.Property('')],StampSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],StampSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],StampSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],StampSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],StampSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],StampSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],StampSettings.prototype,"customData",void 0);__decorate([sf.base.Property([])],StampSettings.prototype,"dynamicStamps",void 0);__decorate([sf.base.Property([])],StampSettings.prototype,"signStamps",void 0);__decorate([sf.base.Property([])],StampSettings.prototype,"standardBusinessStamps",void 0);__decorate([sf.base.Property(['None'])],StampSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],StampSettings.prototype,"isPrint",void 0);return StampSettings;}(sf.base.ChildProperty);/**
 * The `CustomStampSettings` module is used to provide the properties to customstamp annotation.
 */var CustomStampSettings=/** @class */function(_super){__extends(CustomStampSettings,_super);function CustomStampSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],CustomStampSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],CustomStampSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],CustomStampSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('Guest')],CustomStampSettings.prototype,"author",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"width",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"height",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"left",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"top",void 0);__decorate([sf.base.Property(false)],CustomStampSettings.prototype,"isAddToMenu",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],CustomStampSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],CustomStampSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('')],CustomStampSettings.prototype,"customStamps",void 0);__decorate([sf.base.Property(true)],CustomStampSettings.prototype,"enableCustomStamp",void 0);__decorate([sf.base.Property(['None'])],CustomStampSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],CustomStampSettings.prototype,"isPrint",void 0);return CustomStampSettings;}(sf.base.ChildProperty);/**
 * The `DistanceSettings` module is used to provide the properties to distance calibrate annotation.
 */var DistanceSettings=/** @class */function(_super){__extends(DistanceSettings,_super);function DistanceSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],DistanceSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],DistanceSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],DistanceSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ff0000')],DistanceSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],DistanceSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],DistanceSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],DistanceSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('None')],DistanceSettings.prototype,"lineHeadStartStyle",void 0);__decorate([sf.base.Property('None')],DistanceSettings.prototype,"lineHeadEndStyle",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"borderDashArray",void 0);__decorate([sf.base.Property('')],DistanceSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],DistanceSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],DistanceSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],DistanceSettings.prototype,"customData",void 0);__decorate([sf.base.Property(40)],DistanceSettings.prototype,"leaderLength",void 0);__decorate([sf.base.Property('move')],DistanceSettings.prototype,"resizeCursorType",void 0);__decorate([sf.base.Property(['None'])],DistanceSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],DistanceSettings.prototype,"isPrint",void 0);return DistanceSettings;}(sf.base.ChildProperty);/**
 * The `PerimeterSettings` module is used to provide the properties to perimeter calibrate annotation.
 */var PerimeterSettings=/** @class */function(_super){__extends(PerimeterSettings,_super);function PerimeterSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],PerimeterSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],PerimeterSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],PerimeterSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],PerimeterSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],PerimeterSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],PerimeterSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],PerimeterSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('None')],PerimeterSettings.prototype,"lineHeadStartStyle",void 0);__decorate([sf.base.Property('None')],PerimeterSettings.prototype,"lineHeadEndStyle",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"borderDashArray",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],PerimeterSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],PerimeterSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('')],PerimeterSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(['None'])],PerimeterSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],PerimeterSettings.prototype,"isPrint",void 0);return PerimeterSettings;}(sf.base.ChildProperty);/**
 * The `AreaSettings` module is used to provide the properties to area calibrate annotation.
 */var AreaSettings=/** @class */function(_super){__extends(AreaSettings,_super);function AreaSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],AreaSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],AreaSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],AreaSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],AreaSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],AreaSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],AreaSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],AreaSettings.prototype,"thickness",void 0);__decorate([sf.base.Property(0)],AreaSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],AreaSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],AreaSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],AreaSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],AreaSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('')],AreaSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(['None'])],AreaSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],AreaSettings.prototype,"isPrint",void 0);return AreaSettings;}(sf.base.ChildProperty);/**
 * The `RadiusSettings` module is used to provide the properties to radius calibrate annotation.
 */var RadiusSettings=/** @class */function(_super){__extends(RadiusSettings,_super);function RadiusSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],RadiusSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],RadiusSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(100)],RadiusSettings.prototype,"width",void 0);__decorate([sf.base.Property(90)],RadiusSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],RadiusSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],RadiusSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],RadiusSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],RadiusSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],RadiusSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],RadiusSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],RadiusSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],RadiusSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],RadiusSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],RadiusSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],RadiusSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],RadiusSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],RadiusSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],RadiusSettings.prototype,"isPrint",void 0);return RadiusSettings;}(sf.base.ChildProperty);/**
 * The `VolumeSettings` module is used to provide the properties to volume calibrate annotation.
 */var VolumeSettings=/** @class */function(_super){__extends(VolumeSettings,_super);function VolumeSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],VolumeSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],VolumeSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],VolumeSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],VolumeSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property('#ff0000')],VolumeSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property('Guest')],VolumeSettings.prototype,"author",void 0);__decorate([sf.base.Property('1')],VolumeSettings.prototype,"thickness",void 0);__decorate([sf.base.Property(0)],VolumeSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],VolumeSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],VolumeSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],VolumeSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],VolumeSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('')],VolumeSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(['None'])],VolumeSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],VolumeSettings.prototype,"isPrint",void 0);return VolumeSettings;}(sf.base.ChildProperty);/**
 * The `Ink` module is used to provide the properties to Ink annotation.
 */var InkAnnotationSettings=/** @class */function(_super){__extends(InkAnnotationSettings,_super);function InkAnnotationSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],InkAnnotationSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],InkAnnotationSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(0)],InkAnnotationSettings.prototype,"width",void 0);__decorate([sf.base.Property(0)],InkAnnotationSettings.prototype,"height",void 0);__decorate([sf.base.Property(0)],InkAnnotationSettings.prototype,"path",void 0);__decorate([sf.base.Property(1)],InkAnnotationSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ff0000')],InkAnnotationSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property(1)],InkAnnotationSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('')],InkAnnotationSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(false)],InkAnnotationSettings.prototype,"isLock",void 0);__decorate([sf.base.Property('Guest')],InkAnnotationSettings.prototype,"author",void 0);__decorate([sf.base.Property(['None'])],InkAnnotationSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(null)],InkAnnotationSettings.prototype,"customData",void 0);__decorate([sf.base.Property(true)],InkAnnotationSettings.prototype,"isPrint",void 0);return InkAnnotationSettings;}(sf.base.ChildProperty);/**
 * The `stickyNotesSettings` module is used to provide the properties to sticky notes annotation.
 */var StickyNotesSettings=/** @class */function(_super){__extends(StickyNotesSettings,_super);function StickyNotesSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],StickyNotesSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],StickyNotesSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('Guest')],StickyNotesSettings.prototype,"author",void 0);__decorate([sf.base.Property(1)],StickyNotesSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('')],StickyNotesSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(null)],StickyNotesSettings.prototype,"customData",void 0);__decorate([sf.base.Property(false)],StickyNotesSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(['None'])],StickyNotesSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],StickyNotesSettings.prototype,"isPrint",void 0);return StickyNotesSettings;}(sf.base.ChildProperty);/**
 * The `MeasurementSettings` module is used to provide the settings to measurement annotations.
 */var MeasurementSettings=/** @class */function(_super){__extends(MeasurementSettings,_super);function MeasurementSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],MeasurementSettings.prototype,"scaleRatio",void 0);__decorate([sf.base.Property('in')],MeasurementSettings.prototype,"conversionUnit",void 0);__decorate([sf.base.Property('in')],MeasurementSettings.prototype,"displayUnit",void 0);__decorate([sf.base.Property(96)],MeasurementSettings.prototype,"depth",void 0);return MeasurementSettings;}(sf.base.ChildProperty);/**
 * The `FreeTextSettings` module is used to provide the properties to free text annotation.
 */var FreeTextSettings=/** @class */function(_super){__extends(FreeTextSettings,_super);function FreeTextSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0})],FreeTextSettings.prototype,"offset",void 0);__decorate([sf.base.Property(1)],FreeTextSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property(1)],FreeTextSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#ffffff00')],FreeTextSettings.prototype,"borderColor",void 0);__decorate([sf.base.Property(1)],FreeTextSettings.prototype,"borderWidth",void 0);__decorate([sf.base.Property('solid')],FreeTextSettings.prototype,"borderStyle",void 0);__decorate([sf.base.Property('Guest')],FreeTextSettings.prototype,"author",void 0);__decorate([sf.base.Property('#ffffff00')],FreeTextSettings.prototype,"fillColor",void 0);__decorate([sf.base.Property(16)],FreeTextSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(151)],FreeTextSettings.prototype,"width",void 0);__decorate([sf.base.Property(24.6)],FreeTextSettings.prototype,"height",void 0);__decorate([sf.base.Property('#000')],FreeTextSettings.prototype,"fontColor",void 0);__decorate([sf.base.Property('Helvetica')],FreeTextSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property('TypeHere')],FreeTextSettings.prototype,"defaultText",void 0);__decorate([sf.base.Property('None')],FreeTextSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('Left')],FreeTextSettings.prototype,"textAlignment",void 0);__decorate([sf.base.Property(false)],FreeTextSettings.prototype,"allowEditTextOnly",void 0);__decorate([sf.base.Property('')],FreeTextSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property(0)],FreeTextSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],FreeTextSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],FreeTextSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],FreeTextSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],FreeTextSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(null)],FreeTextSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],FreeTextSettings.prototype,"allowedInteractions",void 0);__decorate([sf.base.Property(true)],FreeTextSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property(false)],FreeTextSettings.prototype,"isReadonly",void 0);__decorate([sf.base.Property(false)],FreeTextSettings.prototype,"enableAutoFit",void 0);return FreeTextSettings;}(sf.base.ChildProperty);/**
 * The `AnnotationSelectorSettings` module is used to provide the properties to annotation selectors.
 */var AnnotationSelectorSettings=/** @class */function(_super){__extends(AnnotationSelectorSettings,_super);function AnnotationSelectorSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('')],AnnotationSelectorSettings.prototype,"selectionBorderColor",void 0);__decorate([sf.base.Property('black')],AnnotationSelectorSettings.prototype,"resizerBorderColor",void 0);__decorate([sf.base.Property('#FF4081')],AnnotationSelectorSettings.prototype,"resizerFillColor",void 0);__decorate([sf.base.Property(8)],AnnotationSelectorSettings.prototype,"resizerSize",void 0);__decorate([sf.base.Property(1)],AnnotationSelectorSettings.prototype,"selectionBorderThickness",void 0);__decorate([sf.base.Property('Square')],AnnotationSelectorSettings.prototype,"resizerShape",void 0);__decorate([sf.base.Property('')],AnnotationSelectorSettings.prototype,"selectorLineDashArray",void 0);__decorate([sf.base.Property('Corners')],AnnotationSelectorSettings.prototype,"resizerLocation",void 0);__decorate([sf.base.Property(null)],AnnotationSelectorSettings.prototype,"resizerCursorType",void 0);return AnnotationSelectorSettings;}(sf.base.ChildProperty);/**
 * The `TextSearchColorSettings` module is used to set the settings for the color of the text search highlight.
 */var TextSearchColorSettings=/** @class */function(_super){__extends(TextSearchColorSettings,_super);function TextSearchColorSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('#fdd835')],TextSearchColorSettings.prototype,"searchHighlightColor",void 0);__decorate([sf.base.Property('#8b4c12')],TextSearchColorSettings.prototype,"searchColor",void 0);return TextSearchColorSettings;}(sf.base.ChildProperty);/**
 * The `HandWrittenSignatureSettings` module is used to provide the properties to handwritten signature.
 */var HandWrittenSignatureSettings=/** @class */function(_super){__extends(HandWrittenSignatureSettings,_super);function HandWrittenSignatureSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(1)],HandWrittenSignatureSettings.prototype,"opacity",void 0);__decorate([sf.base.Property('#000000')],HandWrittenSignatureSettings.prototype,"strokeColor",void 0);__decorate([sf.base.Property(1)],HandWrittenSignatureSettings.prototype,"thickness",void 0);__decorate([sf.base.Property(150)],HandWrittenSignatureSettings.prototype,"width",void 0);__decorate([sf.base.Property(100)],HandWrittenSignatureSettings.prototype,"height",void 0);__decorate([sf.base.Property(1)],HandWrittenSignatureSettings.prototype,"saveSignatureLimit",void 0);__decorate([sf.base.Property(1)],HandWrittenSignatureSettings.prototype,"saveInitialLimit",void 0);__decorate([sf.base.Property([])],HandWrittenSignatureSettings.prototype,"signatureItem",void 0);__decorate([sf.base.Property()],HandWrittenSignatureSettings.prototype,"typeSignatureFonts",void 0);__decorate([sf.base.Property('')],HandWrittenSignatureSettings.prototype,"annotationSelectorSettings",void 0);__decorate([sf.base.Property()],HandWrittenSignatureSettings.prototype,"signatureDialogSettings",void 0);__decorate([sf.base.Property()],HandWrittenSignatureSettings.prototype,"initialDialogSettings",void 0);return HandWrittenSignatureSettings;}(sf.base.ChildProperty);/**
 * The `AnnotationSettings` module is used to provide the properties to annotations.
 */var AnnotationSettings=/** @class */function(_super){__extends(AnnotationSettings,_super);function AnnotationSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('Guest')],AnnotationSettings.prototype,"author",void 0);__decorate([sf.base.Property(0)],AnnotationSettings.prototype,"minHeight",void 0);__decorate([sf.base.Property(0)],AnnotationSettings.prototype,"minWidth",void 0);__decorate([sf.base.Property(0)],AnnotationSettings.prototype,"maxHeight",void 0);__decorate([sf.base.Property(0)],AnnotationSettings.prototype,"maxWidth",void 0);__decorate([sf.base.Property(false)],AnnotationSettings.prototype,"isLock",void 0);__decorate([sf.base.Property(false)],AnnotationSettings.prototype,"skipPrint",void 0);__decorate([sf.base.Property(false)],AnnotationSettings.prototype,"skipDownload",void 0);__decorate([sf.base.Property(null)],AnnotationSettings.prototype,"customData",void 0);__decorate([sf.base.Property(['None'])],AnnotationSettings.prototype,"allowedInteractions",void 0);return AnnotationSettings;}(sf.base.ChildProperty);/**
 * The `DocumentTextCollectionSettings` module is used to provide the properties to DocumentTextCollection.
 */var DocumentTextCollectionSettings=/** @class */function(_super){__extends(DocumentTextCollectionSettings,_super);function DocumentTextCollectionSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property()],DocumentTextCollectionSettings.prototype,"textData",void 0);__decorate([sf.base.Property()],DocumentTextCollectionSettings.prototype,"pageText",void 0);__decorate([sf.base.Property()],DocumentTextCollectionSettings.prototype,"pageSize",void 0);return DocumentTextCollectionSettings;}(sf.base.ChildProperty);/**
 * The `TextDataSettings` module is used to provide the properties of text data.
 */var TextDataSettings=/** @class */function(_super){__extends(TextDataSettings,_super);function TextDataSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property()],TextDataSettings.prototype,"bounds",void 0);__decorate([sf.base.Property()],TextDataSettings.prototype,"text",void 0);return TextDataSettings;}(sf.base.ChildProperty);/**
 * The `RectangleBounds` module is used to provide the properties of rectangle bounds.
 */var RectangleBounds=/** @class */function(_super){__extends(RectangleBounds,_super);function RectangleBounds(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property()],RectangleBounds.prototype,"size",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"x",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"y",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"width",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"height",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"left",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"top",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"right",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"bottom",void 0);__decorate([sf.base.Property()],RectangleBounds.prototype,"isEmpty",void 0);return RectangleBounds;}(sf.base.ChildProperty);/**
 * The `TileRenderingSettings` module is used to provide the tile rendering settings of the PDF viewer.
 */var TileRenderingSettings=/** @class */function(_super){__extends(TileRenderingSettings,_super);function TileRenderingSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(true)],TileRenderingSettings.prototype,"enableTileRendering",void 0);__decorate([sf.base.Property(0)],TileRenderingSettings.prototype,"x",void 0);__decorate([sf.base.Property(0)],TileRenderingSettings.prototype,"y",void 0);return TileRenderingSettings;}(sf.base.ChildProperty);/**
 * The `ScrollSettings` module is used to provide the settings of the scroll of the PDF viewer.
 */var ScrollSettings=/** @class */function(_super){__extends(ScrollSettings,_super);function ScrollSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property(100)],ScrollSettings.prototype,"delayPageRequestTimeOnScroll",void 0);return ScrollSettings;}(sf.base.ChildProperty);/**
 * The `FormField` is used to store the form fields of PDF document.
 */var FormField=/** @class */function(_super){__extends(FormField,_super);function FormField(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('')],FormField.prototype,"name",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isChecked",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isSelected",void 0);__decorate([sf.base.Property('')],FormField.prototype,"id",void 0);__decorate([sf.base.Property('')],FormField.prototype,"value",void 0);__decorate([sf.base.Property('')],FormField.prototype,"type",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isReadOnly",void 0);__decorate([sf.base.Property([''])],FormField.prototype,"signatureType",void 0);__decorate([sf.base.Property('')],FormField.prototype,"fontName",void 0);__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],FormField.prototype,"bounds",void 0);__decorate([sf.base.Property('Helvetica')],FormField.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],FormField.prototype,"fontSize",void 0);__decorate([sf.base.Property('None')],FormField.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],FormField.prototype,"color",void 0);__decorate([sf.base.Property('white')],FormField.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],FormField.prototype,"alignment",void 0);__decorate([sf.base.Property('visible')],FormField.prototype,"visibility",void 0);__decorate([sf.base.Property(0)],FormField.prototype,"maxLength",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],FormField.prototype,"tooltip",void 0);__decorate([sf.base.Property('')],FormField.prototype,"options",void 0);__decorate([sf.base.Property()],FormField.prototype,"signatureIndicatorSettings",void 0);__decorate([sf.base.Property(1)],FormField.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],FormField.prototype,"borderColor",void 0);__decorate([sf.base.Property(false)],FormField.prototype,"isMultiline",void 0);return FormField;}(sf.base.ChildProperty);/**
 * The `ContextMenuSettings` is used to show the context menu of PDF document.
 */var ContextMenuSettings=/** @class */function(_super){__extends(ContextMenuSettings,_super);function ContextMenuSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('RightClick')],ContextMenuSettings.prototype,"contextMenuAction",void 0);__decorate([sf.base.Property([])],ContextMenuSettings.prototype,"contextMenuItems",void 0);return ContextMenuSettings;}(sf.base.ChildProperty);/**
 * The `TextFieldSettings` is used to to show and customize the appearance of text box HTML element.
 */var TextFieldSettings=/** @class */function(_super){__extends(TextFieldSettings,_super);function TextFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],TextFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],TextFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property('')],TextFieldSettings.prototype,"value",void 0);__decorate([sf.base.Property('Helvetica')],TextFieldSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],TextFieldSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(0)],TextFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('None')],TextFieldSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],TextFieldSettings.prototype,"color",void 0);__decorate([sf.base.Property('white')],TextFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],TextFieldSettings.prototype,"alignment",void 0);__decorate([sf.base.Property(false)],TextFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],TextFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(0)],TextFieldSettings.prototype,"maxLength",void 0);__decorate([sf.base.Property(false)],TextFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],TextFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],TextFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(1)],TextFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],TextFieldSettings.prototype,"borderColor",void 0);__decorate([sf.base.Property(false)],TextFieldSettings.prototype,"isMultiline",void 0);return TextFieldSettings;}(sf.base.ChildProperty);/**
 * The `PasswordFieldSettings` is used to to show and customize the appearance of password input HTML element.
 */var PasswordFieldSettings=/** @class */function(_super){__extends(PasswordFieldSettings,_super);function PasswordFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],PasswordFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],PasswordFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property('')],PasswordFieldSettings.prototype,"value",void 0);__decorate([sf.base.Property(0)],PasswordFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('Helvetica')],PasswordFieldSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],PasswordFieldSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property('None')],PasswordFieldSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],PasswordFieldSettings.prototype,"color",void 0);__decorate([sf.base.Property('white')],PasswordFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],PasswordFieldSettings.prototype,"alignment",void 0);__decorate([sf.base.Property(false)],PasswordFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],PasswordFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(0)],PasswordFieldSettings.prototype,"maxLength",void 0);__decorate([sf.base.Property(false)],PasswordFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],PasswordFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],PasswordFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(1)],PasswordFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],PasswordFieldSettings.prototype,"borderColor",void 0);return PasswordFieldSettings;}(sf.base.ChildProperty);/**
 * The `CheckBoxFieldSettings` is used to to show and customize the appearance of check box element.
 */var CheckBoxFieldSettings=/** @class */function(_super){__extends(CheckBoxFieldSettings,_super);function CheckBoxFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],CheckBoxFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],CheckBoxFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property(false)],CheckBoxFieldSettings.prototype,"isChecked",void 0);__decorate([sf.base.Property('white')],CheckBoxFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property(false)],CheckBoxFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],CheckBoxFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],CheckBoxFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property(0)],CheckBoxFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('')],CheckBoxFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(false)],CheckBoxFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(1)],CheckBoxFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],CheckBoxFieldSettings.prototype,"borderColor",void 0);return CheckBoxFieldSettings;}(sf.base.ChildProperty);/**
 * The `RadioButtonFieldSettings` is used to to show and customize the appearance of radio button element.
 */var RadioButtonFieldSettings=/** @class */function(_super){__extends(RadioButtonFieldSettings,_super);function RadioButtonFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],RadioButtonFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],RadioButtonFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property(false)],RadioButtonFieldSettings.prototype,"isSelected",void 0);__decorate([sf.base.Property('white')],RadioButtonFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property(false)],RadioButtonFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property(false)],RadioButtonFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(0)],RadioButtonFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('visible')],RadioButtonFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],RadioButtonFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],RadioButtonFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property(1)],RadioButtonFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],RadioButtonFieldSettings.prototype,"borderColor",void 0);return RadioButtonFieldSettings;}(sf.base.ChildProperty);/**
 * The `DropdownFieldSettings` is used to to show and customize the appearance of drop down element.
 */var DropdownFieldSettings=/** @class */function(_super){__extends(DropdownFieldSettings,_super);function DropdownFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],DropdownFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],DropdownFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property('')],DropdownFieldSettings.prototype,"value",void 0);__decorate([sf.base.Property('Helvetica')],DropdownFieldSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],DropdownFieldSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(0)],DropdownFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('None')],DropdownFieldSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],DropdownFieldSettings.prototype,"color",void 0);__decorate([sf.base.Property('white')],DropdownFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],DropdownFieldSettings.prototype,"alignment",void 0);__decorate([sf.base.Property(false)],DropdownFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],DropdownFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],DropdownFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],DropdownFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],DropdownFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property('')],DropdownFieldSettings.prototype,"options",void 0);__decorate([sf.base.Property(1)],DropdownFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],DropdownFieldSettings.prototype,"borderColor",void 0);return DropdownFieldSettings;}(sf.base.ChildProperty);/**
 * The `ListBoxFieldSettings` is used to to show and customize the appearance of list box element.
 */var ListBoxFieldSettings=/** @class */function(_super){__extends(ListBoxFieldSettings,_super);function ListBoxFieldSettings(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property({x:0,y:0,width:0,height:0})],ListBoxFieldSettings.prototype,"bounds",void 0);__decorate([sf.base.Property('')],ListBoxFieldSettings.prototype,"name",void 0);__decorate([sf.base.Property('')],ListBoxFieldSettings.prototype,"value",void 0);__decorate([sf.base.Property('Helvetica')],ListBoxFieldSettings.prototype,"fontFamily",void 0);__decorate([sf.base.Property(10)],ListBoxFieldSettings.prototype,"fontSize",void 0);__decorate([sf.base.Property(0)],ListBoxFieldSettings.prototype,"pageNumber",void 0);__decorate([sf.base.Property('None')],ListBoxFieldSettings.prototype,"fontStyle",void 0);__decorate([sf.base.Property('black')],ListBoxFieldSettings.prototype,"color",void 0);__decorate([sf.base.Property('white')],ListBoxFieldSettings.prototype,"backgroundColor",void 0);__decorate([sf.base.Property('Left')],ListBoxFieldSettings.prototype,"alignment",void 0);__decorate([sf.base.Property(false)],ListBoxFieldSettings.prototype,"isReadOnly",void 0);__decorate([sf.base.Property('visible')],ListBoxFieldSettings.prototype,"visibility",void 0);__decorate([sf.base.Property(false)],ListBoxFieldSettings.prototype,"isRequired",void 0);__decorate([sf.base.Property(false)],ListBoxFieldSettings.prototype,"isPrint",void 0);__decorate([sf.base.Property('')],ListBoxFieldSettings.prototype,"tooltip",void 0);__decorate([sf.base.Property([])],ListBoxFieldSettings.prototype,"options",void 0);__decorate([sf.base.Property(1)],ListBoxFieldSettings.prototype,"thickness",void 0);__decorate([sf.base.Property('#303030')],ListBoxFieldSettings.prototype,"borderColor",void 0);return ListBoxFieldSettings;}(sf.base.ChildProperty);var Item=/** @class */function(_super){__extends(Item,_super);function Item(){return _super!==null&&_super.apply(this,arguments)||this;}__decorate([sf.base.Property('')],Item.prototype,"itemName",void 0);__decorate([sf.base.Property('')],Item.prototype,"itemValue",void 0);return Item;}(sf.base.ChildProperty);/**
 * Represents the PDF viewer component.
 * ```html
 * <div id="pdfViewer"></div>
 * <script>
 *  var pdfViewerObj = new PdfViewer();
 *  pdfViewerObj.appendTo("#pdfViewer");
 * </script>
 * ```
 */var PdfViewer=/** @class */function(){function PdfViewer(dataId,element,dotnetRef,options,isWebAssembly){window.sfBlazor=window.sfBlazor;/**
        * @private
        */this.blazorAction=PdfViewerBlazorAction.Default;/**
        * @private
        */this.lastAnnotation=null;/**
        * @private
        */this.cultureValue=null;/**
         * Get the Loaded document signature Collections in the PdfViewer control.
         */ // eslint-disable-next-line
this.signatureCollection=[];/**
         * Gets or sets the document name loaded in the PdfViewer control.
         */this.fileName=null;/**
         * Gets or sets the document name loaded in the PdfViewer control.
         */this.enableRtl=false;/**
         * Gets or sets the document name loaded in the PdfViewer control.
         */this.allowServerDataBinding=true;/**
         * @private
         */this.zIndex=-1;/**
         * @private
         */this.nameTable={};/**   @private  */this.clipboardData={};/**
         * @private
         */this.zIndexTable=[];this.isTextSelectionStarted=false;/**
         * store the drawing objects.
         *
         * @private
         * @deprecated
         */ //@Property()
this.drawingObject=new PdfAnnotationBase();this.LoadedOnMessage=function(event){if(event.data.message==='loaded'){this._dotnetInstance.invokeMethodAsync('Trigger','Created',null);this.viewerBase.LoadDocumentFromServer();if(this.enableTextSelection&&this.textSelectionModule){this.textSelectionModule.enableTextSelectionMode();}else{this.viewerBase.disableTextSelectionMode();}this.drawing.renderLabels(this);}};/** @hidden */this.defaultLocale={'PdfViewer':'PDF Viewer','Cancel':'Cancel','Download file':'Download file','Download':'Download','Enter Password':'This document is password protected. Please enter a password.','File Corrupted':'File Corrupted','File Corrupted Content':'The file is corrupted and cannot be opened.','Fit Page':'Fit Page','Fit Width':'Fit Width','Automatic':'Automatic','Go To First Page':'Show first page','Invalid Password':'Incorrect Password. Please try again.','Next Page':'Show next page','OK':'OK','Open':'Open file','Page Number':'Current page number','Previous Page':'Show previous page','Go To Last Page':'Show last page','Zoom':'Zoom','Zoom In':'Zoom in','Zoom Out':'Zoom out','Page Thumbnails':'Page thumbnails','Bookmarks':'Bookmarks','Print':'Print file','Password Protected':'Password Required','Copy':'Copy','Text Selection':'Text selection tool','Panning':'Pan mode','Text Search':'Find text','Find in document':'Find in document','Match case':'Match case','Apply':'Apply','GoToPage':'Go to Page',// eslint-disable-next-line max-len
'No matches':'Viewer has finished searching the document. No more matches were found','No Text Found':'No Text Found','Undo':'Undo','Redo':'Redo','Annotation':'Add or Edit annotations','Highlight':'Highlight Text','Underline':'Underline Text','Strikethrough':'Strikethrough Text','Delete':'Delete annotation','Opacity':'Opacity','Color edit':'Change Color','Opacity edit':'Change Opacity','Highlight context':'Highlight','Underline context':'Underline','Strikethrough context':'Strikethrough',// eslint-disable-next-line max-len
'Server error':'Web-service is not listening. PDF Viewer depends on web-service for all it\'s features. Please start the web service to continue.',// eslint-disable-next-line max-len
'Client error':'Client-side error is found. Please check the custom headers provided in the AjaxRequestSettings property and web action methods in the ServerActionSettings property.','Open text':'Open','First text':'First Page','Previous text':'Previous Page','Next text':'Next Page','Last text':'Last Page','Zoom in text':'Zoom In','Zoom out text':'Zoom Out','Selection text':'Selection','Pan text':'Pan','Print text':'Print','Search text':'Search','Annotation Edit text':'Edit Annotation','Line Thickness':'Line Thickness','Line Properties':'Line Properties','Start Arrow':'Start Arrow','End Arrow':'End Arrow','Line Style':'Line Style','Fill Color':'Fill Color','Line Color':'Line Color','None':'None','Open Arrow':'Open','Closed Arrow':'Closed','Round Arrow':'Round','Square Arrow':'Square','Diamond Arrow':'Diamond','Butt':'Butt','Cut':'Cut','Paste':'Paste','Delete Context':'Delete','Properties':'Properties','Add Stamp':'Add Stamp','Add Shapes':'Add Shapes','Stroke edit':'Change Stroke Color','Change thickness':'Change Border Thickness','Add line':'Add Line','Add arrow':'Add Arrow','Add rectangle':'Add Rectangle','Add circle':'Add Circle','Add polygon':'Add Polygon','Add Comments':'Add Comments','Comments':'Comments','SubmitForm':'Submit Form','No Comments Yet':'No Comments Yet','Accepted':'Accepted','Completed':'Completed','Cancelled':'Cancelled','Rejected':'Rejected','Leader Length':'Leader Length','Scale Ratio':'Scale Ratio','Calibrate':'Calibrate','Calibrate Distance':'Calibrate Distance','Calibrate Perimeter':'Calibrate Perimeter','Calibrate Area':'Calibrate Area','Calibrate Radius':'Calibrate Radius','Calibrate Volume':'Calibrate Volume','Depth':'Depth','Closed':'Closed','Round':'Round','Square':'Square','Diamond':'Diamond','Edit':'Edit','Comment':'Comment','Comment Panel':'Comment Panel','Set Status':'Set Status','Post':'Post','Page':'Page','Add a comment':'Add a comment','Add a reply':'Add a reply','Import Annotations':'Import annotations from JSON file','Export Annotations':'Export annotation to JSON file','Export XFDF':'Export annotation to XFDF file','Import XFDF':'Import annotations from XFDF file','Add':'Add','Clear':'Clear','Bold':'Bold','Italic':'Italic','Strikethroughs':'Strikethrough','Underlines':'Underline','Superscript':'Superscript','Subscript':'Subscript','Align left':'Align Left','Align right':'Align Right','Center':'Center','Justify':'Justify','Font color':'Font Color','Text Align':'Text Align','Text Properties':'Font Style','SignatureFieldDialogHeaderText':'Add Signature','HandwrittenSignatureDialogHeaderText':'Add Signature','InitialFieldDialogHeaderText':'Add Initial','HandwrittenInitialDialogHeaderText':'Add Initial','Draw Ink':'Draw Ink','Create':'Create','Font family':'Font Family','Font size':'Font Size','Free Text':'Free Text','Import Failed':'Invalid JSON file type or file name; please select a valid JSON file','File not found':'Imported JSON file is not found in the desired location','Export Failed':'Export annotations action has failed; please ensure annotations are added properly','of':'of ','Dynamic':'Dynamic','Standard Business':'Standard Business','Sign Here':'Sign Here','Custom Stamp':'Custom Stamp','Enter Signature as Name':'Enter your name','Draw-hand Signature':'DRAW','Type Signature':'TYPE','Upload Signature':'UPLOAD','Browse Signature Image':'BROWSE','Save Signature':'Save Signature','Save Initial':'Save Initial','Textbox':'Textbox','Password':'Password','Check Box':'Checkbox','Radio Button':'Radio Button','Dropdown':'Drop Down','List Box':'List Box','Signature':'Signature','Delete FormField':'Delete Form Field','Textbox Properties':'Textbox Properties','Name':'Name','Tooltip':'Tooltip','Value':'Value','Form Field Visibility':'Form Field Visibility','Read Only':'Read Only','Required':'Required','Checked':'Checked','Show Printing':'Show Printing','Formatting':'Format','Fill':'Fill','Border':'Border','Border Color':'Border Color','Thickness':'Thickness','Max Length':'Max Length','List Item':'Item Name','Export Value':'Item Value','Dropdown Item List':'Dropdown Item List','List Box Item List':'List Box Item List','General':'GENERAL','Appearance':'APPEARANCE','Options':'OPTIONS','Delete Item':'Delete','Up':'Up','Down':'Down','Multiline':'Multiline','Revised':'Revised','Reviewed':'Reviewed','Received':'Received','Confidential':'Confidential','Approved':'Approved','Not Approved':'Not Approved','Witness':'Witness','Initial Here':'Initial Here','Draft':'Draft','Final':'Final','For Public Release':'For Public Release','Not For Public Release':'Not For Public Release','For Comment':'For Comment','Void':'Void','Preliminary Results':'Preliminary Results','Information Only':'Information Only','in':'in','m':'m','ft_in':'ft_in','ft':'ft','p':'p','cm':'cm','mm':'mm','pt':'pt','cu':'cu','sq':'sq','Initial':'Initial'};// debugger;
this._dotnetInstance=dotnetRef;// if (!isNullOrUndefined(element)) {
//     element.blazor__instance = this;
// }
this.element=element;this.dataId=dataId;window.sfBlazor.setCompInstance(this);this.viewerBase=new PdfViewerBase(this);this.viewerBase.isWebAssembly=isWebAssembly;if(!sf.base.isNullOrUndefined(options)){this.options=options;this.updateOptions(options);}this.drawing=new Drawing(this);}Object.defineProperty(PdfViewer.prototype,"zoomPercentage",{/**
         * Returns the current zoom percentage of the PdfViewer control.
         *
         * @asptype int
         * @blazorType int
         */get:function get(){return this.magnificationModule.zoomFactor*100;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"bookmark",{/**
         * Gets the bookmark view object of the pdf viewer.
         *
         * @asptype BookmarkView
         * @blazorType BookmarkView
         * @returns { BookmarkView }
         */get:function get(){return this.bookmarkViewModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"print",{/**
         * Gets the print object of the pdf viewer.
         *
         * @asptype Print
         * @blazorType Print
         * @returns { Print }
         */get:function get(){return this.printModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"magnification",{/**
         * Gets the magnification object of the pdf viewer.
         *
         * @asptype Magnification
         * @blazorType Magnification
         * @returns { Magnification }
         */get:function get(){return this.magnificationModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"navigation",{/**
         * Gets the navigation object of the pdf viewer.
         *
         * @asptype Navigation
         * @blazorType Navigation
         * @returns { Navigation }
         */get:function get(){return this.navigationModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"textSearch",{/**
         * Gets the text search object of the pdf viewer.
         *
         * @asptype TextSearch
         * @blazorType TextSearch
         * @returns { TextSearch }
         */get:function get(){return this.textSearchModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"toolbar",{/**
         * Gets the toolbar object of the pdf viewer.
         *
         * @asptype Toolbar
         * @blazorType Toolbar
         * @returns { Toolbar }
         */get:function get(){return this.toolbarModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"thumbnailView",{/**
         * Gets the thumbnail-view object of the pdf viewer.
         *
         * @asptype ThumbnailView
         * @blazorType ThumbnailView
         * @returns { ThumbnailView }
         */get:function get(){return this.thumbnailViewModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"annotation",{/**
         * Gets the annotation object of the pdf viewer.
         *
         * @asptype Annotation
         * @blazorType Annotation
         * @returns { Annotation }
         */get:function get(){return this.annotationModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"formField",{/**
         * Gets the FormFields object of the pdf viewer.
         *
         * @asptype FormFields
         * @blazorType FormFields
         * @returns { FormFields }
         */get:function get(){return this.formFieldsModule;},enumerable:true,configurable:true});Object.defineProperty(PdfViewer.prototype,"textSelection",{/**
         * Gets the TextSelection object of the pdf viewer.
         *
         * @asptype TextSelection
         * @blazorType TextSelection
         * @returns { TextSelection }
         */get:function get(){return this.textSelectionModule;},enumerable:true,configurable:true});PdfViewer.prototype.updateOptions=function(options){this.serviceUrl=options.serviceUrl;this.enableFormFieldsValidation=options.enableFormFieldsValidation;this.pageCount=options.pageCount;this.printScaleFactor=options.printScaleFactor;this.isDocumentEdited=options.isDocumentEdited;this.currentPageNumber=options.currentPageNumber;this.documentPath=options.documentPath;this.zoomValue=options.zoomValue;this.zoomMode=options.zoomMode;this.downloadFileName=options.downloadFileName;this.exportAnnotationFileName=options.exportAnnotationFileName;this.height=options.height;this.width=options.width;this.enableToolbar=options.enableToolbar;this.enableRtl=options.enableRtl;this.enableAnnotationToolbar=options.enableAnnotationToolbar;this.enableNavigationToolbar=options.enableNavigationToolbar;this.retryCount=options.retryCount;this.showNotificationDialog=options.showNotificationDialog;this.enableCommentPanel=options.enableCommentPanel;this.isCommandPanelOpen=options.isCommandPanelOpen;this.commentPanelVisible=options.commentPanelVisible;this.showDigitalSignatureAppearance=options.showDigitalSignatureAppearance;this.enableThumbnail=options.enableThumbnail;this.isThumbnailViewOpen=options.isThumbnailViewOpen;this.enableDownload=options.enableDownload;this.enablePrint=options.enablePrint;this.printMode=options.printMode;this.isSignatureEditable=options.isSignatureEditable;this.enableBookmark=options.enableBookmark;this.enableHyperlink=options.enableHyperlink;this.enableHandwrittenSignature=options.enableHandwrittenSignature;this.enableInkAnnotation=options.enableInkAnnotation;this.restrictZoomRequest=options.restrictZoomRequest;this.hyperlinkOpenState=options.hyperlinkOpenState;this.enableNavigation=options.enableNavigation;this.enableAutoComplete=options.enableAutoComplete;this.enableMagnification=options.enableMagnification;this.enableShapeLabel=options.enableShapeLabel;this.enableImportAnnotationMeasurement=options.enableImportAnnotationMeasurement;this.enablePinchZoom=options.enablePinchZoom;this.enableZoomOptimization=options.enableZoomOptimization;this.enableTextSelection=options.enableTextSelection;this.enableTextSearch=options.enableTextSearch;this.enableAnnotation=options.enableAnnotation;this.enableFormFields=options.enableFormFields;this.isFormFieldDocument=options.isFormFieldDocument;this.enableFreeText=options.enableFreeText;this.enableTextMarkupAnnotation=options.enableTextMarkupAnnotation;this.enableShapeAnnotation=options.enableShapeAnnotation;this.enableMeasureAnnotation=options.enableMeasureAnnotation;this.enableStampAnnotations=options.enableStampAnnotations;this.enableStickyNotesAnnotation=options.enableStickyNotesAnnotation;this.interactionMode=options.interactionMode;this.isExtractText=options.isExtractText;this.dateTimeFormat=options.stampSettings.dateTimeFormat;// this.cssClass = options.cssClass,
this.toolbarSettings=options.toolbarSettings;this.ajaxRequestSettings=options.ajaxRequestSettings;this.serverActionSettings=options.serverActionSettings;this.textSearchColorSettings=options.textSearchColorSettings;this.contextMenuSettings=options.contextMenuSettings;this.tileRenderingSettings=options.tileRenderingSettings;this.scrollSettings=options.scrollSettings;this.annotationSettings=options.annotationSettings;this.highlightSettings=options.highlightSettings;this.strikethroughSettings=options.strikethroughSettings;this.underlineSettings=options.underlineSettings;this.shapeLabelSettings=options.shapeLabelSettings;this.lineSettings=options.lineSettings;this.arrowSettings=options.arrowSettings;this.rectangleSettings=options.rectangleSettings;this.circleSettings=options.circleSettings;this.polygonSettings=options.polygonSettings;this.measurementSettings=options.measurementSettings;this.distanceSettings=options.distanceSettings;this.perimeterSettings=options.perimeterSettings;this.areaSettings=options.areaSettings;this.radiusSettings=options.radiusSettings;this.volumeSettings=options.volumeSettings;this.stampSettings=options.stampSettings;this.customStampSettings=options.customStampSettings;this.freeTextSettings=options.freeTextSettings;this.handWrittenSignatureSettings=options.handWrittenSignatureSettings;this.signatureFieldSettings=options.signatureFieldSettings;this.inkAnnotationSettings=options.inkAnnotationSettings;this.stickyNotesSettings=options.stickyNotesSettings;this.annotationSelectorSettings=options.annotationSelectorSettings;this.enableDesktopMode=options.enableDesktopMode;this.enablePrintRotation=options.enablePrintRotation;if(!this.annotations){this.annotations=options.annotations;}if(options.selectedItems&&this.selectedItems===undefined){this.selectedItems=options.selectedItems;}this.formFields=options.formFields;this.requiredModules();};/**
     * @private
     */PdfViewer.prototype.updatePdfViewerOptions=function(propertyName,value){this._dotnetInstance.invokeMethodAsync('UpdatePdfViewerOptions',propertyName,value);};PdfViewer.prototype.setOptions=function(newProp,oldProp,update){var properties=Object.keys(newProp);for(var _i=0,properties_1=properties;_i<properties_1.length;_i++){var prop=properties_1[_i];switch(prop){case'locale':// if (this.viewerBase.loadedData) {
//     // eslint-disable-next-line
//     let data: any = null;
//     if (this.formFieldsModule) {
//         data = this.viewerBase.getItemFromSessionStorage('_formfields');
//     }
//     if (data) {
//         this.viewerBase.formfieldvalue = JSON.parse(data);
//         // eslint-disable-next-line
//         let annotCollection: any[] = this.annotationCollection;
//         const filename: string = this.viewerBase.jsonDocumentId;
//         super.refresh();
//         this.load(this.viewerBase.loadedData, null);
//         this.addAnnotation(annotCollection);
//         this.viewerBase.loadedData = null;
//         this.downloadFileName = filename;
//         this.fileName = filename;
//     }
// }
break;case'enableToolbar':// this.notify('', { module: 'toolbar', enable: this.enableToolbar });
// requireRefresh = true;
break;case'enableCommentPanel':// this.notify('', { module: 'annotation', enable: this.enableCommentPanel });
// requireRefresh = true;
// if (this.toolbarModule && this.toolbarModule.annotationToolbarModule) {
//     this.toolbarModule.annotationToolbarModule.enableCommentPanelTool(this.enableCommentPanel);
// }
// if (!this.enableCommentPanel) {
//     if (this.viewerBase.navigationPane) {
//         this.viewerBase.navigationPane.closeCommentPanelContainer();
//     }
// }
break;case'showDigitalSignatureAppearance':this.showDigitalSignatureAppearance=newProp.showDigitalSignatureAppearance;break;case'documentPath':if(update){this.load(newProp.documentPath,null);}break;case'interactionMode':this.interactionMode=newProp.interactionMode;if(newProp.interactionMode==='Pan'){this.viewerBase.initiatePanning();if(this.toolbar){this.toolbar.updateInteractionTools(false);}}else if(newProp.interactionMode==='TextSelection'){this.viewerBase.initiateTextSelectMode();if(this.toolbar){this.toolbar.updateInteractionTools(true);}}break;case'height':this.height=newProp.height;this.viewerBase.updateHeight();this.viewerBase.onWindowResize();if(this.toolbar&&this.toolbar.annotationToolbarModule){if(!sf.base.Browser.isDevice||this.enableDesktopMode){if(this.toolbar.annotationToolbarModule.isToolbarHidden){this.toolbar.annotationToolbarModule.adjustViewer(false);}else{this.toolbar.annotationToolbarModule.adjustViewer(true);}}else{if(this.toolbar.annotationToolbarModule.isToolbarHidden){this.toolbar.annotationToolbarModule.adjustMobileToolbar(false);}else{this.toolbar.annotationToolbarModule.adjustMobileToolbar(true);}}}break;case'width':this.width=newProp.width;this.viewerBase.updateWidth();this.viewerBase.onWindowResize();break;case'customStamp':this.renderCustomerStamp(this.customStamp[0]);break;case'customStampSettings':this.customStampSettings=newProp.customStampSettings;break;case'enableFormFields':/* if (this.enableFormFields && this.formFieldsModule) {
                         for (let m: number = 0; m < this.pageCount; m++) {
                             this.formFieldsModule.renderFormFields(m);
                         }
                     } else {
                         this.formFieldsModule = new FormFields(this, this.viewerBase);
                         this.formFieldsModule.formFieldsReadOnly(this.enableFormFields);
                     }*/break;case'highlightSettings':case'underlineSettings':case'strikethroughSettings':if(this.annotationModule&&this.annotationModule.textMarkupAnnotationModule){this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(prop);}break;case'commentPanelVisible':if(newProp.commentPanelVisible){this.annotation.showCommentsPanelInBlazor();}else{this.viewerBase.navigationPane.closeCommentPanelContainer();}break;}}this.updateOptions(newProp);};PdfViewer.prototype.preRender=function(){this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultLocale,'en-US');};PdfViewer.prototype.render=function(){var proxy=null;proxy=this;this.viewerBase.initializeComponent();var workerBob=new Blob([PdfiumRunner.toString().replace(/^[^{]*{([\s\S]*)}$/m,'$1')],{type:'text/javascript'});var workerBlobUrl=URL.createObjectURL(workerBob);window['pdfViewerRunner_'+this.dataId]=this.viewerBase.pdfViewerRunner=new Worker(workerBlobUrl);window.getRunningScript=function(){return function(){var localHostUrlMatch=new Error().stack.match(/(?:http[s]?:\/\/(?:[^\/\s]+\/))(.*\.js)/);if(localHostUrlMatch&&localHostUrlMatch.length>0){return localHostUrlMatch[0];}else{var iosUrlMatch=new Error().stack.match(/(?:app?:\/\/(?:[^\/\s]+\/))(.*\.js)/);if(iosUrlMatch&&iosUrlMatch.length>0){return iosUrlMatch[0];}else{return"";}}};};var scriptLinkURL=window.getRunningScript()();var splitURL=scriptLinkURL.split('/');this.viewerBase.pdfViewerRunner.postMessage({url:scriptLinkURL.replace("/"+splitURL[splitURL.length-1],""),message:'initialLoading'});this.viewerBase.pdfViewerRunner.onmessage=function(event){Promise.resolve().then(function(){proxy.viewerBase.CommonOnMessage(event);});};// this.renderComplete();
};PdfViewer.prototype.getModuleName=function(){return'PdfViewer';};/**
     * @private
     */PdfViewer.prototype.getLocaleConstants=function(){return this.defaultLocale;};/**
     * To modify the Json Data in ajax request.
     *
     * @param jsonData
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.setJsonData=function(jsonData){this.viewerBase.ajaxData=jsonData;};PdfViewer.prototype.onPropertyChanged=function(newProp,oldProp){var properties=Object.keys(newProp);for(var _i=0,properties_2=properties;_i<properties_2.length;_i++){var prop=properties_2[_i];switch(prop){case'locale':/* if (this.viewerBase.loadedData) {
                         // eslint-disable-next-line
                         let data: any = null;
                         if (this.formFieldsModule) {
                             data = this.viewerBase.getItemFromSessionStorage('_formfields');
                         }
                         if (data) {
                             this.viewerBase.formfieldvalue = JSON.parse(data);
                             // eslint-disable-next-line
                             let annotCollection: any[] = this.annotationCollection;
                             const filename: string = this.viewerBase.jsonDocumentId;
                             super.refresh();
                             this.load(this.viewerBase.loadedData, null);
                             this.addAnnotation(annotCollection);
                             this.viewerBase.loadedData = null;
                             this.downloadFileName = filename;
                             this.fileName = filename;
                         }
                     }*/break;case'enableToolbar'://this.notify('', { module: 'toolbar', enable: this.enableToolbar });
break;case'enableCommentPanel'://this.notify('', { module: 'annotation', enable: this.enableCommentPanel });
if(this.toolbarModule&&this.toolbarModule.annotationToolbarModule){this.toolbarModule.annotationToolbarModule.enableCommentPanelTool(this.enableCommentPanel);}if(!this.enableCommentPanel){if(this.viewerBase.navigationPane){this.viewerBase.navigationPane.closeCommentPanelContainer();}}break;case'documentPath':this._dotnetInstance.invokeMethodAsync('LoadDocumentFromClient',newProp.documentPath,false);break;case'interactionMode':this.interactionMode=newProp.interactionMode;if(newProp.interactionMode==='Pan'){this.viewerBase.initiatePanning();if(this.toolbar){this.toolbar.updateInteractionTools(false);}}else if(newProp.interactionMode==='TextSelection'){this.viewerBase.initiateTextSelectMode();if(this.toolbar){this.toolbar.updateInteractionTools(true);}}break;case'height':this.height=newProp.height;this.viewerBase.updateHeight();this.viewerBase.onWindowResize();if(this.toolbar&&this.toolbar.annotationToolbarModule){if(this.toolbar.annotationToolbarModule.isToolbarHidden){this.toolbar.annotationToolbarModule.adjustViewer(false);}else{this.toolbar.annotationToolbarModule.adjustViewer(true);}}break;case'width':this.width=newProp.width;this.viewerBase.updateWidth();this.viewerBase.onWindowResize();break;case'customStamp':this.renderCustomerStamp(this.customStamp[0]);break;case'customStampSettings':if(newProp.customStampSettings.customStamps){this.renderCustomerStamp(this.customStampSettings.customStamps[0]);}break;case'enableFormFields':if(this.enableFormFields&&this.formFieldsModule){for(var m=0;m<this.pageCount;m++){this.formFieldsModule.renderFormFields(m);}}else{this.formFieldsModule=new FormFields(this,this.viewerBase);this.formFieldsModule.formFieldsReadOnly(this.enableFormFields);}break;case'highlightSettings':case'underlineSettings':case'strikethroughSettings':if(this.annotationModule&&this.annotationModule.textMarkupAnnotationModule){this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(prop);}break;}}};// eslint-disable-next-line
PdfViewer.prototype.renderCustomerStamp=function(customStamp){this.annotation.stampAnnotationModule.isStampAddMode=true;this.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;this.viewerBase.stampAdded=true;this.viewerBase.isAlreadyAdded=false;// eslint-disable-next-line max-len
this.annotation.stampAnnotationModule.createCustomStampAnnotation(customStamp.customStampImageSource,customStamp.customStampName);};PdfViewer.prototype.getPersistData=function(){return'PdfViewer';};PdfViewer.prototype.requiredModules=function(){if(this.enableMagnification){if(sf.base.isNullOrUndefined(this.magnificationModule)){this.magnificationModule=new Magnification(this,this.viewerBase);}}if(this.enableNavigation){if(sf.base.isNullOrUndefined(this.navigationModule)){this.navigationModule=new Navigation(this,this.viewerBase);}}if(this.enableToolbar||this.enableNavigationToolbar||this.enableAnnotationToolbar){if(sf.base.isNullOrUndefined(this.toolbarModule)){this.toolbarModule=new Toolbar$1(this,this.viewerBase);}}if(this.enableHyperlink){if(sf.base.isNullOrUndefined(this.linkAnnotationModule)){this.linkAnnotationModule=new LinkAnnotation(this,this.viewerBase);}}if(this.enableThumbnail){if(sf.base.isNullOrUndefined(this.thumbnailViewModule)){this.thumbnailViewModule=new ThumbnailView(this,this.viewerBase);}}if(this.enableBookmark){if(sf.base.isNullOrUndefined(this.bookmarkViewModule)){this.bookmarkViewModule=new BookmarkView(this,this.viewerBase);}}if(this.enableTextSelection){if(sf.base.isNullOrUndefined(this.printModule)){this.textSelectionModule=new TextSelection(this,this.viewerBase);}}if(this.enableTextSearch){if(sf.base.isNullOrUndefined(this.textSearchModule)){this.textSearchModule=new TextSearch(this,this.viewerBase);}}if(this.enablePrint){if(sf.base.isNullOrUndefined(this.printModule)){this.printModule=new Print(this,this.viewerBase);}}if(this.enableAnnotation){if(sf.base.isNullOrUndefined(this.annotationModule)){this.annotationModule=new Annotation(this,this.viewerBase);}}if(this.enableFormFields){if(sf.base.isNullOrUndefined(this.formFieldsModule)){this.formFieldsModule=new FormFields(this,this.viewerBase);}}};/**
     * Loads the given PDF document in the PDF viewer control
     *
     * @param  {string} document - Specifies the document name for load
     * @param  {string} password - Specifies the Given document password
     * @returns void
     */PdfViewer.prototype.load=function(document,password){if(this.pageCount!==0){this.viewerBase.clear(true);}else{this.viewerBase.clear(false);}this.pageCount=0;this.currentPageNumber=0;this.updatePdfViewerOptions("PageCount",0);this.updatePdfViewerOptions("CurrentPageNumber",0);this.viewerBase.blazorUIAdaptor.resetToolbar();this.viewerBase.initiatePageRender(document,password);};/**
     * Loads the given PDF document in the PDF viewer control
     * @private
     */PdfViewer.prototype.loadDocument=function(documentId,isFileName,fileName){if(this.pageCount!==0){this.viewerBase.clear(true);}else{this.viewerBase.clear(false);}this.pageCount=0;this.currentPageNumber=0;this.viewerBase.blazorUIAdaptor.resetToolbar();this.fileName=fileName;this.viewerBase.initiateLoadDocument(documentId,isFileName,fileName);};/**
     * Loads the Byte Array of document in the PDF viewer control
    * @private
    */PdfViewer.prototype.loadByteArray=function(documentByteArray){if(documentByteArray!=null){this.fileByteArray=documentByteArray;}};/**
     * Loads the PDF document with the document details in the PDF viewer control
    * @private
    */PdfViewer.prototype.loadSuccess=function(documentDetails,password){this.viewerBase.loadSuccess(documentDetails,password);};/**
     * Set the focus of the given element
    * @private
    */PdfViewer.prototype.focusElement=function(elementId){var element=document.getElementById(elementId);if(element!=null){element.focus();}};/**
     * Downloads the PDF document being loaded in the ejPdfViewer control.
     *
     * @returns void
     */PdfViewer.prototype.download=function(){if(this.enableDownload){this.viewerBase.download();}};/**
     * Saves the PDF document being loaded in the PDF Viewer control as blob.
     *
     * @returns Promise<Blob>
     */PdfViewer.prototype.saveAsBlob=function(){var _this=this;if(this.enableDownload){return new Promise(function(resolve,reject){resolve(_this.viewerBase.saveAsBlob());});}else{return null;}};/**
     * updates the PDF Viewer container width and height from externally.
     *
     * @returns void
     */PdfViewer.prototype.updateViewerContainer=function(){this.viewerBase.updateViewerContainer();};/**
     * Specifies the message to be displayed  in the popup.
     *
     * @param errorString
     * @returns void
     */PdfViewer.prototype.showNotificationPopup=function(errorString){this.viewerBase.showNotificationPopup(errorString);};/**
     * Focus a form field in a document by its field name or the field object.
     *
     * @param field
     * @returns void
     */PdfViewer.prototype.focusFormField=function(field){var _this=this;if(typeof field==="string"){var fieldCollections=this.retrieveFormFields();for(var i=0;i<fieldCollections.length;i++){if(fieldCollections[i].name===field){field=fieldCollections[i];}}}if(field){this.viewerBase.isFocusField=true;this.viewerBase.focusField=field;var pageIndex=parseFloat(field.id.split('_')[1]);this.navigationModule.goToPage(pageIndex+1);setTimeout(function(){var currentField=document.getElementById(field.id);if(currentField){currentField.focus();_this.viewerBase.isFocusField=false;_this.viewerBase.focusField=[];}},100);}};/**
     * Update the form field values from externally.
     *
     * @param fieldValue
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.updateFormFieldsValue=function(fieldValue){// eslint-disable-next-line
var target=document.getElementById(fieldValue.id);target=target?target:document.getElementById(fieldValue.id+'_content_html_element').children[0].children[0];if(target&&fieldValue.type==='Textbox'||fieldValue.type==='Password'){target.value=fieldValue.value;}else if(fieldValue.type==='RadioButton'||fieldValue.type==='CheckBox'){if(fieldValue.type==='CheckBox'){target.style.appearance='auto';}if(fieldValue.type==='RadioButton'){var value=fieldValue.value.toLowerCase();if(value==="true"||value==="yes"||value==="on"){target.checked=true;target.value=fieldValue.value;}}else{target.checked=false;target.value=fieldValue.value;}}else if(fieldValue.type==='DropDown'||fieldValue.type==='ListBox'){if(target.nodeName==="SELECT"){target.options[target.selectedIndex].text=fieldValue.value;}if(target.nodeName==="DATALIST"){target=document.getElementById(target.id.replace(this.element.id+'input_','editableDropdown'));target.value=fieldValue.value;}}if(fieldValue.type==='SignatureField'||fieldValue.type==='InitialField'){if(fieldValue.signatureType){fieldValue.signatureType=fieldValue.signatureType[0];}fieldValue.fontName=fieldValue.fontName?fieldValue.fontName:fieldValue.fontFamily;var signatureField=this.getFormFieldByID(fieldValue.id);var isSameValue=signatureField.Value===fieldValue.value;if(target.classList.contains('e-pdfviewer-signatureformfields-signature')&&!isSameValue){this.annotation.deleteAnnotationById(fieldValue.id);}if(!fieldValue.signatureType||!fieldValue.value)fieldValue.signatureType=(fieldValue.value&&fieldValue.value.indexOf('base64'))>-1?'Image':fieldValue.value&&fieldValue.value.startsWith('M')&&fieldValue.value.split(',')[1].split(' ')[1].startsWith('L')?'Path':'Type';if(!isSameValue){this.formFieldsModule.drawSignature(fieldValue.signatureType,fieldValue.value,target,fieldValue.fontName);}}else{this.formFieldsModule.updateDataInSession(target);}};// eslint-disable-next-line
PdfViewer.prototype.getFormFieldByID=function(id){var data=window.sessionStorage.getItem(this.viewerBase.documentId+'_formfields');var formFieldsData=JSON.parse(data);return formFieldsData[formFieldsData.findIndex(function(el){return el.uniqueID===id;})];};/**
     * Perform undo action for the edited annotations
     *
     * @returns void
     */PdfViewer.prototype.undo=function(){if(this.annotationModule){this.annotationModule.undo();}};/**
     * Perform redo action for the edited annotations
     *
     * @returns void
     */PdfViewer.prototype.redo=function(){if(this.annotationModule){this.annotationModule.redo();}};/**
     * Unloads the PDF document being displayed in the PDF viewer.
     *
     * @returns void
     */PdfViewer.prototype.unload=function(){this.viewerBase.clear(true);this.viewerBase.pdfViewerRunner.postMessage({message:'unloadFPDF'});this.updatePdfViewerOptions("PageCount",0);this.pageCount=0;this.viewerBase.blazorUIAdaptor.resetToolbar();if(this.fileByteArray){this.fileByteArray=null;}if(this.viewerBase.hyperlinkAndLinkAnnotation){this.viewerBase.hyperlinkAndLinkAnnotation={};}if(this.viewerBase.pageTextDetails){this.viewerBase.pageTextDetails={};}this.magnificationModule.zoomTo(100);if(sf.base.Browser.isDevice&&!this.enableDesktopMode){this._dotnetInstance.invokeMethodAsync('AdjustMobileToolbar');}};/**
     * Destroys all managed resources used by this object.
     */PdfViewer.prototype.destroy=function(isDestroy,dataId){if(window["pdfViewerRunner_"+dataId]){window["pdfViewerRunner_"+dataId].terminate();delete window["pdfViewerRunner_"+dataId];}if(!sf.base.isNullOrUndefined(this.element)&&!isDestroy){if(this.element.parentElement!==null){this.element.parentElement.removeChild(this.element);}}if(this.viewerBase.navigationPane){this.viewerBase.navigationPane.restrictUpdateZoomValue=false;}this.viewerBase.destroy();if(this.viewerBase.navigationPane){this.viewerBase.navigationPane.restrictUpdateZoomValue=true;}};// eslint-disable-next-line
/**
     * Perform imports annotations action in the PDF Viewer
     * @param  {any} importData - Specifies the data for annotation imports
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.importAnnotation=function(importData,annotationDataFormat){if(this.annotationModule){if(typeof importData==='string'){var isXfdfFile=importData.indexOf('.xfdf')>-1||annotationDataFormat.indexOf('Xfdf')>-1?true:false;if(annotationDataFormat){if(importData.indexOf('</xfdf>')>-1){this.viewerBase.importAnnotations(importData,annotationDataFormat,false);}else{if(annotationDataFormat=='Json'){if(importData.includes('pdfAnnotation')){this.importAnnotationsAsJson(importData);}else if(importData.toLowerCase().endsWith(".json")){this.viewerBase.isPDFViewerJson=true;this.viewerBase.importAnnotations(importData,annotationDataFormat,isXfdfFile);}else{var newImportData=importData.split(',')[1]?importData.split(',')[1]:importData.split(',')[0];importData=decodeURIComponent(escape(atob(newImportData)));this.importAnnotationsAsJson(importData);}}else{this.viewerBase.importAnnotations(importData,annotationDataFormat,isXfdfFile);}}}else{if(importData.split('.')[1]==='json'){if(importData.includes('pdfAnnotation')){this.importAnnotationsAsJson(importData);}else{var newImportData=importData.split(',')[1]?importData.split(',')[1]:importData.split(',')[0];importData=decodeURIComponent(escape(atob(newImportData)));this.importAnnotationsAsJson(importData);}}else{this.viewerBase.importAnnotations(importData,AnnotationDataFormat.Xfdf,isXfdfFile);}}}else{this.viewerBase.importAnnotations(importData);}}};/**
     * Perform import annotations as json action in the PDF Viewer
     *
     * @param importData
     * @returns void
     */PdfViewer.prototype.importAnnotationsAsJson=function(importData){var jsonData=JSON.parse(importData);var firstAnnotation=jsonData.pdfAnnotation[Object.keys(jsonData.pdfAnnotation)[0]];if(Object.keys(jsonData.pdfAnnotation).length>=1&&(firstAnnotation.textMarkupAnnotation||firstAnnotation.measureShapeAnnotation||firstAnnotation.freeTextAnnotation||firstAnnotation.stampAnnotations||firstAnnotation.signatureInkAnnotation||firstAnnotation.shapeAnnotation&&firstAnnotation.shapeAnnotation[0].Bounds)){this.viewerBase.isPDFViewerJson=true;this.viewerBase.importAnnotations(jsonData,AnnotationDataFormat.Json);}else{this.viewerBase.isPDFViewerJson=false;var textEncoder=new TextEncoder();var data=textEncoder.encode(importData);this.viewerBase.importAnnotations(btoa(String.fromCharCode.apply(null,data)),AnnotationDataFormat.Json);}};/**
     * Perform export annotations action in the PDF Viewer
     *
     * @param annotationDataFormat
     * @returns void
     */PdfViewer.prototype.exportAnnotation=function(annotationDataFormat){if(this.annotationModule){if(annotationDataFormat&&annotationDataFormat==='Xfdf'){this.viewerBase.exportAnnotations(AnnotationDataFormat.Xfdf);}else{this.viewerBase.exportAnnotations(AnnotationDataFormat.Json);}}};/**
     * Perform export annotations action in the PDF Viewer
     *
     * @returns Promise<object>
     */PdfViewer.prototype.exportAnnotationsAsObject=function(){var _this=this;if(this.annotationModule){return new Promise(function(resolve,reject){_this.viewerBase.exportAnnotationsAsObject().then(function(value){resolve(value);});});}else{return null;}};/**
     * Export annotations and returns a base64 string for both Json and XFDF formats
     *
     * @returns Promise<string>
     */PdfViewer.prototype.exportAnnotationsAsBase64String=function(annotationDataFormat){var _this=this;if(this.annotationModule){return new Promise(function(resolve,reject){_this.viewerBase.createRequestForExportAnnotations(false,annotationDataFormat,true).then(function(value){resolve(value);});});}else{return null;}};/**
     * Perform to add annotations in the PDF Viewer
     *
     * @param annotation
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.addAnnotation=function(annotation){if(this.viewerBase){this.viewerBase.addAnnotation(annotation);}};// eslint-disable-next-line
/**
     * Perform  action in the PDF Viewer
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.importFormFields=function(formFields){if(this.formFieldsModule){this.viewerBase.importFormFields(formFields);}};/**
     * Perform imports form fields action in the PDF Viewer
     * @param  {any} importData - Specifies the imports data for form fields
     * @param  {string} formFieldDataFormat - Specifies the form fields data format for imports data
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.importFormFieldsAsStream=function(importData,formFieldDataFormat){if(this.formFieldsModule){this.viewerBase.createRequestForImportingFormfields(importData,formFieldDataFormat);}};/**
     * Perform export action in the PDF Viewer
     *
     * @param path
     * @returns void
     */PdfViewer.prototype.exportFormFields=function(path){if(this.formFieldsModule){this.viewerBase.exportFormFields(path);}};/**
     * Perform export annotations action in the PDF Viewer
     *
     * @returns Promise<object>
     */PdfViewer.prototype.exportFormFieldsAsObject=function(){var _this=this;if(this.formFieldsModule){return new Promise(function(resolve,reject){_this.viewerBase.exportFormFieldsAsObject().then(function(value){resolve(value);});});}else{return null;}};/**
     * Perform export annotations action in the PDF Viewer
     * @param formFieldDataFormat - Specifies the form fields data format for exports data
     * @private
     * @returns Promise<object>
     */PdfViewer.prototype.exportFormFieldsAsStream=function(formFieldDataFormat){var _this=this;if(this.formFieldsModule){return new Promise(function(resolve,reject){_this.viewerBase.createRequestForExportFormfields(false,null,formFieldDataFormat).then(function(value){resolve(value);});});}else{return null;}};/**
     * reset all form fields data
     *
     * @returns void
     */PdfViewer.prototype.resetFormFields=function(){this.formFieldsModule.resetFormFields();};/**
     * Clears data from the form fields.
     * Parameter - Specifies the form field object.
     *
     * @param formField
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.clearFormFields=function(formField){this.formFieldsModule.clearFormFields(formField);};/**
     * To delete the annotation Collections in the PDF Document.
     *
     * @returns void
     */PdfViewer.prototype.deleteAnnotations=function(){if(this.annotationModule){this.viewerBase.deleteAnnotations();}};/**
     * To retrieve the form fields in the PDF Document.
     *
     * @returns void
     */PdfViewer.prototype.retrieveFormFields=function(){return this.formFieldCollections;};/**
     * To update the form fields in the PDF Document.
     *
     * @param formFields
     * @returns void
     */ // eslint-disable-next-line
PdfViewer.prototype.updateFormFields=function(formFields){this.updateFormFieldsValue(formFields);this.formFieldsModule.updateFormFieldValues(formFields);};/**
     * @param JsonData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAjaxRequestInitiate=function(JsonData){//this.trigger('ajaxRequestInitiate', eventArgs);
};/**
     * @param value
     * @param fieldName
     * @param id
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireButtonFieldClickEvent=function(value,fieldName,id){//this.trigger('buttonFieldClick', eventArgs);
};/**
     * @param name
     * @param field
     * @param cancel
     * @param name
     * @param field
     * @param cancel
     * @param isLeftClick - becomes true on signature panel left click
     * @private
     */PdfViewer.prototype.fireFormFieldClickEvent=function(name,field,cancel,isLeftClick){return __awaiter$1(this,void 0,void 0,function(){var eventArgs,promise;var _this=this;return __generator$1(this,function(_a){eventArgs={name:name,field:field,cancel:cancel};eventArgs.field.type=field.type;if(eventArgs.field.name==='signature'){eventArgs.field.signatureType=[SignatureType.Draw];}promise=this._dotnetInstance.invokeMethodAsync('Trigger','FormFieldClick',eventArgs);promise.then(function(value){if(field.type==='SignatureField'||field.type==='InitialField'){if(field.type==='InitialField')_this.viewerBase.isInitialField=true;else _this.viewerBase.isInitialField=false;var target=document.getElementById(field.id);target=target?target:document.getElementById(field.id+'_content_html_element')?document.getElementById(field.id+'_content_html_element').children[0].children[0]:null;if(!value.cancel&&target&&!target.disabled&&target.classList.contains('e-pdfviewer-signatureformfields')&&(isLeftClick||sf.base.isNullOrUndefined(isLeftClick))){_this.viewerBase.signatureModule.showSignatureDialog(true);}}});return[2/*return*/];});});};/**
     * @param name - Returns the event name.
     * @param field - Returns the double-clicked form field object.
     * @param cancel - If TRUE, property panel of the form field does not open. FALSE by default.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldDoubleClickEvent=function(eventArgs){// this.trigger('formFieldDoubleClick', eventArgs);
return eventArgs;};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field properties change event.
     * @param pageIndex - Get the page number.
     * @param isAlignmentChanged - Specifies whether the text alignment of the form field is changed or not.
     * @param isBackgroundColorChanged - Specifies whether the background color of the form field is changed or not.
     * @param isBorderColorChanged - Specifies whether the border color of the form field is changed or not.
     * @param isBorderWidthChanged - Specifies whether the border width of the form field is changed or not.
     * @param isColorChanged - Specifies whether the font color of the form field is changed or not.
     * @param isFontFamilyChanged - Specifies whether the font family of the form field is changed or not.
     * @param isFontSizeChanged - Specifies whether the font size of the form field is changed or not.
     * @param isFontStyleChanged - Specifies whether the font style of the form field is changed or not.
     * @param isMaxLengthChanged - Specifies whether the max length of the form field is changed or not.
     * @param isPrintChanged - Specifies whether the print option of the form field is changed or not.
     * @param isReadOnlyChanged - Specifies the Read Only of Form field is changed or not.
     * @param isRequiredChanged - Specifies whether the is required option of the form field is changed or not.
     * @param isToolTipChanged - Specifies whether the tool tip property is changed or not.
     * @param isValueChanged - Specifies whether the form field value is changed or not.
     * @param isVisibilityChanged - Specifies whether the form field visibility is changed or not.
     * @param newValue - Specifies the new value of the form field.
     * @param oldValue - Specifies the old value of the form field.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldPropertiesChangeEvent=function(name,field,pageIndex,isValueChanged,isFontFamilyChanged,isFontSizeChanged,isFontStyleChanged,isColorChanged,isBackgroundColorChanged,isBorderColorChanged,isBorderWidthChanged,isAlignmentChanged,isReadOnlyChanged,isVisibilityChanged,isMaxLengthChanged,isRequiredChanged,isPrintChanged,isToolTipChanged,oldValue,newValue){// this.trigger('formFieldPropertiesChange', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field mouse leave event.
     * @param pageIndex - Get the page number.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldMouseLeaveEvent=function(name,field,pageIndex){// this.trigger('formFieldMouseLeave', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field mouse over event.
     * @param pageIndex - Get the page number.
     * @param pageX - Get the mouse over x position with respect to the page container.
     * @param pageY - Get the mouse over y position with respect to the page container.
     * @param X - Specifies the mouse over x position with respect to the viewer container.
     * @param Y - Specifies the mouse over y position with respect to the viewer container.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldMouseoverEvent=function(name,field,pageIndex,pageX,pageY,X,Y){// this.trigger('formFieldMouseover', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field move event.
     * @param pageIndex - Get the page number.
     * @param previousPosition - Get the previous position of the form field in the page.
     * @param currentPosition - Current position of form field in the page.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldMoveEvent=function(name,field,pageIndex,previousPosition,currentPosition){//this.trigger('formFieldMove', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field resize event.
     * @param pageIndex - Get the page number.
     * @param previousPosition - Get the previous position of the form field in the page.
     * @param currentPosition - Current position of form field in the page.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldResizeEvent=function(name,field,pageIndex,previousPosition,currentPosition){//this.trigger('formFieldResize', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field select event.
     * @param pageIndex - Get the page number.
     * @param isProgrammaticSelection - Specifies whether the the form field is selected programmatically or by UI.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldSelectEvent=function(name,field,pageIndex,isProgrammaticSelection){//this.trigger('formFieldSelect', eventArgs);
};/**
     * @param name - Get the name of the event.
     * @param field - Event arguments for the form field unselect event.
     * @param pageIndex - Get the page number.
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormFieldUnselectEvent=function(name,field,pageIndex){//this.trigger('formFieldUnselect', eventArgs);
};/**
     * @param pageData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireDocumentLoad=function(pageData){var eventArgs={name:'documentLoad',documentName:this.fileName,pageData:pageData};this._dotnetInstance.invokeMethodAsync('LoadDocument',null);this.viewerBase.blazorUIAdaptor.loadDocument();this._dotnetInstance.invokeMethodAsync('Trigger','DocumentLoaded',eventArgs);};/**
     * @param fileName
     * @private
     */PdfViewer.prototype.fireDocumentUnload=function(fileName){var eventArgs={name:'documentUnload',documentName:fileName};this._dotnetInstance.invokeMethodAsync('Trigger','DocumentUnloaded',eventArgs);};/**
     * @param isPasswordRequired
     * @param password
     * @param isPasswordRequired
     * @param password
     * @private
     */PdfViewer.prototype.fireDocumentLoadFailed=function(isPasswordRequired,password){// eslint-disable-next-line max-len
var eventArgs={name:'documentLoadFailed',documentName:this.fileName,isPasswordRequired:isPasswordRequired,password:password};this._dotnetInstance.invokeMethodAsync('Trigger','DocumentLoadFailed',eventArgs);};/**
     * @param errorStatusCode
     * @param errorMessage
     * @param action
     * @param retryCount
     * @param errorStatusCode
     * @param errorMessage
     * @param action
     * @param retryCount
     * @param errorStatusCode
     * @param errorMessage
     * @param action
     * @param retryCount
     * @private
     */PdfViewer.prototype.fireAjaxRequestFailed=function(errorStatusCode,errorMessage,action,retryCount){// eslint-disable-next-line max-len
var eventArgs={name:'ajaxRequestFailed',documentName:this.fileName,errorStatusCode:errorStatusCode,errorMessage:errorMessage,action:action};if(retryCount){eventArgs.retryCount=true;}this._dotnetInstance.invokeMethodAsync('Trigger','AjaxRequestFailed',eventArgs);};/**
     * @action
     * @data
     * @private
     */PdfViewer.prototype.fireAjaxRequestSuccess=function(action,data){var eventArgs={name:'ajaxRequestSuccess',documentName:this.fileName,action:action,data:data,cancel:false};if(eventArgs.cancel){return true;}else{return false;}//this.trigger('ajaxRequestSuccess', eventArgs);
};/**
     * @param action
     * @private
     */PdfViewer.prototype.fireValidatedFailed=function(action){// eslint-disable-next-line
var eventArgs={};eventArgs.documentName=this.fileName;eventArgs.formFields=this.formFieldCollections;eventArgs.nonFillableFields=this.viewerBase.nonFillableFields;this._dotnetInstance.invokeMethodAsync('Trigger','ValidateFormFields',eventArgs);};/**
     * @param x
     * @param y
     * @param pageNumber
     * @private
     */PdfViewer.prototype.firePageClick=function(x,y,pageNumber){if(!Number.isNaN(pageNumber)){var eventArgs={name:'pageClick',documentName:this.fileName,x:x,y:y,pageNumber:pageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','PageClick',eventArgs);}};/**
     * @param previousPageNumber
     * @private
     */PdfViewer.prototype.firePageChange=function(previousPageNumber){// eslint-disable-next-line max-len
var eventArgs={name:'pageChange',documentName:this.fileName,currentPageNumber:this.currentPageNumber,previousPageNumber:previousPageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','PageChange',eventArgs);this.viewerBase.blazorUIAdaptor.pageChanged(this.currentPageNumber);};/**
     * @private
     */PdfViewer.prototype.fireZoomChange=function(){// eslint-disable-next-line max-len
var eventArgs={name:'zoomChange',zoomValue:Math.round(this.magnificationModule.zoomFactor*100),previousZoomValue:Math.round(this.magnificationModule.previousZoomFactor*100)};this._dotnetInstance.invokeMethodAsync('Trigger','ZoomChange',eventArgs);};/**
     * @param hyperlink
     * @param hyperlinkElement
     * @private
     */PdfViewer.prototype.fireHyperlinkClick=function(hyperlink,hyperlinkElement){return __awaiter$1(this,void 0,void 0,function(){var eventArgs;return __generator$1(this,function(_a){switch(_a.label){case 0:eventArgs={name:'hyperlinkClick',hyperlink:hyperlink,hyperlinkElement:hyperlinkElement,cancel:false};return[4/*yield*/,this._dotnetInstance.invokeMethodAsync('Trigger','HyperlinkClick',eventArgs)];case 1:eventArgs=_a.sent();if(eventArgs.hyperlinkElement.href!=eventArgs.hyperlink){hyperlinkElement.href=eventArgs.hyperlink;}if(eventArgs.cancel){return[2/*return*/,false];}else{return[2/*return*/,true];}return[2/*return*/];}});});};/**
     * @param hyperlinkElement
     * @private
     */PdfViewer.prototype.fireHyperlinkHover=function(hyperlinkElement){// eslint-disable-next-line max-len
var eventArgs={name:'hyperlinkMouseOver',hyperlinkElement:hyperlinkElement};this._dotnetInstance.invokeMethodAsync('Trigger','HyperlinkMouseOver',eventArgs);};/**
     * @param fieldName
     * @param value
     * @param fieldName
     * @param value
     * @private
     */PdfViewer.prototype.fireFocusOutFormField=function(fieldName,value){// eslint-disable-next-line max-len
// eslint-disable-next-line
//this.trigger('formFieldFocusOut', eventArgs);
};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationAdd=function(pageNumber,index,type,bounds,settings,textMarkupContent,tmStartIndex,tmEndIndex,labelSettings,multiPageCollection,customStampName){bounds.x=bounds.left;bounds.y=bounds.top;var eventArgs={name:'annotationAdd',pageIndex:pageNumber,annotationId:index,annotationType:type,annotationBound:bounds,annotationSettings:settings};if(textMarkupContent){eventArgs.annotationSettings.textMarkupContent=textMarkupContent;eventArgs.annotationSettings.textMarkupStartIndex=tmStartIndex;eventArgs.annotationSettings.textMarkupEndIndex=tmEndIndex;}if(labelSettings){eventArgs.labelSettings=labelSettings;}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}if(type==='Image'){eventArgs.customStampName=customStampName;}this.viewerBase.isAnnotationSelect=false;if(!sf.base.Browser.isDevice&&this.enableDesktopMode){this.viewerBase.blazorUIAdaptor.annotationAdd();}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationAdd',eventArgs);this.viewerBase.fireDocumentEditedEvent("AnnotationAdded");};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param multiPageCollection
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationRemove=function(pageNumber,index,type,bounds,textMarkupContent,tmStartIndex,tmEndIndex,multiPageCollection){// eslint-disable-next-line max-len
var eventArgs={name:'annotationRemove',pageIndex:pageNumber,annotationId:index,annotationType:type,annotationBounds:bounds};if(textMarkupContent){eventArgs.textMarkupContent=textMarkupContent;eventArgs.textMarkupStartIndex=tmStartIndex;eventArgs.textMarkupEndIndex=tmEndIndex;}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationRemove',eventArgs);};/**
     * @param value
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireBeforeAddFreeTextAnnotation=function(value){// eslint-disable-next-line max-len
// eslint-disable-next-line
//this.trigger('beforeAddFreeText', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @param id
     * @param text
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentAdd=function(id,text,annotation){// eslint-disable-next-line max-len
// eslint-disable-next-line
//this.trigger('commentAdd', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @param id
     * @param text
     * @param annotation
     * @param id
     * @param text
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentEdit=function(id,text,annotation){// eslint-disable-next-line max-len
// eslint-disable-next-line
// this.trigger('commentEdit', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @param id
     * @param text
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentDelete=function(id,text,annotation){// eslint-disable-next-line max-len
// eslint-disable-next-line
// this.trigger('commentDelete', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentSelect=function(id,text,annotation){// eslint-disable-next-line max-len
// eslint-disable-next-line
// this.trigger('commentSelect', eventArgs);
};/**
     * @param id
     * @param text
     * @param annotation
     * @param statusChange
     * @param id
     * @param text
     * @param annotation
     * @param statusChange
     * @param id
     * @param text
     * @param annotation
     * @param statusChange
     * @param id
     * @param text
     * @param annotation
     * @param statusChange
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireCommentStatusChanged=function(id,text,annotation,statusChange){// eslint-disable-next-line max-len
// eslint-disable-next-line
// this.trigger('commentStatusChanged', eventArgs);
};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param isColorChanged
     * @param isOpacityChanged
     * @param isTextChanged
     * @param isCommentsChanged
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param isColorChanged
     * @param isOpacityChanged
     * @param isTextChanged
     * @param isCommentsChanged
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param multiPageCollection
     * @private
     */ // eslint-disable-next-line max-len
// eslint-disable-next-line
PdfViewer.prototype.fireAnnotationPropertiesChange=function(pageNumber,index,type,isColorChanged,isOpacityChanged,isTextChanged,isCommentsChanged,textMarkupContent,tmStartIndex,tmEndIndex,multiPageCollection){// eslint-disable-next-line max-len
var eventArgs={name:'annotationPropertiesChange',pageIndex:pageNumber,annotationId:index,annotationType:type,isColorChanged:isColorChanged,isOpacityChanged:isOpacityChanged,isTextChanged:isTextChanged,isCommentsChanged:isCommentsChanged};if(textMarkupContent){eventArgs.textMarkupContent=textMarkupContent;eventArgs.textMarkupStartIndex=tmStartIndex;eventArgs.textMarkupEndIndex=tmEndIndex;}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationPropertiesChange',eventArgs);};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param data
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param data
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param data
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureAdd=function(pageNumber,index,type,bounds,opacity,strokeColor,thickness,data){var eventArgs={pageIndex:pageNumber,id:index,type:type,bounds:bounds,opacity:opacity};if(thickness){eventArgs.thickness=thickness;}if(strokeColor){eventArgs.strokeColor=strokeColor;}if(data){eventArgs.data=data;}this._dotnetInstance.invokeMethodAsync('Trigger','AddSignature',eventArgs);};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureRemove=function(pageNumber,index,type,bounds){var eventArgs={pageIndex:pageNumber,id:index,type:type,bounds:bounds};this._dotnetInstance.invokeMethodAsync('Trigger','RemoveSignature',eventArgs);};/**
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param previousPosition
     * @param currentPosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureMove=function(pageNumber,id,type,opacity,strokeColor,thickness,previousPosition,currentPosition){var eventArgs={pageIndex:pageNumber,id:id,type:type,opacity:opacity,strokeColor:strokeColor,thickness:thickness,previousPosition:previousPosition,currentPosition:currentPosition};this._dotnetInstance.invokeMethodAsync('Trigger','MoveSignature',eventArgs);};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param isStrokeColorChanged
     * @param isOpacityChanged
     * @param isThicknessChanged
     * @param oldProp
     * @param newProp
     * @param pageNumber
     * @param index
     * @param type
     * @param isStrokeColorChanged
     * @param isOpacityChanged
     * @param isThicknessChanged
     * @param oldProp
     * @param newProp
     * @param pageNumber
     * @param index
     * @param type
     * @param isStrokeColorChanged
     * @param isOpacityChanged
     * @param isThicknessChanged
     * @param oldProp
     * @param newProp
     * @param pageNumber
     * @param index
     * @param type
     * @param isStrokeColorChanged
     * @param isOpacityChanged
     * @param isThicknessChanged
     * @param oldProp
     * @param newProp
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignaturePropertiesChange=function(pageNumber,index,type,isStrokeColorChanged,isOpacityChanged,isThicknessChanged,oldProp,newProp){var eventArgs={pageIndex:pageNumber,id:index,type:type,isStrokeColorChanged:isStrokeColorChanged,isOpacityChanged:isOpacityChanged,isThicknessChanged:isThicknessChanged,oldValue:oldProp,newValue:newProp};this._dotnetInstance.invokeMethodAsync('Trigger','SignaturePropertiesChange',eventArgs);this.viewerBase.fireDocumentEditedEvent("AnnotationUpdated");};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param currentPosition
     * @param previousPosition
     * @param pageNumber
     * @param index
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param currentPosition
     * @param previousPosition
     * @param pageNumber
     * @param index
     * @param type
     * @param opacity
     * @param strokeColor
     * @param thickness
     * @param currentPosition
     * @param previousPosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureResize=function(pageNumber,index,type,opacity,strokeColor,thickness,currentPosition,previousPosition){var eventArgs={pageIndex:pageNumber,id:index,type:type,opacity:opacity,strokeColor:strokeColor,thickness:thickness,currentPosition:currentPosition,previousPosition:previousPosition};this._dotnetInstance.invokeMethodAsync('Trigger','ResizeSignature',eventArgs);};/**
     * @param id
     * @param pageNumber
     * @param signature
     * @param id
     * @param pageNumber
     * @param signature
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureSelect=function(id,pageNumber,signature){var eventArgs={id:id,pageIndex:pageNumber,signature:signature};this._dotnetInstance.invokeMethodAsync('Trigger','SignatureSelect',eventArgs);};/**
     * @param id
     * @param pageNumber
     * @param signature
     * @param id
     * @param pageNumber
     * @param signature
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireSignatureUnselect=function(id,pageNumber,signature){var eventArgs={id:id,pageIndex:pageNumber,signature:signature};this._dotnetInstance.invokeMethodAsync('Trigger','SignatureUnselected',eventArgs);};/**
     * @param id
     * @param pageNumber
     * @param annotation
     * @param annotationCollection
     * @param multiPageCollection
     * @param isSelected
     * @param annotationAddMode
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationSelect=function(id,pageNumber,annotation,annotationCollection,multiPageCollection,isSelected,annotationAddMode){// eslint-disable-next-line max-len
var eventArgs={name:'annotationSelect',annotationId:id,pageIndex:pageNumber,annotation:annotation};if(annotationCollection){// eslint-disable-next-line max-len
eventArgs={name:'annotationSelect',annotationId:id,pageIndex:pageNumber,annotation:annotation,annotationCollection:annotationCollection};}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}if(isSelected){eventArgs.isProgrammaticSelection=isSelected;}if(annotationAddMode){eventArgs.annotationAddMode=annotationAddMode;}if(annotation){if(annotation.type==='FreeText'){// eslint-disable-next-line
var fontStyle={isBold:false,isItalic:false,isStrikeout:false,isUnderline:false};if(annotation.fontStyle===1){fontStyle.isBold=true;}else if(annotation.fontStyle===2){fontStyle.isItalic=true;}else if(annotation.fontStyle===3){fontStyle.isStrikeout=true;}else if(annotation.fontStyle===4){fontStyle.isUnderline=true;}annotation.fontStyle=fontStyle;}var annotationType=void 0;if(annotation.type=='Shape'||annotation.type=='Measure'||annotation.type=='TextMarkup'){annotationType=annotation.subType;}else{annotationType=annotation.type;}if(sf.base.Browser.isDevice&&!this.enableDesktopMode){if(annotation.type=='FreeText'){this.viewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.selectedItems.annotations[0].fontFamily);this.viewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.selectedItems.annotations[0].fontSize);}if(annotationCollection||this.commentPanelVisible){this._dotnetInstance.invokeMethodAsync('MobileAnnotationPropertyUpdate',annotationType);}}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationSelect',eventArgs);var filteredAnnotation=this.annotationCollection.filter(function(annotation){return annotation.annotationId===eventArgs.annotationId;});if(filteredAnnotation.length>0&&!filteredAnnotation[0].annotationSettings.isLock){this.viewerBase.blazorUIAdaptor.annotationSelect(annotation.type);}}};/**
     * @param id
     * @param pageNumber
     * @param annotation
     * @param id
     * @param pageNumber
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationUnSelect=function(id,pageNumber,annotation){var eventArgs={name:'annotationUnSelect',annotationId:id,pageIndex:pageNumber,annotation:annotation};for(var i=0;i<this.annotationCollection.length;i++){if(this.annotationCollection[i].annotationId==annotation.annotName){eventArgs.annotation=this.annotationCollection[i];}}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationUnSelect',eventArgs);if(!sf.base.Browser.isDevice&&this.enableDesktopMode){this.viewerBase.blazorUIAdaptor.annotationUnSelect();}};/**
     * @param id
     * @param pageNumber
     * @param annotation
     * @param id
     * @param pageNumber
     * @param annotation
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationDoubleClick=function(id,pageNumber,annotation){// eslint-disable-next-line max-len
var eventArgs={name:'annotationDblClick',annotationId:id,pageIndex:pageNumber,annotation:annotation};this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationDoubleClick',eventArgs);};/**
     * @param pageNumber
     * @private
     */PdfViewer.prototype.fireTextSelectionStart=function(pageNumber){this.isTextSelectionStarted=true;var eventArgs={name:'textSelectionStart',pageIndex:pageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','TextSelectionStart',eventArgs);};/**
     * @param pageNumber
     * @param text
     * @param bound
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextSelectionEnd=function(pageNumber,text,bound){if(this.isTextSelectionStarted){var eventArgs={name:'textSelectionEnd',pageIndex:pageNumber,textContent:text,textBounds:bound};this._dotnetInstance.invokeMethodAsync('Trigger','TextSelectionEnd',eventArgs);this.isTextSelectionStarted=false;}};/**
     * @param canvas
     * @param index
     * @private
     */PdfViewer.prototype.renderDrawing=function(canvas,index){if(sf.base.isNullOrUndefined(index)&&this.viewerBase.activeElements.activePageID&&!this.viewerBase.isPrint){index=this.viewerBase.activeElements.activePageID;}if(this.annotation){this.annotation.renderAnnotations(index,null,null,null,canvas);}};/**
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @param pageNumber
     * @param index
     * @param type
     * @param bounds
     * @param settings
     * @param textMarkupContent
     * @param tmStartIndex
     * @param tmEndIndex
     * @param labelSettings
     * @param multiPageCollection
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationResize=function(pageNumber,index,type,bounds,settings,textMarkupContent,tmStartIndex,tmEndIndex,labelSettings,multiPageCollection){var eventArgs={name:'annotationResize',pageIndex:pageNumber,annotationId:index,annotationType:type,annotationBound:bounds,annotationSettings:settings};if(textMarkupContent){eventArgs.textMarkupContent=textMarkupContent;eventArgs.textMarkupStartIndex=tmStartIndex;eventArgs.textMarkupEndIndex=tmEndIndex;}if(labelSettings){eventArgs.labelSettings=labelSettings;}if(multiPageCollection){eventArgs.multiplePageCollection=multiPageCollection;}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationResize',eventArgs);};/**
     * @param pageNumber
     * @param id
     * @param type
     * @param annotationSettings
     * @param previousPosition
     * @param currentPosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationMoving=function(pageNumber,id,type,annotationSettings,previousPosition,currentPosition){//this.trigger('annotationMoving', eventArgs);
};/**
     * @param pageNumber
     * @param id
     * @param type
     * @param annotationSettings
     * @param previousPosition
     * @param currentPosition
     * @param pageNumber
     * @param id
     * @param type
     * @param annotationSettings
     * @param previousPosition
     * @param currentPosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationMove=function(pageNumber,id,type,annotationSettings,previousPosition,currentPosition){var eventArgs={name:'annotationMove',pageIndex:pageNumber,annotationId:id,annotationType:type,annotationSettings:annotationSettings,previousPosition:previousPosition,currentPosition:currentPosition};this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationMove',eventArgs);};/**
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @param id
     * @param pageNumber
     * @param annotationType
     * @param bounds
     * @param annotation
     * @param currentPosition
     * @param mousePosition
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationMouseover=function(id,pageNumber,annotationType,bounds,annotation,currentPosition,mousePosition){var eventArgs={name:'annotationMouseover',annotationId:id,pageIndex:pageNumber,annotationType:annotationType,annotationBounds:bounds,annotation:annotation,pageX:currentPosition.left,pageY:currentPosition.top,X:mousePosition.left,Y:mousePosition.top};if(annotation.subject==='Perimeter calculation'){eventArgs.annotationType='Perimeter';}else if(annotation.subject==='Area calculation'){eventArgs.annotationType='Area';}else if(annotation.subject==='Volume calculation'){eventArgs.annotationType='Volume';}else if(annotation.subject==='Arrow'){eventArgs.annotationType='Arrow';}else if(annotation.subject==='Circle'){eventArgs.annotationType='Circle';}this._dotnetInstance.invokeMethodAsync('Trigger','AnnotationMouseOver',eventArgs);};/**
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireAnnotationMouseLeave=function(pageNumber){//this.trigger('annotationMouseLeave', eventArgs);
};/**
     * @param pageX
     * @param pageY
     * @private
     */PdfViewer.prototype.firePageMouseover=function(pageX,pageY){var eventArgs={pageX:pageX,pageY:pageY};this._dotnetInstance.invokeMethodAsync('Trigger','PageMouseOver',eventArgs);};/**
     * @param fileName
     * @private
     */PdfViewer.prototype.fireDownloadStart=function(fileName){var eventArgs={fileName:fileName};this._dotnetInstance.invokeMethodAsync('Trigger','DownloadStart',eventArgs);};/**
     * @param fileName
     * @param downloadData
     * @private
     */PdfViewer.prototype.fireDownloadEnd=function(fileName,downloadData){var eventArgs={fileName:fileName,downloadDocument:downloadData};this._dotnetInstance.invokeMethodAsync('Trigger','DownloadEnd',eventArgs);};/**
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.firePrintStart=function(){return __awaiter$1(this,void 0,void 0,function(){var eventArgs,promise;var _this=this;return __generator$1(this,function(_a){eventArgs={fileName:this.downloadFileName,cancel:false};promise=this._dotnetInstance.invokeMethodAsync('Trigger','PrintStart',eventArgs);promise.then(function(value){if(!value.cancel){_this.printModule.print();}});return[2/*return*/];});});};/**
     * @param eventName
     * @param args
     * @param eventName
     * @param args
     * @private
     */PdfViewer.prototype.triggerEvent=function(eventName,args){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(_a){/*let eventArgs: void | object = await this.trigger(eventName, args);
                if (isBlazor && typeof eventArgs === 'string') {
                    eventArgs = JSON.parse(eventArgs as string);
                }*/return[2/*return*/,null];});});};/**
     * @param fileName
     * @private
     */PdfViewer.prototype.firePrintEnd=function(fileName){var eventArgs={fileName:fileName};this._dotnetInstance.invokeMethodAsync('Trigger','PrintEnd',eventArgs);};/**
     * @param pageNumber
     * @private
     */PdfViewer.prototype.fireThumbnailClick=function(pageNumber){var eventArgs={name:'thumbnailClick',pageNumber:pageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','ThumbnailClick',eventArgs);};/**
     * @param pageNumber
     * @param position
     * @param text
     * @param fileName
     * @param pageNumber
     * @param position
     * @param text
     * @param fileName
     * @param pageNumber
     * @param position
     * @param text
     * @param fileName
     * @private
     */PdfViewer.prototype.fireBookmarkClick=function(pageNumber,position,text,fileName){// eslint-disable-next-line
// this._dotnetInstance.invokeMethodAsync('Trigger', 'BookmarkClick', eventArgs);
};/**
     * @param importData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireImportStart=function(importData){var eventArgs={name:'importAnnotationsStart',importData:importData,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ImportAnnotationsStart',eventArgs);};/**
     * @param exportData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireExportStart=function(exportData){var eventArgs={name:'exportAnnotationsStart',exportData:exportData,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ExportAnnotationsStart',eventArgs);};/**
     * @param importData
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireImportSuccess=function(importData){var eventArgs={name:'importAnnotationsSuccess',importData:importData,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ImportAnnotationsSuccess',eventArgs);};/**
     * @param exportData
     * @param fileName
     * @param exportData
     * @param fileName
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireExportSuccess=function(exportData,fileName){var eventArgs={name:'exportAnnotationsSuccess',exportData:exportData,fileName:fileName,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ExportAnnotationsSuccess',eventArgs);};/**
     * @param data
     * @param errorDetails
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireImportFailed=function(data,errorDetails){// eslint-disable-next-line max-len
var eventArgs={name:'importAnnotationsFailed',importData:data,errorDetails:errorDetails,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ImportAnnotationsFailed',eventArgs);};/**
     * @param data
     * @param errorDetails
     * @param data
     * @param errorDetails
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireExportFailed=function(data,errorDetails){// eslint-disable-next-line max-len
var eventArgs={name:'exportAnnotationsFailed',exportData:data,errorDetails:errorDetails,formFieldData:null};this._dotnetInstance.invokeMethodAsync('Trigger','ExportAnnotationsFailed',eventArgs);};/**
     * @param data
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormImportStarted=function(data){// this.trigger('importStart', eventArgs);
};/**
     * @param data
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormExportStarted=function(data){// this.trigger('exportStart', eventArgs);
};/**
     * @param data
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormImportSuccess=function(data){// this.trigger('importSuccess', eventArgs);
};/**
     * @param data
     * @param fileName
     * @param data
     * @param fileName
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormExportSuccess=function(data,fileName){// this.trigger('exportSuccess', eventArgs);
};/**
     * @param data
     * @param errorDetails
     * @param data
     * @param errorDetails
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormImportFailed=function(data,errorDetails){// eslint-disable-next-line max-len
// this.trigger('importFailed', eventArgs);
};/**
     * @param data
     * @param errorDetails
     * @param data
     * @param errorDetails
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireFormExportFailed=function(data,errorDetails){// eslint-disable-next-line max-len
// this.trigger('exportFailed', eventArgs);
};/**
     * @param documentCollection
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextExtractionCompleted=function(documentCollection){var eventArgs={documentTextCollection:documentCollection};this._dotnetInstance.invokeMethodAsync('Trigger','ExtractTextCompleted',eventArgs);};/**
     * @param searchText
     * @param isMatchcase
     * @param searchText
     * @param isMatchcase
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextSearchStart=function(searchText,isMatchcase){// eslint-disable-next-line max-len
var eventArgs={name:'textSearchStart',searchText:searchText,matchCase:isMatchcase};this._dotnetInstance.invokeMethodAsync('Trigger','TextSearchStart',eventArgs);};/**
     * @param searchText
     * @param isMatchcase
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextSearchComplete=function(searchText,isMatchcase){// eslint-disable-next-line max-len
var eventArgs={name:'textSearchComplete',searchText:searchText,matchCase:isMatchcase};this._dotnetInstance.invokeMethodAsync('Trigger','TextSearchComplete',eventArgs);};/**
     * @param searchText
     * @param isMatchcase
     * @param bounds
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
PdfViewer.prototype.fireTextSearchHighlight=function(searchText,isMatchcase,bounds,pageNumber){// eslint-disable-next-line max-len
var eventArgs={name:'textSearchHighlight',searchText:searchText,matchCase:isMatchcase,bounds:bounds,pageNumber:pageNumber};this._dotnetInstance.invokeMethodAsync('Trigger','TextSearchHighlight',eventArgs);};/**
     * @param bounds
     * @param commonStyle
     * @param cavas
     * @param index
     * @private
     */PdfViewer.prototype.renderAdornerLayer=function(bounds,commonStyle,cavas,index){renderAdornerLayer(bounds,commonStyle,cavas,index,this);};/**
     * @param index
     * @param currentSelector
     * @param index
     * @param currentSelector
     * @private
     */PdfViewer.prototype.renderSelector=function(index,currentSelector){this.drawing.renderSelector(index,currentSelector);};/**
     * @param objArray
     * @param currentSelector
     * @param multipleSelection
     * @param preventUpdate
     * @param objArray
     * @param currentSelector
     * @param multipleSelection
     * @param preventUpdate
     * @param objArray
     * @param currentSelector
     * @param multipleSelection
     * @param preventUpdate
     * @param objArray
     * @param currentSelector
     * @param multipleSelection
     * @param preventUpdate
     * @private
     */ // eslint-disable-next-line max-len
PdfViewer.prototype.select=function(objArray,currentSelector,multipleSelection,preventUpdate){// let allowServerDataBind: boolean = this.allowServerDataBinding;
this.enableServerDataBinding(false);if(this.annotationModule){var annotationSelect=this.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;// eslint-disable-next-line
var annotation=this.selectedItems.annotations[0];if(annotationSelect){// eslint-disable-next-line
var currentAnnot=this.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(annotationSelect,true);this.fireAnnotationUnSelect(currentAnnot.annotName,currentAnnot.pageNumber,currentAnnot);}if(!multipleSelection){if(this.viewerBase.activeElements&&this.viewerBase.activeElements.activePageID>=0){if(annotation){this.fireAnnotationUnSelect(annotation.annotName,annotation.pageIndex,annotation);}this.clearSelection(this.viewerBase.activeElements.activePageID);}}}this.drawing.select(objArray,currentSelector,multipleSelection,preventUpdate);//  this.enableServerDataBinding(allowServerDataBind, true);
};/**
     * @param pageId
     * @private
     */PdfViewer.prototype.getPageTable=function(pageId){return this.drawing.getPageTable(pageId);};/**
     * @param diffX
     * @param diffY
     * @param pageIndex
     * @param currentSelector
     * @param helper
     * @param diffX
     * @param diffY
     * @param pageIndex
     * @param currentSelector
     * @param helper
     * @param diffX
     * @param diffY
     * @param pageIndex
     * @param currentSelector
     * @param helper
     * @private
     */ // eslint-disable-next-line max-len
PdfViewer.prototype.dragSelectedObjects=function(diffX,diffY,pageIndex,currentSelector,helper){return this.drawing.dragSelectedObjects(diffX,diffY,pageIndex,currentSelector,helper);};/**
     * @param sx
     * @param sy
     * @param pivot
     * @private
     */PdfViewer.prototype.scaleSelectedItems=function(sx,sy,pivot){return this.drawing.scaleSelectedItems(sx,sy,pivot);};/**
     * @param endPoint
     * @param obj
     * @param point
     * @param segment
     * @param target
     * @param targetPortId
     * @param currentSelector
     * @param endPoint
     * @param obj
     * @param point
     * @param segment
     * @param target
     * @param targetPortId
     * @param currentSelector
     * @param endPoint
     * @param obj
     * @param point
     * @param segment
     * @param target
     * @param targetPortId
     * @param currentSelector
     * @param endPoint
     * @param obj
     * @param point
     * @param segment
     * @param target
     * @param targetPortId
     * @param currentSelector
     * @private
     */ // eslint-disable-next-line max-len
PdfViewer.prototype.dragConnectorEnds=function(endPoint,obj,point,segment,target,targetPortId,currentSelector){return this.drawing.dragConnectorEnds(endPoint,obj,point,segment,target,null,currentSelector);};/**
     * @param pageId
     * @private
     */PdfViewer.prototype.clearSelection=function(pageId){// let allowServerDataBind: boolean = this.allowServerDataBinding;
this.enableServerDataBinding(false);var selectormodel=this.selectedItems;var node=selectormodel.annotations.length>0?this.selectedItems.annotations[0]:this.selectedItems.formFields[0];if(selectormodel.annotations.length>0){selectormodel.offsetX=0;selectormodel.offsetY=0;selectormodel.width=0;selectormodel.height=0;selectormodel.rotateAngle=0;selectormodel.annotations=[];selectormodel.wrapper=null;}else if(selectormodel.formFields.length>0){selectormodel.offsetX=0;selectormodel.offsetY=0;selectormodel.width=0;selectormodel.height=0;selectormodel.rotateAngle=0;selectormodel.formFields=[];selectormodel.wrapper=null;}this.drawing.clearSelectorLayer(pageId);this.viewerBase.isAnnotationSelect=false;this.viewerBase.isFormFieldSelect=false;//this.enableServerDataBinding(allowServerDataBind, true);
};/**
     * @param obj
     * @private
     */PdfViewer.prototype.add=function(obj){return this.drawing.add(obj);};/**
     * @param obj
     * @private
     */PdfViewer.prototype.remove=function(obj){return this.drawing.remove(obj);};/**
     * @private
     */PdfViewer.prototype.copy=function(){if(this.annotation)this.annotation.isShapeCopied=true;return this.drawing.copy();};/**
     * @param angle
     * @param currentSelector
     * @param angle
     * @param currentSelector
     * @private
     */PdfViewer.prototype.rotate=function(angle,currentSelector){return this.drawing.rotate(this.selectedItems,angle,null,currentSelector);};/**
     * @param obj
     * @private
     */PdfViewer.prototype.paste=function(obj){var index;if(this.viewerBase.activeElements.activePageID){index=this.viewerBase.activeElements.activePageID;}return this.drawing.paste(obj,index||0);};/**
     * @private
     */PdfViewer.prototype.refresh=function(){for(var i=0;i<this.annotations.length;i++){if(this.zIndexTable.length!==undefined){for(var i_1=0;i_1<this.zIndexTable.length;i_1++){var objects=this.zIndexTable[i_1].objects;for(var j=0;j<objects.length;j++){objects.splice(j,1);}delete this.zIndexTable[i_1];}if(this.annotations[i]){delete this.annotations[i];}if(this.selectedItems.annotations&&this.selectedItems.annotations[i]){delete this.selectedItems.annotations[i];}this.zIndexTable=[];this.renderDrawing();}if(this.annotations&&this.annotations.length!==0){this.annotations.length=0;this.selectedItems.annotations.length=0;}}};/**
     * @private
     */PdfViewer.prototype.cut=function(){var index;if(this.viewerBase.activeElements.activePageID){index=this.viewerBase.activeElements.activePageID;}if(this.annotation)this.annotation.isShapeCopied=true;return this.drawing.cut(index||0);};/**
     * @param actualObject
     * @param node
     * @private
     */PdfViewer.prototype.nodePropertyChange=function(actualObject,node){this.drawing.nodePropertyChange(actualObject,node);};/**
     * enableServerDataBinding method \
     *
     * @returns { void }  enableServerDataBinding method .\
     * @param {boolean} enable - provide the node value.
     *
     * @private
     */PdfViewer.prototype.enableServerDataBinding=function(enable,clearBulkChanges){if(clearBulkChanges===void 0){clearBulkChanges=false;}/* this.allowServerDataBinding = enable;
         if (clearBulkChanges) {
             this.bulkChanges = {};
         }*/};/**
     * @param tx
     * @param ty
     * @param pageIndex
     * @param nodeBounds
     * @param isStamp
     * @param isSkip
     * @param tx
     * @param ty
     * @param pageIndex
     * @param nodeBounds
     * @param isStamp
     * @param isSkip
     * @param tx
     * @param ty
     * @param pageIndex
     * @param nodeBounds
     * @param isStamp
     * @param isSkip
     * @private
     */ // eslint-disable-next-line max-len
PdfViewer.prototype.checkBoundaryConstraints=function(tx,ty,pageIndex,nodeBounds,isStamp,isSkip){return this.drawing.checkBoundaryConstraints(tx,ty,pageIndex,nodeBounds,isStamp,isSkip);};__decorate([sf.base.Event()],PdfViewer.prototype,"created",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"documentLoad",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"documentUnload",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"documentLoadFailed",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"ajaxRequestFailed",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"ajaxRequestSuccess",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"validateFormFields",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"pageClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"pageChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"hyperlinkClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"hyperlinkMouseOver",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"zoomChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationAdd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationRemove",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationPropertiesChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationResize",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"addSignature",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"removeSignature",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"moveSignature",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"signaturePropertiesChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"resizeSignature",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"signatureSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationUnSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationDoubleClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationMove",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationMoving",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationMouseover",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"annotationMouseLeave",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"pageMouseover",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"importStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"exportStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"importSuccess",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"exportSuccess",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"importFailed",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"exportFailed",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"extractTextCompleted",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"thumbnailClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"bookmarkClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSelectionStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSelectionEnd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"downloadStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"buttonFieldClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldClick",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"downloadEnd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"printStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"printEnd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSearchStart",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSearchComplete",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"textSearchHighlight",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"ajaxRequestInitiate",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentAdd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentEdit",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentDelete",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"commentStatusChanged",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"beforeAddFreeText",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldFocusOut",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldAdd",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldRemove",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldPropertiesChange",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldMouseLeave",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldMouseover",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldMove",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldResize",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldSelect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldUnselect",void 0);__decorate([sf.base.Event()],PdfViewer.prototype,"formFieldDoubleClick",void 0);return PdfViewer;}();var __extends$1=undefined&&undefined.__extends||function(){var _extendStatics2=function extendStatics(d,b){_extendStatics2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return _extendStatics2(d,b);};return function(d,b){_extendStatics2(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();/**
 * The `PdfBounds` is base for annotation bounds.
 *
 * @hidden
 */var PdfBounds=/** @class */function(_super){__extends$1(PdfBounds,_super);function PdfBounds(){var _this=_super!==null&&_super.apply(this,arguments)||this;/**
         * Represents the the x value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.x=0;/**
         * Represents the the y value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.y=0;/**
         * Represents the the width value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.width=0;/**
         * Represents the the height value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.height=0;/**
         * Represents the the left value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.left=0;/**
         * Represents the the top value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.top=0;/**
         * Represents the the right value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.right=0;/**
         * Represents the the bottom value of the annotation.
         *
         * @default 0
         */ // @Property(0)
_this.bottom=0;/**
         * Sets the reference point, that will act as the offset values(offsetX, offsetY) of a node
         *
         * @default new Point(0,0)
         */ // @Complex<PointModel>({ x: 0, y: 0 }, Point)
_this.location={x:0,y:0};/**
         * Sets the size of the annotation
         *
         * @default new Size(0, 0)
         */ // @Complex<Size>(new Size(0, 0), Size)
_this.size=new sf.drawings.Size(0,0);return _this;}return PdfBounds;}(sf.base.ChildProperty);/**
 * The `PdfFont` is base for annotation Text styles.
 *
 * @hidden
 */var PdfFont=/** @class */function(){function PdfFont(){/**
         * Represents the the font Bold style of annotation text content.
         *
         * @default 'false'
         */ // @Property(false)
this.isBold=false;/**
         * Represents the the font Italic style of annotation text content.
         *
         * @default 'false'
         */ // @Property(false)
this.isItalic=false;/**
         * Represents the the font Underline style of annotation text content.
         *
         * @default 'false'
         */ // @Property(false)
this.isUnderline=false;/**
         * Represents the the font Strikeout style of annotation text content.
         *
         * @default 'false'
         */ // @Property(false)
this.isStrikeout=false;}return PdfFont;}();/**
 * The `PdfAnnotationSelector` is base for annotation selector settings.
 *
 * @hidden
 */var PdfAnnotationSelector=/** @class */function(){function PdfAnnotationSelector(){/**
         * Specifies the selection border color.
         *
         * @default ''
         */this.selectionBorderColor='';/**
         * Specifies the border color of the resizer.
         *
         * @default 'black'
         */this.resizerBorderColor='black';/**
         * Specifies the fill color of the resizer.
         *
         * @default '#FF4081'
         */this.resizerFillColor='#FF4081';/**
         * Specifies the size of the resizer.
         *
         * @default 8
         */this.resizerSize=8;/**
         * Specifies the thickness of the border of selection.
         *
         * @default 1
         */this.selectionBorderThickness=1;/**
         * Specifies the shape of the resizer.
         *
         * @default "Square"
         */this.resizerShape="Square";/**
         * Specifies the border dash array of the selection.
         *
         * @default []
         */this.selectorLineDashArray=[];/**
         * specifies the cursor type of resizer
         *
         * @default null
         */this.resizerCursorType=null;}return PdfAnnotationSelector;}();/**
 * Defines the common behavior of PdfAnnotationBase
 *
 * @hidden
 */var PdfAnnotationBase=/** @class */function(){function PdfAnnotationBase(){/**
         * Represents the unique id of annotation
         *
         * @default ''
         */ // @Property('')
this.id='';/**
         * Represents the annotation type of the pdf
         *
         * @default 'Rectangle'
         */ // @Property('Rectangle')
this.shapeAnnotationType='Rectangle';/**
         * Represents the annotation type of the pdf
         *
         * @default 'Rectangle'
         */ // @Property('Rectangle')
this.type='Rectangle';/**
         * Represents the annotation type of the form field
         *
         * @default ''
         */ // @Property(null)
this.formFieldAnnotationType=null;/**
         * Represents the measure type of the annotation
         *
         * @default ''
         */ // @Property('')
this.measureType='';/**
         * Represents the auther value of the annotation
         *
         * @default ''
         */ // @Property('')
this.author='';/**
         * Represents the modified date of the annotation
         *
         * @default ''
         */ // @Property('')
this.modifiedDate='';/**
         * Represents the subject of the annotation
         *
         * @default ''
         */ // @Property('')
this.subject='';/**
         * Represents the notes of the annotation
         *
         * @default ''
         */ // @Property('')
this.notes='';/**
         * specifies the locked action of the comment
         *
         * @default 'false'
         */ // @Property(false)
this.isCommentLock=false;/**
         * Represents the stroke color of the annotation
         *
         * @default 'black'
         */ // @Property('black')
this.strokeColor='black';/**
         * Represents the fill color of the annotation
         *
         * @default 'tranparent'
         */ // @Property('#ffffff00')
this.fillColor='#ffffff00';/**
         * Represents the fill color of the annotation
         *
         * @default 'tranparent'
         */ // @Property('#ffffff00')
this.stampFillColor='#ffffff00';/**
         * Represents the stroke color of the annotation
         *
         * @default 'black'
         */ // @Property('black')
this.stampStrokeColor='black';/**
         * Represents the path data of the annotation
         *
         * @default ''
         */ // @Property('')
this.data='';/**
         * Represents the opecity value of the annotation
         *
         * @default 1
         */ // @Property(1)
this.opacity=1;/**
         * Represents the thickness value of annotation
         *
         * @default 1
         */ // @Property(1)
this.thickness=1;/**
         * Represents the border style of annotation
         *
         * @default ''
         */ // @Property('')
this.borderStyle='';/**
         * Represents the border dash array of annotation
         *
         * @default ''
         */ // @Property('')
this.borderDashArray='';/**
         * Represents the rotate angle of annotation
         *
         * @default 0
         */ // @Property(0)
this.rotateAngle=0;/**
         * Represents the annotation as cloud shape
         *
         * @default false
         */ // @Property(false)
this.isCloudShape=false;/**
         * Represents the cloud intensity
         *
         * @default 0
         */ // @Property(0)
this.cloudIntensity=0;/**
         * Represents the height of the leader of distance shapes
         *
         * @default 40
         */ // @Property(40)
this.leaderHeight=40;/**
         * Represents the line start shape style
         *
         * @default null
         */ // @Property(null)
this.lineHeadStart=null;/**
         * Represents the line end shape style
         *
         * @default null
         */ // @Property(null)
this.lineHeadEnd=null;/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default []
         */ // @Property([])
this.vertexPoints=[];/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default null
         */ // @Property(null)
this.sourcePoint=null;/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default None
         */ // @Property('None')
this.sourceDecoraterShapes='None';/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default None
         */ // @Property('None')
this.taregetDecoraterShapes='None';/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default null
         */ // @Property(null)
this.targetPoint=null;/**
         * Represents vertex points in the line annotation or shape annotation.
         *
         * @default []
         */ // @Property([])
this.segments=[];/**
         * Represents bounds of the annotation
         *
         * @default new Point(0,0)
         */ // @Complex<PdfBoundsModel>({ x: 0, y: 0 }, PdfBounds)
this.bounds={x:0,y:0};/**
         * Represents the cloud intensity
         *
         * @default 0
         */ // @Property(0)
this.pageIndex=0;/**
         * Represents the cloud intensity
         *
         * @default -1
         */ // @Property(-1)
this.zIndex=-1;/**
         * Represents the cloud intensity
         *
         * @default null
         */ // @Property(null)
this.wrapper=null;/**
         * Represents the dynamic stamp
         *
         * @default false
         */ // @Property(false)
this.isDynamicStamp=false;/**
         * Represents the dynamic text.
         *
         * @default ''
         */ // @Property('')
this.dynamicText='';/**
         * Represents the unique annotName of the annotation
         *
         * @default ''
         */ // @Property('')
this.annotName='';/**
         * Represents the comments collection of the annotation
         *
         * @default []
         */ // @Property([])
this.comments=[];/**
         * Represents the comments collection of the annotation
         *
         * @default '#000'
         */ // @Property('#000')
this.fontColor='#000';/**
         * Represents the font size of the annotation content
         *
         * @default '16'
         */ // @Property(16)
this.fontSize=16;/**
         * Represents the font family of the annotation content
         *
         * @default 'Helvetica'
         */ // @Property('Helvetica')
this.fontFamily='Helvetica';/**
         * Represents the font style of the annotation content
         *
         * @default 'None'
         */ // @Property('None')
this.fontStyle='None';/**
         * Represents the shape annotation label add flag
         *
         * @default 'false'
         */ // @Property(false)
this.enableShapeLabel=false;/**
         * Represents the shape annotation label content
         *
         * @default 'label'
         */ // @Property('label')
this.labelContent='label';/**
         * Represents the shape annotation label content fill color
         *
         * @default '#ffffff00'
         */ // @Property('#ffffff00')
this.labelFillColor='#ffffff00';/**
         * Represents the shape annotation label content max-length
         *
         * @default '15'
         */ // @Property(15)
this.labelMaxLength=15;/**
         * Represents the opecity value of the annotation
         *
         * @default 1
         */ // @Property(1)
this.labelOpacity=1;/**
         * Represents the selection settings of the annotation
         *
         * @default ''
         */ // @Property('')
this.annotationSelectorSettings=new PdfAnnotationSelector();/**
         * Represents the shape annotation label content border color
         *
         * @default '#ffffff00'
         */ // @Property('#ffffff00')
this.labelBorderColor='#ffffff00';/**
         * Represents the text anlignment style of annotation
         *
         * @default 'left'
         */ // @Property('left')
this.textAlign='left';/**
         * Represents the unique Name of the annotation
         *
         * @default ''
         */ // @Property('')
this.signatureName='';/**
         * specifies the minHeight of the annotation.
         *
         * @default 0
         */ // @Property(0)
this.minHeight=0;/**
         * specifies the minWidth of the annotation.
         *
         * @default 0
         */ // @Property(0)
this.minWidth=0;/**
         * specifies the minHeight of the annotation.
         *
         * @default 0
         */ // @Property(0)
this.maxHeight=0;/**
         * specifies the maxWidth of the annotation.
         *
         * @default 0
         */ // @Property(0)
this.maxWidth=0;/**
         * specifies the locked action of the annotation.
         *
         * @default 'false'
         */ // @Property(false)
this.isLock=false;/**
         * specifies the particular annotation mode.
         *
         * @default 'UI Drawn Annotation'
         */ // @Property('UI Drawn Annotation')
this.annotationAddMode='UI Drawn Annotation';/**
         * specifies the previous font size  of the annotation.
         *
         * @default '16'
         */ // @Property(16)
this.previousFontSize=16;/**
         * Represents the text style of annotation
         *
         * @default ''
         */ // @Complex<PdfFontModel>({ isBold: false, isItalic: false, isStrikeout: false, isUnderline: false }, PdfFont)
this.font=new PdfFont();/**
         * Represents the shape annotation label content bounds
         *
         * @default ''
         */ // @Complex<PdfBoundsModel>({ x: 0, y: 0 }, PdfBounds)
this.labelBounds={x:0,y:0};/**
         * specifies the custom data of the annotation.
         */ // @Property(16)(null)
this.customData=null;/**
         * specifies whether the annotations are included or not in print actions.
         */ // @Property(16)(true)
this.isPrint=true;/**
         * Allows to edit the free text annotation
         */ // @Property(16)(false)
this.isReadonly=false;}return PdfAnnotationBase;}();/**
 * Defines the common behavior of PdfFormFieldBase
 *
 * @hidden
 */var PdfFormFieldBase=/** @class */function(){// eslint-disable-next-line @typescript-eslint/no-explicit-any
function PdfFormFieldBase(parent,propName,defaultValue,isArray){/**
         * Represents the unique id of formField
         *
         * @default ''
         */ // @Property(16)('')
this.id='';/**
         * specifies the type of the signature.
         */ // @Property(16)('')
this.signatureType='';/**
         * Represents the name of the formField
         *
         * @default ''
         */ // @Property(16)('')
this.name='';/**
         * Represents the value of the formField
         *
         * @default ''
         */ // @Property(16)('')
this.value='';/**
         * Represents the annotation type of the form field
         *
         * @default ''
         */ // @Property(16)(null)
this.formFieldAnnotationType=null;/**
         * Represents the fill color of the form field
         *
         * @default '#daeaf7ff'
         */ // @Property(16)('#daeaf7ff')
this.backgroundColor='#daeaf7ff';/**
         * Represents the text color of the form field
         *
         * @default 'black'
         */ // @Property(16)('black')
this.color='black';/**
         * Represents the border color of the form field
         *
         * @default '#303030'
         */ // @Property(16)('#303030')
this.borderColor='#303030';/**
         * Represents the tooltip of the form field
         *
         * @default ''
         */ // @Property(16)('')
this.tooltip='';/**
         * Represents the opecity value of the formField
         *
         * @default 1
         */ // @Property(16)(1)
this.opacity=1;/**
         * Represents the thickness value of FormField
         *
         * @default 1
         */ // @Property(16)(1)
this.thickness=1;/**
         * Represents the rotate angle of formField
         *
         * @default 0
         */ // @Property(16)(0)
this.rotateAngle=0;/**
         * Represents bounds of the formField
         *
         * @default new Point(0,0)
         */ // @Complex<PdfBoundsModel>({ x: 0, y: 0 }, PdfBounds)
this.bounds={x:0,y:0};/**
         * Represents the cloud intensity
         *
         * @default 0
         */ // @Property(16)(0)
this.pageIndex=0;/**
         * Represents the page number
         *
         * @default 1
         */ // @Property(16)(1)
this.pageNumber=1;/**
         * Represents the cloud intensity
         *
         * @default -1
         */ // @Property(16)(-1)
this.zIndex=-1;/**
         * Represents the cloud intensity
         *
         * @default null
         */ // @Property(16)(null)
this.wrapper=null;/**
         * Represents the font size of the formField content
         *
         * @default 16
         */ // @Property(16)(16)
this.fontSize=16;/**
         * Represents the font family of the formField content
         *
         * @default 'Helvetica'
         */ // @Property(16)('Helvetica')
this.fontFamily='Helvetica';/**
         * Represents the font style of the formField content
         *
         * @default 'None'
         */ // @Property(16)('None')
this.fontStyle='None';/**
         * Represents the text anlignment style of formField
         *
         * @default 'left'
         */ // @Property('left')
this.alignment='left';/**
         * specifies the minHeight of the formField.
         *
         * @default 0
         */ // @Property(0)
this.minHeight=0;/**
         * specifies the minWidth of the formField.
         *
         * @default 0
         */ // @Property(0)
this.minWidth=0;/**
         * specifies the minHeight of the formField.
         *
         * @default 0
         */ // @Property(0)
this.maxHeight=0;/**
         * specifies the maxWidth of the formField.
         *
         * @default 0
         */ // @Property(0)
this.maxWidth=0;/**
         * specifies the maxLength of the textbox/password.
         *
         * @default 0
         */ // @Property(0)
this.maxLength=0;/**
         * If it is set as Hidden, Html element will be hide in the UI. By default it is visible.
         */ // @Property('visible')
this.visibility='visible';/**
         * specifies whether the form field are included or not in print actions.
         */ // @Property(true)
this.isPrint=true;/**
         * Allows to edit the form Field text.
         */ // @Property(false)
this.isReadonly=false;/**
         * Enable or disable the checkbox state.
         */ // @Property(false)
this.isChecked=false;/**
         * Enable or disable the RadioButton state.
         */ // @Property(false)
this.isSelected=false;/**
         * Specify whether an form field element is mandatory.
         */ // @Property(false)
this.isRequired=false;/**
         * Enable or disable the Multiline Textbox.
         */ //@Property(false)
this.isMultiline=false;/**
         * Represents the text style of annotation
         *
         * @default ''
         */ // @Complex<PdfFontModel>({ isBold: false, isItalic: false, isStrikeout: false, isUnderline: false }, PdfFont)
this.font=new PdfFont();// super(parent, propName, defaultValue, isArray);
}return PdfFormFieldBase;}();/**
 * @hidden
 */var ZOrderPageTable=/** @class */function(){function ZOrderPageTable(){this.pageIdTemp=0;this.zIndexTemp=-1;this.childNodesTemp=[];this.objects=[];this.zIndexTemp=-1;this.pageIdTemp=0;}Object.defineProperty(ZOrderPageTable.prototype,"pageId",{/** @private */get:function get(){return this.pageIdTemp;},/** @private */set:function set(offset){this.pageIdTemp=offset;},enumerable:true,configurable:true});Object.defineProperty(ZOrderPageTable.prototype,"zIndex",{/** @private */get:function get(){return this.zIndexTemp;},/** @private */set:function set(offset){this.zIndexTemp=offset;},enumerable:true,configurable:true});Object.defineProperty(ZOrderPageTable.prototype,"objects",{/** @private */get:function get(){return this.childNodesTemp;},/** @private */set:function set(childNodes){this.childNodesTemp=childNodes;},enumerable:true,configurable:true});return ZOrderPageTable;}();/**
 * Defines the size and position of selected items and defines the appearance of selector
 *
 * @hidden
 */var Selector=/** @class */function(){function Selector(){/**
         * Defines the size and position of the container
         *
         * @default null
         */this.wrapper=null;/**
         * Defines the collection of selected nodes
         */ // @Collection<PdfAnnotationBaseModel>([], PdfAnnotationBase)
this.annotations=[];/**
         * Defines the collection of selected form Fields
         */ // @Collection<PdfFormFieldBaseModel>([], PdfFormFieldBase)
this.formFields=[];/**
         * Sets the rotate angle of the container
         *
         * @default 0
         */ //@Property(0)
this.rotateAngle=0;/**
         * Sets the positionX of the container
         *
         * @default 0
         */ //@Property(0)
this.offsetX=0;/**
         * Sets the positionY of the container
         *
         * @default 0
         */ //@Property(0)
this.offsetY=0;/**
         * Sets the pivot of the selector
         *
         * @default { x: 0.5, y: 0.5 }
         */ //@Complex<PointModel>({ x: 0.5, y: 0.5 }, Point)
//public pivot: PointModel;
this.pivot={x:0.5,y:0.5};}/**
     * Initializes the UI of the container
     *
     * @param  {any} diagram - diagram element.
     * @returns {Container} - Returns the container element.
     */ // eslint-disable-next-line
Selector.prototype.init=function(diagram){var container=new sf.drawings.Container();container.measureChildren=false;container.children=[];if(this.formFields&&this.formFields.length>0){for(var i=0;i<this.formFields.length;i++){var node=diagram.pdfViewer.nameTable[this.formFields[i].id];var wrapper=node.wrapper;container.children.push(wrapper);}}else if(this.annotations){for(var i=0;i<this.annotations.length;i++){if(!sf.base.isNullOrUndefined(this.annotations[i])){var node=diagram.pdfViewer.nameTable[this.annotations[i].id];var wrapper=node.wrapper;container.children.push(wrapper);}}}this.wrapper=container;return container;};return Selector;}();/**
 * @param {PdfAnnotationBaseModel} obj - Specified the shape annotation object.
 * @hidden
 * @returns {void}
 */function isLineShapes(obj){if(obj.shapeAnnotationType==='Line'||obj.shapeAnnotationType==='LineWidthArrowHead'||obj.shapeAnnotationType==='Distance'||obj.shapeAnnotationType==='Polygon'){return true;}return false;}/**
 * @param {PdfAnnotationBaseModel | PdfFormFieldBaseModel} obj - Specified the annotation or form fields object.
 * @param {DrawingElement} element - Specified the annotation drawing element.
 * @returns {void}
 * @hidden
 */function setElementStype(obj,element){if(obj&&element){if(obj.formFieldAnnotationType){if(obj.id.indexOf('diagram_helper')!==-1){element.style.fill='transparent';element.style.strokeWidth=1;element.style.strokeDashArray=obj.borderDashArray;}else{element.style.fill='transparent';element.style.strokeWidth=0;}}else{var fillColor=obj.fillColor==='#ffffff00'?'transparent':obj.fillColor;element.style.fill=fillColor?fillColor:'white';// eslint-disable-next-line max-len
element.style.strokeColor=obj.strokeColor?obj.strokeColor:obj.borderColor;// eslint-disable-next-line max-len
element.style.color=obj.strokeColor?obj.strokeColor:obj.borderColor;element.style.strokeWidth=obj.thickness;if(obj.shapeAnnotationType==='Image'||obj.shapeAnnotationType==='SignatureText'||obj.shapeAnnotationType==='SignatureImage'){element.style.strokeWidth=0;}element.style.strokeDashArray=obj.borderDashArray;element.style.opacity=obj.opacity;}}}/**
 * @param {PointModel[]} points - Specified the annotation points value.
 * @hidden
 * @returns {number} - Returns the points length.
 */function findPointsLength(points){var length=0;for(var i=0;i<points.length-1;i++){length+=sf.drawings.Point.findLength(points[i],points[i+1]);}return length;}/**
 * @param {PointModel[]} points - Specified the annotation points value.
 * @hidden
 * @returns {number} - Returns the points length.
 */ /**
 * @private
 * @param {DrawingElement} element - Specified the drawing element.
 * @param {Transforms} transform - Specified the transform value.
 * @returns {BaseAttributes} - Returns the base attributes value.
 */function getBaseShapeAttributes(element,transform){var baseShapeAttributes={width:element.actualSize.width,height:element.actualSize.height,x:element.offsetX-element.actualSize.width*element.pivot.x+0.5,y:element.offsetY-element.actualSize.height*element.pivot.y+0.5,angle:element.rotateAngle+element.parentTransform,fill:element.style.fill,stroke:element.style.strokeColor,pivotX:element.pivot.x,pivotY:element.pivot.y,strokeWidth:1,opacity:element.style.opacity,dashArray:element.style.strokeDashArray||'',visible:element.visible,id:element.id};if(transform){baseShapeAttributes.x+=transform.tx;baseShapeAttributes.y+=transform.ty;}return baseShapeAttributes;}/**
 * Get function
 *
 * @private
 * @param {Function | string} value - Type of the function.
 * @returns {Function} - Returns the function.
 */function getFunction(value){if(value!==undefined){if(typeof value==='string'){value=sf.base.getValue(value,window);}}return value;}/**
 * @private
 * @param {any} obj - Specified the annotation object.
 * @param {Function | string} additionalProp - Specified the annotation additional properties.
 * @param {string} key - Specified the annotation key value.
 * @returns {Object} - Returns the cloned object.
 */ // eslint-disable-next-line
function cloneObject(obj,additionalProp,key){// eslint-disable-next-line
var newObject={};var keys='properties';var prop='propName';if(obj){key=obj[prop];var sourceObject=obj[keys]||obj;var properties=[];properties=properties.concat(Object.keys(sourceObject));var customProperties=[];properties.push('version');if(key){var propAdditional=getFunction(additionalProp);if(propAdditional){customProperties=propAdditional(key);}else{customProperties=[];}properties=properties.concat(customProperties);}var internalProp=getInternalProperties(key);properties=properties.concat(internalProp);for(var _i=0,properties_1=properties;_i<properties_1.length;_i++){var property=properties_1[_i];if(property!=='historyManager'){if(property!=='wrapper'){// eslint-disable-next-line
var isEventEmmitter=obj[property]&&obj.hasOwnProperty('observers')?true:false;if(!isEventEmmitter){if(obj[property]instanceof Array){newObject[property]=cloneArray(internalProp.indexOf(property)===-1&&obj[keys]?obj[keys][property]:obj[property],additionalProp,property);}else if(obj[property]instanceof Array===false&&obj[property]instanceof HTMLElement){newObject[property]=obj[property].cloneNode(true).innerHtml;}else if(obj[property]instanceof Array===false&&obj[property]instanceof Object){newObject[property]=cloneObject(internalProp.indexOf(property)===-1&&obj[keys]?obj[keys][property]:obj[property]);}else{newObject[property]=obj[property];}}}else{if(obj[property]){newObject[property]={actualSize:{width:obj[property].actualSize.width,height:obj[property].actualSize.height},offsetX:obj[property].offsetX,offsetY:obj[property].offsetY};}}}}}return newObject;}/**
 * @private
 * @param {Object[]} sourceArray - Specified the annotation source collections.
 * @param {Function | string} additionalProp - Specified the annotation additional properties.
 * @param {string} key - Specified the annotation key value.
 * @returns {Object[]} - Returns the cloned object array.
 */function cloneArray(sourceArray,additionalProp,key){var clonedArray;if(sourceArray){clonedArray=[];for(var i=0;i<sourceArray.length;i++){if(sourceArray[i]instanceof Array){clonedArray.push(sourceArray[i]);}else if(sourceArray[i]instanceof Object){clonedArray.push(cloneObject(sourceArray[i],additionalProp,key));}else{clonedArray.push(sourceArray[i]);}}}return clonedArray;}/**
 * @private
 * @param {string} propName - Specified the annotation property name.
 * @returns {string[]} - Returns the internal properties.
 */function getInternalProperties(propName){switch(propName){case'nodes':case'children':return['inEdges','outEdges','parentId','processId','nodeId','umlIndex','isPhase','isLane'];case'connectors':return['parentId'];case'annotation':return['nodeId'];case'annotations':return['nodeId'];case'shape':return['hasHeader'];}return[];}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {string} position - Specified the annotation position.
 * @hidden
 * @returns {Leader} - Returns the leader value.
 */function isLeader(obj,position){var rotatedPoint;if(obj.shapeAnnotationType==='Distance'){var leaderCount=0;var newPoint1=void 0;for(var i=0;i<obj.wrapper.children.length;i++){var angle=sf.drawings.Point.findAngle(obj.sourcePoint,obj.targetPoint);// eslint-disable-next-line
var segment=obj.wrapper.children[i];if(segment.id.indexOf('leader')>-1){var center=obj.wrapper.children[0].bounds.center;if(leaderCount===0){newPoint1={x:obj.sourcePoint.x,y:obj.sourcePoint.y-obj.leaderHeight};center=obj.sourcePoint;}else{newPoint1={x:obj.targetPoint.x,y:obj.targetPoint.y-obj.leaderHeight};center=obj.targetPoint;}var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,center.x,center.y);rotatedPoint=sf.drawings.transformPointByMatrix(matrix,{x:newPoint1.x,y:newPoint1.y});if(position==='Leader'+leaderCount){return{leader:'leader'+leaderCount,point:rotatedPoint};}leaderCount++;}}}return{leader:'',point:rotatedPoint};}/**
 * @private
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation points.
 * @returns {PointModel[]} - Returns the annotation points model array.
 */function getConnectorPoints(obj,points){points=obj.vertexPoints;var newPoints=points.slice(0);if(newPoints&&newPoints.length>0){obj.sourcePoint=newPoints[0];obj.targetPoint=newPoints[newPoints.length-1];}return newPoints;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector model.
 * @param {PointModel[]} points - Specified the annotation points.
 * @returns {string} - Returns the annotation path value.
 */function getSegmentPath(connector,points){var path='';var getPt;var pts=[];var j=0;while(j<points.length){pts.push({x:points[j].x,y:points[j].y});j++;}pts=clipDecorators(connector,pts);for(var k=0;k<pts.length;k++){getPt=pts[k];if(k===0){path='M'+getPt.x+' '+getPt.y;}if(k>0){path+=' '+'L'+getPt.x+' '+getPt.y;}}return path;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector model.
 * @param {PointModel[]} points - Specified the annotation points.
 * @param {PathElement} element - Specified the annotation element.
 * @returns {PathElement} - Returns the annotation path element.
 */function updateSegmentElement(connector,points,element){var bounds=new sf.drawings.Rect();var segmentPath=getSegmentPath(connector,points);bounds=sf.drawings.Rect.toBounds(points);element.width=bounds.width;element.height=bounds.height;element.offsetX=bounds.x+element.width/2;element.offsetY=bounds.y+element.height/2;element.data=segmentPath;if(connector.wrapper){connector.wrapper.offsetX=element.offsetX;connector.wrapper.offsetY=element.offsetY;connector.wrapper.width=bounds.width;connector.wrapper.height=bounds.height;}return element;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector model.
 * @param {PathElement} segmentElement - Specified the annotation segment element.
 * @returns {PathElement} - Returns the annotation path element.
 */function getSegmentElement(connector,segmentElement){var points=[];points=getConnectorPoints(connector);segmentElement.staticSize=true;segmentElement=updateSegmentElement(connector,points,segmentElement);setElementStype(connector,segmentElement);return segmentElement;}/**
 * @private
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {DrawingElement} element - Specified the annotation drawing element.
 * @param {PointModel} pt - Specified the annotation point.
 * @param {PointModel} adjacentPoint - Specified the annotation adjacent point.
 * @param {boolean} isSource - Specified the is source value or not.
 * @returns {void}
 */function updateDecoratorElement(obj,element,pt,adjacentPoint,isSource){element.offsetX=pt.x;element.offsetY=pt.y;var angle=sf.drawings.Point.findAngle(pt,adjacentPoint);var thickness=obj.thickness<=5?5:obj.thickness;var getPath=getDecoratorShape(isSource?obj.sourceDecoraterShapes:obj.taregetDecoraterShapes);var size=new sf.drawings.Size(thickness*2,thickness*2);element.transform=sf.drawings.RotateTransform.Self;setElementStype(obj,element);element.style.fill=obj.fillColor!=='tranparent'?obj.fillColor:'white';element.rotateAngle=angle;element.data=getPath;element.canMeasurePath=true;element.width=size.width;element.height=size.height;if(obj.sourceDecoraterShapes==='Butt'){element.width=size.width-10;element.height=size.height+10;}}/**
 * @private
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel} offsetPoint - Specified the annotation offset point.
 * @param {PointModel} adjacentPoint - Specified the annotation adjacent point.
 * @param {boolean} isSource - Specified the is source value or not.
 * @returns {PathElement} - Returns the annotation path element.
 */function getDecoratorElement(obj,offsetPoint,adjacentPoint,isSource){var decEle=new sf.drawings.PathElement();updateDecoratorElement(obj,decEle,offsetPoint,adjacentPoint,isSource);return decEle;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation object.
 * @param {PointModel[]} pts - Specified the annotation point model array.
 * @returns {PointModel[]} - Returns the annotation point model array.
 */function clipDecorators(connector,pts){pts[0]=clipDecorator(connector,pts,true);pts[pts.length-1]=clipDecorator(connector,pts,false);return pts;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector object.
 * @param {PointModel[]} points - Specified the annotation offset point.
 * @param {boolean} isSource - Specified the is source value or not.
 * @returns {PointModel} - Returns the annotation point model.
 */function clipDecorator(connector,points,isSource){var point={x:0,y:0};var start={x:0,y:0};var end={x:0,y:0};var length=points.length;start=!isSource?points[length-1]:points[0];end=!isSource?points[length-2]:points[1];var len=sf.drawings.Point.distancePoints(start,end);len=len===0?1:len;var width=connector.thickness;point.x=Math.round(start.x+width*(end.x-start.x)/len);point.y=Math.round(start.y+width*(end.y-start.y)/len);var strokeWidth=1;point=sf.drawings.Point.adjustPoint(point,end,true,strokeWidth/2);return point;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation point model array.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @param {PdfViewer} pdfviewer - Specified the pdfviewer element.
 * @hidden
 * @returns {TextElement[]} - Returns the text element collections.
 */ // eslint-disable-next-line max-len
function initDistanceLabel(obj,points,measure,pdfviewer){var labels=[];var angle=sf.drawings.Point.findAngle(points[0],points[1]);var textele=textElement(obj,angle);if(!pdfviewer.enableImportAnnotationMeasurement&&obj.notes&&obj.notes!==''){textele.content=obj.notes;}else{textele.content=measure.setConversion(findPointsLength([points[0],points[1]])*measure.pixelToPointFactor,obj);}textele.rotateValue={y:-10,angle:angle};if(obj.enableShapeLabel===true){textele.style.strokeColor=obj.labelBorderColor;textele.style.fill=obj.labelFillColor;textele.style.fontSize=obj.fontSize;textele.style.color=obj.fontColor;textele.style.fontFamily=obj.fontFamily;}labels.push(textele);return labels;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation point model array.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @hidden
 * @returns {string} - Returns the distance value.
 */function updateDistanceLabel(obj,points,measure){var distance;for(var i=0;i<obj.wrapper.children.length;i++){var textElement_1=obj.wrapper.children[i];if(textElement_1&&!sf.base.isNullOrUndefined(textElement_1.content)){distance=measure.setConversion(findPointsLength([points[0],points[1]])*measure.pixelToPointFactor,obj);textElement_1.content=distance;textElement_1.childNodes[0].text=textElement_1.content;textElement_1.refreshTextElement();}}return distance;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @hidden
 * @returns {string} - Returns the radius label value.
 */function updateRadiusLabel(obj,measure){var radius;for(var i=0;i<obj.wrapper.children.length;i++){var textElement_2=obj.wrapper.children[i];if(textElement_2&&!sf.base.isNullOrUndefined(textElement_2.content)){radius=measure.setConversion(obj.bounds.width/2*measure.pixelToPointFactor,obj);textElement_2.content=radius;if(textElement_2.childNodes.length===2){textElement_2.childNodes[0].text=radius;textElement_2.childNodes.splice(textElement_2.childNodes.length-1,1);}else{textElement_2.childNodes[0].text=radius;}textElement_2.refreshTextElement();}}return radius;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation point model array.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @param {PdfViewer} pdfviewer - Specified the pdfviewer element.
 * @hidden
 * @returns {TextElement[]} - Returns the text element collections.
 */ // eslint-disable-next-line max-len
function initPerimeterLabel(obj,points,measure,pdfviewer){var labels=[];var angle=sf.drawings.Point.findAngle(points[0],points[1]);var textele=textElement(obj,angle);if(!pdfviewer.enableImportAnnotationMeasurement&&obj.notes&&obj.notes!==''){textele.content=obj.notes;}else{textele.content=measure.calculatePerimeter(obj);}if(obj.enableShapeLabel===true){textele.style.strokeColor=obj.labelBorderColor;textele.style.fill=obj.labelFillColor;textele.style.fontSize=obj.fontSize;textele.style.color=obj.fontColor;textele.style.fontFamily=obj.fontFamily;}textele.rotateValue={y:-10,angle:angle};labels.push(textele);return labels;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotation point model array.
 * @param {MeasureAnnotation} measure - Specified the measure annotation object.
 * @hidden
 * @returns {string} - Returns the perimeter label value.
 */function updatePerimeterLabel(obj,points,measure){var perimeter;for(var i=0;i<obj.wrapper.children.length;i++){var textElement_3=obj.wrapper.children[i];if(textElement_3&&!sf.base.isNullOrUndefined(textElement_3.content)){perimeter=measure.calculatePerimeter(obj);textElement_3.content=perimeter;textElement_3.childNodes[0].text=textElement_3.content;textElement_3.refreshTextElement();}}return perimeter;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @hidden
 * @returns {void}
 */ /**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @hidden
 * @returns {void}
 */function updateCalibrateLabel(obj){if(obj.wrapper&&obj.wrapper.children){for(var i=0;i<obj.wrapper.children.length;i++){var textElement_5=obj.wrapper.children[i];if(textElement_5&&!sf.base.isNullOrUndefined(textElement_5.content)){textElement_5.content=obj.notes;textElement_5.childNodes[0].text=textElement_5.content;textElement_5.refreshTextElement();}}}}/**
 * Used to find the path for polygon shapes
 *
 * @param {PointModel[]} collection - Specified the polygon annotaion points collection.
 * @hidden
 * @returns {string} - Returns the polygon annotation path.
 */function getPolygonPath(collection){var path='';var seg;path='M'+collection[0].x+' '+collection[0].y;var i;for(i=1;i<collection.length;i++){seg=collection[i];path+='L'+seg.x+' '+seg.y;}path+='Z';return path;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {number} angle - Specified the annotaion rotation angle.
 * @hidden
 * @returns {TextElement} - Returns the annotation text element.
 */function textElement(obj,angle){var textele=new sf.drawings.TextElement();setElementStype(obj,textele);textele.style.fill='transparent';textele.id=sf.drawings.randomId();textele.horizontalAlignment='Center';textele.rotateValue={y:10,angle:angle};textele.verticalAlignment='Top';textele.relativeMode='Object';textele.setOffsetWithRespectToBounds(.5,.5,'Absolute');// eslint-disable-next-line
textele.style.textWrapping='NoWrap';return textele;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel[]} points - Specified the annotaion leader points.
 * @hidden
 * @returns {PathElement[]} - Returns the annotation path elements.
 */function initLeaders(obj,points){var leaders=[];var leader=initLeader(obj,points[0],points[1]);leaders.push(leader);leader=initLeader(obj,points[1],points[0],true);leaders.push(leader);return leaders;}/**
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
 * @param {PointModel} point1 - Specified the annotaion leader point1.
 * @param {PointModel} point2 - Specified the annotaion leader point2.
 * @param {boolean} isSecondLeader - Specified the is second leader or not.
 * @hidden
 * @returns {PathElement} - Returns the annotation path element.
 */function initLeader(obj,point1,point2,isSecondLeader){var element=new sf.drawings.PathElement();element.offsetX=point1.x;element.offsetY=point1.y;var angle=sf.drawings.Point.findAngle(point1,point2);var center={x:(point1.x+point2.x)/2,y:(point1.y+point2.y)/2};var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,0-angle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,point1);var newPoint1={x:rotatedPoint.x,y:rotatedPoint.y-obj.leaderHeight};matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,element.offsetX,element.offsetY);rotatedPoint=sf.drawings.transformPointByMatrix(matrix,newPoint1);var finalPoint={x:point1.x,y:point1.y};element.offsetX=finalPoint.x;element.offsetY=finalPoint.y;element.transform=sf.drawings.RotateTransform.Self;var getPath='M'+point1.x+','+point1.y+' L'+rotatedPoint.x+','+rotatedPoint.y+'Z';var size=new sf.drawings.Size(0,obj.leaderHeight);element.pivot.x=.5;if(isSecondLeader){element.id='leader2_'+sf.drawings.randomId();element.pivot.y=0;}else{element.id='leader1_'+sf.drawings.randomId();element.pivot.y=1;}setElementStype(obj,element);element.rotateAngle=angle;element.data=getPath;element.canMeasurePath=true;element.width=size.width;element.height=size.height;return element;}/**
 * @private
 * @param {PdfAnnotationBaseModel} connector - Specified the annotation connector object.
 * @param {PointModel} reference - Specified the pointer reference value.
 * @returns {boolean} - Returns true or false.
 */function isPointOverConnector(connector,reference){var vertexPoints=connector.vertexPoints;for(var i=0;i<vertexPoints.length-1;i++){var start=vertexPoints[i];var end=vertexPoints[i+1];var rect=sf.drawings.Rect.toBounds([start,end]);rect.Inflate(10);if(rect.containsPoint(reference)){var intersectinPt=findNearestPoint(reference,start,end);var segment1={x1:start.x,x2:end.x,y1:start.y,y2:end.y};var segment2={x1:reference.x,x2:intersectinPt.x,y1:reference.y,y2:intersectinPt.y};var intersectDetails=sf.drawings.intersect3(segment1,segment2);if(intersectDetails.enabled){var distance=sf.drawings.Point.findLength(reference,intersectDetails.intersectPt);if(Math.abs(distance)<10){return true;}}else{var rect_1=sf.drawings.Rect.toBounds([reference,reference]);rect_1.Inflate(3);if(rect_1.containsPoint(start)||rect_1.containsPoint(end)){return true;}}if(sf.drawings.Point.equals(reference,intersectinPt)){return true;}}}return false;}/**
 * @param {PointModel} reference - Specified the pointer reference value.
 * @param {PointModel} start - Specified the pointer start value.
 * @param {PointModel} end - Specified the pointer end value.
 * @private
 * @returns {PointModel} - Returns annotation point model.
 */function findNearestPoint(reference,start,end){var shortestPoint;var shortest=sf.drawings.Point.findLength(start,reference);var shortest1=sf.drawings.Point.findLength(end,reference);if(shortest>shortest1){shortestPoint=end;}else{shortestPoint=start;}var angleBWStAndEnd=sf.drawings.Point.findAngle(start,end);var angleBWStAndRef=sf.drawings.Point.findAngle(shortestPoint,reference);var r=sf.drawings.Point.findLength(shortestPoint,reference);var vaAngle=angleBWStAndRef+(angleBWStAndEnd-angleBWStAndRef)*2;return{x:shortestPoint.x+r*Math.cos(vaAngle*Math.PI/180),y:shortestPoint.y+r*Math.sin(vaAngle*Math.PI/180)};}/**
 * @param {DecoratorShapes} shape - Specified the annotation decorator shapes.
 * @hidden
 * @returns {string} - Returns the annotation decorator shape value.
 */function getDecoratorShape(shape){// eslint-disable-next-line
return decoratorShapes[shape];}var decoratorShapes={'OpenArrow':'M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z','Square':'M0,0 L10,0 L10,10 L0,10 z','Fletch':'M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z','OpenFetch':'M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5'+'c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z '+'M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0'+'c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z','IndentedArrow':'M17,10c0,0-4.5,5.5,0,12L5,16L17,10z','OutdentedArrow':'M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z','DoubleArrow':'M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z','Arrow':'M15,10 L15,22 L5,16Z','Diamond':'M12,23l-7-7l7-7l6.9,7L12,23z','Circle':'M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z','Butt':'M0,0 L0,90'};var __extends$2=undefined&&undefined.__extends||function(){var _extendStatics3=function extendStatics(d,b){_extendStatics3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return _extendStatics3(d,b);};return function(d,b){_extendStatics3(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();/**
 * HTMLElement defines the basic html elements
 */var DiagramHtmlElement=/** @class */function(_super){__extends$2(DiagramHtmlElement,_super);/**
     * set the id for each element
     *
     * @param {string} nodeTemplate - Set the id for each element.
     * @returns {void}
     *
     * @private
     */function DiagramHtmlElement(nodeTemplate){var _this=_super.call(this)||this;_this.templateFn=_this.templateCompiler(nodeTemplate);return _this;}DiagramHtmlElement.prototype.templateCompiler=function(template){if(template){// eslint-disable-next-line @typescript-eslint/no-unused-vars
try{if(document.querySelectorAll(template).length){return sf.base.compile(document.querySelector(template).innerHTML.trim());}}catch(e){return sf.base.compile(template);}}return undefined;};/**
     * getNodeTemplate method \
     *
     * @returns { Function } getNodeTemplate method .\
     *
     * @private
     */DiagramHtmlElement.prototype.getNodeTemplate=function(){return this.templateFn;};return DiagramHtmlElement;}(sf.drawings.DrawingElement);/**
 * Renderer module is used to render basic diagram elements
 *
 * @hidden
 */var Drawing=/** @class */function(){function Drawing(viewer){this.isDynamicStamps=false;this.pdfViewer=viewer;this.renderer=new sf.drawings.DrawingRenderer('this.pdfViewer.dataId',false);this.svgRenderer=new sf.drawings.SvgRenderer();}/**
     * @private
     * @param {PdfViewer} viewer - Specified the pdfViewer element.
     * @returns {void}
     */Drawing.prototype.renderLabels=function(viewer){var annotations=viewer.annotations;if(annotations){for(var i=0;i<annotations.length;i++){var annotation=annotations[i];this.initObject(annotation);}}};Drawing.prototype.createNewZindexTable=function(pageId){var zIndexTable=new ZOrderPageTable();this.pdfViewer.zIndex++;zIndexTable.pageId=this.pdfViewer.zIndex;this.pdfViewer.zIndexTable.push(zIndexTable);return zIndexTable;};/**
     * @private
     * @param {number} pageId - Specified the page Id.
     * @returns {ZOrderPageTable} - Returns the ZOrder page table.
     */Drawing.prototype.getPageTable=function(pageId){var zIndexTable;if(this.pdfViewer.zIndexTable.length!==undefined){var notFound=true;for(var i=0;i<this.pdfViewer.zIndexTable.length;i++){if(this.pdfViewer.zIndexTable[i].pageId===pageId){notFound=false;zIndexTable=this.pdfViewer.zIndexTable[i];break;}}if(notFound){zIndexTable=this.createNewZindexTable(pageId);zIndexTable.pageId=pageId;}}else{zIndexTable=this.createNewZindexTable(pageId);}return zIndexTable;};/**
     * @private
     * @param {number} index - Specified the page index value.
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {void}
     */Drawing.prototype.setZIndex=function(index,obj){if(obj.pageIndex!==undefined){var pageTable=this.getPageTable(obj.pageIndex);if(obj.zIndex===-1){pageTable.zIndex++;obj.zIndex=pageTable.zIndex;pageTable.objects.push(obj);}else{var index_1=obj.zIndex;var tabelLength=pageTable.objects.length;obj.zIndex=tabelLength++;pageTable.objects.push(obj);}}};/**
     * @private
     * @param {PdfAnnotationBaseModel | PdfFormFieldBaseModel} obj - Specified the annotation object.
     * @returns {PdfAnnotationBaseModel | PdfFormFieldBaseModel} - Returns the annotaion or form fields model.
     */Drawing.prototype.initObject=function(obj){//Move the common properties like zindex and id to an abstract class
this.setZIndex(this.pdfViewer.zIndex,obj);sf.drawings.createMeasureElements();if(!isLineShapes(obj)){this.initNode(obj);}else{this.initLine(obj);obj.wrapper.measure(new sf.drawings.Size(undefined,undefined));obj.wrapper.arrange(obj.wrapper.desiredSize);}if(obj.wrapper===null){//Init default wrapper
}// eslint-disable-next-line @typescript-eslint/no-explicit-any
this.pdfViewer.nameTable[obj.id]=obj;if(obj.formFieldAnnotationType){this.nodePropertyChange(obj,{bounds:{width:obj.bounds.width,height:obj.bounds.height}});}//Add some methodologies to add the children of group to name table
return obj;};Drawing.prototype.initNode=function(obj){var canvas=this.initContainer(obj);var content;if(!canvas.children){canvas.children=[];}if(!content){content=this.init(obj,canvas);}//canvas.children.push(content);
canvas.rotateAngle=obj.rotateAngle;// eslint-disable-next-line max-len
canvas.measure(new sf.drawings.Size(obj.wrapper.width,obj.wrapper.height));canvas.arrange(canvas.desiredSize);if(this.isDynamicStamps){this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(obj,null,'dynamicStamp');this.isDynamicStamps=false;}};/**
     * Allows to initialize the UI of a node
     */ /**
     * @private
     * @param {PdfAnnotationBaseModel | PdfFormFieldBaseModel} obj - Specified the annotation object.
     * @param {Container} canvas - Specified the canvas element.
     * @returns {DrawingElement} - Returns the drawing element.
     */Drawing.prototype.init=function(obj,canvas){var content;content=new sf.drawings.DrawingElement();var pathContent;var basicElement;var isStamp=false;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.findAnnotationSettings(obj):{};var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}var isAnnotationSet=false;if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){isAnnotationSet=true;}if(obj.formFieldAnnotationType){content=this.initFormFields(obj,content,canvas);}else{// eslint-disable-next-line max-len
content=this.initAnnotationObject(obj,pathContent,content,canvas,isStamp,basicElement,isAnnotationSet,annotationMaxHeight,annotationMaxWidth,annotationMinWidth,annotationMinHeight);}content.id=obj.id+'_content';content.relativeMode='Object';if(obj.shapeAnnotationType!=='Stamp'){if(obj.bounds.width!==undefined){content.width=obj.bounds.width;if(isAnnotationSet){if(content.width<annotationMinWidth||content.width>annotationMaxWidth){if(content.width<annotationMinWidth){content.width=annotationMinWidth;}if(content.width>annotationMaxWidth){content.width=annotationMaxWidth;}}}}content.horizontalAlignment='Stretch';if(obj.bounds.height!==undefined){content.height=obj.bounds.height;if(isAnnotationSet){if(content.height<annotationMinHeight||content.width>annotationMaxHeight){if(content.height<annotationMinHeight){content.height=annotationMinHeight;}if(content.height>annotationMaxHeight){content.height=annotationMaxHeight;}}}}setElementStype(obj,content);if(this.pdfViewer.viewerBase.drawSignatureWithTool&&obj.shapeAnnotationType==='SignatureText'){content.style.strokeWidth=0;}}content.isRectElement=true;content.verticalAlignment='Stretch';return content;};Drawing.prototype.initFormFields=function(obj,content,canvas){switch(obj.formFieldAnnotationType){case'Textbox':case'PasswordField':case'Checkbox':case'RadioButton':case'DropdownList':case'ListBox':case'SignatureField':case'InitialField':// eslint-disable-next-line
var htmlContent=new DiagramHtmlElement();content=htmlContent;content.rotateAngle=this.pdfViewer.formFieldsModule.getAngle(obj.pageIndex);content.id=obj.id+'_content';canvas.children.push(content);break;}return content;};// eslint-disable-next-line
Drawing.prototype.initAnnotationObject=function(obj,pathContent,content,canvas,isStamp,basicElement,isAnnotationSet,annotationMaxHeight,annotationMaxWidth,annotationMinWidth,annotationMinHeight){switch(obj.shapeAnnotationType){case'Ellipse':pathContent=new sf.drawings.PathElement();pathContent.data='M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5'+'C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z';content=pathContent;canvas.children.push(content);if(obj.enableShapeLabel){var textLabel=this.textElement(obj);textLabel.content=obj.labelContent;textLabel.style.color=obj.fontColor;textLabel.style.strokeColor=obj.labelBorderColor;textLabel.style.fill=obj.labelFillColor;textLabel.style.fontSize=obj.fontSize;textLabel.style.fontFamily=obj.fontFamily;textLabel.style.opacity=obj.labelOpacity;textLabel.style.textWrapping='NoWrap';canvas.children.push(textLabel);}break;case'Path':pathContent=new sf.drawings.PathElement();pathContent.data=obj.data;content=pathContent;canvas.children.push(content);break;case'HandWrittenSignature':case'Ink':pathContent=new sf.drawings.PathElement();pathContent.data=obj.data;pathContent.style.strokeColor=obj.strokeColor;pathContent.style.strokeWidth=obj.thickness;pathContent.style.opacity=obj.opacity;content=pathContent;canvas.children.push(content);break;case'Polygon':pathContent=new sf.drawings.PathElement();pathContent.data=getPolygonPath(obj.vertexPoints);content=pathContent;canvas.children.push(content);break;case'Stamp':isStamp=true;this.isDynamicStamps=true;if(obj&&obj.annotationAddMode&&(obj.annotationAddMode==='Existing Annotation'||obj.annotationAddMode==='Imported Annotation'||obj.id==='diagram_helper')){obj.bounds.width=obj.bounds.width-20;obj.bounds.height=obj.bounds.height-20;}if(obj.isDynamicStamp){canvas.horizontalAlignment='Left';basicElement=new sf.drawings.DrawingElement();content=basicElement;content.cornerRadius=10;content.style.fill=obj.stampFillColor;content.style.strokeColor=obj.stampStrokeColor;canvas.children.push(content);var textele_1=this.textElement(obj);textele_1=new sf.drawings.TextElement();textele_1.style.fontFamily='Helvetica';textele_1.style.fontSize=14;textele_1.style.italic=true;textele_1.style.bold=true;textele_1.style.color=obj.fillColor;textele_1.rotateValue=undefined;textele_1.content=obj.dynamicText;textele_1.relativeMode='Point';textele_1.margin.left=10;textele_1.margin.bottom=-7;textele_1.setOffsetWithRespectToBounds(0,0.57,null);textele_1.relativeMode='Point';if(obj.annotationAddMode==='Existing Annotation'||obj.annotationAddMode==='Imported Annotation'){textele_1.style.fontSize=this.fontSizeCalculation(obj,textele_1,obj.bounds.width-20);}if(obj.id!="diagram_helper"){canvas.children.push(textele_1);}// eslint-disable-next-line
var pathContent1=new sf.drawings.PathElement();pathContent1.id=sf.drawings.randomId()+'_stamp';pathContent1.data=obj.data;pathContent1.width=obj.bounds.width;if(isAnnotationSet&&obj.bounds.width>annotationMaxWidth){pathContent1.width=annotationMaxWidth;obj.bounds.width=annotationMaxWidth;}pathContent1.height=obj.bounds.height/2;if(isAnnotationSet&&obj.bounds.height>annotationMaxHeight){pathContent1.height=annotationMaxHeight/2;obj.bounds.height=annotationMaxHeight/2;}pathContent1.rotateValue=undefined;pathContent1.margin.left=10;pathContent1.margin.bottom=-5;pathContent1.relativeMode='Point';pathContent1.setOffsetWithRespectToBounds(0,0.1,null);// eslint-disable-next-line
var content1=pathContent1;pathContent1.style.fill=obj.fillColor;pathContent1.style.strokeColor=obj.strokeColor;pathContent1.style.opacity=obj.opacity;content.width=obj.bounds.width+20;content.height=obj.bounds.height+20;content.style.opacity=obj.opacity;canvas.children.push(content1);}else{canvas.horizontalAlignment='Left';basicElement=new sf.drawings.DrawingElement();content=basicElement;content.cornerRadius=10;content.style.fill=obj.stampFillColor;content.style.strokeColor=obj.stampStrokeColor;canvas.children.push(content);// eslint-disable-next-line
var pathContent1=new sf.drawings.PathElement();pathContent1.id=sf.drawings.randomId()+'_stamp';pathContent1.data=obj.data;pathContent1.width=obj.bounds.width;if(isAnnotationSet&&obj.bounds.width>annotationMaxWidth){pathContent1.width=annotationMaxWidth;obj.bounds.width=annotationMaxWidth;}pathContent1.height=obj.bounds.height;if(isAnnotationSet&&obj.bounds.height>annotationMaxHeight){pathContent1.height=annotationMaxHeight;obj.bounds.height=annotationMaxHeight;}// eslint-disable-next-line
var content1=pathContent1;pathContent1.style.fill=obj.fillColor;pathContent1.style.strokeColor=obj.strokeColor;pathContent1.style.opacity=obj.opacity;content.width=obj.bounds.width+20;content.height=obj.bounds.height+20;content.style.opacity=obj.opacity;canvas.children.push(content1);}break;case'Image':case'SignatureImage':// eslint-disable-next-line
var pathContent11=new sf.drawings.ImageElement();pathContent11.source=obj.data;content=pathContent11;content.style.strokeWidth=0;canvas.children.push(content);break;case'Rectangle':basicElement=new sf.drawings.DrawingElement();content=basicElement;canvas.children.push(content);if(obj.enableShapeLabel){var textLabel=this.textElement(obj);textLabel.content=obj.labelContent;textLabel.style.color=obj.fontColor;textLabel.style.strokeColor=obj.labelBorderColor;textLabel.style.fill=obj.labelFillColor;textLabel.style.fontSize=obj.fontSize;textLabel.style.fontFamily=obj.fontFamily;textLabel.style.opacity=obj.labelOpacity;textLabel.style.textWrapping='NoWrap';canvas.children.push(textLabel);}break;case'Perimeter':pathContent=new sf.drawings.PathElement();pathContent.data='M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5'+'C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z';content=pathContent;setElementStype(obj,pathContent);canvas.children.push(content);basicElement=new sf.drawings.DrawingElement();basicElement.id='perimeter_'+sf.drawings.randomId();basicElement.height=.2;basicElement.width=.2;basicElement.transform=sf.drawings.RotateTransform.Self;basicElement.horizontalAlignment='Stretch';this.setNodePosition(basicElement,obj);basicElement.rotateAngle=obj.rotateAngle;setElementStype(obj,basicElement);canvas.children.push(basicElement);// eslint-disable-next-line
var textele=this.textElement(obj);textele=new sf.drawings.TextElement();textele.style.textWrapping='NoWrap';textele.content=textele.content=findPointsLength([{x:obj.bounds.x,y:obj.bounds.y},{x:obj.bounds.x+obj.bounds.width,y:obj.bounds.y+obj.bounds.height}]).toString();textele.rotateValue={y:-10,angle:obj.rotateAngle};canvas.children.push(textele);break;case'Radius':pathContent=new sf.drawings.PathElement();pathContent.data='M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5'+'C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z';content=pathContent;setElementStype(obj,pathContent);canvas.children.push(content);basicElement=new sf.drawings.DrawingElement();basicElement.id='radius_'+sf.drawings.randomId();basicElement.height=.2;basicElement.width=obj.bounds.width/2;basicElement.transform=sf.drawings.RotateTransform.Self;this.setNodePosition(basicElement,obj);basicElement.rotateAngle=obj.rotateAngle;setElementStype(obj,basicElement);canvas.children.push(basicElement);// eslint-disable-next-line
var radiusTextEle=this.textElement(obj);if(obj.enableShapeLabel){radiusTextEle.style.color=obj.fontColor;radiusTextEle.style.strokeColor=obj.labelBorderColor;radiusTextEle.style.fill=obj.labelFillColor;radiusTextEle.style.fontSize=obj.fontSize;radiusTextEle.style.fontFamily=obj.fontFamily;radiusTextEle.style.opacity=obj.labelOpacity;radiusTextEle.style.textWrapping='NoWrap';}// eslint-disable-next-line
var length_1=findPointsLength([{x:obj.bounds.x,y:obj.bounds.y},{x:obj.bounds.x+obj.bounds.width,y:obj.bounds.y+obj.bounds.height}]);if(!this.pdfViewer.enableImportAnnotationMeasurement&&obj.notes&&obj.notes!==''){radiusTextEle.content=obj.notes;}else{if(!obj.bounds.width){// eslint-disable-next-line max-len
radiusTextEle.content=this.pdfViewer.annotation.measureAnnotationModule.setConversion(0*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,obj);}else{// eslint-disable-next-line max-len
radiusTextEle.content=this.pdfViewer.annotation.measureAnnotationModule.setConversion(obj.bounds.width/2*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,obj);}}radiusTextEle.rotateValue={y:-10,x:obj.bounds.width/4,angle:obj.rotateAngle};canvas.children.push(radiusTextEle);break;case'StickyNotes':// eslint-disable-next-line
var pathContent2=new sf.drawings.ImageElement();pathContent2.source=obj.data;pathContent2.width=obj.bounds.width;pathContent2.height=obj.bounds.height;pathContent2.style.strokeColor=obj.strokeColor;pathContent2.style.strokeWidth=0;content=pathContent2;canvas.children.push(content);break;case'SignatureText':// eslint-disable-next-line
var rectElements=new sf.drawings.DrawingElement();rectElements.style.strokeWidth=0;content=rectElements;content.style.strokeWidth=0;canvas.style.strokeWidth=0;canvas.children.push(content);// eslint-disable-next-line
var signatureText=this.textElement(obj);signatureText.style.fontFamily=obj.fontFamily;signatureText.style.fontSize=obj.fontSize;signatureText.style.textAlign='Left';signatureText.rotateValue=undefined;signatureText.content=obj.data;signatureText.style.strokeWidth=0;canvas.children.push(signatureText);break;case'FreeText':// eslint-disable-next-line
var rectElement=new sf.drawings.DrawingElement();content=rectElement;canvas.children.push(content);// eslint-disable-next-line
var freeTextEle=this.textElement(obj);freeTextEle=new sf.drawings.TextElement();freeTextEle.style.fontFamily=obj.fontFamily;freeTextEle.style.fontSize=obj.fontSize;freeTextEle.style.textAlign='Left';if(obj.textAlign.toLowerCase()==='center'){freeTextEle.style.textAlign='Center';}else if(obj.textAlign.toLowerCase()==='right'){freeTextEle.style.textAlign='Right';}else if(obj.textAlign.toLowerCase()==='justify'){freeTextEle.style.textAlign='Justify';}freeTextEle.style.color=obj.fontColor;freeTextEle.style.bold=obj.font.isBold;freeTextEle.style.italic=obj.font.isItalic;if(obj.font.isUnderline===true){freeTextEle.style.textDecoration='Underline';}else if(obj.font.isStrikeout===true){freeTextEle.style.textDecoration='LineThrough';}freeTextEle.rotateValue=undefined;freeTextEle.content=obj.dynamicText;freeTextEle.style.opacity=obj.opacity;freeTextEle.margin.left=4;freeTextEle.margin.top=5*(obj.fontSize/16);if(this.pdfViewer.freeTextSettings.enableAutoFit){freeTextEle.style.textWrapping='Wrap';}else{freeTextEle.style.textWrapping='WrapWithOverflow';}freeTextEle.relativeMode='Point';freeTextEle.setOffsetWithRespectToBounds(0,0,null);freeTextEle.relativeMode='Point';canvas.children.push(freeTextEle);break;}content.id=obj.id+'_content';content.relativeMode='Object';content.printID=obj.annotName;if(!isStamp){if(obj.bounds.width!==undefined){content.width=obj.bounds.width;if(isAnnotationSet){if(content.width<annotationMinWidth||content.width>annotationMaxWidth){if(content.width<annotationMinWidth){content.width=annotationMinWidth;}if(content.width>annotationMaxWidth){content.width=annotationMaxWidth;}}}}content.horizontalAlignment='Stretch';if(obj.bounds.height!==undefined){content.height=obj.bounds.height;if(isAnnotationSet){if(content.height<annotationMinHeight||content.width>annotationMaxHeight){if(content.height<annotationMinHeight){content.height=annotationMinHeight;}if(content.height>annotationMaxHeight){content.height=annotationMaxHeight;}}}}setElementStype(obj,content);}content.isRectElement=true;content.verticalAlignment='Stretch';return content;};Drawing.prototype.textElement=function(obj){var textele=new sf.drawings.TextElement();setElementStype(obj,textele);textele.horizontalAlignment='Center';obj.shapeAnnotationType==='SignatureText'?textele.verticalAlignment='Center':textele.verticalAlignment='Top';textele.relativeMode='Object';textele.setOffsetWithRespectToBounds(.5,.5,'Absolute');return textele;};/**
     * @private
     * @param {DrawingElement} obj - Specified the drawing element.
     * @param {PdfAnnotationBaseModel} node - Specified the node element.
     * @returns {void}
     */Drawing.prototype.setNodePosition=function(obj,node){if(node.shapeAnnotationType==='Perimeter'){obj.offsetX=node.bounds.x+node.bounds.width/2;obj.offsetY=node.bounds.y+node.bounds.height/2;}else if(node.shapeAnnotationType==='Radius'){// eslint-disable-next-line max-len
var trasPoint={x:node.bounds.x+node.bounds.width/2+node.bounds.width/4,y:node.bounds.y+node.bounds.height/2};var center={x:node.bounds.x+node.bounds.width/2,y:node.bounds.y+node.bounds.height/2};var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,node.rotateAngle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,trasPoint);var newPoint1={x:rotatedPoint.x,y:rotatedPoint.y};obj.offsetX=newPoint1.x;obj.offsetY=newPoint1.y;obj.width=node.bounds.width/2;}};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {Container} - Returns the container element.
     */Drawing.prototype.initContainer=function(obj){if(!obj.id){obj.id=sf.drawings.randomId();}// Creates canvas element
var canvas=new sf.drawings.Canvas();canvas.id=obj.id;canvas.offsetX=obj.bounds.x+obj.bounds.width*0.5;canvas.offsetY=obj.bounds.y+obj.bounds.height*0.5;canvas.style.fill='transparent';canvas.style.strokeColor='transparent';canvas.rotateAngle=obj.rotateAngle;obj.wrapper=canvas;return canvas;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {Canvas} - Returns the canvas element.
     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any
Drawing.prototype.initLine=function(obj){if(!obj.id){obj.id=sf.drawings.randomId();}var container=new sf.drawings.Canvas();var segment=new sf.drawings.PathElement();segment.id=obj.id+'_path';var srcDecorator=new sf.drawings.PathElement();var targetDecorator=new sf.drawings.PathElement();if(obj.vertexPoints.length){obj.sourcePoint=obj.vertexPoints[0];obj.targetPoint=obj.vertexPoints[obj.vertexPoints.length-1];for(var i=0;i<obj.vertexPoints.length;i++){if(i!==0&&i!==obj.vertexPoints.length-1){obj.segments.push(obj.vertexPoints[i]);}}}segment=getSegmentElement(obj,segment);var points=[];points=getConnectorPoints(obj);//  points = this.clipDecorators(this, points);
var leaders=[];var labels=[];if(obj.shapeAnnotationType==='Distance'){leaders=initLeaders(obj,points);labels=initDistanceLabel(obj,points,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer);}if((obj.shapeAnnotationType==='Line'||obj.shapeAnnotationType==='LineWidthArrowHead')&&obj.measureType==='Perimeter'){labels=initPerimeterLabel(obj,points,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer);}if(obj.enableShapeLabel===true&&!(obj.shapeAnnotationType==='Distance')&&!(obj.measureType==='Perimeter')){var angle=sf.drawings.Point.findAngle(points[0],points[1]);var textele=this.textElement(obj);textele.id=sf.drawings.randomId();if(!this.pdfViewer.enableImportAnnotationMeasurement&&obj.notes&&obj.notes!==''){textele.content=obj.notes;}else{textele.content=obj.labelContent;}textele.style.strokeColor=obj.labelBorderColor;textele.style.fill=obj.labelFillColor;textele.style.fontSize=obj.fontSize;textele.style.color=obj.fontColor;textele.style.fontFamily=obj.fontFamily;textele.style.opacity=obj.labelOpacity;textele.rotateValue={y:-10,angle:angle};textele.style.textWrapping='NoWrap';labels.push(textele);}points=clipDecorators(obj,points);var bounds=sf.drawings.Rect.toBounds(points);container.width=bounds.width;container.height=bounds.height;container.offsetX=bounds.x+container.pivot.x*bounds.width;container.offsetY=bounds.y+container.pivot.y*bounds.height;var anglePoints=obj.vertexPoints;if(obj.shapeAnnotationType==='Line'||obj.shapeAnnotationType==='LineWidthArrowHead'||obj.shapeAnnotationType==='Distance'){srcDecorator=getDecoratorElement(obj,points[0],anglePoints[1],true);targetDecorator=getDecoratorElement(obj,points[points.length-1],anglePoints[anglePoints.length-2],false);}srcDecorator.id=obj.id+'_srcDec';targetDecorator.id=obj.id+'_tarDec';/* eslint-disable @typescript-eslint/dot-notation */segment.style['fill']='transparent';container.style.strokeColor='transparent';container.style.fill='transparent';container.style.strokeWidth=0;container.children=[];setElementStype(obj,segment);container.children.push(segment);if(leaders.length>0){for(var i=0;i<leaders.length;i++){container.children.push(leaders[i]);}}if(labels.length>0){for(var i=0;i<labels.length;i++){container.children.push(labels[i]);}}container.children.push(srcDecorator);container.children.push(targetDecorator);container.id=obj.id;container.offsetX=segment.offsetX;container.offsetY=segment.offsetY;container.width=segment.width;container.height=segment.height;points=getConnectorPoints(obj);obj.wrapper=container;return container;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {PdfAnnotationBaseModel} - Returns the added annotaion object.
     */Drawing.prototype.add=function(obj){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);//obj = new PdfAnnotationBase();
// obj = new PdfAnnotationBase(this.pdfViewer, 'annotations', obj as PdfAnnotationBase, true);
obj=this.updateAnnotationObject(obj);obj=this.initObject(obj);this.pdfViewer.annotations.push(obj);this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);return obj;};Drawing.prototype.updateAnnotationObject=function(obj){var newObject=new PdfAnnotationBase();if(obj){if(obj.id){newObject.id=obj.id;}if(obj.shapeAnnotationType){newObject.shapeAnnotationType=obj.shapeAnnotationType;}if(obj.type){newObject.type=obj.type;}if(obj.formFieldAnnotationType){newObject.formFieldAnnotationType=obj.formFieldAnnotationType;}if(obj.measureType){newObject.measureType=obj.measureType;}if(obj.author){newObject.author=obj.author;}if(obj.modifiedDate){newObject.modifiedDate=obj.modifiedDate;}if(obj.subject){newObject.subject=obj.subject;}if(obj.notes){newObject.notes=obj.notes;}if(obj.isCommentLock){newObject.isCommentLock=obj.isCommentLock;}if(obj.strokeColor){newObject.strokeColor=obj.strokeColor;}if(obj.fillColor){newObject.fillColor=obj.fillColor;}if(obj.stampStrokeColor){newObject.stampStrokeColor=obj.stampStrokeColor;}if(obj.stampFillColor){newObject.stampFillColor=obj.stampFillColor;}if(obj.data){newObject.data=obj.data;}if(obj.opacity!==null&&obj.opacity!==undefined){newObject.opacity=obj.opacity;}if(obj.thickness){newObject.thickness=obj.thickness;}if(obj.borderStyle){newObject.borderStyle=obj.borderStyle;}if(obj.borderDashArray){newObject.borderDashArray=obj.borderDashArray;}if(obj.rotateAngle){newObject.rotateAngle=obj.rotateAngle;}if(obj.isCloudShape){newObject.isCloudShape=obj.isCloudShape;}if(obj.cloudIntensity){newObject.cloudIntensity=obj.cloudIntensity;}if(obj.leaderHeight){newObject.leaderHeight=obj.leaderHeight;}if(obj.lineHeadStart){newObject.lineHeadStart=obj.lineHeadStart;}if(obj.lineHeadEnd){newObject.lineHeadEnd=obj.lineHeadEnd;}if(obj.vertexPoints){newObject.vertexPoints=obj.vertexPoints;}if(obj.sourcePoint){newObject.sourcePoint=obj.sourcePoint;}if(obj.sourceDecoraterShapes){newObject.sourceDecoraterShapes=obj.sourceDecoraterShapes;}if(obj.taregetDecoraterShapes){newObject.taregetDecoraterShapes=obj.taregetDecoraterShapes;}if(obj.targetPoint){newObject.targetPoint=obj.targetPoint;}if(obj.segments){newObject.segments=obj.segments;}if(obj.bounds){newObject.bounds=obj.bounds;}if(obj.pageIndex){newObject.pageIndex=obj.pageIndex;}if(obj.zIndex){newObject.zIndex=obj.zIndex;}if(obj.wrapper){newObject.wrapper=obj.wrapper;}if(obj.isDynamicStamp){newObject.isDynamicStamp=obj.isDynamicStamp;}if(obj.dynamicText){newObject.dynamicText=obj.dynamicText;}if(obj.annotName){newObject.annotName=obj.annotName;}if(obj.review){newObject.review=obj.review;}if(obj.comments){newObject.comments=obj.comments;}if(obj.fontColor){newObject.fontColor=obj.fontColor;}if(obj.fontSize){newObject.fontSize=obj.fontSize;}if(obj.fontFamily){newObject.fontFamily=obj.fontFamily;}if(obj.fontStyle){newObject.fontStyle=obj.fontStyle;}if(obj.enableShapeLabel){newObject.enableShapeLabel=obj.enableShapeLabel;}if(obj.labelContent){newObject.labelContent=obj.labelContent;}if(obj.labelFillColor){newObject.labelFillColor=obj.labelFillColor;}if(obj.labelMaxLength){newObject.labelMaxLength=obj.labelMaxLength;}if(obj.labelOpacity){newObject.labelOpacity=obj.labelOpacity;}if(obj.annotationSelectorSettings){newObject.annotationSelectorSettings=obj.annotationSelectorSettings;}if(obj.labelBorderColor){newObject.labelBorderColor=obj.labelBorderColor;}if(obj.textAlign){newObject.textAlign=obj.textAlign;}if(obj.signatureName){newObject.signatureName=obj.signatureName;}if(obj.minHeight){newObject.minHeight=obj.minHeight;}if(obj.minWidth){newObject.minWidth=obj.minWidth;}if(obj.maxHeight){newObject.maxHeight=obj.maxHeight;}if(obj.maxWidth){newObject.maxWidth=obj.maxWidth;}if(obj.isLock){newObject.isLock=obj.isLock;}if(obj.annotationAddMode){newObject.annotationAddMode=obj.annotationAddMode;}if(obj.annotationSettings){newObject.annotationSettings=obj.annotationSettings;}if(obj.previousFontSize){newObject.previousFontSize=obj.previousFontSize;}if(obj.font){newObject.font=obj.font;}if(obj.labelBounds){newObject.labelBounds=obj.labelBounds;}if(obj.customData){newObject.customData=obj.customData;}if(obj.allowedInteractions){newObject.allowedInteractions=obj.allowedInteractions;}if(obj.isPrint){newObject.isPrint=obj.isPrint;}if(obj.isReadonly){newObject.isReadonly=obj.isReadonly;}}return newObject;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @returns {void}
     */Drawing.prototype.remove=function(obj){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);var index=obj.pageIndex;for(var i=0;i<this.pdfViewer.annotations.length;i++){var annotation=this.pdfViewer.annotations[i];if(annotation.id&&(annotation.id===obj.id||annotation.id.split('_')[0]===obj.id)||annotation.wrapper&&annotation.wrapper.id===obj.id){this.pdfViewer.annotations.splice(i,1);var objects=this.getPageObjects(obj.pageIndex);for(var j=0;j<objects.length;j++){if(objects[j].id===obj.id){objects.splice(j,1);if(obj.shapeAnnotationType==='Path'||obj.shapeAnnotationType==='SignatureImage'||obj.shapeAnnotationType==='SignatureText'){this.refreshCanvasDiagramLayer(undefined,index,obj.id);}else{this.pdfViewer.renderDrawing(undefined,index);}}}// need to add code snippet to remove from z index table   
}}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @private
     * @param {number} pageIndex - Specified the page index.
     * @returns {PdfAnnotationBaseModel[]} - Returns the annotation base model collections.
     */Drawing.prototype.getPageObjects=function(pageIndex){var pageTable=this.getPageTable(pageIndex);return pageTable.objects;};/**
     * @private
     * @param {HTMLCanvasElement} diagramLayer - Specified the diagram layer element.
     * @param {number} pageIndex - Specified the page index.
     * @param {string} objectId - Specified the object id.
     * @returns {void}
     */Drawing.prototype.refreshCanvasDiagramLayer=function(diagramLayer,pageIndex,objectId){if(!diagramLayer){diagramLayer=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);}if(diagramLayer){var zoom=this.pdfViewer.viewerBase.getZoomFactor();var width=diagramLayer.width/zoom;var height=diagramLayer.height/zoom;var ctx=diagramLayer.getContext('2d');ctx.lineCap="round";ctx.lineJoin="round";if(zoom<1){ctx.lineWidth=ctx.lineWidth/zoom;}var devicePixelRatio_1=this.pdfViewer.viewerBase.getWindowDevicePixelRatio();var zoomRatio=zoom*devicePixelRatio_1;if(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&zoom<=0.7){ctx.setTransform(zoomRatio,0,0,zoomRatio,0,0);}else{ctx.setTransform(zoom,0,0,zoom,0,0);}ctx.clearRect(0,0,width,height);var objects=this.getPageObjects(pageIndex);for(var i=0;i<objects.length;i++){// eslint-disable-next-line @typescript-eslint/no-explicit-any
var renderElement=void 0;if(diagramLayer.id===this.pdfViewer.dataId+'_print_annotation_layer_'+pageIndex){if(objects[i].isPrint){// eslint-disable-next-line @typescript-eslint/no-explicit-any
renderElement=this.pdfViewer.nameTable[objects[i].id].wrapper;if(!sf.base.isNullOrUndefined(renderElement)){sf.drawings.refreshDiagramElements(diagramLayer,[renderElement],this.renderer);}}}else{// eslint-disable-next-line
renderElement=this.pdfViewer.nameTable[objects[i].id].wrapper;sf.drawings.refreshDiagramElements(diagramLayer,[renderElement],this.renderer);}}}};/**
     * @private
     * @param {number} index - Specified the page index.
     * @returns {void}
     */Drawing.prototype.clearHighlighter=function(index){var adornerSvg=this.getAdornerLayerSvg(this.pdfViewer.dataId+index+'_diagramAdornerLayer',index);if(adornerSvg){var highlighter=adornerSvg.getElementById(adornerSvg.id+'_highlighter');if(highlighter){highlighter.parentNode.removeChild(highlighter);}}};/**
     * @private
     * @param {string} diagramId - Specified the diagram id.
     * @param {number} index - Specified the page index.
     * @returns {SVGSVGElement} Return the svg element.
     */Drawing.prototype.getSelectorElement=function(diagramId,index){var adornerLayer=null;var adornerSvg=this.getAdornerLayerSvg(diagramId,index);if(adornerSvg){adornerLayer=adornerSvg.getElementById(diagramId+'_SelectorElement');}return adornerLayer;};/**
     * @private
     * @param {string} diagramId - Specified the diagram id.
     * @param {number} index - Specified the page index.
     * @returns {SVGSVGElement} Return the svg element.
     */Drawing.prototype.getAdornerLayerSvg=function(diagramId,index){var adornerLayerSvg=null;var diagramElement=sf.drawings.getDiagramElement(diagramId+index+'_diagramAdornerLayer');if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&diagramElement){diagramElement.style.zIndex='0';}// eslint-disable-next-line
var elementcoll;if(diagramElement){elementcoll=diagramElement.getElementsByClassName('e-adorner-layer'+index);adornerLayerSvg=elementcoll[0];}return adornerLayerSvg;};/**
     * @private
     * @param {number} index - Specified the page index.
     * @returns {void}
     */Drawing.prototype.clearSelectorLayer=function(index){var adornerSvg=this.getAdornerLayerSvg(this.pdfViewer.dataId,index);if(adornerSvg){var selectionRect=adornerSvg.getElementById(this.pdfViewer.adornerSvgLayer.id+'_selected_region');if(selectionRect){selectionRect.parentNode.removeChild(selectionRect);}this.clearHighlighter(index);var childNodes=this.getSelectorElement(this.pdfViewer.dataId,index).childNodes;var child=void 0;for(var i=childNodes.length;i>0;i--){child=childNodes[i-1];child.parentNode.removeChild(child);}}};/**
     * @private
     * @param {number} select - Specified the select value.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the annotation selector element.
     * @param {PdfAnnotationBaseModel} helper - Specified the annotation helper element.
     * @param {boolean} isSelect - Specified the is select or not.
     * @returns {void}
     */ // eslint-disable-next-line max-len
Drawing.prototype.renderSelector=function(select,currentSelector,helper,isSelect){if(!helper||isSelect){var size=new sf.drawings.Size();var selectorModel=this.pdfViewer.selectedItems;this.clearSelectorLayer(select);if(selectorModel.wrapper){selectorModel.wrapper.measure(size);var zoom=this.pdfViewer.viewerBase.getZoomFactor();selectorModel.wrapper.arrange(selectorModel.wrapper.desiredSize);selectorModel.width=selectorModel.wrapper.actualSize.width;selectorModel.height=selectorModel.wrapper.actualSize.height;selectorModel.offsetX=selectorModel.wrapper.offsetX;selectorModel.offsetY=selectorModel.wrapper.offsetY;if(selectorModel.annotations.length===1){selectorModel.rotateAngle=selectorModel.annotations[0].rotateAngle;selectorModel.wrapper.rotateAngle=selectorModel.annotations[0].rotateAngle;//selectorModel.pivot = selectorModel.annotations[0].pivot;
}var bounds=selectorModel.wrapper.bounds;// eslint-disable-next-line
var selectorElement=void 0;if(selectorModel.formFields.length){for(var i=0;i<selectorModel.formFields.length;i++){var node=selectorModel.formFields[i];selectorElement=this.getSelectorElement(this.pdfViewer.dataId,select);if(selectorElement&&node.pageIndex===select&&this.pdfViewer.designerMode){this.renderResizeHandle(node.wrapper.children[0],selectorElement,selectorModel.thumbsConstraints,zoom,undefined,undefined,undefined,false,true,null,null,currentSelector);}}}if(selectorModel.annotations.length){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&selectorModel.annotations[0].type==='HandWrittenSignature'){this.pdfViewer._dotnetInstance.invokeMethodAsync('MobileAnnotationPropertyUpdate',selectorModel.annotations[0].type);}for(var j=0;j<selectorModel.annotations.length;j++){var node=selectorModel.annotations[j];selectorElement=this.getSelectorElement(this.pdfViewer.dataId,select);if(selectorElement&&node.pageIndex===select){if(node.shapeAnnotationType==='Distance'||node.shapeAnnotationType==='Line'||node.shapeAnnotationType==='LineWidthArrowHead'||node.shapeAnnotationType==='Polygon'){this.renderEndPointHandle(node,selectorElement,selectorModel.thumbsConstraints,{scale:zoom,tx:0,ty:0},undefined,undefined,true,currentSelector);}else{if(node.shapeAnnotationType==='StickyNotes'){this.renderResizeHandle(node.wrapper.children[0],selectorElement,selectorModel.thumbsConstraints,zoom,undefined,undefined,undefined,false,true,null,null,currentSelector);}else{if(this.pdfViewer.tool!=='Stamp'){// eslint-disable-next-line
var isSignature=node.shapeAnnotationType==='Path'||node.formFieldAnnotationType==='SignatureField'||node.formFieldAnnotationType==='InitialField';this.renderResizeHandle(node.wrapper.children[0],selectorElement,selectorModel.thumbsConstraints,zoom,undefined,undefined,undefined,node.shapeAnnotationType==='Stamp',false,isSignature,node.shapeAnnotationType==='FreeText'||node.shapeAnnotationType==='HandWrittenSignature'||node.shapeAnnotationType==='SignatureImage'||node.shapeAnnotationType==='Image'||node.shapeAnnotationType==='SignatureText',currentSelector);}}}if(!this.pdfViewer.viewerBase.isNewSignatureAdded){if(node.shapeAnnotationType==='HandWrittenSignature'){this.pdfViewer.annotationModule.selectSignature(node.signatureName,node.pageIndex,node);}if(node.shapeAnnotationType==='SignatureText'||node.shapeAnnotationType==='SignatureImage'||node.shapeAnnotationType==='Path'){this.pdfViewer.annotationModule.selectSignature(node.id,node.pageIndex,node);}}if(node.annotName!==''){if(helper&&node===helper&&!node.formFieldAnnotationType){// eslint-disable-next-line max-len
if(!this.pdfViewer.viewerBase.isAddComment&&!this.pdfViewer.viewerBase.isAnnotationSelect&&!this.pdfViewer.viewerBase.isAnnotationMouseDown&&!this.pdfViewer.viewerBase.isAnnotationMouseMove&&!this.pdfViewer.viewerBase.isInkAdded&&!this.pdfViewer.viewerBase.isNewStamp){this.pdfViewer.viewerBase.isAnnotationSelect=true;this.pdfViewer.annotationModule.annotationSelect(node.annotName,node.pageIndex,node);}}}}}}}}};/**
     * Rotates the given nodes/connectors by the given angle
     *
     * @private
     * @param {PdfAnnotationBaseModel | SelectorModel} obj - Specified the objects to be rotated.
     * @param {number} angle - Specified the angle by which the objects have to be rotated.
     * @param {PointModel} pivot - Specified the reference point with reference to which the objects have to be rotated.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the current selector value.
     * @returns {void}
     */ // eslint-disable-next-line max-len
Drawing.prototype.rotate=function(obj,angle,pivot,currentSelector){var checkBoundaryConstraints;if(obj){pivot=pivot||{x:obj.wrapper.offsetX,y:obj.wrapper.offsetY};if(obj instanceof Selector||!obj.shapeAnnotationType){obj.rotateAngle+=angle;obj.wrapper.rotateAngle+=angle;var objects=[];objects=objects.concat(obj.annotations);this.rotateObjects(obj,objects,angle,pivot,null,currentSelector);}else{this.rotateObjects(obj,[obj],angle,pivot);}}return checkBoundaryConstraints;};/**
     * @private
     * @param {PdfAnnotationBaseModel | SelectorModel} parent - Specified the annotation object.
     * @param {PdfAnnotationBaseModel[]} objects - Specified the annotation objects.
     * @param {number} angle - Specified the annotation angle.
     * @param {PointModel} pivot - Specified the pivot value.
     * @param {boolean} includeParent - Specified the include parent value.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the current selector value.
     * @returns {void}
     */Drawing.prototype.rotateObjects=function(parent,objects,angle,pivot,includeParent,currentSelector){pivot=pivot||{};var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,pivot.x,pivot.y);for(var _i=0,objects_1=objects;_i<objects_1.length;_i++){var obj=objects_1[_i];if(obj instanceof PdfAnnotationBase){if(includeParent!==false||parent!==obj){obj.rotateAngle+=angle;obj.rotateAngle=(obj.rotateAngle+360)%360;var newOffset=sf.drawings.transformPointByMatrix(matrix,{x:obj.wrapper.offsetX,y:obj.wrapper.offsetY});obj.wrapper.offsetX=newOffset.x;obj.wrapper.offsetY=newOffset.y;this.nodePropertyChange(obj,{rotateAngle:obj.rotateAngle});}this.renderSelector(obj.pageIndex,currentSelector);}}};Drawing.prototype.getParentSvg=function(element,targetElement,canvas){if(element&&element.id){if(targetElement&&targetElement==='selector'){return this.pdfViewer.adornerSvgLayer;}}return canvas;};/**
     * @private
     * @param {DrawingElement} selector - Specified the annotation selector object.
     * @param {HTMLCanvasElement | SVGElement} canvas - Specified the canvas element.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {Transforms} transform - Specfied the transform value.
     * @param {number} enableNode - Specified the node number.
     * @param {boolean} isBorderTickness - Specified is thickness or not.
     * @param {boolean} isSwimlane - Specified is swimlane annotation or not.
     * @param {boolean} isSticky - Specified is sticky annotation or not.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.renderBorder=function(selector,canvas,currentSelector,transform,enableNode,isBorderTickness,isSwimlane,isSticky){var wrapper=selector;var options=getBaseShapeAttributes(wrapper,transform);transform=transform||{scale:1,tx:0,ty:0};if(!isSticky){options.x*=transform.scale;options.y*=transform.scale;options.width*=transform.scale;options.height*=transform.scale;options.fill='transparent';// eslint-disable-next-line max-len
var shapeType=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType;if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);var borderColor=annotationSelector.selectionBorderColor===''?'black':annotationSelector.selectionBorderColor;options.stroke=borderColor;options.strokeWidth=currentSelector.selectionBorderThickness===1?1:annotationSelector.selectionBorderThickness;// eslint-disable-next-line max-len
var lineDash=annotationSelector.selectorLineDashArray.length===0?[6,3]:annotationSelector.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}else{if(!this.pdfViewer.designerMode){if(shapeType==='HandWrittenSignature'||shapeType==='SignatureText'||shapeType==='SignatureImage'||shapeType==='Ink'){// eslint-disable-next-line
var formField=this.pdfViewer.nameTable[selector.id.split('_')[0]];var isFormFieldSign=this.pdfViewer.viewerBase.checkSignatureFormField(selector.id);// if (isFormFieldSign && options.width + 21 !== formField.bounds.width && options.height + 21 !== formField.bounds.height) {
//     if (this.pdfViewer.signatureFitMode === 'Default') {
//         let selectorBounds: any = this.pdfViewer.formFieldsModule.getDefaultBoundsforSign(formField.bounds);
//         options.x = selectorBounds.x; options.y = selectorBounds.y; options.width = selectorBounds.width; options.height = selectorBounds.height;
//     } else {
//         options.x = formField.bounds.x; options.y = formField.bounds.y; options.width = formField.bounds.width; options.height = formField.bounds.height;
//     }
// }
this.getSignBorder(shapeType,options,isFormFieldSign);}else{this.getBorderSelector(shapeType,options);}}}options["class"]='e-pv-diagram-border';if(isSwimlane){options["class"]+=' e-diagram-lane';}options.id='borderRect';options.id='borderRect';if(!enableNode){options["class"]+=' e-disabled';}if(isBorderTickness){options["class"]+=' e-thick-border';}options.cornerRadius=0;}else{options.x*=transform.scale;options.y*=transform.scale;options.width*=transform.scale;options.height*=transform.scale;// eslint-disable-next-line max-len
var shapeType=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){var annotationSelector=JSON.parse(currentSelector);var borderColor=annotationSelector.selectionBorderColor===''?'black':annotationSelector.selectionBorderColor;options.stroke=borderColor;options.strokeWidth=currentSelector.selectionBorderThickness===1?1:annotationSelector.selectionBorderThickness;// eslint-disable-next-line max-len
var lineDash=annotationSelector.selectorLineDashArray.length===0?[6,3]:annotationSelector.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}else{this.getBorderSelector(shapeType,options);}}var parentSvg=this.getParentSvg(selector,'selector');// eslint-disable-next-line max-len
this.svgRenderer.drawRectangle(canvas,options,this.pdfViewer.dataId,undefined,true,parentSvg);};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotation object.
     * @param {BaseAttributes} options - Specified the options value.
     * @param {boolean} isFormFieldSign - Specified is form field sign or not.
     * @returns {void}
     */Drawing.prototype.getSignBorder=function(type,options,isFormFieldSign){if(!isFormFieldSign&&(type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){var borderColor=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){var borderColor=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}else{var annotationSelector=this.pdfViewer.annotationSelectorSettings;var borderColor=annotationSelector.selectionBorderColor===''?'black':annotationSelector.selectionBorderColor;options.stroke=borderColor;options.strokeWidth=annotationSelector.selectionBorderThickness===1?1:annotationSelector.selectionBorderThickness;// eslint-disable-next-line max-len
var lineDash=annotationSelector.selectorLineDashArray.length===0?[6,3]:annotationSelector.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();}};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotation object.
     * @param {BaseAttributes} options - Specified the base attributes.
     * @returns {void}
     */Drawing.prototype.getBorderSelector=function(type,options){var annotationSelector=this.pdfViewer.annotationSelectorSettings;var borderColor=sf.base.isNullOrUndefined(annotationSelector.selectionBorderColor)||annotationSelector.selectionBorderColor===''?'black':annotationSelector.selectionBorderColor;options.stroke=borderColor;// eslint-disable-next-line max-len
options.strokeWidth=sf.base.isNullOrUndefined(annotationSelector.selectionBorderThickness)||annotationSelector.selectionBorderThickness===1?1:annotationSelector.selectionBorderThickness;// eslint-disable-next-line max-len
var lineDash=sf.base.isNullOrUndefined(annotationSelector.selectorLineDashArray)||annotationSelector.selectorLineDashArray.length===0?[6,3]:annotationSelector.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}options.dashArray=lineDash.toString();if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){var borderColor_1=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_1;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_1=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_1.length>2){lineDash_1=[lineDash_1[0],lineDash_1[1]];}options.dashArray=lineDash_1.toString();}else if((type==='Textbox'||type==='Checkbox'||type==='RadioButton'||type==='SignatureField'||type==='InitialField'||type==='DropdownList'||type==='ListBox'||type==='PasswordField')&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){var borderColor_2=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_2;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_2=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_2.length>2){lineDash_2=[lineDash_2[0],lineDash_2[1]];}options.dashArray=lineDash_2.toString();}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){var borderColor_3=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_3;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_3=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_3.length>2){lineDash_3=[lineDash_3[0],lineDash_3[1]];}options.dashArray=lineDash_3.toString();}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){var borderColor_4=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_4;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_4=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_4.length>2){lineDash_4=[lineDash_4[0],lineDash_4[1]];}options.dashArray=lineDash_4.toString();}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){var borderColor_5=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_5;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_5=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_5.length>2){lineDash_5=[lineDash_5[0],lineDash_5[1]];}options.dashArray=lineDash_5.toString();}else if(type==='StickyNotes'&&this.pdfViewer.stickyNotesSettings.annotationSelectorSettings){var borderColor_6=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor===''?'black':this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_6;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_6=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[6,3]:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_6.length>2){lineDash_6=[lineDash_6[0],lineDash_6[1]];}options.dashArray=lineDash_6.toString();}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){var borderColor_7=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_7;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_7=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_7.length>2){lineDash_7=[lineDash_7[0],lineDash_7[1]];}options.dashArray=lineDash_7.toString();}else if(type==='Image'&&this.pdfViewer.customStampSettings.annotationSelectorSettings){var borderColor_8=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor)||this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor;options.stroke=borderColor_8;// eslint-disable-next-line max-len
var thickness=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderThickness;options.strokeWidth=thickness;// eslint-disable-next-line max-len
var lineDash_8=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray)||this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray;if(lineDash_8.length>2){lineDash_8=[lineDash_8[0],lineDash_8[1]];}options.dashArray=lineDash_8.toString();}};/**
     * @private
     * @param {string} id - Specified the annotaion id.
     * @param {DrawingElement} selector - Specified the drawing element.
     * @param {number} cx - Specified the cx number.
     * @param {number} cy - Specified the cy number.
     * @param {HTMLCanvasElement | SVGElement} canvas - Specified the html canvas element.
     * @param {boolean} visible - Specified the annotation visible or not.
     * @param {number} enableSelector - Specified the enable selector value.
     * @param {Transforms} t - Specified the transforms value.
     * @param {boolean} connected - Specified is connected or not.
     * @param {boolean} canMask - Specified is mask or not.
     * @param {Object} ariaLabel - Specified the aria label object.
     * @param {number} count - Specified the count value.
     * @param {string} className - Specified the class name.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the annotation selector settings.
     * @returns {void}
     */Drawing.prototype.renderCircularHandle=function(id,selector,cx,cy,canvas,visible,enableSelector,t,connected,canMask,ariaLabel,count,className,currentSelector){var wrapper=selector;var newPoint={x:cx,y:cy};t=t||{scale:1,tx:0,ty:0};if(wrapper.rotateAngle!==0||wrapper.parentTransform!==0){var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,wrapper.rotateAngle+wrapper.parentTransform,wrapper.offsetX,wrapper.offsetY);newPoint=sf.drawings.transformPointByMatrix(matrix,newPoint);}var options=getBaseShapeAttributes(wrapper);var shapeType;if(this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0].measureType){shapeType=this.pdfViewer.selectedItems.annotations[0].measureType;}else if(this.pdfViewer.selectedItems.formFields.length>0){shapeType=this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;}else{shapeType=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType;}this.getResizerColors(shapeType,options,currentSelector,t);this.getShapeSize(shapeType,options,currentSelector,t);options.strokeWidth=1;if(count!==undefined){options.id='segmentEnd_'+count;}options.centerX=(newPoint.x+t.tx)*t.scale;options.centerY=(newPoint.y+t.ty)*t.scale;options.angle=0;options.id=id;options.visible=visible;options["class"]=className;options.opacity=1;if(connected){options["class"]+=' e-connected';}if(canMask){options.visible=false;}options.x=newPoint.x*t.scale-options.width/2;options.y=newPoint.y*t.scale-options.height/2;var parentSvg=this.getParentSvg(selector,'selector');if(this.getShape(shapeType,currentSelector)==='Square'){this.svgRenderer.drawRectangle(canvas,options,id,undefined,true,parentSvg);}else if(this.getShape(shapeType,currentSelector)==='Circle'){this.svgRenderer.drawCircle(canvas,options,1);}};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotaion object.
     * @param {CircleAttributes} options - Specified the circle attributes value.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {Transforms} t - Specified the transforms value.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.getShapeSize=function(type,options,currentSelector,t){if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)*t.scale;}else{// eslint-disable-next-line
var annotationSelector=this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(annotationSelector.resizerSize)||annotationSelector.resizerSize===8?8:annotationSelector.resizerSize)*t.scale;if(type==='Line'&&this.pdfViewer.lineSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='LineWidthArrowHead'&&this.pdfViewer.arrowSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Distance'&&this.pdfViewer.distanceSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Image'&&this.pdfViewer.customStampSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if((type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Perimeter'&&this.pdfViewer.perimeterSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Area'&&this.pdfViewer.areaSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Volume'&&this.pdfViewer.volumeSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*t.scale;}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
options.radius=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)/2;// eslint-disable-next-line max-len
options.width=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*t.scale;// eslint-disable-next-line max-len
options.height=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize===8?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*t.scale;}}};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotation object.
     * @param {any} currentSelector - Specified the current selector value.
     * @returns {AnnotationSelectorSettingsModel} - Specified the annotation selector settings model.
     */ // eslint-disable-next-line
Drawing.prototype.getShape=function(type,currentSelector){// eslint-disable-next-line
var shapeType;{if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);shapeType=sf.base.isNullOrUndefined(annotationSelector.resizerShape)||annotationSelector.resizerShape==='Square'?'Square':annotationSelector.resizerShape;}else{// eslint-disable-next-line
var annotationSelector=this.pdfViewer.annotationSelectorSettings;shapeType=sf.base.isNullOrUndefined(annotationSelector.resizerShape)||annotationSelector.resizerShape==='Square'?'Square':annotationSelector.resizerShape;if(type==='Line'&&this.pdfViewer.lineSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape;}else if(type==='LineWidthArrowHead'&&this.pdfViewer.arrowSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape;}else if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape;}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape;}else if(type==='Distance'&&this.pdfViewer.distanceSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape;}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape;}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape;}else if(type==='Image'&&this.pdfViewer.customStampSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape;}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape;}else if((type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape;}else if(type==='Perimeter'&&this.pdfViewer.perimeterSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape;}else if(type==='Area'&&this.pdfViewer.areaSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape;}else if(type==='Volume'&&this.pdfViewer.volumeSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape;}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){shapeType=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape==='Square'?'Square':this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape;}}return shapeType;}};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotaion object.
     * @param {CircleAttributes} options - Specified the circle attributes value.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {Transforms} t - Specified the transforms value.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.getResizerColors=function(type,options,currentSelector,t){if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);options.stroke=sf.base.isNullOrUndefined(annotationSelector.resizerBorderColor)||annotationSelector.resizerBorderColor==='black'?'black':annotationSelector.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(annotationSelector.resizerFillColor)||annotationSelector.resizerFillColor==='#FF4081'?'#FF4081':annotationSelector.resizerFillColor;}else{// eslint-disable-next-line
var annotationSelector=this.pdfViewer.annotationSelectorSettings;options.stroke=sf.base.isNullOrUndefined(annotationSelector.resizerBorderColor)||annotationSelector.resizerBorderColor==='black'?'black':annotationSelector.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(annotationSelector.resizerFillColor)||annotationSelector.resizerFillColor==='#FF4081'?'#FF4081':annotationSelector.resizerFillColor;if(type==='Line'&&this.pdfViewer.lineSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='LineWidthArrowHead'&&this.pdfViewer.arrowSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Distance'&&this.pdfViewer.distanceSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Image'&&this.pdfViewer.customStampSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor;}else if((type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Perimeter'&&this.pdfViewer.perimeterSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Area'&&this.pdfViewer.areaSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Volume'&&this.pdfViewer.volumeSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor;}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){options.stroke=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor==='black'?'black':this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor;options.fill=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor==='#FF4081'?'#FF4081':this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor;}}};/**
     * @private
     * @param {DrawingElement} wrapper - Specified the drawing element.
     * @param {HTMLCanvasElement | SVGElement} canvas - Specified the canvas element.
     * @param {Transforms} transform - Specified the transform value.
     * @param {SelectorConstraints} selectorConstraints - Specified the selector constraints value.
     * @param {boolean} canMask - Specified the is mask or not.
     * @returns {void}
     */Drawing.prototype.renderRotateThumb=function(wrapper,canvas,transform,selectorConstraints,canMask){var element=new sf.drawings.PathElement();var newPoint;var top=wrapper.offsetY-wrapper.actualSize.height*wrapper.pivot.y;var left=wrapper.offsetX-wrapper.actualSize.width*wrapper.pivot.x;var pivotX=left+wrapper.pivot.x*wrapper.actualSize.width;var pivotY=top;pivotX=(pivotX+transform.tx)*transform.scale;pivotY=(pivotY+transform.ty)*transform.scale;newPoint={x:pivotX,y:pivotY-25};if(wrapper.rotateAngle!==0||wrapper.parentTransform!==0){var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,wrapper.rotateAngle+wrapper.parentTransform,(transform.tx+wrapper.offsetX)*transform.scale,(transform.ty+wrapper.offsetY)*transform.scale);newPoint=sf.drawings.transformPointByMatrix(matrix,newPoint);}var options=getBaseShapeAttributes(wrapper);options.stroke='black';options.strokeWidth=1;options.opacity=1;options.fill='#FF4081';options.centerX=newPoint.x;options.centerY=newPoint.y;options.radius=4;options.angle=0;options.visible=true;options["class"]='e-diagram-rotate-handle';options.id='rotateThumb';this.svgRenderer.drawCircle(canvas,options,sf.drawings.ThumbsConstraints.Rotate,{'aria-label':'Thumb to rotate the selected object'});};/**
     * @private
     * @param {DrawingElement} element - Specified the drawing element.
     * @param {HTMLCanvasElement | SVGElement} canvas - Specified the canvas element.
     * @param {ThumbsConstraints} constraints - Specified the thumbs constraints element.
     * @param {number} currentZoom - Specified the current zoom value.
     * @param {boolean} canMask - Specified the is mask or not.
     * @param {number} enableNode - Specified the node number.
     * @param {boolean} nodeConstraints - Specified the node constraints or not.
     * @param {boolean} isStamp - Specified is stamp or not.
     * @param {boolean} isSticky - Specified is sticky or not.
     * @param {boolean} isPath - Specified is path or not.
     * @param {boolean} isFreeText - Specified is free text or not.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the current selector settings value.
     * @returns {void}
     */Drawing.prototype.renderResizeHandle=function(element,canvas,constraints,currentZoom,canMask,enableNode,nodeConstraints,isStamp,isSticky,isPath,isFreeText,currentSelector){var left=element.offsetX-element.actualSize.width*element.pivot.x;var top=element.offsetY-element.actualSize.height*element.pivot.y;var height=element.actualSize.height;var width=element.actualSize.width;var transform={scale:currentZoom,tx:0,ty:0};if(isStamp){this.renderPivotLine(element,canvas,transform);this.renderRotateThumb(element,canvas,transform);}if(isFreeText){isStamp=true;}this.renderBorder(element,canvas,currentSelector,transform,enableNode,nodeConstraints,true,isSticky);var nodeWidth=element.actualSize.width*currentZoom;var nodeHeight=element.actualSize.height*currentZoom;// eslint-disable-next-line max-len
var shapeType=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;var allowPermission=false;// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line
var allowedInteraction=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isLock=this.pdfViewer.annotationModule.checkIsLockSettings(annotation);if((isLock||annotation.annotationSettings.isLock)&&this.getAllowedInteractions(allowedInteraction)){allowPermission=true;}var resizerLocation=this.getResizerLocation(shapeType,currentSelector);if(resizerLocation<1||resizerLocation>3){resizerLocation=3;}var isNodeShape=false;if(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ellipse'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Radius'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Rectangle'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ink')){isNodeShape=true;}if(!this.pdfViewer.viewerBase.checkSignatureFormField(element.id)&&!nodeConstraints&&!isSticky&&!isPath&&!allowPermission){if(isStamp||isNodeShape&&nodeWidth>=40&&nodeHeight>=40&&(resizerLocation===1||resizerLocation===3)){//Hide corners when the size is less than 40
this.renderCircularHandle('resizeNorthWest',element,left,top,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeNorthWest,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on top left side direction'},undefined,'e-pv-diagram-resize-handle e-northwest',currentSelector);this.renderCircularHandle('resizeNorthEast',element,left+width,top,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeNorthEast,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on top right side direction'},undefined,'e-pv-diagram-resize-handle e-northeast',currentSelector);this.renderCircularHandle('resizeSouthWest',element,left,top+height,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeSouthWest,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on bottom left side direction'},undefined,'e-pv-diagram-resize-handle e-southwest',currentSelector);this.renderCircularHandle('resizeSouthEast',element,left+width,top+height,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeSouthEast,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on bottom right side direction'},undefined,'e-pv-diagram-resize-handle e-southeast',currentSelector);}// eslint-disable-next-line max-len
if(!isStamp&&!isNodeShape||isNodeShape&&(resizerLocation===2||resizerLocation===3||!(nodeWidth>=40&&nodeHeight>=40)&&resizerLocation===1)){this.renderCircularHandle('resizeNorth',element,left+width/2,top,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeNorth,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on top side direction'},undefined,'e-pv-diagram-resize-handle e-north',currentSelector);this.renderCircularHandle('resizeSouth',element,left+width/2,top+height,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeSouth,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on bottom side direction'},undefined,'e-pv-diagram-resize-handle e-south',currentSelector);this.renderCircularHandle('resizeWest',element,left,top+height/2,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeWest,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on left side direction'},undefined,'e-pv-diagram-resize-handle e-west',currentSelector);this.renderCircularHandle('resizeEast',element,left+width,top+height/2,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeEast,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on right side direction'},undefined,'e-pv-diagram-resize-handle e-east',currentSelector);}}if(shapeType==='Textbox'||shapeType==='Checkbox'||shapeType==='RadioButton'||shapeType==='SignatureField'||shapeType==='InitialField'||shapeType==='DropdownList'||shapeType==='ListBox'||shapeType==='PasswordField'){this.renderCircularHandle('resizeNorth',element,left+width/2,top,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeNorth,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on top side direction'},undefined,'e-pv-diagram-resize-handle e-north',currentSelector);this.renderCircularHandle('resizeSouth',element,left+width/2,top+height,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeSouth,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on bottom side direction'},undefined,'e-pv-diagram-resize-handle e-south',currentSelector);this.renderCircularHandle('resizeWest',element,left,top+height/2,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeWest,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on left side direction'},undefined,'e-pv-diagram-resize-handle e-west',currentSelector);this.renderCircularHandle('resizeEast',element,left+width,top+height/2,canvas,true,constraints&sf.drawings.ThumbsConstraints.ResizeEast,transform,undefined,canMask,{'aria-label':'Thumb to resize the selected object on right side direction'},undefined,'e-pv-diagram-resize-handle e-east',currentSelector);}};// eslint-disable-next-line
Drawing.prototype.getAllowedInteractions=function(allowedInteraction){if(allowedInteraction&&allowedInteraction.length>0){for(var i=0;i<allowedInteraction.length;i++){if(allowedInteraction[0]!=='None'&&allowedInteraction[i]==='Resize'){return false;}}}return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} type - Specified the annotation base model.
     * @param {any} currentSelector - Specified the current selector value
     * @returns {AnnotationResizerLocation} - Returns the annotation resizer location value.
     */ // eslint-disable-next-line
Drawing.prototype.getResizerLocation=function(type,currentSelector){// eslint-disable-next-line
var resizerLocation;{if(currentSelector&&_typeof(currentSelector)!=='object'&&currentSelector!==''){// eslint-disable-next-line
var annotationSelector=JSON.parse(currentSelector);// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(annotationSelector.resizerLocation)||annotationSelector.resizerLocation===3?3:annotationSelector.resizerLocation;}else{// eslint-disable-next-line
var annotationSelector=this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(annotationSelector.resizerLocation)||annotationSelector.resizerLocation===3?3:annotationSelector.resizerLocation;if(type==='Line'&&this.pdfViewer.lineSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation;}else if(type==='LineWidthArrowHead'&&this.pdfViewer.arrowSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Rectangle'&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Ellipse'&&this.pdfViewer.circleSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Distance'){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Radius'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Stamp'&&this.pdfViewer.stampSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation;}else if(type==='FreeText'&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation;}else if((type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage')&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation;}else if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){// eslint-disable-next-line max-len
resizerLocation=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation)||this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation===3?3:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation;}}return resizerLocation;}};/**
     * @private
     * @param {DrawingElement} element - Specified the drawing element.
     * @param {HTMLCanvasElement | SVGAElement} canvas - Specified the canvas element.
     * @param {Transforms} transform - Specified the transform values.
     * @param {SelectorConstraints} selectorConstraints - Specified the selector constraints value.
     * @param {boolean} canMask - Specified is mask value or not.
     * @returns {void}
     */Drawing.prototype.renderPivotLine=function(element,canvas,transform,selectorConstraints,canMask){var wrapper=element;var dashArray='2,3';var visible=true;if(canMask){visible=false;}var options=getBaseShapeAttributes(wrapper,transform);options.fill='None';options.stroke='black';options.strokeWidth=1;options.dashArray=dashArray;options.visible=visible;var scale=transform.scale;options.x*=scale;options.y*=scale;options.width*=scale;options.height*=scale;options.id='pivotLine';options["class"]='e-diagram-pivot-line';var startPoint={x:wrapper.actualSize.width*wrapper.pivot.x*scale,y:-20};var endPoint={x:wrapper.actualSize.width*wrapper.pivot.x*scale,y:0};options.startPoint=startPoint;options.endPoint=endPoint;this.svgRenderer.drawLine(canvas,options);};/**
     * @private
     * @param {PdfAnnotationBaseModel} selector - Specified the annotation element.
     * @param {HTMLCanvasElement | SVGAElement} canvas - Specified the canvas element.
     * @param {SelectorConstraints} constraints - Specified the selector constraints value.
     * @param {Transforms} transform - Specified the transform values.
     * @param {boolean} connectedSource - Specified is connected source or not.
     * @param {boolean} connectedTarget - Specified is connected target or not.
     * @param {boolean} isSegmentEditing - Specified is segment editing or not.
     * @param {AnnotationSelectorSettingsModel} currentSelector - Specified the current selector value.
     * @returns {void}
     */Drawing.prototype.renderEndPointHandle=function(selector,canvas,constraints,transform,connectedSource,connectedTarget,isSegmentEditing,currentSelector){transform=transform||{tx:0,ty:0,scale:1};var sourcePoint=selector.sourcePoint;var targetPoint=selector.targetPoint;var wrapper=selector.wrapper;var i;for(i=0;i<selector.vertexPoints.length;i++){var segment=selector.vertexPoints[i];this.renderCircularHandle('segementThumb_'+(i+1),wrapper,segment.x,segment.y,canvas,true,constraints&sf.drawings.ThumbsConstraints.ConnectorSource,transform,connectedSource,null,null,i,null,currentSelector);}var leaderCount=0;if(selector.shapeAnnotationType==='Distance'){for(i=0;i<selector.wrapper.children.length;i++){var segment=selector.wrapper.children[i];var newPoint1=void 0;var angle=sf.drawings.Point.findAngle(selector.sourcePoint,selector.targetPoint);if(segment.id.indexOf('leader')>-1){var center=selector.wrapper.children[0].bounds.center;if(leaderCount===0){newPoint1={x:selector.sourcePoint.x,y:selector.sourcePoint.y-selector.leaderHeight};center=sourcePoint;}else{newPoint1={x:selector.targetPoint.x,y:selector.targetPoint.y-selector.leaderHeight};center=targetPoint;}var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,{x:newPoint1.x,y:newPoint1.y});this.renderCircularHandle('leaderThumb_'+(i+1),wrapper,rotatedPoint.x,rotatedPoint.y,canvas,true,constraints&sf.drawings.ThumbsConstraints.ConnectorSource,transform,connectedSource,null,null,i,null,currentSelector);leaderCount++;}}}};/**
     * @private
     * @returns {void}
     */Drawing.prototype.initSelectorWrapper=function(){var selectorModel=this.pdfViewer.selectedItems;// (selectorModel as Selector).init(this);
this.initWrapper(this);};/**
     * Initializes the UI of the container
     *
     * @param  {any} diagram - diagram element.
     * @returns {Container} - Returns the container element.
     */ // eslint-disable-next-line
Drawing.prototype.initWrapper=function(diagram){var container=new sf.drawings.Container();container.measureChildren=false;container.children=[];if(this.pdfViewer.selectedItems.formFields&&this.pdfViewer.selectedItems.formFields.length>0){for(var i=0;i<this.pdfViewer.selectedItems.formFields.length;i++){var node=diagram.pdfViewer.nameTable[this.pdfViewer.selectedItems.formFields[i].id];var wrapper=node.wrapper;container.children.push(wrapper);}}else if(this.pdfViewer.selectedItems.annotations){for(var i=0;i<this.pdfViewer.selectedItems.annotations.length;i++){if(!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[i])){var node=diagram.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[i].id];var wrapper=node.wrapper;container.children.push(wrapper);this.pdfViewer.selectedItems.wrapper=container;}}}this.pdfViewer.selectedItems.wrapper=container;return container;};/**
     * @private
     * @param {string[]} objArray - Specified the annotation object array.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {boolean} multipleSelection - Specified the multiple selection or not.
     * @param {boolean} preventUpdate - Specified the prevent update or not.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.select=function(objArray,currentSelector,multipleSelection,preventUpdate){var selectorModel=this.pdfViewer.selectedItems;for(var i=0;i<objArray.length;i++){// eslint-disable-next-line
var obj=this.pdfViewer.nameTable[objArray[i]];if(obj.formFieldAnnotationType&&this.pdfViewer.designerMode){selectorModel.formFields.push(obj);this.initSelectorWrapper();selectorModel.wrapper.children.push(obj.wrapper);this.renderSelector(obj.pageIndex,currentSelector,obj,true);}else if(obj&&!obj.formFieldAnnotationType){if(!(obj instanceof Selector)&&obj.wrapper.visible){// eslint-disable-next-line
var annotationSettings=void 0;if(obj.annotationSettings){annotationSettings=obj.annotationSettings;annotationSettings.isLock=JSON.parse(annotationSettings.isLock);}else if(!obj.formFieldAnnotationType){annotationSettings=this.pdfViewer.annotationModule.findAnnotationSettings(obj,true);obj.annotationSettings=annotationSettings;}var isLock=!obj.formFieldAnnotationType?annotationSettings.isLock:false;if(annotationSettings&&annotationSettings.isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions('Select',obj)){isLock=false;}if(!isLock){selectorModel.annotations.push(obj);this.initSelectorWrapper();selectorModel.wrapper.rotateAngle=selectorModel.rotateAngle=0;selectorModel.wrapper.children.push(obj.wrapper);if(!preventUpdate){this.renderSelector(obj.pageIndex,currentSelector,obj,true);}}}}}};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @param {number} pageIndex - Specified the page index value.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {PdfAnnotationBaseModel} helper - Specified the helper object.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.dragSelectedObjects=function(tx,ty,pageIndex,currentSelector,helper){var obj=this.pdfViewer.selectedItems;this.drag(obj,tx,ty,currentSelector,helper);return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @param {any} currentSelector - Specified the current selector value.
     * @param {PdfAnnotationBaseModel} helper - Specified the helper object.
     * @returns {void}
     */ // eslint-disable-next-line
Drawing.prototype.drag=function(obj,tx,ty,currentSelector,helper){if(obj instanceof Selector){if(obj.annotations.length){for(var _i=0,_a=obj.annotations;_i<_a.length;_i++){var node=_a[_i];this.drag(node,tx,ty,currentSelector,helper);this.renderSelector(node.pageIndex,currentSelector,helper);}}}else{this.dragAnnotation(obj.annotations[0],tx,ty);}};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @returns {void}
     */Drawing.prototype.dragAnnotation=function(obj,tx,ty){var oldValues={x:obj.wrapper.offsetX,y:obj.wrapper.offsetY};obj.wrapper.offsetX+=tx;obj.wrapper.offsetY+=ty;if(isLineShapes(obj)||obj.shapeAnnotationType==='Polygon'){if(obj.wrapper.children.length){var nodes=obj.wrapper.children;for(var i=0;i<nodes.length;i++){nodes[i].offsetX+=tx;nodes[i].offsetY+=ty;}}this.dragControlPoint(obj,tx,ty,true);}this.nodePropertyChange(obj,{bounds:{x:obj.wrapper.offsetX,y:obj.wrapper.offsetY}});obj.wrapper.measureChildren=false;var annotPageNumber=obj.pageIndex?obj.pageIndex:this.pdfViewer.selectedItems.annotations[0].pageIndex;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+annotPageNumber);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvas,annotPageNumber);};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @param {boolean} preventUpdate - Specified the prevent update or not.
     * @param {number} segmentNumber - Specified the segment value.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.dragControlPoint=function(obj,tx,ty,preventUpdate,segmentNumber){// eslint-disable-next-line
var connector=this.pdfViewer.nameTable[obj.id];for(var i=0;i<connector.vertexPoints.length;i++){connector.vertexPoints[i].x+=tx;connector.vertexPoints[i].y+=ty;}if(!preventUpdate){this.updateEndPoint(connector);}return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} connector - Specified the connector object.
     * @returns {void}
     */Drawing.prototype.updateEndPoint=function(connector){this.nodePropertyChange(connector,{vertexPoints:connector.vertexPoints});this.renderSelector(connector.pageIndex);};/**
     * @private
     * @param {PdfAnnotationBaseModel} actualObject - Specified the actual annotaion object.
     * @param {PdfAnnotationBaseModel} node - Specified the node annotation object.
     * @returns {void}
     */Drawing.prototype.nodePropertyChange=function(actualObject,node){var existingBounds=actualObject.wrapper.outerBounds;var existingInnerBounds=actualObject.wrapper.bounds;var i;if(node.bounds){if(node.bounds.width!==undefined){actualObject.bounds.width=actualObject.wrapper.width=node.bounds.width;}if(node.bounds.height!==undefined){actualObject.bounds.height=actualObject.wrapper.height=node.bounds.height;}if(node.bounds.x!==undefined){actualObject.bounds.x=node.bounds.x-actualObject.bounds.width*0.5;actualObject.wrapper.offsetX=node.bounds.x;}if(node.bounds.y!==undefined){actualObject.bounds.y=node.bounds.y-actualObject.bounds.height*0.5;actualObject.wrapper.offsetY=node.bounds.y;}if(node.leaderHeight!==undefined){actualObject.leaderHeight=node.leaderHeight;this.updateConnector(actualObject,actualObject.vertexPoints);}if(actualObject.wrapper.children.length){var children=actualObject.wrapper.children;for(var i_1=0;i_1<children.length;i_1++){if(children[i_1].id){var names=children[i_1].id.split('_');if(names.length&&(names.indexOf('perimeter')>-1||names.indexOf('radius')>-1)){this.setNodePosition(children[i_1],actualObject);}else if(names.length&&names.indexOf('srcDec')>-1){children[i_1].offsetX=actualObject.vertexPoints[0].x;children[i_1].offsetY=actualObject.vertexPoints[0].y;}else if(names.length&&names.indexOf('tarDec')>-1){children[i_1].offsetX=actualObject.vertexPoints[actualObject.vertexPoints.length-1].x;children[i_1].offsetY=actualObject.vertexPoints[actualObject.vertexPoints.length-1].y;}else if(names.length&&names.indexOf('stamp')>-1){// eslint-disable-next-line
var ratio=0;if(actualObject.wrapper.width!==undefined&&actualObject.wrapper.height!==undefined){ratio=20;}if(actualObject.isDynamicStamp){children[i_1].width=actualObject.bounds.width-ratio;children[i_1].height=actualObject.bounds.height/2-ratio;// eslint-disable-next-line
var element=children[1];// eslint-disable-next-line
var annotationSettings=this.pdfViewer.stampSettings?this.pdfViewer.stampSettings:this.pdfViewer.annotationSettings;// eslint-disable-next-line max-len
if(annotationSettings&&(annotationSettings.maxHeight||annotationSettings.maxWidth)&&actualObject.bounds.height>60){if(ratio!=0){element.style.fontSize=actualObject.bounds.width/ratio;}else{element.style.fontSize=actualObject.wrapper.bounds.width/20;}}else{if(ratio!=0){element.style.fontSize=this.fontSizeCalculation(actualObject,element,actualObject.bounds.width-20);}else{element.style.fontSize=this.fontSizeCalculation(actualObject,element,actualObject.wrapper.bounds.width-20);}}if(ratio!==0){element.margin.bottom=-(children[i_1].height/2);}}else{children[i_1].width=actualObject.bounds.width-ratio;children[i_1].height=actualObject.bounds.height-ratio;}children[i_1].offsetX=actualObject.wrapper.offsetX;children[i_1].offsetY=actualObject.wrapper.offsetX;children[i_1].isDirt=true;}}}}}if(node.sourceDecoraterShapes!==undefined){actualObject.sourceDecoraterShapes=node.sourceDecoraterShapes;this.updateConnector(actualObject,actualObject.vertexPoints);}if(node.isReadonly!==undefined&&actualObject.shapeAnnotationType==='FreeText'){actualObject.isReadonly=node.isReadonly;}if(node.taregetDecoraterShapes!==undefined){actualObject.taregetDecoraterShapes=node.taregetDecoraterShapes;this.updateConnector(actualObject,actualObject.vertexPoints);}if(node.fillColor!==undefined){actualObject.fillColor=node.fillColor;actualObject.wrapper.children[0].style.fill=node.fillColor;if((actualObject.enableShapeLabel||actualObject.measureType)&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_2=0;i_2<children.length;i_2++){if(children[i_2].textNodes){if(actualObject.enableShapeLabel){actualObject.labelFillColor=node.fillColor;children[i_2].style.fill=node.fillColor;}if(actualObject.measureType){children[i_2].style.fill=node.fillColor;}}}}}if(actualObject.enableShapeLabel&&node.labelFillColor!==undefined){if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_3=0;i_3<children.length;i_3++){if(children[i_3].textNodes){actualObject.labelFillColor=node.labelFillColor;children[i_3].style.fill=node.labelFillColor;}}}}if(node.opacity!==undefined){if(actualObject.shapeAnnotationType==='Stamp'||actualObject.shapeAnnotationType==='FreeText'){actualObject.wrapper.children[1].style.opacity=node.opacity;if(actualObject.wrapper.children[2]){actualObject.wrapper.children[2].style.opacity=node.opacity;}actualObject.opacity=node.opacity;}else{if(actualObject.shapeAnnotationType==='StickyNotes'){// eslint-disable-next-line
this.pdfViewer.nameTable[actualObject.annotName].wrapper.children[0].style.opacity=node.opacity;}actualObject.opacity=node.opacity;}actualObject.wrapper.children[0].style.opacity=node.opacity;if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_4=0;i_4<children.length;i_4++){if(children[i_4].textNodes){children[i_4].style.opacity=node.labelOpacity;}}}}if(actualObject.enableShapeLabel&&node.labelOpacity!==undefined){if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_5=0;i_5<children.length;i_5++){if(children[i_5].textNodes){children[i_5].style.opacity=node.labelOpacity;}}}}if(node.rotateAngle!==undefined){actualObject.rotateAngle=node.rotateAngle;actualObject.wrapper.rotateAngle=node.rotateAngle;}if(node.strokeColor!==undefined){actualObject.strokeColor=node.strokeColor;actualObject.wrapper.children[0].style.strokeColor=node.strokeColor;}if(node.fontColor!==undefined){actualObject.fontColor=node.fontColor;if(actualObject.shapeAnnotationType==='FreeText'&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;children[1].style.color=node.fontColor;if(actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Center';}else{children[1].horizontalAlignment='Auto';}}if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_6=0;i_6<children.length;i_6++){if(children[i_6].textNodes){children[i_6].style.color=node.fontColor;}}}}if(node.fontFamily!==undefined){actualObject.fontFamily=node.fontFamily;if(actualObject.shapeAnnotationType==='FreeText'&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;children[1].style.fontFamily=node.fontFamily;}if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_7=0;i_7<children.length;i_7++){if(children[i_7].textNodes){children[i_7].style.fontFamily=node.fontFamily;}}}}if(node.fontSize!==undefined){actualObject.fontSize=node.fontSize;if((actualObject.shapeAnnotationType==='FreeText'||actualObject.shapeAnnotationType==='SignatureText')&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;children[1].style.fontSize=node.fontSize;if(actualObject.shapeAnnotationType==='SignatureText'){actualObject.wrapper.children[1].bounds.width=actualObject.bounds.width;actualObject.wrapper.children[1].desiredSize.width=actualObject.bounds.width;actualObject.wrapper.children[1].actualSize.width=actualObject.bounds.width;children[1].horizontalAlignment='Center';children[1].verticalAlignment='Center';children[1].setOffsetWithRespectToBounds(0,0,'Absolute');}}if(actualObject.enableShapeLabel&&actualObject.wrapper&&actualObject.wrapper.children){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_8=0;i_8<children.length;i_8++){if(children[i_8].textNodes){children[i_8].style.fontSize=node.fontSize;}}}}if(node.font!==undefined){if(actualObject.shapeAnnotationType==='FreeText'&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;if(node.font.isBold!==undefined){children[1].style.bold=node.font.isBold;actualObject.font.isBold=node.font.isBold;}if(node.font.isItalic!==undefined){children[1].style.italic=node.font.isItalic;actualObject.font.isItalic=node.font.isItalic;}if(node.font.isUnderline!==undefined){if(node.font.isUnderline){actualObject.font.isStrikeout=false;}if(node.font.isUnderline===true){children[1].style.textDecoration='Underline';}else{if(!node.font.isStrikeout){children[1].style.textDecoration='None';}}actualObject.font.isUnderline=node.font.isUnderline;}if(node.font.isStrikeout!==undefined){if(node.font.isStrikeout){actualObject.font.isUnderline=false;}if(node.font.isStrikeout===true){children[1].style.textDecoration='LineThrough';}else{if(!node.font.isUnderline){children[1].style.textDecoration='None';}}actualObject.font.isStrikeout=node.font.isStrikeout;}}}if(node.textAlign!==undefined){actualObject.textAlign=node.textAlign;if(actualObject.shapeAnnotationType==='FreeText'&&actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;children[1].style.textAlign=node.textAlign;if(children[1].childNodes.length===1){if(actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0,0,null);}else if(actualObject.textAlign==='Right'){children[1].horizontalAlignment='Right';children[1].setOffsetWithRespectToBounds(0.97,0,null);}else if(actualObject.textAlign==='Left'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0,0,null);}else if(actualObject.textAlign==='Center'){children[1].horizontalAlignment='Center';children[1].setOffsetWithRespectToBounds(0.46,0,null);}}else if(children[1].childNodes.length>1&&actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Center';}else{children[1].horizontalAlignment='Auto';}}}if(node.thickness!==undefined){actualObject.thickness=node.thickness;actualObject.wrapper.children[0].style.strokeWidth=node.thickness;}if(node.borderDashArray!==undefined){actualObject.borderDashArray=node.borderDashArray;actualObject.wrapper.children[0].style.strokeDashArray=node.borderDashArray;}if(node.borderStyle!==undefined){actualObject.borderStyle=node.borderStyle;}if(node.author!==undefined){actualObject.author=node.author;}if(node.modifiedDate!==undefined){actualObject.modifiedDate=node.modifiedDate;}if(node.subject!==undefined){actualObject.subject=node.subject;}if(node.vertexPoints!==undefined){actualObject.vertexPoints=node.vertexPoints;// eslint-disable-next-line
this.pdfViewer.nameTable[actualObject.id].vertexPoints=node.vertexPoints;this.updateConnector(actualObject,node.vertexPoints);}if(node.leaderHeight!==undefined&&actualObject.shapeAnnotationType!=='Polygon'){actualObject.leaderHeight=node.leaderHeight;this.updateConnector(actualObject,actualObject.vertexPoints);}if(node.notes!==undefined){actualObject.notes=node.notes;}if(node.annotName!==undefined){actualObject.annotName=node.annotName;}if(actualObject.shapeAnnotationType==='Distance'){for(i=0;i<actualObject.wrapper.children.length;i++){// eslint-disable-next-line
var segment=actualObject.wrapper.children[i];// eslint-disable-next-line
var points=getConnectorPoints(actualObject);if(segment.id.indexOf('leader1')>-1){this.setLineDistance(actualObject,points,segment,false);}if(segment.id.indexOf('leader2')>-1){this.setLineDistance(actualObject,points,segment,true);}}this.updateConnector(actualObject,actualObject.vertexPoints);}if(actualObject.shapeAnnotationType==='Polygon'&&node.vertexPoints){actualObject.data=getPolygonPath(actualObject.vertexPoints);// eslint-disable-next-line
var path=actualObject.wrapper.children[0];path.data=actualObject.data;path.canMeasurePath=true;}if(isLineShapes(actualObject)){for(var i_9=0;i_9<actualObject.wrapper.children.length;i_9++){// eslint-disable-next-line
var childElement=actualObject.wrapper.children[i_9];if(!childElement.textNodes){setElementStype(actualObject,actualObject.wrapper.children[i_9]);}if(actualObject.enableShapeLabel===true){if(actualObject.wrapper.children[i_9]instanceof sf.drawings.TextElement){actualObject.wrapper.children[i_9].style.fill=actualObject.labelFillColor;}if(actualObject.wrapper.children[i_9]instanceof sf.drawings.PathElement&&actualObject.measureType==='Perimeter'){actualObject.wrapper.children[i_9].style.fill='transparent';}}else{if(actualObject.wrapper.children[i_9]instanceof sf.drawings.PathElement&&actualObject.measureType==='Perimeter'||actualObject.wrapper.children[i_9]instanceof sf.drawings.TextElement){actualObject.wrapper.children[i_9].style.fill='transparent';}}}}if(actualObject&&(actualObject.shapeAnnotationType==='FreeText'||actualObject.enableShapeLabel===true)){if(actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;for(var i_10=0;i_10<children.length;i_10++){if(children[i_10].textNodes){if(actualObject.shapeAnnotationType==='FreeText'){if(node.dynamicText){children[i_10].content=node.dynamicText;actualObject.dynamicText=node.dynamicText;}else{children[i_10].content=actualObject.dynamicText;}children[i_10].width=actualObject.bounds.width;}else if(actualObject.enableShapeLabel===true&&actualObject.measureType){if(node.labelContent){children[i_10].content=node.labelContent;actualObject.labelContent=node.labelContent;}else{children[i_10].content=actualObject.labelContent;}actualObject.notes=children[i_10].content;}else if(actualObject.enableShapeLabel===true){if(node.labelContent){children[i_10].content=node.labelContent;actualObject.labelContent=node.labelContent;}else{children[i_10].content=actualObject.labelContent;}actualObject.notes=children[i_10].content;}children[i_10].isDirt=true;}/** set text node width less than the parent */}}}actualObject.wrapper.measure(new sf.drawings.Size(actualObject.wrapper.bounds.width,actualObject.wrapper.bounds.height));actualObject.wrapper.arrange(actualObject.wrapper.desiredSize);if(actualObject&&actualObject.formFieldAnnotationType){if(actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children[0];children.actualSize.width=actualObject.wrapper.desiredSize.width;children.actualSize.height=actualObject.wrapper.desiredSize.height;}}if(actualObject&&actualObject.shapeAnnotationType==='FreeText'&&actualObject.subject==='Text Box'){if(actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;if(children[1].childNodes.length>1&&actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Center';}else if(children[1].childNodes.length===1){if(actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0,0,null);}else if(actualObject.textAlign==='Right'){children[1].horizontalAlignment='Right';children[1].setOffsetWithRespectToBounds(0.97,0,null);}else if(actualObject.textAlign==='Left'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0,0,null);}else if(actualObject.textAlign==='Center'){children[1].horizontalAlignment='Center';children[1].setOffsetWithRespectToBounds(0.46,0,null);}}for(var i_11=0;i_11<children.length;i_11++){if(children[i_11].textNodes&&children[i_11].textNodes.length>0){children[i_11].isDirt=true;var childNodeHeight=children[i_11].textNodes.length*children[i_11].textNodes[0].dy;var heightDiff=actualObject.bounds.height-childNodeHeight;if(heightDiff>0&&heightDiff<children[i_11].textNodes[0].dy){childNodeHeight=childNodeHeight+children[i_11].textNodes[0].dy;}if(childNodeHeight>actualObject.bounds.height){var contString='';for(var index=0;index<children[i_11].textNodes.length;index++){// eslint-disable-next-line
var childHeight=children[i_11].textNodes[0].dy*(index+1);// eslint-disable-next-line
childHeight=childHeight;contString=contString+children[i_11].textNodes[index].text;}if(heightDiff<0){children[i_11].content=contString;}}}/** set text node width less than the parent */children[i_11].width=actualObject.bounds.width;}}actualObject.wrapper.measure(new sf.drawings.Size(actualObject.wrapper.bounds.width,actualObject.wrapper.bounds.height));actualObject.wrapper.arrange(actualObject.wrapper.desiredSize);}this.pdfViewer.renderDrawing(undefined,actualObject.pageIndex);if(actualObject&&actualObject.shapeAnnotationType==='FreeText'){if(actualObject.wrapper&&actualObject.wrapper.children&&actualObject.wrapper.children.length){// eslint-disable-next-line
var children=actualObject.wrapper.children;if(children[1].childNodes.length===1&&actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Left';children[1].setOffsetWithRespectToBounds(0.5,0,null);}else if(children[1].childNodes.length>1&&actualObject.textAlign==='Justify'){children[1].horizontalAlignment='Center';children[1].setOffsetWithRespectToBounds(0,0,null);}}}};Drawing.prototype.fontSizeCalculation=function(actualObject,element,boundsWidth){var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+actualObject.pageIndex);var context=canvas.getContext("2d");var textwidth=0;var newsize=0;var fontStyle='';if(element.style.italic&&element.style.bold){fontStyle='bold italic ';}else if(element.style.bold){fontStyle='bold ';}else if(element.style.italic){fontStyle='italic ';}while(boundsWidth>textwidth){context.font=fontStyle+newsize+'px '+element.style.fontFamily;textwidth=context.measureText(actualObject.dynamicText).width;newsize+=0.1;}newsize-=0.1;return newsize;};// eslint-disable-next-line
Drawing.prototype.setLineDistance=function(actualObject,points,segment,leader){var node1;if(leader){node1=initLeader(actualObject,points[1],points[0],leader);}else{node1=initLeader(actualObject,points[0],points[1],leader);}segment.data=node1.data;segment.offsetX=node1.offsetX;segment.offsetY=node1.offsetY;segment.rotateAngle=node1.rotateAngle;segment.width=node1.width;segment.height=node1.height;segment.pivot=node1.pivot;segment.canMeasurePath=true;segment.isDirt=true;};/**
     * @private
     * @param {number} sx - Specified the sx value.
     * @param {number} sy - Specified the sy value.
     * @param {PointModel} pivot - Specified the pivot value.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.scaleSelectedItems=function(sx,sy,pivot){var obj=this.pdfViewer.selectedItems;return this.scale(obj,sx,sy,pivot);};/**
     * @private
     * @param {PdfAnnotationBaseModel | SelectorModel} obj - Specified the annotaion object.
     * @param {number} sx - Specified the sx value.
     * @param {number} sy - Specified the sy value.
     * @param {PointModel} pivot - Specified the pivot value.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.scale=function(obj,sx,sy,pivot){var checkBoundaryConstraints=true;if(obj instanceof Selector){if(obj.annotations&&obj.annotations.length){for(var _i=0,_a=obj.annotations;_i<_a.length;_i++){var node=_a[_i];checkBoundaryConstraints=this.scaleAnnotation(node,sx,sy,pivot,obj);}}else if(obj.formFields&&obj.formFields.length){for(var _b=0,_c=obj.formFields;_b<_c.length;_b++){var node=_c[_b];checkBoundaryConstraints=this.scaleAnnotation(node,sx,sy,pivot,obj);}}}else{checkBoundaryConstraints=this.scaleAnnotation(obj.annotations[0],sx,sy,pivot,undefined);}return checkBoundaryConstraints;};/**
     * @private
     * @param {number} sw - Specified the sw value.
     * @param {number} sh - Specified the sh value.
     * @param {PointModel} pivot - Specified the pivot value.
     * @param {IElement} obj - Specified the annotation object.
     * @param {DrawingElement} element - Specified the annotation element.
     * @param {IElement} refObject - Specified the annotation reference object.
     * @returns {void}
     */Drawing.prototype.scaleObject=function(sw,sh,pivot,obj,element,refObject){sw=sw<0?1:sw;sh=sh<0?1:sh;if(sw!==1||sh!==1){var width=void 0;var height=void 0;if(!isLineShapes(obj)){var node=obj;var isResize=void 0;var bound=void 0;width=node.wrapper.actualSize.width*sw;height=node.wrapper.actualSize.height*sh;if(isResize){width=Math.max(width,bound.right-node.wrapper.bounds.x);height=Math.max(height,bound.bottom-node.wrapper.bounds.y);}sw=width/node.wrapper.actualSize.width;sh=height/node.wrapper.actualSize.height;}var matrix=sf.drawings.identityMatrix();if(!refObject){refObject=obj;}var refWrapper=refObject.wrapper;sf.drawings.rotateMatrix(matrix,-refWrapper.rotateAngle,pivot.x,pivot.y);sf.drawings.scaleMatrix(matrix,sw,sh,pivot.x,pivot.y);sf.drawings.rotateMatrix(matrix,refWrapper.rotateAngle,pivot.x,pivot.y);if(!isLineShapes(obj)){var node=obj;var newPosition=sf.drawings.transformPointByMatrix(matrix,{x:node.wrapper.offsetX,y:node.wrapper.offsetY});if(width>0){node.wrapper.width=width;node.wrapper.offsetX=newPosition.x;}if(height>0){node.wrapper.height=height;node.wrapper.offsetY=newPosition.y;}this.nodePropertyChange(obj,{bounds:{width:node.wrapper.width,height:node.wrapper.height,x:node.wrapper.offsetX,y:node.wrapper.offsetY}});obj.wrapper.measureChildren=false;var annotPageNumber=obj.pageIndex?obj.pageIndex:this.pdfViewer.selectedItems.annotations[0].pageIndex;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+annotPageNumber);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvas,annotPageNumber);}}};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotaion object.
     * @param {number} sw - Specified the sw value.
     * @param {number} sh - Specified the sh value.
     * @param {PointModel} pivot - Specified the pivot value.
     * @param {IElement} refObject - Specified the reference object.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.scaleAnnotation=function(obj,sw,sh,pivot,refObject){// eslint-disable-next-line
var node=this.pdfViewer.nameTable[obj.id];var element=node.wrapper;if(!refObject){refObject=obj;}var refWrapper=refObject.wrapper;var x=refWrapper.offsetX-refWrapper.actualSize.width*refWrapper.pivot.x;var y=refWrapper.offsetY-refWrapper.actualSize.height*refWrapper.pivot.y;var refPoint=this.getShapePoint(x,y,refWrapper.actualSize.width,refWrapper.actualSize.height,refWrapper.rotateAngle,refWrapper.offsetX,refWrapper.offsetY,pivot);if(element.actualSize.width!==undefined&&element.actualSize.height!==undefined){this.scaleObject(sw,sh,refPoint,node,element,refObject);}// eslint-disable-next-line max-len
var constraints=this.checkBoundaryConstraints(undefined,undefined,obj.pageIndex,obj.wrapper.bounds);if(!constraints){this.scaleObject(1/sw,1/sh,refPoint,node,element,refObject);}return constraints;};/**
     * @private
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the ty value.
     * @param {number} pageIndex - Specified the page index value.
     * @param {Rect} nodeBounds - Specified the node bounds value.
     * @param {boolean} isStamp - Specified the annotation is stamp or not.
     * @param {boolean} isSkip - Specified the annotaion is skip or not.
     * @returns {boolean} - Returns true or false.
     */ // eslint-disable-next-line max-len
Drawing.prototype.checkBoundaryConstraints=function(tx,ty,pageIndex,nodeBounds,isStamp,isSkip){var selectorBounds=!nodeBounds?this.pdfViewer.selectedItems.wrapper.bounds:undefined;var bounds=nodeBounds;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);var heightDifference=10;if(canvas){var width=canvas.clientWidth/this.pdfViewer.viewerBase.getZoomFactor();var height=canvas.clientHeight/this.pdfViewer.viewerBase.getZoomFactor();var right=(nodeBounds?bounds.right:selectorBounds.right)+(tx||0);var left=(nodeBounds?bounds.left:selectorBounds.left)+(tx||0);var top_1=(nodeBounds?bounds.top:selectorBounds.top)+(ty||0);var bottom=(nodeBounds?bounds.bottom:selectorBounds.bottom)+(ty||0);if(isStamp){heightDifference=50;if(this.pdfViewer.viewerBase.eventArgs&&this.pdfViewer.viewerBase.eventArgs.source){if(this.RestrictStamp(this.pdfViewer.viewerBase.eventArgs.source)){return false;}}}if(right<=width-10&&left>=10&&bottom<=height-10&&top_1>=heightDifference||isSkip){return true;}}return false;};// eslint-disable-next-line
Drawing.prototype.RestrictStamp=function(source){// eslint-disable-next-line max-len
if(source&&source.pageIndex!==undefined&&this.pdfViewer.viewerBase.activeElements&&source.pageIndex!==this.pdfViewer.viewerBase.activeElements.activePageID){return true;}return false;};/**
     * @private
     * @param {DrawingElement} shapeElement - Specified the shape element.
     * @returns {Rect} - Returns the rectangle object.
     */Drawing.prototype.getShapeBounds=function(shapeElement){var shapeBounds=new sf.drawings.Rect();var shapeCorners=sf.drawings.cornersPointsBeforeRotation(shapeElement);var shapeMiddleLeft=shapeCorners.middleLeft;var shapeTopCenter=shapeCorners.topCenter;var shapeBottomCenter=shapeCorners.bottomCenter;var shapeMiddleRight=shapeCorners.middleRight;var shapeTopLeft=shapeCorners.topLeft;var shapeTopRight=shapeCorners.topRight;var shapeBottomLeft=shapeCorners.bottomLeft;var shapeBottomRight=shapeCorners.bottomRight;shapeElement.corners={topLeft:shapeTopLeft,topCenter:shapeTopCenter,topRight:shapeTopRight,middleLeft:shapeMiddleLeft,middleRight:shapeMiddleRight,bottomLeft:shapeBottomLeft,bottomCenter:shapeBottomCenter,bottomRight:shapeBottomRight};if(shapeElement.rotateAngle!==0||shapeElement.parentTransform!==0){var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,shapeElement.rotateAngle+shapeElement.parentTransform,shapeElement.offsetX,shapeElement.offsetY);shapeElement.corners.topLeft=shapeTopLeft=sf.drawings.transformPointByMatrix(matrix,shapeTopLeft);shapeElement.corners.topCenter=shapeTopCenter=sf.drawings.transformPointByMatrix(matrix,shapeTopCenter);shapeElement.corners.topRight=shapeTopRight=sf.drawings.transformPointByMatrix(matrix,shapeTopRight);shapeElement.corners.middleLeft=shapeMiddleLeft=sf.drawings.transformPointByMatrix(matrix,shapeMiddleLeft);shapeElement.corners.middleRight=shapeMiddleRight=sf.drawings.transformPointByMatrix(matrix,shapeMiddleRight);shapeElement.corners.bottomLeft=shapeBottomLeft=sf.drawings.transformPointByMatrix(matrix,shapeBottomLeft);shapeElement.corners.bottomCenter=shapeBottomCenter=sf.drawings.transformPointByMatrix(matrix,shapeBottomCenter);shapeElement.corners.bottomRight=shapeBottomRight=sf.drawings.transformPointByMatrix(matrix,shapeBottomRight);//Set corners based on rotate angle
}shapeBounds=sf.drawings.Rect.toBounds([shapeTopLeft,shapeTopRight,shapeBottomLeft,shapeBottomRight]);shapeElement.corners.left=shapeBounds.left;shapeElement.corners.right=shapeBounds.right;shapeElement.corners.top=shapeBounds.top;shapeElement.corners.bottom=shapeBounds.bottom;shapeElement.corners.center=shapeBounds.center;shapeElement.corners.width=shapeBounds.width;shapeElement.corners.height=shapeBounds.height;return shapeBounds;};/**
     * @private
     * @param {number} x - Specified the x value.
     * @param {number} y - Specified the y value.
     * @param {number} w - Specified the w value.
     * @param {number} h - Specified the h value.
     * @param {number} angle - Specified the angle value.
     * @param {number} offsetX - Specified the offset x value.
     * @param {number} offsetY - Specified the offset y value.
     * @param {PointModel} cornerPoint - Specified the corner point value.
     * @returns {PointModel} - Returns the point model.
     */Drawing.prototype.getShapePoint=function(x,y,w,h,angle,offsetX,offsetY,cornerPoint){var pivotPoint={x:0,y:0};var transformMatrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(transformMatrix,angle,offsetX,offsetY);switch(cornerPoint.x){case 1:switch(cornerPoint.y){case 1:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w,y:y+h});break;case 0:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w,y:y});break;case 0.5:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w,y:y+h/2});break;}break;case 0:switch(cornerPoint.y){case 0.5:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x,y:y+h/2});break;case 1:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x,y:y+h});break;case 0:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x,y:y});break;}break;case 0.5:switch(cornerPoint.y){case 0:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w/2,y:y});break;case 0.5:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w/2,y:y+h/2});break;case 1:pivotPoint=sf.drawings.transformPointByMatrix(transformMatrix,{x:x+w/2,y:y+h});break;}break;}return{x:pivotPoint.x,y:pivotPoint.y};};/**
     * @private
     * @param {string} endPoint - Specified the end point value.
     * @param {IElement} obj - Specified the annotaion object.
     * @param {PointModel} point - Specified the annotation points.
     * @param {PointModel} segment - Specified the annotaion segment.
     * @param {IElement} target - Specified the target element.
     * @param {string} targetPortId - Specified the target port id.
     * @param {any} currentSelector - Specified the current selector value.
     * @returns {boolean} - Returns true or false.
     */ // eslint-disable-next-line
Drawing.prototype.dragConnectorEnds=function(endPoint,obj,point,segment,target,targetPortId,currentSelector){var selectorModel;var connector;var tx;var ty;if(obj instanceof Selector){selectorModel=obj;connector=selectorModel.annotations[0];}else{connector=obj;}point={x:point.x/this.pdfViewer.viewerBase.getZoomFactor(),y:point.y/this.pdfViewer.viewerBase.getZoomFactor()};if(this.checkBoundaryConstraints(undefined,undefined,connector.pageIndex,connector.wrapper.bounds)){if(connector.shapeAnnotationType==='Distance'){var leader=isLeader(connector,endPoint);if(endPoint==='Leader0'){if(this.pdfViewer.viewerBase.tool instanceof LineTool){connector.vertexPoints[0].x=point.x;connector.vertexPoints[0].y=point.y;}else{tx=point.x-leader.point.x;ty=point.y-leader.point.y;connector.vertexPoints[0].x+=tx;connector.vertexPoints[0].y+=ty;}}else if(endPoint==='Leader1'){var length_2=connector.vertexPoints.length-1;if(this.pdfViewer.viewerBase.tool instanceof LineTool){connector.vertexPoints[length_2].x=point.x;connector.vertexPoints[length_2].y=point.y;}else{tx=point.x-leader.point.x;ty=point.y-leader.point.y;connector.vertexPoints[length_2].x+=tx;connector.vertexPoints[length_2].y+=ty;}}else{// eslint-disable-next-line
var angle=sf.drawings.Point.findAngle(connector.sourcePoint,connector.targetPoint);// eslint-disable-next-line
var center=obj.wrapper.children[0].bounds.center;// eslint-disable-next-line
var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,-angle,center.x,center.y);// eslint-disable-next-line
var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,{x:point.x,y:point.y});if(endPoint.split('_')[0]==='ConnectorSegmentPoint'){// eslint-disable-next-line
var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,-angle,center.x,center.y);// eslint-disable-next-line
var rotatedPoint1=sf.drawings.transformPointByMatrix(matrix,connector.vertexPoints[0]);// eslint-disable-next-line
var rotatedPoint2=sf.drawings.transformPointByMatrix(matrix,connector.vertexPoints[connector.vertexPoints.length-1]);ty=rotatedPoint.y-rotatedPoint1.y;if(connector.leaderHeight===0&&connector.leaderHeight!=null){connector.leaderHeight=this.pdfViewer.distanceSettings.leaderLength;}else{connector.leaderHeight+=ty;rotatedPoint1.y+=ty;rotatedPoint2.y+=ty;// eslint-disable-next-line
var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,center.x,center.y);connector.vertexPoints[0]=sf.drawings.transformPointByMatrix(matrix,rotatedPoint1);connector.vertexPoints[connector.vertexPoints.length-1]=sf.drawings.transformPointByMatrix(matrix,rotatedPoint2);}}}}else if(endPoint.split('_')[0]==='ConnectorSegmentPoint'){var i=Number(endPoint.split('_')[1]);tx=point.x-connector.vertexPoints[i].x;ty=point.y-connector.vertexPoints[i].y;connector.vertexPoints[i].x+=tx;connector.vertexPoints[i].y+=ty;if(connector.vertexPoints.length>2&&obj.measureType!=='Perimeter'){if(parseFloat(endPoint.split('_')[1])===0){connector.vertexPoints[connector.vertexPoints.length-1].x+=tx;connector.vertexPoints[connector.vertexPoints.length-1].y+=ty;}else if(parseFloat(endPoint.split('_')[1])===connector.vertexPoints.length-1){connector.vertexPoints[0].x+=tx;connector.vertexPoints[0].y+=ty;}}}this.nodePropertyChange(connector,{vertexPoints:connector.vertexPoints});this.renderSelector(connector.pageIndex,currentSelector);}this.pdfViewer.renderDrawing();return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @param {number} tx - Specified the tx value.
     * @param {number} ty - Specified the y value.
     * @param {number} i - Specified the index value.
     * @returns {boolean} - Returns true or false.
     */Drawing.prototype.dragSourceEnd=function(obj,tx,ty,i){// eslint-disable-next-line
var connector=this.pdfViewer.nameTable[obj.id];connector.vertexPoints[i].x+=tx;connector.vertexPoints[i].y+=ty;this.pdfViewer.renderDrawing();return true;};/**
     * @private
     * @param {PdfAnnotationBaseModel} connector - Specified the connector object.
     * @param {PointModel[]} points - Specified the points value.
     * @returns {void}
     */Drawing.prototype.updateConnector=function(connector,points){var targetPoint;connector.vertexPoints=points;updateSegmentElement(connector,points,connector.wrapper.children[0]);var srcPoint=connector.sourcePoint;var anglePoint=connector.vertexPoints;//  points = this.clipDecorators(connector, points);
var element=connector.wrapper.children[0];element.canMeasurePath=true;for(var i=0;i<connector.wrapper.children.length;i++){element=connector.wrapper.children[i];if(connector.shapeAnnotationType!=='Polygon'){if(element.id.indexOf('srcDec')>-1){updateDecoratorElement(connector,element,points[0],anglePoint[1],true);}targetPoint=connector.targetPoint;if(element.id.indexOf('tarDec')>-1){updateDecoratorElement(connector,element,points[points.length-1],anglePoint[anglePoint.length-2],false);}}}};/**
     * @private
     * @returns {Object} - Returns the object.
     */Drawing.prototype.copy=function(){this.pdfViewer.clipboardData.pasteIndex=1;this.pdfViewer.clipboardData.clipObject=this.copyObjects();return this.pdfViewer.clipboardData.clipObject;};/**
     * @private
     * @returns {Object[]} - Returns the object array.
     */Drawing.prototype.copyObjects=function(){var selectedItems=[];var obj=[];this.pdfViewer.clipboardData.childTable={};if(this.pdfViewer.selectedItems.annotations.length>0){selectedItems=this.pdfViewer.selectedItems.annotations;for(var j=0;j<selectedItems.length;j++){var element=cloneObject(selectedItems[j]);obj.push(element);}}if(this.pdfViewer.selectedItems.formFields.length>0){selectedItems=this.pdfViewer.selectedItems.formFields;for(var j=0;j<selectedItems.length;j++){var element=cloneObject(selectedItems[j]);obj.push(element);}}if(this.pdfViewer.clipboardData.pasteIndex===0){for(var _i=0,selectedItems_1=selectedItems;_i<selectedItems_1.length;_i++){var item=selectedItems_1[_i];// eslint-disable-next-line
if(this.pdfViewer.nameTable[item.id]){if(!item.formFieldAnnotationType){if(item.annotName)this.pdfViewer.annotationModule.deleteAnnotationById(item.annotName);else this.pdfViewer.annotationModule.deleteAnnotation();}else{this.pdfViewer.clearSelection(item.pageIndex);}}}//this.endGroupAction();
}this.sortByZIndex(obj,'zIndex');return obj;};Drawing.prototype.getNewObject=function(obj){var newObj;var newobjs=[];this.pdfViewer.clipboardData.pasteIndex=1;for(var i=0;i<obj.length;i++){newObj=cloneObject(obj[i]);newobjs.push(newObj);}return newobjs;};/**
     * @private
     * @param {PdfAnnotationBaseModel[]} obj - Specified the annotation object.
     * @param {number} index - Specified the annotation index.
     * @returns {void}
     */Drawing.prototype.paste=function(obj,index){var zoomfactor=this.pdfViewer.viewerBase.getZoomFactor();var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);if(obj||this.pdfViewer.clipboardData.clipObject){var copiedItems=obj?this.getNewObject(obj):this.pdfViewer.clipboardData.clipObject;if(copiedItems){var objectTable={};if(this.pdfViewer.clipboardData.pasteIndex!==0){this.pdfViewer.clearSelection(index);}for(var _i=0,copiedItems_1=copiedItems;_i<copiedItems_1.length;_i++){var copy=copiedItems_1[_i];// eslint-disable-next-line
objectTable[copy.id]=copy;}for(var j=0;j<copiedItems.length;j++){var copy=copiedItems[j];var pageDiv=this.pdfViewer.viewerBase.getElement('_pageDiv_'+index);// eslint-disable-next-line
var events=event;if(events&&!events.clientX&&!events.clientY){events={clientX:this.pdfViewer.viewerBase.mouseLeft,clientY:this.pdfViewer.viewerBase.mouseTop};}events=this.pdfViewer.viewerBase.mouseDownEvent;if(isLineShapes(copy)){this.calculateCopyPosition(copy,pageDiv,events);}else{if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();copy.bounds.x=(events.clientX-pageCurrentRect.left)/zoomfactor;copy.bounds.y=(events.clientY-pageCurrentRect.top)/zoomfactor;}}var newNode=cloneObject(copy);if(newNode.pageIndex!=index){newNode.pageIndex=index;}if(this.pdfViewer.viewerBase.contextMenuModule.previousAction!=='Cut'){newNode.id+=sf.drawings.randomId();if(this.pdfViewer.annotationModule&&newNode.shapeAnnotationType!=='HandWrittenSignature'){newNode.annotName=newNode.id;// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(newNode,copiedItems[0],false);}if(newNode.shapeAnnotationType==='SignatureText'||newNode.shapeAnnotationType==='HandWrittenSignature'||newNode.shapeAnnotationType==='SignatureImage'){this.pdfViewer.viewerBase.signatureModule.storeSignatureData(newNode.pageIndex,newNode);}if(!newNode.formFieldAnnotationType){this.pdfViewer.annotation.addAction(newNode.pageIndex,null,newNode,'Addition','',newNode,newNode);}}else{if(this.pdfViewer.annotationModule){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(newNode,copiedItems[0],true);}if(newNode.shapeAnnotationType==='SignatureText'||newNode.shapeAnnotationType==='HandWrittenSignature'||newNode.shapeAnnotationType==='SignatureImage'){this.pdfViewer.viewerBase.signatureModule.storeSignatureData(newNode.pageIndex,newNode);}if(!newNode.formFieldAnnotationType){this.pdfViewer.annotation.addAction(newNode.pageIndex,null,newNode,'Addition','',newNode,newNode);}}var addedAnnot=this.add(newNode);if((newNode.shapeAnnotationType==='FreeText'||newNode.enableShapeLabel)&&addedAnnot){this.nodePropertyChange(addedAnnot,{});}if(addedAnnot.formFieldAnnotationType&&addedAnnot.pageIndex===index){this.pdfViewer.formFieldCollection.push(addedAnnot);// eslint-disable-next-line max-len
var formField={id:addedAnnot.id,name:addedAnnot.name,value:addedAnnot.value,type:addedAnnot.formFieldAnnotationType,isReadOnly:addedAnnot.isReadonly,fontFamily:addedAnnot.fontFamily,// eslint-disable-next-line max-len
fontSize:addedAnnot.fontSize,fontStyle:addedAnnot.fontStyle,color:addedAnnot.color,backgroundColor:addedAnnot.backgroundColor,// eslint-disable-next-line max-len
alignment:addedAnnot.alignment,visibility:addedAnnot.visibility,maxLength:addedAnnot.maxLength,isRequired:addedAnnot.isRequired,// eslint-disable-next-line max-len
isPrint:addedAnnot.isPrint,isSelected:addedAnnot.isSelected,isChecked:addedAnnot.isChecked,tooltip:addedAnnot.tooltip,bounds:addedAnnot.bounds,thickness:addedAnnot.thickness,borderColor:addedAnnot.borderColor,signatureIndicatorSettings:addedAnnot.signatureIndicatorSettings};this.pdfViewer.formFieldCollections.push(formField);}this.pdfViewer.select([newNode.id],this.pdfViewer.annotationSelectorSettings);if(!addedAnnot.formFieldAnnotationType){this.pdfViewer.annotationModule.triggerAnnotationAddEvent(newNode);}}}this.pdfViewer.renderDrawing(undefined,index);this.pdfViewer.clipboardData.pasteIndex++;}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};Drawing.prototype.calculateCopyPosition=function(copy,pageDiv,events){var zoomfactor=this.pdfViewer.viewerBase.getZoomFactor();var x1;var y1;var x2;var y2;for(var i=0;i<copy.vertexPoints.length;i++){if(pageDiv){if(i===0){var pageCurrentRect=pageDiv.getBoundingClientRect();x1=copy.vertexPoints[i].x;y1=copy.vertexPoints[i].y;copy.vertexPoints[i].x=(events.clientX-pageCurrentRect.left)/zoomfactor;copy.vertexPoints[i].y=(events.clientY-pageCurrentRect.top)/zoomfactor;x2=copy.vertexPoints[i].x;y2=copy.vertexPoints[i].y;}else{copy.vertexPoints[i].x+=x2-x1;copy.vertexPoints[i].y+=y2-y1;}}}};/**
     * @private
     * @param {number} index - Specified the annotaion index.
     * @returns {void}
     */Drawing.prototype.cut=function(index){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.removedAnnotationCollection=[];}this.pdfViewer.clipboardData.pasteIndex=0;this.pdfViewer.clipboardData.clipObject=this.copyObjects();this.pdfViewer.renderDrawing(undefined,index);this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @private
     * @param {Object[]} nodeArray - Specified the node array.
     * @param {string} sortID - Specified the sort id.
     * @returns {Object[]} - Returns the node array.
     */Drawing.prototype.sortByZIndex=function(nodeArray,sortID){var id=sortID?sortID:'zIndex';nodeArray=nodeArray.sort(function(a,b){// eslint-disable-next-line
return a[id]-b[id];});return nodeArray;};return Drawing;}();/**
 * The `NavigationPane` module is used to handle navigation pane for thumbnail and bookmark navigation of PDF viewer.
 *
 * @hidden
 */var NavigationPane=/** @class */function(){/**
     * Initialize the constructor of navigationPane.
     *
     * @param { PdfViewer } viewer - Specified PdfViewer class.
     * @param { PdfViewerBase } base - The pdfViewerBase.
     */function NavigationPane(viewer,base){var _this=this;this.thumbnailWidthMin=200;this.contentContainerScrollWidth=33;this.closeButtonLeft=170;this.isTooltipCreated=false;this.isThumbnail=false;this.annotationContextMenu=[];this.isCommentPanelShow=false;this.commentPanelWidthMin=300;this.isTostCreated=false;/**
         * @private
         */this.isNavigationToolbarVisible=false;/**
         * @private
         */this.isBookmarkListOpen=false;/**
         * @private
         */this.isNavigationPaneResized=false;/**
         * @private
         */this.isBookmarkOpen=false;/**
         * @private
         */this.isThumbnailOpen=false;/**
         * @private
         */this.restrictUpdateZoomValue=true;// eslint-disable-next-line
this.loadImportAnnotation=function(args){// eslint-disable-next-line
var upoadedFiles=args.target.files;if(args.target.files[0]!==null){var uploadedFile=upoadedFiles[0];if(uploadedFile){_this.pdfViewer.fireImportStart(uploadedFile);// eslint-disable-next-line
var uploadedFileType=uploadedFile.type;if(uploadedFile.name.split('.json').length>1&&uploadedFileType.includes('json')){var reader=new FileReader();reader.readAsDataURL(uploadedFile);// eslint-disable-next-line
reader.onload=function(e){if(e.currentTarget.result){var importFile=e.currentTarget.result.split(',')[1];// eslint-disable-next-line
var annotationData=atob(importFile);if(annotationData){// eslint-disable-next-line
annotationData=_this.pdfViewerBase.getSanitizedString(annotationData);var jsonData=JSON.parse(annotationData);var firstAnnotation=jsonData.pdfAnnotation[Object.keys(jsonData.pdfAnnotation)[0]];if(Object.keys(jsonData.pdfAnnotation).length>=1&&(firstAnnotation.textMarkupAnnotation||firstAnnotation.measureShapeAnnotation||firstAnnotation.freeTextAnnotation||firstAnnotation.stampAnnotations||firstAnnotation.signatureInkAnnotation||firstAnnotation.shapeAnnotation&&firstAnnotation.shapeAnnotation[0].Bounds)){_this.pdfViewerBase.isPDFViewerJson=true;_this.pdfViewerBase.importAnnotations(jsonData,AnnotationDataFormat.Json);}else{_this.pdfViewerBase.isPDFViewerJson=false;_this.pdfViewerBase.importAnnotations(importFile,AnnotationDataFormat.Json);}}}};}else if(uploadedFile.name.split('.xfdf').length>1&&(uploadedFileType.includes('xfdf')||args.target.accept.includes('xfdf'))){var reader=new FileReader();reader.readAsDataURL(uploadedFile);// eslint-disable-next-line
reader.onload=function(e){if(e.currentTarget.result){var importFile=e.currentTarget.result.split(',')[1];// eslint-disable-next-line
var annotationData=atob(importFile);if(annotationData){// eslint-disable-next-line max-len
_this.pdfViewerBase.importAnnotations(importFile,AnnotationDataFormat.Xfdf,true);}}};}else{_this.pdfViewer.fireImportFailed(uploadedFile,_this.pdfViewer.localeObj.getConstant('Import Failed'));var promise=_this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_ImportFailed');promise.then(function(value){_this.pdfViewerBase.openImportExportNotificationPopup(value);});}}}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.resizeIconMouseOver=function(event){event.srcElement.style.cursor='e-resize';};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.resizePanelMouseDown=function(event){var proxy=null;proxy=_this;proxy.offset=[proxy.sideBarResizer.offsetLeft-event.clientX,proxy.sideBarResizer.offsetTop-event.clientY,proxy.sideBarResizer.offsetParent.clientWidth];_this.previousX=event.clientX;proxy.isDown=true;proxy.isNavigationPaneResized=true;proxy.pdfViewerBase.viewerContainer.style.cursor='e-resize';if(proxy.sideBarContentContainer){proxy.sideBarContentContainer.style.cursor='e-resize';}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.resizeViewerMouseLeave=function(event){var proxy=null;proxy=_this;proxy.isDown=false;if(proxy.isNavigationPaneResized&&proxy.sideBarContentContainer){proxy.pdfViewerBase.viewerContainer.style.cursor='default';proxy.sideBarContentContainer.style.cursor='default';proxy.isNavigationPaneResized=false;}if(proxy.commentPanelContainer&&proxy.isCommentPanelShow){_this.commentPanelMouseLeave(event);proxy.isCommentPanelShow=false;}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.resizePanelMouseMove=function(event){var proxy=null;proxy=_this;if(!_this.pdfViewerBase.getPopupNoteVisibleStatus()){var target=event.target;// eslint-disable-next-line max-len
if(_this.pdfViewerBase.skipPreventDefault(target)){event.preventDefault();}if(proxy.isDown&&_this.sideBarContentContainer){// prevent the sidebar from becoming too narrow, or from occupying more
// than half of the available viewer width.
if(_this.pdfViewer.enableRtl){var currentWidth=_this.previousX-event.clientX;var width=currentWidth+proxy.offset[2];var maxWidth=Math.floor(_this.outerContainerWidth/2);if(width>maxWidth){width=maxWidth;}if(width<_this.thumbnailWidthMin){width=_this.thumbnailWidthMin;}proxy.sideBarResizer.style.right=width+'px';proxy.sideBarContentContainer.style.width=width+'px';proxy.sideBarContent.style.width=width+'px';proxy.sideBarContentSplitter.style.width=width+'px';proxy.sideBarTitleContainer.style.width=width+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerLeft()+'px';proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerRight()+'px';}else{var width=event.clientX+proxy.offset[0];var maxWidth=Math.floor(_this.outerContainerWidth/2);if(width>maxWidth){width=maxWidth;}if(width<_this.thumbnailWidthMin){width=_this.thumbnailWidthMin;}proxy.sideBarResizer.style.left=width+'px';proxy.closeDiv.style.left=width-proxy.contentContainerScrollWidth+'px';proxy.sideBarContentContainer.style.width=width+'px';proxy.sideBarContent.style.width=width+'px';proxy.sideBarContentSplitter.style.width=width+'px';proxy.sideBarTitleContainer.style.width=width+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerLeft()+'px';proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerRight()+'px';setTimeout(function(){proxy.pdfViewerBase.updateViewerContainer();},0);}proxy.pdfViewer._dotnetInstance.invokeMethodAsync('ResizeTreeView');// eslint-disable-next-line max-len
var viewerWidth=proxy.pdfViewer.element.clientWidth-proxy.getViewerContainerLeft()-proxy.getViewerContainerRight();proxy.pdfViewerBase.viewerContainer.style.width=viewerWidth+'px';proxy.pdfViewerBase.pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.clientWidth+'px';proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber-1);proxy.pdfViewer.thumbnailViewModule.renderViewPortThumbnailImage();proxy.pdfViewerBase.updateZoomValue();if(!proxy.bookmarkButton.children[0].classList.contains('e-pv-bookmark-disable-icon')){proxy.pdfViewer.bookmarkViewModule.setBookmarkContentHeight();}}else if(proxy.isCommentPanelShow&&_this.commentPanelContainer){_this.updateCommentPanelContainer(event);}}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.sideToolbarOnClose=function(event){var proxy=null;proxy=_this;proxy.removeThumbnailSelectionIconTheme();proxy.removeBookmarkSelectionIconTheme();proxy.updateViewerContainerOnClose();};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.sideToolbarOnClick=function(event){if(_this.pdfViewer&&_this.pdfViewer.cultureValue&&_this.pdfViewer.cultureValue.ThumbnailContent){_this.sideBarTitle.textContent=_this.pdfViewer.cultureValue.ThumbnailContent;}else{_this.sideBarTitle.textContent=_this.pdfViewer.localeObj.getConstant('Page Thumbnails');}_this.sideBarContent.setAttribute('aria-label','Thumbnail View Panel');var proxy=null;proxy=_this;// eslint-disable-next-line max-len
var bookmarkPane=_this.pdfViewer.element.querySelector('.e-pv-bookmark-view');if(bookmarkPane){proxy.removeBookmarkSelectionIconTheme();bookmarkPane.style.display='none';}var element=document.getElementById(_this.pdfViewer.dataId+"_thumbnail_image_"+(_this.pdfViewer.currentPageNumber-1).toString());var removeElement=document.querySelector('.e-pv-thumbnail-selection')||document.querySelector('.e-pv-thumbnail-focus');document.getElementById(_this.pdfViewer.dataId+'_thumbnail_view').style.display='flex';if(proxy.sideBarContentContainer){if(proxy.sideBarContentContainer.style.display!=='none'){if(proxy.isBookmarkOpen){proxy.isThumbnailOpen=true;proxy.setThumbnailSelectionIconTheme();_this.updateViewerContainerOnExpand();if(event.pointerType!=="mouse"){element.focus();}}else{proxy.isThumbnailOpen=false;proxy.removeThumbnailSelectionIconTheme();proxy.pdfViewerBase.removeThumbnailPageSelectionTheme(removeElement);_this.updateViewerContainerOnClose();}}else{if(event.pointerType==="mouse"){_this.sideBarContent.focus();}proxy.isThumbnailOpen=true;proxy.pdfViewerBase.removeThumbnailPageSelectionTheme(removeElement);proxy.setThumbnailSelectionIconTheme();_this.updateViewerContainerOnExpand();if(event.pointerType!=="mouse"){if(element instanceof HTMLElement){element.focus();}}}}proxy.isBookmarkOpen=false;if(_this.pdfViewer.annotationModule&&_this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);_this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};/**
         * @private
         * @returns {void}
         */this.openThumbnailPane=function(){var proxy=null;proxy=_this;var sideBarContent=document.getElementById(_this.pdfViewer.dataId+'_sideBarContent');var sideBarContentContainer=document.getElementById(_this.pdfViewer.dataId+'_sideBarContentContainer');var viewerContainer=document.getElementById(_this.pdfViewer.dataId+'_viewerContainer');var pageContainer=document.getElementById(_this.pdfViewer.dataId+'_pageViewContainer');document.getElementById(_this.pdfViewer.dataId+'_thumbnail_view').style.display='block';document.getElementById(_this.pdfViewer.dataId+'_sideBarResizer').style.display='none';document.getElementById(_this.pdfViewer.dataId+'_sideBarTitleContainer').style.display='none';document.getElementById(_this.pdfViewer.dataId+'_sideBarContentSplitter').style.display='none';sideBarContent.classList.add('e-thumbnail');sideBarContentContainer.classList.add('e-thumbnail');if(sideBarContentContainer){if(proxy.isThumbnail){sideBarContentContainer.style.display='none';viewerContainer.style.width=proxy.pdfViewer.element.clientWidth+'px';pageContainer.style.width=viewerContainer.clientWidth+'px';viewerContainer.style.left=sideBarContentContainer.clientWidth+'px';proxy.pdfViewerBase.updateZoomValue();proxy.isThumbnail=false;}else{sideBarContent.focus();sideBarContentContainer.style.display='block';// eslint-disable-next-line max-len
viewerContainer.style.width=proxy.pdfViewer.element.clientWidth-sideBarContentContainer.clientWidth+'px';pageContainer.style.width=viewerContainer.clientWidth+'px';viewerContainer.style.left=sideBarContentContainer.clientWidth+'px';proxy.pdfViewerBase.updateZoomValue();proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber-1);proxy.isThumbnail=true;}}if(_this.pdfViewer.annotationModule&&_this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);_this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.bookmarkButtonOnClick=function(event){_this.openBookmarkcontentInitially();};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.commentPanelMouseDown=function(event){var proxy=null;proxy=_this;proxy.offset=[proxy.commentPanelResizer.offsetLeft-event.clientX,proxy.commentPanelResizer.offsetTop-event.clientY,proxy.getViewerContainerRight()];_this.isCommentPanelShow=true;_this.previousX=event.clientX;proxy.pdfViewerBase.viewerContainer.style.cursor='e-resize';proxy.commentPanelResizer.style.cursor='e-resize';};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.updateCommentPanelContainer=function(event){var proxy=null;proxy=_this;// prevent the commentPanel from becoming too narrow, or from occupying more
// than half of the available viewer width.
if(_this.pdfViewer.enableRtl){var width=event.clientX+proxy.offset[0];var maxWidth=Math.floor(_this.outerContainerWidth/2);if(width>maxWidth){width=maxWidth;}if(width<_this.commentPanelWidthMin){width=_this.commentPanelWidthMin;}proxy.commentPanelResizer.style.left=width+'px';proxy.commentPanelContainer.style.width=width+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerRight()+'px';proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerLeft()+'px';}else{var currentWidth=_this.previousX-event.clientX;var width=currentWidth+proxy.offset[2];var maxWidth=Math.floor(_this.outerContainerWidth/2);if(width>maxWidth){width=maxWidth;}if(width<_this.commentPanelWidthMin){width=_this.commentPanelWidthMin;}proxy.commentPanelResizer.style.right=width+'px';proxy.commentPanelContainer.style.width=width+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerRight()+'px';proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerLeft()+'px';}_this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();// eslint-disable-next-line max-len
var viewerWidth=proxy.pdfViewer.element.clientWidth-proxy.getViewerContainerLeft()-proxy.getViewerContainerRight();proxy.pdfViewerBase.viewerContainer.style.width=viewerWidth+'px';proxy.pdfViewerBase.pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.clientWidth+'px';proxy.pdfViewerBase.updateZoomValue();};/**
         * @param {MouseEvent} event - The event.
         * @returns {void}
         */this.commentPanelMouseLeave=function(event){var proxy=null;proxy=_this;if(proxy.commentPanelContainer){proxy.pdfViewerBase.viewerContainer.style.cursor='default';proxy.commentPanelContainer.style.cursor='default';}};this.pdfViewer=viewer;this.pdfViewerBase=base;}/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.initializeNavigationPane=function(){this.createNavigationPane();};NavigationPane.prototype.createNavigationPane=function(){this.sideBarToolbar=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar');this.sideBarToolbarSplitter=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');this.sideBarContentContainer=this.pdfViewer.element.querySelector('.e-pv-sidebar-content-container');this.sideBarContentSplitter=this.pdfViewer.element.querySelector('.e-pv-sidebar-content-splitter');this.sideBarContent=this.pdfViewer.element.querySelector('.e-pv-sidebar-content');this.sideBarTitleContainer=this.pdfViewer.element.querySelector('.e-pv-sidebar-title-container');this.sideBarTitle=this.pdfViewer.element.querySelector('.e-pv-sidebar-title');this.sideBarResizer=this.pdfViewer.element.querySelector('.e-pv-sidebar-resizer');if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){//Have commented the appendChild since it adds the element to the last which makes the sidebarToolbar position unsuitable for navigation using Tab Order
//this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbar);
if(this.pdfViewer.enableRtl){this.sideBarToolbar.style.cssFloat='right';this.sideBarToolbar.style.right=1+'px';this.sideBarToolbar.style.position='relative';}//Have commented the appendChild since it adds the element to the last which makes the sideBarToolbarSplitter position unsuitable for navigation using Tab Order
//this.pdfViewerBase.mainContainer.appendChild(this.sideBarToolbarSplitter);
if(this.pdfViewer.enableRtl){this.sideBarToolbarSplitter.classList.add('e-right');}else{this.sideBarToolbarSplitter.classList.add('e-left');}if(this.pdfViewer.enableRtl){this.sideBarContentContainer.classList.add('e-right');}else{this.sideBarContentContainer.classList.add('e-left');}//Have commented the appendChild since it adds the element to the last which makes the sideBarContentContainer position unsuitable for navigation using Tab Order
//this.pdfViewerBase.mainContainer.appendChild(this.sideBarContentContainer);
if(this.pdfViewer.enableRtl){this.sideBarContentSplitter.style.right=0+'px';}this.sideBarContentContainer.appendChild(this.sideBarContentSplitter);if(this.pdfViewer.enableRtl){this.sideBarContent.style.right=0+'px';this.sideBarContent.style.direction='rtl';}this.sideBarContentContainer.appendChild(this.sideBarContent);if(this.pdfViewer.enableRtl){this.sideBarTitleContainer.style.right=0+'px';}if(this.pdfViewer.enableRtl){this.sideBarTitle.classList.add('e-right');}else{this.sideBarTitle.classList.add('e-left');}this.sideBarTitleContainer.appendChild(this.sideBarTitle);this.sideBarContentContainer.appendChild(this.sideBarTitleContainer);this.sideBarResizer.addEventListener('mousedown',this.resizePanelMouseDown);this.pdfViewerBase.mainContainer.addEventListener('mousemove',this.resizePanelMouseMove);this.pdfViewerBase.mainContainer.addEventListener('mouseup',this.resizeViewerMouseLeave);if(this.pdfViewer.enableRtl){this.sideBarResizer.classList.add('e-right');}else{this.sideBarResizer.classList.add('e-left');}this.sideBarContentContainer.appendChild(this.sideBarResizer);this.createCommentPanel();var controlLeft=this.getViewerContainerLeft();var controlRight=this.getViewerContainerRight();if(!this.pdfViewer.enableRtl&&this.pdfViewer.enableNavigationToolbar){this.pdfViewerBase.viewerContainer.style.left=controlLeft+'px';this.pdfViewerBase.viewerContainer.style.right=controlRight+'px';}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-controlLeft-this.commentPanelContainer.clientWidth+'px';this.sideBarContentContainer.style.display='none';this.createSidebarToolBar();this.createSidebarTitleCloseButton();this.createResizeIcon();this.sideBarToolbar.addEventListener('mouseup',this.sideToolbarOnMouseup.bind(this));this.sideBarContentContainer.addEventListener('mouseup',this.sideBarTitleOnMouseup.bind(this));}else{this.createCommentPanel();}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.adjustPane=function(){var splitterElement=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');var sideToolbarElement=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar');var sideToolbarContent=this.pdfViewer.element.querySelector('.e-pv-sidebar-content-container');var toolbarContainer=this.pdfViewer.element.querySelector('.e-pv-toolbar');var toolbarHeight=toolbarContainer.getBoundingClientRect().height;if(toolbarHeight===0){// eslint-disable-next-line
toolbarHeight=parseFloat(window.getComputedStyle(toolbarContainer)['height'])+1;}if(!this.pdfViewer.enableToolbar){toolbarHeight=0;}sideToolbarElement.style.top=toolbarHeight+'px';sideToolbarContent.style.top=toolbarHeight+'px';splitterElement.style.top=toolbarHeight+'px';sideToolbarElement.style.height=this.getSideToolbarHeight(toolbarHeight);sideToolbarContent.style.height=this.getSideToolbarHeight(toolbarHeight);splitterElement.style.height=this.getSideToolbarHeight(toolbarHeight);this.pdfViewerBase.viewerContainer.style.height=this.getSideToolbarHeight(toolbarHeight);};NavigationPane.prototype.getSideToolbarHeight=function(toolbarHeight){var height=this.pdfViewer.element.getBoundingClientRect().height;return height!==0?height-toolbarHeight+'px':'';};NavigationPane.prototype.createCommentPanel=function(){this.commentPanelContainer=document.getElementById(this.pdfViewer.dataId+'_commantPanel');this.commentsContentContainer=document.getElementById(this.pdfViewer.dataId+'_commentscontentcontainer');this.createFileElement(this.commentPanelContainer);this.createXFdfFileElement(this.commentPanelContainer);};NavigationPane.prototype.createCommentPanelTitleContainer=function(){// eslint-disable-next-line max-len
var commentPanelTitleContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentPanelTitleContainer',className:'e-pv-comment-panel-title-container'});// eslint-disable-next-line max-len
var commentpanelTilte=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_commentPanelTitle',className:'e-pv-comment-panel-title',attrs:{'tabindex':'-1'}});var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Comments');promise.then(function(value){commentpanelTilte.innerText=value;});var annotationButton=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_annotations_btn'});annotationButton.setAttribute('aria-label','annotation button');annotationButton.setAttribute('type','button');annotationButton.className='e-btn e-pv-tbar-btn e-pv-comment-panel-title-close-div e-btn';// eslint-disable-next-line max-len
var moreOptionButtonSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_annotation_more_icon',className:'e-pv-more-icon e-pv-icon'});annotationButton.appendChild(moreOptionButtonSpan);commentPanelTitleContainer.appendChild(commentpanelTilte);commentPanelTitleContainer.appendChild(annotationButton);this.commentPanelContainer.appendChild(commentPanelTitleContainer);this.createAnnotationContextMenu();annotationButton.addEventListener('click',this.openAnnotationContextMenu.bind(this));};NavigationPane.prototype.createCommentPanelResizeIcon=function(){// eslint-disable-next-line max-len
this.commentPanelResizeIcon=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_resize',className:'e-pv-resize-icon e-pv-icon'});this.setCommentPanelResizeIconTop();this.commentPanelResizeIcon.style.position='absolute';this.commentPanelResizer.appendChild(this.commentPanelResizeIcon);};// eslint-disable-next-line
NavigationPane.prototype.openAnnotationContextMenu=function(event){this.annotationMenuObj.open(event.clientY,event.clientX,event.currentTarget);};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.createAnnotationContextMenu=function(){// eslint-disable-next-line max-len
this.annotationContextMenu=[{text:this.pdfViewer.localeObj.getConstant('Export Annotations')},{text:this.pdfViewer.localeObj.getConstant('Import Annotations')},{text:this.pdfViewer.localeObj.getConstant('Export XFDF')},{text:this.pdfViewer.localeObj.getConstant('Import XFDF')}];var annotationMenuElement=sf.base.createElement('ul',{id:this.pdfViewer.dataId+'_annotation_context_menu'});this.pdfViewer.element.appendChild(annotationMenuElement);this.annotationMenuObj=new sf.navigations.ContextMenu({target:'#'+this.pdfViewer.dataId+'_annotations_btn',items:this.annotationContextMenu,select:this.annotationMenuItemSelect.bind(this)});if(this.pdfViewer.enableRtl){this.annotationMenuObj.enableRtl=true;}this.annotationMenuObj.appendTo(annotationMenuElement);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.annotationMenuObj.animationSettings.effect='ZoomIn';}else{this.annotationMenuObj.animationSettings.effect='SlideDown';}};// eslint-disable-next-line
NavigationPane.prototype.annotationMenuItemSelect=function(args){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}if(args.item){switch(args.item.text){case this.pdfViewer.localeObj.getConstant('Export Annotations'):this.pdfViewerBase.exportAnnotations(AnnotationDataFormat.Json);break;case this.pdfViewer.localeObj.getConstant('Import Annotations'):this.importAnnotationIconClick(args);break;case this.pdfViewer.localeObj.getConstant('Export XFDF'):this.pdfViewerBase.exportAnnotations(AnnotationDataFormat.Xfdf);break;case this.pdfViewer.localeObj.getConstant('Import XFDF'):this.importXFdfAnnotationIconClick(args);break;default:break;}}};NavigationPane.prototype.createFileElement=function(toolbarElement){// eslint-disable-next-line max-len
this.annotationInputElement=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_annotationUploadElement',styles:'position:fixed; left:-100em',attrs:{'type':'file','aria-label':'upload elements'}});this.annotationInputElement.setAttribute('accept','.json');toolbarElement.appendChild(this.annotationInputElement);this.annotationInputElement.addEventListener('change',this.loadImportAnnotation);};NavigationPane.prototype.createXFdfFileElement=function(toolbarElement){// eslint-disable-next-line max-len
this.annotationXFdfInputElement=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_annotationXFdfUploadElement',styles:'position:fixed; left:-100em',attrs:{'type':'file','aria-label':'upload elements'}});this.annotationXFdfInputElement.setAttribute('accept','.xfdf');toolbarElement.appendChild(this.annotationXFdfInputElement);this.annotationXFdfInputElement.addEventListener('change',this.loadImportAnnotation);};NavigationPane.prototype.importAnnotationIconClick=function(args){this.annotationInputElement.click();};NavigationPane.prototype.importXFdfAnnotationIconClick=function(args){this.annotationXFdfInputElement.click();};NavigationPane.prototype.handleImportClick=function(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var annotationJSONElement_1=document.getElementById(this.pdfViewer.dataId+'_annotationUploadElement');var annotationXFDFElement_1=document.getElementById(this.pdfViewer.dataId+'_annotationXFdfUploadElement');var importAnnotationJson=document.getElementById("IMPORT_ANNOTATION_JSON");var importAnnotationXfdf=document.getElementById("IMPORT_ANNOTATION_XFDF");var importClickHandlerforJson=function importClickHandlerforJson(){annotationJSONElement_1.click();};var importClickHandlerForXfdf=function importClickHandlerForXfdf(){annotationXFDFElement_1.click();};importAnnotationJson.addEventListener("click",importClickHandlerforJson);importAnnotationXfdf.addEventListener("click",importClickHandlerForXfdf);}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.closeCommentPanelContainer=function(){var proxy=null;proxy=this;var viewerContainer=document.getElementById(this.pdfViewer.dataId+'_viewerContainer');var pageContainer=document.getElementById(this.pdfViewer.dataId+'_pageViewContainer');var commentPanel=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentPanel){commentPanel.style.display='none';if(proxy.commentPanelResizer){proxy.commentPanelResizer.style.display='none';}if(viewerContainer){if(this.pdfViewer.enableRtl){viewerContainer.style.left=proxy.getViewerContainerRight()+'px';}else{viewerContainer.style.right=proxy.getViewerContainerRight()+'px';}// eslint-disable-next-line max-len
viewerContainer.style.width=proxy.pdfViewer.element.clientWidth-proxy.getViewerContainerLeft()-proxy.getViewerContainerRight()+'px';pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.offsetWidth-proxy.getViewerContainerScrollbarWidth()+'px';}if(proxy.pdfViewerBase){proxy.pdfViewerBase.updateZoomValue();}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewerBase.mobileScrollerContainer){this.pdfViewerBase.mobileScrollerContainer.style.display='block';}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule){this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);}}};/**
     * @private
     * @param {string} option - The option.
     * @returns {void}
     */NavigationPane.prototype.createNavigationPaneMobile=function(option){var _this=this;this.isNavigationToolbarVisible=true;this.toolbarElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_navigationToolbar',className:'e-pv-nav-toolbar'});this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer);var items;if(option==='search'){var searchTemplate='<div class="e-input-group e-pv-search-input-mobile" id="'+this.pdfViewer.dataId+'_search_input_container"><input class="e-input" type="text" placeholder="'+this.pdfViewer.localeObj.getConstant('Find in document')+'" id="'+this.pdfViewer.dataId+'_search_input"></input></div>';items=[// eslint-disable-next-line max-len
{prefixIcon:'e-pv-backward-icon e-pv-icon',tooltipText:this.pdfViewer.localeObj.getConstant('Go Back'),id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)},{template:searchTemplate},{prefixIcon:'e-pv-search-icon e-pv-icon',id:this.pdfViewer.dataId+'_search_box-icon',click:function click(){var iconElement=_this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;if(iconElement.classList.contains('e-pv-search-close')){_this.enableSearchItems(false);}_this.pdfViewer.textSearchModule.searchButtonClick(iconElement,_this.searchInput);}},{prefixIcon:'e-pv-prev-search-icon e-pv-icon',id:this.pdfViewer.dataId+'_prev_occurrence',click:function click(args){_this.pdfViewer.textSearchModule.searchPrevious();}},{prefixIcon:'e-pv-next-search-icon e-pv-icon',id:this.pdfViewer.dataId+'_next_occurrence',click:function click(args){_this.pdfViewer.textSearchModule.searchNext();}}];}else{items=[// eslint-disable-next-line max-len
{prefixIcon:'e-pv-backward-icon e-pv-icon',id:this.pdfViewer.dataId+'_backward',click:this.goBackToToolbar.bind(this)},{text:this.pdfViewer.localeObj.getConstant('Bookmarks')}];}this.toolbar=new sf.navigations.Toolbar({items:items,width:'',height:'',overflowMode:'Popup'});if(this.pdfViewer.enableRtl){this.toolbar.enableRtl=true;}this.toolbar.isStringTemplate=true;this.toolbar.appendTo(this.toolbarElement);if(option==='search'){this.initiateSearchBox();}else{this.initiateBookmarks();}};NavigationPane.prototype.initiateSearchBox=function(){var _this=this;this.searchInput=this.pdfViewerBase.getElement('_search_input');this.pdfViewer.textSearchModule.searchBtn=this.pdfViewerBase.getElement('_search_box-icon').firstElementChild;this.searchInput.addEventListener('keyup',function(event){_this.enableSearchItems(true);var searchString=_this.searchInput.value;if(event.which===13){_this.initiateTextSearch();}else{_this.pdfViewer.textSearchModule.resetVariables();}});this.pdfViewer.textSearchModule.searchInput=this.searchInput;this.setSearchInputWidth();this.enableSearchItems(false);this.searchInput.focus();};NavigationPane.prototype.enableSearchItems=function(isEnable){};NavigationPane.prototype.initiateBookmarks=function(){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display='none';// eslint-disable-next-line
var mobileTool=document.querySelectorAll('.e-pv-mobile-annotation-toolbar');for(var i=0;i<mobileTool.length;i++){mobileTool[i].style.display='none';}}var bookmarkContainer=this.pdfViewerBase.getElement('_bookmarks_container');if(bookmarkContainer){bookmarkContainer.style.width='100%';bookmarkContainer.style.height='100%';if(this.pdfViewer.element&&this.pdfViewer.element.clientHeight>0){bookmarkContainer.style.height=this.pdfViewer.element.clientHeight+'px';}}};NavigationPane.prototype.initiateTextSearch=function(){var inputString=this.searchInput.value;this.pdfViewer.textSearchModule.initiateSearch(inputString);};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.goBackToToolbar=function(){this.isNavigationToolbarVisible=false;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.pdfViewer.textSearchModule.cancelTextSearch();}this.searchInput=null;if(this.pdfViewer.bookmarkViewModule.childNavigateCount!==0){this.pdfViewer.bookmarkViewModule.bookmarkList.back();this.pdfViewer.bookmarkViewModule.childNavigateCount--;}else{if(this.toolbar!=null){this.toolbar.destroy();this.toolbar=null;}var bookmarkContainer=this.pdfViewerBase.getElement('_bookmarks_container');if(bookmarkContainer){bookmarkContainer.parentElement.removeChild(bookmarkContainer);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display='';}}if(this.toolbarElement&&this.toolbarElement.parentElement!=null){this.toolbarElement.parentElement.removeChild(this.toolbarElement);}this.pdfViewerBase.viewerContainer.style.display='block';this.isBookmarkListOpen=false;this.pdfViewerBase.onWindowResize();}};NavigationPane.prototype.setSearchInputWidth=function(){var searchInputParent=this.searchInput.parentElement;var padding=window.getComputedStyle(searchInputParent.parentElement,null).getPropertyValue('padding-left');if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.toolbarElement=this.pdfViewerBase.getElement('_navigationToolbar');}// eslint-disable-next-line max-len
var width=this.toolbarElement.clientWidth-this.getParentElementSearchBox('_backward').clientWidth-this.getParentElementSearchBox('_search_box-icon').clientWidth-this.getParentElementSearchBox('_prev_occurrence').clientWidth-this.getParentElementSearchBox('_next_occurrence').clientWidth-6;if(padding!==''){width=width-parseFloat(padding)*2;}searchInputParent.style.width=width+'px';};NavigationPane.prototype.getParentElementSearchBox=function(idString){return this.pdfViewerBase.getElement(idString).parentElement;};/**
     * @param text
     * @private
     */NavigationPane.prototype.createTooltipMobile=function(text,isSearch){var _this=this;this.isTostCreated=true;var tooltipDiv=document.getElementById(this.pdfViewer.dataId+'_container_tooltip');var tooltipChild=tooltipDiv.firstElementChild;if(tooltipChild){tooltipChild.style.width='auto';tooltipChild.firstElementChild.firstElementChild.textContent=text;}else{var width=0;if(tooltipDiv){width=tooltipDiv.clientWidth;}var x=(this.pdfViewer.element.clientWidth-width)/2;var y=this.pdfViewer.element.clientHeight/2;this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateToastXYPosition',text,x,y);setTimeout(function(){tooltipDiv=document.getElementById(_this.pdfViewer.dataId+'_container_tooltip');tooltipChild=tooltipDiv.firstElementChild;if(tooltipChild&&!isSearch){tooltipChild.style.width='auto';tooltipChild.firstElementChild.firstElementChild.textContent=text;}else{_this.pdfViewer._dotnetInstance.invokeMethodAsync('ShowToastTooltip',isSearch?isSearch:false);}},300);}};NavigationPane.prototype.closeToastComponent=function(){this.isTostCreated=false;};NavigationPane.prototype.createMobileTooltip=function(text){// eslint-disable-next-line max-len
var tooltipDiv=sf.base.createElement('div',{className:'e-pv-container-tooltip',id:this.pdfViewer.dataId+'_container_tooltip'});this.pdfViewer.element.appendChild(tooltipDiv);// eslint-disable-next-line max-len
this.toastObject=new sf.notifications.Toast({title:text,target:this.pdfViewer.element,close:this.onTooltipClose.bind(this),position:{X:0,Y:0},animation:{hide:{duration:200,effect:'FadeOut'}}});this.toastObject.appendTo(tooltipDiv);var y=this.pdfViewer.element.clientHeight*0.65;var x=(this.pdfViewer.element.clientWidth-tooltipDiv.clientWidth)/2;this.isTooltipCreated=true;this.toastObject.show({position:{X:x,Y:y}});var tooltipChild=tooltipDiv.firstElementChild;if(tooltipChild){tooltipChild.style.width='auto';}};NavigationPane.prototype.onTooltipClose=function(args){if(this.pdfViewer.textSearchModule){this.isTooltipCreated=false;var tooltipElement=this.pdfViewerBase.getElement('_container_tooltip');this.pdfViewer.textSearchModule.isMessagePopupOpened=false;if(this.toastObject){this.toastObject.destroy();}tooltipElement.parentElement.removeChild(tooltipElement);this.toastObject=null;}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.toolbarResize=function(){if(this.searchInput){this.searchInput.style.width='auto';this.setSearchInputWidth();}};NavigationPane.prototype.createSidebarToolBar=function(){this.thumbnailButton=this.pdfViewer.element.querySelector('.e-pv-thumbnail-view-button');this.bookmarkButton=this.pdfViewer.element.querySelector('.e-pv-bookmark-button');this.thumbnailButton.addEventListener('click',this.sideToolbarOnClick);this.bookmarkButton.addEventListener('click',this.bookmarkButtonOnClick);};NavigationPane.prototype.onTooltipBeforeOpen=function(args){if(!this.pdfViewer.toolbarSettings.showTooltip){args.cancel=true;}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.enableThumbnailButton=function(){if(this.thumbnailButton){this.thumbnailButton.removeAttribute('disabled');this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-disable-icon');this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.enableBookmarkIcon=function(){var bookmark=this.pdfViewer.element.querySelector('.e-pv-bookmark-view');if(this.pdfViewerBase.navigationPane&&bookmark.childNodes.length>0&&this.bookmarkButton){this.bookmarkButton.removeAttribute('disabled');this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-disable-icon');this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');}};NavigationPane.prototype.createSidebarTitleCloseButton=function(){this.closeDiv=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_close_btn'});this.closeDiv.setAttribute('aria-label','close button');this.closeDiv.setAttribute('type','button');this.closeDiv.className='e-btn e-pv-tbar-btn e-pv-title-close-div e-btn';if(this.pdfViewer.enableRtl){this.closeDiv.style.left=8+'px';}else{this.closeDiv.style.left=this.closeButtonLeft+'px';}// eslint-disable-next-line max-len
var buttonSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_close'+'_icon',className:'e-pv-title-close-icon e-pv-icon'});this.closeDiv.appendChild(buttonSpan);this.sideBarTitleContainer.appendChild(this.closeDiv);this.closeDiv.addEventListener('click',this.sideToolbarOnClose);};NavigationPane.prototype.createResizeIcon=function(){// eslint-disable-next-line max-len
this.resizeIcon=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_resize',className:'e-pv-resize-icon e-pv-icon'});this.setResizeIconTop();this.resizeIcon.style.position='absolute';this.resizeIcon.addEventListener('click',this.sideToolbarOnClose);this.resizeIcon.addEventListener('mouseover',this.resizeIconMouseOver);this.sideBarResizer.appendChild(this.resizeIcon);};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.setResizeIconTop=function(){// eslint-disable-next-line max-len
if(this.sideBarToolbar&&this.sideBarToolbar.clientHeight&&this.resizeIcon.style.top===''){this.resizeIcon.style.top=this.sideBarToolbar.clientHeight/2+'px';}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.setCommentPanelResizeIconTop=function(){// eslint-disable-next-line max-len
if(this.commentPanelContainer&&this.commentPanelContainer.clientHeight&&this.commentPanelResizeIcon&&this.commentPanelResizeIcon.style.top===''){this.commentPanelResizeIcon.style.top=this.commentPanelContainer.clientHeight/2+'px';}};Object.defineProperty(NavigationPane.prototype,"outerContainerWidth",{/**
         * @private
         * @returns {number} - Returns the number.
         */get:function get(){if(!this.mainContainerWidth){this.mainContainerWidth=this.pdfViewerBase.mainContainer.clientWidth;}return this.mainContainerWidth;},enumerable:true,configurable:true});/**
     * @private
     * @returns {number} - Returns the number.
     */NavigationPane.prototype.getViewerContainerScrollbarWidth=function(){// eslint-disable-next-line max-len
return this.pdfViewerBase.viewerContainer.offsetWidth+this.pdfViewerBase.viewerContainer.offsetLeft-(this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft);};Object.defineProperty(NavigationPane.prototype,"sideToolbarWidth",{/**
         * @private
         * @returns {number} - Returns the number.
         */get:function get(){if(this.sideBarToolbar){return this.sideBarToolbar.clientWidth;}else{return 0;}},enumerable:true,configurable:true});Object.defineProperty(NavigationPane.prototype,"sideBarContentContainerWidth",{/**
         * @private
         * @returns {number} - Returns the number.
         */get:function get(){if(this.sideBarContentContainer){return this.sideBarContentContainer.clientWidth;}else{return 0;}},enumerable:true,configurable:true});Object.defineProperty(NavigationPane.prototype,"commentPanelContainerWidth",{/**
         * @private
         * @returns {number} - Returns the number.
         */get:function get(){if(this.commentPanelContainer){return this.commentPanelContainer.offsetWidth;}else{return 0;}},enumerable:true,configurable:true});/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.updateViewerContainerOnClose=function(){var proxy=null;proxy=this;if(proxy.sideBarContentContainer){proxy.sideBarContentContainer.style.display='none';if(this.pdfViewer.enableRtl){proxy.pdfViewerBase.viewerContainer.style.right=proxy.sideToolbarWidth+'px';}else{proxy.pdfViewerBase.viewerContainer.style.left=proxy.sideToolbarWidth+'px';}// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.width=proxy.pdfViewer.element.clientWidth-proxy.sideToolbarWidth-proxy.getViewerContainerRight()+'px';// eslint-disable-next-line max-len
proxy.pdfViewerBase.pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.offsetWidth-proxy.getViewerContainerScrollbarWidth()+'px';if(this.restrictUpdateZoomValue){proxy.pdfViewerBase.updateZoomValue();}}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.updateViewerContainerOnExpand=function(){var proxy=null;proxy=this;if(proxy.sideBarContentContainer){proxy.sideBarContentContainer.style.display='block';this.pdfViewer._dotnetInstance.invokeMethodAsync('ResizeTreeView');if(this.pdfViewer.enableRtl){// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.right=proxy.getViewerContainerLeft()+'px';}else{// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.left=proxy.getViewerContainerLeft()+'px';}// eslint-disable-next-line max-len
proxy.pdfViewerBase.viewerContainer.style.width=proxy.pdfViewer.element.clientWidth-this.getViewerContainerLeft()-this.getViewerContainerRight()+'px';proxy.pdfViewerBase.pageContainer.style.width=proxy.pdfViewerBase.viewerContainer.clientWidth+'px';proxy.pdfViewerBase.updateZoomValue();if(proxy.pdfViewer.enableThumbnail){proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.pdfViewerBase.currentPageNumber-1);proxy.pdfViewer.thumbnailViewModule.renderViewPortThumbnailImage();}}};/**
     * @private
     * @returns {number} - Returns the number.
     */NavigationPane.prototype.getViewerContainerLeft=function(){if(this.sideToolbarWidth){return this.sideToolbarWidth+this.sideBarContentContainerWidth;}else{return 0;}};/**
     * @private
     * @returns {number} - Returns the number.
     */NavigationPane.prototype.getViewerContainerRight=function(){this.commentPanelResizer=document.getElementById(this.pdfViewer.dataId+'_commentPanelResizer');if(this.commentPanelResizer){return this.commentPanelContainerWidth+this.commentPanelResizer.clientWidth;}else{return 0;}};/**
     * @private
     * @returns {number} - Returns the number.
     */NavigationPane.prototype.getViewerMainContainerWidth=function(){return this.pdfViewer.element.clientWidth-this.sideToolbarWidth;};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.setThumbnailSelectionIconTheme=function(){if(this.thumbnailButton){this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-selection-icon');this.thumbnailButton.classList.add('e-pv-thumbnail-view-button-selection');}};NavigationPane.prototype.removeThumbnailSelectionIconTheme=function(){if(this.thumbnailButton&&this.thumbnailButton.children[0]){this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-icon');this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-selection-icon');this.thumbnailButton.classList.remove('e-pv-thumbnail-view-button-selection');}};NavigationPane.prototype.resetThumbnailIcon=function(){if(this.thumbnailButton&&this.thumbnailButton.children[0]){this.thumbnailButton.children[0].classList.remove('e-pv-thumbnail-view-icon');this.thumbnailButton.children[0].classList.add('e-pv-thumbnail-view-disable-icon');}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.resetThumbnailView=function(){if(this.sideBarContentContainer){this.sideBarContentContainer.style.display='none';if(this.pdfViewer.enableRtl){this.pdfViewerBase.viewerContainer.style.left=1+'px';}else{this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+'px';}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth-this.getViewerContainerRight()+'px';if(this.pdfViewerBase.pageContainer){this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+'px';}this.thumbnailButton.setAttribute('disabled','disabled');this.removeThumbnailSelectionIconTheme();this.resetThumbnailIcon();}};NavigationPane.prototype.setBookmarkSelectionIconTheme=function(){if(this.bookmarkButton){this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-icon');this.bookmarkButton.children[0].classList.add('e-pv-bookmark-selection-icon');this.bookmarkButton.classList.add('e-pv-bookmark-button-selection');}};NavigationPane.prototype.removeBookmarkSelectionIconTheme=function(){if(this.bookmarkButton&&this.bookmarkButton.children[0]){this.bookmarkButton.children[0].classList.add('e-pv-bookmark-icon');this.bookmarkButton.children[0].classList.remove('e-pv-bookmark-selection-icon');this.bookmarkButton.classList.remove('e-pv-bookmark-button-selection');}};NavigationPane.prototype.sideToolbarOnMouseup=function(event){if(event.target===this.sideBarToolbar){this.pdfViewerBase.focusViewerContainer();}};NavigationPane.prototype.sideBarTitleOnMouseup=function(event){this.pdfViewerBase.focusViewerContainer();};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.openBookmarkcontentInitially=function(){var proxy=null;proxy=this;if(document.getElementById(this.pdfViewer.dataId+'_thumbnail_view')){document.getElementById(this.pdfViewer.dataId+'_thumbnail_view').style.display='none';}this.removeThumbnailSelectionIconTheme();if(this.pdfViewer&&this.pdfViewer.cultureValue&&this.pdfViewer.cultureValue.BookmarkContent){this.sideBarTitle.textContent=this.pdfViewer.cultureValue.BookmarkContent;}else{this.sideBarTitle.textContent=this.pdfViewer.localeObj.getConstant('Bookmarks');}this.sideBarContent.setAttribute('aria-label','Bookmark View Panel');this.pdfViewer.bookmarkViewModule.renderBookmarkcontent();if(this.sideBarContentContainer){if(proxy.sideBarContentContainer.style.display!=='none'){if(this.isThumbnailOpen){this.setBookmarkSelectionIconTheme();this.isBookmarkOpen=true;this.updateViewerContainerOnExpand();if(event.pointerType!=="mouse"){var sideBarContent=document.getElementById(this.pdfViewer.dataId+"_sideBarContent");var activeElement=sideBarContent.querySelector('.e-list-item.e-level-1.e-active');if(!activeElement){activeElement=sideBarContent.querySelector('li[data-uid="1"]');}if(activeElement){activeElement.focus();}if(sideBarContent){sideBarContent.setAttribute("tabindex","-1");}}}else{this.removeBookmarkSelectionIconTheme();this.isBookmarkOpen=false;this.updateViewerContainerOnClose();}}else{this.sideBarContent.focus();this.setBookmarkSelectionIconTheme();this.isBookmarkOpen=true;this.updateViewerContainerOnExpand();if(event.pointerType!=="mouse"){var sideBarContent=document.getElementById(this.pdfViewer.dataId+"_sideBarContent");var activeElement=sideBarContent.querySelector('.e-list-item.e-level-1.e-active');if(!activeElement){activeElement=sideBarContent.querySelector('li[data-uid="1"]');}if(activeElement){activeElement.focus();}if(sideBarContent){sideBarContent.setAttribute("tabindex","-1");}}}}this.isThumbnailOpen=false;if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.disableBookmarkButton=function(){if(this.sideBarContentContainer&&this.bookmarkButton&&this.bookmarkButton.children[0]){this.bookmarkButton.setAttribute('disabled','disabled');this.bookmarkButton.children[0].classList.add('e-pv-bookmark-disable-icon');}};/**
     * @private
     * @returns {void}
     */NavigationPane.prototype.clear=function(){if(!sf.base.Browser.isDevice){this.removeBookmarkSelectionIconTheme();this.removeThumbnailSelectionIconTheme();this.closeCommentPanelContainer();}};/**
     * @returns {string} - Returns the string.
     */NavigationPane.prototype.getModuleName=function(){return'NavigationPane';};return NavigationPane;}();/**
 * @param {ClientRect} bounds - Specified the bounds of the annotation.
 * @param {string} commonStyle  - Specified the annotation styles.
 * @param {HTMLElement} cavas  - Specified the annotation canvas element.
 * @param {number} index - Specified the page index value.
 * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.
 * @hidden
 * @returns {void}
 */function renderAdornerLayer(bounds,commonStyle,cavas,index,pdfViewer){var divElement=sf.drawings.createHtmlElement('div',{'id':pdfViewer.element.id+index+'_diagramAdornerLayer','style':'width:'+bounds.width+'px;height:'+bounds.height+'px;'+commonStyle});if(sf.base.Browser.isDevice&&!pdfViewer.enableDesktopMode){divElement.style.zIndex='0';}if(!sf.drawings.getDiagramElement(divElement.id)){var nextElement=pdfViewer.viewerBase.getElement('_pageDiv_'+index);var pageBound=nextElement.getBoundingClientRect();var svgAdornerSvg=createSvg(pdfViewer.element.id+index+'_diagramAdorner_svg',pageBound.width,pageBound.height);svgAdornerSvg.setAttribute('class','e-adorner-layer'+index);svgAdornerSvg.setAttribute('style','pointer-events:none;');pdfViewer.adornerSvgLayer=sf.drawings.createSvgElement('g',{'id':pdfViewer.element.id+'_diagramAdorner'});pdfViewer.adornerSvgLayer.setAttribute('style',' pointer-events: all; ');svgAdornerSvg.appendChild(pdfViewer.adornerSvgLayer);divElement.appendChild(svgAdornerSvg);divElement.style.width=pageBound.width+'px';divElement.style.height=pageBound.height+'px';if(nextElement){nextElement.insertBefore(divElement,nextElement.childNodes[0]);}else{cavas.parentElement.appendChild(divElement);}var svgSelector=sf.drawings.createSvgElement('g',{'id':pdfViewer.element.id+'_SelectorElement'});pdfViewer.adornerSvgLayer.appendChild(svgSelector);sf.drawings.setAttributeSvg(svgAdornerSvg,{style:'pointer-events:none;'});}pdfViewer.viewerBase.applyElementStyles(divElement,index);}/**
 * @param {string} id - Specified the Id of the svg element.
 * @param {string | number} width - Specified the width of the svg element.
 * @param {string | number} height - Specified the height of the svg element.
 * @hidden
 * @returns {SVGElement} - Returns the svg element.
 */function createSvg(id,width,height){var svgObj=document.createElementNS('http://www.w3.org/2000/svg','svg');sf.drawings.setAttributeSvg(svgObj,{'id':id,'width':width,'height':height});return svgObj;}/**
 * Enum for comment status of the annotation
 */var CommentStatus;(function(CommentStatus){CommentStatus[CommentStatus["None"]=1]="None";CommentStatus[CommentStatus["Accepted"]=2]="Accepted";CommentStatus[CommentStatus["Canceled"]=3]="Canceled";CommentStatus[CommentStatus["Completed"]=4]="Completed";CommentStatus[CommentStatus["Rejected"]=5]="Rejected";})(CommentStatus||(CommentStatus={}));/**
 * Enum for font styles
 */var FontStyle;(function(FontStyle){FontStyle[FontStyle["None"]=0]="None";FontStyle[FontStyle["Bold"]=1]="Bold";FontStyle[FontStyle["Italic"]=2]="Italic";FontStyle[FontStyle["Underline"]=4]="Underline";FontStyle[FontStyle["Strikethrough"]=8]="Strikethrough";})(FontStyle||(FontStyle={}));/**
 * enum for context menu items
 */var ContextMenuItem;(function(ContextMenuItem){ContextMenuItem[ContextMenuItem["Copy"]=0]="Copy";ContextMenuItem[ContextMenuItem["Highlight"]=1]="Highlight";ContextMenuItem[ContextMenuItem["Cut"]=2]="Cut";ContextMenuItem[ContextMenuItem["Underline"]=4]="Underline";ContextMenuItem[ContextMenuItem["Paste"]=8]="Paste";ContextMenuItem[ContextMenuItem["Delete"]=16]="Delete";ContextMenuItem[ContextMenuItem["ScaleRatio"]=32]="ScaleRatio";ContextMenuItem[ContextMenuItem["Strikethrough"]=64]="Strikethrough";ContextMenuItem[ContextMenuItem["Properties"]=128]="Properties";ContextMenuItem[ContextMenuItem["Comment"]=256]="Comment";})(ContextMenuItem||(ContextMenuItem={}));/**
 * Enum for signature type
 */var SignatureType;(function(SignatureType){SignatureType["Draw"]="Draw";SignatureType["Type"]="Type";SignatureType["Image"]="Image";})(SignatureType||(SignatureType={}));/**
 * Enum for annotation resizer location
 */var AnnotationResizerLocation;(function(AnnotationResizerLocation){AnnotationResizerLocation[AnnotationResizerLocation["Corners"]=1]="Corners";AnnotationResizerLocation[AnnotationResizerLocation["Edges"]=2]="Edges";})(AnnotationResizerLocation||(AnnotationResizerLocation={}));var DisplayMode;(function(DisplayMode){/** Draw - Display only the draw option in the signature dialog. */DisplayMode[DisplayMode["Draw"]=1]="Draw";/** Text - Display only the type option in the signature dialog. */DisplayMode[DisplayMode["Text"]=2]="Text";/** Upload - Display only the upload option in the signature dialog. */DisplayMode[DisplayMode["Upload"]=4]="Upload";})(DisplayMode||(DisplayMode={}));/**
 * Enum for cursor type
 */var CursorType;(function(CursorType){CursorType["auto"]="auto";CursorType["crossHair"]="crosshair";// eslint-disable-next-line
CursorType["e_resize"]="e-resize";// eslint-disable-next-line
CursorType["ew_resize"]="ew-resize";CursorType["grab"]="grab";CursorType["grabbing"]="grabbing";CursorType["move"]="move";// eslint-disable-next-line
CursorType["n_resize"]="n-resize";// eslint-disable-next-line
CursorType["ne_resize"]="ne-resize";// eslint-disable-next-line
CursorType["ns_resize"]="ns-resize";// eslint-disable-next-line
CursorType["nw_resize"]="nw-resize";CursorType["pointer"]="pointer";// eslint-disable-next-line
CursorType["s_resize"]="s-resize";// eslint-disable-next-line
CursorType["se_resize"]="se-resize";// eslint-disable-next-line
CursorType["sw_resize"]="sw-resize";CursorType["text"]="text";// eslint-disable-next-line
CursorType["w_resize"]="w-resize";})(CursorType||(CursorType={}));/**
 * Enum type for Dynamic Stamp Items
 */var DynamicStampItem;(function(DynamicStampItem){DynamicStampItem["Revised"]="Revised";DynamicStampItem["Reviewed"]="Reviewed";DynamicStampItem["Received"]="Received";DynamicStampItem["Approved"]="Approved";DynamicStampItem["Confidential"]="Confidential";DynamicStampItem["NotApproved"]="NotApproved";})(DynamicStampItem||(DynamicStampItem={}));/**
 * Enum type for Sign Stamp Items
 */var SignStampItem;(function(SignStampItem){SignStampItem["Witness"]="Witness";SignStampItem["InitialHere"]="InitialHere";SignStampItem["SignHere"]="SignHere";SignStampItem["Accepted"]="Accepted";SignStampItem["Rejected"]="Rejected";})(SignStampItem||(SignStampItem={}));/**
 * Enum type for Standard Business Stamp Items
 */var StandardBusinessStampItem;(function(StandardBusinessStampItem){StandardBusinessStampItem["Approved"]="Approved";StandardBusinessStampItem["NotApproved"]="NotApproved";StandardBusinessStampItem["Draft"]="Draft";StandardBusinessStampItem["Final"]="Final";StandardBusinessStampItem["Completed"]="Completed";StandardBusinessStampItem["Confidential"]="Confidential";StandardBusinessStampItem["ForPublicRelease"]="ForPublicRelease";StandardBusinessStampItem["NotForPublicRelease"]="NotForPublicRelease";StandardBusinessStampItem["ForComment"]="ForComment";StandardBusinessStampItem["Void"]="Void";StandardBusinessStampItem["PreliminaryResults"]="PreliminaryResults";StandardBusinessStampItem["InformationOnly"]="InformationOnly";})(StandardBusinessStampItem||(StandardBusinessStampItem={}));/**
 * Enum type for allowed interactions for locked annotations
 */var AllowedInteraction;(function(AllowedInteraction){AllowedInteraction["Select"]="Select";AllowedInteraction["Move"]="Move";AllowedInteraction["Resize"]="Resize";AllowedInteraction["Delete"]="Delete";AllowedInteraction["None"]="None";AllowedInteraction["PropertyChange"]="PropertyChange";})(AllowedInteraction||(AllowedInteraction={}));/**
 * Enum type for export annotation file types
 */var AnnotationDataFormat;(function(AnnotationDataFormat){AnnotationDataFormat["Json"]="Json";AnnotationDataFormat["Xfdf"]="Xfdf";})(AnnotationDataFormat||(AnnotationDataFormat={}));/**
* @private
*/var PdfViewerBlazorAction;(function(PdfViewerBlazorAction){PdfViewerBlazorAction[PdfViewerBlazorAction["Default"]=0]="Default";PdfViewerBlazorAction[PdfViewerBlazorAction["AnnotationAdding"]=2]="AnnotationAdding";})(PdfViewerBlazorAction||(PdfViewerBlazorAction={}));/**
 * ContextMenu module is used to handle the context menus used in the control.
 *
 * @hidden
 */var BlazorContextMenu=/** @class */function(){/**
     * Initialize the constructor of blazorcontext
     *
     * @param { PdfViewer } pdfViewer - Specified PdfViewer class.
     * @param { PdfViewerBase } pdfViewerBase - The pdfViewerBase.
     */function BlazorContextMenu(pdfViewer,pdfViewerBase){this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * before contextmenu open
     * @returns {boolean}
     */BlazorContextMenu.prototype.getContextMenuStatus=function(){var isLockValue=false;var currentAnnotSettings=null;if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations.length!==0){currentAnnotSettings=this.pdfViewer.selectedItems.annotations[0].annotationSettings;isLockValue=currentAnnotSettings.isLock;}else if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){isLockValue=true;}return isLockValue;};/**
     * Create the context menu.
     * @returns {void}
     */BlazorContextMenu.prototype.createContextMenu=function(){var htmlCollection=document.getElementsByClassName(this.pdfViewer.dataId+'_context_menu');if(htmlCollection){this.contextMenuElement=htmlCollection[0];if(this.contextMenuElement.children&&this.contextMenuElement.children.length>0){var htmlElement=this.contextMenuElement.children[0];htmlElement.className=htmlElement.className+' '+'e-pv-context-menu';}}};/**
     * open the context menu.
     * @param {number} top - The top.
     * @param {number} left - The left.
     * @param {HTMLElement} target - The target.
     * @returns {void}
     */BlazorContextMenu.prototype.open=function(top,left,target){this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenContextMenu',top,left);};/**
     * close the context menu.
     * @returns {void}
     */BlazorContextMenu.prototype.close=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync('CloseContextMenu');};/**
     * destroy the context menu.
     * @returns {void}
     */BlazorContextMenu.prototype.destroy=function(){this.previousAction='';this.contextMenuElement=null;};// eslint-disable-next-line
BlazorContextMenu.prototype.OnItemSelected=function(selectedMenu){if(typeof selectedMenu==='string'){this.pdfViewerBase.OnItemSelected(selectedMenu);}else{this.pdfViewerBase.OnItemSelected(selectedMenu[0]);}};return BlazorContextMenu;}();var globalTimeOut={};var spinTemplate=null;var spinCSSClass=null;var DEFT_MAT_WIDTH=30;var DEFT_MAT3_WIDTH=30;var DEFT_FAB_WIDTH=30;var DEFT_BOOT_WIDTH=30;var DEFT_BOOT4_WIDTH=36;var CLS_SHOWSPIN='e-spin-show';var CLS_HIDESPIN='e-spin-hide';var CLS_MATERIALSPIN='e-spin-material';var CLS_MATERIAL3SPIN='e-spin-material3';var CLS_FABRICSPIN='e-spin-fabric';var CLS_BOOTSPIN='e-spin-bootstrap';var CLS_BOOT4SPIN='e-spin-bootstrap4';var CLS_BOOT5SPIN='e-spin-bootstrap5';var CLS_TAILWIND='e-spin-tailwind';var CLS_HIGHCONTRASTSPIN='e-spin-high-contrast';var CLS_FLUENT='e-spin-fluent';var CLS_SPINWRAP='e-spinner-pane';var CLS_SPININWRAP='e-spinner-inner';var CLS_SPINCIRCLE='e-path-circle';var CLS_SPINARC='e-path-arc';var CLS_SPINLABEL='e-spin-label';var CLS_SPINTEMPLATE='e-spin-template';/**
 * Function to change the Spinners in a page globally from application end.
 * ```
 * E.g : blazorSpinner({ action: "Create", options: {target: targetElement}, type: "" });
 * ```
 *
 * @private
 * @param {string} action - The action.
 * @param {CreateArgs} options - The options
 * @param {string} target - The target
 * @param {string} type - the type
 * @returns {void}
 */ /**
 * Create a spinner for the specified target element.
 * ```
 * E.g : createSpinner({ target: targetElement, width: '34px', label: 'Loading..' });
 * ```
 * @private
 * @param  {SpinnerArgs} args - The SpinnerArgs.
 * @param {createElementParams} internalCreateElement - The internalCreateElement
 * @returns {void}
 */function createSpinner(args,internalCreateElement){if(!args.target){return;}var radius;var makeElement=!sf.base.isNullOrUndefined(internalCreateElement)?internalCreateElement:sf.base.createElement;var container=createSpinnerContainer(args.target,makeElement);if(!sf.base.isNullOrUndefined(args.cssClass)){container.wrap.classList.add(args.cssClass);}if(!sf.base.isNullOrUndefined(args.template)||!sf.base.isNullOrUndefined(spinTemplate)){var template=!sf.base.isNullOrUndefined(args.template)?args.template:spinTemplate;container.wrap.classList.add(CLS_SPINTEMPLATE);replaceContent(container.wrap,template,spinCSSClass);}else{var theme=!sf.base.isNullOrUndefined(args.type)?args.type:getTheme(container.wrap);var width=!sf.base.isNullOrUndefined(args.width)?args.width:undefined;radius=calculateRadius(width,theme);setTheme(theme,container.wrap,radius,makeElement);if(!sf.base.isNullOrUndefined(args.label)){createLabel(container.innerWrap,args.label,makeElement);}}container.wrap.classList.add(CLS_HIDESPIN);container=null;}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} label - The label.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {HTMLElement} - Returns HTMLElement.
 */function createLabel(container,label,makeElement){var labelEle=makeElement('div',{});labelEle.classList.add(CLS_SPINLABEL);labelEle.textContent=label;container.appendChild(labelEle);return labelEle;}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createMaterialSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Material',radius:radius};createMaterialElement(container,uniqueID,makeElement,CLS_MATERIALSPIN);matCalculateAttributes(radius,container,'Material',CLS_MATERIALSPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createMaterial3Spinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Material3',radius:radius};createMaterialElement(container,uniqueID,makeElement,CLS_MATERIAL3SPIN);matCalculateAttributes(radius,container,'Material3',CLS_MATERIAL3SPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createBootstrap4Spinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Bootstrap4',radius:radius};createMaterialElement(container,uniqueID,makeElement,CLS_BOOT4SPIN);matCalculateAttributes(radius,container,'Bootstrap4',CLS_BOOT4SPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createBootstrap5Spinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Bootstrap5',radius:radius};createMaterialElement(container,uniqueID,makeElement,CLS_BOOT5SPIN);matCalculateAttributes(radius,container,'Bootstrap5',CLS_BOOT5SPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createTailwindSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Tailwind',radius:radius};createFabricElement(container,uniqueID,CLS_TAILWIND,makeElement);fbCalculateAttributes(radius,container,CLS_TAILWIND);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {string} uniqueID - The uniqueID.
 * @param {number} radius - The radius.
 * @returns {void}
 */function startMatAnimate(container,uniqueID,radius){var globalObject={};var timeOutVar=0;globalTimeOut[uniqueID].timeOut=0;globalObject[uniqueID]=globalVariables(uniqueID,radius,0,0);var spinnerInfo={uniqueID:uniqueID,container:container,globalInfo:globalObject,timeOutVar:timeOutVar};animateMaterial(spinnerInfo);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createFabricSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Fabric',radius:radius};createFabricElement(container,uniqueID,CLS_FABRICSPIN,makeElement);fbCalculateAttributes(radius,container,CLS_FABRICSPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createHighContrastSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'HighContrast',radius:radius};createFabricElement(container,uniqueID,CLS_HIGHCONTRASTSPIN,makeElement);fbCalculateAttributes(radius,container,CLS_HIGHCONTRASTSPIN);}/**
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createFluentSpinner(container,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Fluent',radius:radius};createFabricElement(container,uniqueID,CLS_FLUENT,makeElement);fbCalculateAttributes(radius,container,CLS_FLUENT);}/**
 * @param {HTMLElement} container - The container
 * @returns {string} - Returns the string
 */function getTheme(container){var theme=window.getComputedStyle(container,':after').getPropertyValue('content');return theme.replace(/['"]+/g,'');}/**
 * @param {string} theme - The theme.
 * @param {HTMLElement} container - The HTMLElement.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function setTheme(theme,container,radius,makeElement){var innerContainer=container.querySelector('.'+CLS_SPININWRAP);var svg=innerContainer.querySelector('svg');if(!sf.base.isNullOrUndefined(svg)){innerContainer.removeChild(svg);}switch(theme){case'Material':createMaterialSpinner(innerContainer,radius,makeElement);break;case'Material3':createMaterial3Spinner(innerContainer,radius,makeElement);break;case'Fabric':createFabricSpinner(innerContainer,radius,makeElement);break;case'Bootstrap':createBootstrapSpinner(innerContainer,radius,makeElement);break;case'HighContrast':createHighContrastSpinner(innerContainer,radius,makeElement);break;case'Bootstrap4':createBootstrap4Spinner(innerContainer,radius,makeElement);break;case'Bootstrap5':createBootstrap5Spinner(innerContainer,radius,makeElement);break;case'Tailwind':createTailwindSpinner(innerContainer,radius,makeElement);break;case'Fluent':createFluentSpinner(innerContainer,radius,makeElement);break;}}/**
 * @param {HTMLElement} innerContainer - The innerContainer.
 * @param {number} radius - The radius.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createBootstrapSpinner(innerContainer,radius,makeElement){var uniqueID=randomGenerator();globalTimeOut[uniqueID]={timeOut:0,type:'Bootstrap',radius:radius};createBootstrapElement(innerContainer,uniqueID,makeElement);bootCalculateAttributes(innerContainer,radius);}/**
 * @param {HTMLElement} innerContainer - The HTMLElement.
 * @param {string} uniqueID - The uniqueID.
 * @param {createElementParams} makeElement - The createElementParams.
 * @returns {void}
 */function createBootstrapElement(innerContainer,uniqueID,makeElement){var svgBoot=document.createElementNS('http://www.w3.org/2000/svg','svg');var viewBoxValue=64;var trans=32;var defaultRadius=2;svgBoot.setAttribute('id',uniqueID);svgBoot.setAttribute('class',CLS_BOOTSPIN);svgBoot.setAttribute('viewBox','0 0 '+viewBoxValue+' '+viewBoxValue);innerContainer.insertBefore(svgBoot,innerContainer.firstChild);for(var item=0;item<=7;item++){var bootCircle=document.createElementNS('http://www.w3.org/2000/svg','circle');bootCircle.setAttribute('class',CLS_SPINCIRCLE+'_'+item);bootCircle.setAttribute('r',defaultRadius+'');bootCircle.setAttribute('transform','translate('+trans+','+trans+')');svgBoot.appendChild(bootCircle);}}/**
 * @param {HTMLElement} innerContainer - The innerContainer.
 * @param {number} radius - The radius.
 * @returns {void}
 */function bootCalculateAttributes(innerContainer,radius){var svg=innerContainer.querySelector('svg.e-spin-bootstrap');svg.style.width=svg.style.height=radius+'px';var x=0;var y=0;var rad=24;var startArc=90;for(var item=0;item<=7;item++){var start=defineArcPoints(x,y,rad,startArc);var circleEle=svg.querySelector('.'+CLS_SPINCIRCLE+'_'+item);circleEle.setAttribute('cx',start.x+'');circleEle.setAttribute('cy',start.y+'');startArc=startArc>=360?0:startArc;startArc=startArc+45;}}/**
 * @param {number} begin - The begin.
 * @param {number} stop - The stop.
 * @returns {number[]} - Returns the number.
 */function generateSeries(begin,stop){var series=[];var start=begin;var end=stop;var increment=false;var count=1;formSeries(start);/**
     * @param {number} i - The number
     * @returns {void}
     */function formSeries(i){series.push(i);if(i!==end||count===1){if(i<=start&&i>1&&!increment){i=parseFloat((i-0.2).toFixed(2));}else if(i===1){i=7;i=parseFloat((i+0.2).toFixed(2));increment=true;}else if(i<8&&increment){i=parseFloat((i+0.2).toFixed(2));if(i===8){increment=false;}}else if(i<=8&&!increment){i=parseFloat((i-0.2).toFixed(2));}++count;formSeries(i);}}return series;}/**
 * @param {HTMLElement} innerContainer - The innerContainer.
 * @returns {void}
 */function animateBootstrap(innerContainer){var svg=innerContainer.querySelector('svg.e-spin-bootstrap');var id=svg.getAttribute('id');for(var i=1;i<=8;i++){var circleEle=innerContainer.getElementsByClassName('e-path-circle_'+(i===8?0:i))[0];rotation(circleEle,i,i,generateSeries(i,i),id);}/**
     * @param {SVGCircleElement} circle - The circle.
     * @param {number} start - The start.
     * @param {number} end - The end.
     * @param {number[]} series - The series
     * @param {string} id - The id.
     * @returns {void}
     */function rotation(circle,start,end,series,id){var count=0;bootAnimate(start);/**
         * @param {number} radius - The radisu.
         * @returns {void}
         */function bootAnimate(radius){if(globalTimeOut[id].isAnimate){++count;circle.setAttribute('r',radius+'');if(count>=series.length){count=0;}globalTimeOut[id].timeOut=setTimeout(bootAnimate.bind(null,series[count]),18);}}}}/**
 * @param {HTMLElement} container - The container.
 * @param {string} template - The template.
 * @param {string} cssClass - The cssClass.
 * @returns {void}
 */function replaceContent(container,template,cssClass){if(!sf.base.isNullOrUndefined(cssClass)){container.classList.add(cssClass);}var inner=container.querySelector('.e-spinner-inner');inner.innerHTML=template;}/**
 * @param {string | number} width - The width
 * @param {string} theme - The theme.
 * @returns {number} - Returns the number.
 */function calculateRadius(width,theme){var defaultSize;switch(theme){case'Material':defaultSize=DEFT_MAT_WIDTH;break;case'Material3':defaultSize=DEFT_MAT3_WIDTH;break;case'Fabric':defaultSize=DEFT_FAB_WIDTH;break;case'Bootstrap4':defaultSize=DEFT_BOOT4_WIDTH;break;default:defaultSize=DEFT_BOOT_WIDTH;}width=width?parseFloat(width+''):defaultSize;return theme==='Bootstrap'?width:width/2;}/**
 * @param {string} id - The id.
 * @param {number} radius - The radius.
 * @param {number} count - The count.
 * @param {number} previousId - The previousId.
 * @returns {GlobalVariables} - Returns GlobalVariables.
 */function globalVariables(id,radius,count,previousId){return{radius:radius,count:count,previousId:previousId};}/**
 * @returns {string} - Returns string.
 */function randomGenerator(){var random='';var combine='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';for(var i=0;i<5;i++){random+=combine.charAt(Math.floor(Math.random()*combine.length));}return random;}/**
 * @param {HTMLElement} innerCon - The innerContainer.
 * @param {string} uniqueID - The uniqueID.
 * @param {string} themeClass - The themeClass
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {void}
 */function createFabricElement(innerCon,uniqueID,themeClass,makeElement){var svgFabric=document.createElementNS('http://www.w3.org/2000/svg','svg');svgFabric.setAttribute('id',uniqueID);svgFabric.setAttribute('class',themeClass);var fabricCirclePath=document.createElementNS('http://www.w3.org/2000/svg','path');fabricCirclePath.setAttribute('class',CLS_SPINCIRCLE);var fabricCircleArc=document.createElementNS('http://www.w3.org/2000/svg','path');fabricCircleArc.setAttribute('class',CLS_SPINARC);innerCon.insertBefore(svgFabric,innerCon.firstChild);svgFabric.appendChild(fabricCirclePath);svgFabric.appendChild(fabricCircleArc);}/**
 * @param {HTMLElement} innerContainer - The innerContainer.
 * @param {string} uniqueID - The uniqueID.
 * @param {createElementParams} makeElement - The makeElement.
 * @param {string} cls - The class
 * @returns {void}
 */function createMaterialElement(innerContainer,uniqueID,makeElement,cls){var svgMaterial=document.createElementNS('http://www.w3.org/2000/svg','svg');svgMaterial.setAttribute('class',cls);svgMaterial.setAttribute('id',uniqueID);var matCirclePath=document.createElementNS('http://www.w3.org/2000/svg','path');matCirclePath.setAttribute('class',CLS_SPINCIRCLE);innerContainer.insertBefore(svgMaterial,innerContainer.firstChild);svgMaterial.appendChild(matCirclePath);}/**
 * @param {HTMLElement} target - The target.
 * @param {createElementParams} makeElement - The makeElement.
 * @returns {HTMLElement;HTMLElement} - Retruns the HTMLElement.
 */function createSpinnerContainer(target,makeElement){var spinnerContainer=makeElement('div',{});spinnerContainer.classList.add(CLS_SPINWRAP);var spinnerInnerContainer=makeElement('div',{});spinnerInnerContainer.classList.add(CLS_SPININWRAP);target.appendChild(spinnerContainer);spinnerContainer.appendChild(spinnerInnerContainer);return{wrap:spinnerContainer,innerWrap:spinnerInnerContainer};}/**
 * @param {SpinnerInfo} spinnerInfo - The SpinnerInfo.
 * @returns {void}
 */function animateMaterial(spinnerInfo){var start=1;var end=149;var duration=1333;var max=75;createCircle(start,end,easeAnimation,duration,spinnerInfo.globalInfo[spinnerInfo.uniqueID].count,max,spinnerInfo);spinnerInfo.globalInfo[spinnerInfo.uniqueID].count=++spinnerInfo.globalInfo[spinnerInfo.uniqueID].count%4;}/**
 * @param {number} start - The start.
 * @param {number} end - The end.
 * @param {Function} easing - The easing.
 * @param {number} duration - The duration.
 * @param {number} count - The count.
 * @param {number} max - The max.
 * @param {SpinnerInfo} spinnerInfo - The SpinnerInfo.
 * @returns {void}
 */function createCircle(start,end,easing,duration,count,max,spinnerInfo){var id=++spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId;var startTime=new Date().getTime();var change=end-start;var diameter=getSize(spinnerInfo.globalInfo[spinnerInfo.uniqueID].radius*2+'');var strokeSize=getStrokeSize(diameter);var rotate=-90*(spinnerInfo.globalInfo[spinnerInfo.uniqueID].count||0);matAnimation(spinnerInfo);/**
     * @param {SpinnerInfo} spinnerInfo - The SpinnerInfo.
     * @returns {void}
     */function matAnimation(spinnerInfo){var currentTime=Math.max(0,Math.min(new Date().getTime()-startTime,duration));updatePath(easing(currentTime,start,change,duration),spinnerInfo.container);if(id===spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId&&currentTime<duration){globalTimeOut[spinnerInfo.uniqueID].timeOut=setTimeout(matAnimation.bind(null,spinnerInfo),1);}else{animateMaterial(spinnerInfo);}}/**
     * @param {number} value - The value.
     * @param {HTMLElement} container - The container.
     * @returns {void}
     */function updatePath(value,container){if(!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material'))||!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material3'))){var svg=void 0;if(!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material'))&&!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material').querySelector('path.e-path-circle'))){svg=container.querySelector('svg.e-spin-material');}else if(!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material3'))&&!sf.base.isNullOrUndefined(container.querySelector('svg.e-spin-material3').querySelector('path.e-path-circle'))){svg=container.querySelector('svg.e-spin-material3');}if(!sf.base.isNullOrUndefined(svg)){var path=svg.querySelector('path.e-path-circle');path.setAttribute('stroke-dashoffset',getDashOffset(diameter,strokeSize,value,max)+'');path.setAttribute('transform','rotate('+rotate+' '+diameter/2+' '+diameter/2+')');}}}}/**
 * @param {number} radius - The radius.
 * @param {HTMLElement} container - The container.
 * @param {string} type - The type.
 * @param {string} cls - The class
 * @returns {void}
 */function matCalculateAttributes(radius,container,type,cls){var diameter=radius*2;var svg=container.querySelector('svg.'+cls);var path=svg.querySelector('path.e-path-circle');var strokeSize=getStrokeSize(diameter);var transformOrigin=diameter/2+'px';svg.setAttribute('viewBox','0 0 '+diameter+' '+diameter);svg.style.width=svg.style.height=diameter+'px';svg.style.transformOrigin=transformOrigin+' '+transformOrigin+' '+transformOrigin;path.setAttribute('d',drawArc(diameter,strokeSize));if(type==='Material'||type==='Material3'){path.setAttribute('stroke-width',strokeSize+'');path.setAttribute('stroke-dasharray',(diameter-strokeSize)*Math.PI*0.75+'');path.setAttribute('stroke-dashoffset',getDashOffset(diameter,strokeSize,1,75)+'');}}/**
 * @param {string} value - The value.
 * @returns {number} - Returns number.
 */function getSize(value){var parsed=parseFloat(value);return parsed;}/**
 * @param {number} diameter - The diameter.
 * @param {number} strokeSize - The strokeSize.
 * @returns {string} - Returns string.
 */function drawArc(diameter,strokeSize){var radius=diameter/2;var offset=strokeSize/2;return'M'+radius+','+offset+'A'+(radius-offset)+','+(radius-offset)+' 0 1 1 '+offset+','+radius;}/**
 * @param {number} diameter - The diameter.
 * @returns {number} - Returns number.
 */function getStrokeSize(diameter){return 10/100*diameter;}/**
 * @param {number} diameter - The diameter.
 * @param {number} strokeSize - The strokeSize.
 * @param {number} value - The value.
 * @param {number} max - The max.
 * @returns {number} - Returns number.
 */function getDashOffset(diameter,strokeSize,value,max){return(diameter-strokeSize)*Math.PI*(3*max/100-value/100);}/**
 * @param {number} current - The current.
 * @param {number} start - The start.
 * @param {number} change - The change.
 * @param {number} duration - The duration
 * @returns {number} - Returns number.
 */function easeAnimation(current,start,change,duration){var timestamp=(current/=duration)*current;var timecount=timestamp*current;return start+change*(6*timecount*timestamp+-15*timestamp*timestamp+10*timecount);}/**
 * @param {number} radius - The radius.
 * @param {HTMLElement} innerConainer - The innerConainer.
 * @param {string} trgClass - The trgClass.
 * @returns {void}
 */function fbCalculateAttributes(radius,innerConainer,trgClass){var centerX=radius;var centerY=radius;var diameter=radius*2;var startArc=315;var endArc=45;var svg=innerConainer.querySelector('.'+trgClass);var circle=svg.querySelector('.e-path-circle');var path=svg.querySelector('.e-path-arc');var transformOrigin=diameter/2+'px';circle.setAttribute('d',defineCircle(centerX,centerY,radius));path.setAttribute('d',defineArc(centerX,centerY,radius,startArc,endArc));svg.setAttribute('viewBox','0 0 '+diameter+' '+diameter);svg.style.transformOrigin=transformOrigin+' '+transformOrigin+' '+transformOrigin;svg.style.width=svg.style.height=diameter+'px';}/**
 * @param {number} centerX - The centerX.
 * @param {number} centerY - The centerY.
 * @param {number} radius - The radius.
 * @param {number} angle - The angle.
 * @returns {number;number} - Returns number.
 */function defineArcPoints(centerX,centerY,radius,angle){var radians=(angle-90)*Math.PI/180.0;return{x:centerX+radius*Math.cos(radians),y:centerY+radius*Math.sin(radians)};}/**
 * @param {number} x - The x.
 * @param {number} y - The y.
 * @param {number} radius - The radius.
 * @param {number} startArc - The startArc.
 * @param {number} endArc - The endArc.
 * @returns {string} - Returns string.
 */function defineArc(x,y,radius,startArc,endArc){var start=defineArcPoints(x,y,radius,endArc);var end=defineArcPoints(x,y,radius,startArc);var d=['M',start.x,start.y,'A',radius,radius,0,0,0,end.x,end.y].join(' ');return d;}/**
 * @param {number} x - The x.
 * @param {number} y - The y.
 * @param {number} radius - The radius.
 * @returns {void}
 */function defineCircle(x,y,radius){var d=['M',x,y,'m',-radius,0,'a',radius,radius,0,1,0,radius*2,0,'a',radius,radius,0,1,0,-radius*2,0].join(' ');return d;}/**
 * Function to show the Spinner.
 * @private
 * @param {HTMLElement} container - The container.
 * @returns {void}
 */function showSpinner(container){showHideSpinner(container,false);container=null;}/**
 * @param {HTMLElement} container - The container.
 * @param {boolean} isHide - To show or hide.
 * @returns {void}
 */function showHideSpinner(container,isHide){var spinnerWrap;if(container){spinnerWrap=container.classList.contains(CLS_SPINWRAP)?container:container.querySelector('.'+CLS_SPINWRAP);}if(container&&spinnerWrap){var inner=spinnerWrap.querySelector('.'+CLS_SPININWRAP);// eslint-disable-next-line max-len
var spinCheck=isHide?!spinnerWrap.classList.contains(CLS_SPINTEMPLATE)&&!spinnerWrap.classList.contains(CLS_HIDESPIN):!spinnerWrap.classList.contains(CLS_SPINTEMPLATE)&&!spinnerWrap.classList.contains(CLS_SHOWSPIN);if(spinCheck){var svgEle=spinnerWrap.querySelector('svg');if(sf.base.isNullOrUndefined(svgEle)){return;}var id=svgEle.getAttribute('id');globalTimeOut[id].isAnimate=!isHide;switch(globalTimeOut[id].type){case'Material':case'Material3':// eslint-disable-next-line
isHide?clearTimeout(globalTimeOut[id].timeOut):startMatAnimate(inner,id,globalTimeOut[id].radius);break;case'Bootstrap':// eslint-disable-next-line
isHide?clearTimeout(globalTimeOut[id].timeOut):animateBootstrap(inner);break;}}// eslint-disable-next-line
isHide?sf.base.classList(spinnerWrap,[CLS_HIDESPIN],[CLS_SHOWSPIN]):sf.base.classList(spinnerWrap,[CLS_SHOWSPIN],[CLS_HIDESPIN]);container=null;}}/**
 * Function to hide the Spinner.
 * @private
 * @param {HTMLElement} container - Specify the target of the Spinner.
 * @returns {void}
 */function hideSpinner(container){showHideSpinner(container,true);container=null;}/**
 * Function to change the Spinners in a page globally from application end.
 * ```
 * E.g : setSpinner({ cssClass: 'custom-css'; type: 'Material' });
 * ```
 * @private
 * @param {SetSpinnerArgs} args - The args.
 * @param {createElementParams} internalCreateElement - The internalCreateElement.
 * @returns {void}
 */var __awaiter$3=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator$3=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};/**
 * The `BlazorUIAdaptor` module is used to handle the UI update of native components.
 * @hidden
 */var BlazorUiAdaptor=/** @class */function(){/**
     * Initialize the constructor of blazorUIadapater.
     *
     * @param { PdfViewer } pdfviewer - Specified PdfViewer class.
     * @param { PdfViewerBase } pdfViewerBase - The pdfViewerBase.
     */function BlazorUiAdaptor(pdfviewer,pdfViewerBase){this.pdfViewer=null;this.pdfViewerBase=null;/**
         * @private
         */this.totalPageElement=null;this.currentPageBoxElementContainer=null;this.currentPageBoxElement=null;this.firstPageElement=null;this.previousPageElement=null;this.nextPageElement=null;this.lastPageElement=null;/**
        * @private
        */this.zommOutElement=null;/**
        * @private
        */this.zoomInElement=null;/**
        * @private
        */this.zoomDropDownElement=null;this.selectToolElement=null;this.handToolElement=null;this.undoElement=null;this.redoElement=null;this.commentElement=null;this.submitFormButton=null;this.searchElement=null;this.annotationElement=null;this.printElement=null;this.downloadElement=null;this.highlightElement=null;this.underlineElement=null;this.strikeThroughElement=null;this.shapeElement=null;this.calibrateElement=null;this.stampElement=null;this.freeTextElement=null;this.signatureElement=null;this.inkElement=null;this.annotationFontSizeInputElement=null;this.annotationFontFamilyInputElement=null;this.annotationColorElement=null;this.annotationStrokeColorElement=null;this.annotationThicknessElement=null;this.annotationOpacityElement=null;this.annotationFontColorElement=null;this.annotationFontFamilyElement=null;this.annotationFontSizeElement=null;this.annotationTextAlignElement=null;this.annotationTextColorElement=null;this.annotationTextPropertiesElement=null;this.annotationDeleteElement=null;this.annotationCloseElement=null;this.annotationCommentPanelElement=null;this.mobileToolbarContainerElement=null;this.mobileSearchPreviousOccurenceElement=null;this.mobileSearchNextOccurenceElement=null;/**
        * @private
        */this.cssClass='e-overlay';this.disableClass=' e-overlay';this.editAnnotationButtonElement=null;this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;this.findToolbarElements();}BlazorUiAdaptor.prototype.findToolbarElements=function(){if(this.pdfViewerBase.getElement('_totalPage')){this.totalPageElement=this.pdfViewerBase.getElement('_totalPage').children[0];}this.currentPageBoxElementContainer=this.pdfViewerBase.getElement('_currentPageInput');if(this.pdfViewerBase.getElement('_currentPageInput')){this.currentPageBoxElement=this.pdfViewerBase.getElement('_currentPageInput').children[0].children[0];}this.firstPageElement=this.pdfViewerBase.getElement('_firstPage');this.updateClassListForToolbarItem(this.firstPageElement);this.previousPageElement=this.pdfViewerBase.getElement('_previousPage');this.updateClassListForToolbarItem(this.previousPageElement);this.nextPageElement=this.pdfViewerBase.getElement('_nextPage');this.updateClassListForToolbarItem(this.nextPageElement);this.lastPageElement=this.pdfViewerBase.getElement('_lastPage');this.updateClassListForToolbarItem(this.lastPageElement);this.zommOutElement=this.pdfViewerBase.getElement('_zoomOut');this.updateClassListForToolbarItem(this.zommOutElement);this.zoomInElement=this.pdfViewerBase.getElement('_zoomIn');this.updateClassListForToolbarItem(this.zoomInElement);this.zoomDropDownElement=this.pdfViewerBase.getElement('_zoomDropDown');this.selectToolElement=this.pdfViewerBase.getElement('_selectTool');this.handToolElement=this.pdfViewerBase.getElement('_handTool');this.undoElement=this.pdfViewerBase.getElement('_undo');this.updateClassListForToolbarItem(this.undoElement);this.redoElement=this.pdfViewerBase.getElement('_redo');this.updateClassListForToolbarItem(this.redoElement);this.commentElement=this.pdfViewerBase.getElement('_comment');this.submitFormButton=this.pdfViewerBase.getElement('_submitFormButton');this.searchElement=this.pdfViewerBase.getElement('_search');this.updateClassListForToolbarItem(this.searchElement);this.annotationElement=this.pdfViewerBase.getElement('_annotation');if(this.annotationElement){this.editAnnotationButtonElement=this.annotationElement.children[0];}if(this.editAnnotationButtonElement){this.editAnnotationButtonElement.classList.add('e-pv-tbar-btn');var editAnnotationSpanElement=this.editAnnotationButtonElement.childNodes[0];editAnnotationSpanElement.classList.remove('e-icons','e-btn-icon');}this.printElement=this.pdfViewerBase.getElement('_print');this.updateClassListForToolbarItem(this.printElement);this.downloadElement=this.pdfViewerBase.getElement('_download');this.updateClassListForToolbarItem(this.downloadElement);this.highlightElement=this.pdfViewerBase.getElement('_highLight');this.underlineElement=this.pdfViewerBase.getElement('_underline');this.strikeThroughElement=this.pdfViewerBase.getElement('_strikethrough');this.shapeElement=this.pdfViewerBase.getElement('_annotation_shapes');this.calibrateElement=this.pdfViewerBase.getElement('_annotation_calibrate');this.stampElement=this.pdfViewerBase.getElement('_annotation_stamp');this.freeTextElement=this.pdfViewerBase.getElement('_annotation_freeTextEdit');this.updateClassListForToolbarItem(this.freeTextElement);this.signatureElement=this.pdfViewerBase.getElement('_annotation_signature');this.updateClassListForToolbarItem(this.signatureElement);this.inkElement=this.pdfViewerBase.getElement('_annotation_ink');if(this.pdfViewerBase.getElement('_annotation_fontsize')){// tslint:disable-next-line:max-line-length
this.annotationFontSizeInputElement=this.pdfViewerBase.getElement('_annotation_fontsize').children[0].children[0];}if(this.pdfViewerBase.getElement('_annotation_fontsize')){// tslint:disable-next-line:max-line-length
this.annotationFontFamilyInputElement=this.pdfViewerBase.getElement('_annotation_fontname').children[0].children[0];}this.annotationColorElement=this.pdfViewerBase.getElement('_annotation_color');this.annotationStrokeColorElement=this.pdfViewerBase.getElement('_annotation_stroke');this.annotationThicknessElement=this.pdfViewerBase.getElement('_annotation_thickness');this.annotationOpacityElement=this.pdfViewerBase.getElement('_annotation_opacity');this.annotationFontColorElement=this.pdfViewerBase.getElement('_annotation_textcolor');this.annotationFontFamilyElement=this.pdfViewerBase.getElement('_annotation_fontname');this.annotationFontSizeElement=this.pdfViewerBase.getElement('_annotation_fontsize');this.annotationTextAlignElement=this.pdfViewerBase.getElement('_annotation_textalign');this.annotationTextColorElement=this.pdfViewerBase.getElement('_annotation_textcolor');this.annotationTextPropertiesElement=this.pdfViewerBase.getElement('_annotation_textproperties');this.annotationDeleteElement=this.pdfViewerBase.getElement('_annotation_delete');this.annotationCommentPanelElement=this.pdfViewerBase.getElement('_annotation_commentPanel');this.annotationCloseElement=this.pdfViewerBase.getElement('_annotation_close');this.mobileToolbarContainerElement=this.pdfViewerBase.getElement('_mobileToolbarContainer');this.mobileSearchPreviousOccurenceElement=this.pdfViewerBase.getElement('_prev_occurrence');this.mobileSearchNextOccurenceElement=this.pdfViewerBase.getElement('_next_occurrence');};/**
     * @private
     */BlazorUiAdaptor.prototype.updateClassListForToolbarItem=function(toolbarItemElement){if(!sf.base.isNullOrUndefined(toolbarItemElement)&&!sf.base.isNullOrUndefined(toolbarItemElement.childNodes[0])){toolbarItemElement.children[0].classList.add('e-pv-tbar-btn');if(!sf.base.isNullOrUndefined(toolbarItemElement.childNodes[0].childNodes[0])){var toolbarItemChildElement=toolbarItemElement.childNodes[0].childNodes[0];toolbarItemChildElement.classList.remove('e-icons','e-btn-icon');}}};/**
     * Update the total page.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateTotalPage=function(){if(this.totalPageElement){this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant('of')+this.pdfViewerBase.pageCount.toString();}};/**
     * Update current page.
     * @param {number} pageNumber - The pageNumber.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateCurrentPage=function(pageNumber){if(this.currentPageBoxElement){this.currentPageBoxElement.value=pageNumber.toString();}};/**
     * Load the PDF document.
     * @returns {void}
     */BlazorUiAdaptor.prototype.loadDocument=function(){return __awaiter$3(this,void 0,void 0,function(){var toolbarIcons,Of;return __generator$3(this,function(_a){switch(_a.label){case 0:toolbarIcons={};if(!this.pdfViewer.enableNavigation)return[3/*break*/,3];if(this.currentPageBoxElementContainer){this.currentPageBoxElementContainer.classList.remove(this.cssClass);toolbarIcons["pageBoxValue"]=true;}if(this.currentPageBoxElement){this.currentPageBoxElement.value='1';}if(!this.totalPageElement)return[3/*break*/,2];return[4/*yield*/,this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Of")];case 1:Of=_a.sent();this.totalPageElement.textContent=Of+" "+this.pdfViewerBase.pageCount.toString();_a.label=2;case 2:if(this.firstPageElement&&!this.isEnabled(this.firstPageElement)){this.firstPageElement.className+=this.disableClass;}if(this.previousPageElement&&!this.isEnabled(this.previousPageElement)){this.previousPageElement.className+=this.disableClass;}if(this.nextPageElement){this.nextPageElement.classList.remove(this.cssClass);toolbarIcons["nextPageValue"]=true;}if(this.lastPageElement){this.lastPageElement.classList.remove(this.cssClass);toolbarIcons["lastPageValue"]=true;}if(this.pdfViewerBase.pageCount===1){if(this.nextPageElement&&!this.nextPageElement.classList.contains(this.cssClass)){this.nextPageElement.className+=this.disableClass;toolbarIcons["nextPageValue"]=false;}if(this.lastPageElement&&!this.lastPageElement.classList.contains(this.cssClass)){this.lastPageElement.className+=this.disableClass;toolbarIcons["lastPageValue"]=false;}}_a.label=3;case 3:if(this.pdfViewer.enableMagnification){if(this.zoomInElement){this.zoomInElement.classList.remove(this.cssClass);toolbarIcons["zoomInValue"]=true;}if(this.zommOutElement){this.zommOutElement.classList.remove(this.cssClass);toolbarIcons["zoomOutValue"]=true;}if(this.zoomDropDownElement){this.zoomDropDownElement.classList.remove(this.cssClass);toolbarIcons["zoomDropDownValue"]=true;}}if(this.pdfViewer.enableTextSelection&&this.selectToolElement&&this.pdfViewer.toolbar){this.selectToolElement.classList.remove(this.cssClass);toolbarIcons["selectToolValue"]=true;this.selectItem(this.pdfViewer.toolbar.SelectToolElement);}if(this.handToolElement){this.handToolElement.classList.remove(this.cssClass);toolbarIcons["handToolValue"]=true;}if(this.pdfViewer.enableStickyNotesAnnotation&&this.commentElement){this.commentElement.classList.remove(this.cssClass);toolbarIcons["commentValue"]=true;}if(this.pdfViewer.enableTextSearch&&this.searchElement){this.searchElement.classList.remove(this.cssClass);toolbarIcons["searchValue"]=true;}if(this.pdfViewer.isFormFieldDocument&&this.submitFormButton){this.submitFormButton.classList.remove(this.cssClass);toolbarIcons["submitFormValue"]=true;}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableAnnotationToolbar&&this.annotationElement){this.annotationElement.classList.remove(this.cssClass);toolbarIcons["annotationValue"]=true;}if(this.pdfViewer.enablePrint&&this.printElement){this.printElement.classList.remove(this.cssClass);toolbarIcons["printValue"]=true;}if(this.pdfViewer.enableDownload&&this.downloadElement){this.downloadElement.classList.remove(this.cssClass);toolbarIcons["downloadValue"]=true;}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableTextMarkupAnnotation){if(this.highlightElement){this.highlightElement.classList.remove(this.cssClass);toolbarIcons["highlightValue"]=true;}if(this.underlineElement){this.underlineElement.classList.remove(this.cssClass);toolbarIcons["underlineValue"]=true;}if(this.strikeThroughElement){this.strikeThroughElement.classList.remove(this.cssClass);toolbarIcons["strikeThroughValue"]=true;}}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableShapeAnnotation&&this.shapeElement){this.shapeElement.classList.remove(this.cssClass);toolbarIcons["shapeValue"]=true;}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation&&this.calibrateElement){this.calibrateElement.classList.remove(this.cssClass);toolbarIcons["calibrateValue"]=true;}if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableStampAnnotations&&this.stampElement){this.stampElement.classList.remove(this.cssClass);toolbarIcons["stampValue"]=true;}if(this.pdfViewer.enableFreeText&&this.freeTextElement){this.freeTextElement.classList.remove(this.cssClass);toolbarIcons["freeTextValue"]=true;}if(this.pdfViewer.enableHandwrittenSignature&&this.signatureElement){this.signatureElement.classList.remove(this.cssClass);toolbarIcons["signatureValue"]=true;}if(this.pdfViewer.enableInkAnnotation&&this.inkElement){this.inkElement.classList.remove(this.cssClass);toolbarIcons["inkValue"]=true;}if(this.annotationCommentPanelElement&&this.pdfViewer.enableCommentPanel){this.annotationCommentPanelElement.classList.remove(this.cssClass);toolbarIcons["annotationCommentPanelValue"]=true;}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableAnnotationToolbar&&this.annotationElement){this.annotationElement.classList.remove(this.cssClass);toolbarIcons["editAnnotationMobile"]=true;}if(this.pdfViewer.enableDownload){toolbarIcons["downloadMobile"]=true;}if(this.pdfViewer.enableTextSearch&&this.searchElement){this.searchElement.classList.remove(this.cssClass);toolbarIcons["searchMobile"]=true;}if(this.pdfViewer.enableCommentPanel){toolbarIcons["mobileCommentPanelVisible"]=true;}}this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateToolbarIcon',toolbarIcons);return[2/*return*/];}});});};BlazorUiAdaptor.prototype.selectItem=function(element){if(element){element.classList.add("e-pv-select");}};BlazorUiAdaptor.prototype.deselectItem=function(element){if(element){element.classList.remove("e-pv-select");}};BlazorUiAdaptor.prototype.showAnnotationToolbar=function(isToolbarVisible,iskeyBoardClickEvent){if(this.pdfViewer.toolbar){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(isToolbarVisible);if(isToolbarVisible){this.pdfViewer.toolbar.selectItem(this.editAnnotationButtonElement);}else{this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement);if(!iskeyBoardClickEvent){this.pdfViewerBase.focusViewerContainer();}}}};BlazorUiAdaptor.prototype.closeAnnotationToolbar=function(){if(this.pdfViewer.toolbar){this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement);if(this.pdfViewer.toolbar.annotationToolbarModule){this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(false);}}this.pdfViewerBase.navigationPane.closeCommentPanelContainer();};/**
     * Reset the toolbar.
     * @returns {void}
     */BlazorUiAdaptor.prototype.resetToolbar=function(){if(this.pdfViewer.enableToolbar){if(this.currentPageBoxElement){this.currentPageBoxElement.value='0';}if(this.totalPageElement){this.totalPageElement.textContent=this.pdfViewer.localeObj.getConstant('of')+'0';}if(this.currentPageBoxElementContainer&&!this.isEnabled(this.currentPageBoxElementContainer)){this.currentPageBoxElementContainer.className+=this.disableClass;}if(this.firstPageElement&&!this.isEnabled(this.firstPageElement)){this.firstPageElement.className+=this.disableClass;}if(this.previousPageElement&&!this.isEnabled(this.previousPageElement)){this.previousPageElement.className+=this.disableClass;}if(this.nextPageElement&&!this.isEnabled(this.nextPageElement)){this.nextPageElement.className+=this.disableClass;}if(this.lastPageElement&&!this.isEnabled(this.lastPageElement)){this.lastPageElement.className+=this.disableClass;}if(this.zoomInElement&&!this.isEnabled(this.zoomInElement)){this.zoomInElement.className+=this.disableClass;}if(this.zommOutElement&&!this.isEnabled(this.zommOutElement)){this.zommOutElement.className+=this.disableClass;}if(this.zoomDropDownElement&&!this.isEnabled(this.zoomDropDownElement)){this.zoomDropDownElement.className+=this.disableClass;}if(this.selectToolElement&&!this.isEnabled(this.selectToolElement)){this.selectToolElement.className+=this.disableClass;}if(this.handToolElement&&!this.isEnabled(this.handToolElement)){this.handToolElement.className+=this.disableClass;}if(this.undoElement&&!this.isEnabled(this.undoElement)){this.undoElement.className+=this.disableClass;}if(this.redoElement&&!this.isEnabled(this.redoElement)){this.redoElement.className+=this.disableClass;}if(this.commentElement&&!this.isEnabled(this.commentElement)){this.commentElement.className+=this.disableClass;}if(this.searchElement&&!this.isEnabled(this.searchElement)){this.searchElement.className+=this.disableClass;}if(this.submitFormButton&&!this.isEnabled(this.submitFormButton)){this.submitFormButton.className+=this.disableClass;}if(this.annotationElement&&!this.isEnabled(this.annotationElement)){this.annotationElement.className+=this.disableClass;}if(this.printElement&&!this.isEnabled(this.printElement)){this.printElement.className+=this.disableClass;}if(this.downloadElement&&!this.isEnabled(this.downloadElement)){this.downloadElement.className+=this.disableClass;}}if(this.pdfViewer.enableAnnotationToolbar){if(this.highlightElement&&!this.isEnabled(this.highlightElement)){this.highlightElement.className+=this.disableClass;}if(this.underlineElement&&!this.isEnabled(this.underlineElement)){this.underlineElement.className+=this.disableClass;}if(this.strikeThroughElement&&!this.isEnabled(this.strikeThroughElement)){this.strikeThroughElement.className+=this.disableClass;}if(this.shapeElement&&!this.isEnabled(this.shapeElement)){this.shapeElement.className+=this.disableClass;}if(this.calibrateElement&&!this.isEnabled(this.calibrateElement)){this.calibrateElement.className+=this.disableClass;}if(this.stampElement&&!this.isEnabled(this.stampElement)){this.stampElement.className+=this.disableClass;}if(this.freeTextElement&&!this.isEnabled(this.freeTextElement)){this.freeTextElement.className+=this.disableClass;}if(this.signatureElement&&!this.isEnabled(this.signatureElement)){this.signatureElement.className+=this.disableClass;}if(this.inkElement&&!this.isEnabled(this.inkElement)){this.inkElement.className+=this.disableClass;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;}if(this.annotationTextColorElement&&!this.isEnabled(this.annotationTextColorElement)){this.annotationTextColorElement.className+=this.disableClass;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;}if(this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)){this.annotationCommentPanelElement.className+=this.disableClass;}}};/**
     * When annotation selection changed.
     * @param {boolean} currentPageNumber - The current page number.
     * @returns {void}
     */BlazorUiAdaptor.prototype.EnableDeleteOption=function(isEnable){var toolbarIcons={};if(this.annotationDeleteElement!==null){if(isEnable){this.annotationDeleteElement.classList.remove(this.cssClass);toolbarIcons["deleteValue"]=true;}else{if(!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;toolbarIcons["deleteValue"]=false;}}this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateToolbarIcon',toolbarIcons);}};/**
     * when the page changes.
     * @param {number} currentPageNumber - The current page number.
     * @returns {void}
     */BlazorUiAdaptor.prototype.pageChanged=function(currentPageNumber){var toolbarIcons={};if(this.pdfViewer.enableNavigation&&this.currentPageBoxElement&&this.currentPageBoxElement.value){this.currentPageBoxElement.value=currentPageNumber.toString();}if(currentPageNumber===this.pdfViewer.pageCount){if(this.nextPageElement&&!this.isEnabled(this.nextPageElement)){this.nextPageElement.className+=this.disableClass;toolbarIcons["nextPageValue"]=false;}if(this.previousPageElement){this.previousPageElement.classList.remove(this.cssClass);toolbarIcons["previousPageValue"]=true;}if(this.lastPageElement&&!this.isEnabled(this.lastPageElement)){this.lastPageElement.className+=this.disableClass;toolbarIcons["lastPageValue"]=false;}if(this.firstPageElement){this.firstPageElement.classList.remove(this.cssClass);toolbarIcons["firstPageValue"]=true;}}if(currentPageNumber<this.pdfViewer.pageCount&&currentPageNumber!==1){if(this.firstPageElement){this.firstPageElement.classList.remove(this.cssClass);toolbarIcons["firstPageValue"]=true;}if(this.previousPageElement){this.previousPageElement.classList.remove(this.cssClass);toolbarIcons["previousPageValue"]=true;}if(this.nextPageElement){this.nextPageElement.classList.remove(this.cssClass);toolbarIcons["nextPageValue"]=true;}if(this.lastPageElement){this.lastPageElement.classList.remove(this.cssClass);toolbarIcons["lastPageValue"]=true;}}if(currentPageNumber===1){if(this.nextPageElement){this.nextPageElement.classList.remove(this.cssClass);toolbarIcons["nextPageValue"]=true;}if(this.lastPageElement){this.lastPageElement.classList.remove(this.cssClass);toolbarIcons["lastPageValue"]=true;}if(this.firstPageElement&&!this.isEnabled(this.firstPageElement)){this.firstPageElement.className+=this.disableClass;toolbarIcons["firstPageValue"]=false;}if(this.previousPageElement&&!this.isEnabled(this.previousPageElement)){this.previousPageElement.className+=this.disableClass;toolbarIcons["previousPageValue"]=false;}}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);};/**
     * @private
     */BlazorUiAdaptor.prototype.canUndoRedo=function(){var canUndo=this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.actionCollection&&this.pdfViewer.annotationModule.actionCollection.length>0?true:false;var canRedo=this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redoCollection&&this.pdfViewer.annotationModule.redoCollection.length>0?true:false;this.pdfViewer._dotnetInstance.invokeMethodAsync('updateUndoRedoState',canUndo,canRedo);};/**
     * @param {string} item - The current item.
     * @param {boolean} enable - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateUndoRedoButton=function(item,enable){var toolbarIcons={};if(item==='undo'){if(enable&&this.undoElement){this.undoElement.classList.remove(this.cssClass);toolbarIcons["undoValue"]=true;}else{if(this.undoElement&&!this.isEnabled(this.undoElement)){this.undoElement.className+=this.disableClass;toolbarIcons["undoValue"]=false;}}this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateToolbarIcon',toolbarIcons);}if(item==='redo'){if(enable&&this.redoElement){this.redoElement.classList.remove(this.cssClass);toolbarIcons["redoValue"]=true;}else{if(this.redoElement&&!this.isEnabled(this.redoElement)){this.redoElement.className+=this.disableClass;toolbarIcons["redoValue"]=false;}}this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateToolbarIcon',toolbarIcons);this.canUndoRedo();}};/**
     * @returns {void}
     */BlazorUiAdaptor.prototype.disableUndoRedoButton=function(){if(this.undoElement&&!this.isEnabled(this.undoElement)){this.undoElement.className+=this.disableClass;}if(this.redoElement&&!this.isEnabled(this.redoElement)){this.redoElement.className+=this.disableClass;}};/**
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableTextMarkupAnnotationPropertiesTools=function(isEnable){var toolbarIcons={};if(isEnable){if(this.annotationColorElement){this.annotationColorElement.classList.remove(this.cssClass);toolbarIcons["fillColor"]=true;}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);toolbarIcons["opacity"]=true;}}else{if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;toolbarIcons["opacity"]=false;}if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;toolbarIcons["fillColor"]=false;}}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;toolbarIcons["fontColor"]=false;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;toolbarIcons["fontFamily"]=false;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;toolbarIcons["fontSize"]=false;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;toolbarIcons["textAlign"]=false;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;toolbarIcons["textStyle"]=false;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;toolbarIcons["strokeColor"]=false;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;toolbarIcons["thickness"]=false;}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);};/**
     * @param {boolean} isEnable - To enable the item or not.
     * @param {boolean} isProperitiesChange - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableAnnotationPropertiesTool=function(isEnable,isProperitiesChange){if(isProperitiesChange){var toolbarIcons={};if(isEnable){if(this.annotationColorElement&&this.pdfViewer.selectedItems.annotations[0].measureType!=="Perimeter"){this.annotationColorElement.classList.remove(this.cssClass);toolbarIcons["fillColor"]=true;}if(this.annotationStrokeColorElement){this.annotationStrokeColorElement.classList.remove(this.cssClass);toolbarIcons["strokeColor"]=true;}if(this.annotationThicknessElement){this.annotationThicknessElement.classList.remove(this.cssClass);toolbarIcons["thickness"]=true;}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);toolbarIcons["opacity"]=true;}if(this.pdfViewer.enableShapeLabel){if(this.annotationFontColorElement){this.annotationFontColorElement.classList.remove(this.cssClass);toolbarIcons["fontColor"]=true;}if(this.annotationFontFamilyElement){this.annotationFontFamilyElement.classList.remove(this.cssClass);toolbarIcons["fontFamily"]=true;}if(this.annotationFontSizeElement){this.annotationFontSizeElement.classList.remove(this.cssClass);toolbarIcons["fontSize"]=true;}}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;}}else{if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;toolbarIcons["fillColor"]=false;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;toolbarIcons["strokeColor"]=false;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;toolbarIcons["thickness"]=false;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;toolbarIcons["opacity"]=false;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;toolbarIcons["deleteValue"]=false;}}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);}};/**
     * @param {boolean} isEnable - To enable the item or not.
     * @param {boolean} isProperitiesChange - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableFreeTextAnnotationPropertiesTools=function(isEnable,isProperitiesChange){var _this=this;if(isProperitiesChange){var toolbarIcons_1={};if(isEnable){var updateToolbarIcons=function updateToolbarIcons(element,icon){if(element){element.classList.remove(_this.cssClass);toolbarIcons_1[icon]=true;}};if(this.annotationColorElement||this.annotationStrokeColorElement||this.annotationThicknessElement||this.annotationOpacityElement||this.annotationFontColorElement||this.annotationFontFamilyElement||this.annotationFontSizeElement||this.annotationTextAlignElement||this.annotationTextPropertiesElement||this.annotationDeleteElement||this.annotationCommentPanelElement){updateToolbarIcons(this.annotationColorElement,"fillColor");updateToolbarIcons(this.annotationStrokeColorElement,"strokeColor");updateToolbarIcons(this.annotationThicknessElement,"thickness");updateToolbarIcons(this.annotationOpacityElement,"opacity");updateToolbarIcons(this.annotationFontColorElement,"fontColor");updateToolbarIcons(this.annotationFontFamilyElement,"fontFamily");updateToolbarIcons(this.annotationFontSizeElement,"fontSize");updateToolbarIcons(this.annotationTextAlignElement,"textAlign");updateToolbarIcons(this.annotationTextPropertiesElement,"textStyle");updateToolbarIcons(this.annotationDeleteElement,"deleteValue");updateToolbarIcons(this.annotationCommentPanelElement,"annotationCommentPanelValue");}}else{var updateToolbarIcon=function updateToolbarIcon(element,icon){if(element&&!_this.isEnabled(element)){element.className+=_this.disableClass;toolbarIcons_1[icon]=false;}};if(this.annotationFontFamilyElement||this.annotationFontSizeElement||this.annotationFontColorElement||this.annotationTextAlignElement||this.annotationTextPropertiesElement){updateToolbarIcon(this.annotationFontFamilyElement,"fontFamily");updateToolbarIcon(this.annotationFontSizeElement,"fontSize");updateToolbarIcon(this.annotationFontColorElement,"fontColor");updateToolbarIcon(this.annotationTextAlignElement,"textAlign");updateToolbarIcon(this.annotationTextPropertiesElement,"textStyle");}}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons_1);}};/**
     * @param {boolean} isEnable - To enable the item or not.
     * @param {boolean} isPropertiesChange - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableStampAnnotationPropertiesTools=function(isEnable,isPropertiesChange){var toolbarIcons={};if(isEnable){if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);toolbarIcons["opacity"]=true;}if(this.annotationDeleteElement){this.annotationDeleteElement.classList.remove(this.cssClass);toolbarIcons["deleteValue"]=true;}if(this.annotationCommentPanelElement){this.annotationCommentPanelElement.classList.remove(this.cssClass);}}else{if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;toolbarIcons["opacity"]=false;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;toolbarIcons["deleteValue"]=false;}if(this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)){this.annotationCommentPanelElement.className+=this.disableClass;}}if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;toolbarIcons["fillColor"]=false;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;toolbarIcons["strokeColor"]=false;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;toolbarIcons["thickness"]=false;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;toolbarIcons["opacity"]=false;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;toolbarIcons["fontColor"]=false;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;toolbarIcons["fontFamily"]=false;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;toolbarIcons["fontSize"]=false;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;toolbarIcons["textAlign"]=false;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;toolbarIcons["textStyle"]=false;}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);};/**
     * @param {boolean} isEnable - To enable the item or not.
     * @param {boolean} isProperitiesChange - To enable the item or not.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableSignaturePropertiesTools=function(isEnable,isProperitiesChange){var toolbarIcons={};if(isEnable){if(this.annotationStrokeColorElement){this.annotationStrokeColorElement.classList.remove(this.cssClass);toolbarIcons["strokeColor"]=true;}if(this.annotationThicknessElement){this.annotationThicknessElement.classList.remove(this.cssClass);toolbarIcons["thickness"]=true;}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);toolbarIcons["opacity"]=true;}if(this.annotationDeleteElement){this.annotationDeleteElement.classList.remove(this.cssClass);toolbarIcons["deleteValue"]=true;}if(this.annotationCommentPanelElement){this.annotationCommentPanelElement.classList.remove(this.cssClass);}}else{if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;toolbarIcons["strokeColor"]=false;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;toolbarIcons["thickness"]=false;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;toolbarIcons["opacity"]=false;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;toolbarIcons["deleteValue"]=false;}if(this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)){this.annotationCommentPanelElement.className+=this.disableClass;}}if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;toolbarIcons["fillColor"]=false;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;toolbarIcons["fontColor"]=false;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;toolbarIcons["fontFamily"]=false;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;toolbarIcons["fontSize"]=false;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;toolbarIcons["textAlign"]=false;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;toolbarIcons["textStyle"]=false;}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);};/**
     * @returns {void}
     */BlazorUiAdaptor.prototype.annotationAdd=function(){var toolbarIcons={};if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;toolbarIcons["fillColor"]=false;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;toolbarIcons["strokeColor"]=false;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;toolbarIcons["thickness"]=false;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;toolbarIcons["opacity"]=false;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;toolbarIcons["fontColor"]=false;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;toolbarIcons["fontFamily"]=false;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;toolbarIcons["fontSize"]=false;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;toolbarIcons["textAlign"]=false;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;toolbarIcons["textStyle"]=false;}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);};/**
     * @returns {void}
     */BlazorUiAdaptor.prototype.annotationUnSelect=function(){var toolbarIcons={};if(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)){this.annotationColorElement.className+=this.disableClass;toolbarIcons["fillColor"]=false;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;toolbarIcons["strokeColor"]=false;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;toolbarIcons["thickness"]=false;}if(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)){this.annotationOpacityElement.className+=this.disableClass;toolbarIcons["opacity"]=false;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;toolbarIcons["fontColor"]=false;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;toolbarIcons["fontFamily"]=false;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;toolbarIcons["fontSize"]=false;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;toolbarIcons["textAlign"]=false;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;toolbarIcons["textStyle"]=false;}if(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)){this.annotationDeleteElement.className+=this.disableClass;toolbarIcons["deleteValue"]=false;}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);};/**
     * @param {string} annotationType - The annotationType.
     * @returns {void}
     */BlazorUiAdaptor.prototype.annotationSelect=function(annotationType){if(annotationType==='FreeText'){var toolbarIcons={};if(this.annotationColorElement){this.annotationColorElement.classList.remove(this.cssClass);toolbarIcons["fillColor"]=true;}if(this.annotationStrokeColorElement){this.annotationStrokeColorElement.classList.remove(this.cssClass);toolbarIcons["strokeColor"]=true;}if(this.annotationThicknessElement){this.annotationThicknessElement.classList.remove(this.cssClass);toolbarIcons["thickness"]=true;}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);toolbarIcons["opacity"]=true;}if(this.annotationFontColorElement){this.annotationFontColorElement.classList.remove(this.cssClass);toolbarIcons["fontColor"]=true;}if(this.annotationFontFamilyElement){this.annotationFontFamilyElement.classList.remove(this.cssClass);toolbarIcons["fontFamily"]=true;}if(this.annotationFontSizeElement){this.annotationFontSizeElement.classList.remove(this.cssClass);toolbarIcons["fontSize"]=true;}if(this.annotationTextAlignElement){this.annotationTextAlignElement.classList.remove(this.cssClass);toolbarIcons["textAlign"]=true;}if(this.annotationTextPropertiesElement){this.annotationTextPropertiesElement.classList.remove(this.cssClass);toolbarIcons["textStyle"]=true;}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);}if(annotationType==='Shape'||annotationType==='Measure'){var toolbarIcons={};if(this.annotationColorElement&&this.pdfViewer.selectedItems.annotations[0].measureType!=="Perimeter"){this.annotationColorElement.classList.remove(this.cssClass);toolbarIcons["fillColor"]=true;}if(this.annotationStrokeColorElement){this.annotationStrokeColorElement.classList.remove(this.cssClass);toolbarIcons["strokeColor"]=true;}if(this.annotationThicknessElement){this.annotationThicknessElement.classList.remove(this.cssClass);toolbarIcons["thickness"]=true;}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);toolbarIcons["opacity"]=true;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;toolbarIcons["fontColor"]=false;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;toolbarIcons["fontFamily"]=false;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;toolbarIcons["fontSize"]=false;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;toolbarIcons["textAlign"]=false;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;toolbarIcons["textStyle"]=false;}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);}if(annotationType==='TextMarkup'){var toolbarIcons={};if(this.annotationColorElement){this.annotationColorElement.classList.remove(this.cssClass);toolbarIcons["fillColor"]=true;}if(this.annotationDeleteElement){this.annotationDeleteElement.classList.remove(this.cssClass);toolbarIcons["deleteValue"]=true;}if(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)){this.annotationStrokeColorElement.className+=this.disableClass;toolbarIcons["strokeColor"]=false;}if(this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)){this.annotationThicknessElement.className+=this.disableClass;toolbarIcons["thickness"]=false;}if(this.annotationOpacityElement){this.annotationOpacityElement.classList.remove(this.cssClass);toolbarIcons["opacity"]=true;}if(this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)){this.annotationFontColorElement.className+=this.disableClass;toolbarIcons["fontColor"]=false;}if(this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)){this.annotationFontFamilyElement.className+=this.disableClass;toolbarIcons["fontFamily"]=false;}if(this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)){this.annotationFontSizeElement.className+=this.disableClass;toolbarIcons["fontSize"]=false;}if(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)){this.annotationTextAlignElement.className+=this.disableClass;toolbarIcons["textAlign"]=false;}if(this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)){this.annotationTextPropertiesElement.className+=this.disableClass;toolbarIcons["textStyle"]=false;}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",toolbarIcons);}if(this.annotationDeleteElement){this.annotationDeleteElement.classList.remove(this.cssClass);}if(this.annotationCommentPanelElement){this.annotationCommentPanelElement.classList.remove(this.cssClass);}};/**
     * @param {string} fontFamily - The fontFamily.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateFontFamilyInIcon=function(fontFamily){if(this.annotationFontFamilyInputElement){this.annotationFontFamilyInputElement.value=fontFamily;}};/**
     * @param {number} fontSize - The fontSize.
     * @returns {void}
     */BlazorUiAdaptor.prototype.updateFontSizeInIcon=function(fontSize){var fontValue=fontSize.toString()+'px';if(this.annotationFontSizeInputElement){this.annotationFontSizeInputElement.value=fontValue;}};/**
     * @param {boolean} isEnable - To enable or disable.
     * @returns {void}
     */BlazorUiAdaptor.prototype.enableSearchItems=function(isEnable){if(isEnable&&this.mobileSearchPreviousOccurenceElement&&this.mobileSearchNextOccurenceElement){this.mobileSearchPreviousOccurenceElement.classList.remove(this.cssClass);this.mobileSearchNextOccurenceElement.classList.remove(this.cssClass);}else{if(this.mobileSearchPreviousOccurenceElement&&!this.isEnabled(this.mobileSearchPreviousOccurenceElement)){this.mobileSearchPreviousOccurenceElement.className+=this.disableClass;}if(this.mobileSearchNextOccurenceElement&&!this.isEnabled(this.mobileSearchNextOccurenceElement)){this.mobileSearchNextOccurenceElement.className+=this.disableClass;}}};/**
     * @param {boolean} isTapHidden - To enable or disable.
     * @returns {void}
     */BlazorUiAdaptor.prototype.tapOnMobileDevice=function(isTapHidden){if(this.mobileToolbarContainerElement!=null){if(isTapHidden){this.mobileToolbarContainerElement.style.display='none';}else{this.mobileToolbarContainerElement.style.display='block';}}};/**
     * @param {HTMLElement} element - The HTMLElement.
     * @returns {boolean} - Returns trur or false.
     */BlazorUiAdaptor.prototype.isEnabled=function(element){if(element){return element.classList.contains(this.cssClass);}else{return true;}};return BlazorUiAdaptor;}();var __awaiter$2=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator$2=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};/**
 * The `PdfViewerBase` module is used to handle base methods of PDF viewer.
 *
 * @hidden
 */var PdfViewerBase=/** @class */function(){/**
     * Initialize the constructor of PDFViewerBase
     *
     * @param { PdfViewer } viewer - Specified PdfViewer class.
     */function PdfViewerBase(viewer){var _this_1=this;/**
         * @private
         */this.hyperlinkAndLinkAnnotation={};/**
         * @private
         */this.pageTextDetails={};/**
         * @private
         */this.pageImageDetails={};/**
         * @private
         */this.customCommands={};/**
         * @private
         */this.pageSize=[];/**
         * @private
         */this.pageCount=0;/**
         * @private
         */this.printScaleFactor=1;/**
         * @private
         */this.isReRenderRequired=true;/**
         * @private
         */this.currentPageNumber=1;/**
         * @private
         */this.activeElements=new ActiveElements();/**
         * @private
         */this.mouseDownEvent=null;/**
         * @private
         */this.isDocumentLoaded=false;/**
         * @private
         */this.renderedPagesList=[];/**
         * @private
         */this.pageGap=8;/**
         * @private
         */this.signatureAdded=false;/**
         * @private
         */this.isFreeTextSelected=false;/**
        * @private
        */this.pageLeft=0;this.sessionLimit=1000;this.pageStopValue=300;/**
         * @private
         */this.toolbarHeight=56;this.pageLimit=0;this.previousPage=0;this.isViewerMouseDown=false;this.isViewerMouseWheel=false;this.scrollPosition=0;this.sessionStorage=[];/**
         * @private
         */this.isLoadedFormFieldAdded=false;this.pointerCount=0;this.pointersForTouch=[];/**
         * @private
         */this.isPasswordAvailable=false;/**
         * @private
         */this.passwordData='';/**
         * @private
         */this.reRenderedCount=0;this.mouseX=0;this.mouseY=0;/**
         * @private
         */this.mouseLeft=0;/**
         * @private
         */this.mouseTop=0;this.touchClientX=0;this.touchClientY=0;this.previousTime=0;this.currentTime=0;this.isTouchScrolled=false;this.isLongTouchPropagated=false;// eslint-disable-next-line
this.longTouchTimer=null;this.isViewerContainerDoubleClick=false;// eslint-disable-next-line
this.dblClickTimer=null;/**
         * @private
         */this.pinchZoomStorage=[];/**
         * @private
         */this.isTextSelectionDisabled=false;/**
         * @private
         */this.isPanMode=false;this.dragX=0;this.dragY=0;this.isScrollbarMouseDown=false;this.scrollX=0;this.scrollY=0;this.ispageMoved=false;this.isThumb=false;this.isTapHidden=false;// eslint-disable-next-line
this.singleTapTimer=null;this.tapCount=0;this.inputTapCount=0;/**
         * @private
         */this.isInitialLoaded=false;this.annotationPageList=[];this.importPageList=[];/**
         * @private
         */this.isImportAction=false;this.isImportedAnnotation=false;/**
         * @private
         */this.isAnnotationCollectionRemoved=false;/**
         * @private
         */this.tool=null;// eslint-disable-next-line
this.action='Select';/**
         * @private
         */this.eventArgs=null;/**
         * @private
         */this.inAction=false;/**
         * @private
         */this.isMouseDown=false;/**
         * @private
         */this.isStampMouseDown=false;/**
         * @private
         */this.stampAdded=false;/**
         * @private
         */this.customStampCount=0;/**
         * @private
         */this.isDynamicStamp=false;/**
         * @private
         */this.isMixedSizeDocument=false;/**
         * @private
         */this.highestWidth=0;/**
         * @private
         */this.highestHeight=0;/**
         * @private
         */this.customStampCollection=[];/**
         * @private
         */this.isAlreadyAdded=false;/**
         * @private
         */this.isWebkitMobile=false;/**
         * @private
         */this.isFreeTextContextMenu=false;/**
         * @private
         */this.isSelection=false;/**
         * @private
         */this.isAddAnnotation=false;/**
         * @private
         */ // eslint-disable-next-line
this.annotationComments=null;/**
         * @private
         */this.isToolbarSignClicked=false;/**
         * @private
         */this.signatureCount=0;/**
         * @private
         */this.isSignatureAdded=false;/**
         * @private
         */this.isNewSignatureAdded=false;/**
         * @private
         */this.isInitialPageMode=false;/**
         * @private
         */ // eslint-disable-next-line
this.documentAnnotationCollections=null;/**
         * @private
         */this.annotationRenderredList=[];/**
         * @private
         */ // eslint-disable-next-line
this.annotationStorage={};/**
         * @private
         */ // eslint-disable-next-line
this.formFieldStorage={};/**
         * @private
         */this.isStorageExceed=false;/**
         * @private
         */this.isNewStamp=false;/**
         * @private
         */ // eslint-disable-next-line
this.downloadCollections={};/**
         * @private
         */this.isAnnotationAdded=false;/**
         * @private
         */ // eslint-disable-next-line
this.annotationEvent=null;/**
         * @private
        */this.isAnnotationDrawn=false;/**
         * @private
         */this.isAnnotationSelect=false;/**
         * @private
         */this.isAnnotationMouseDown=false;/**
         * @private
         */this.isAnnotationMouseMove=false;/**
         * @private
         */this.validateForm=false;/**
         * @private
         */this.isMinimumZoom=false;/**
         * @private
         */this.documentLoaded=false;this.tileRenderCount=0;this.tileRequestCount=0;/**
         * @private
         */this.isTileImageRendered=false;this.isDataExits=false;this.requestLists=[];this.tilerequestLists=[];/**
         * @private
         */this.isInkAdded=false;/**
         * @private
         */this.inkCount=0;/**
         * @private
         */this.isAddedSignClicked=false;/**
         * @private
         */this.imageCount=0;/**
         * @private
         */this.isMousedOver=false;/**
         * @private
         */this.isFormFieldSelect=false;/**
         * @private
         */this.isFormFieldMouseDown=false;/**
         * @private
         */this.isFormFieldMouseMove=false;/**
         * @private
         */this.isFormFieldMousedOver=false;/**
         * @private
         */this.isPassword=false;/**
         * @private
         */ // eslint-disable-next-line
this.isDigitalSignaturePresent=false;this.isDrawnCompletely=false;/**
         * @private
         */this.isAddComment=false;/**
         * @private
         */this.drawSignatureWithTool=false;/**
         * @private
         */ // eslint-disable-next-line
this.formFieldCollection=[];/**
         * @private
         */ // eslint-disable-next-line
this.nonFillableFields={};/**
         * @private
         */this.isInitialField=false;/**
         * @private
         */this.isTouchDesignerMode=false;/**
         * @private
         */this.isPrint=false;/**
         * @private
         */this.isPDFViewerJson=false;/**
         * @private
         */this.isJsonImported=false;/**
         * @private
         */this.isJsonExported=false;/**
         * @private
         */this.isPageRotated=false;this.downloadFileName='';/**
        * @private
        */ // eslint-disable-next-line
this.isFocusField=false;/**
         * @private
        */this.isAnnotationPresent=false;/**
         * @private
         */ // eslint-disable-next-line
this.isTouchPad=false;/**
         * @private
         */ // eslint-disable-next-line
this.isMacGestureActive=false;/**
         * @private
         */ // eslint-disable-next-line
this.macGestureStartScale=0;/**
         * @private
         */ // eslint-disable-next-line
this.zoomInterval=5;/**
         * @private
         */ // eslint-disable-next-line
this.focusField=[];/**
         * @private
         */ // eslint-disable-next-line
this.isWebAssembly=false;/**
         * @private
         */this.lastInputMethod=null;/**
         * @private
         */ /**
         * EJ2CORE-813 - This flag is represent current device is 'iPad' or 'iPhone' or'iPod' device.
         * @private
         */ // eslint-disable-next-line
this.isDeviceiOS=['iPad Simulator','iPhone Simulator','iPod Simulator','iPad','iPhone','iPod'].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;/**
         * @private
         */ // eslint-disable-next-line
this.isMacSafari=navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1&&!this.isDeviceiOS;/**
         * @returns {void}
         */this.clearSessionStorage=function(){var documentId='';if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){documentId=decodeURI(window.sessionStorage.getItem('hashId'));}else{documentId=window.sessionStorage.getItem('hashId');}var documentLiveCount=window.sessionStorage.getItem('documentLiveCount');if(documentId!==null){// eslint-disable-next-line max-len
var jsonObject={hashId:documentId,documentLiveCount:documentLiveCount,action:'Unload',elementId:_this_1.pdfViewer.dataId};var actionName=window.sessionStorage.getItem('unload');_this_1.clearCache(actionName,jsonObject,_this_1);}window.sessionStorage.removeItem(_this_1.documentId+'_annotations_textMarkup');window.sessionStorage.removeItem(_this_1.documentId+'_annotations_shape');window.sessionStorage.removeItem(_this_1.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(_this_1.documentId+'_annotations_stamp');window.sessionStorage.removeItem(_this_1.documentId+'_annotations_sticky');window.sessionStorage.removeItem(_this_1.documentId+'_annotations_freetext');window.sessionStorage.removeItem(_this_1.documentId+'_formfields');window.sessionStorage.removeItem(_this_1.documentId+'_annotations_sign');window.sessionStorage.removeItem(_this_1.documentId+'_pagedata');window.sessionStorage.removeItem('hashId');window.sessionStorage.removeItem('documentLiveCount');window.sessionStorage.removeItem('currentDocument');window.sessionStorage.removeItem('serviceURL');window.sessionStorage.removeItem('unload');};/**
         * @private
         * @param {MouseEvent} event - Mouse event.
         * @returns {void}
         */this.onWindowResize=function(event){var proxy=null;proxy=_this_1;if(_this_1.pdfViewer.enableRtl){// eslint-disable-next-line max-len
proxy.viewerContainer.style.right=(proxy.navigationPane.sideBarToolbar?proxy.navigationPane.getViewerContainerLeft():0)+'px';// eslint-disable-next-line max-len
proxy.viewerContainer.style.left=(proxy.navigationPane.commentPanelContainer?proxy.navigationPane.commentPanelContainer.offsetWidth:0)+'px';}else{// eslint-disable-next-line max-len
proxy.viewerContainer.style.left=(proxy.navigationPane.sideBarToolbar?proxy.navigationPane.getViewerContainerLeft():0)+'px';// eslint-disable-next-line max-len
proxy.viewerContainer.style.right=(proxy.navigationPane.commentPanelContainer?proxy.navigationPane.commentPanelContainer.offsetWidth:0)+'px';}// eslint-disable-next-line
var viewerElementWidth=proxy.pdfViewer.element.clientWidth>0?proxy.pdfViewer.element.clientWidth:proxy.pdfViewer.element.style.width;// eslint-disable-next-line
var viewerWidth=viewerElementWidth-(proxy.navigationPane.sideBarToolbar?proxy.navigationPane.getViewerContainerLeft():0)-(proxy.navigationPane.commentPanelContainer?proxy.navigationPane.getViewerContainerRight():0);proxy.viewerContainer.style.width=viewerWidth+'px';if(proxy.pdfViewer.toolbarModule){// eslint-disable-next-line
var toolbarContainer=proxy.pdfViewer.element.querySelector('.e-pv-toolbar');var toolbarHeight=0;if(toolbarContainer){toolbarHeight=toolbarContainer.getBoundingClientRect().height;}var annotationToolbarContainer=proxy.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');if(annotationToolbarContainer){var annotationToolbarHeight=0;annotationToolbarHeight=annotationToolbarContainer.getBoundingClientRect().height;proxy.viewerContainer.style.height=proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height,toolbarHeight+annotationToolbarHeight);}else{proxy.viewerContainer.style.height=proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height,toolbarHeight);}}else{proxy.viewerContainer.style.height=proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height,0);}if(proxy.pdfViewer.bookmarkViewModule&&sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode){var bookmarkContainer=proxy.getElement('_bookmarks_container');if(bookmarkContainer){bookmarkContainer.style.height=proxy.updatePageHeight(proxy.pdfViewer.element.getBoundingClientRect().height,0);}}if(proxy.viewerContainer.style.height==='0px'){if(proxy.pdfViewer.height.toString()==='auto'){proxy.pdfViewer.height=500;proxy.viewerContainer.style.height=proxy.pdfViewer.height+'px';}else{proxy.viewerContainer.style.height=proxy.pdfViewer.element.style.height;}}if(proxy.viewerContainer.style.width==='0px'){if(proxy.pdfViewer.width.toString()==='auto'){proxy.pdfViewer.width=500;proxy.viewerContainer.style.width=proxy.pdfViewer.width+'px';}else{proxy.viewerContainer.style.width=proxy.pdfViewer.element.style.width;}}proxy.pageContainer.style.width=proxy.viewerContainer.clientWidth+'px';if(proxy.viewerContainer.clientWidth===0){proxy.pageContainer.style.width=proxy.pdfViewer.element.style.width;}if(_this_1.pdfViewer.enableToolbar&&_this_1.pdfViewer.thumbnailViewModule){proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber-1);if(proxy.navigationPane.sideBarToolbar&&proxy.navigationPane.sideBarContentContainer){proxy.navigationPane.sideBarContentContainer.style.height=proxy.viewerContainer.style.height;}}if(proxy.pdfViewer.textSearchModule&&(!sf.base.Browser.isDevice||_this_1.pdfViewer.enableDesktopMode)){proxy.pdfViewer.textSearchModule.textSearchBoxOnResize();}if(viewerWidth!==0){if(!proxy.navigationPane.isBookmarkListOpen){proxy.updateZoomValue();}}if(sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode){proxy.mobileScrollerContainer.style.left=viewerWidth-parseFloat(proxy.mobileScrollerContainer.style.width)+'px';proxy.mobilePageNoContainer.style.left=viewerWidth/2-parseFloat(proxy.mobilePageNoContainer.style.width)/2+'px';proxy.mobilePageNoContainer.style.top=proxy.pdfViewer.element.clientHeight/2+'px';proxy.updateMobileScrollerPosition();}else{proxy.navigationPane.setResizeIconTop();proxy.navigationPane.setCommentPanelResizeIconTop();if(event&&event.type==='resize'){proxy.signatureModule.updateCanvasSize();}}if(proxy.navigationPane.sideBarToolbar){proxy.navigationPane.sideBarToolbar.style.height=proxy.viewerContainer.style.height;}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMousedown=function(event){_this_1.isFreeTextContextMenu=false;var isUpdate=false;_this_1.isSelection=true;_this_1.pdfViewer.blazorAction&=~PdfViewerBlazorAction.AnnotationAdding;if(event.button===0&&!_this_1.getPopupNoteVisibleStatus()&&!_this_1.isClickedOnScrollBar(event,false)){_this_1.isViewerMouseDown=true;// eslint-disable-next-line
var target=event.target;if(event.detail===1&&target.className!=='e-pdfviewer-formFields'&&target.className!=='free-text-input'){isUpdate=true;_this_1.focusViewerContainer(true);}_this_1.scrollPosition=_this_1.viewerContainer.scrollTop/_this_1.getZoomFactor();_this_1.mouseX=event.clientX;_this_1.mouseY=event.clientY;_this_1.mouseLeft=event.clientX;_this_1.mouseTop=event.clientY;// eslint-disable-next-line
var isIE=!!document.documentMode;if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isClickedOnScrollBar(event,true)&&!_this_1.isTextSelectionDisabled){if(!isIE&&target.className!=='e-pdfviewer-formFields'&&target.className!=='e-pdfviewer-ListBox'&&target.className!=='e-pv-formfield-dropdown'&&target.className!=='e-pv-formfield-listbox'){event.preventDefault();}if(target.className!=='e-pv-droplet'){_this_1.pdfViewer.textSelectionModule.clearTextSelection();}}}if(_this_1.isClickedOnScrollBar(event,false)){_this_1.isViewerMouseDown=true;}if(_this_1.isPanMode){_this_1.dragX=event.pageX;_this_1.dragY=event.pageY;// eslint-disable-next-line max-len
if(_this_1.viewerContainer.contains(event.target)&&event.target!==_this_1.viewerContainer&&event.target!==_this_1.pageContainer&&_this_1.isPanMode){_this_1.viewerContainer.style.cursor='grabbing';}}if(_this_1.isShapeBasedAnnotationsEnabled()){_this_1.diagramMouseDown(event);}if(_this_1.pdfViewer.annotation&&_this_1.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer){if(!isUpdate){_this_1.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement=false;_this_1.updateCommentPanel();isUpdate=true;}}_this_1.mouseDownHandler(event);};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseup=function(event){if(_this_1.pdfViewer.lastAnnotation&&isNaN(_this_1.pdfViewer.lastAnnotation.wrapper.offsetX)&&isNaN(_this_1.pdfViewer.lastAnnotation.wrapper.offsetY)&&isNaN(_this_1.pdfViewer.lastAnnotation.wrapper.bounds.height)&&isNaN(_this_1.pdfViewer.lastAnnotation.wrapper.bounds.width)){_this_1.pdfViewer.remove(_this_1.pdfViewer.lastAnnotation);}_this_1.pdfViewer.lastAnnotation=null;if(!_this_1.getPopupNoteVisibleStatus()){if(_this_1.isViewerMouseDown){if(_this_1.scrollHoldTimer){clearTimeout(_this_1.scrollHoldTimer);_this_1.scrollHoldTimer=null;}if(_this_1.scrollPosition*_this_1.getZoomFactor()!==_this_1.viewerContainer.scrollTop){_this_1.pageViewScrollChanged(_this_1.currentPageNumber);}}var isSignatureFieldReadOnly=false;if(event.target){if(event.target.className=='e-pv-show-designer-name'&&event.target.id.split('_',1)!=''){isSignatureFieldReadOnly=document.getElementById(event.target.id.split('_',1)).disabled;}if(event.target.className=='foreign-object'&&event.target.children[0]){isSignatureFieldReadOnly=event.target.children[0].disabled;}}if(isSignatureFieldReadOnly&&_this_1.pdfViewer.annotation){_this_1.pdfViewer.annotation.clearSelection();}if(_this_1.isShapeBasedAnnotationsEnabled()&&!isSignatureFieldReadOnly){_this_1.diagramMouseUp(event);if(_this_1.pdfViewer.annotation){_this_1.pdfViewer.annotation.onAnnotationMouseUp();}}_this_1.isSelection=false;// eslint-disable-next-line max-len
var commentsDiv=document.getElementsByClassName("e-pv-comments-div");for(var i=0;i<commentsDiv.length;i++){commentsDiv[i].classList.remove("e-focused");}var replyCommentsDiv=document.getElementsByClassName("e-pv-reply-div");for(var i=void 0;i<replyCommentsDiv.length;i++){replyCommentsDiv[i].classList.remove("e-focused");}var commentElement=document.getElementById(_this_1.pdfViewer.dataId+'_commantPanel');if(commentElement&&commentElement.style.display==='block'){if(_this_1.pdfViewer.selectedItems){if(_this_1.pdfViewer.selectedItems.annotations.length!==0){// eslint-disable-next-line
var commentsDiv_1=document.getElementById(_this_1.pdfViewer.selectedItems.annotations[0].annotName);if(commentsDiv_1){if(!commentsDiv_1.classList.contains('e-pv-comments-border')){if(commentsDiv_1.firstElementChild){commentsDiv_1.firstElementChild.click();}}}}}}if(event.button===0&&!_this_1.isClickedOnScrollBar(event,false)){// 0 is for left button.
var eventTarget=event.target;var offsetX=event.clientX;var offsetY=event.clientY;var zoomFactor=_this_1.getZoomFactor();var pageIndex=_this_1.currentPageNumber;if(eventTarget){// eslint-disable-next-line
var pageString=eventTarget.id.split('_text_')[1]||eventTarget.id.split('_textLayer_')[1]||eventTarget.id.split('_annotationCanvas_')[1]||eventTarget.id.split('_pageDiv_')[1];// eslint-disable-next-line
pageIndex=parseInt(pageString);}var pageDiv=_this_1.getElement('_pageDiv_'+pageIndex);if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();offsetX=(event.clientX-pageCurrentRect.left)/zoomFactor;offsetY=(event.clientY-pageCurrentRect.top)/zoomFactor;}// eslint-disable-next-line max-len
if(eventTarget&&eventTarget.classList&&!eventTarget.classList.contains('e-pv-hyperlink')&&!eventTarget.classList.contains('e-pv-page-container')){// eslint-disable-next-line
_this_1.pdfViewer.firePageClick(offsetX,offsetY,pageIndex+1);if(_this_1.pdfViewer.formFieldsModule){_this_1.pdfViewer.formFieldsModule.removeFocus();}}if(_this_1.isTextMarkupAnnotationModule()&&!_this_1.isToolbarInkClicked){_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(event);}// eslint-disable-next-line max-len
if(_this_1.viewerContainer.contains(event.target)&&event.target!==_this_1.viewerContainer&&event.target!==_this_1.pageContainer&&_this_1.isPanMode){_this_1.viewerContainer.style.cursor='move';_this_1.viewerContainer.style.cursor='-webkit-grab';_this_1.viewerContainer.style.cursor='-moz-grab';_this_1.viewerContainer.style.cursor='grab';}}_this_1.isViewerMouseDown=false;}};/**
         *  * @param {any} event - The Wheel event.
         * @returns {void}
         */this.detectTouchPad=function(event){// eslint-disable-next-line max-len
_this_1.isTouchPad=event.wheelDeltaY?event.wheelDeltaY===event.deltaY*-3?true:Math.abs(event.deltaY)<60:event.deltaMode===0;};/**
         * @param {any} event - The Wheel event.
         * @returns {void}
         */this.handleMacGestureStart=function(event){event.preventDefault();event.stopPropagation();_this_1.macGestureStartScale=_this_1.pdfViewer.magnification.zoomFactor;};/**
         * @param {any} event - The Wheel event.
         * @returns {void}
         */this.handleMacGestureChange=function(event){event.preventDefault();event.stopPropagation();var macX=event.clientX;var macY=event.clientY;var scale=Number((_this_1.macGestureStartScale*event.scale).toFixed(2));if(!_this_1.isMacGestureActive){_this_1.isMacGestureActive=true;_this_1.pdfViewer.magnification.initiateMouseZoom(macX,macY,scale*100);setTimeout(function(){_this_1.isMacGestureActive=false;},70);}};/**
         * @param {any} event - The Wheel event.
         * @returns {void}
         */this.handleMacGestureEnd=function(event){event.preventDefault();event.stopPropagation();};/**     * @param {WheelEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseWheel=function(event){_this_1.isViewerMouseWheel=true;if(_this_1.getRerenderCanvasCreated()){event.preventDefault();}if(event.ctrlKey){var zoomDifference=25;if(_this_1.pdfViewer.magnification.zoomFactor<1){zoomDifference=10;}if(_this_1.pdfViewer.magnification.zoomFactor>=2){zoomDifference=50;}if(_this_1.isTouchPad&&!_this_1.isMacSafari){zoomDifference=zoomDifference/_this_1.zoomInterval;}// eslint-disable-next-line
if(event.wheelDelta>0){_this_1.pdfViewer.magnification.initiateMouseZoom(event.x,event.y,_this_1.pdfViewer.magnification.zoomFactor*100+zoomDifference);}else{_this_1.pdfViewer.magnification.initiateMouseZoom(event.x,event.y,_this_1.pdfViewer.magnification.zoomFactor*100-zoomDifference);}_this_1.isTouchPad=false;}if(_this_1.pdfViewer.magnificationModule){_this_1.pdfViewer.magnificationModule.pageRerenderOnMouseWheel();if(event.ctrlKey){event.preventDefault();}_this_1.pdfViewer.magnificationModule.fitPageScrollMouseWheel(event);}if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isTextSelectionDisabled){if(_this_1.isViewerMouseDown){if(!event.target.classList.contains('e-pv-text')){_this_1.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(_this_1.currentPageNumber-1);}}}};/**
         * @param {KeyboardEvent} event - The KeyboardEvent.
         * @returns {void}
         */this.onWindowKeyDown=function(event){var targetClassList=event.target.classList;var target=event.target;var isShiftKey=event.shiftKey;var key=event.key;var isMenuItem=target.classList.contains("e-menu-item");var isContextMenu=target.classList.contains("e-contextmenu");var targetId=target.id;var dataId=_this_1.pdfViewer.dataId;var searchId=dataId+"_search";var searchInputElementId=dataId+"_search_input";var searchPrevOccurrenceId=dataId+"_prev_occurrence";var searchNextOccurrenceId=dataId+"_next_occurrence";var matchCaseId=dataId+"_match_case";var searchBar=document.getElementById(dataId+"_search_box");if(!isShiftKey&&!isMenuItem&&!isContextMenu&&(key==="Enter"||key==="Tab")){_this_1.previouslyActiveElement=document.activeElement;}if(isShiftKey){_this_1.shiftPreviouslyActiveElement=document.activeElement;}if(!isShiftKey&&key==="Tab"){_this_1.previouslyActiveThumbnailElement=document.activeElement;}if(isShiftKey){_this_1.shiftPreviouslyActiveThumbnailElement=document.activeElement;}var classNames=['e-pv-viewer-container','e-enable-text-selection','e-pdfviewer-formFields','e-pdfviewer-signatureformfields-signature'];if(!sf.base.isNullOrUndefined(targetClassList)&&!classNames.some(function(className){return targetClassList.contains(className);})&&_this_1.pdfViewer.enableToolbar){_this_1.previousShiftTabElement=document.activeElement;}var isMac=navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?true:false;var isCommandKey=isMac?event.metaKey:false;if(_this_1.isFreeTextAnnotationModule()&&_this_1.pdfViewer.annotationModule&&(_this_1.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus===true||_this_1.pdfViewer.annotationModule.inputElementModule.isInFocus===true)){return;}if(!event.ctrlKey||!isCommandKey){switch(event.keyCode){case 27:if(target.parentElement&&(target.parentElement.id===searchId||targetId===searchInputElementId||targetId===searchPrevOccurrenceId||targetId===searchNextOccurrenceId||targetId===matchCaseId)){if(!_this_1.pdfViewer.toolbar.isTextSearchBoxDisplayed){var viewerElement=document.getElementById(_this_1.pdfViewer.dataId+"_viewerContainer");if(!sf.base.isNullOrUndefined(viewerElement)){viewerElement.classList.add("e-focused");_this_1.focusViewerContainer();}}_this_1.pdfViewer.toolbar.isTextSearchBoxDisplayed=false;_this_1.pdfViewer.textSearchModule.showSearchBox(false);var searchElement=_this_1.getElementById(searchId);var compressedIcon=_this_1.getElementById("toolbarContainer_nav");var popupContainer=_this_1.getElementById("toolbarContainer_popup");var popup=void 0;if(popupContainer){popup=popupContainer.getElementsByClassName("e-pv-text-search-container");}if(!compressedIcon&&target.parentElement&&target.parentElement.id!==searchId){event.preventDefault();if(searchElement&&searchElement.children[0]){searchElement.children[0].focus();}}else if(compressedIcon&&popup&&popup.length>0){event.preventDefault();compressedIcon.focus();}else if(compressedIcon&&popup&&popup.length===0){if(searchElement&&searchElement.children[0]){event.preventDefault();searchElement.children[0].focus();}}}else if(_this_1.pdfViewer.toolbar){_this_1.pdfViewer.toolbar.addInkAnnotation();_this_1.pdfViewer.toolbar.deSelectCommentAnnotation();_this_1.pdfViewer.toolbar.updateStampItems();if(_this_1.pdfViewer.toolbar.annotationToolbarModule){_this_1.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor();}_this_1.pdfViewer.tool='';var viewerElement=document.getElementById(_this_1.pdfViewer.dataId+"_viewerContainer");if(!sf.base.isNullOrUndefined(viewerElement)){viewerElement.classList.add("e-focused");_this_1.focusViewerContainer();}}break;case 9:if(event.target&&event.target.id&&_this_1.pdfViewer.formFieldCollections){{var nextField=void 0;var fieldIndex=void 0;var currentTarget_1=event.target;var id=void 0;currentTarget_1=event.target;id=currentTarget_1.id.split("_input")[0];if(!(currentTarget_1.className==='e-pdfviewer-formFields')){if(currentTarget_1.className==='e-pv-viewer-container e-enable-text-selection'){if(event.shiftKey&&event.key==="Tab"){fieldIndex=_this_1.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===currentTarget_1.id;});nextField=fieldIndex>0?_this_1.pdfViewer.formFieldCollections[fieldIndex-1]:_this_1.previousShiftTabElement;}else{fieldIndex=_this_1.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===currentTarget_1.id;});nextField=fieldIndex+1<_this_1.pdfViewer.formFieldCollections.length?_this_1.pdfViewer.formFieldCollections[fieldIndex+1]:_this_1.pdfViewer.formFieldCollections[0];}if(nextField&&nextField===_this_1.previousShiftTabElement){var currentField=document.getElementById(nextField.id);if(currentField){currentField.focus();}}else if(!nextField){nextField=_this_1.pdfViewer.formFieldCollections[_this_1.pdfViewer.formFieldCollections.length-1];_this_1.pdfViewer.focusFormField(nextField);}else if(!(event.target.id===_this_1.pdfViewer.dataId+"_viewerContainer")){_this_1.pdfViewer.focusFormField(nextField);}event.preventDefault();}}}}if(event.target&&event.target.id&&_this_1.pdfViewer.formFields){for(var i=0;i<_this_1.pdfViewer.formFields.length;i++){var formField=_this_1.pdfViewer.formFields[parseInt(i.toString(),10)];if(event.target.id===formField.id){// eslint-disable-next-line
var field={value:formField.value,fontFamily:formField.fontFamily,fontSize:formField.fontSize,fontStyle:formField.fontStyle,// eslint-disable-next-line
color:formField.color,backgroundColor:formField.backgroundColor,alignment:formField.alignment,isReadonly:formField.isReadonly,visibility:formField.visibility,// eslint-disable-next-line
maxLength:formField.maxLength,isRequired:formField.isRequired,isPrint:formField.isPrint,rotation:formField.rotateAngle,tooltip:formField.tooltip,// eslint-disable-next-line
options:formField.options,isChecked:formField.isChecked,isSelected:formField.isSelected};_this_1.pdfViewer.fireFocusOutFormField(field,formField.pageIndex);}}}if(searchBar&&getComputedStyle(searchBar).display==='block'){if(!isShiftKey&&key==="Tab"){if(targetId===matchCaseId){var moreOptions=_this_1.getElementById("toolbarContainer_nav");var popupContainer=_this_1.getElementById("toolbarContainer_popup");var popup=void 0;if(popupContainer){popup=popupContainer.getElementsByClassName("e-pv-annotation-container");}if(moreOptions&&popup&&popup.length>0){event.preventDefault();moreOptions.focus();}else{event.preventDefault();var editAnnotationIcon=_this_1.getElementById(dataId+"_annotation").children[0];if(editAnnotationIcon){editAnnotationIcon.focus();}}}if(target.tagName==='BUTTON'&&target.parentElement&&target.parentElement.id===searchId){event.preventDefault();var searchInputContainer=_this_1.getElementById(dataId+"_search_input_container");searchInputContainer.classList.add('e-input-focus');var searchInputElement=_this_1.getElementById(searchInputElementId);searchInputElement.focus();}}if(isShiftKey){if(target.tagName==='BUTTON'&&target.parentElement&&target.parentElement.id===dataId+"_annotation"){event.preventDefault();var searchMatchCaseCheckBox=_this_1.getElementById(dataId+"_match_case");searchMatchCaseCheckBox.focus();}if(targetId===searchInputElementId){event.preventDefault();var searchIcon=document.getElementById(searchId).children[0];if(searchIcon){searchIcon.focus();}}if(target.tagName==="DIV"){var popupContainer=document.getElementById("toolbarContainer_popup");var popup=void 0;if(popupContainer){popup=popupContainer.getElementsByClassName("e-pv-annotation-container");}if(targetId==="toolbarContainer_nav"&&popup&&popup.length>0){event.preventDefault();var searchMatchCaseCheckBox=_this_1.getElementById(dataId+"_match_case");searchMatchCaseCheckBox.focus();}}}}if(event.shiftKey){var data={previouslyActiveElement:_this_1.previouslyActiveElement,previouslyActiveThumbnailElement:_this_1.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:_this_1.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:_this_1.shiftPreviouslyActiveThumbnailElement};var targetElement=event.target;var elementType=targetElement.tagName;var elementId=targetElement.id;var parentElement=targetElement.parentElement;var pdfViewerId=_this_1.pdfViewer.dataId;var isThumbnailView=elementId===pdfViewerId+"_thumbnail-view";var isBookmark=elementId===pdfViewerId+"_bookmark";var isCloseButton=elementId===pdfViewerId+"_close_btn";var isAnnotationMoreIcon=elementId===pdfViewerId+"_annotation_more_icon";var editAnnotationIcon=pdfViewerId+"_annotation";var highlightAnnotationIcon=pdfViewerId+"_highLight";var commentPanelIcon=pdfViewerId+"_annotation_commentPanel";if(elementType==='BUTTON'){if(parentElement&&parentElement.id===highlightAnnotationIcon&&_this_1.previouslyActiveElement&&_this_1.previouslyActiveElement.parentElement&&_this_1.previouslyActiveElement.parentElement.id===editAnnotationIcon){_this_1.tabOrderNavigation(event,"navigateAnnotationToolbarTabOrder",data);}if(isThumbnailView||isBookmark||isCloseButton){_this_1.tabOrderNavigation(event,"navigateBookmarkThumbnailTabOrder",data);}if(isAnnotationMoreIcon&&_this_1.previouslyActiveElement&&_this_1.previouslyActiveElement.parentElement&&_this_1.previouslyActiveElement.parentElement.id===commentPanelIcon){_this_1.tabOrderNavigation(event,"navigateCommentPanelTabOrder",data);}}else if(targetElement.classList.contains("e-pv-thumbnail-image")||targetElement.classList.contains("e-list-item")){_this_1.tabOrderNavigation(event,"navigateBookmarkThumbnailTabOrder",data);}else if(elementType==="DIV"){_this_1.tabOrderNavigation(event,"navigateViewerContainerTabOrder",data);}else if(targetElement.classList.contains("e-pdfviewer-formFields")||targetElement.classList.contains("e-pdfviewer-signatureformfields")){_this_1.tabOrderNavigation(event,"navigateFormFieldTabOrder",data);}}else if(!event.shiftKey&&event.key==="Tab"){var data={previouslyActiveElement:_this_1.previouslyActiveElement,previouslyActiveThumbnailElement:_this_1.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:_this_1.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:_this_1.shiftPreviouslyActiveThumbnailElement};var targetElement=event.target;var elementType=targetElement.tagName;var elementId=targetElement.id;var parentElement=targetElement.parentElement;var pdfViewerId=_this_1.pdfViewer.dataId;var isThumbnailView=elementId===pdfViewerId+"_thumbnail-view";var isBookmark=elementId===pdfViewerId+"_bookmark";var isCloseButton=elementId===pdfViewerId+"_close_btn";var downloadIcon=pdfViewerId+"_download";var annotationCloseIcon=pdfViewerId+"_annotation_close";if(elementType==='BUTTON'){if(parentElement&&parentElement.id===downloadIcon){_this_1.tabOrderNavigation(event,"navigatePrimaryToolbarTabOrder",data);}if(parentElement&&parentElement.id===annotationCloseIcon&&!targetElement.classList.contains('e-pv-notification-dialog')){_this_1.tabOrderNavigation(event,"navigateAnnotationToolbarTabOrder",data);}if(isThumbnailView||isBookmark||isCloseButton){_this_1.tabOrderNavigation(event,"navigateBookmarkThumbnailTabOrder",data);}}else if(elementType==='IMG'&&targetElement.classList.contains("e-pv-thumbnail-image")){_this_1.tabOrderNavigation(event,"navigateBookmarkThumbnailTabOrder",data);}else if(elementType==="DIV"){_this_1.tabOrderNavigation(event,"navigateViewerContainerTabOrder",data);}else if(targetElement.classList.contains("e-pdfviewer-formFields")||targetElement.classList.contains("e-pdfviewer-signatureformfields")){_this_1.tabOrderNavigation(event,"navigateFormFieldTabOrder",data);}}break;case 13:if(key==="Enter"){var data={previouslyActiveElement:_this_1.previouslyActiveElement,previouslyActiveThumbnailElement:_this_1.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:_this_1.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:_this_1.shiftPreviouslyActiveThumbnailElement};var targetElement=event.target;var elementType=targetElement.tagName;var elementId=targetElement.id;if(elementType==="IMG"&&targetElement.classList.contains("e-pv-thumbnail-image")){_this_1.tabOrderNavigation(event,"navigateBookmarkThumbnailTabOrder",data);}if(elementType==="BUTTON"&&elementId===_this_1.pdfViewer.dataId+"_close_btn"){_this_1.tabOrderNavigation(event,"navigateBookmarkThumbnailTabOrder",data);}if(elementType==="DIV"){_this_1.tabOrderNavigation(event,"navigateCommentPanelTabOrder",data);}if(elementType==="LI"){_this_1.tabOrderNavigation(event,"navigateContextMenuTabOrder",data);}}break;case 38:if(key==="ArrowUp"){var data={previouslyActiveElement:_this_1.previouslyActiveElement,previouslyActiveThumbnailElement:_this_1.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:_this_1.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:_this_1.shiftPreviouslyActiveThumbnailElement};var targetElement=event.target;if(targetElement.tagName==="IMG"){_this_1.tabOrderNavigation(event,"navigateBookmarkThumbnailTabOrder",data);}}break;case 40:if(key==="ArrowDown"){var data={previouslyActiveElement:_this_1.previouslyActiveElement,previouslyActiveThumbnailElement:_this_1.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:_this_1.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:_this_1.shiftPreviouslyActiveThumbnailElement};var targetElement=event.target;if(targetElement.tagName==="IMG"&&targetElement.classList.contains("e-pv-thumbnail-image")){_this_1.tabOrderNavigation(event,"navigateBookmarkThumbnailTabOrder",data);}}break;}}};/**
         * @param {KeyboardEvent} event - The KeyboardEvent.
         * @returns {void}
         */this.viewerContainerOnKeyDown=function(event){var isMac=navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?true:false;var isCommandKey=isMac?event.metaKey:false;var isAltKey=isMac?event.keyCode===18:event.altKey;var commands=_this_1.customCommands;if(Object.keys(commands).length!==0){_this_1.fireCustomCommands(event);}if(_this_1.isFreeTextAnnotationModule()&&_this_1.pdfViewer.annotationModule&&(_this_1.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus===true||_this_1.pdfViewer.annotationModule.inputElementModule.isInFocus===true)){return;}if(event.ctrlKey||isCommandKey){// add keycodes if shift key is used.
if(event.shiftKey&&!isMac||isMac&&!event.shiftKey){switch(event.keyCode){case 38:// up arrow
case 33:// page up
event.preventDefault();if(_this_1.currentPageNumber!==1){_this_1.updateScrollTop(0);}break;case 40:// down arrow
case 34:// page down
event.preventDefault();if(_this_1.currentPageNumber!==_this_1.pageCount){_this_1.updateScrollTop(_this_1.pageCount-1);}break;default:break;}}switch(event.keyCode){case 79:// o key
if(_this_1.pdfViewer.toolbarModule&&_this_1.pdfViewer.enableToolbar){_this_1.pdfViewer.toolbarModule.openFileDialogBox(event);}break;case 67:// c key
if(_this_1.pdfViewer.textSelectionModule&&_this_1.pdfViewer.enableTextSelection&&!_this_1.isTextSelectionDisabled){event.preventDefault();_this_1.pdfViewer.textSelectionModule.copyText();}if(_this_1.pdfViewer.selectedItems.annotations.length||_this_1.pdfViewer.selectedItems.formFields.length){_this_1.pdfViewer.copy();_this_1.contextMenuModule.previousAction='Copy';}break;case 70:// f key
if(_this_1.pdfViewer.textSearchModule&&_this_1.pdfViewer.enableTextSearch){event.preventDefault();_this_1.pdfViewer.toolbarModule.textSearchButtonHandler();}break;case 80:// p key
if(_this_1.pdfViewer.printModule&&_this_1.pdfViewer.enablePrint){event.preventDefault();_this_1.pdfViewer.print.print();}break;case 90://z key
if(_this_1.pdfViewer.annotationModule){_this_1.pdfViewer.annotationModule.undo();}break;case 88://x key
if(_this_1.pdfViewer.selectedItems.annotations.length||_this_1.pdfViewer.selectedItems.formFields.length){_this_1.pdfViewer.cut();_this_1.contextMenuModule.previousAction='Cut';}break;case 89://y key
if(_this_1.pdfViewer.annotationModule){_this_1.pdfViewer.annotationModule.redo();}break;case 86://v key
// eslint-disable-next-line max-len
if(_this_1.pdfViewer.annotation&&_this_1.pdfViewer.annotation.isShapeCopied){_this_1.pdfViewer.paste();_this_1.contextMenuModule.previousAction='Paste';}break;case 71:// 'g' key
{// this is used to focus the Go to Page Input textbox
event.preventDefault();var gotoPageInput=document.querySelector(".e-control.e-numerictextbox.e-lib.e-input");if(_this_1.pdfViewer.toolbarModule&&_this_1.pdfViewer.enableToolbar&&gotoPageInput!=null&&gotoPageInput.style.display!=="none"){gotoPageInput.focus();}}break;case 52://'4' key
{//this is used to open the comment panel
if(isAltKey||event.shiftKey){event.preventDefault();var commentPanel=document.getElementById(_this_1.pdfViewer.dataId+"_commantPanel");if(commentPanel.style.display==="none"){_this_1.pdfViewer.annotationModule.showCommentsPanelInBlazor();}else{_this_1.navigationPane.closeCommentPanelContainer();}}}break;case 53://5 key
{//this is used to open the bookmark panel
if(isAltKey){event.preventDefault();var bookmarkButton=_this_1.pdfViewer.element.querySelector(".e-pv-bookmark-view");if(bookmarkButton&&bookmarkButton.children[0]){var iconElement=bookmarkButton.children[0];if(!iconElement.classList.contains("e-pv-bookmark-disable-icon")){event.preventDefault();_this_1.navigationPane.openBookmarkcontentInitially();_this_1.focusViewerContainer();}}}}break;case 54://6 key
{//this is used to open the thumbnail pane
if(isAltKey){event.preventDefault();var thumbnailButton=document.getElementById(_this_1.pdfViewer.dataId+"_thumbnail-view");if(thumbnailButton&&window.getComputedStyle(thumbnailButton).display!=='none'){_this_1.navigationPane.sideToolbarOnClick(event);}_this_1.focusViewerContainer();}}break;case 65://"a" key  
if(event.shiftKey){//this is used to open annoatation bar
event.preventDefault();var element=document.getElementById(_this_1.pdfViewer.dataId+"_annotation");if(element&&window.getComputedStyle(element).display!=='none'){_this_1.pdfViewer._dotnetInstance.invokeMethodAsync("AnnotationBarUpdate");}_this_1.focusViewerContainer();}break;default:break;}}else{switch(event.keyCode){case 46:var activeElement=document.activeElement;if(event.target.className!='e-pdfviewer-formFields'&&activeElement.tagName!=='INPUT'&&activeElement.tagName!=='TEXTAREA'&&!activeElement.isContentEditable){_this_1.DeleteKeyPressed(event);}break;}}if(_this_1.pdfViewer.magnificationModule){_this_1.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(event);}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMousemove=function(event){_this_1.mouseX=event.clientX;_this_1.mouseY=event.clientY;// eslint-disable-next-line
var isIE=!!document.documentMode;var target=event.target;if(_this_1.action==='Drag'){event.preventDefault();}// eslint-disable-next-line max-len
if(_this_1.isViewerMouseDown&&!(_this_1.action==='Perimeter'||_this_1.action==='Polygon'||_this_1.action==='Line'||_this_1.action==='DrawTool'||_this_1.action==='Distance')){// eslint-disable-next-line max-len
if(_this_1.pdfViewer.textSelectionModule&&_this_1.pdfViewer.enableTextSelection&&!_this_1.isTextSelectionDisabled&&!_this_1.getPopupNoteVisibleStatus()){// text selection won't perform if we start the selection from hyperlink content by commenting this line.
// this region block the toc/hyperlink navigation on sometimes.
// if ((event.target as HTMLElement).classList.contains('e-pv-hyperlink') && this.pdfViewer.linkAnnotationModule) {
// this.pdfViewer.linkAnnotationModule.modifyZindexForHyperlink((event.target as HTMLElement), true);
// }
if(!isIE){if(event.target.className!='e-pdfviewer-formFields')event.preventDefault();_this_1.mouseX=event.clientX;_this_1.mouseY=event.clientY;// eslint-disable-next-line
var annotationModule=_this_1.pdfViewer.annotationModule;// eslint-disable-next-line max-len
if(annotationModule&&annotationModule.textMarkupAnnotationModule&&annotationModule.textMarkupAnnotationModule.isDropletClicked&&annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)){annotationModule.textMarkupAnnotationModule.textSelect(event.target,_this_1.mouseX,_this_1.mouseY);}else{_this_1.pdfViewer.textSelectionModule.textSelectionOnMouseMove(event.target,_this_1.mouseX,_this_1.mouseY);}}else{var selection=window.getSelection();if(!selection.type&&!selection.isCollapsed&&selection.anchorNode!==null){_this_1.pdfViewer.textSelectionModule.isTextSelection=true;}}}else if(_this_1.skipPreventDefault(target)){event.preventDefault();}}if(_this_1.isTextMarkupAnnotationModule()&&!_this_1.getPopupNoteVisibleStatus()){_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(event);}if(_this_1.isPanMode){_this_1.panOnMouseMove(event);}if(_this_1.isShapeBasedAnnotationsEnabled()){var canvas=void 0;// eslint-disable-next-line max-len
if(event.target&&(event.target.id.indexOf('_text')>-1||event.target.parentElement.classList.contains('foreign-object')||event.target.id.indexOf('_annotationCanvas')>-1||event.target.classList.contains('e-pv-hyperlink')||event.target.classList.contains('e-pdfviewer-formFields')||event.target.classList.contains('e-pdfviewer-signatureformfields'))&&_this_1.pdfViewer.annotation){var pageIndex=_this_1.pdfViewer.annotation.getEventPageNumber(event);var diagram=document.getElementById(_this_1.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);if(diagram){var canvas1=diagram.getBoundingClientRect();var left=canvas1.x?canvas1.x:canvas1.left;var top_1=canvas1.y?canvas1.y:canvas1.top;// eslint-disable-next-line max-len
if(_this_1.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation&&_this_1.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType==='Image'){canvas=new sf.drawings.Rect(left,top_1,canvas1.width-10,canvas1.height-10);}else{canvas=new sf.drawings.Rect(left+10,top_1+10,canvas1.width-10,canvas1.height-10);}}}// eslint-disable-next-line max-len
var stampModule=_this_1.pdfViewer.annotationModule?_this_1.pdfViewer.annotationModule.stampAnnotationModule:null;if(canvas&&canvas.containsPoint({x:_this_1.mouseX,y:_this_1.mouseY})&&!(stampModule&&stampModule.isStampAnnotSelected)){_this_1.diagramMouseMove(event);_this_1.annotationEvent=event;}else{_this_1.diagramMouseLeave(event);if(_this_1.isAnnotationDrawn&&_this_1.action!=='Ink'&&_this_1.action!=='DrawTool'){_this_1.diagramMouseUp(event);_this_1.isAnnotationAdded=true;}}if(_this_1.pdfViewer.enableStampAnnotations){if(stampModule&&stampModule.isStampAnnotSelected){_this_1.pdfViewer.tool='Stamp';_this_1.tool=new StampTool(_this_1.pdfViewer,_this_1);_this_1.isMouseDown=true;stampModule.isStampAnnotSelected=false;stampModule.isNewStampAnnot=true;}}if(_this_1.isSignatureAdded&&_this_1.pdfViewer.enableHandwrittenSignature){_this_1.pdfViewer.tool='Stamp';_this_1.tool=new StampTool(_this_1.pdfViewer,_this_1);_this_1.isMouseDown=true;_this_1.isSignatureAdded=false;_this_1.isNewSignatureAdded=true;}}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.panOnMouseMove=function(event){var isStampMode=false;// eslint-disable-next-line max-len
if(_this_1.action==='Ink'||_this_1.action==="Line"||_this_1.action==='Perimeter'||_this_1.action==='Polygon'||_this_1.action==='DrawTool'||_this_1.action==='Drag'||_this_1.action.indexOf('Rotate')!==-1||_this_1.action.indexOf('Resize')!==-1){isStampMode=true;}// eslint-disable-next-line max-len
if(_this_1.viewerContainer.contains(event.target)&&event.target!==_this_1.viewerContainer&&event.target!==_this_1.pageContainer&&!isStampMode){if(_this_1.isViewerMouseDown){var deltaX=_this_1.dragX-event.pageX;var deltaY=_this_1.dragY-event.pageY;_this_1.viewerContainer.scrollTop=_this_1.viewerContainer.scrollTop+deltaY;_this_1.viewerContainer.scrollLeft=_this_1.viewerContainer.scrollLeft+deltaX;_this_1.viewerContainer.style.cursor='move';_this_1.viewerContainer.style.cursor='-webkit-grabbing';_this_1.viewerContainer.style.cursor='-moz-grabbing';_this_1.viewerContainer.style.cursor='grabbing';_this_1.dragX=event.pageX;_this_1.dragY=event.pageY;}else{if(!_this_1.navigationPane.isNavigationPaneResized){_this_1.viewerContainer.style.cursor='move';_this_1.viewerContainer.style.cursor='-webkit-grab';_this_1.viewerContainer.style.cursor='-moz-grab';_this_1.viewerContainer.style.cursor='grab';}}}else{if(!_this_1.navigationPane.isNavigationPaneResized){_this_1.viewerContainer.style.cursor='auto';}}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseLeave=function(event){if(_this_1.isViewerMouseDown){if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isTextSelectionDisabled){_this_1.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(event);}}if(_this_1.pdfViewer.textSelectionModule&&_this_1.pdfViewer.textSelectionModule.isTextSelection){event.preventDefault();}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseEnter=function(event){if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isTextSelectionDisabled){_this_1.pdfViewer.textSelectionModule.clear();}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnMouseOver=function(event){// eslint-disable-next-line
var isIE=!!document.documentMode;if(_this_1.isViewerMouseDown){if(!isIE){event.preventDefault();}}};/**
         * @param {MouseEvent} event - The MouseEvent.
         * @returns {void}
         */this.viewerContainerOnClick=function(event){if(event.type==='dblclick'){if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isTextSelectionDisabled&&!_this_1.getCurrentTextMarkupAnnotation()){if(event.target.classList.contains('e-pv-text')){_this_1.isViewerContainerDoubleClick=true;if(!_this_1.getTextMarkupAnnotationMode()){var pageNumber=parseFloat(event.target.id.split('_')[2]);_this_1.pdfViewer.fireTextSelectionStart(pageNumber+1);}_this_1.pdfViewer.textSelectionModule.selectAWord(event.target,event.clientX,event.clientY,false);if(_this_1.pdfViewer.contextMenuSettings.contextMenuAction==='MouseUp'){_this_1.pdfViewer.textSelectionModule.calculateContextMenuPosition(event.clientY,event.clientX);}if(!_this_1.getTextMarkupAnnotationMode()){_this_1.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true,false);_this_1.dblClickTimer=setTimeout(function(){_this_1.applySelection();},100);_this_1.pdfViewer.textSelectionModule.fireTextSelectEnd();}else if(_this_1.isTextMarkupAnnotationModule()&&_this_1.getTextMarkupAnnotationMode()){// eslint-disable-next-line max-len
_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);}}}else if(_this_1.getCurrentTextMarkupAnnotation()){// this.pdfViewer.annotationModule.showAnnotationPopup(event);
}if(_this_1.action&&(_this_1.action==='Perimeter'||_this_1.action==='Polygon')&&_this_1.tool){_this_1.eventArgs.position=_this_1.currentPosition;_this_1.getMouseEventArgs(_this_1.currentPosition,_this_1.eventArgs,event,_this_1.eventArgs.source);var ctrlKey=_this_1.isMetaKey(event);var info={ctrlKey:event.ctrlKey,shiftKey:event.shiftKey};_this_1.eventArgs.info=info;_this_1.eventArgs.clickCount=event.detail;_this_1.tool.mouseUp(_this_1.eventArgs,true);}if(_this_1.pdfViewer.selectedItems||_this_1.pdfViewer.annotation&&_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){if(_this_1.pdfViewer.selectedItems.annotations.length!==0){// eslint-disable-next-line
var currentAnnotation=_this_1.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line max-len
if(_this_1.pdfViewer.annotationModule&&!currentAnnotation.formFieldAnnotationType){// eslint-disable-next-line max-len
_this_1.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName,currentAnnotation.pageIndex,currentAnnotation,null,true);if(_this_1.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus===false){if(_this_1.isFreeTextAnnotation(_this_1.pdfViewer.selectedItems.annotations)===true){var elmtPosition={};elmtPosition.x=_this_1.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=_this_1.pdfViewer.selectedItems.annotations[0].bounds.y;// eslint-disable-next-line max-len
_this_1.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition,_this_1.pdfViewer.selectedItems.annotations[0],null,true);}else if(_this_1.pdfViewer.selectedItems.annotations[0].enableShapeLabel===true){var elmtPosition={};elmtPosition.x=_this_1.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=_this_1.pdfViewer.selectedItems.annotations[0].bounds.y;// eslint-disable-next-line max-len
_this_1.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition,_this_1.pdfViewer.selectedItems.annotations[0]);}else{// eslint-disable-next-line
var commentsDiv=document.getElementById(_this_1.pdfViewer.selectedItems.annotations[0].annotName);if(commentsDiv){if(!commentsDiv.classList.contains('e-pv-comments-border')){_this_1.pdfViewer.annotationModule.showCommentsPanelInBlazor();}}}}}}else{// eslint-disable-next-line max-len
if(_this_1.pdfViewer.annotation&&_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){// eslint-disable-next-line
var annotation=_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;// eslint-disable-next-line
var comments=document.getElementById(annotation.annotName);if(comments&&comments.firstElementChild){comments.firstElementChild.click();}// eslint-disable-next-line max-len
_this_1.pdfViewer.annotationModule.annotationSelect(annotation.annotName,_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage,annotation,null,true);}}}if(_this_1.pdfViewer.designerMode&&_this_1.pdfViewer.selectedItems.formFields.length>0){var eventArgs={name:"formFieldDoubleClick",field:_this_1.pdfViewer.selectedItems.formFields[0],cancel:false};_this_1.pdfViewer.fireFormFieldDoubleClickEvent(eventArgs);}}else{if(event.detail===3){if(_this_1.isViewerContainerDoubleClick){clearTimeout(_this_1.dblClickTimer);_this_1.isViewerContainerDoubleClick=false;}if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isTextSelectionDisabled&&!_this_1.getTextMarkupAnnotationMode()){_this_1.pdfViewer.textSelectionModule.selectEntireLine(event);_this_1.pdfViewer.textSelectionModule.maintainSelectionOnZoom(true,false);_this_1.pdfViewer.textSelectionModule.fireTextSelectEnd();_this_1.applySelection();}}}};/**
         * @param {DragEvent} event - The DragEvent.
         * @returns {void}
         */this.viewerContainerOnDragStart=function(event){// eslint-disable-next-line
var isIE=!!document.documentMode;if(!isIE){event.preventDefault();}};// eslint-disable-next-line
this.viewerContainerOnContextMenuClick=function(event){_this_1.isViewerMouseDown=false;};// eslint-disable-next-line
this.onWindowMouseUp=function(event){_this_1.isFreeTextContextMenu=false;_this_1.isNewStamp=false;_this_1.signatureAdded=false;// eslint-disable-next-line
var annotationModule=_this_1.pdfViewer.annotationModule;// eslint-disable-next-line max-len
if(annotationModule&&annotationModule.textMarkupAnnotationModule&&annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)){// eslint-disable-next-line
var modules=annotationModule.textMarkupAnnotationModule;modules.isLeftDropletClicked=false;modules.isDropletClicked=false;modules.isRightDropletClicked=false;if(!modules.currentTextMarkupAnnotation&&window.getSelection().anchorNode===null){modules.showHideDropletDiv(true);}else if(!modules.currentTextMarkupAnnotation&&modules.currentTextMarkupAddMode===''){modules.isTextMarkupAnnotationMode=false;}}if(!_this_1.getPopupNoteVisibleStatus()){if(event.button===0){// eslint-disable-next-line max-len
if(_this_1.isNewFreeTextAnnotation()){var textmarkupRenderMode=sf.base.Browser.isDevice?_this_1.getTextMarkupAnnotationMode():!_this_1.getTextMarkupAnnotationMode();if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isTextSelectionDisabled&&textmarkupRenderMode){// eslint-disable-next-line max-len
if(event.detail===1&&!_this_1.viewerContainer.contains(event.target)&&!_this_1.contextMenuModule.contextMenuElement.contains(event.target)){if(window.getSelection().anchorNode!==null){_this_1.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);}}// eslint-disable-next-line
var target=event.target;if(_this_1.viewerContainer.contains(event.target)&&target.className!=='e-pdfviewer-formFields'){if(!_this_1.isClickedOnScrollBar(event,true)&&!_this_1.isScrollbarMouseDown){_this_1.pdfViewer.textSelectionModule.textSelectionOnMouseup(event);}else{if(window.getSelection().anchorNode!==null){_this_1.pdfViewer.textSelectionModule.applySpanForSelection();}}}}else if(_this_1.getTextMarkupAnnotationMode()){// eslint-disable-next-line
var viewerElement=_this_1.pdfViewer.element;// eslint-disable-next-line
var targetElement=event.target;if(viewerElement&&targetElement&&annotationModule){if(viewerElement.id.split('_')[0]===targetElement.id.split('_')[0]){// eslint-disable-next-line max-len
_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);}}}}}else if(event.button===2){if(_this_1.viewerContainer.contains(event.target)&&_this_1.skipPreventDefault(event.target)){if(_this_1.checkIsNormalText()){window.getSelection().removeAllRanges();}}}if(annotationModule){var collectionLength=annotationModule.actionCollection.length-1;if(annotationModule.actionCollection[collectionLength-1]){if(annotationModule.actionCollection[collectionLength-1].annotation){if(annotationModule.actionCollection[collectionLength-1].annotation.shapeAnnotationType==="FreeText"&&_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode){_this_1.pdfViewer.drawingObject=new PdfAnnotationBase();}}}}if(_this_1.isViewerMouseDown){_this_1.isViewerMouseDown=false;if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isTextSelectionDisabled){_this_1.pdfViewer.textSelectionModule.clear();_this_1.pdfViewer.textSelectionModule.selectionStartPage=null;}event.preventDefault();event.stopPropagation();return false;}else{return true;}}};/**
         * @param {TouchEvent} event - The DragEvent.
         * @returns {void}
         */this.onWindowTouchEnd=function(event){_this_1.signatureAdded=false;// eslint-disable-next-line max-len
if(!_this_1.pdfViewer.element.contains(event.target)&&!_this_1.contextMenuModule.contextMenuElement.contains(event.target)){if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isTextSelectionDisabled){_this_1.pdfViewer.textSelectionModule.clearTextSelection();}}};/**
         * @param {TouchEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnTouchStart=function(event){var touchPoints=event.touches;if(_this_1.pdfViewer.magnificationModule){_this_1.pdfViewer.magnificationModule.setTouchPoints(touchPoints[0].clientX,touchPoints[0].clientY);}var target=event.target;// eslint-disable-next-line max-len
if(touchPoints.length===1&&!target.classList.contains('e-pv-hyperlink')&&_this_1.skipPreventDefault(target)){_this_1.preventTouchEvent(event);}if(event.touches.length===1&&_this_1.isTextMarkupAnnotationModule()&&!_this_1.getPopupNoteVisibleStatus()){if(!_this_1.isToolbarInkClicked){_this_1.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);}}_this_1.touchClientX=touchPoints[0].clientX;_this_1.touchClientY=touchPoints[0].clientY;_this_1.scrollY=touchPoints[0].clientY;_this_1.previousTime=new Date().getTime();// eslint-disable-next-line max-len
if(touchPoints.length===1&&!(event.target.classList.contains('e-pv-touch-select-drop')||event.target.classList.contains('e-pv-touch-ellipse'))){if(sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode&&_this_1.pageCount>0&&!_this_1.isThumb&&!event.target.classList.contains('e-pv-hyperlink')){_this_1.handleTaps(touchPoints,event);}if(sf.base.Browser.isDevice||_this_1.pdfViewer.enableDesktopMode){_this_1.handleTextBoxTaps(touchPoints);}var designerMode=_this_1.isDesignerMode(target);if(designerMode){_this_1.contextMenuModule.close();// event.preventDefault();
if(!_this_1.isLongTouchPropagated){_this_1.longTouchTimer=setTimeout(function(){_this_1.isTouchDesignerMode=true;_this_1.contextMenuModule.open(_this_1.touchClientY,_this_1.touchClientX,_this_1.viewerContainer);},1000);}_this_1.isLongTouchPropagated=true;}else if(_this_1.pdfViewer.textSelectionModule&&!_this_1.isTextSelectionDisabled){_this_1.pdfViewer.textSelectionModule.clearTextSelection();_this_1.contextMenuModule.close();// event.preventDefault();
if(!_this_1.isLongTouchPropagated){_this_1.longTouchTimer=setTimeout(function(){_this_1.viewerContainerOnLongTouch(event);},1000);}_this_1.isLongTouchPropagated=true;}}// eslint-disable-next-line
var toolbarModule=_this_1.pdfViewer.toolbarModule?_this_1.pdfViewer.toolbarModule.annotationToolbarModule:'null';if(target.classList.contains('e-pv-text')&&(!toolbarModule||!toolbarModule.textMarkupToolbarElement||toolbarModule.textMarkupToolbarElement.children.length===0)){target.classList.add('e-pv-text-selection-none');}_this_1.diagramMouseDown(event);// eslint-disable-next-line max-len
if(_this_1.action==='Perimeter'||_this_1.action==='Polygon'||_this_1.action==='DrawTool'||_this_1.action==='Drag'||_this_1.action.indexOf('Rotate')!==-1||_this_1.action.indexOf('Resize')!==-1){event.preventDefault();}};/**
         * @param {TouchEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnLongTouch=function(event){_this_1.touchClientX=event.touches[0].clientX;_this_1.touchClientY=event.touches[0].clientY;if(event.cancelable){event.preventDefault();}if(_this_1.pdfViewer.textSelectionModule){var target=event.target;if(target.classList.contains('e-pv-text-selection-none')){target.classList.remove('e-pv-text-selection-none');}_this_1.pdfViewer.textSelectionModule.initiateTouchSelection(event,_this_1.touchClientX,_this_1.touchClientY);if(sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode){clearTimeout(_this_1.singleTapTimer);_this_1.tapCount=0;}}};/**
         * @param {PointerEvent} event - The PointerEvent.
         * @returns {void}
         */this.viewerContainerOnPointerDown=function(event){if(event.pointerType==='touch'){_this_1.pointerCount++;if(_this_1.pointerCount<=2){event.preventDefault();_this_1.pointersForTouch.push(event);if(_this_1.pointerCount===2){_this_1.pointerCount=0;}if(_this_1.pdfViewer.magnificationModule){_this_1.pdfViewer.magnificationModule.setTouchPoints(event.clientX,event.clientY);}}}};/**
         * @param {TouchEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnTouchMove=function(event){if(sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode){clearTimeout(_this_1.singleTapTimer);_this_1.singleTapTimer=null;_this_1.tapCount=0;}_this_1.preventTouchEvent(event);if(_this_1.isToolbarInkClicked){event.preventDefault();}var touchPoints=event.touches;if(_this_1.pdfViewer.magnificationModule){_this_1.isTouchScrolled=true;if(touchPoints.length>1&&_this_1.pageCount>0){if(sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode){_this_1.isTouchScrolled=false;}if(_this_1.pdfViewer.enablePinchZoom){// eslint-disable-next-line max-len
_this_1.pdfViewer.magnificationModule.initiatePinchMove(touchPoints[0].clientX,touchPoints[0].clientY,touchPoints[1].clientX,touchPoints[1].clientY);}}else if(touchPoints.length===1&&_this_1.getPagesPinchZoomed()){if(sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode){_this_1.isTouchScrolled=false;}_this_1.pdfViewer.magnificationModule.pinchMoveScroll();}}_this_1.mouseX=touchPoints[0].clientX;_this_1.mouseY=touchPoints[0].clientY;var canvas;// eslint-disable-next-line max-len
if(event.target&&(event.target.id.indexOf('_text')>-1||event.target.id.indexOf('_annotationCanvas')>-1||event.target.classList.contains('e-pv-hyperlink'))&&_this_1.pdfViewer.annotation){var pageIndex=_this_1.pdfViewer.annotation.getEventPageNumber(event);var diagram=document.getElementById(_this_1.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);if(diagram){var canvas1=diagram.getBoundingClientRect();var left=canvas1.x?canvas1.x:canvas1.left;var top_2=canvas1.y?canvas1.y:canvas1.top;canvas=new sf.drawings.Rect(left+10,top_2+10,canvas1.width-10,canvas1.height-10);}}if(canvas&&canvas.containsPoint({x:_this_1.mouseX,y:_this_1.mouseY})){_this_1.diagramMouseMove(event);_this_1.annotationEvent=event;}else{_this_1.diagramMouseLeave(event);if(_this_1.isAnnotationDrawn){_this_1.diagramMouseUp(event);_this_1.isAnnotationAdded=true;}}touchPoints=null;};/**
         * @param {PointerEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnPointerMove=function(event){if(event.pointerType==='touch'&&_this_1.pageCount>0){event.preventDefault();if(_this_1.pointersForTouch.length===2){for(var i=0;i<_this_1.pointersForTouch.length;i++){if(event.pointerId===_this_1.pointersForTouch[i].pointerId){_this_1.pointersForTouch[i]=event;break;}}if(_this_1.pdfViewer.magnificationModule&&_this_1.pdfViewer.enablePinchZoom){// eslint-disable-next-line max-len
_this_1.pdfViewer.magnificationModule.initiatePinchMove(_this_1.pointersForTouch[0].clientX,_this_1.pointersForTouch[0].clientY,_this_1.pointersForTouch[1].clientX,_this_1.pointersForTouch[1].clientY);}}}};/**
         * @param {TouchEvent} event - The TouchEvent.
         * @returns {void}
         */this.viewerContainerOnTouchEnd=function(event){if(_this_1.pdfViewer.magnificationModule){_this_1.pdfViewer.magnificationModule.pinchMoveEnd();}if(event.cancelable&&!event.target.classList.contains('e-pv-touch-ellipse')&&_this_1.pdfViewer.textSelectionModule&&_this_1.pdfViewer.textSelectionModule.isTextSelection){event.preventDefault();}_this_1.isLongTouchPropagated=false;clearInterval(_this_1.longTouchTimer);_this_1.longTouchTimer=null;if(sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode&&_this_1.isTouchScrolled){_this_1.currentTime=new Date().getTime();var duration=_this_1.currentTime-_this_1.previousTime;// eslint-disable-next-line
var difference=_this_1.scrollY-event.changedTouches[0].pageY;// eslint-disable-next-line
var speed=difference/duration;if(Math.abs(speed)>1.5){// eslint-disable-next-line
var scrollTop=difference+duration*speed;_this_1.viewerContainer.scrollTop+=scrollTop;_this_1.updateMobileScrollerPosition();}}_this_1.diagramMouseUp(event);_this_1.renderStampAnnotation(event);};/**
         * @param {PointerEvent} event - The PointerEvent.
         * @returns {void}
         */this.viewerContainerOnPointerEnd=function(event){if(event.pointerType==='touch'){event.preventDefault();if(_this_1.pdfViewer.magnificationModule){_this_1.pdfViewer.magnificationModule.pinchMoveEnd();}_this_1.pointersForTouch=[];_this_1.pointerCount=0;}};// eslint-disable-next-line
this.viewerContainerOnScroll=function(event){var proxy=null;proxy=_this_1;var allowServerDataBind=proxy.pdfViewer.allowServerDataBinding;proxy.pdfViewer.enableServerDataBinding(false);var scrollposX=0;var scrollposY=0;if(event.touches&&sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode){// eslint-disable-next-line
var ratio=(_this_1.viewerContainer.scrollHeight-_this_1.viewerContainer.clientHeight)/(_this_1.viewerContainer.clientHeight-_this_1.toolbarHeight);if(_this_1.isThumb){_this_1.ispageMoved=true;event.preventDefault();_this_1.mobilePageNoContainer.style.display='block';scrollposX=event.touches[0].pageX-_this_1.scrollX;scrollposY=event.touches[0].pageY-_this_1.viewerContainer.offsetTop;_this_1.viewerContainer.scrollTop=scrollposY*ratio;// eslint-disable-next-line
var containerValue=event.touches[0].pageY;// eslint-disable-next-line
var toolbarHeight=_this_1.pdfViewer.toolbarModule?0:50;if(_this_1.viewerContainer.scrollTop!==0&&containerValue<=_this_1.viewerContainer.clientHeight-toolbarHeight){_this_1.mobileScrollerContainer.style.top=containerValue+'px';}}else if(event.touches[0].target.className!=='e-pv-touch-ellipse'){if(!(_this_1.isWebkitMobile&&sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode)){_this_1.mobilePageNoContainer.style.display='none';scrollposY=_this_1.touchClientY-event.touches[0].pageY;scrollposX=_this_1.touchClientX-event.touches[0].pageX;_this_1.viewerContainer.scrollTop=_this_1.viewerContainer.scrollTop+scrollposY;_this_1.viewerContainer.scrollLeft=_this_1.viewerContainer.scrollLeft+scrollposX;}// eslint-disable-next-line
_this_1.updateMobileScrollerPosition();_this_1.touchClientY=event.touches[0].pageY;_this_1.touchClientX=event.touches[0].pageX;}}if(_this_1.scrollHoldTimer){clearTimeout(_this_1.scrollHoldTimer);}var pageIndex=_this_1.currentPageNumber;_this_1.scrollHoldTimer=null;_this_1.contextMenuModule.close();var verticalScrollValue=_this_1.viewerContainer.scrollTop;// eslint-disable-next-line max-len
for(var i=0;i<_this_1.pageCount;i++){if(_this_1.pageSize[i]!=null){var pageHeight=_this_1.getPageHeight(i);if(pageHeight<150){_this_1.pageStopValue=75;}else if(pageHeight>=150&&pageHeight<300){_this_1.pageStopValue=125;}else if(pageHeight>=300&&pageHeight<500){_this_1.pageStopValue=200;}else{_this_1.pageStopValue=300;}// eslint-disable-next-line max-len
if(verticalScrollValue+_this_1.pageStopValue<=_this_1.getPageTop(i)+pageHeight){_this_1.currentPageNumber=i+1;_this_1.pdfViewer.currentPageNumber=i+1;_this_1.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",_this_1.pdfViewer.currentPageNumber);break;}}}// eslint-disable-next-line max-len
if(_this_1.pdfViewer.magnificationModule&&_this_1.pdfViewer.magnificationModule.fitType==='fitToPage'&&_this_1.currentPageNumber>0){if(_this_1.pageSize[_this_1.currentPageNumber-1]){_this_1.viewerContainer.scrollTop=_this_1.pageSize[_this_1.currentPageNumber-1].top*_this_1.getZoomFactor();}}_this_1.renderElementsVirtualScroll(_this_1.currentPageNumber);// eslint-disable-next-line max-len
if(!_this_1.isViewerMouseDown&&!_this_1.getPinchZoomed()&&!_this_1.getPinchScrolled()&&!_this_1.getPagesPinchZoomed()||_this_1.isViewerMouseWheel){_this_1.pageViewScrollChanged(_this_1.currentPageNumber);_this_1.isViewerMouseWheel=false;}else{_this_1.showPageLoadingIndicator(_this_1.currentPageNumber-1,false);}if(_this_1.pdfViewer.toolbarModule){_this_1.viewerContainer.setAttribute('aria-labelledby',_this_1.pdfViewer.dataId+'_pageDiv_'+(_this_1.currentPageNumber-1));}if(sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode){_this_1.mobileSpanContainer.innerHTML=_this_1.currentPageNumber.toString();_this_1.mobilecurrentPageContainer.innerHTML=_this_1.currentPageNumber.toString();}if(pageIndex!==_this_1.currentPageNumber){if(proxy.pdfViewer.thumbnailViewModule&&(!sf.base.Browser.isDevice||_this_1.pdfViewer.enableDesktopMode)){proxy.pdfViewer.thumbnailViewModule.gotoThumbnailImage(proxy.currentPageNumber-1);proxy.pdfViewer.thumbnailViewModule.isThumbnailClicked=false;}_this_1.pdfViewer.firePageChange(pageIndex);}if(_this_1.pdfViewer.magnificationModule){_this_1.pdfViewer.magnificationModule.updatePagesForFitPage(_this_1.currentPageNumber-1);}var currentPage=_this_1.getElement('_pageDiv_'+(_this_1.currentPageNumber-1));if(currentPage){currentPage.style.visibility='visible';}if(_this_1.isViewerMouseDown){if(_this_1.getRerenderCanvasCreated()&&!_this_1.isPanMode){_this_1.pdfViewer.magnificationModule.clearIntervalTimer();}// eslint-disable-next-line
var data=_this_1.getLinkInformation(_this_1.currentPageNumber);if(data){_this_1.isDataExits=true;_this_1.initiatePageViewScrollChanged();_this_1.isDataExits=false;}else{// eslint-disable-next-line max-len
var timer=_this_1.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll?_this_1.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll:100;_this_1.scrollHoldTimer=setTimeout(function(){_this_1.initiatePageViewScrollChanged();},timer);}}if(_this_1.pdfViewer.annotation&&_this_1.navigationPane.commentPanelContainer){if(sf.base.Browser.isDevice){_this_1.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(_this_1.currentPageNumber-1);}else{_this_1.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(_this_1.currentPageNumber);}}// eslint-disable-next-line max-len
if(sf.base.Browser.isDevice&&!_this_1.pdfViewer.enableDesktopMode&&event.touches&&event.touches[0].target.className!=='e-pv-touch-ellipse'){setTimeout(function(){_this_1.updateMobileScrollerPosition();},500);}proxy.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};this.pdfViewer=viewer;this.navigationPane=new NavigationPane(this.pdfViewer,this);this.textLayer=new TextLayer(this.pdfViewer,this);this.signatureModule=new Signature(this.pdfViewer,this);this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||navigator.userAgent.indexOf('Safari')!==-1;}/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.initializeComponent=function(){var _this_1=this;var element=document.getElementById(this.pdfViewer.dataId);if(element){this.blazorUIAdaptor=new BlazorUiAdaptor(this.pdfViewer,this);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewer.element.classList.add('e-pv-mobile-view');}var controlWidth='100%';var toolbarDiv=void 0;this.viewerMainContainer=element.querySelector('.e-pv-viewer-main-container');this.viewerContainer=element.querySelector('.e-pv-viewer-container');this.viewerContainer.addEventListener('focus',this.tabElementOnFocus.bind(this));this.viewerContainer.addEventListener("blur",this.escElementOnFocus.bind(this));document.addEventListener('keydown',function(event){if(event.key=="Tab"){_this_1.lastInputMethod='Tab';}});document.addEventListener('mousedown',function(event){_this_1.lastInputMethod=null;});if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.createMobilePageNumberContainer();}// eslint-disable-next-line
this.viewerContainer.tabIndex=-1;if(this.pdfViewer.enableRtl){this.viewerContainer.style.direction='rtl';}element.style.touchAction='pan-x pan-y';this.setMaximumHeight(element);this.mainContainer=element.querySelector('.e-pv-main-container');this.mainContainer.appendChild(this.viewerMainContainer);element.appendChild(this.mainContainer);this.applyViewerHeight(this.mainContainer);if(this.pdfViewer.toolbarModule){this.navigationPane.initializeNavigationPane();toolbarDiv=this.pdfViewer.toolbarModule.intializeToolbar(controlWidth);}else{this.navigationPane.initializeNavigationPane();toolbarDiv=this.pdfViewer.element.querySelector('.e-pv-toolbar');if(!this.pdfViewer.enableToolbar){this.toolbarHeight=0;toolbarDiv.style.display='none';}if(!this.pdfViewer.enableNavigationToolbar&&(sf.base.Browser.isDevice&&this.pdfViewer.enableDesktopMode||!sf.base.Browser.isDevice)){this.navigationPane.sideBarToolbar.style.display='none';this.navigationPane.sideBarToolbarSplitter.style.display='none';if(this.navigationPane.isBookmarkOpen||this.navigationPane.isThumbnailOpen){this.navigationPane.updateViewerContainerOnClose();}}}if(toolbarDiv){var toolbarHeight=toolbarDiv.clientHeight;this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,toolbarHeight);}else{this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);}var viewerWidth=this.pdfViewer.element.clientWidth;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){viewerWidth=viewerWidth-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)-(this.navigationPane.commentPanelContainer?this.navigationPane.getViewerContainerRight():0);}this.viewerContainer.style.width=viewerWidth+'px';//Have commented out the code since the following code adds the element at last which makes keyboard navigation impossible
//this.viewerMainContainer.appendChild(this.viewerContainer);
if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.left=viewerWidth-parseFloat(this.mobileScrollerContainer.style.width)+'px';this.mobilePageNoContainer.style.left=viewerWidth/2-parseFloat(this.mobilePageNoContainer.style.width)/2+'px';this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+'px';this.mobilePageNoContainer.style.display='none';this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer);this.mobilePageNoContainer.appendChild(this.mobilenumberContainer);this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer);this.viewerContainer.appendChild(this.mobilePageNoContainer);this.viewerMainContainer.appendChild(this.mobileScrollerContainer);this.mobileScrollerContainer.appendChild(this.mobileSpanContainer);}this.pageContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_pageViewContainer',className:'e-pv-page-container',attrs:{'aria-label':'pdfviewer Page View'}});if(this.pdfViewer.enableRtl){this.pageContainer.style.direction='ltr';}this.viewerContainer.appendChild(this.pageContainer);this.pageContainer.style.width=this.viewerContainer.clientWidth+'px';if(toolbarDiv&&this.pdfViewer.thumbnailViewModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){this.pdfViewer.thumbnailViewModule.createThumbnailContainer();}this.createPrintPopup();var waitingPopup=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_loadingIndicator'});this.viewerContainer.appendChild(waitingPopup);createSpinner({target:waitingPopup,cssClass:'e-spin-center'});this.setLoaderProperties(waitingPopup);this.contextMenuModule=new BlazorContextMenu(this.pdfViewer,this);// eslint-disable-next-line
var spinnerElement=document.getElementsByClassName(this.pdfViewer.dataId+'_spinner');if(spinnerElement&&spinnerElement[0]&&!spinnerElement[0].classList.contains('e-spin-hide')){spinnerElement[0].classList.remove('e-spin-show');spinnerElement[0].classList.add('e-spin-hide');}this.contextMenuModule.createContextMenu();this.createFileInputElement();this.wireEvents();if(this.pdfViewer.textSearchModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){this.pdfViewer.textSearchModule.createTextSearchBox();}}};PdfViewerBase.prototype.LoadDocumentFromServer=function(){var proxy=null;proxy=this;if(this.pdfViewer.documentPath){this.pdfViewer.viewerBase.showLoadingIndicator(true);var isDocumentLoaded=false;if(this.pdfViewer.documentPath.includes(';base64,')){isDocumentLoaded=true;this.pdfViewer.uploadedFile=this.pdfViewer.documentPath;}if(this.pdfViewer.documentPath.startsWith('http://')||this.pdfViewer.documentPath.startsWith('https://')){this.getPdfBase64(proxy.pdfViewer.documentPath).then(function(pdfBase64){proxy.pdfViewer.uploadedFile='data:application/pdf;base64,'+pdfBase64;proxy.pdfViewer._dotnetInstance.invokeMethodAsync('LoadDocumentFromClient','data:application/pdf;base64,'+pdfBase64,true);});}else{this.pdfViewer._dotnetInstance.invokeMethodAsync('LoadDocumentFromClient',this.pdfViewer.documentPath,isDocumentLoaded);}}if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.initializeCollection();}};PdfViewerBase.prototype.tabElementOnFocus=function(args){if(this.lastInputMethod==='Tab'){if(this.pdfViewer.formFieldCollections&&this.pdfViewer.formFieldCollections.length>0){var nextField=this.pdfViewer.formFieldCollections[0];var currentField=document.getElementById(nextField.id);if(currentField){currentField.focus();}}this.lastInputMethod=null;}};PdfViewerBase.prototype.escElementOnFocus=function(args){var viewerElement=document.getElementById(this.pdfViewer.dataId+"_viewerContainer");viewerElement.classList.remove("e-focused");};PdfViewerBase.prototype.createMobilePageNumberContainer=function(){this.mobilePageNoContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_mobilepagenoContainer',className:'e-pv-mobilepagenoscroll-container'});this.mobilecurrentPageContainer=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_mobilecurrentpageContainer',className:'e-pv-mobilecurrentpage-container'});this.mobilenumberContainer=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_mobiledashedlineContainer',className:'e-pv-mobiledashedline-container'});this.mobiletotalPageContainer=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_mobiletotalpageContainer',className:'e-pv-mobiletotalpage-container'});this.mobileScrollerContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_mobilescrollContainer',className:'e-pv-mobilescroll-container'});this.mobileSpanContainer=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_mobilespanContainer',className:'e-pv-mobilespanscroll-container'});this.mobileSpanContainer.innerHTML='1';this.mobilecurrentPageContainer.innerHTML='1';this.mobilenumberContainer.innerHTML='&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;';this.mobileScrollerContainer.style.cssFloat='right';this.mobileScrollerContainer.style.width='40px';this.mobileScrollerContainer.style.height='32px';this.mobileScrollerContainer.style.zIndex='100';this.mobilePageNoContainer.style.width='120px';this.mobilePageNoContainer.style.height='100px';this.mobilePageNoContainer.style.zIndex='100';this.mobilePageNoContainer.style.position='fixed';this.mobileScrollerContainer.addEventListener('touchstart',this.mobileScrollContainerDown.bind(this),{passive:true});this.mobileScrollerContainer.addEventListener('touchend',this.mobileScrollContainerEnd.bind(this));this.mobileScrollerContainer.style.display='none';};/**
     * @private
     * @param  {string} documentData - file name or base64 string.
     * @param {string} password - password of the PDF document.
     * @returns {void}
     */PdfViewerBase.prototype.initiatePageRender=function(documentData,password){var proxy=null;proxy=this;this.pdfViewer.unload();this.loadedData=documentData;this.documentId=this.createGUID();if(this.viewerContainer){this.viewerContainer.scrollTop=0;}this.showLoadingIndicator(true);this.hashId=' ';this.isFileName=false;this.saveDocumentInfo();if(this.pdfViewer.interactionMode==='Pan'){this.initiatePanning();}this.getPdfBase64(documentData).then(function(pdfBase64){var isUrlLoaded=false;if(documentData.startsWith('http://')||documentData.startsWith('https://')){isUrlLoaded=true;}if(!isUrlLoaded){documentData=proxy.checkDocumentData(pdfBase64);}else{documentData=pdfBase64;}var isbase64=proxy.loadedData.includes('pdf;base64,')?true:isUrlLoaded?true:false;if(isbase64){proxy.pdfViewer.fileByteArray=proxy.convertBase64(documentData);}proxy.setFileName();if(proxy.pdfViewer.downloadFileName){proxy.downloadFileName=proxy.pdfViewer.downloadFileName;}else{proxy.downloadFileName=proxy.pdfViewer.fileName;}var jsonObject=proxy.constructJsonObject(documentData,password,isbase64);proxy.createAjaxRequest(jsonObject,documentData,password);});};/**
     * @private
     */PdfViewerBase.prototype.initiateLoadDocument=function(documentId,isFileName,fileName){if(documentId){this.documentId=documentId;}if(this.viewerContainer){this.viewerContainer.scrollTop=0;}this.showLoadingIndicator(true);this.hashId=' ';this.isFileName=isFileName;this.saveDocumentInfo();if(this.pdfViewer.interactionMode==='Pan'){this.initiatePanning();}this.setFileName();if(this.pdfViewer.fileName===null){if(isFileName&&fileName){this.pdfViewer.fileName=fileName;this.jsonDocumentId=this.pdfViewer.fileName;}else{this.pdfViewer.fileName='Untitled.pdf';this.jsonDocumentId=null;}}if(this.pdfViewer.downloadFileName){this.downloadFileName=this.pdfViewer.downloadFileName;}else{this.downloadFileName=this.pdfViewer.fileName;}};PdfViewerBase.prototype.convertBase64=function(base64){base64=base64.replace('data:application/pdf;base64,','');return new Uint8Array(atob(base64).split('').map(function(_char){return _char.charCodeAt(0);}));};/**
     * @private
     */PdfViewerBase.prototype.loadSuccess=function(documentDetails,password){// eslint-disable-next-line
var data=documentDetails;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){this.onControlError(500,data,this.pdfViewer.serverActionSettings.load);data=null;}}if(data){while(_typeof(data)!=='object'){data=JSON.parse(data);// eslint-disable-next-line
if(typeof parseInt(data)==='number'&&!isNaN(parseInt(data))){// eslint-disable-next-line
data=parseInt(data);break;}}if(data.StatusText&&data.StatusText==='File Does not Exist'){this.showLoadingIndicator(false);}// eslint-disable-next-line
if(data.uniqueId===this.documentId||typeof parseInt(data)==='number'&&!isNaN(parseInt(data))){this.updateFormFieldName(data);this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,data);this.requestSuccess(data,null,password);}}}};// eslint-disable-next-line
PdfViewerBase.prototype.updateFormFieldName=function(data){if(data&&data.PdfRenderedFormFields&&data.PdfRenderedFormFields.length>0){var field=void 0;for(var i=0;i<data.PdfRenderedFormFields.length;i++){field=data.PdfRenderedFormFields[i];if(field){if(field.ActualFieldName){field.FieldName=field.ActualFieldName;}}}}};// eslint-disable-next-line
PdfViewerBase.prototype.mobileScrollContainerDown=function(event){this.ispageMoved=false;this.isThumb=true;if(this.isTextMarkupAnnotationModule()){// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage!=null&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var pageNumber=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null;this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(pageNumber);this.pdfViewer.toolbar.showToolbar(true);}}this.mobileScrollerContainer.addEventListener('touchmove',this.viewerContainerOnScroll.bind(this),true);};/**
     * @private
     * @param {MouseEvent} e - default mouse event.
     * @returns {PointModel} - retuns the bounds.
     */PdfViewerBase.prototype.relativePosition=function(e){// eslint-disable-next-line
var currentRect=this.viewerContainer.getBoundingClientRect();var left=e.clientX-currentRect.left;var top=e.clientY-currentRect.top;return{x:left,y:top};};// eslint-disable-next-line
PdfViewerBase.prototype.setMaximumHeight=function(element){// eslint-disable-next-line
var currentRect=element.getBoundingClientRect();if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode||currentRect&&currentRect.height===0){element.style.minHeight='500px';}this.updateWidth();this.updateHeight();};// eslint-disable-next-line
PdfViewerBase.prototype.applyViewerHeight=function(element){// eslint-disable-next-line
var currentRect=element.getBoundingClientRect();if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&currentRect&&currentRect.height===0){element.style.minHeight='500px';}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateWidth=function(){if(this.pdfViewer.width.toString()!=='auto'){// eslint-disable-next-line
this.pdfViewer.element.style.width=this.pdfViewer.width;}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateHeight=function(){if(this.pdfViewer.height.toString()!=='auto'){// eslint-disable-next-line
this.pdfViewer.element.style.height=this.pdfViewer.height;}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateViewerContainer=function(){var sideBarContentContainer=this.getElement('_sideBarContentContainer');if(sideBarContentContainer&&sideBarContentContainer.style.display==='none'){this.navigationPane.updateViewerContainerOnClose();}else if(sideBarContentContainer&&sideBarContentContainer.style.display==='block'){this.navigationPane.updateViewerContainerOnExpand();}else{this.updateViewerContainerSize();}// eslint-disable-next-line
var toolbarModule=this.pdfViewer.toolbarModule;if(toolbarModule){if(this.pdfViewer.enableToolbar||this.pdfViewer.enableAnnotationToolbar){this.pdfViewer._dotnetInstance.invokeMethodAsync('RefreshToolbarItems');}}};PdfViewerBase.prototype.updateViewerContainerSize=function(){this.viewerContainer.style.width=this.pdfViewer.element.clientWidth+'px';this.pageContainer.style.width=this.viewerContainer.offsetWidth+'px';this.updateZoomValue();};// eslint-disable-next-line
PdfViewerBase.prototype.mobileScrollContainerEnd=function(event){if(!this.ispageMoved){this.pdfViewer._dotnetInstance.invokeMethodAsync('ShowPageDialog',null);}this.isThumb=false;this.ispageMoved=false;this.mobileScrollerContainer.removeEventListener('touchmove',this.viewerContainerOnScroll.bind(this),true);this.mobilePageNoContainer.style.display='none';};PdfViewerBase.prototype.getPdfBase64=function(input){if(input.startsWith('http://')||input.startsWith('https://')){return fetch(input).then(function(response){if(response.ok){return response.arrayBuffer();}else{console.error('Error fetching PDF:',response.statusText);throw new Error(response.statusText);}}).then(function(pdfData){var binary=new Uint8Array(pdfData).reduce(function(str,_byte){return str+String.fromCharCode(_byte);},'');var base64String=btoa(binary);return base64String;})["catch"](function(error){console.error('Error fetching PDF:',error.message);throw error;});}else{return Promise.resolve(input);}};// eslint-disable-next-line
PdfViewerBase.prototype.createAjaxRequest=function(jsonObject,documentData,password){var proxy=null;proxy=this;if(this.pdfViewer.serverActionSettings){this.loadRequestHandler=new AjaxHandler(this.pdfViewer);this.loadRequestHandler.url=this.pdfViewer.serviceUrl+'/'+this.pdfViewer.serverActionSettings.load;this.loadRequestHandler.responseType='json';this.loadRequestHandler.mode=true;// eslint-disable-next-line
jsonObject['action']='Load';// eslint-disable-next-line
jsonObject['elementId']=this.pdfViewer.dataId;this.loadRequestHandler.send(jsonObject);// eslint-disable-next-line
this.loadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.onControlError(500,data,this.pdfViewer.serverActionSettings.load);data=null;}}if(data){while(_typeof(data)!=='object'){data=JSON.parse(data);// eslint-disable-next-line
if(typeof parseInt(data)==='number'&&!isNaN(parseInt(data))){// eslint-disable-next-line
data=parseInt(data);break;}}// eslint-disable-next-line
if(data.uniqueId===proxy.documentId||typeof parseInt(data)==='number'&&!isNaN(parseInt(data))){proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,data);proxy.requestSuccess(data,documentData,password);}}else{proxy.showLoadingIndicator(false);}}};// eslint-disable-next-line
this.loadRequestHandler.onFailure=function(result){var statusString=result.status.toString().split('')[0];if(statusString==='4'){proxy.openNotificationPopup('Client error');}else{proxy.openNotificationPopup();}proxy.showLoadingIndicator(false);proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.load);};// eslint-disable-next-line
this.loadRequestHandler.onError=function(result){proxy.openNotificationPopup();proxy.showLoadingIndicator(false);// eslint-disable-next-line
proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.load);};}};/**
     * @private
     * @param {string} errorString - The message to be displayed.
     * @returns {void}
     */PdfViewerBase.prototype.openNotificationPopup=function(errorString){var _this_1=this;if(this.pdfViewer.showNotificationDialog){if(errorString==='Client error'){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Clienterror');promise.then(function(value){_this_1.textLayer.createNotificationPopup(value);});}else{var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Servererror');promise.then(function(value){_this_1.textLayer.createNotificationPopup(value);});}if(this.getElement('_notify')){this.getElement('_notify').classList.add('e-pv-notification-large-content');}}};/**
     * @private
     * @param {string} errorString - The message to be shown.
     * @returns {void}
     */PdfViewerBase.prototype.showNotificationPopup=function(errorString){if(!this.pdfViewer.showNotificationDialog&&errorString!==''){this.textLayer.createNotificationPopup(errorString);if(this.getElement('_notify')){this.getElement('_notify').classList.add('e-pv-notification-large-content');}}};// eslint-disable-next-line
PdfViewerBase.prototype.requestSuccess=function(data,documentData,password){if(data.fileByteArray){this.pdfViewer.fileByteArray=this.convertBase64(data.fileByteArray);}else if(!this.pdfViewer.fileByteArray&&this.pdfViewer.uploadedFile){this.pdfViewer.fileByteArray=this.convertBase64(this.pdfViewer.uploadedFile);}if(data&&data.pageCount!==undefined){if(this.isPassword){this.isPassword=false;this.isPasswordAvailable=false;this.pdfViewer._dotnetInstance.invokeMethodAsync('ClosePasswordDialog');}if(password&&password!=''){this.passwordData=password;}this.pdfViewer.allowServerDataBinding=false;this.pageCount=data.pageCount;this.pdfViewer.pageCount=data.pageCount;this.pdfViewer.updatePdfViewerOptions("PageCount",data.pageCount);this.hashId=data.hashId;this.documentLiveCount=data.documentLiveCount;this.isAnnotationCollectionRemoved=false;this.saveDocumentHashData();this.saveFormfieldsData(data);this.pdfViewer.allowServerDataBinding=true;this.isDigitalSignaturePresent=data.isDigitalSignaturePresent;this.pageRender(data);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display='';// eslint-disable-next-line
var toolbarHeight=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=toolbarHeight+'px';}this.restrictionList=data.RestrictionSummary;this.RestrictionEnabled(this.restrictionList,false);}else{this.pageCount=0;this.currentPageNumber=0;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display='none';}if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.updateToolbarItems();}}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotationModule;// eslint-disable-next-line max-len
if(annotationModule&&annotationModule.textMarkupAnnotationModule&&annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)){annotationModule.textMarkupAnnotationModule.createAnnotationSelectElement();}};// eslint-disable-next-line
PdfViewerBase.prototype.RestrictionEnabled=function(restrictionSummary,isEnable){if(restrictionSummary){for(var i=0;i<restrictionSummary.length;i++){this.EnableRestriction(restrictionSummary[i],isEnable);if(this.pdfViewer.toolbarModule){this.pdfViewer._dotnetInstance.invokeMethodAsync('RestrictToolbarItems',restrictionSummary,isEnable);}}}};// eslint-disable-next-line
PdfViewerBase.prototype.EnableRestriction=function(restrictionSummary,isEnable){switch(restrictionSummary){case'Print':this.pdfViewer.enablePrint=isEnable;break;case'CopyContent':this.pdfViewer.enableTextSelection=isEnable;break;case'FillFields':this.pdfViewer.enableFormFields=isEnable;this.enableFormFieldButton(isEnable);break;case'EditAnnotations':this.pdfViewer.enableAnnotation=isEnable;break;}};// eslint-disable-next-line
PdfViewerBase.prototype.pageRender=function(data){this.document=null;this.passwordDialogReset();if(this.passwordPopup){this.passwordPopup.hide();}var pageIndex=0;var proxy=null;proxy=this;var fileByteArray=this.pdfViewer.fileByteArray;this.pdfViewerRunner.postMessage({uploadedFile:fileByteArray,message:'LoadPageCollection',password:proxy.passwordData,pageIndex:pageIndex});if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString();this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString();}};PdfViewerBase.prototype.PageloadedOnMessage=function(event){if(event.data.message==='PageLoaded'){this.initPageDiv(event.data);var pageIndex=0;this.currentPageNumber=pageIndex+1;this.pdfViewer.currentPageNumber=pageIndex+1;this.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",this.pdfViewer.currentPageNumber);this.previousZoomValue=this.pdfViewer.zoomValue;var isZoomMode=false;if(this.pdfViewer.magnificationModule){this.pdfViewer.magnificationModule.isAutoZoom=true;if(this.pdfViewer.zoomValue&&this.pdfViewer.zoomValue>0){if(this.pdfViewer.zoomValue!==100){isZoomMode=true;}this.isInitialPageMode=true;this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue);}if(this.pdfViewer.zoomMode==='FitToWidth'){this.isInitialPageMode=true;this.pdfViewer.magnificationModule.fitToWidth();}else if(this.pdfViewer.zoomMode==='FitToPage'){this.isInitialPageMode=true;this.pdfViewer.magnificationModule.fitToPage();}else if(this.pdfViewer.zoomMode==='FitToHeight'){this.isInitialPageMode=true;this.pdfViewer.magnificationModule.fitToHeight();}this.documentLoaded=true;this.pdfViewer.magnificationModule.isInitialLoading=true;this.onWindowResize();this.documentLoaded=false;this.pdfViewer.magnificationModule.isInitialLoading=false;}if(this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isAutoZoom){this.pdfViewer.updatePdfViewerOptions("ZoomValue",100);}else{this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue);}this.isDocumentLoaded=true;// eslint-disable-next-line
this.showLoadingIndicator(false);var pageData={pageCount:this.pageCount,pageSizes:event.data.pageSizes};window.sessionStorage.setItem(this.documentId+'_pagedata',JSON.stringify(pageData));if(this.renderedPagesList.indexOf(event.data.pageIndex)===-1&&!isZoomMode){this.createRequestForRender(event.data.pageIndex);var pageNumber=event.data.pageIndex+1;if(pageNumber<this.pageCount){this.createRequestForRender(pageNumber);pageNumber=pageNumber+1;}if(this.pageSize[pageNumber]){var pageTop=this.getPageTop(pageNumber);var viewerHeight=this.viewerContainer.clientHeight;while(viewerHeight>pageTop){if(this.pageSize[pageNumber]){this.renderPageElement(pageNumber);this.createRequestForRender(pageNumber);pageTop=this.getPageTop(pageNumber);pageNumber=pageNumber+1;}else{break;}}}}}};PdfViewerBase.prototype.renderPasswordPopup=function(documentData,password){var _this_1=this;// eslint-disable-next-line
var promptElement=document.getElementById(this.pdfViewer.dataId+'_prompt');var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_EnterPassword');promise.then(function(value){promptElement.textContent=value;});// eslint-disable-next-line
var passwordInput=document.querySelector('#'+this.pdfViewer.dataId+'_password_input');passwordInput.addEventListener('keyup',function(){if(passwordInput.value===''){_this_1.passwordDialogReset();}});passwordInput.addEventListener('focus',function(){passwordInput.parentElement.classList.add('e-input-focus');});passwordInput.addEventListener('blur',function(){passwordInput.parentElement.classList.remove('e-input-focus');});if(!this.isPasswordAvailable){if(this.isFileName){this.document=documentData;}else{this.document='data:application/pdf;base64,'+documentData;}this.isPasswordAvailable=true;this.pdfViewer.fireDocumentLoadFailed(true,null);}else{this.pdfViewer.fireDocumentLoadFailed(true,password);promptElement.classList.add('e-pv-password-error');var promise_1=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_InvalidPassword');promise_1.then(function(value){promptElement.textContent=value;});promptElement.focus();if(this.isFileName){this.document=documentData;}else{this.document='data:application/pdf;base64,'+documentData;}}this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPasswordDialog');};PdfViewerBase.prototype.renderCorruptPopup=function(){this.pdfViewer.fireDocumentLoadFailed(false,null);this.documentId=null;if(this.pdfViewer.showNotificationDialog){this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenCorruptedDialog');}};PdfViewerBase.prototype.constructJsonObject=function(documentData,password,isBase64String){var jsonObject;if(password){this.isPasswordAvailable=true;this.passwordData=password;// eslint-disable-next-line max-len
jsonObject={document:documentData,password:password,isClientsideLoading:isBase64String,zoomFactor:1,isFileName:this.isFileName,uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance};}else{this.isPasswordAvailable=false;this.passwordData='';jsonObject={document:documentData,zoomFactor:1,isClientsideLoading:isBase64String,isFileName:this.isFileName,uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance};}return jsonObject;};PdfViewerBase.prototype.checkDocumentData=function(documentData){var base64String=documentData.split('base64,')[1];if(base64String===undefined){this.isFileName=true;this.jsonDocumentId=documentData;if(this.pdfViewer.fileName===null){// eslint-disable-next-line max-len
var documentStringArray=documentData.indexOf('\\')!==-1?documentData.split('\\'):documentData.split('/');this.pdfViewer.fileName=documentStringArray[documentStringArray.length-1];this.jsonDocumentId=this.pdfViewer.fileName;base64String=documentData;}}else{this.jsonDocumentId=null;}return base64String;};PdfViewerBase.prototype.setFileName=function(){if(this.pdfViewer.fileName===null){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.uploadedDocumentName){this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName;this.jsonDocumentId=this.pdfViewer.fileName;}else{this.pdfViewer.fileName='Untitled.pdf';this.jsonDocumentId=null;}}};PdfViewerBase.prototype.saveDocumentInfo=function(){window.sessionStorage.setItem('currentDocument',this.documentId);window.sessionStorage.setItem('serviceURL',this.pdfViewer.serviceUrl);if(this.pdfViewer.serverActionSettings){window.sessionStorage.setItem('unload',this.pdfViewer.serverActionSettings.unload);}};PdfViewerBase.prototype.saveDocumentHashData=function(){var hashId='';if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){hashId=encodeURI(this.hashId);}else{hashId=this.hashId;}window.sessionStorage.setItem('hashId',hashId);if(this.documentLiveCount){window.sessionStorage.setItem('documentLiveCount',this.documentLiveCount.toString());}};// eslint-disable-next-line
PdfViewerBase.prototype.saveFormfieldsData=function(data){this.pdfViewer.isFormFieldDocument=false;this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument);this.enableFormFieldButton(false);if(data&&data.PdfRenderedFormFields&&this.pdfViewer.formFieldsModule&&data.PdfRenderedFormFields.length>0){if(this.formfieldvalue){if(this.pdfViewer.formFieldsModule){this.setItemInSessionStorage(this.formfieldvalue,'_formfields');}this.formfieldvalue=null;}else if(this.pdfViewer.formFieldsModule){this.setItemInSessionStorage(data.PdfRenderedFormFields,'_formfields');}if(this.pdfViewer.enableFormFields){this.pdfViewer.formFieldCollections=[];this.pdfViewer.formFieldsModule.formFieldCollections();}if(this.pdfViewer.formFieldCollections.length>0){this.pdfViewer.isFormFieldDocument=true;this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument);this.enableFormFieldButton(true);}}};/**
     * @param {boolean} isEnable - Enable or disable the toolbar itema.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.enableFormFieldButton=function(isEnable){if(isEnable){this.pdfViewer.isFormFieldDocument=true;this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument);}if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.submitItem){this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement,isEnable);}};PdfViewerBase.prototype.updateWaitingPopup=function(pageNumber){if(this.pageSize[pageNumber].top!=null){// eslint-disable-next-line max-len
var pageCurrentRect=this.getElement('_pageDiv_'+pageNumber).getBoundingClientRect();var waitingPopup=this.getElement('_pageDiv_'+pageNumber).firstChild.firstChild;if(pageCurrentRect.top<0){if(this.toolbarHeight+this.viewerContainer.clientHeight/2-pageCurrentRect.top<pageCurrentRect.height){waitingPopup.style.top=this.viewerContainer.clientHeight/2-pageCurrentRect.top-this.toolbarHeight+'px';}else{if(this.toolbarHeight+pageCurrentRect.bottom/2-pageCurrentRect.top<pageCurrentRect.height){waitingPopup.style.top=pageCurrentRect.bottom/2-pageCurrentRect.top-this.toolbarHeight+'px';}}}else{waitingPopup.style.top=this.viewerContainer.clientHeight/2+'px';}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&pageCurrentRect.width>this.viewerContainer.clientWidth){waitingPopup.style.left=this.viewerContainer.clientWidth/2+this.viewerContainer.scrollLeft+'px';}else if(this.getZoomFactor()>1.25&&pageCurrentRect.width>this.viewerContainer.clientWidth){waitingPopup.style.left=this.viewerContainer.clientWidth/2+'px';}else{waitingPopup.style.left=pageCurrentRect.width/2+'px';}}};/**
     * @private
     * @returns {number} - returned the page value.
     */PdfViewerBase.prototype.getActivePage=function(isPageNumber){if(this.activeElements&&!sf.base.isNullOrUndefined(this.activeElements.activePageID)){if(isPageNumber){return this.activeElements.activePageID+1;}else{return this.activeElements.activePageID;}}else{if(isPageNumber){return this.currentPageNumber;}else{return this.currentPageNumber-1;}}};PdfViewerBase.prototype.createWaitingPopup=function(pageNumber){// eslint-disable-next-line max-len
var waitingPopup=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageNumber);if(waitingPopup){createSpinner({target:waitingPopup});this.setLoaderProperties(waitingPopup);}};/**
     * @param {boolean} isShow - Show or hide loading indicator.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.showLoadingIndicator=function(isShow){var waitingPopup=this.getElement('_loadingIndicator');if(waitingPopup){if(isShow){waitingPopup.style.display='block';showSpinner(waitingPopup);}else{waitingPopup.style.display='none';hideSpinner(waitingPopup);}}};PdfViewerBase.prototype.showPageLoadingIndicator=function(pageIndex,isShow){var waitingPopup=this.getElement('_pageDiv_'+pageIndex);if(waitingPopup!=null){if(isShow){showSpinner(waitingPopup);}else{hideSpinner(waitingPopup);}this.updateWaitingPopup(pageIndex);}};/**
     * @param {boolean} isShow - Show or hide print loading indicator.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.showPrintLoadingIndicator=function(isShow){var printWaitingPopup=this.getElement('_printLoadingIndicator');if(printWaitingPopup!=null){if(isShow){this.printMainContainer.style.display='block';showSpinner(printWaitingPopup);}else{this.printMainContainer.style.display='none';hideSpinner(printWaitingPopup);}}};PdfViewerBase.prototype.setLoaderProperties=function(element){var spinnerElement=element.firstChild.firstChild.firstChild;if(spinnerElement){spinnerElement.style.height='48px';spinnerElement.style.width='48px';spinnerElement.style.transformOrigin='24px 24px 24px';}};/**
     * @param {number} pageNumber - Specify the pageNumber.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.updateScrollTop=function(pageNumber){var _this_1=this;// eslint-disable-next-line
if(this.pageSize[pageNumber]!=null){this.renderElementsVirtualScroll(pageNumber);this.viewerContainer.scrollTop=this.getPageTop(pageNumber);if(this.renderedPagesList.indexOf(pageNumber)===-1){this.createRequestForRender(pageNumber);}setTimeout(function(){var currentPageNumber=pageNumber+1;if(currentPageNumber!==_this_1.currentPageNumber){_this_1.pdfViewer.currentPageNumber=currentPageNumber;_this_1.currentPageNumber=currentPageNumber;_this_1.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",_this_1.pdfViewer.currentPageNumber);if(_this_1.pdfViewer.toolbarModule){_this_1.pdfViewer.toolbarModule.updateCurrentPage(currentPageNumber);}}},100);}};/**
     * @private
     * @returns {number} - Returns the zoom factor value.
     */PdfViewerBase.prototype.getZoomFactor=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.zoomFactor;}else{// default value
return 1;}};/**
     * @private
     * @returns {boolean} - Returns whether the pinch zoom is performed or not.
     */PdfViewerBase.prototype.getPinchZoomed=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isPinchZoomed;}else{// default value
return false;}};/**
     * @private
     * @returns {boolean} -Returns whether the zoom is performed or not.
     */PdfViewerBase.prototype.getMagnified=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isMagnified;}else{// default value
return false;}};PdfViewerBase.prototype.getPinchScrolled=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isPinchScrolled;}else{// default value
return false;}};PdfViewerBase.prototype.getPagesPinchZoomed=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isPagePinchZoomed;}else{// default value
return false;}};PdfViewerBase.prototype.getPagesZoomed=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isPagesZoomed;}else{// default value
return false;}};PdfViewerBase.prototype.getRerenderCanvasCreated=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.isRerenderCanvasCreated;}else{// default value
return false;}};/**
     * @private
     * @returns {string} - retrun the docuumentid.
     */PdfViewerBase.prototype.getDocumentId=function(){return this.documentId;};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.download=function(){if(this.pageCount>0){this.createRequestForDownload();}};/**
     * @private
     * @returns {promise<Blob>} - Returns the blob object.
     */PdfViewerBase.prototype.saveAsBlob=function(){var _this_1=this;if(this.pageCount>0){return new Promise(function(resolve,reject){_this_1.saveAsBlobRequest().then(function(value){resolve(value);});});}return null;};PdfViewerBase.prototype.getCustomCommands=function(newCommands){this.customCommands=newCommands;};PdfViewerBase.prototype.fireCustomCommands=function(event){var _this=this;var commands=_this.customCommands;if(Object.keys(commands).length!==0){var commandsArr=JSON.parse(commands);var modifiers=_this.getModifiers(event);if(modifiers!=null&&event.keyCode){var gesture={modifiers:modifiers,keyCode:event.keyCode,name:''};// Find the matched command in the list
var matchedCommand=commandsArr.find(function(command){return command.gesture&&command.gesture.key===gesture.keyCode&&command.gesture.modifiers===gesture.modifiers;});if(matchedCommand!=null){gesture.name=matchedCommand.name;gesture.modifiers=matchedCommand.gesture.modifiers;gesture.keyCode=matchedCommand.gesture.key;_this.pdfViewer._dotnetInstance.invokeMethodAsync('Trigger','CustomCommands',gesture);}}}};PdfViewerBase.prototype.getModifiers=function(event){var modifiers=0;if(event.ctrlKey)modifiers|=1<<0;if(event.altKey)modifiers|=1<<1;if(event.shiftKey)modifiers|=1<<2;if(event.metaKey)modifiers|=1<<3;return modifiers;};PdfViewerBase.prototype.saveAsBlobRequest=function(){var _this_1=this;var proxy=null;proxy=this;var promise=new Promise(function(resolve,reject){// eslint-disable-next-line
var jsonObject=proxy.constructJsonDownload();_this_1.dowonloadRequestHandler=new AjaxHandler(_this_1.pdfViewer);_this_1.dowonloadRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.download;_this_1.dowonloadRequestHandler.responseType='text';_this_1.dowonloadRequestHandler.send(jsonObject);// eslint-disable-next-line
_this_1.dowonloadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)==='object'){data=JSON.parse(data);}if(_typeof(data)!=='object'&&data.indexOf('data:application/pdf')===-1){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.download);data=null;}if(data){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download,data);var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/pdf');resolve(blobUrl);}}};// eslint-disable-next-line
_this_1.dowonloadRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.download);};// eslint-disable-next-line
_this_1.dowonloadRequestHandler.onError=function(result){proxy.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.download);};});return promise;};/**
     * @param {boolean} isTriggerEvent - check to trigger the event.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.clear=function(isTriggerEvent){var proxy=this;var pdfViewer=proxy.pdfViewer;var printModule=pdfViewer.printModule;var textSearchModule=pdfViewer.textSearchModule;var bookmarkViewModule=pdfViewer.bookmarkViewModule;var thumbnailViewModule=pdfViewer.thumbnailView;var annotationModule=pdfViewer.annotation;var magnificationModule=pdfViewer.magnificationModule;var textSelectionModule=pdfViewer.textSelectionModule;var formFieldsModule=pdfViewer.formFieldsModule;var signatureModule=proxy.signatureModule;proxy.isPasswordAvailable=false;proxy.isDocumentLoaded=false;proxy.isInitialLoaded=false;proxy.isImportAction=false;proxy.annotationPageList=[];if(proxy.annotationComments){this.pdfViewer._dotnetInstance.invokeMethodAsync('ResetCommentCollection');}proxy.annotationComments=null;pdfViewer.annotationCollection=[];pdfViewer.signatureCollection=[];pdfViewer.formFieldCollection=[];proxy.isAnnotationCollectionRemoved=false;proxy.documentAnnotationCollections=null;proxy.isAnnotationPresent=false;proxy.isDrawnCompletely=false;proxy.annotationRenderredList=[];proxy.isImportAction=false;proxy.isImportedAnnotation=false;proxy.importedAnnotation=[];proxy.isStorageExceed=false;proxy.annotationStorage={};proxy.formFieldStorage={};proxy.downloadCollections={};proxy.annotationEvent=null;proxy.highestWidth=0;proxy.highestHeight=0;proxy.requestLists=[];proxy.tilerequestLists=[];proxy.isToolbarInkClicked=false;pdfViewer.formFieldCollections=[];proxy.passwordData='';proxy.updateDocumentEditedProperty(false);proxy.initiateTextSelectMode();proxy.RestrictionEnabled(proxy.restrictionList,true);proxy.restrictionList=null;if(!sf.base.Browser.isDevice||pdfViewer.enableDesktopMode){if(proxy.navigationPane.sideBarToolbar){proxy.navigationPane.clear();}}if(!pdfViewer.enableDesktopMode){proxy.navigationPane.clear();}if(thumbnailViewModule){thumbnailViewModule.clear();}if(bookmarkViewModule){bookmarkViewModule.clear();}if(magnificationModule){magnificationModule.isMagnified=false;magnificationModule.clearIntervalTimer();}if(textSelectionModule){textSelectionModule.clearTextSelection();}if(textSearchModule){textSearchModule.resetTextSearch();}if(annotationModule){annotationModule.clear();annotationModule.initializeCollection();}if(formFieldsModule){formFieldsModule.readOnlyCollection=[];formFieldsModule.signatureFieldCollection=[];formFieldsModule.currentTarget=null;}if(signatureModule){signatureModule.signaturecollection=[];signatureModule.outputcollection=[];}if(proxy.pageSize){proxy.pageSize=[];}if(proxy.renderedPagesList){proxy.renderedPagesList=[];}if(proxy.pageContainer){while(proxy.pageContainer.hasChildNodes()){proxy.pageContainer.removeChild(proxy.pageContainer.lastChild);}}if(proxy.pageCount>0){proxy.unloadDocument(proxy);// eslint-disable-next-line
proxy.textLayer.characterBound=new Array();proxy.loadRequestHandler&&proxy.loadRequestHandler.clear();proxy.virtualLoadRequestHandler&&proxy.virtualLoadRequestHandler.clear();proxy.pageRequestHandler&&proxy.pageRequestHandler.clear();proxy.dowonloadRequestHandler&&proxy.dowonloadRequestHandler.clear();proxy.importAnnotationRequestHandler&&proxy.importAnnotationRequestHandler.clear();proxy.exportAnnotationRequestHandler&&proxy.exportAnnotationRequestHandler.clear();proxy.importFormFieldsRequestHandler&&proxy.importFormFieldsRequestHandler.clear();proxy.exportFormFieldsRequestHandler&&proxy.exportFormFieldsRequestHandler.clear();if(printModule&&printModule.printRequestHandler){printModule.printRequestHandler.clear();}}proxy.windowSessionStorageClear();if(proxy.pinchZoomStorage){proxy.pinchZoomStorage=[];}if((proxy.previousZoomValue||proxy.previousZoomValue===0)&&proxy.previousZoomValue!==pdfViewer.zoomValue){if(this.pdfViewer.zoomMode!=="Default"){pdfViewer.zoomValue=100;this.pdfViewer.updatePdfViewerOptions("ZoomValue",100);}else{pdfViewer.zoomValue=proxy.previousZoomValue;this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue);}}if(isTriggerEvent&&proxy.pageCount>0){pdfViewer.fireDocumentUnload(this.pdfViewer.fileName);}this.pdfViewer.fileName=null;if(this.pdfViewer.documentPath!==null&&this.pdfViewer.documentPath!==undefined){this.pdfViewer.documentPath=null;}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.destroy=function(){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewer.element.classList.remove('e-pv-mobile-view');}this.unWireEvents();this.clear(false);this.pageContainer.parentNode?this.pageContainer.parentNode.removeChild(this.pageContainer):null;this.viewerContainer.parentNode?this.viewerContainer.parentNode.removeChild(this.viewerContainer):null;var measureElement=document.getElementById('measureElement');if(measureElement){measureElement=undefined;}};/**
     * @param {PdfViewerBase} proxy - PdfviewerBase class.
     * @returns {void}
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.unloadDocument=function(proxy){var documentId='';if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){documentId=decodeURI(window.sessionStorage.getItem('hashId'));}else{documentId=window.sessionStorage.getItem('hashId');}var documentLiveCount=window.sessionStorage.getItem('documentLiveCount');if(documentId!==null){// eslint-disable-next-line max-len
var jsonObject={hashId:documentId,documentLiveCount:documentLiveCount,action:'Unload',elementId:proxy.pdfViewer.element.id};var actionName=window.sessionStorage.getItem('unload');this.clearCache(actionName,jsonObject,proxy);}if(this.pdfViewer.magnificationModule){this.pdfViewer.magnificationModule.zoomFactor=1;}this.formFieldCollection=[];window.sessionStorage.removeItem('hashId');window.sessionStorage.removeItem('documentLiveCount');if(this.documentId){window.sessionStorage.removeItem(this.documentId+'_formfields');window.sessionStorage.removeItem(this.documentId+'_annotations_shape');window.sessionStorage.removeItem(this.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(this.documentId+'_annotations_stamp');window.sessionStorage.removeItem(this.documentId+'_annotations_sticky');window.sessionStorage.removeItem(this.documentId+'_annotations_textMarkup');window.sessionStorage.removeItem(this.documentId+'_annotations_freetext');window.sessionStorage.removeItem(this.documentId+'_formfields');window.sessionStorage.removeItem(this.documentId+'_annotations_sign');window.sessionStorage.removeItem(this.documentId+'_annotations_ink');}};PdfViewerBase.prototype.clearCache=function(actionName,jsonObject,proxy){this.unloadRequestHandler=new AjaxHandler(this.pdfViewer);this.unloadRequestHandler.url=window.sessionStorage.getItem('serviceURL')+'/'+actionName;this.unloadRequestHandler.mode=false;this.unloadRequestHandler.responseType=null;this.unloadRequestHandler.send(jsonObject);// eslint-disable-next-line
this.unloadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){if(data.indexOf('Document')===-1){proxy.onControlError(500,data,actionName);data=null;}}if(data){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.unload,data);}}};// eslint-disable-next-line
this.unloadRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,actionName);};// eslint-disable-next-line
this.unloadRequestHandler.onError=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,actionName);};};PdfViewerBase.prototype.windowSessionStorageClear=function(){window.sessionStorage.removeItem('currentDocument');window.sessionStorage.removeItem('serviceURL');window.sessionStorage.removeItem('unload');for(var i=0;i<this.sessionStorage.length;i++){window.sessionStorage.removeItem(this.sessionStorage[i]);}};PdfViewerBase.prototype.updateCommentPanelAfterloading=function(){var proxy=this;setTimeout(function(){proxy.updateCommentPanel();},1000);};PdfViewerBase.prototype.updateCommentPanel=function(){// eslint-disable-next-line
var moreOptionsButton=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<moreOptionsButton.length;i++){moreOptionsButton[i].style.visibility='hidden';}// eslint-disable-next-line
// let commentTextBox: any = document.querySelectorAll('.e-pv-new-comments-div');
// for (let j: number = 0; j < commentTextBox.length; j++) {
//     commentTextBox[j].style.display = 'none';
// }
// eslint-disable-next-line
var commentContainer=document.querySelectorAll('.e-pv-comments-border');for(var j=0;j<commentContainer.length;j++){commentContainer[j].classList.remove('e-pv-comments-border');}// eslint-disable-next-line
var editableElement=document.querySelectorAll('.e-editable-inline');for(var j=0;j<editableElement.length;j++){editableElement[j].style.display='none';}// eslint-disable-next-line
var commentSelect=document.querySelectorAll('.e-pv-comments-select');for(var z=0;z<commentSelect.length;z++){commentSelect[z].classList.remove('e-pv-comments-select');}// eslint-disable-next-line
var commentsDiv=document.querySelectorAll('.e-pv-comments-div');for(var j=0;j<commentsDiv.length;j++){commentsDiv[j].style.minHeight=60+'px';}};/**
     * @param {boolean} isMouseDown - check whether the mouse down is triggered.
     * @returns {void}
     * @private
     */PdfViewerBase.prototype.focusViewerContainer=function(isMouseDown){var _this_1=this;var scrollX=window.scrollX;var scrollY=window.scrollY;// eslint-disable-next-line
var parentNode=this.getScrollParent(this.viewerContainer);var scrollNodeX=0;var scrollNodeY=0;if(parentNode!==null){scrollNodeX=parentNode.scrollLeft;scrollNodeY=parentNode.scrollTop;}if(this.isThicknessChange||this.isOpacityChange){setTimeout(function(){_this_1.viewerContainer.focus();_this_1.isThicknessChange=false;_this_1.isOpacityChange=false;},50);}else{this.viewerContainer.focus();}if(this.currentPageNumber>0){this.viewerContainer.setAttribute('aria-labelledby',this.pdfViewer.dataId+'_pageDiv_'+(this.currentPageNumber-1));}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule){this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+this.currentPageNumber);if(this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer||this.pdfViewer.annotation){this.updateCommentPanel();}}// eslint-disable-next-line max-len
if((navigator.userAgent.indexOf('MSIE')!==-1||navigator.appVersion.indexOf('Trident/')>-1||navigator.userAgent.indexOf('Edge')!==-1)&&parentNode!==null){parentNode.scrollLeft=scrollNodeX;parentNode.scrollTop=scrollNodeY;}else if(parentNode!==null){parentNode.scrollTo(scrollNodeX,scrollNodeY);}window.scrollTo(scrollX,scrollY);};// eslint-disable-next-line
PdfViewerBase.prototype.getScrollParent=function(node){if(node===null||node.nodeName==='HTML'){return null;}var style=getComputedStyle(node);if(this.viewerContainer.id!==node.id&&(style.overflowY==='scroll'||style.overflowY==='auto')){return node;}else{return this.getScrollParent(node.parentNode);}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.hideLoadingIndicator=function(){var waitingPopup=this.getElement('_loadingIndicator');if(waitingPopup!==null){hideSpinner(waitingPopup);}};PdfViewerBase.prototype.createPrintPopup=function(){var element=document.getElementById(this.pdfViewer.dataId);this.printMainContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printcontainer',className:'e-pv-print-popup-container'});element.appendChild(this.printMainContainer);this.printMainContainer.style.display='none';var printWaitingPopup=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printLoadingIndicator',className:'e-pv-print-loading-container'});this.printMainContainer.appendChild(printWaitingPopup);createSpinner({target:printWaitingPopup,cssClass:'e-spin-center'});this.setLoaderProperties(printWaitingPopup);};PdfViewerBase.prototype.createGoToPagePopup=function(){var _this_1=this;// eslint-disable-next-line max-len
var popupElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_goTopage_popup',className:'e-pv-gotopage-popup'});this.goToPageElement=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_prompt'});this.goToPageElement.textContent=this.pdfViewer.localeObj.getConstant('Enter pagenumber');popupElement.appendChild(this.goToPageElement);var inputContainer=sf.base.createElement('span',{className:'e-pv-text-input'});// eslint-disable-next-line max-len
this.goToPageInput=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_page_input',className:'e-input'});this.goToPageInput.type='text';this.goToPageInput.style.maxWidth='80%';this.pageNoContainer=sf.base.createElement('span',{className:'.e-pv-number-ofpages'});inputContainer.appendChild(this.goToPageInput);inputContainer.appendChild(this.pageNoContainer);popupElement.appendChild(inputContainer);this.pageContainer.appendChild(popupElement);this.goToPagePopup=new sf.popups.Dialog({showCloseIcon:true,closeOnEscape:false,isModal:true,header:this.pdfViewer.localeObj.getConstant('GoToPage'),visible:false,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.GoToPageCancelClick.bind(this)},// eslint-disable-next-line max-len
{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Apply'),disabled:true,cssClass:'e-pv-gotopage-apply-btn',isPrimary:true},click:this.GoToPageApplyClick.bind(this)}],close:this.closeGoToPagePopUp.bind(this)});if(this.pdfViewer.enableRtl){this.goToPagePopup.enableRtl=true;}this.goToPagePopup.appendTo(popupElement);this.goToPageInput.addEventListener('keyup',function(){// eslint-disable-next-line
var inputValue=_this_1.goToPageInput.value;if(inputValue!==''&&parseFloat(inputValue)>0&&_this_1.pdfViewer.pageCount+1>parseFloat(inputValue)){_this_1.EnableApplyButton();}else{_this_1.DisableApplyButton();}});};PdfViewerBase.prototype.closeGoToPagePopUp=function(){this.goToPageInput.value='';this.DisableApplyButton();};PdfViewerBase.prototype.EnableApplyButton=function(){// eslint-disable-next-line
var popupElements=document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];popupElements.removeAttribute('disabled');};PdfViewerBase.prototype.DisableApplyButton=function(){// eslint-disable-next-line
var popupElements=document.getElementsByClassName('e-pv-gotopage-apply-btn')[0];popupElements.setAttribute('disabled',true);};PdfViewerBase.prototype.GoToPageCancelClick=function(){this.goToPagePopup.hide();};PdfViewerBase.prototype.GoToPageApplyClick=function(){this.goToPagePopup.hide();// eslint-disable-next-line
var pageNumber=this.goToPageInput.value;this.pdfViewer.navigation.goToPage(pageNumber);this.updateMobileScrollerPosition();};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateMobileScrollerPosition=function(){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobileScrollerContainer){// eslint-disable-next-line
var ratio=(this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-56);// eslint-disable-next-line
var differenceRatio=this.viewerContainer.scrollTop/ratio;// eslint-disable-next-line
var toolbarHeight=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=toolbarHeight+differenceRatio+'px';}};PdfViewerBase.prototype.createPasswordPopup=function(){var _this_1=this;// eslint-disable-next-line max-len
var popupElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_password_popup',className:'e-pv-password-popup',attrs:{'tabindex':'-1'}});this.promptElement=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_prompt',attrs:{'tabindex':'-1'}});this.promptElement.textContent=this.pdfViewer.localeObj.getConstant('Enter Password');popupElement.appendChild(this.promptElement);var inputContainer=sf.base.createElement('span',{className:'e-input-group e-pv-password-input'});// eslint-disable-next-line max-len
this.passwordInput=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_password_input',className:'e-input'});this.passwordInput.type='password';this.passwordInput.name='Required';inputContainer.appendChild(this.passwordInput);popupElement.appendChild(inputContainer);this.pageContainer.appendChild(popupElement);this.passwordPopup=new sf.popups.Dialog({showCloseIcon:true,closeOnEscape:false,isModal:true,header:this.pdfViewer.localeObj.getConstant('Password Protected'),visible:false,close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function beforeClose(){_this_1.passwordPopup.destroy();_this_1.getElement('_password_popup').remove();_this_1.passwordPopup=null;var waitingPopup=_this_1.getElement('_loadingIndicator');if(waitingPopup!=null){hideSpinner(waitingPopup);}}});if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.passwordCancelClick.bind(this)}];}else{this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant('Cancel')},click:this.passwordCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant('OK'),isPrimary:true},click:this.applyPassword.bind(this)}];}if(this.pdfViewer.enableRtl){this.passwordPopup.enableRtl=true;}this.passwordPopup.appendTo(popupElement);this.passwordInput.addEventListener('keyup',function(){if(_this_1.passwordInput.value===''){_this_1.passwordDialogReset();}});this.passwordInput.addEventListener('focus',function(){_this_1.passwordInput.parentElement.classList.add('e-input-focus');});this.passwordInput.addEventListener('blur',function(){_this_1.passwordInput.parentElement.classList.remove('e-input-focus');});};// eslint-disable-next-line
PdfViewerBase.prototype.passwordCancel=function(args){if(args.isInteraction){this.clear(false);this.passwordDialogReset();this.passwordInput.value='';}var waitingPopup=this.getElement('_loadingIndicator');if(waitingPopup!==null){hideSpinner(waitingPopup);}};PdfViewerBase.prototype.passwordCancelClick=function(){this.clear(false);this.passwordDialogReset();this.passwordPopup.hide();var waitingPopup=this.getElement('_loadingIndicator');if(waitingPopup!==null){hideSpinner(waitingPopup);}};PdfViewerBase.prototype.passwordDialogReset=function(){};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.applyPassword=function(){this.focusViewerContainer();};PdfViewerBase.prototype.createFileInputElement=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
if(this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement();}}if(this.signatureModule){this.signatureModule.createSignatureFileElement();}};PdfViewerBase.prototype.wireEvents=function(){var _this_1=this;this.viewerContainer.addEventListener('scroll',this.viewerContainerOnScroll,true);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.viewerContainer.addEventListener('touchmove',this.viewerContainerOnScroll,{passive:true});}this.viewerContainer.addEventListener('mousedown',this.viewerContainerOnMousedown);this.viewerContainer.addEventListener('mouseup',this.viewerContainerOnMouseup);this.viewerContainer.addEventListener("wheel",this.detectTouchPad,{passive:true});this.viewerContainer.addEventListener('wheel',this.viewerContainerOnMouseWheel);if(this.isMacSafari){window.addEventListener('gesturestart',function(e){return e.preventDefault();});window.addEventListener('gesturechange',function(e){return e.preventDefault();});window.addEventListener('gestureend',function(e){return e.preventDefault();});this.viewerContainer.addEventListener('gesturestart',this.handleMacGestureStart,false);this.viewerContainer.addEventListener('gesturechange',this.handleMacGestureChange,false);this.viewerContainer.addEventListener('gestureend',this.handleMacGestureEnd,false);}this.viewerContainer.addEventListener('mousemove',this.viewerContainerOnMousemove);this.viewerContainer.addEventListener('mouseleave',this.viewerContainerOnMouseLeave);this.viewerContainer.addEventListener('mouseenter',this.viewerContainerOnMouseEnter);this.viewerContainer.addEventListener('mouseover',this.viewerContainerOnMouseOver);this.viewerContainer.addEventListener('click',this.viewerContainerOnClick);this.viewerContainer.addEventListener('dblclick',this.viewerContainerOnClick);this.viewerContainer.addEventListener('dragstart',this.viewerContainerOnDragStart);this.pdfViewer.element.addEventListener('keydown',this.viewerContainerOnKeyDown);window.addEventListener('keydown',this.onWindowKeyDown);window.addEventListener('mouseup',this.onWindowMouseUp);window.addEventListener('touchend',this.onWindowTouchEnd);this.unload=function(){return _this_1.pdfViewerRunner.terminate();};this.unloadDocument(this);window.addEventListener('unload',this.unload);window.addEventListener('beforeunload',this.clearSessionStorage);window.addEventListener('resize',this.onWindowResize);// eslint-disable-next-line max-len
if(navigator.userAgent.indexOf('MSIE')!==-1||navigator.userAgent.indexOf('Edge')!==-1||navigator.userAgent.indexOf('Trident')!==-1){this.viewerContainer.addEventListener('pointerdown',this.viewerContainerOnPointerDown);this.viewerContainer.addEventListener('pointermove',this.viewerContainerOnPointerMove);this.viewerContainer.addEventListener('pointerup',this.viewerContainerOnPointerEnd);this.viewerContainer.addEventListener('pointerleave',this.viewerContainerOnPointerEnd);}else{this.viewerContainer.addEventListener('touchstart',this.viewerContainerOnTouchStart);if(this.isWebkitMobile&&this.isDeviceiOS){// eslint-disable-next-line max-len
this.viewerContainer.addEventListener("touchmove",function(e){if(e.scale!==1){e.preventDefault();}},{passive:false});}this.viewerContainer.addEventListener('touchmove',this.viewerContainerOnTouchMove);this.viewerContainer.addEventListener('touchend',this.viewerContainerOnTouchEnd);this.viewerContainer.addEventListener('touchleave',this.viewerContainerOnTouchEnd);this.viewerContainer.addEventListener('touchcancel',this.viewerContainerOnTouchEnd);}};PdfViewerBase.prototype.unWireEvents=function(){this.viewerContainer.removeEventListener('scroll',this.viewerContainerOnScroll,true);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.viewerContainer.removeEventListener('touchmove',this.viewerContainerOnScroll,true);}this.viewerContainer.removeEventListener('mousedown',this.viewerContainerOnMousedown);this.viewerContainer.removeEventListener('mouseup',this.viewerContainerOnMouseup);this.viewerContainer.removeEventListener("wheel",this.detectTouchPad,false);this.viewerContainer.removeEventListener('wheel',this.viewerContainerOnMouseWheel);if(this.isMacSafari){window.removeEventListener('gesturestart',function(e){return e.preventDefault();});window.removeEventListener('gesturechange',function(e){return e.preventDefault();});window.removeEventListener('gestureend',function(e){return e.preventDefault();});this.viewerContainer.removeEventListener('gesturestart',this.handleMacGestureStart,false);this.viewerContainer.removeEventListener('gesturechange',this.handleMacGestureChange,false);this.viewerContainer.removeEventListener('gestureend',this.handleMacGestureEnd,false);}this.viewerContainer.removeEventListener('mousemove',this.viewerContainerOnMousemove);this.viewerContainer.removeEventListener('mouseleave',this.viewerContainerOnMouseLeave);this.viewerContainer.removeEventListener('mouseenter',this.viewerContainerOnMouseEnter);this.viewerContainer.removeEventListener('mouseover',this.viewerContainerOnMouseOver);this.viewerContainer.removeEventListener('click',this.viewerContainerOnClick);this.viewerContainer.removeEventListener('dragstart',this.viewerContainerOnDragStart);this.viewerContainer.removeEventListener('contextmenu',this.viewerContainerOnContextMenuClick);this.pdfViewer.element.removeEventListener('keydown',this.viewerContainerOnKeyDown);window.addEventListener('keydown',this.onWindowKeyDown);window.removeEventListener('mouseup',this.onWindowMouseUp);window.removeEventListener('unload',this.unload);window.removeEventListener('resize',this.onWindowResize);// eslint-disable-next-line max-len
if(navigator.userAgent.indexOf('MSIE')!==-1||navigator.userAgent.indexOf('Edge')!==-1||navigator.userAgent.indexOf('Trident')!==-1){this.viewerContainer.removeEventListener('pointerdown',this.viewerContainerOnPointerDown);this.viewerContainer.removeEventListener('pointermove',this.viewerContainerOnPointerMove);this.viewerContainer.removeEventListener('pointerup',this.viewerContainerOnPointerEnd);this.viewerContainer.removeEventListener('pointerleave',this.viewerContainerOnPointerEnd);}else{this.viewerContainer.removeEventListener('touchstart',this.viewerContainerOnTouchStart);if(this.isWebkitMobile&&this.isDeviceiOS){// eslint-disable-next-line max-len
this.viewerContainer.removeEventListener("touchmove",function(e){if(e.scale!==1){e.preventDefault();}},false);}this.viewerContainer.removeEventListener('touchmove',this.viewerContainerOnTouchMove);this.viewerContainer.removeEventListener('touchend',this.viewerContainerOnTouchEnd);this.viewerContainer.removeEventListener('touchleave',this.viewerContainerOnTouchEnd);this.viewerContainer.removeEventListener('touchcancel',this.viewerContainerOnTouchEnd);}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.updateZoomValue=function(){if(this.pdfViewer.magnificationModule){if(this.pdfViewer.magnificationModule.isAutoZoom){this.pdfViewer.magnificationModule.fitToAuto();}else if(this.pdfViewer.zoomMode!=='FitToWidth'&&this.pdfViewer.magnificationModule.fitType==='fitToWidth'){this.pdfViewer.magnificationModule.fitToWidth();}else if(this.pdfViewer.magnificationModule.fitType==='fitToPage'){this.pdfViewer.magnificationModule.fitToPage();}else if(this.pdfViewer.magnificationModule.fitType==='fitToHeight'){this.pdfViewer.magnificationModule.fitToHeight();}}for(var i=0;i<this.pageCount;i++){this.applyLeftPosition(i);}};/**
     * @private
     * @param {any} annotation - The annotation type of any.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.updateFreeTextProperties=function(annotation){if(this.pdfViewer.enableShapeLabel){if(this.pdfViewer.shapeLabelSettings.fillColor){annotation.labelFillColor=this.pdfViewer.shapeLabelSettings.fillColor;}if(this.pdfViewer.shapeLabelSettings.fontColor){annotation.fontColor=this.pdfViewer.shapeLabelSettings.fontColor;}if(this.pdfViewer.shapeLabelSettings.fontSize){annotation.fontSize=this.pdfViewer.shapeLabelSettings.fontSize;}if(this.pdfViewer.shapeLabelSettings.fontFamily){annotation.fontFamily=this.pdfViewer.shapeLabelSettings.fontFamily;}if(this.pdfViewer.shapeLabelSettings.opacity){annotation.labelOpacity=this.pdfViewer.shapeLabelSettings.opacity;}if(this.pdfViewer.shapeLabelSettings.labelContent){annotation.labelContent=this.pdfViewer.shapeLabelSettings.labelContent;}}};/**
     * @private
     * @param {MouseEvent} event - The mouse event.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.mouseDownHandler=function(event){var isEnableDelete=false;var isCancel;var hidenItems=[];var disabledItems=[];if(event&&event.target){this.mouseDownEvent=event;this.contextMenuModule.currentTarget=event.target;}if(this.pdfViewer.annotationModule){isEnableDelete=this.pdfViewer.annotationModule.isEnableDelete();}if(!isEnableDelete){disabledItems.push('Delete');}if(this.pdfViewer.contextMenuOption==='None'){isCancel=true;}else if(this.pdfViewer.textSelectionModule||this.isShapeBasedAnnotationsEnabled()){if(event){var isClickWithinSelectionBounds=this.isClickWithinSelectionBounds(event);// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus){this.isFreeTextContextMenu=true;// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected){disabledItems.push('Cut');disabledItems.push('Copy');}// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.selectedText===''){disabledItems.push('Paste');}hidenItems.push('Highlight');hidenItems.push('Underline');hidenItems.push('Strikethrough');hidenItems.push('ScaleRatio');hidenItems.push('Properties');hidenItems.push('Comment');hidenItems.push('Delete');}else if(isClickWithinSelectionBounds&&this.pdfViewer.textSelectionModule){// eslint-disable-next-line max-len
if(!event.target.classList.contains('e-pv-maintaincontent')&&event.target.classList.contains('e-pv-text')||event.target.classList.contains('e-pv-text-layer')){if(this.checkIsNormalText()){isCancel=true;}// eslint-disable-next-line max-len
}else if((sf.base.Browser.isIE||sf.base.Browser.info.name==='edge')&&event.target.classList.contains('e-pv-page-container')){isCancel=true;}hidenItems.push('Cut');hidenItems.push('Paste');hidenItems.push('Delete');hidenItems.push('ScaleRatio');hidenItems.push('Comment');hidenItems.push('Properties');// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.annotations.length!==0&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage')){this.shapeMenuItems(hidenItems,disabledItems,false,true);// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.annotations.length!==0&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType!=='Path'){this.shapeMenuItems(hidenItems,disabledItems,true);}else{// eslint-disable-next-line max-len
if(this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(event.target.classList.contains('e-pv-text-layer')||event.target.classList.contains('e-pv-text')||event.target.classList.contains('e-pv-hyperlink'))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){hidenItems.push('Properties');this.shapeMenuItems(hidenItems,disabledItems,false);// eslint-disable-next-line max-len
}else if(this.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode){hidenItems.push('Highlight');hidenItems.push('Underline');hidenItems.push('Strikethrough');hidenItems.push('Properties');disabledItems.push('Cut');disabledItems.push('Copy');disabledItems.push('Paste');disabledItems.push('Delete');disabledItems.push('Comment');// eslint-disable-next-line max-len
}else if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){hidenItems.push('Highlight');hidenItems.push('Underline');hidenItems.push('Strikethrough');hidenItems.push('Properties');hidenItems.push('Cut');hidenItems.push('Copy');hidenItems.push('Paste');hidenItems.push('ScaleRatio');}else{isCancel=true;}}}else if(this.pdfViewer.textSelectionModule&&this.pdfViewer.contextMenuOption==='MouseUp'){hidenItems.push('Cut');hidenItems.push('Paste');hidenItems.push('Delete');hidenItems.push('ScaleRatio');hidenItems.push('Comment');hidenItems.push('Properties');}else if(this.pdfViewer.selectedItems.annotations.length===0){hidenItems.push('Cut');hidenItems.push('Paste');hidenItems.push('Delete');hidenItems.push('ScaleRatio');hidenItems.push('Properties');}if(!this.pdfViewer.enableCommentPanel){disabledItems.push('Comment');}}else{isCancel=true;}var eventArgs={hidenItems:hidenItems,disabledItems:disabledItems,isCancel:isCancel};this.pdfViewer._dotnetInstance.invokeMethodAsync('MouseDownHandler',eventArgs);};/**
     * @private
     * @param {string} selectedMenu - The selected menu.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.OnItemSelected=function(selectedMenu){// eslint-disable-next-line
var target=this.contextMenuModule.currentTarget;switch(selectedMenu){case this.pdfViewer.localeObj.getConstant('Copy'):this.CopyItemSelected();break;case this.pdfViewer.localeObj.getConstant('Highlight context'):this.TextMarkUpSelected('Highlight');break;case this.pdfViewer.localeObj.getConstant('Underline context'):this.TextMarkUpSelected('Underline');break;case this.pdfViewer.localeObj.getConstant('Strikethrough context'):this.TextMarkUpSelected('Strikethrough');break;case this.pdfViewer.localeObj.getConstant('Properties'):this.PropertiesItemSelected();break;case this.pdfViewer.localeObj.getConstant('Cut'):this.CutItemSelected(target);break;case this.pdfViewer.localeObj.getConstant('Paste'):this.pasteItemSelected(target);break;case this.pdfViewer.localeObj.getConstant('Delete Context'):this.DeleteItemSelected();break;case this.pdfViewer.localeObj.getConstant('Scale Ratio'):this.ScaleRatioSelected();break;case this.pdfViewer.localeObj.getConstant('Comment'):this.CommentItemSelected();break;default:break;}};PdfViewerBase.prototype.CommentItemSelected=function(){if(this.pdfViewer.annotation){this.pdfViewer.annotation.showCommentsPanelInBlazor();if(this.pdfViewer.selectedItems.annotations.length!==0||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){// eslint-disable-next-line
var currentAnnotation=void 0;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}// eslint-disable-next-line
var commentsDiv=document.getElementById(currentAnnotation.annotName);if(commentsDiv){if(!commentsDiv.classList.contains('e-pv-comments-border')){commentsDiv.firstElementChild.click();}}}}};PdfViewerBase.prototype.ScaleRatioSelected=function(){if(this.isCalibrateAnnotationModule()){this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow();}};PdfViewerBase.prototype.DeleteItemSelected=function(){if(this.pdfViewer.annotation){this.pdfViewer.annotation.deleteAnnotation();}};// eslint-disable-next-line
PdfViewerBase.prototype.pasteItemSelected=function(target){// eslint-disable-next-line max-len
if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&target&&target.className==='free-text-input'&&target.tagName==='TEXTAREA'){this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(target);this.contextMenuModule.close();}else{this.pdfViewer.paste();if(this.contextMenuModule.previousAction=='Cut'){this.pdfViewer.clipboardData.clipObject=[];}this.contextMenuModule.previousAction='Paste';}};// eslint-disable-next-line
PdfViewerBase.prototype.CutItemSelected=function(target){// eslint-disable-next-line max-len
if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&target&&target.className==='free-text-input'&&target.tagName==='TEXTAREA'){this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(target);this.contextMenuModule.close();}else if(this.pdfViewer.selectedItems.annotations.length===1){var pageIndex=this.pdfViewer.selectedItems.annotations[0].pageIndex;this.pdfViewer.cut();this.contextMenuModule.previousAction='Cut';}else if(this.pdfViewer.selectedItems.formFields.length===1){this.pdfViewer.cut();this.contextMenuModule.previousAction='Cut';}};PdfViewerBase.prototype.CopyItemSelected=function(){var isSkip=false;// eslint-disable-next-line max-len
if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus){this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText();this.contextMenuModule.close();isSkip=true;}else if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.copyText();this.contextMenuModule.close();}if(this.pdfViewer.selectedItems.annotations.length&&!isSkip){this.pdfViewer.copy();this.contextMenuModule.previousAction='Copy';}else if(this.pdfViewer.selectedItems.formFields.length>0){this.pdfViewer.copy();this.contextMenuModule.previousAction='Copy';}};PdfViewerBase.prototype.PropertiesItemSelected=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations.length!==0&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='LineWidthArrowHead'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance')){this.pdfViewer.annotation.createPropertiesWindow();// eslint-disable-next-line max-len
}};PdfViewerBase.prototype.TextMarkUpSelected=function(type){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule){this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=false;this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(type);this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode='';this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=true;}};PdfViewerBase.prototype.shapeMenuItems=function(hidenItems,disabledItems,enableProperties,isSignature){if(this.pdfViewer.annotation&&!this.pdfViewer.annotation.isShapeCopied){disabledItems.push('Paste');}hidenItems.push('Highlight');hidenItems.push('Underline');hidenItems.push('Strikethrough');hidenItems.push('ScaleRatio');if(enableProperties){// eslint-disable-next-line max-len
if(!(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='LineWidthArrowHead'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance')){hidenItems.push('Properties');}}else if(isSignature){hidenItems.push('Properties');hidenItems.push('Comment');}else{hidenItems.push('Cut');hidenItems.push('Copy');hidenItems.push('Delete');hidenItems.push('Comment');}};PdfViewerBase.prototype.checkIsRtlText=function(text){// eslint-disable-next-line max-len
var ltrChars="A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF"+"\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF";var rtlChars="\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC";// eslint-disable-next-line
var rtlDirCheck=new RegExp('^[^'+ltrChars+']*['+rtlChars+']');return rtlDirCheck.test(text);};/**
     * @private
     * @param {any} event - Specifies the event.
     * @returns {boolean} - retruned the beolean value.
     */ // eslint-disable-next-line
PdfViewerBase.prototype.isClickWithinSelectionBounds=function(event){var isWithin=false;if(this.pdfViewer.textSelectionModule){var bounds=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.currentPageNumber-1);if(bounds){var currentBound=bounds;if(this.getHorizontalValue(currentBound.left)<event.clientX&&this.getHorizontalValue(currentBound.right)>event.clientX&&this.getVerticalValue(currentBound.top)<event.clientY&&this.getVerticalValue(currentBound.bottom)>event.clientY){isWithin=true;}}if((sf.base.Browser.isIE||sf.base.Browser.info.name==='edge')&&bounds){isWithin=true;}}return isWithin;};PdfViewerBase.prototype.getHorizontalClientValue=function(value){var pageDiv=this.getElement('_pageDiv_'+(this.currentPageNumber-1));var pageBounds=pageDiv.getBoundingClientRect();return value-pageBounds.left;};PdfViewerBase.prototype.getVerticalClientValue=function(value){var pageDiv=this.getElement('_pageDiv_'+(this.currentPageNumber-1));var pageBounds=pageDiv.getBoundingClientRect();return value-pageBounds.top;};PdfViewerBase.prototype.getHorizontalValue=function(value){var pageDiv=this.getElement('_pageDiv_'+(this.currentPageNumber-1));var pageBounds=pageDiv.getBoundingClientRect();return value*this.getZoomFactor()+pageBounds.left;};PdfViewerBase.prototype.getVerticalValue=function(value){var pageDiv=this.getElement('_pageDiv_'+(this.currentPageNumber-1));var pageBounds=pageDiv.getBoundingClientRect();return value*this.getZoomFactor()+pageBounds.top;};/**
     * @private
     * @returns {boolean} - retruned the beolean value.
     */PdfViewerBase.prototype.checkIsNormalText=function(){var isText=true;var currentText='';// eslint-disable-next-line
var textSelectionModule=this.pdfViewer.textSelectionModule;if(textSelectionModule&&textSelectionModule.selectionRangeArray&&textSelectionModule.selectionRangeArray.length===1){currentText=textSelectionModule.selectionRangeArray[0].textContent;}else if(window.getSelection()&&window.getSelection().anchorNode){currentText=window.getSelection().toString();}if(currentText!==''&&this.checkIsRtlText(currentText)){isText=false;}return isText;};/**
     * @param {KeyboardTabNavigation} event - The KeyboardEvent.
     * @returns {void}
     */PdfViewerBase.prototype.tabOrderNavigation=function(event,data,obj){switch(data){case"navigatePrimaryToolbarTabOrder":this.navigatePrimaryToolbarTabOrder(event);break;case"navigateAnnotationToolbarTabOrder":this.navigateAnnotationToolbarTabOrder(event,obj);break;case"navigateBookmarkThumbnailTabOrder":this.navigateBookmarkThumbnailTabOrder(event,obj);break;case"navigateCommentPanelTabOrder":this.navigateCommentPanelTabOrder(event,obj);break;case"navigateViewerContainerTabOrder":this.navigateViewerContainerTabOrder(event);break;case"navigateFormFieldTabOrder":this.navigateFormFieldTabOrder(event);break;case"navigateContextMenuTabOrder":this.navigateContextMenuTabOrder(event,obj);break;default:throw new Error("Unknown case : "+data);}};PdfViewerBase.prototype.getElementById=function(id){return document.getElementById(id);};/**
   * @param {KeyboardTabNavigation} event - KeyboardTabNavigation implementation
   * @returns {void}
   */PdfViewerBase.prototype.navigatePrimaryToolbarTabOrder=function(event){//Have handled the selection of thumbnailIcon in themes
};PdfViewerBase.prototype.navigateAnnotationToolbarTabOrder=function(event,obj){var targetElement=event.target;var parentElement=targetElement.parentElement;var pdfViewerId=this.pdfViewer.dataId;var editAnnotationIconId=pdfViewerId+"_annotation";var highlightAnnotationIconId=pdfViewerId+"_highLight";var moreOptions=this.getElementById("toolbarContainer_nav");var previouslyActiveElement=obj.previouslyActiveElement;if(event.shiftKey){if(targetElement.tagName==='BUTTON'){if(parentElement&&parentElement.id===highlightAnnotationIconId&&previouslyActiveElement&&previouslyActiveElement.parentElement&&previouslyActiveElement.parentElement.id===editAnnotationIconId){if(moreOptions){event.preventDefault();moreOptions.focus();}else{event.preventDefault();var editAnnotationIcon=this.getElementById(editAnnotationIconId);if(editAnnotationIcon&&editAnnotationIcon.children[0]){editAnnotationIcon.children[0].focus();}}}}}};PdfViewerBase.prototype.navigateBookmarkThumbnailTabOrder=function(event,obj){var isShiftKey=event.shiftKey;var target=event.target;var targetId=target.id;var targetTagName=target.tagName;var pdfViewerId=this.pdfViewer.dataId;var isButton=targetTagName==='BUTTON';var isBookmarkButton=targetId===pdfViewerId+"_bookmark";var isCloseButton=targetId===pdfViewerId+"_close_btn";var previouslyActiveThumbnailElement=obj.previouslyActiveThumbnailElement;var shiftPreviouslyActiveThumbnailElement=obj.shiftPreviouslyActiveThumbnailElement;var sideBarContentContainer=this.getElementById(pdfViewerId+"_sideBarContentContainer");var isSidebarContainerExpanded=getComputedStyle(sideBarContentContainer).display==="block";var getThumbnailView=this.getElementById(pdfViewerId+"_thumbnail_view");var isThumbnailContentVisible=getComputedStyle(getThumbnailView).display==="flex";var isThumbnailImage=target.classList.contains("e-pv-thumbnail-image");var isListItem=target.classList.contains("e-list-item");var currentPageNumber=this.pdfViewer.currentPageNumber;var thumbnailImagePrefix=pdfViewerId+"_thumbnail_image_";var thumbnailIconId=pdfViewerId+"_thumbnail-view";var bookmarkId=pdfViewerId+"_bookmark";var closeBtnId=pdfViewerId+"_close_btn";if(isShiftKey){if(isButton){if(isBookmarkButton){var bookmarkElement=this.getElementById(bookmarkId);if(bookmarkElement){if(isThumbnailContentVisible&&isSidebarContainerExpanded){event.preventDefault();var thumbnailCloseIcon=this.getElementById(closeBtnId);thumbnailCloseIcon.focus();}}}if(isCloseButton){var newelement=this.getElementById(thumbnailImagePrefix+(currentPageNumber-1).toString());if(isThumbnailContentVisible&&previouslyActiveThumbnailElement&&previouslyActiveThumbnailElement.classList.contains("e-pv-thumbnail-image")&&isSidebarContainerExpanded){event.preventDefault();this.addThumbnailPageSelectionTheme(previouslyActiveThumbnailElement.parentElement);previouslyActiveThumbnailElement.focus();}else if(isSidebarContainerExpanded&&isThumbnailContentVisible){event.preventDefault();if(newelement){this.addThumbnailPageSelectionTheme(newelement.parentElement);}newelement.focus();}}}if(isThumbnailImage){this.removeThumbnailPageSelectionTheme(target.parentElement);event.preventDefault();var thumbnailIcon=this.getElementById(thumbnailIconId);thumbnailIcon.focus();}if(isListItem){event.preventDefault();var bookmarkIcon=this.getElementById(bookmarkId);bookmarkIcon.focus();}}if(!isShiftKey&&event.key==="Tab"){if(isButton){if(targetId===thumbnailIconId){var thumbnailIcon=this.getElementById(thumbnailIconId);var newelement=this.getElementById(thumbnailImagePrefix+(currentPageNumber-1).toString());if(isThumbnailContentVisible&&shiftPreviouslyActiveThumbnailElement&&shiftPreviouslyActiveThumbnailElement&&shiftPreviouslyActiveThumbnailElement.classList.contains("e-pv-thumbnail-image")&&isSidebarContainerExpanded){if(thumbnailIcon){event.preventDefault();}this.addThumbnailPageSelectionTheme(this.shiftPreviouslyActiveThumbnailElement.parentElement);shiftPreviouslyActiveThumbnailElement.focus();}else if(isThumbnailContentVisible&&isSidebarContainerExpanded){if(newelement&&newelement.parentElement){event.preventDefault();this.addThumbnailPageSelectionTheme(newelement.parentElement);newelement.focus();}}}if(targetId===bookmarkId){if(!isSidebarContainerExpanded){var element=this.getElementById(this.pdfViewer.dataId+"_pageDiv_"+(currentPageNumber-1));if(element){event.preventDefault();element.focus();}}else if(isSidebarContainerExpanded&&isThumbnailContentVisible){var page=this.getElementById(this.pdfViewer.dataId+"_pageDiv_"+(currentPageNumber-1));if(page){event.preventDefault();page.focus();}}}if(targetId===closeBtnId){var isBookmarkIconEnabled=this.getElementById(bookmarkId);var bookmarkElement=this.getElementById(bookmarkId);if(bookmarkElement&&isThumbnailContentVisible&&!isBookmarkIconEnabled.disabled){event.preventDefault();bookmarkElement.focus();}}}if(targetTagName==='IMG'){if(isThumbnailImage){event.preventDefault();this.removeThumbnailPageSelectionTheme(target.parentElement);var thumbnailCloseIcon=this.getElementById(closeBtnId);thumbnailCloseIcon.focus();}}}if(event.key==="Enter"){if(targetTagName==="IMG"){if(isThumbnailImage){var match=target.id.match(/\d+$/);if(match){var pageNumber=parseInt(match[0],10);this.updateScrollTop(pageNumber);}}}if(targetTagName==="BUTTON"){if(targetId===closeBtnId){if(!isThumbnailContentVisible&&isSidebarContainerExpanded){var bookmarkIcon=this.getElementById(bookmarkId);if(bookmarkIcon.disabled==false){bookmarkIcon.focus();}}else if(isThumbnailContentVisible){var thumbnailIcon=this.getElementById(thumbnailIconId);thumbnailIcon.focus();}}}}if(event.key==="ArrowUp"||event.key==="ArrowDown"){var nextThumbnailId=void 0;var nextThumbnailParentId=void 0;var nextThumbnaiImage=void 0;var pageNumberUpDown=0;var nextElementCheck=void 0;if(targetTagName==="IMG"&&isThumbnailImage){var match=target.id.match(/\d+$/);if(match){var pageNumber=parseInt(match[0],10);var offset=event.key==="ArrowUp"?-1:1;var newPageNumber=pageNumber+offset;pageNumberUpDown=newPageNumber;nextElementCheck=this.getElementById(pdfViewerId+"_thumbnail_image_"+pageNumberUpDown);if(event.key==="ArrowUp"&&pageNumber>0){if(nextElementCheck){this.pdfViewer.thumbnailViewModule["previousElement"]=nextElementCheck.parentElement;}}else if(event.key==="ArrowDown"&&pageNumber>=0){if(nextElementCheck){this.pdfViewer.thumbnailViewModule["previousElement"]=nextElementCheck.parentElement;}}if(target&&target.parentElement&&target.parentElement.id){nextThumbnailParentId=target.parentElement.id;nextThumbnailId=nextThumbnailParentId.replace(/(\d+)$/,newPageNumber.toString());}if(nextThumbnailId){nextThumbnaiImage=this.getElementById(nextThumbnailId);}if(nextThumbnaiImage){event.preventDefault();this.removeThumbnailPageSelectionTheme(target.parentElement);this.addThumbnailPageSelectionTheme(nextThumbnaiImage);if(nextThumbnaiImage.children[0]){nextThumbnaiImage.children[0].focus();}}}}}};PdfViewerBase.prototype.navigateCommentPanelTabOrder=function(event,obj){var isShiftKey=event.shiftKey;var target=event.target;var targetTagName=target.tagName;var pdfViewerId=this.pdfViewer.dataId;var annotationMoreIconId=pdfViewerId+"_annotation_more_icon";var annotationCommentPanelIconId=pdfViewerId+"_annotation_commentPanel";var previouslyActiveElement=obj.previouslyActiveElement;if(isShiftKey&&targetTagName==='BUTTON'){var targetId=target.id;var isMoreIcon=targetId===annotationMoreIconId;if(isMoreIcon&&previouslyActiveElement&&previouslyActiveElement.parentElement){var parentElement=previouslyActiveElement.parentElement;var isCommentPanel=void 0;if(parentElement&&parentElement.id){isCommentPanel=parentElement.id===annotationCommentPanelIconId;}if(isCommentPanel){var commentPanelIcon=this.getElementById(annotationCommentPanelIconId);if(commentPanelIcon){event.preventDefault();var commentPanelIconElement=commentPanelIcon.children[0];if(commentPanelIconElement){commentPanelIconElement.focus();}}}}}if(event.key==='Enter'&&targetTagName==='DIV'){var classList$$1=target.classList;if(classList$$1.contains('e-pv-comment-title')||classList$$1.contains('e-pv-reply-title')){var parentElement=target.parentElement;var childIndex=classList$$1.contains('e-pv-comment-title')?2:1;if(parentElement&&parentElement.children&&parentElement.children[childIndex]){parentElement.children[childIndex].style.visibility='visible';}}}};PdfViewerBase.prototype.navigateViewerContainerTabOrder=function(event){var target=event.target;var targetTagName=target.tagName;var isShiftKey=event.shiftKey;var pdfViewerId=this.pdfViewer.dataId;var pageDiv=pdfViewerId+"_pageDiv_0";var containerDiv=pdfViewerId+"_viewerContainer";if(isShiftKey&&targetTagName==='DIV'){if(target.id===pageDiv||target.id===containerDiv){var pdfViewerId_1=this.pdfViewer.dataId;var sidebarContentContainer=this.getElementById(pdfViewerId_1+'_sideBarContentContainer');var isSidebarContainerExpanded=sidebarContentContainer&&getComputedStyle(sidebarContentContainer).display==='block';var bookmarkIcon=this.getElementById(pdfViewerId_1+'_bookmark');var thumbnailIcon=this.getElementById(pdfViewerId_1+'_thumbnail-view');var thumbnailView=this.getElementById(pdfViewerId_1+'_thumbnail_view');var isThumbnailContentVisible=thumbnailView&&getComputedStyle(thumbnailView).display==='flex';if(!isSidebarContainerExpanded&&bookmarkIcon&&!bookmarkIcon.disabled){event.preventDefault();bookmarkIcon.focus();}else if(!isSidebarContainerExpanded&&bookmarkIcon&&bookmarkIcon.disabled){event.preventDefault();thumbnailIcon.focus();}else if(isSidebarContainerExpanded&&isThumbnailContentVisible&&bookmarkIcon&&!bookmarkIcon.disabled){event.preventDefault();bookmarkIcon.focus();}else if(isSidebarContainerExpanded&&!isThumbnailContentVisible){event.preventDefault();var closeButton=this.getElementById(pdfViewerId_1+'_close_btn');if(closeButton){closeButton.focus();}}}}if(!isShiftKey&&event.key==='Tab'&&targetTagName==='DIV'){var pdfViewerId_2=this.pdfViewer.dataId;var thumbnailIcon=this.getElementById(pdfViewerId_2+'_thumbnail-view');var annotationMoreIcon=this.getElementById(pdfViewerId_2+'_annotation_more_icon');var annotationToolbar=this.getElementById('AnnotationToolbar');var annotationToolbarPane=void 0;if(annotationToolbar&&annotationToolbar.parentElement&&annotationToolbar.parentElement.parentElement){annotationToolbarPane=getComputedStyle(annotationToolbar.parentElement.parentElement);}var viewerContainerId=pdfViewerId_2+'_viewerContainer';var commentContainerId=pdfViewerId_2+'_commantPanel';if(target.id===viewerContainerId){var commentContainer=this.getElementById(commentContainerId);var isCommentContainerVisible=commentContainer&&getComputedStyle(commentContainer).display==='block';if(isCommentContainerVisible&&annotationMoreIcon){event.preventDefault();annotationMoreIcon.focus();}else{var focusableElements=document.querySelectorAll('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])');if(focusableElements.length>0){focusableElements[0].focus();}}}}};PdfViewerBase.prototype.navigateFormFieldTabOrder=function(event){var target=event.target;var isShiftKey=event.shiftKey;var pdfViewerId=this.pdfViewer.dataId;if(isShiftKey&&(target.classList.contains("e-pdfviewer-formFields")||target.classList.contains("e-pdfviewer-signatureformfields"))){var fieldIndex=this.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===target.id;});if(fieldIndex===0){if(this.pdfViewer.currentPageNumber-1>0){event.preventDefault();this.updateScrollTop(this.pdfViewer.currentPageNumber);var pageToFocus=this.getElementById(pdfViewerId+"_pageDiv_"+this.pdfViewer.currentPageNumber);pageToFocus.focus();}else{var bookmarkElement=this.getElementById(pdfViewerId+"_bookmark");var thumbnailElement=this.getElementById(pdfViewerId+"_thumbnail-view");var sideBarContentContainer=this.getElementById(pdfViewerId+"_sideBarContentContainer");var sidebarContentContainerState=sideBarContentContainer&&window.getComputedStyle(sideBarContentContainer);if(sidebarContentContainerState.display==="block"){event.preventDefault();var closeButton=this.getElementById(pdfViewerId+"_close_btn");closeButton.focus();}else if(bookmarkElement.disabled!==true){event.preventDefault();bookmarkElement.focus();}else if(thumbnailElement.disabled!==true){event.preventDefault();thumbnailElement.focus();}}}}if(!isShiftKey&&event.key==="Tab"&&(target.classList.contains("e-pdfviewer-formFields")||target.classList.contains("e-pdfviewer-signatureformfields"))){var fieldIndex=this.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===target.id;});if(this.pdfViewer.formFieldCollections.length-1===fieldIndex){if(this.pdfViewer.currentPageNumber<=this.pdfViewer.pageCount){event.preventDefault();this.updateScrollTop(this.pdfViewer.currentPageNumber);var pageToFocus=this.getElementById(pdfViewerId+"_pageDiv_"+this.pdfViewer.currentPageNumber);pageToFocus.focus();}}}};PdfViewerBase.prototype.navigateContextMenuTabOrder=function(event,obj){var target=event.target;var pdfViewerId=this.pdfViewer.dataId;var previouslyActiveElement=obj.previouslyActiveElement;if(event.key==="Enter"&&target.tagName==="LI"){var targetId=target.id;if(targetId==="EXPORT_ANNOTATION_JSON"||targetId==="EXPORT_ANNOTATION_XFDF"||targetId==="IMPORT_ANNOTATION_JSON"||targetId==="IMPORT_ANNOTATION_XFDF"){var moreOption=this.getElementById(pdfViewerId+"_annotation_more_icon");moreOption.focus();event.preventDefault();}else if(target.parentElement&&target.parentElement.classList.contains("e-control")&&target.parentElement.classList.contains("e-contextmenu")&&target.parentElement.classList.contains("e-lib")&&target.parentElement.classList.contains("e-menu-parent")){var moreOption=void 0;if(previouslyActiveElement&&previouslyActiveElement.parentElement&&previouslyActiveElement.parentElement.parentElement){moreOption=previouslyActiveElement.parentElement.parentElement;}var inputGroup=void 0;if(moreOption){inputGroup=moreOption.querySelector(".e-input-group.e-control-container.e-control-wrapper");if(inputGroup){inputGroup.classList.add("e-input-focus");(inputGroup&&inputGroup.children[0]).focus();event.preventDefault();}else{previouslyActiveElement.focus();event.preventDefault();}}}else if(target.parentElement&&target.parentElement.classList.contains("e-menu-parent")&&target.parentElement.classList.contains("e-ul")){var moreOption=void 0;var moreOptionElement=void 0;if(previouslyActiveElement&&previouslyActiveElement.parentElement){moreOption=previouslyActiveElement.parentElement;moreOptionElement=moreOption.querySelector(".e-pv-more-options-button");}if(moreOptionElement){moreOptionElement.focus();event.preventDefault();}}}};PdfViewerBase.prototype.removeThumbnailPageSelectionTheme=function(value){if(value){value.classList.remove('e-pv-thumbnail-selection','e-pv-thumbnail-focus');value.classList.add('e-pv-thumbnail-selection-ring');}};PdfViewerBase.prototype.addThumbnailPageSelectionTheme=function(value){if(value){value.classList.remove('e-pv-thumbnail-selection-ring','e-pv-thumbnail-hover','e-pv-thumbnail-focus');value.classList.add('e-pv-thumbnail-selection');}};PdfViewerBase.prototype.DeleteKeyPressed=function(event){if(this.pdfViewer.annotation&&!this.pdfViewer.designerMode){if(this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()){this.pdfViewer.annotationModule.deleteAnnotation();}if(this.pdfViewer.selectedItems.annotations.length>0){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];var isReadOnly=true;var type=annotation.shapeAnnotationType;if(type==='Path'||annotation.formFieldAnnotationType==='SignatureField'||annotation.formFieldAnnotationType==='InitialField'||type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage'){var inputFields=document.getElementById(annotation.id);if(inputFields&&inputFields.disabled){isReadOnly=true;}}if(!isReadOnly){if(annotation.annotationSettings&&annotation.annotationSettings.isLock){if(this.pdfViewer.annotationModule.checkAllowedInteractions('Delete',annotation)){this.pdfViewer.remove(annotation);this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));}}else{this.pdfViewer.remove(annotation);this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(event));}}}}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.initiatePanning=function(){this.isPanMode=true;this.textLayer.modifyTextCursor(false);this.disableTextSelectionMode();};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.initiateTextSelectMode=function(){this.isPanMode=false;if(this.viewerContainer){this.viewerContainer.style.cursor='auto';if(this.pdfViewer.textSelectionModule){this.textLayer.modifyTextCursor(true);this.pdfViewer.textSelectionModule.enableTextSelectionMode();}}};/**
     * @private
     * @returns {void}
    */PdfViewerBase.prototype.initiateTextSelection=function(){if(this.pdfViewer.toolbar&&!this.pdfViewer.toolbar.isSelectionToolDisabled){this.initiateTextSelectMode();this.pdfViewer.toolbar.updateInteractionTools(true);}};PdfViewerBase.prototype.enableAnnotationAddTools=function(isEnable){if(this.pdfViewer.toolbarModule){if(this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(isEnable);}}};PdfViewerBase.prototype.applySelection=function(){if(window.getSelection().anchorNode!==null){this.pdfViewer.textSelectionModule.applySpanForSelection();}this.isViewerContainerDoubleClick=false;};// eslint-disable-next-line
PdfViewerBase.prototype.isDesignerMode=function(target){var isDesignerMode=false;if(this.pdfViewer.selectedItems.annotations.length!==0&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage')){isDesignerMode=true;// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.annotations.length!==0&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType!=='Path'){isDesignerMode=true;// eslint-disable-next-line max-len
}else if(this.pdfViewer.selectedItems.formFields.length!==0&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode){isDesignerMode=true;}else{// eslint-disable-next-line max-len
if(this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(target.classList.contains('e-pv-text-layer')||// eslint-disable-next-line max-len
target.classList.contains('e-pv-text'))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){isDesignerMode=true;// eslint-disable-next-line max-len
}}this.designerModetarget=target;return isDesignerMode;};PdfViewerBase.prototype.handleTaps=function(touchPoints,event){var _this_1=this;//EJ2CORE-813 - Implemented focus removing logic for iOS devices
if(this.isDeviceiOS){var obj=findActiveElement(event,this,this.pdfViewer);// eslint-disable-next-line
var isRemoveFocus_1=this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot&&(obj&&this.pdfViewer.selectedItems.annotations[0]?obj.id!==this.pdfViewer.selectedItems.annotations[0].id:true)&&document.activeElement.classList.contains('free-text-input')&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations);if(!this.singleTapTimer){this.singleTapTimer=setTimeout(function(){if(isRemoveFocus_1){_this_1.pdfViewer.clearSelection(_this_1.pdfViewer.selectedItems.annotations[0].pageIndex);_this_1.focusViewerContainer(true);}_this_1.onSingleTap(touchPoints);// eslint-disable-next-line
},300);this.tapCount++;}else{if(this.pdfViewer.enablePinchZoom){this.tapCount++;clearTimeout(this.singleTapTimer);this.singleTapTimer=null;this.onDoubleTap(touchPoints);}}}else{if(!this.singleTapTimer){this.singleTapTimer=setTimeout(function(){_this_1.onSingleTap(touchPoints);// eslint-disable-next-line
},300);this.tapCount++;}else{if(this.pdfViewer.enablePinchZoom){this.tapCount++;clearTimeout(this.singleTapTimer);this.singleTapTimer=null;this.onDoubleTap(touchPoints);}}}};PdfViewerBase.prototype.handleTextBoxTaps=function(touchPoints){var _this_1=this;setTimeout(function(){_this_1.inputTapCount=0;},300);this.inputTapCount++;if(this.isDeviceiOS){// eslint-disable-next-line
this.onTextBoxDoubleTap(touchPoints);}else{var timer=setTimeout(function(){_this_1.onTextBoxDoubleTap(touchPoints);},200);}if(this.inputTapCount>2){this.inputTapCount=0;}};PdfViewerBase.prototype.onTextBoxDoubleTap=function(touches){var target=touches[0].target;if(this.inputTapCount===2){if(this.pdfViewer.selectedItems.annotations.length!==0){if(this.pdfViewer.annotationModule){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];if(this.isDeviceiOS&&document.activeElement.classList.contains('free-text-input')&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)){this.focusViewerContainer(true);}this.pdfViewer.annotationModule.annotationSelect(currentAnnotation.annotName,currentAnnotation.pageIndex,currentAnnotation,null,true);}if(this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)===true){var elmtPosition={};elmtPosition.x=this.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=this.pdfViewer.selectedItems.annotations[0].bounds.y;// eslint-disable-next-line max-len
this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition,this.pdfViewer.selectedItems.annotations[0],null,true);}else if(this.pdfViewer.selectedItems.annotations[0].enableShapeLabel===true){var elmtPosition={};elmtPosition.x=this.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=this.pdfViewer.selectedItems.annotations[0].bounds.y;this.pdfViewer.annotation.inputElementModule.editLabel(elmtPosition,this.pdfViewer.selectedItems.annotations[0]);}}}};PdfViewerBase.prototype.onSingleTap=function(touches){var target=touches[0].target;var isFormfields=false;this.singleTapTimer=null;if(target&&(target.classList.contains('e-pdfviewer-formFields')||target.classList.contains('e-pdfviewer-ListBox')||target.classList.contains('e-pdfviewer-signatureformfields'))){isFormfields=true;}if(!this.isLongTouchPropagated&&!this.navigationPane.isNavigationToolbarVisible&&!isFormfields){if(this.pdfViewer.toolbarModule){if(this.touchClientX>=touches[0].clientX-10&&this.touchClientX<=touches[0].clientX+10&&this.touchClientY>=touches[0].clientY-10&&this.touchClientY<=touches[0].clientY+10){if(!this.isTapHidden){if(this.pdfViewer.toolbar.moreDropDown){var dropDown=this.getElement('_more_option-popup');if(dropDown.firstElementChild){dropDown.classList.remove('e-popup-open');dropDown.classList.add('e-popup-close');dropDown.removeChild(dropDown.firstElementChild);}}}if(this.isTapHidden&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display='';this.updateMobileScrollerPosition();// eslint-disable-next-line max-len
}else if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.getSelectTextMarkupCurrentPage()==null){this.mobileScrollerContainer.style.display='none';}if(this.getSelectTextMarkupCurrentPage()==null){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.selectedItems.annotations.length==0&&this.pdfViewer.annotationModule&&!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot&&this.action!=='Ink'){var editIcon=document.getElementsByClassName('e-pv-select');if(editIcon&&editIcon.length>0&&editIcon[0].classList.contains('e-pv-select')){editIcon[0].classList.remove('e-pv-select');}if(this.action!='Select'){var pageNumber_1=this.currentPageNumber-1;var annotationCollection_1=this.pdfViewer.annotationCollection.filter(function(obj){return obj.pageNumber===pageNumber_1;});var failedArray=this.pdfViewer.zIndexTable[pageNumber_1].objects.filter(function(item1){return!annotationCollection_1.some(function(item2){return item1.annotName===item2.annotationId;});});if(failedArray.length>0){for(var i=0;i<failedArray.length;i++){var index=this.pdfViewer.zIndexTable[pageNumber_1].objects.indexOf(failedArray[i]);if(index>-1){this.pdfViewer.zIndexTable[pageNumber_1].objects.splice(index,1);}}}this.action='Select';this.pdfViewer.tool='Select';this.tool=this.getTool(this.action);}this.pdfViewer._dotnetInstance.invokeMethodAsync('AdjustMobileToolbar',null);}this.isTapHidden=!this.isTapHidden;}}this.tapCount=0;}}};PdfViewerBase.prototype.onDoubleTap=function(touches){var target=touches[0].target;var isFormfields=false;if(target&&(target.classList.contains('e-pdfviewer-formFields')||target.classList.contains('e-pdfviewer-ListBox')||target.classList.contains('e-pdfviewer-signatureformfields'))){isFormfields=true;}if(this.tapCount===2&&!isFormfields){this.tapCount=0;/**
             * Sometimes the values gets differ by some decimal points. So converted the decimal points values to Integer values.
             */ // eslint-disable-next-line
if(this.touchClientX>=parseInt((touches[0].clientX-10).toString())&&this.touchClientX<=touches[0].clientX+10&&this.touchClientY>=touches[0].clientY-10&&this.touchClientY<=touches[0].clientY+30){if(this.pdfViewer.magnification&&this.pdfViewer.selectedItems.annotations.length!==1){this.pdfViewer.magnification.onDoubleTapMagnification();}this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,this.toolbarHeight);this.isTapHidden=false;clearTimeout(this.singleTapTimer);this.singleTapTimer=null;}}};PdfViewerBase.prototype.preventTouchEvent=function(event){if(this.pdfViewer.textSelectionModule){// eslint-disable-next-line max-len
if(!this.isPanMode&&this.pdfViewer.enableTextSelection&&!this.isTextSelectionDisabled&&this.getSelectTextMarkupCurrentPage()==null){if(!(this.isWebkitMobile&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode)){event.preventDefault();event.stopPropagation();}}}};PdfViewerBase.prototype.renderStampAnnotation=function(event){if(this.pdfViewer.annotation){var zoomFactor=this.getZoomFactor();var pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);var pageDiv=this.getElement('_pageDiv_'+pageIndex);if(this.pdfViewer.enableStampAnnotations){var stampModule=this.pdfViewer.annotationModule.stampAnnotationModule;if(stampModule&&stampModule.isStampAnnotSelected){if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();// eslint-disable-next-line max-len
if(sf.base.Browser.isDevice&&event.type==='touchend'&&this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType==='Image'){var currentStampObj=this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;currentStampObj.pageIndex=pageIndex;currentStampObj.bounds.x=(event.changedTouches[0].clientX-pageCurrentRect.left)/zoomFactor;currentStampObj.bounds.y=(event.changedTouches[0].clientY-pageCurrentRect.top)/zoomFactor;stampModule.updateDeleteItems(pageIndex,currentStampObj,currentStampObj.opacity);this.pdfViewer.add(currentStampObj);}else{// eslint-disable-next-line max-len
stampModule.renderStamp((event.changedTouches[0].clientX-pageCurrentRect.left)/zoomFactor,(event.changedTouches[0].clientY-pageCurrentRect.top)/zoomFactor,null,null,pageIndex,null,null,null,null);}stampModule.isStampAnnotSelected=false;}}this.pdfViewer.annotation.onAnnotationMouseDown();}if(this.pdfViewer.enableHandwrittenSignature&&this.isSignatureAdded&&pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();this.currentSignatureAnnot.pageIndex=pageIndex;// eslint-disable-next-line max-len
this.signatureModule.renderSignature((event.changedTouches[0].clientX-pageCurrentRect.left)/zoomFactor,(event.changedTouches[0].clientY-pageCurrentRect.top)/zoomFactor);this.isSignatureAdded=false;}if(event.touches.length===1&&this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(event);}}};// eslint-disable-next-line
PdfViewerBase.prototype.initPageDiv=function(pageValues){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobiletotalPageContainer){this.mobiletotalPageContainer.innerHTML=this.pageCount.toString();if(this.pageNoContainer){this.pageNoContainer.innerHTML='(1-'+this.pageCount.toString()+')';}}if(this.pageCount>0){var topValue=0;var pageLimit=this.pageCount;this.isMixedSizeDocument=false;var isPortrait=false;var isLandscape=false;var differentPageSize=false;for(var i=0;i<pageLimit;i++){if(_typeof(pageValues.pageSizes[i])!=='object'){var pageSize=pageValues.pageSizes[i].split(',');if(pageValues.pageSizes[i-1]!==null&&i!==0){var previousPageHeight=pageValues.pageSizes[i-1].split(',');topValue=this.pageGap+parseFloat(previousPageHeight[1])+topValue;}else{topValue=this.pageGap;}var size={width:parseFloat(pageSize[0]),height:parseFloat(pageSize[1]),top:topValue};this.pageSize.push(size);}else{if(pageValues.pageSizes[i-1]!==null&&i!==0){// eslint-disable-next-line
var previousPageHeight=pageValues.pageSizes[i-1];topValue=this.pageGap+parseFloat(previousPageHeight.Height)+topValue;}else{topValue=this.pageGap;}var size={width:pageValues.pageSizes[i].Width,height:pageValues.pageSizes[i].Height,top:topValue};this.pageSize.push(size);}if(this.pageSize[i].height>this.pageSize[i].width){isPortrait=true;}if(this.pageSize[i].width>this.pageSize[i].height){isLandscape=true;}if(i>0&&this.pageSize[i].width!==this.pageSize[i-1].width){differentPageSize=true;}var pageWidth=this.pageSize[i].width;if(pageWidth>this.highestWidth){this.highestWidth=pageWidth;}var pageHeight=this.pageSize[i].height;if(pageHeight>this.highestHeight){this.highestHeight=pageHeight;}}if(isPortrait&&isLandscape||differentPageSize){this.isMixedSizeDocument=true;}var limit=this.pageCount<10?this.pageCount:10;for(var i=0;i<limit;i++){this.renderPageContainer(i,this.getPageWidth(i),this.getPageHeight(i),this.getPageTop(i));}// eslint-disable-next-line max-len
this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+'px';this.pageContainer.style.position='relative';if(this.pageLimit===100){var pageDiv=this.getElement('_pageDiv_'+this.pageLimit);if(pageDiv===null&&this.pageLimit<this.pageCount){Promise.all([this.renderPagesVirtually()]);}}}};PdfViewerBase.prototype.renderElementsVirtualScroll=function(pageNumber){var lowerLimit=1;if(this.pageStopValue<=200){lowerLimit=4;}else{lowerLimit=2;}var pageValue=pageNumber+lowerLimit;if(pageValue>this.pageCount){pageValue=this.pageCount;}for(var i=pageNumber-1;i<=pageValue;i++){if(i!==-1){this.renderPageElement(i);}}var lowerPageValue=pageNumber-3;if(lowerPageValue<0){lowerPageValue=0;}for(var i=pageNumber-1;i>=lowerPageValue;i--){if(i!==-1){this.renderPageElement(i);}}for(var j=0;j<this.pageCount;j++){if(!(lowerPageValue<=j&&j<=pageValue)){var pageDiv=this.getElement('_pageDiv_'+j);var pageCanvas=this.getElement('_pageCanvas_'+j);var textLayer=this.getElement('_textLayer_'+j);if(pageCanvas){pageCanvas.parentNode.removeChild(pageCanvas);if(textLayer){if(this.pdfViewer.textSelectionModule&&textLayer.childNodes.length!==0&&!this.isTextSelectionDisabled){this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(j,true);}textLayer.parentNode.removeChild(textLayer);}var indexInArray=this.renderedPagesList.indexOf(j);if(indexInArray!==-1){this.renderedPagesList.splice(indexInArray,1);}}if(pageDiv){pageDiv.parentNode.removeChild(pageDiv);var indexInArray=this.renderedPagesList.indexOf(j);if(indexInArray!==-1){this.renderedPagesList.splice(indexInArray,1);}}}}this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateCurrentPageNumber',this.currentPageNumber);};PdfViewerBase.prototype.renderPageElement=function(i){var pageDiv=this.getElement('_pageDiv_'+i);var canvas=this.getElement('_pageCanvas_'+i);if(canvas==null&&pageDiv==null&&i<this.pageSize.length){// eslint-disable-next-line
this.renderPageContainer(i,this.getPageWidth(i),this.getPageHeight(i),this.getPageTop(i));}};PdfViewerBase.prototype.renderPagesVirtually=function(){return __awaiter$2(this,void 0,void 0,function(){var proxy;var _this_1=this;return __generator$2(this,function(_a){proxy=this;setTimeout(function(){_this_1.initiateRenderPagesVirtually(proxy);},500);return[2/*return*/];});});};// eslint-disable-next-line
PdfViewerBase.prototype.initiateRenderPagesVirtually=function(proxy){var jsonObject={hashId:proxy.hashId,isClientsideLoading:true,isCompletePageSizeNotReceived:true,action:'VirtualLoad',elementId:proxy.pdfViewer.element.id,uniqueId:proxy.documentId,password:proxy.passwordData};if(proxy.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=proxy.jsonDocumentId;}this.virtualLoadRequestHandler=new AjaxHandler(this.pdfViewer);this.virtualLoadRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.load;this.virtualLoadRequestHandler.responseType='json';this.virtualLoadRequestHandler.mode=true;this.virtualLoadRequestHandler.send(jsonObject);// eslint-disable-next-line
this.virtualLoadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.onControlError(500,data,'VirtualLoad');}}}if(data){while(_typeof(data)!=='object'){data=JSON.parse(data);}if(proxy.documentId===data.uniqueId){proxy.pdfViewer.fireAjaxRequestSuccess('VirtualLoad',data);// eslint-disable-next-line
var pageValues=data;if(proxy.pageSize[proxy.pageLimit-1]){var topValue=proxy.pageSize[proxy.pageLimit-1].top;for(var i=proxy.pageLimit;i<proxy.pageCount;i++){if(_typeof(pageValues.pageSizes[i])!=='object'){var pageSize=pageValues.pageSizes[i].split(',');if(proxy.pageSize[i-1]!==null&&i!==0){var previousPageHeight=proxy.pageSize[i-1].height;topValue=proxy.pageGap+parseFloat(previousPageHeight)+topValue;}var size={width:parseFloat(pageSize[0]),height:parseFloat(pageSize[1]),top:topValue};proxy.pageSize.push(size);}else{if(proxy.pageSize[i-1]!==null&&i!==0){var previousPageHeight=proxy.pageSize[i-1].height;topValue=proxy.pageGap+parseFloat(previousPageHeight)+topValue;}var size={width:parseFloat(pageValues.pageSizes[i].Width),height:parseFloat(pageValues.pageSizes[i].Height),top:topValue};proxy.pageSize.push(size);}}// eslint-disable-next-line max-len
proxy.pageContainer.style.height=proxy.getPageTop(proxy.pageSize.length-1)+proxy.getPageHeight(proxy.pageSize.length-1)+'px';// eslint-disable-next-line
var pageData=window.sessionStorage.getItem(proxy.documentId+'_pagedata');if(proxy.pageCount>100){proxy.pdfViewer.fireDocumentLoad(pageData);var linkAnnotationModule=proxy.pdfViewer.linkAnnotationModule;if(linkAnnotationModule&&linkAnnotationModule.linkAnnotation&&linkAnnotationModule.linkAnnotation.length>0&&linkAnnotationModule.linkPage.length>0){linkAnnotationModule.renderDocumentLink(linkAnnotationModule.linkAnnotation,linkAnnotationModule.linkPage,linkAnnotationModule.annotationY,proxy.currentPageNumber-1,data.hyperLinkBorderWidth,data.hyperLinkBorderColor);}}}}}};// eslint-disable-next-line
this.virtualLoadRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText);};// eslint-disable-next-line
this.virtualLoadRequestHandler.onError=function(result){proxy.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText);};};// eslint-disable-next-line
PdfViewerBase.prototype.tileRenderPage=function(data,pageIndex){var _this_1=this;var proxy=null;proxy=this;if(data&&this.pageSize[pageIndex]){var pageWidth=this.getPageWidth(pageIndex);var pageHeight=this.getPageHeight(pageIndex);// eslint-disable-next-line max-len
var canvas_1=this.getElement('_pageCanvas_'+pageIndex);var pageDiv_1=this.getElement('_pageDiv_'+pageIndex);var tileX=data.tileX?data.tileX:0;var tileY=data.tileY?data.tileY:0;if(pageDiv_1){pageDiv_1.style.width=pageWidth+'px';pageDiv_1.style.height=pageHeight+'px';pageDiv_1.style.background='#fff';pageDiv_1.style.top=this.getPageTop(pageIndex)+'px';if(this.pdfViewer.enableRtl){pageDiv_1.style.right=this.updateLeftPosition(pageIndex)+'px';}else{pageDiv_1.style.left=this.updateLeftPosition(pageIndex)+'px';}}if(canvas_1){canvas_1.style.background='#fff';}var imageData=data['image'];var zoomFactor=this.retrieveCurrentZoomFactor();if(this.isReRenderRequired){if(data.zoomFactor){zoomFactor=data.zoomFactor;}var currentString=this.documentId+'_'+pageIndex+'_'+zoomFactor+'_'+data.tileX+'_'+data.tileY;// eslint-disable-next-line max-len
this.tilerequestLists.push(currentString);// eslint-disable-next-line
var matrix=data['transformationMatrix'];// eslint-disable-next-line
var width=data['width'];if(imageData){var tileX_1=data.tileX?data.tileX:0;var tileY_1=data.tileY?data.tileY:0;var scaleFactor=!sf.base.isNullOrUndefined(data.scaleFactor)?data.scaleFactor:1.5;var image=document.getElementById(this.pdfViewer.dataId+'_tileimg_'+pageIndex+'_'+this.getZoomFactor()+'_'+tileX_1+'_'+tileY_1);if(!image){image=new Image();image.id=this.pdfViewer.dataId+'_tileimg_'+pageIndex+'_'+this.getZoomFactor()+'_'+tileX_1+'_'+tileY_1;pageDiv_1.append(image);}image.src=imageData;image.onload=function(){if(data.noTileX===data.tileX+1&&data.noTileY===data.tileY+1){proxy.showPageLoadingIndicator(pageIndex,false);_this_1.blazorUIAdaptor.zoomDropDownElement.classList.remove(_this_1.blazorUIAdaptor.cssClass);_this_1.blazorUIAdaptor.zoomInElement.classList.remove(_this_1.blazorUIAdaptor.cssClass);_this_1.blazorUIAdaptor.zommOutElement.classList.remove(_this_1.blazorUIAdaptor.cssClass);}proxy.tileRenderCount=proxy.tileRenderCount+1;if(tileX_1===0&&tileY_1===0){if(pageIndex===0&&_this_1.isDocumentLoaded){proxy.renderPDFInformations();proxy.isInitialLoaded=true;// eslint-disable-next-line
var pageData=window.sessionStorage.getItem(proxy.documentId+'_pagedata');if(proxy.pageCount<=100){proxy.pdfViewer.fireDocumentLoad(pageData);}proxy.isDocumentLoaded=false;if(proxy.pdfViewer.textSearch&&proxy.pdfViewer.isExtractText){proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();}}}if(proxy.tileRenderCount===proxy.tileRequestCount){if(proxy.isTextMarkupAnnotationModule()){proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);}canvas_1.style.display='none';canvas_1.src='#';var oldPageDiv=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_oldCanvas"]');for(var i=0;i<oldPageDiv.length;i++){pageDiv_1.removeChild(oldPageDiv[i]);}proxy.isTileImageRendered=false;proxy.tileRenderCount=0;if(proxy.pdfViewer.magnificationModule){proxy.pdfViewer.magnificationModule.rerenderCountIncrement();}proxy.isDrawnCompletely=true;}};var currentImageWidth=width*this.getZoomFactor()/zoomFactor/scaleFactor;var matrixElements=matrix.Elements?matrix.Elements:matrix.Values;var currentImageTop=matrixElements[5]*this.getZoomFactor()/zoomFactor/scaleFactor;var currentImageLeft=matrixElements[4]*this.getZoomFactor()/zoomFactor/scaleFactor;image.width=currentImageWidth;image.style.width=currentImageWidth+'px';image.style.top=currentImageTop+'px';image.style.left=currentImageLeft+'px';image.style.position='absolute';}if(tileX===0&&tileY===0){this.onPageRender(data,pageIndex,pageDiv_1);}}else{var oldCanvases=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_tileimg_'+pageIndex+'_"]');for(var l=0;l<oldCanvases.length;l++){var tileImgId=oldCanvases[l].id.split('_');var zoomFactor_1=proxy.retrieveCurrentZoomFactor();// eslint-disable-next-line
var tileData=JSON.parse(proxy.getStoredTileImageDetails(pageIndex,parseFloat(tileImgId[tileImgId.length-2]),parseFloat(tileImgId[tileImgId.length-1]),zoomFactor_1));if(tileData&&tileData.zoomFactor){zoomFactor_1=tileData.zoomFactor;}if(parseFloat(tileImgId[tileImgId.length-4])===pageIndex){var node=oldCanvases[l];// Make sure it's really an Element
if(node.nodeType==Node.ELEMENT_NODE){node.onload=function(){proxy.showPageLoadingIndicator(pageIndex,false);proxy.tileRenderCount=proxy.tileRenderCount+1;if(tileX_2===0&&tileY_2===0){if(pageIndex===0&&_this_1.isDocumentLoaded){_this_1.renderPDFInformations();_this_1.isInitialLoaded=true;// eslint-disable-next-line
var pageData=window.sessionStorage.getItem(proxy.documentId+'_pagedata');if(proxy.pageCount<=100){proxy.pdfViewer.fireDocumentLoad(pageData);}proxy.isDocumentLoaded=false;if(proxy.pdfViewer.textSearch&&proxy.pdfViewer.isExtractText){proxy.pdfViewer.textSearchModule.getPDFDocumentTexts();}}}if(proxy.tileRenderCount===proxy.tileRequestCount){canvas_1.style.display='none';canvas_1.src='#';if(proxy.isTextMarkupAnnotationModule()){proxy.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(pageIndex);}var oldPageDiv=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_oldCanvas"]');for(var i=0;i<oldPageDiv.length;i++){pageDiv_1.removeChild(oldPageDiv[i]);}proxy.isTileImageRendered=false;proxy.tileRenderCount=0;if(proxy.pdfViewer.magnificationModule){proxy.pdfViewer.magnificationModule.rerenderCountIncrement();}proxy.isDrawnCompletely=true;}};if(tileData)node.src=tileData.image;}}}var tileX_2=data.tileX?data.tileX:0;var tileY_2=data.tileY?data.tileY:0;if(tileX_2===0&&tileY_2===0){this.onPageRender(data,pageIndex,pageDiv_1);}}}};PdfViewerBase.prototype.renderTileCanvas=function(pageWidth,pageHeight,pageIndex,pageDiv,zoomFactor,scaleFactor){var pageCanvas=this.getElement('_pageTileCanvas_'+pageIndex);if(!pageCanvas){pageCanvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_pageTileCanvas_'+pageIndex,className:'e-pv-pageTile-canvas'});pageCanvas.style.width=pageWidth+'px';pageCanvas.style.height=pageHeight+'px';pageCanvas.style.display='none';pageCanvas.style.backgroundColor='#fff';if(this.isMixedSizeDocument&&this.highestWidth>0){pageCanvas.style.marginLeft='auto';pageCanvas.style.marginRight='auto';}pageDiv.appendChild(pageCanvas);}return pageCanvas;};PdfViewerBase.prototype.calculateImageWidth=function(pageWidth,zoomFactor,scaleFactor,imageWidth){var width=pageWidth/this.getZoomFactor()*zoomFactor*scaleFactor;// eslint-disable-next-line
if(parseInt(imageWidth.toString())===parseInt(width.toString())){imageWidth=width;}imageWidth=imageWidth*this.getZoomFactor()/zoomFactor;return imageWidth;};// eslint-disable-next-line
PdfViewerBase.prototype.renderPage=function(data,pageIndex){var _this_1=this;var proxy=this;if(data&&this.pageSize[pageIndex]){var pageWidth=this.getPageWidth(pageIndex);var pageHeight=this.getPageHeight(pageIndex);// eslint-disable-next-line max-len
var canvas_2=this.getElement('_pageCanvas_'+pageIndex);var pageDiv_2=this.getElement('_pageDiv_'+pageIndex);if(pageDiv_2){pageDiv_2.style.width=pageWidth+'px';pageDiv_2.style.height=pageHeight+'px';pageDiv_2.style.top=this.getPageTop(pageIndex)+'px';if(this.pdfViewer.enableRtl){pageDiv_2.style.right=this.updateLeftPosition(pageIndex)+'px';}else{pageDiv_2.style.left=this.updateLeftPosition(pageIndex)+'px';}}if(canvas_2){canvas_2.style.background='#fff';canvas_2.style.display='block';canvas_2.style.width=pageWidth+'px';canvas_2.style.height=pageHeight+'px';if(pageWidth<parseFloat(pageDiv_2.style.width)){pageDiv_2.style.boxShadow='none';}// eslint-disable-next-line
var imageData=data['image'];if(imageData){canvas_2.onload=function(){Promise.resolve().then(function(){var oldCanvases=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_tileimg_'+pageIndex+'_"]');var pageCanvas=proxy.getElement('_pageDiv_'+pageIndex);for(var i=0;i<oldCanvases.length;i++){var tileImgId=oldCanvases[i].id.split('_');if(parseFloat(tileImgId[tileImgId.length-3])!=proxy.getZoomFactor())pageCanvas.removeChild(oldCanvases[i]);}var oldPageDiv=document.querySelectorAll('img[id*="'+proxy.pdfViewer.element.id+'_oldCanvas"]');for(var i=0;i<oldPageDiv.length;i++){pageDiv_2.removeChild(oldPageDiv[i]);}if(_this_1.pdfViewer.magnificationModule){_this_1.pdfViewer.magnificationModule.rerenderCountIncrement();}_this_1.showPageLoadingIndicator(pageIndex,false);if(pageIndex===0&&_this_1.isDocumentLoaded){_this_1.renderPDFInformations();_this_1.isInitialLoaded=true;// eslint-disable-next-line
var pageData=window.sessionStorage.getItem(_this_1.documentId+'_pagedata');_this_1.pdfViewer.fireDocumentLoad(pageData);_this_1.isDocumentLoaded=false;if(_this_1.pdfViewer.textSearch&&_this_1.pdfViewer.isExtractText){_this_1.pdfViewer.textSearchModule.getPDFDocumentTexts();}}if(_this_1.pdfViewer.magnificationModule){_this_1.pdfViewer.magnificationModule.pushImageObjects(canvas_2);}});};canvas_2.src=imageData;}this.onPageRender(data,pageIndex,pageDiv_2);}}};// eslint-disable-next-line
PdfViewerBase.prototype.onPageRender=function(data,pageIndex,pageDiv){// eslint-disable-next-line
var aElement=pageDiv.getElementsByTagName('a');var isAnnotationRendered=false;if(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule){this.renderTextContent(data,pageIndex);}if(this.pdfViewer.formFieldsModule&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed){this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);}if(this.pdfViewer.formFieldsModule&&!this.isDocumentLoaded){this.pdfViewer.formFieldsModule.renderFormFields(pageIndex);}if(this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled){this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(pageIndex);}if(this.documentAnnotationCollections){var isAnnotationAdded=false;for(var i=0;i<this.annotationRenderredList.length;i++){if(this.annotationRenderredList[i]===pageIndex){isAnnotationAdded=true;}}// eslint-disable-next-line
var pageAnnotations=this.documentAnnotationCollections[pageIndex];if(pageAnnotations&&!isAnnotationAdded){data.shapeAnnotation=pageAnnotations.shapeAnnotation;data.measureShapeAnnotation=pageAnnotations.measureShapeAnnotation;data.textMarkupAnnotation=pageAnnotations.textMarkupAnnotation;data.freeTextAnnotation=pageAnnotations.freeTextAnnotation;data.stampAnnotations=pageAnnotations.stampAnnotations;data.stickyNotesAnnotation=pageAnnotations.stickyNotesAnnotation;data.signatureInkAnnotation=pageAnnotations.signatureInkAnnotation;this.annotationRenderredList.push(pageIndex);}}if(this.isImportAction){// eslint-disable-next-line
var pageAnnotations=this.checkDocumentCollectionData(pageIndex);if(pageAnnotations){data.shapeAnnotation=pageAnnotations.shapeAnnotation;data.measureShapeAnnotation=pageAnnotations.measureShapeAnnotation;data.textMarkupAnnotation=pageAnnotations.textMarkupAnnotation;data.freeTextAnnotation=pageAnnotations.freeTextAnnotation;data.stampAnnotations=pageAnnotations.stampAnnotations;data.stickyNotesAnnotation=pageAnnotations.stickyNotesAnnotation;data.signatureInkAnnotation=pageAnnotations.signatureInkAnnotation;isAnnotationRendered=true;}}if(this.pdfViewer.annotationModule&&(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled())){if(this.isStampAnnotationModule()){// eslint-disable-next-line
var stampData=data['stampAnnotations'];if(isAnnotationRendered){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData,pageIndex,null,true);}else{// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData,pageIndex);}}if(isAnnotationRendered){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,data.shapeAnnotation,data.measureShapeAnnotation,data.textMarkupAnnotation,null,true);}else{// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,data.shapeAnnotation,data.measureShapeAnnotation,data.textMarkupAnnotation);}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation,pageIndex);}if(this.pdfViewer.textSearchModule){if(this.pdfViewer.textSearchModule.isTextSearch){this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);}}if(this.isShapeBasedAnnotationsEnabled()){var canvas1=this.getElement('_annotationCanvas_'+pageIndex);var commonStyle='position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';if(canvas1){var bounds=canvas1.getBoundingClientRect();renderAdornerLayer(bounds,commonStyle,canvas1,pageIndex,this.pdfViewer);this.pdfViewer.renderSelector(pageIndex,this.pdfViewer.annotationSelectorSettings);}}if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);}if(this.isFreeTextAnnotationModule()&&data.freeTextAnnotation){if(isAnnotationRendered){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation,pageIndex,true);}else{this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation,pageIndex);}}if(this.isInkAnnotationModule()&&data&&data.signatureInkAnnotation){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation,pageIndex,isAnnotationRendered);}// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.annotationPageIndex===pageIndex){this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();}this.isLoadedFormFieldAdded=false;};/**
     * @private
     * @param {number} pageIndex - page index for rendering the annotation.
     * @returns {void}
     */PdfViewerBase.prototype.renderAnnotations=function(pageIndex){// eslint-disable-next-line
var data={};if(this.documentAnnotationCollections){var isAnnotationAdded=false;for(var i=0;i<this.annotationRenderredList.length;i++){if(this.annotationRenderredList[i]===pageIndex){isAnnotationAdded=true;}}// eslint-disable-next-line
var pageAnnotations=this.documentAnnotationCollections[pageIndex];if(pageAnnotations&&!isAnnotationAdded){data.shapeAnnotation=pageAnnotations.shapeAnnotation;data.measureShapeAnnotation=pageAnnotations.measureShapeAnnotation;data.textMarkupAnnotation=pageAnnotations.textMarkupAnnotation;data.freeTextAnnotation=pageAnnotations.freeTextAnnotation;data.stampAnnotations=pageAnnotations.stampAnnotations;data.stickyNotesAnnotation=pageAnnotations.stickyNotesAnnotation;data.signatureAnnotation=pageAnnotations.signatureAnnotation;data.signatureInkAnnotation=pageAnnotations.signatureInkAnnotation;this.annotationRenderredList.push(pageIndex);}}if(this.isAnnotationCollectionRemoved){data.shapeAnnotation=[];data.measureShapeAnnotation=[];data.textMarkupAnnotation=[];data.freeTextAnnotation=[];data.stampAnnotations=[];data.stickyNotesAnnotation=[];data.signatureInkAnnotation=[];}if(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled()){if(this.isStampAnnotationModule()){// eslint-disable-next-line
var stampData=data['stampAnnotations'];// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(stampData,pageIndex);}// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,data.shapeAnnotation,data.measureShapeAnnotation,data.textMarkupAnnotation);this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(data.stickyNotesAnnotation,pageIndex);}if(this.pdfViewer.textSearchModule){if(this.pdfViewer.textSearchModule.isTextSearch){this.pdfViewer.textSearchModule.highlightOtherOccurrences(pageIndex);}}if(this.isImportAction){var isAnnotationAdded=false;for(var i=0;i<this.annotationPageList.length;i++){if(this.annotationPageList[i]===pageIndex){isAnnotationAdded=true;}}if(!isAnnotationAdded){if(this.importedAnnotation){this.drawPageAnnotations(this.importedAnnotation,pageIndex,true);this.annotationPageList[this.annotationPageList.length]=pageIndex;}}}if(this.isShapeBasedAnnotationsEnabled()){var canvas1=this.getElement('_annotationCanvas_'+pageIndex);var commonStyle='position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000';if(canvas1){var bounds=canvas1.getBoundingClientRect();renderAdornerLayer(bounds,commonStyle,canvas1,pageIndex,this.pdfViewer);this.pdfViewer.renderSelector(pageIndex);}}if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(pageIndex);}if(this.isFreeTextAnnotationModule()&&data.freeTextAnnotation){this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(data.freeTextAnnotation,pageIndex);}if(data&&data.signatureAnnotation){this.signatureModule.renderExistingSignature(data.signatureAnnotation,pageIndex,false);}if(this.isInkAnnotationModule()&&data&&data.signatureInkAnnotation){this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(data.signatureInkAnnotation,pageIndex,false);}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected){this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind();}};// eslint-disable-next-line
PdfViewerBase.prototype.renderTextContent=function(data,pageIndex){// eslint-disable-next-line
var texts=data['textContent'];// eslint-disable-next-line
var bounds=data['textBounds'];// eslint-disable-next-line
var rotation=data['rotation'];var textLayer=this.getElement('_textLayer_'+pageIndex);if(!textLayer){// eslint-disable-next-line max-len
textLayer=this.textLayer.addTextLayer(pageIndex,this.getPageWidth(pageIndex),this.getPageHeight(pageIndex),this.getElement('_pageDiv_'+pageIndex));}if(textLayer&&texts&&bounds){textLayer.style.display='block';if(textLayer.childNodes.length===0){this.textLayer.renderTextContents(pageIndex,texts,bounds,rotation);}else{this.textLayer.resizeTextContents(pageIndex,texts,bounds,rotation,true);}}};PdfViewerBase.prototype.renderPageContainer=function(pageNumber,pageWidth,pageHeight,topValue){// eslint-disable-next-line max-len
var pageDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_pageDiv_'+pageNumber,className:'e-pv-page-div',attrs:{'tabindex':'0'}});var isMouseEvent=false;pageDiv.addEventListener("focus",function(){if(!isMouseEvent){pageDiv.classList.add("e-focused");}isMouseEvent=false;});pageDiv.addEventListener("mousedown",function(){isMouseEvent=true;});pageDiv.addEventListener("keydown",function(){isMouseEvent=false;});pageDiv.addEventListener('blur',function(){pageDiv.classList.remove('e-focused');});pageDiv.style.width=pageWidth+'px';pageDiv.style.height=pageHeight+'px';if(this.pdfViewer.enableRtl){pageDiv.style.right=this.updateLeftPosition(pageNumber)+'px';}else{pageDiv.style.left=this.updateLeftPosition(pageNumber)+'px';}pageDiv.style.top=topValue+'px';this.pageContainer.appendChild(pageDiv);this.pageContainer.style.width=this.viewerContainer.clientWidth+'px';this.createWaitingPopup(pageNumber);this.orderPageDivElements(pageDiv,pageNumber);this.renderPageCanvas(pageDiv,pageWidth,pageHeight,pageNumber,'block');if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&!this.isThumb){this.updateMobileScrollerPosition();}};PdfViewerBase.prototype.renderPDFInformations=function(){if(this.pdfViewer.thumbnailViewModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){this.pdfViewer.thumbnailViewModule.createRequestForThumbnails();}if(this.pdfViewer.bookmarkViewModule){this.pdfViewer.bookmarkViewModule.createRequestForBookmarks();}if(this.pdfViewer.annotationModule){if(this.pdfViewer.isCommandPanelOpen||this.pdfViewer.commentPanelVisible){this.pdfViewer.annotation.showCommentsPanelInBlazor();this.pdfViewer.updatePdfViewerOptions("CommentPanelVisible",true);}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments();}};PdfViewerBase.prototype.orderPageDivElements=function(pageDiv,pageIndex){var nextElement=this.getElement('_pageDiv_'+(pageIndex+1));if(nextElement){this.pageContainer.insertBefore(pageDiv,nextElement);}else{this.pageContainer.appendChild(pageDiv);}};/**
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.renderPageCanvas=function(pageDiv,pageWidth,pageHeight,pageNumber,displayMode){if(pageDiv){// eslint-disable-next-line
var pageCanvas=this.getElement('_pageCanvas_'+pageNumber);if(pageCanvas){pageCanvas.width=pageWidth;pageCanvas.height=pageHeight;pageCanvas.style.display='block';if(this.isMixedSizeDocument&&this.highestWidth>0){pageCanvas.style.marginLeft='auto';pageCanvas.style.marginRight='auto';}}else{// eslint-disable-next-line max-len
pageCanvas=sf.base.createElement('img',{id:this.pdfViewer.dataId+'_pageCanvas_'+pageNumber,className:'e-pv-page-canvas'});pageCanvas.width=pageWidth;pageCanvas.height=pageHeight;pageCanvas.style.display=displayMode;if(this.isMixedSizeDocument&&this.highestWidth>0){pageCanvas.style.marginLeft='auto';pageCanvas.style.marginRight='auto';}pageDiv.appendChild(pageCanvas);}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotation){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.createAnnotationLayer(pageDiv,pageWidth,pageHeight,pageNumber,displayMode);}if(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule){this.textLayer.addTextLayer(pageNumber,pageWidth,pageHeight,pageDiv);}return pageCanvas;}};/**
     * @private
     * @param {any} pageCanvas - The canvas for rendering the page.
     * @param {any} pageNumber - The page number for adding styles.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.applyElementStyles=function(pageCanvas,pageNumber){if(this.isMixedSizeDocument&&pageCanvas){var canvasElement=document.getElementById(this.pdfViewer.dataId+'_pageCanvas_'+pageNumber);var oldCanvas=document.getElementById(this.pdfViewer.dataId+'_oldCanvas_'+pageNumber);if(pageCanvas&&canvasElement&&canvasElement.offsetLeft>0){pageCanvas.style.marginLeft=canvasElement.offsetLeft+'px';pageCanvas.style.marginRight=canvasElement.offsetLeft+'px';}else if(oldCanvas&&oldCanvas.offsetLeft>0){pageCanvas.style.marginLeft=oldCanvas.offsetLeft+'px';pageCanvas.style.marginRight=oldCanvas.offsetLeft+'px';}else{pageCanvas.style.marginLeft='auto';pageCanvas.style.marginRight='auto';}}};/**
     * @private
     * @param  {number} pageIndex - page index for updating positon.
     * @returns {void}
     */PdfViewerBase.prototype.updateLeftPosition=function(pageIndex){var leftPosition;var width=this.viewerContainer.getBoundingClientRect().width;if(width===0){width=parseFloat(this.pdfViewer.width.toString());}// eslint-disable-next-line max-len
if(this.isMixedSizeDocument&&this.highestWidth>0){if(this.viewerContainer.clientWidth>0){leftPosition=(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2;}else{leftPosition=(width-this.highestWidth*this.getZoomFactor())/2;}var pageDiff=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(pageIndex))/2;if(leftPosition>0){leftPosition+=pageDiff;}else{leftPosition=pageDiff;}}else{if(this.viewerContainer.clientWidth>0){leftPosition=(this.viewerContainer.clientWidth-this.getPageWidth(pageIndex))/2;}else{leftPosition=(width-this.getPageWidth(pageIndex))/2;}}if(this.pageSize[pageIndex].width>this.pageSize[pageIndex].height){}// eslint-disable-next-line max-len
if(leftPosition<0||(this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||this.pdfViewer.magnificationModule.fitType==='fitToWidth':false)){var leftValue=leftPosition;if(leftPosition>0&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){// eslint-disable-next-line
leftPosition=leftValue;}else{leftPosition=this.pageLeft;}if(leftPosition>0&&this.isMixedSizeDocument){if(leftValue>0){leftPosition=leftValue;}}}return leftPosition;};/**
     * @private
     * @param {number} pageIndex - The page index for positon.
     * @returns {void}
     */PdfViewerBase.prototype.applyLeftPosition=function(pageIndex){var leftPosition;if(this.pageSize[pageIndex]){if(this.isMixedSizeDocument&&this.highestWidth>0){if(this.viewerContainer.clientWidth>0){// eslint-disable-next-line max-len
leftPosition=(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2;}else{// eslint-disable-next-line max-len
leftPosition=(this.viewerContainer.getBoundingClientRect().width-this.highestWidth*this.getZoomFactor())/2;}var pageDiff=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(pageIndex))/2;if(leftPosition>0){leftPosition+=pageDiff;}else{leftPosition=pageDiff;}}else{if(this.viewerContainer.clientWidth>0){// eslint-disable-next-line max-len
leftPosition=(this.viewerContainer.clientWidth-this.pageSize[pageIndex].width*this.getZoomFactor())/2;}else{// eslint-disable-next-line max-len
leftPosition=(this.viewerContainer.getBoundingClientRect().width-this.pageSize[pageIndex].width*this.getZoomFactor())/2;}}if(this.pageSize[pageIndex].width>this.pageSize[pageIndex].height){}// eslint-disable-next-line max-len
if(leftPosition<0||(this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||this.pdfViewer.magnificationModule.fitType==='fitToWidth':false)){var leftValue=leftPosition;leftPosition=this.pageLeft;// eslint-disable-next-line max-len
if(leftValue>0&&this.isMixedSizeDocument){leftPosition=leftValue;}if(sf.base.Browser.isDevice&&leftValue>0){leftPosition=leftValue;}}// eslint-disable-next-line max-len
var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);if(pageDiv){if(!this.pdfViewer.enableRtl){pageDiv.style.left=leftPosition+'px';}else{pageDiv.style.right=leftPosition+'px';}}}};PdfViewerBase.prototype.updatePageHeight=function(viewerHeight,toolbarHeight){return(viewerHeight-toolbarHeight)/viewerHeight*100+'%';};PdfViewerBase.prototype.initiatePageViewScrollChanged=function(){if(this.scrollHoldTimer){clearTimeout(this.scrollHoldTimer);}this.scrollHoldTimer=null;if(this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop){this.scrollPosition=this.viewerContainer.scrollTop;this.pageViewScrollChanged(this.currentPageNumber);}};PdfViewerBase.prototype.renderCountIncrement=function(){if(this.pdfViewer.magnificationModule){this.pdfViewer.magnificationModule.renderCountIncrement();}};/**
     * @private
     * @param {number} currentPageNumber - The current pagenumber.
     * @returns {void}
     */PdfViewerBase.prototype.pageViewScrollChanged=function(currentPageNumber){if(this.isPanMode){if(this.renderedPagesList.indexOf(currentPageNumber-1)===-1){this.reRenderedCount=0;}}else{this.reRenderedCount=0;}var currentPageIndex=currentPageNumber-1;if(currentPageNumber!==this.previousPage&&currentPageNumber<=this.pageCount){var isSkip=false;if(this.isDataExits&&!this.getLinkInformation(currentPageIndex)){isSkip=true;}if(this.renderedPagesList.indexOf(currentPageIndex)===-1&&!this.getMagnified()&&!isSkip){this.renderCountIncrement();this.createRequestForRender(currentPageIndex);}}if(!(this.getMagnified()||this.getPagesPinchZoomed())){var previous=currentPageIndex-1;var isSkip=false;var canvas=this.getElement('_pageCanvas_'+previous);if(this.isDataExits&&!this.getLinkInformation(previous)){isSkip=true;}if(canvas!==null&&!isSkip){if(this.renderedPagesList.indexOf(previous)===-1&&!this.getMagnified()){this.renderCountIncrement();this.createRequestForRender(previous);}}if(this.isMinimumZoom){this.renderPreviousPagesInScroll(previous);}var next=currentPageIndex+1;var pageHeight=0;if(next<this.pageCount){pageHeight=this.getPageHeight(next);if(this.renderedPagesList.indexOf(next)===-1&&!this.getMagnified()&&pageHeight){this.createRequestForRender(next);this.renderCountIncrement();while(this.viewerContainer.clientHeight>pageHeight){next=next+1;if(next<this.pageCount){this.renderPageElement(next);this.createRequestForRender(next);pageHeight+=this.getPageHeight(next);this.renderCountIncrement();}else{break;}}}}}};PdfViewerBase.prototype.renderPreviousPagesInScroll=function(pageIndex){var next=pageIndex-1;var pageNumber=next-1;if(next>0){if(this.renderedPagesList.indexOf(next)===-1&&!this.getMagnified()){this.createRequestForRender(next);this.renderCountIncrement();}if(pageNumber>0){if(this.renderedPagesList.indexOf(pageNumber)===-1&&!this.getMagnified()){this.createRequestForRender(pageNumber);this.renderCountIncrement();}}}};PdfViewerBase.prototype.downloadDocument=function(blobUrl){// eslint-disable-next-line
var Url=URL||webkitURL;blobUrl=Url.createObjectURL(blobUrl);var anchorElement=sf.base.createElement('a');if(anchorElement.click){anchorElement.href=blobUrl;anchorElement.target='_parent';if('download'in anchorElement){anchorElement.download=this.downloadFileName;}(document.body||document.documentElement).appendChild(anchorElement);anchorElement.click();anchorElement.parentNode.removeChild(anchorElement);}else{if(window.top===window&&blobUrl.split('#')[0]===window.location.href.split('#')[0]){var padCharacter=blobUrl.indexOf('?')===-1?'?':'&';blobUrl=blobUrl.replace(/#|$/,padCharacter+'$&');}window.open(blobUrl,'_parent');}};PdfViewerBase.prototype.downloadExportAnnotationJson=function(blobUrl,isForm){// eslint-disable-next-line
var Url=URL||webkitURL;blobUrl=Url.createObjectURL(blobUrl);var anchorElement=sf.base.createElement('a');if(anchorElement.click){anchorElement.href=blobUrl;anchorElement.target='_parent';if('download'in anchorElement){if(this.pdfViewer.exportAnnotationFileName!==null){anchorElement.download=this.pdfViewer.exportAnnotationFileName.split('.')[0]+'.json';}else{anchorElement.download=this.pdfViewer.fileName.split('.')[0]+'.json';}}(document.body||document.documentElement).appendChild(anchorElement);anchorElement.click();anchorElement.parentNode.removeChild(anchorElement);if(isForm){this.pdfViewer.fireFormExportSuccess(blobUrl,anchorElement.download);}else{this.pdfViewer.fireExportSuccess(blobUrl,anchorElement.download);}}else{if(window.top===window&&blobUrl.split('#')[0]===window.location.href.split('#')[0]){var padCharacter=blobUrl.indexOf('?')===-1?'?':'&';blobUrl=blobUrl.replace(/#|$/,padCharacter+'$&');}window.open(blobUrl,'_parent');if(isForm){this.pdfViewer.fireFormExportSuccess(blobUrl,this.pdfViewer.fileName.split('.')[0]+'.json');}else{this.pdfViewer.fireExportSuccess(blobUrl,this.pdfViewer.fileName.split('.')[0]+'.json');}}};PdfViewerBase.prototype.downloadExportedXFdfAnnotation=function(blobUrl){// eslint-disable-next-line
var Url=URL||webkitURL;blobUrl=Url.createObjectURL(blobUrl);var anchorElement=sf.base.createElement('a');if(anchorElement.click){anchorElement.href=blobUrl;anchorElement.target='_parent';if('download'in anchorElement){if(this.pdfViewer.exportAnnotationFileName!==null){anchorElement.download=this.pdfViewer.exportAnnotationFileName.split('.')[0]+'.xfdf';}else{anchorElement.download=this.pdfViewer.fileName.split('.')[0]+'.xfdf';}}(document.body||document.documentElement).appendChild(anchorElement);anchorElement.click();anchorElement.parentNode.removeChild(anchorElement);this.pdfViewer.fireExportSuccess(blobUrl,anchorElement.download);}};/**
     * @private
     * @param {string} path - The path for exporting the fields.
     * @returns {void}
     */PdfViewerBase.prototype.exportFormFields=function(path){this.createRequestForExportFormfields(false,path);};/**
     * @param source
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.importFormFields=function(source){this.createRequestForImportingFormfields(source);};/**
     * @param isObject
     * @param path
     * @param formFieldDataFormat
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createRequestForExportFormfields=function(isObject,path,formFieldDataFormat){var _this_1=this;var proxy=null;proxy=this;var promise=new Promise(function(resolve,reject){// eslint-disable-next-line
var jsonObject=proxy.createFormfieldsJsonData();proxy.pdfViewer.fireFormExportStarted(jsonObject.pdfAnnotation);jsonObject.action='ExportFormFields';// eslint-disable-next-line
jsonObject['hashId']=proxy.hashId;// eslint-disable-next-line
jsonObject['fileName']=proxy.pdfViewer.fileName;if(path&&path!==''&&!isObject){// eslint-disable-next-line
jsonObject['filePath']=path;}// eslint-disable-next-line
jsonObject['elementId']=_this_1.pdfViewer.dataId;// eslint-disable-next-line max-len
if(proxy.jsonDocumentId){// eslint-disable-next-line
jsonObject.document=proxy.jsonDocumentId;}if(formFieldDataFormat){jsonObject.formFieldDataFormat=formFieldDataFormat;}var url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.exportFormFields;proxy.exportFormFieldsRequestHandler=new AjaxHandler(_this_1.pdfViewer);proxy.exportFormFieldsRequestHandler.url=url;proxy.exportFormFieldsRequestHandler.mode=true;proxy.exportFormFieldsRequestHandler.responseType='text';proxy.exportFormFieldsRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.exportFormFieldsRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(data){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportFormFields,data);if(isObject||formFieldDataFormat){var exportObject=data;if(isObject){exportObject=decodeURIComponent(escape(atob(data.split(',')[1])));}resolve(exportObject);proxy.pdfViewer.fireFormExportSuccess(exportObject,proxy.pdfViewer.fileName);}else if(data.split('base64,')[1]){var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/json');if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){window.navigator.msSaveOrOpenBlob(blobUrl,proxy.pdfViewer.fileName.split('.')[0]+'.json');}else{proxy.downloadExportAnnotationJson(blobUrl,true);}}}}};// eslint-disable-next-line
proxy.exportFormFieldsRequestHandler.onFailure=function(result){proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation,result.statusText);};// eslint-disable-next-line
proxy.exportFormFieldsRequestHandler.onError=function(result){proxy.pdfViewer.fireFormExportFailed(jsonObject.pdfAnnotation,result.statusText);};});if(isObject||formFieldDataFormat){return promise;}else{return true;}};/**
     * @param source
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createRequestForImportingFormfields=function(source,formFieldDataFormat){var proxy=null;proxy=this;// eslint-disable-next-line
var jsonObject={};if(_typeof(source)==='object'){jsonObject.data=JSON.stringify(source);}else{jsonObject.data=source;if(source.split('.')[1]==='json'){// eslint-disable-next-line
jsonObject['fileName']=proxy.pdfViewer.fileName;}}proxy.pdfViewer.fireFormImportStarted(source);// eslint-disable-next-line
jsonObject.action='ImportFormFields';// eslint-disable-next-line
jsonObject['hashId']=proxy.hashId;// eslint-disable-next-line
jsonObject['elementId']=this.pdfViewer.dataId;// eslint-disable-next-line max-len
if(proxy.jsonDocumentId){// eslint-disable-next-line
jsonObject.document=proxy.jsonDocumentId;}if(formFieldDataFormat){jsonObject.formFieldDataFormat=formFieldDataFormat;}var url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.importFormFields;proxy.importFormFieldsRequestHandler=new AjaxHandler(this.pdfViewer);proxy.importFormFieldsRequestHandler.url=url;proxy.importFormFieldsRequestHandler.mode=true;proxy.importFormFieldsRequestHandler.responseType='text';proxy.importFormFieldsRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.importFormFieldsRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data&&data!=='null'){if(_typeof(data)!=='object'){try{data=JSON.parse(data);if(_typeof(data)!=='object'){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.importFormFields);proxy.pdfViewer.fireFormImportFailed(source,result.statusText);data=null;}}catch(error){proxy.pdfViewer.fireFormImportFailed(source,proxy.pdfViewer.localeObj.getConstant('File not found'));var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_FileNotFound');promise.then(function(value){proxy.openImportExportNotificationPopup(value);});proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.importFormFields);data=null;}}proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importFormFields,data);proxy.pdfViewer.fireFormImportSuccess(source);window.sessionStorage.removeItem(this.documentId+'_formfields');this.pdfViewer.formFieldsModule.removeExistingFormFields();proxy.saveFormfieldsData(data);proxy.fireDocumentEditedEvent("FormFieldImported");for(var i=0;i<proxy.renderedPagesList.length;i++){this.pdfViewer.formFieldsModule.renderFormFields(proxy.renderedPagesList[i]);}}else{proxy.pdfViewer.fireFormImportFailed(source,result.statusText);var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_FileNotFound');promise.then(function(value){proxy.openImportExportNotificationPopup(value);});}};// eslint-disable-next-line
proxy.importFormFieldsRequestHandler.onFailure=function(result){proxy.pdfViewer.fireFormImportFailed(source,result.statusText);};// eslint-disable-next-line
proxy.importFormFieldsRequestHandler.onError=function(result){proxy.pdfViewer.fireFormImportFailed(source,result.statusText);};};/**
     * @public
     * @returns {any} - Returns the Json data.
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createFormfieldsJsonData=function(){// eslint-disable-next-line
var jsonObject={};if(this.pdfViewer.formFieldsModule){var fieldsData=this.pdfViewer.formFieldsModule.downloadFormFieldsData();// eslint-disable-next-line
jsonObject['fieldsData']=fieldsData;}return jsonObject;};// eslint-disable-next-line
PdfViewerBase.prototype.constructJsonDownload=function(){// eslint-disable-next-line
var jsonObject={hashId:this.hashId};if(this.jsonDocumentId){jsonObject.documentId=this.jsonDocumentId;}jsonObject.uniqueId=this.documentId;this.importPageList=[];if(this.pdfViewer.annotationModule){this.saveImportedAnnotations();}if(this.isTextMarkupAnnotationModule()){this.isJsonExported=false;// eslint-disable-next-line max-len
var textMarkupAnnotationCollection=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();// eslint-disable-next-line
jsonObject['textMarkupAnnotations']=textMarkupAnnotationCollection;}if(this.isShapeAnnotationModule()){this.isJsonExported=false;// eslint-disable-next-line max-len
var shapeAnnotations=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();// eslint-disable-next-line
jsonObject['shapeAnnotations']=shapeAnnotations;}if(this.isCalibrateAnnotationModule()){this.isJsonExported=false;// eslint-disable-next-line max-len
var calibrateAnnotations=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();// eslint-disable-next-line
jsonObject['measureShapeAnnotations']=calibrateAnnotations;}if(this.isStampAnnotationModule()){// eslint-disable-next-line max-len
var stampAnnotationCollection=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();// eslint-disable-next-line
jsonObject['stampAnnotations']=stampAnnotationCollection;}if(this.isCommentAnnotationModule()){// eslint-disable-next-line max-len
var stickyAnnotationCollection=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();// eslint-disable-next-line
jsonObject['stickyNotesAnnotation']=stickyAnnotationCollection;}if(this.isImportAction){var importList=JSON.stringify(this.importPageList);// eslint-disable-next-line
jsonObject['importPageList']=importList;}if(this.pdfViewer.formFieldsModule){var fieldsData=this.pdfViewer.formFieldsModule.downloadFormFieldsData();// eslint-disable-next-line
jsonObject['fieldsData']=fieldsData;}var signatureData=this.signatureModule.saveSignature();// eslint-disable-next-line
jsonObject['signatureData']=signatureData;if(this.pdfViewer.isSignatureEditable){// eslint-disable-next-line
jsonObject['isSignatureEdited']=this.pdfViewer.isSignatureEditable;}if(this.isFreeTextAnnotationModule()){// eslint-disable-next-line max-len
var freeTextAnnotationCollection=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();// eslint-disable-next-line
jsonObject['freeTextAnnotation']=freeTextAnnotationCollection;}if(this.isInkAnnotationModule()){var inkSignatureData=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();// eslint-disable-next-line
jsonObject['inkSignatureData']=inkSignatureData;}// eslint-disable-next-line
jsonObject['action']='Download';// eslint-disable-next-line
jsonObject['elementId']=this.pdfViewer.dataId;if(this.pdfViewer.annotationModule){var annotationsPageList=this.getAnnotationsPageList();jsonObject['isAnnotationsExist']=this.isAnnotationsExist(jsonObject["textMarkupAnnotations"])||this.isAnnotationsExist(jsonObject["shapeAnnotations"])||this.isAnnotationsExist(jsonObject["measureShapeAnnotations"])||this.isAnnotationsExist(jsonObject["stampAnnotations"])||this.isAnnotationsExist(jsonObject["stickyNotesAnnotation"])||this.isAnnotationsExist(jsonObject["signatureData"])||this.isAnnotationsExist(jsonObject["freeTextAnnotation"])||this.isAnnotationsExist(jsonObject["inkSignatureData"])||annotationsPageList.length>0;jsonObject['annotationsPageList']=JSON.stringify(annotationsPageList);}if(this.pdfViewer.formFieldsModule){var formFieldsPageList=this.getFormFieldsPageList();jsonObject['isFormFieldAnnotationsExist']=this.isFieldsDataExist(jsonObject["fieldsData"])||formFieldsPageList.length>0;jsonObject['formFieldsPageList']=JSON.stringify(formFieldsPageList);}if(this.pdfViewer.annotationCollection){jsonObject['annotationCollection']=JSON.stringify(this.pdfViewer.annotationCollection);}return jsonObject;};/**
    * @private
    * @returns {boolean} - Returns whether annotation is present.
    */PdfViewerBase.prototype.isAnnotationsExist=function(annotationInfo){// eslint-disable-next-line max-len
return!sf.base.isNullOrUndefined(annotationInfo)?JSON.parse(annotationInfo).flat(1).length>0:false;};/**
     * @private
     * @returns {boolean} - Returns whether fields data is present.
     */PdfViewerBase.prototype.isFieldsDataExist=function(fieldsData){// eslint-disable-next-line max-len
return!sf.base.isNullOrUndefined(fieldsData)?Object.entries(JSON.parse(fieldsData)).length!==0:false;};/**
     * @private
     * @returns {boolean} - Returns annotations page number list.
     */PdfViewerBase.prototype.getAnnotationsPageList=function(){// eslint-disable-next-line max-len
var annotCollection=this.pdfViewer.annotationCollection.map(function(a){return a.pageNumber;});var annotActionCollection=this.pdfViewer.annotationModule.actionCollection.filter(function(value,index,self){return value.annotation.propName!=="formFields"&&value.annotation.formFieldAnnotationType==undefined;}).map(function(a){return a.pageIndex;});var fullPageList=annotCollection.concat(annotActionCollection);return fullPageList.filter(function(value,index,self){return self.indexOf(value)===index&&value!==undefined;});};/**
     * @private
     * @returns {boolean} - Returns form fields page number list.
     */PdfViewerBase.prototype.getFormFieldsPageList=function(){// eslint-disable-next-line max-len
var formFieldsCollection=this.pdfViewer.formFieldCollection.map(function(item){if(!sf.base.isNullOrUndefined(item.properties)){return item.properties.pageNumber;}else{return item.pageNumber+1;}});var annotActionCollection=!sf.base.isNullOrUndefined(this.pdfViewer.annotationModule)?this.pdfViewer.annotationModule.actionCollection.filter(function(value,index,self){return value.annotation.propName=="formFields"||value.annotation.formFieldAnnotationType!=undefined;}).map(function(a){return a.pageIndex;}):[];var fullPageList=formFieldsCollection.concat(annotActionCollection);return fullPageList.filter(function(value,index,self){return self.indexOf(value)===index&&value!==undefined;});};/**
     * @private
     * @param {string} annotationID - The annotationID.
     * @returns {any} - Returns collection of type.
     */ // eslint-disable-next-line
PdfViewerBase.prototype.checkFormFieldCollection=function(annotationID){var isFormFieldAnnotation=false;// eslint-disable-next-line
var formDesignerData=null;formDesignerData=this.getItemFromSessionStorage('_formDesigner');if(formDesignerData){// eslint-disable-next-line
var formFieldsData=JSON.parse(formDesignerData);for(var i=0;i<formFieldsData.length;i++){if(formFieldsData[i].FormField.formFieldAnnotationType==='RadioButton'){for(var j=0;j<formFieldsData[i].FormField.radiobuttonItem.length;j++){if(annotationID===formFieldsData[i].FormField.radiobuttonItem[j].id.split('_')[0]){isFormFieldAnnotation=true;break;}}}else if(formFieldsData[i].Key.split('_')[0]===annotationID){isFormFieldAnnotation=true;break;}}}return isFormFieldAnnotation;};/**
     * @private
     * @returns {boolean} - Returns whether freetext module is enabled.
     */PdfViewerBase.prototype.isFreeTextAnnotationModule=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule){return true;}else{return false;}}else{return false;}};// eslint-disable-next-line
PdfViewerBase.prototype.createRequestForDownload=function(){var proxy=null;proxy=this;proxy.pdfViewer.fireDownloadStart(proxy.downloadFileName);// eslint-disable-next-line
var jsonObject=this.constructJsonDownload();if(proxy.isDigitalSignaturePresent){if(proxy.pdfViewer.isDocumentEdited){jsonObject['digitalSignatureDocumentEdited']=true;}else{jsonObject['digitalSignatureDocumentEdited']=false;}}this.dowonloadRequestHandler=new AjaxHandler(this.pdfViewer);this.dowonloadRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.download;this.dowonloadRequestHandler.responseType='text';if(this.validateForm&&this.pdfViewer.enableFormFieldsValidation){this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);this.validateForm=false;}else{this.dowonloadRequestHandler.send(jsonObject);}// eslint-disable-next-line
this.dowonloadRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'&&data.indexOf('data:application/pdf')===-1){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.download);data=null;}if(_typeof(data)==='object'){data=JSON.parse(data);}if(data){if(proxy.pdfViewer.downloadFileName&&proxy.pdfViewer.downloadFileName!==proxy.downloadFileName){proxy.downloadFileName=proxy.pdfViewer.downloadFileName;}proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.download,data);var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/pdf');if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){window.navigator.msSaveOrOpenBlob(blobUrl,proxy.downloadFileName);}else{proxy.downloadDocument(blobUrl);}proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName,data);}proxy.updateDocumentAnnotationCollections();}else{proxy.pdfViewer.fireDownloadEnd(proxy.downloadFileName,'PDF Document saved in server side successfully');}};// eslint-disable-next-line
this.dowonloadRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.download);};// eslint-disable-next-line
this.dowonloadRequestHandler.onError=function(result){proxy.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.download);};};/**
     * @param pageWidth
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.getTileCount=function(pageWidth){if(pageWidth&&typeof pageWidth==='number'){var defaultWidth=816;var tileCount=1;if(this.getZoomFactor()>2&&pageWidth<=1200){tileCount=2;}else{tileCount=pageWidth/defaultWidth;}// eslint-disable-next-line radix
var tileValue=parseInt(tileCount.toFixed());if(tileValue<=0){return 1;}else{if(this.pdfViewer.tileRenderingSettings.enableTileRendering){return tileValue;}else{return 1;}}}else{return 1;}};PdfViewerBase.prototype.removeHyperlink=function(pageIndex){var pageDiv=this.getElement('_pageDiv_'+pageIndex);if(pageDiv){var aElement=pageDiv.getElementsByTagName('a');if(aElement.length!==0){for(var index=aElement.length-1;index>=0;index--){aElement[index].parentNode.removeChild(aElement[index]);}}}};PdfViewerBase.prototype.renderHyperlink=function(data,pageIndex){if(this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule){this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(data,pageIndex);}};PdfViewerBase.prototype.createRequestForRender=function(pageIndex){var proxy=null;proxy=this;var canvas=proxy.getElement('_pageCanvas_'+pageIndex);var oldCanvas=proxy.getElement('_oldCanvas_'+pageIndex);if(this.pageSize&&this.pageSize[pageIndex]){var pageWidth_1=this.pageSize[pageIndex].width;var pageHeight=this.pageSize[pageIndex].height;var tilecanvas=this.getElement('_pageCanvas_'+pageIndex);// eslint-disable-next-line
var viewPortWidth=1200;// On diving the value greater than 1200 we will get the tile count as 2.
// eslint-disable-next-line
var viewPortHeight=proxy.pdfViewer.element.clientHeight>0?proxy.pdfViewer.element.clientHeight:proxy.pdfViewer.element.style.height;// eslint-disable-next-line radix
viewPortWidth=parseInt(viewPortWidth);// eslint-disable-next-line radix
viewPortHeight=parseInt(viewPortHeight)?parseInt(viewPortHeight):500;//we have applied minimum-height as 500.
var noTileX=void 0;var noTileY=void 0;var tileCount=this.getTileCount(pageWidth_1);if(canvas){if(!isNaN(parseFloat(canvas.style.width))||oldCanvas){if(proxy.isInitialLoaded){proxy.showPageLoadingIndicator(pageIndex,false);}}// eslint-disable-next-line
var data=proxy.getLinkInformation(pageIndex);noTileX=noTileY=tileCount;var tileSettings=proxy.pdfViewer.tileRenderingSettings;if(tileSettings.enableTileRendering&&tileSettings.x>0&&tileSettings.y>0){if(viewPortWidth<pageWidth_1||this.getZoomFactor()>2){noTileX=tileSettings.x;noTileY=tileSettings.y;}}proxy.tileRequestCount=noTileX*noTileY;var zoomFactor=this.retrieveCurrentZoomFactor();var isPageRequestSent=void 0;if(tileCount===1){data=proxy.getLinkInformation(pageIndex);isPageRequestSent=proxy.pageRequestSent(pageIndex,0,0);}else{// eslint-disable-next-line
var tileData=proxy.getLinkInformation(pageIndex);if(tileData){data=tileData;}}if(data&&data.uniqueId===proxy.documentId){canvas.style.backgroundColor='#fff';if(proxy.pdfViewer.magnification&&proxy.pdfViewer.magnification.isPinchZoomed||!this.pageSize[pageIndex]){return;}var zoomFactor_2=this.retrieveCurrentZoomFactor();if(zoomFactor_2>2&&pageWidth_1<=1200){viewPortWidth=700;}else{viewPortWidth=1200;}if(!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){viewPortWidth=1200;}proxy.removeHyperlink(pageIndex);if(viewPortWidth>=pageWidth_1||!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){proxy.renderPage(data,pageIndex);proxy.renderHyperlink(data,pageIndex);}else{proxy.isTileImageRendered=true;proxy.tileRenderCount=0;proxy.tileRenderPage(data,pageIndex);proxy.renderHyperlink(data,pageIndex);for(var k=0;k<noTileX;k++){for(var l=0;l<noTileY;l++){if(k===0&&l===0){continue;}data=JSON.parse(this.getStoredTileImageDetails(pageIndex,k,l,zoomFactor_2));if(data){proxy.tileRenderPage(data,pageIndex);}}}}data=null;}else if(data===null||!isPageRequestSent){if(this.getPagesPinchZoomed()){proxy.showPageLoadingIndicator(pageIndex,false);}else{proxy.showPageLoadingIndicator(pageIndex,true);}if(proxy.getPagesZoomed()){if(proxy.isInitialLoaded){proxy.showPageLoadingIndicator(pageIndex,false);}}if(proxy.pdfViewer.magnification&&proxy.pdfViewer.magnification.isPinchZoomed){return;}if(!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){noTileX=1;noTileY=1;}proxy.tileRenderCount=0;proxy.isTileImageRendered=true;for(var x=0;x<noTileX;x++){for(var y=0;y<noTileY;y++){var jsonObject=null;var zoomFactor_3=this.retrieveCurrentZoomFactor();if(zoomFactor_3>2&&pageWidth_1<=1200){viewPortWidth=700;}else{viewPortWidth=1200;}if(!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){viewPortWidth=1200;}// eslint-disable-next-line max-len
jsonObject={xCoordinate:x,yCoordinate:y,viewPortWidth:viewPortWidth,viewPortHeight:viewPortHeight,pageNumber:pageIndex,hashId:proxy.hashId,tilecount:tileCount,tileXCount:noTileX,tileYCount:noTileY,// eslint-disable-next-line max-len
zoomFactor:zoomFactor_3,action:'RenderPdfPages',uniqueId:this.documentId,elementId:proxy.pdfViewer.element.id};if(this.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.jsonDocumentId;}proxy.pageRequestHandler=new AjaxHandler(this.pdfViewer);// eslint-disable-next-line max-len
proxy.pageRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.renderPages;proxy.pageRequestHandler.responseType='json';var hyperlinkId=proxy.documentId+'_'+pageIndex+'_hyperlinkAndLinkAnnotation';if(proxy.hyperlinkAndLinkAnnotation[hyperlinkId]){var data_1=JSON.parse(proxy.hyperlinkAndLinkAnnotation[hyperlinkId]);proxy.removeHyperlink(pageIndex);proxy.renderHyperlink(data_1,pageIndex);}else{proxy.pageRequestHandler.send(jsonObject);}proxy.requestLists.push(proxy.documentId+'_'+pageIndex+'_'+x+'_'+y+'_'+zoomFactor_3);// eslint-disable-next-line
proxy.pageRequestHandler.onSuccess=function(result){// eslint-disable-next-line max-len
if(proxy.pdfViewer.magnification&&proxy.pdfViewer.magnification.isPinchZoomed||!proxy.pageSize[pageIndex]){return;}// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.renderPages);data=null;}}}if(data){try{while(_typeof(data)!=='object'){data=JSON.parse(data);}}catch(error){data=null;}if(data&&data.uniqueId===proxy.documentId){var currentPageWidth=data.pageWidth&&data.pageWidth>0?data.pageWidth:pageWidth_1;proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages,data);var pageNumber=data.pageNumber!==undefined?data.pageNumber:pageIndex;var storeObject={hyperlinks:data['hyperlinks'],hyperlinkBounds:data['hyperlinkBounds'],linkAnnotation:data['linkAnnotation'],linkPage:data['linkPage'],annotationLocation:data['annotationLocation'],// eslint-disable-next-line
width:data['width'],rotation:data['rotation'],scaleFactor:data['scaleFactor'],uniqueId:data['uniqueId'],zoomFactor:data['zoomFactor'],// eslint-disable-next-line
hyperLinkBorderWidth:data["hyperLinkBorderWidth"],hyperLinkBorderColor:data["hyperLinkBorderColor"],textWebLinkBorderWidth:data["textWebLinkBorderWidth"],textWebLinkBorderColor:data["textWebLinkBorderColor"]};if(proxy.pageSize[pageNumber]){// eslint-disable-next-line
proxy.pageSize[pageNumber].rotation=parseFloat(data['rotation']);}proxy.removeHyperlink(pageNumber);proxy.hyperlinkAndLinkAnnotation[proxy.documentId+'_'+pageNumber+'_hyperlinkAndLinkAnnotation']=JSON.stringify(storeObject);proxy.renderHyperlink(data,pageNumber);}}};// eslint-disable-next-line
this.pageRequestHandler.onFailure=function(result){// eslint-disable-next-line max-len
proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.renderPages);};// eslint-disable-next-line
this.pageRequestHandler.onError=function(result){proxy.openNotificationPopup();// eslint-disable-next-line max-len
proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.renderPages);};var textDetailsId=proxy.documentId+'_'+pageIndex+'_textDetails';var isTextNeed=proxy.pageTextDetails?proxy.pageTextDetails[textDetailsId]?false:true:true;if(viewPortWidth>=pageWidth_1||!proxy.pdfViewer.tileRenderingSettings.enableTileRendering){if(sf.base.Browser.isDevice&&zoomFactor_3>1){zoomFactor_3=1;}this.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'renderPage',zoomFactor:zoomFactor_3,isTextNeed:isTextNeed,textDetailsId:textDetailsId});}else{this.showPageLoadingIndicator(pageIndex,true);this.blazorUIAdaptor.zoomDropDownElement.classList.add(this.blazorUIAdaptor.cssClass);this.blazorUIAdaptor.zoomInElement.classList.add(this.blazorUIAdaptor.cssClass);this.blazorUIAdaptor.zommOutElement.classList.add(this.blazorUIAdaptor.cssClass);this.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'renderImageAsTile',zoomFactor:zoomFactor_3,tileX:x,tileY:y,tileXCount:noTileX,tileYCount:noTileY,isTextNeed:isTextNeed,textDetailsId:textDetailsId});}}}}proxy.renderedPagesList.push(pageIndex);}}};PdfViewerBase.prototype.CommonOnMessage=function(event){switch(event.data.message){case'imageRendered':if(event.data.message==='imageRendered'){var canvas=document.createElement('canvas');var _a=event.data,value=_a.value,width=_a.width,height=_a.height,pageIndex=_a.pageIndex;canvas.width=width;canvas.height=height;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(width,height);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var textBounds=event.data.textBounds;var textContent=event.data.textContent;var pageText=event.data.pageText;var rotation=event.data.rotation;var characterBounds=event.data.characterBounds;var data={image:imageUrl,pageNumber:pageIndex,uniqueId:this.documentId,pageWidth:width,zoomFactor:event.zoomFactor};if(event.data.isTextNeed){data.textBounds=textBounds;data.textContent=textContent;data.rotation=rotation;data.pageText=pageText;this.storeTextDetails(pageIndex,textBounds,textContent,pageText,rotation,characterBounds);}else{var textDetails=JSON.parse(this.pageTextDetails[event.data.textDetailsId]);data.textBounds=textDetails.textBounds;data.textContent=textDetails.textContent;data.rotation=textDetails.rotation;data.pageText=textDetails.pageText;}if(data&&data.image&&data.uniqueId===this.documentId){var currentPageWidth=data.pageWidth&&data.pageWidth>0?data.pageWidth:event.pageWidth;this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,data);var pageNumber=data.pageNumber!==undefined?data.pageNumber:pageIndex;var blobObj=this.createBlobUrl(data.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:data.pageWidth,uniqueId:data.uniqueId,zoomFactor:data.zoomFactor};this.storeImageData(pageNumber,storeObject);this.renderPage(data,pageNumber);}}break;case'renderTileImage':if(event.data.message==='renderTileImage'){var canvas=document.createElement('canvas');var _b=event.data,value=_b.value,w=_b.w,h=_b.h,noTileX=_b.noTileX,noTileY=_b.noTileY,x=_b.x,y=_b.y,pageIndex=_b.pageIndex;canvas.setAttribute('height',h);canvas.setAttribute('width',w);canvas.width=w;canvas.height=h;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(w,h);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var tileWidth=w;var tileHeight=h;var textBounds=event.data.textBounds;var textContent=event.data.textContent;var pageText=event.data.pageText;var rotation=event.data.rotation;var characterBounds=event.data.characterBounds;var tileData={image:imageUrl,noTileX:noTileX,noTileY:noTileY,pageNumber:pageIndex,tileX:x,tileY:y,uniqueId:this.documentId,pageWidth:event.pageWidth,width:tileWidth,transformationMatrix:{Values:[1,0,0,1,tileWidth*x,tileHeight*y,0,0,0]},zoomFactor:this.retrieveCurrentZoomFactor()};if(tileData&&tileData.image&&tileData.uniqueId===this.documentId){var currentPageWidth=tileData.pageWidth&&tileData.pageWidth>0?tileData.pageWidth:event.pageWidth;this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,tileData);var pageNumber=tileData.pageNumber!==undefined?tileData.pageNumber:pageIndex;if(x==0&&y==0){var blobObj=this.createBlobUrl(tileData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:tileData.pageWidth,uniqueId:tileData.uniqueId,tileX:tileData.tileX,tileY:tileData.tileY,zoomFactor:tileData.zoomFactor};if(event.data.isTextNeed){tileData.textBounds=textBounds;tileData.textContent=textContent;tileData.rotation=rotation;tileData.pageText=pageText;this.storeTextDetails(pageIndex,textBounds,textContent,pageText,rotation,characterBounds);}else{var textDetails=JSON.parse(this.pageTextDetails[event.data.textDetailsId]);tileData.textBounds=textDetails.textBounds;tileData.textContent=textDetails.textContent;tileData.rotation=textDetails.rotation;tileData.pageText=textDetails.pageText;}this.storeImageData(pageNumber,storeObject,tileData.tileX,tileData.tileY);}else{var blobObj=this.createBlobUrl(tileData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:tileData.pageWidth,uniqueId:tileData.uniqueId,tileX:tileData.tileX,tileY:tileData.tileY,zoomFactor:tileData.zoomFactor};this.storeImageData(pageNumber,storeObject,tileData.tileX,tileData.tileY);}this.tileRenderPage(tileData,pageNumber);}}break;case'renderThumbnail':this.pdfViewer.thumbnailViewModule.thumbnailOnmessage(event);break;case'printImage':this.pdfViewer.printModule.printOnmessage(event);break;case'PageLoaded':this.pdfViewer.viewerBase.PageloadedOnMessage(event);break;case'loaded':this.pdfViewer.LoadedOnMessage(event);break;default:console.log('Unknown message type:',event.data.message);}};PdfViewerBase.prototype.pageRequestSent=function(pageIndex,tileX,tileY){var zoomFactor=this.retrieveCurrentZoomFactor();var currentString=this.documentId+'_'+pageIndex+'_'+tileX+'_'+tileY+'_'+zoomFactor;if(this.requestLists&&this.requestLists.indexOf(currentString)>-1){return true;}return false;};/**
     * @private
     * @param {string} status - The status message.
     * @param {string} errorMessage - The error message.
     * @param {string} action - The action.
     * @returns {void}
     */PdfViewerBase.prototype.onControlError=function(status,errorMessage,action){this.openNotificationPopup();this.pdfViewer.fireAjaxRequestFailed(status,errorMessage,action);};/**
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.getStoredData=function(pageIndex,isTextSearch){var zoomFactor=this.retrieveCurrentZoomFactor();if(this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering){zoomFactor=1;}// eslint-disable-next-line
var storedData=this.getWindowSessionStorage(pageIndex,zoomFactor)?this.getWindowSessionStorage(pageIndex,zoomFactor):this.getPinchZoomPage(pageIndex);if(!storedData&&isTextSearch){// eslint-disable-next-line
var storedTileData=this.getStoredTileImageDetails(pageIndex,0,0,zoomFactor);if(storedTileData){storedData=storedTileData;}}// eslint-disable-next-line
var data=null;if(storedData){// eslint-disable-next-line
data=storedData;if(!this.isPinchZoomStorage){data=JSON.parse(storedData);}this.isPinchZoomStorage=false;}return data;};/**
     * @private
     * @param  {any} data - The data.
     * @param {number} pageIndex - The pageIndex.
     * @param {number} tileX - The tileX.
     * @param {number} tileY - The tileY.
     * @returns {void}
     */ // eslint-disable-next-line
PdfViewerBase.prototype.storeWinData=function(data,pageIndex,tileX,tileY){// eslint-disable-next-line
var blobObj=this.createBlobUrl(data['image'].split('base64,')[1],'image/png');// eslint-disable-next-line
var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);// eslint-disable-next-line
var storeObject;if(isNaN(tileX)&&isNaN(tileY)||tileX===0&&tileY===0){storeObject={// eslint-disable-next-line
image:blobUrl,transformationMatrix:data['transformationMatrix'],hyperlinks:data['hyperlinks'],hyperlinkBounds:data['hyperlinkBounds'],linkAnnotation:data['linkAnnotation'],linkPage:data['linkPage'],annotationLocation:data['annotationLocation'],// eslint-disable-next-line
textContent:data['textContent'],width:data['width'],textBounds:data['textBounds'],pageText:data['pageText'],rotation:data['rotation'],scaleFactor:data['scaleFactor'],uniqueId:data['uniqueId'],zoomFactor:data['zoomFactor'],tileX:tileX,tileY:tileY,// eslint-disable-next-line
hyperLinkBorderWidth:data["hyperLinkBorderWidth"],hyperLinkBorderColor:data["hyperLinkBorderColor"],textWebLinkBorderWidth:data["textWebLinkBorderWidth"],textWebLinkBorderColor:data["textWebLinkBorderColor"]};if(this.pageSize[pageIndex]){// eslint-disable-next-line
this.pageSize[pageIndex].rotation=parseFloat(data['rotation']);}// eslint-disable-next-line
this.textLayer.characterBound[pageIndex]=data['characterBounds'];}else{storeObject={// eslint-disable-next-line
image:blobUrl,transformationMatrix:data['transformationMatrix'],tileX:tileX,tileY:tileY,width:data['width'],zoomFactor:data['zoomFactor']};}// eslint-disable-next-line
var pageWidth=0;if(this.pageSize[pageIndex]){pageWidth=this.pageSize[pageIndex].width;}this.manageSessionStorage(pageIndex,storeObject,tileX,tileY);};/**
     * @private
     * @param {XMLHttpRequest} request - The Xml request.
     * @returns {void}
     */PdfViewerBase.prototype.setCustomAjaxHeaders=function(request){for(var i=0;i<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;i++){// eslint-disable-next-line max-len
request.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);}};/**
     * @private
     * @param {number} pageIndex - Page index.
     * @returns {object}
     */PdfViewerBase.prototype.getPinchZoomPage=function(pageIndex){// eslint-disable-next-line
for(var key in this.pinchZoomStorage){// eslint-disable-next-line
if(this.pinchZoomStorage.hasOwnProperty(key)){if(this.pinchZoomStorage[key].index===pageIndex){this.isPinchZoomStorage=true;return this.pinchZoomStorage[key].pinchZoomStorage;}}}return null;};/**
     * @private
     * @param {number} pageIndex - current page index.
     * @param {number} zoomFactor - cuurent zoom factor
     * @returns {string}
     */PdfViewerBase.prototype.getWindowSessionStorage=function(pageIndex,zoomFactor){return window.sessionStorage.getItem(this.documentId+'_'+pageIndex+'_'+zoomFactor);};/**
     * @private
     * @param {number} pageIndex - current page index.
     * @param {number} tileX - cuurent tile x
     * @param {number} tileY - cuurent tile y
     * @param {number} zoomFactor - cuurent zoom factor
     * @returns {string}
     */PdfViewerBase.prototype.getStoredTileImageDetails=function(pageIndex,tileX,tileY,zoomFactor){return this.pageImageDetails[this.documentId+'_'+pageIndex+'_'+tileX+'_'+tileY+'_'+zoomFactor+'_imageUrl'];};/**
     * @private
     * @returns {number}
     */PdfViewerBase.prototype.retrieveCurrentZoomFactor=function(){var zoomFactor=this.getZoomFactor();if(this.pdfViewer.enableZoomOptimization){if(zoomFactor<=1){zoomFactor=1;}else if(zoomFactor>1&&zoomFactor<=2){zoomFactor=2;}else if(zoomFactor>2&&zoomFactor<=3){zoomFactor=3;}else if(zoomFactor>3&&zoomFactor<=4){zoomFactor=4;}return zoomFactor;}else{if(zoomFactor<=0){zoomFactor=1;}return zoomFactor;}};PdfViewerBase.prototype.storeTextDetails=function(pageNumber,textBounds,textContent,pageText,rotation,characterBounds){var textObject={textBounds:textBounds,textContent:textContent,rotation:rotation,pageText:pageText};if(this.pageSize[pageNumber]){this.pageSize[pageNumber].rotation=rotation;}this.textLayer.characterBound[pageNumber]=characterBounds;this.pageTextDetails[this.documentId+'_'+pageNumber+'_textDetails']=JSON.stringify(textObject);};PdfViewerBase.prototype.storeImageData=function(pageNumber,storeObject,tileX,tileY){var zoomFactor=this.retrieveCurrentZoomFactor();if(isNaN(tileX)&&isNaN(tileY)){this.pageImageDetails[this.documentId+'_'+pageNumber+'_'+zoomFactor+'_imageUrl']=JSON.stringify(storeObject);}else{this.pageImageDetails[this.documentId+'_'+pageNumber+'_'+tileX+'_'+tileY+'_'+zoomFactor+'_imageUrl']=JSON.stringify(storeObject);}};// eslint-disable-next-line
PdfViewerBase.prototype.manageSessionStorage=function(pageIndex,storeObject,tileX,tileY){// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);var maxSessionSize=5000;if(sessionSize>=maxSessionSize){if(!this.isStorageExceed){// eslint-disable-next-line
var annotationList=[];for(var i=0;i<window.sessionStorage.length;i++){if(window.sessionStorage.key(i)&&window.sessionStorage.key(i).split('_')[3]){if(window.sessionStorage.key(i).split('_')[3]==='annotations'){// eslint-disable-next-line max-len
this.annotationStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i));annotationList.push(window.sessionStorage.key(i));}}}if(annotationList){for(var i=0;i<annotationList.length;i++){window.sessionStorage.removeItem(annotationList[i]);}}}this.isStorageExceed=true;sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);if(sessionSize>=5000){var storageLength=window.sessionStorage.length;if(storageLength>200){storageLength=200;}for(var i=0;i<storageLength;i++){if(window.sessionStorage.key(i)&&window.sessionStorage.key(i).split('_')[3]){if(window.sessionStorage.key(i).split('_')[3]!=='annotations'){window.sessionStorage.removeItem(window.sessionStorage.key(i));}}}}}var zoomFactor=this.retrieveCurrentZoomFactor();if(isNaN(tileX)&&isNaN(tileY)){// eslint-disable-next-line max-len
window.sessionStorage.setItem(this.documentId+'_'+pageIndex+'_'+zoomFactor+'_imageUrl',JSON.stringify(storeObject));this.sessionStorage.push(this.documentId+'_'+pageIndex+'_'+zoomFactor+'_imageUrl');}else{this.sessionStorage.push(this.documentId+'_'+pageIndex+'_'+tileX+'_'+tileY+'_'+zoomFactor+'_imageUrl');// eslint-disable-next-line max-len
window.sessionStorage.setItem(this.documentId+'_'+pageIndex+'_'+tileX+'_'+tileY+'_'+zoomFactor+'_imageUrl',JSON.stringify(storeObject));}};PdfViewerBase.prototype.createBlobUrl=function(base64String,contentType){var sliceSize=512;var byteCharacters=atob(base64String);// eslint-disable-next-line
var byteArrays=[];for(var offset=0;offset<byteCharacters.length;offset+=sliceSize){var slice=byteCharacters.slice(offset,offset+sliceSize);// eslint-disable-next-line
var byteNumbers=new Array(slice.length);for(var i=0;i<slice.length;i++){byteNumbers[i]=slice.charCodeAt(i);}// eslint-disable-next-line
var byteArray=new Uint8Array(byteNumbers);byteArrays.push(byteArray);}// eslint-disable-next-line
var blob=new Blob(byteArrays,{type:contentType});return blob;};PdfViewerBase.prototype.getRandomNumber=function(){// eslint-disable-next-line
return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){// eslint-disable-next-line
var random=Math.random()*16|0;return random.toString(16);});};PdfViewerBase.prototype.createGUID=function(){// eslint-disable-next-line max-len
return'Sync_PdfViewer_'+this.getRandomNumber();};/**
     * @private
     * @param {MouseEvent} event - The mouse event.
     * @param {boolean} isNeedToSet - Is need to test.
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.isClickedOnScrollBar=function(event,isNeedToSet){var isScrollBar=false;if(isNeedToSet){this.setScrollDownValue(event.type,false);}// eslint-disable-next-line max-len
if(this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<event.clientX&&event.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft){isScrollBar=true;if(isNeedToSet){this.setScrollDownValue(event.type,true);}}// eslint-disable-next-line max-len
if(this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<event.clientY&&event.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop){isScrollBar=true;if(isNeedToSet){this.setScrollDownValue(event.type,true);}}return isScrollBar;};PdfViewerBase.prototype.setScrollDownValue=function(eventType,boolValue){if(eventType==='mousedown'){this.isScrollbarMouseDown=boolValue;}};/**
     * @private
     * @returns {void}
     */PdfViewerBase.prototype.disableTextSelectionMode=function(){this.isTextSelectionDisabled=true;this.viewerContainer.classList.remove('e-enable-text-selection');if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.clearTextSelection();}this.viewerContainer.classList.add('e-disable-text-selection');this.viewerContainer.addEventListener('selectstart',function(){return false;});};/**
     * @private
     * @param {string} idString - The Id string.
     * @returns {HTMLElement} - The html element.
     */PdfViewerBase.prototype.getElement=function(idString){return document.getElementById(this.pdfViewer.dataId+idString);};/**
     * @private
     * @param {number} pageIndex - The pageIndex
     * @returns {number} - Returns number
     */PdfViewerBase.prototype.getPageWidth=function(pageIndex){if(this.pageSize[pageIndex]){return this.pageSize[pageIndex].width*this.getZoomFactor();}else{return 0;}};/**
     * @private
     * @param {number} pageIndex - The pageIndex
     * @returns {number} - Returns number
     */PdfViewerBase.prototype.getPageHeight=function(pageIndex){if(this.pageSize[pageIndex]){return this.pageSize[pageIndex].height*this.getZoomFactor();}else{return 0;}};/**
     * @private
     * @param {number} pageIndex - The pageIndex.
     * @returns {number} - Returns number
     */PdfViewerBase.prototype.getPageTop=function(pageIndex){if(this.pageSize[pageIndex]){return this.pageSize[pageIndex].top*this.getZoomFactor();}else{return 0;}};PdfViewerBase.prototype.isAnnotationToolbarHidden=function(){if(this.pdfViewer.toolbarModule.annotationToolbarModule){return this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden;}else{return true;}};/**
     * @private
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.getTextMarkupAnnotationMode=function(){if(this.isTextMarkupAnnotationModule()){return this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode;}else{return false;}};PdfViewerBase.prototype.isNewFreeTextAnnotation=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule){if(!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot){return true;}else{return false;}}else{return true;}};PdfViewerBase.prototype.getCurrentTextMarkupAnnotation=function(){if(this.isTextMarkupAnnotationModule()){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {number} - Returns page number.
     */PdfViewerBase.prototype.getSelectTextMarkupCurrentPage=function(){if(this.isTextMarkupAnnotationModule()){return this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;}else{return null;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.getAnnotationToolStatus=function(){if(this.pdfViewer.toolbarModule){return this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled();}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.getPopupNoteVisibleStatus=function(){if(this.pdfViewer.annotationModule){return this.pdfViewer.annotationModule.isPopupNoteVisible;}else{return false;}};/**
     * @private
     * @returns {TextMarkupAnnotation} - TextMarkupAnnotation.
     */PdfViewerBase.prototype.isTextMarkupAnnotationModule=function(){if(this.pdfViewer.annotationModule){return this.pdfViewer.annotationModule.textMarkupAnnotationModule;}else{return null;}};/**
     * @private
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.isShapeAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.shapeAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isCalibrateAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.measureAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isStampAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isInkAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.inkAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isCommentAnnotationModule=function(){if(this.pdfViewer.annotation){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule){return true;}else{return false;}}else{return false;}};/**
     * @private
     * @returns {boolean} - Retunrs true or false.
     */PdfViewerBase.prototype.isShapeBasedAnnotationsEnabled=function(){// eslint-disable-next-line max-len
if(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule()||this.isStampAnnotationModule()||this.isCommentAnnotationModule()){return true;}else{return false;}};/**
     * @private
     * @param {MouseEvent | PointerEvent | TouchEvent} e - Returns event.
     * @returns {PointModel} - Returns points.
     */PdfViewerBase.prototype.getMousePosition=function(e){var touchArg;var offsetX;var offsetY;if(e.type.indexOf('touch')!==-1){touchArg=e;if(this.pdfViewer.annotation){var pageDiv=this.getElement('_pageDiv_'+this.pdfViewer.annotation.getEventPageNumber(e));if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();offsetX=touchArg.changedTouches[0].clientX-pageCurrentRect.left;offsetY=touchArg.changedTouches[0].clientY-pageCurrentRect.top;}}}else{if(e.target.classList.contains('e-pv-hyperlink')){offsetX=e.offsetX+e.target.offsetLeft;offsetY=e.offsetY+e.target.offsetTop;}else if((e.target.classList.contains('e-pv-text')||e.target.classList.contains('e-pdfviewer-formFields')&&e.target.attributes[0].nodeValue!="text"||e.target.classList.contains('e-pdfviewer-signatureformfields'))&&e.target.parentElement){var targetParentRect=e.target.parentElement.getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;// eslint-disable-next-line
}else if(e.target.classList.contains('e-pdfviewer-formFields')&&e.target.attributes[0].nodeValue=="text"){var targetParentRect=e.target.parentElement.parentElement.getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;// eslint-disable-next-line
}else if(e.target&&e&&e.path&&e.target.parentElement&&e.target.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=e.path[4].getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;// eslint-disable-next-line
}else if(e.target&&e&&e.path&&e.target.parentElement&&e.target.parentElement.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=e.path[4].getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;}else if(e.target&&e.target.parentElement&&e.target.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();offsetX=e.clientX-targetParentRect.left;offsetY=e.clientY-targetParentRect.top;// eslint-disable-next-line
}else{offsetX=e.offsetX;offsetY=e.offsetY;}}return{x:offsetX,y:offsetY};};PdfViewerBase.prototype.getMouseEventArgs=function(position,args,evt,source){args.position=position;var obj;if(!source){if(this.action==='Drag'||this.action==='ConnectorSourceEnd'||this.action==='SegmentEnd'||this.action==='OrthoThumb'||this.action==='BezierSourceThumb'||this.action==='BezierTargetThumb'||this.action==='ConnectorTargetEnd'||this.action.indexOf('Rotate')!==-1||this.action.indexOf('Resize')!==-1){obj=this.pdfViewer.selectedItems;if(this.action==='Drag'&&obj&&this.pdfViewer.selectedItems.annotations.length>0){obj=findActiveElement(evt,this,this.pdfViewer);}else if(this.action==='Drag'&&obj&&this.pdfViewer.selectedItems.formFields.length>0){obj=findActiveElement(evt,this,this.pdfViewer);}}else{obj=findActiveElement(evt,this,this.pdfViewer);}}else{//   objects = this.diagram.findObjectsUnderMouse(this.currentPosition, source);
obj=findActiveElement(evt,this,this.pdfViewer);}var wrapper;if(obj){wrapper=obj.wrapper;}if(!source){args.source=obj;args.sourceWrapper=wrapper;}else{args.target=obj;args.targetWrapper=wrapper;}args.actualObject=this.eventArgs.actualObject;//args.startTouches = this.touchStartList;
//args.moveTouches = this.touchMoveList;
return args;};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - The object.
     * @param {PointModel} position - The position.
     * @returns {Actions | string} - Returns the string.
     */PdfViewerBase.prototype.findToolToActivate=function(obj,position){position={x:position.x/this.getZoomFactor(),y:position.y/this.getZoomFactor()};var element=this.pdfViewer.selectedItems.wrapper;if(element&&obj){var selectorBnds=element.bounds;//let handle: SelectorModel = diagram.selectedItems;
var paddedBounds=new sf.drawings.Rect(selectorBnds.x,selectorBnds.y,selectorBnds.width,selectorBnds.height);if(obj.shapeAnnotationType==='Line'||obj.shapeAnnotationType==='LineWidthArrowHead'||obj.shapeAnnotationType==='Distance'||obj.shapeAnnotationType==='Polygon'){var conn=this.pdfViewer.selectedItems.annotations[0];if(conn){for(var i=0;i<conn.vertexPoints.length;i++){if(sf.drawings.contains(position,conn.vertexPoints[i],10)&&conn.leaderHeight!==0){return'ConnectorSegmentPoint_'+i;}}}}if(obj.shapeAnnotationType==='Distance'){var leaderCount=0;var newPoint1=void 0;if(obj&&obj.wrapper){for(var i=0;i<obj.wrapper.children.length;i++){var elementAngle=sf.drawings.Point.findAngle(obj.sourcePoint,obj.targetPoint);// eslint-disable-next-line
var segment=obj.wrapper.children[i];if(segment.id.indexOf('leader')>-1){var centerPoint=obj.wrapper.children[0].bounds.center;if(leaderCount===0){newPoint1={x:obj.sourcePoint.x,y:obj.sourcePoint.y-obj.leaderHeight};centerPoint=obj.sourcePoint;}else{newPoint1={x:obj.targetPoint.x,y:obj.targetPoint.y-obj.leaderHeight};centerPoint=obj.targetPoint;}var matrix_1=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix_1,elementAngle,centerPoint.x,centerPoint.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix_1,{x:newPoint1.x,y:newPoint1.y});if(sf.drawings.contains(position,rotatedPoint,10)){return'Leader'+leaderCount;}leaderCount++;}}}}var ten=10/this.getZoomFactor();var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,obj.rotateAngle+element.parentTransform,element.offsetX,element.offsetY);//check for resizing tool
var x=element.offsetX-element.pivot.x*element.actualSize.width;var y=element.offsetY-element.pivot.y*element.actualSize.height;var rotateThumb={x:x+(element.pivot.x===0.5?element.pivot.x*2:element.pivot.x)*element.actualSize.width/2,y:y-30/this.getZoomFactor()};rotateThumb=sf.drawings.transformPointByMatrix(matrix,rotateThumb);if(obj.shapeAnnotationType==='Stamp'&&sf.drawings.contains(position,rotateThumb,ten)){return'Rotate';}paddedBounds=this.inflate(ten,paddedBounds);if(paddedBounds.containsPoint(position,0)){var action=this.checkResizeHandles(this.pdfViewer,element,position,matrix,x,y);if(action){return action;}}if(this.pdfViewer.selectedItems.annotations.indexOf(obj)>-1){return'Drag';}else if(this.pdfViewer.selectedItems.formFields.indexOf(obj)>-1&&this.pdfViewer.designerMode){return'Drag';}return'Select';}return this.pdfViewer.tool||'Select';};PdfViewerBase.prototype.inflate=function(padding,bound){bound.x-=padding;bound.y-=padding;bound.width+=padding*2;bound.height+=padding*2;return bound;};PdfViewerBase.prototype.checkResizeHandles=function(diagram,element,position,matrix,x,y){var action;if(!action){action=this.checkForResizeHandles(diagram,element,position,matrix,x,y);}if(action){return action;}return null;};PdfViewerBase.prototype.checkForResizeHandles=function(diagram,element,position,matrix,x,y){var forty=40/1;var ten=10/1;if(element.actualSize.width<40||element.actualSize.height<40){ten=5*this.getZoomFactor()/1;}var selectedItems=diagram.selectedItems;var isStamp=false;var isSticky=false;var isNodeShape=false;var isInk=false;var resizerLocation=this.pdfViewer.annotationSelectorSettings.resizerLocation;if(resizerLocation<1||resizerLocation>3){resizerLocation=3;}// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Stamp'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Image'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage')){isStamp=true;}// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='StickyNotes'){isSticky=true;}// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ink'){isInk=true;}// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ellipse'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Radius'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Rectangle')){isNodeShape=true;}if(!isSticky){// eslint-disable-next-line max-len
if(isInk||isStamp||this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage')||element.actualSize.width>=forty&&element.actualSize.height>=forty&&isNodeShape&&(resizerLocation===1||resizerLocation===3)){if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width,y:y+element.actualSize.height}),ten)){return'ResizeSouthEast';}if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x,y:y+element.actualSize.height}),ten)){return'ResizeSouthWest';}if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width,y:y}),ten)){return'ResizeNorthEast';}if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x,y:y}),ten)){return'ResizeNorthWest';}}// eslint-disable-next-line max-len
if(isInk||!isNodeShape||isNodeShape&&(resizerLocation===2||resizerLocation===3||!(element.actualSize.width>=forty&&element.actualSize.height>=forty)&&resizerLocation===1)){if(sf.drawings.contains(// eslint-disable-next-line max-len
position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width,y:y+element.actualSize.height/2}),ten)&&!isStamp){return'ResizeEast';}// eslint-disable-next-line max-len
if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x,y:y+element.actualSize.height/2}),ten)&&!isStamp){return'ResizeWest';}if(sf.drawings.contains(// eslint-disable-next-line max-len
position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width/2,y:y+element.actualSize.height}),ten)&&!isStamp){return'ResizeSouth';}// eslint-disable-next-line max-len
if(sf.drawings.contains(position,sf.drawings.transformPointByMatrix(matrix,{x:x+element.actualSize.width/2,y:y}),ten)&&!isStamp){return'ResizeNorth';}}}return null;};/**
     * @private
     * @param {string} fieldID - The fieldID
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.checkSignatureFormField=function(fieldID){var isFormFieldSign=false;// eslint-disable-next-line
var formField=this.pdfViewer.nameTable[fieldID];if(formField){if(formField.formFieldAnnotationType==='SignatureField'||formField.formFieldAnnotationType==='InitialField'||formField.annotName==='SignatureField'){isFormFieldSign=true;}}return isFormFieldSign;};/**
     * @private
     * @param {MouseEvent | TouchEvent} evt - The event.
     * @returns {void}
     */PdfViewerBase.prototype.diagramMouseMove=function(evt){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);this.currentPosition=this.getMousePosition(evt);this.pdfViewer.firePageMouseover(this.currentPosition.x,this.currentPosition.y);if(this.pdfViewer.annotation){this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(evt);}var obj=findActiveElement(evt,this,this.pdfViewer);if(this.tool instanceof NodeDrawingTool||this.tool instanceof LineTool){obj=this.pdfViewer.drawingObject;}var target;var isFormFieldSign=this.pdfViewer.selectedItems.annotations.length>0?this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id):false;if(sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false||this.inAction){if(this.isMouseDown===false){this.eventArgs={};var sourceDrawingElement=null;if(obj){this.tool=this.getTool(this.action);if(obj.wrapper){sourceDrawingElement=obj.wrapper.children[0];if(sourceDrawingElement){target=obj;}}}var eventTarget=evt.target;this.action=this.findToolToActivate(obj,this.currentPosition);// eslint-disable-next-line
if(obj&&obj.annotationSettings&&obj.annotationSettings.isLock){if(this.action==='Select'){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Select',obj)){this.action='';}}if(this.action==='Drag'){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Move',obj)){this.action='Select';}}// eslint-disable-next-line max-len
if(this.action==='ResizeSouthEast'||this.action==='ResizeNorthEast'||this.action==='ResizeNorthWest'||this.action==='ResizeSouthWest'||// eslint-disable-next-line max-len
this.action==='ResizeNorth'||this.action==='ResizeWest'||this.action==='ResizeEast'||this.action==='ResizeSouth'||this.action.includes('ConnectorSegmentPoint')||this.action.includes('Leader')){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize',obj)){this.action='Select';}}}// eslint-disable-next-line max-len
if(!this.pdfViewer.designerMode&&(!sf.base.isNullOrUndefined(target)&&!sf.base.isNullOrUndefined(target.formFieldAnnotationType)||isFormFieldSign)){if(this.action==='ResizeSouthEast'||this.action==='ResizeNorthEast'||this.action==='ResizeNorthWest'||this.action==='ResizeSouthWest'||// eslint-disable-next-line max-len
this.action==='ResizeNorth'||this.action==='Drag'||this.action==='ResizeWest'||this.action==='ResizeEast'||this.action==='ResizeSouth'||this.action.includes('ConnectorSegmentPoint')||this.action.includes('Leader')){this.action='';}}this.tool=this.getTool(this.action);this.setCursor(eventTarget,evt);if(this.pdfViewer.linkAnnotationModule){this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(eventTarget,evt,this);}}else{if(!this.tool&&this.action&&this.action==='Rotate'){this.tool=this.getTool(this.action);if(evt.target){this.setCursor(evt.target,evt);}}// eslint-disable-next-line max-len
if(!this.pdfViewer.designerMode&&(!sf.base.isNullOrUndefined(target)&&!sf.base.isNullOrUndefined(target.formFieldAnnotationType)||isFormFieldSign)){if(this.action==='ResizeSouthEast'||this.action==='ResizeNorthEast'||this.action==='ResizeNorthWest'||this.action==='ResizeSouthWest'||// eslint-disable-next-line max-len
this.action==='ResizeNorth'||this.action==='Drag'||this.action==='ResizeWest'||this.action==='ResizeEast'||this.action==='ResizeSouth'||this.action.includes('ConnectorSegmentPoint')||this.action.includes('Leader')){this.action='';this.tool=null;}}if(this.eventArgs&&this.eventArgs.source){var eventTarget=evt.target;this.updateDefaultCursor(this.eventArgs.source,eventTarget,evt);}else{this.setCursor(evt.target,evt);}this.diagramMouseActionHelper(evt);if(this.tool){var currentObject=obj;if(currentObject&&currentObject.shapeAnnotationType==='FreeText'){if(this.pdfViewer.freeTextSettings.allowEditTextOnly&&this.action!=="Ink"&&this.eventArgs.source&&this.eventArgs.source.shapeAnnotationType==="FreeText"){var eventTarget=event.target;eventTarget.style.cursor='default';this.tool=null;}}if(this.tool!=null){this.tool.mouseMove(this.eventArgs);}}}this.prevPosition=this.currentPosition;}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};// eslint-disable-next-line
PdfViewerBase.prototype.updateDefaultCursor=function(source,target,event){// eslint-disable-next-line max-len
if(source&&source.pageIndex!==undefined&&source.pageIndex!==this.activeElements.activePageID&&target){// eslint-disable-next-line
this.isPanMode?target.style.cursor='grab':target.style.cursor='default';}else{this.setCursor(target,event);}};/**
     * @private
     * @param {MouseEvent | TouchEvent} evt - The event.
     * @returns {void}
     */PdfViewerBase.prototype.diagramMouseLeave=function(evt){this.currentPosition=this.getMousePosition(evt);if(this.pdfViewer.annotation){this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(evt);}var shapeElement=findActiveElement(evt,this,this.pdfViewer);var mouseMoveforce=false;if(sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false||this.inAction){if(this.isMouseDown===false||mouseMoveforce){this.eventArgs={};var sourceElement=null;if(shapeElement){sourceElement=shapeElement.wrapper.children[0];mouseMoveforce=false;}}else{this.diagramMouseActionHelper(evt);// eslint-disable-next-line max-len
if(this.tool&&this.action!=='Drag'&&this.pdfViewer.tool!=='Stamp'&&this.tool.currentElement&&this.tool.currentElement.shapeAnnotationType!=='Stamp'){this.tool.mouseLeave(this.eventArgs);this.tool=null;if(this.pdfViewer.annotation){this.pdfViewer.annotationModule.renderAnnotations(this.previousPage,null,null,null);}}}this.prevPosition=this.currentPosition;}};PdfViewerBase.prototype.diagramMouseActionHelper=function(evt){this.eventArgs.position=this.currentPosition;if(this.action==='Drag'&&this.eventArgs.source instanceof Selector){this.getMouseEventArgs(this.currentPosition,this.eventArgs,evt);}this.getMouseEventArgs(this.currentPosition,this.eventArgs,evt,this.eventArgs.source);this.inAction=true;this.initialEventArgs=null;};// eslint-disable-next-line
PdfViewerBase.prototype.setCursor=function(eventTarget,event){// eslint-disable-next-line max-len
var freeTextAnnotModule=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.freeTextAnnotationModule:null;var cursorType;if(this.tool instanceof ResizeTool){if(this.tool.corner==='ResizeNorthWest'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'nw-resize':cursorType;}else if(this.tool.corner==='ResizeNorthEast'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'ne-resize':cursorType;}else if(this.tool.corner==='ResizeSouthWest'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'sw-resize':cursorType;}else if(this.tool.corner==='ResizeSouthEast'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'se-resize':cursorType;}else if(this.tool.corner==='ResizeNorth'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'n-resize':cursorType;}else if(this.tool.corner==='ResizeWest'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'w-resize':cursorType;}else if(this.tool.corner==='ResizeEast'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'e-resize':cursorType;}else if(this.tool.corner==='ResizeSouth'){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'s-resize':cursorType;}}else if(this.isCommentIconAdded&&this.isAddComment){eventTarget.style.cursor='crosshair';}else if(this.pdfViewer.enableHandwrittenSignature&&this.isNewSignatureAdded&&this.tool instanceof StampTool){eventTarget.style.cursor='crosshair';}else if(this.tool instanceof MoveTool){eventTarget.style.cursor='move';// eslint-disable-next-line max-len
}else if(this.tool instanceof NodeDrawingTool||this.tool instanceof LineTool||this.tool instanceof PolygonDrawingTool||freeTextAnnotModule&&freeTextAnnotModule.isNewAddedAnnot||this.tool instanceof InkDrawingTool){eventTarget.style.cursor='crosshair';}else if(this.tool instanceof ConnectTool){if(this.tool.endPoint&&this.tool.endPoint.indexOf('Leader0')){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'nw-resize':cursorType;}else if(this.tool.endPoint&&this.tool.endPoint.indexOf('Leader1')){cursorType=this.setResizerCursorType();eventTarget.style.cursor=sf.base.isNullOrUndefined(cursorType)?'ne-resize':cursorType;}else if(this.tool.endPoint&&this.tool.endPoint.indexOf('ConnectorSegmentPoint')){eventTarget.style.cursor='sw-resize';}}else{if(eventTarget.classList.contains('e-pv-text')){eventTarget.style.cursor='text';}else if(eventTarget.classList.contains('e-pv-hyperlink')){eventTarget.style.cursor='pointer';}else if(this.isPanMode){if(this.isViewerMouseDown&&event.type==='mousemove'){eventTarget.style.cursor='grabbing';}else{var obj=findActiveElement(event,this,this.pdfViewer);if(obj&&event.type==='mousemove'){eventTarget.style.cursor='pointer';// eslint-disable-next-line max-len
var currentObject=obj;// eslint-disable-next-line
var currentPosition=this.getMousePosition(event);// eslint-disable-next-line
var relativePosition=this.relativePosition(event);// eslint-disable-next-line
var viewerPositions={left:relativePosition.x,top:relativePosition.y};// eslint-disable-next-line
var mousePositions={left:currentPosition.x,top:currentPosition.y};// eslint-disable-next-line
var annotationSettings={opacity:currentObject.opacity,fillColor:currentObject.fillColor,strokeColor:currentObject.strokeColor,thicknes:currentObject.thickness,author:currentObject.author,subject:currentObject.subject,modifiedDate:currentObject.modifiedDate};// eslint-disable-next-line max-len
this.isMousedOver=true;var isFormField=this.checkSignatureFormField(currentObject.id);if(currentObject.formFieldAnnotationType){this.isFormFieldMousedOver=true;var field_1={// eslint-disable-next-line
value:currentObject.value,fontFamily:currentObject.fontFamily,fontSize:currentObject.fontSize,fontStyle:currentObject.fontStyle,// eslint-disable-next-line max-len
color:currentObject.color,backgroundColor:currentObject.backgroundColor,borderColor:currentObject.borderColor,// eslint-disable-next-line
thickness:currentObject.thickness,alignment:currentObject.alignment,isReadonly:currentObject.isReadonly,visibility:currentObject.visibility,// eslint-disable-next-line
maxLength:currentObject.maxLength,isRequired:currentObject.isRequired,isPrint:currentObject.isPrint,rotation:currentObject.rotateAngle,tooltip:currentObject.tooltip,options:currentObject.options,// eslint-disable-next-line
isChecked:currentObject.isChecked,isSelected:currentObject.isSelected};this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover',field_1,currentObject.pageIndex,relativePosition.x,relativePosition.y,currentPosition.x,currentPosition.y);}else{if(!isFormField)// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationMouseover(currentObject.annotName,currentObject.pageIndex,currentObject.shapeAnnotationType,currentObject.bounds,annotationSettings,mousePositions,viewerPositions);}}else{eventTarget.style.cursor='grab';if(this.isMousedOver){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);if(this.isFormFieldMousedOver){this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave',null,pageIndex);}else{this.pdfViewer.fireAnnotationMouseLeave(pageIndex);}this.isMousedOver=false;this.isFormFieldMousedOver=false;}}}}else{var obj=findActiveElement(event,this,this.pdfViewer);if(obj&&event.type==='mousemove'){var currentObject=obj;// eslint-disable-next-line
var annotationObject=this.pdfViewer.nameTable[currentObject.id];// eslint-disable-next-line max-len
if(annotationObject.shapeAnnotationType!=='HandWrittenSignature'&&annotationObject.shapeAnnotationType!=='Ink'&&annotationObject.annotationSettings&&annotationObject.annotationSettings.isLock!==undefined){annotationObject.annotationSettings.isLock=JSON.parse(annotationObject.annotationSettings.isLock);}if(annotationObject.annotationSettings&&annotationObject.annotationSettings.isLock){eventTarget.style.cursor='default';}else{eventTarget.style.cursor='pointer';}// eslint-disable-next-line
var currentPosition=this.getMousePosition(event);// eslint-disable-next-line
var relativePosition=this.relativePosition(event);// eslint-disable-next-line
var viewerPositions={left:relativePosition.x,top:relativePosition.y};// eslint-disable-next-line
var mousePositions={left:currentPosition.x,top:currentPosition.y};// eslint-disable-next-line
var annotationSettings={opacity:currentObject.opacity,fillColor:currentObject.fillColor,strokeColor:currentObject.strokeColor,thicknes:currentObject.thickness,author:currentObject.author,subject:currentObject.subject,modifiedDate:currentObject.modifiedDate};// eslint-disable-next-line max-len
this.isMousedOver=true;var isFormField=this.checkSignatureFormField(currentObject.id);if(currentObject.formFieldAnnotationType){this.isFormFieldMousedOver=true;var field_2={// eslint-disable-next-line
value:currentObject.value,fontFamily:currentObject.fontFamily,fontSize:currentObject.fontSize,fontStyle:currentObject.fontStyle,// eslint-disable-next-line max-len
color:currentObject.color,backgroundColor:currentObject.backgroundColor,borderColor:currentObject.borderColor,// eslint-disable-next-line
thickness:currentObject.thickness,alignment:currentObject.alignment,isReadonly:currentObject.isReadonly,visibility:currentObject.visibility,// eslint-disable-next-line
maxLength:currentObject.maxLength,isRequired:currentObject.isRequired,isPrint:currentObject.isPrint,rotation:currentObject.rotateAngle,tooltip:currentObject.tooltip,options:currentObject.options,// eslint-disable-next-line
isChecked:currentObject.isChecked,isSelected:currentObject.isSelected};this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover',field_2,currentObject.pageIndex,relativePosition.x,relativePosition.y,currentPosition.x,currentPosition.y);}else{if(!isFormField)// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationMouseover(currentObject.annotName,currentObject.pageIndex,currentObject.shapeAnnotationType,currentObject.bounds,annotationSettings,mousePositions,viewerPositions);}}else if(event.target.classList.contains('e-pdfviewer-formFields')||event.target.classList.contains('e-pdfviewer-signatureformfields')){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);var currentPosition=this.getMousePosition(event);var relativePosition=this.relativePosition(event);var viewerPositions={left:relativePosition.x,top:relativePosition.y};var mousePositions={left:currentPosition.x,top:currentPosition.y};var dataJson=this.getItemFromSessionStorage('_formfields');var data=JSON.parse(dataJson);for(var i=0;i<data.length;i++){if(data[i].FieldName===event.target.name){var field={name:data[i].FieldName};}}this.isMousedOver=true;this.isFormFieldMousedOver=true;this.pdfViewer.fireFormFieldMouseoverEvent('formFieldMouseover',field,pageIndex,relativePosition.x,relativePosition.y,currentPosition.x,currentPosition.y);}else{if(this.isMousedOver){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);if(this.isFormFieldMousedOver){this.pdfViewer.fireFormFieldMouseLeaveEvent('formFieldMouseLeave',null,pageIndex);}else{this.pdfViewer.fireAnnotationMouseLeave(pageIndex);}this.isMousedOver=false;this.isFormFieldMousedOver=false;eventTarget.style.cursor='default';}if(obj&&this.pdfViewer.selectedItems.annotations.length===1&&event.type==='mousemove'){eventTarget.style.cursor='pointer';}else{eventTarget.style.cursor='default';}}}}};PdfViewerBase.prototype.setResizerCursorType=function(){var cursorType;// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)){if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings)?this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Stamp'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings)?this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)?this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)?this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType:null;}else if(!this.pdfViewer.selectedItems.annotations[0].measureType){if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings)?this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='LineWidthArrowHead'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings)?this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Rectangle'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings)?this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ellipse'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings)?this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Polygon'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings)?this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType:null;}}else if(this.pdfViewer.selectedItems.annotations[0].measureType){if(this.pdfViewer.selectedItems.annotations[0].subject==='Distance calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings)?this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].subject==='Perimeter calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings)?this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].subject==='Area calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings)?this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].subject==='Radius calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings)?this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType:null;}else if(this.pdfViewer.selectedItems.annotations[0].subject==='Volume calculation'){// eslint-disable-next-line max-len
cursorType=!sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings)?this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType:null;}}}else{if(this.pdfViewer.selectedItems.annotations[0]){cursorType=this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType;}}if(!cursorType){cursorType=this.pdfViewer.annotationSelectorSettings.resizerCursorType;}return cursorType;};/**
     * @private
     * @param {Actions | string} action - The actions.
     * @returns {ToolBase} - Returns tools.
     */PdfViewerBase.prototype.getTool=function(action){switch(action){case'Select':return new SelectTool(this.pdfViewer,this);case'Drag':return new MoveTool(this.pdfViewer,this);case'ResizeSouthEast':case'ResizeSouthWest':case'ResizeNorthEast':case'ResizeNorthWest':case'ResizeSouth':case'ResizeNorth':case'ResizeWest':case'ResizeEast':return new ResizeTool(this.pdfViewer,this,action);case'ConnectorSourceEnd':case'ConnectorTargetEnd':case'Leader':case'ConnectorSegmentPoint':return new ConnectTool(this.pdfViewer,this,action);case'DrawTool':return new NodeDrawingTool(this.pdfViewer,this,this.pdfViewer.drawingObject);case'Polygon':return new PolygonDrawingTool(this.pdfViewer,this,'Polygon');case'Distance':return new LineTool(this.pdfViewer,this,'Leader1',undefined);case'Line':return new LineTool(this.pdfViewer,this,'ConnectorSegmentPoint_1',this.pdfViewer.drawingObject);case'Perimeter':return new PolygonDrawingTool(this.pdfViewer,this,'Perimeter');case'Rotate':return new RotateTool(this.pdfViewer,this);case'Stamp':return new StampTool(this.pdfViewer,this);case'Ink':return new InkDrawingTool(this.pdfViewer,this,this.pdfViewer.drawingObject);}if(action.indexOf('ConnectorSegmentPoint')>-1||action.indexOf('Leader')>-1){return new ConnectTool(this.pdfViewer,this,action);}return null;};/**
     * @private
     * @param {MouseEvent | TouchEvent} evt - The events.
     * @returns {void}
     */PdfViewerBase.prototype.diagramMouseUp=function(evt){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);var touches;var isAnnotResized=this.action.toLowerCase().includes('resize')||this.action.toLowerCase().includes('connectorsegmentpoint');var isAnnotationDrawn=this.action==='Drag'||isAnnotResized||(this.tool instanceof NodeDrawingTool||this.tool instanceof LineTool||this.tool instanceof PolygonDrawingTool)&&this.tool.dragging&&this.tool.drawingObject;if(this.tool){if(!this.inAction&&evt.which!==3){if(this.action==='Drag'){this.action='Select';var obj=findActiveElement(evt,this,this.pdfViewer);}}if(!(this.tool instanceof PolygonDrawingTool)&&!(this.tool instanceof LineTool)&&!(this.tool instanceof NodeDrawingTool)){this.inAction=false;this.isMouseDown=false;}this.currentPosition=this.getMousePosition(evt);if(this.tool){this.eventArgs.position=this.currentPosition;this.getMouseEventArgs(this.currentPosition,this.eventArgs,evt,this.eventArgs.source);var ctrlKey=this.isMetaKey(evt);var info={ctrlKey:evt.ctrlKey,shiftKey:evt.shiftKey};this.eventArgs.info=info;this.eventArgs.clickCount=evt.detail;this.tool.mouseUp(this.eventArgs);this.isAnnotationMouseDown=false;this.isFormFieldMouseDown=false;// eslint-disable-next-line max-len
if((this.tool instanceof NodeDrawingTool||this.tool instanceof LineTool||this.tool instanceof PolygonDrawingTool)&&!this.tool.dragging){this.inAction=false;this.isMouseDown=false;}if(isAnnotationDrawn){var obj=findActiveElement(evt,this,this.pdfViewer);// eslint-disable-next-line max-len
if(this.isShapeAnnotationModule()&&this.isCalibrateAnnotationModule()){this.pdfViewer.annotation.onShapesMouseup(obj,evt);}}this.isAnnotationDrawn=false;}}var target=evt.target;// eslint-disable-next-line max-len
if(!touches&&evt.cancelable&&this.skipPreventDefault(target)&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){evt.preventDefault();}this.eventArgs={};this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @private
     * @param {HTMLElement} target - The target.
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.skipPreventDefault=function(target){var isSkipped=false;var isSkip=false;// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus){isSkip=true;}// eslint-disable-next-line max-len
if(target.parentElement&&target.parentElement.className!=='foreign-object'&&!target.classList.contains('e-pv-radio-btn')&&!target.classList.contains('e-pv-radiobtn-span')&&!target.classList.contains('e-pv-checkbox-div')&&!target.classList.contains('e-pdfviewer-formFields')&&!target.classList.contains('e-pdfviewer-ListBox')&&!target.classList.contains('e-pdfviewer-signatureformfields')&&!(target.className==='free-text-input'&&target.tagName==='TEXTAREA')&&!isSkip&&!(target.className==='e-pv-hyperlink')){isSkipped=true;}return isSkipped;};PdfViewerBase.prototype.isMetaKey=function(evt){return navigator.platform.match('Mac')?evt.metaKey:evt.ctrlKey;};/**
     * @private
     * @param {MouseEvent | TouchEvent} evt - The events.
     * @returns {void}
     */PdfViewerBase.prototype.diagramMouseDown=function(evt){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);var touches=null;touches=evt.touches;this.isMouseDown=true;this.isAnnotationAdded=false;this.currentPosition=this.prevPosition=this.getMousePosition(evt);this.eventArgs={};var isStamp=false;if(this.pdfViewer.tool==='Stamp'){this.pdfViewer.tool='';isStamp=true;}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.annotation){this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(evt);}var obj=findActiveElement(evt,this,this.pdfViewer);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&obj&&!(obj instanceof PdfFormFieldBase)){evt.preventDefault();}if(this.pdfViewer.annotation&&this.pdfViewer.enableStampAnnotations){var stampModule=this.pdfViewer.annotationModule.stampAnnotationModule;if(stampModule&&stampModule.isNewStampAnnot){var stampObj=obj;if(!stampObj&&this.pdfViewer.selectedItems.annotations[0]){stampObj=this.pdfViewer.selectedItems.annotations[0];}if(stampObj){this.isViewerMouseDown=false;stampObj.opacity=this.pdfViewer.stampSettings.opacity;this.isNewStamp=true;var opacity=void 0;if(stampObj.shapeAnnotationType==='Image'){opacity=this.pdfViewer.customStampSettings.opacity;}else{opacity=this.pdfViewer.stampSettings.opacity;}// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(stampObj,{opacity:opacity});this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=false;if(stampObj.shapeAnnotationType==='Image'&&!this.isAlreadyAdded){this.stampAdded=true;var stampName=stampObj.id;if(stampModule.currentStampAnnotation&&stampModule.currentStampAnnotation.signatureName){stampName=stampModule.currentStampAnnotation.signatureName;}var isSkip=false;for(var i=0;i<this.customStampCollection.length;i++){if(this.customStampCollection[i].customStampName===stampName){isSkip=true;break;}}if(isSkip){stampName=stampObj.id;}stampName=stampModule.customStampName?stampModule.customStampName:stampModule.currentStampAnnotation.signatureName;this.customStampCollection.push({customStampName:stampName,customStampImageSource:stampObj.data});}if(this.pdfViewer.customStampSettings.enableCustomStamp&&this.pdfViewer.customStampSettings.isAddToMenu){this.stampAdded=true;}this.isAlreadyAdded=false;stampModule.updateDeleteItems(stampObj.pageIndex,stampObj,stampObj.opacity);stampModule.resetAnnotation();stampModule.isNewStampAnnot=false;}}}if(this.isNewSignatureAdded){this.signatureCount++;this.currentSignatureAnnot=null;var signObject=obj;if(sf.base.isNullOrUndefined(signObject)&&this.pdfViewer.selectedItems.annotations[0]){signObject=this.pdfViewer.selectedItems.annotations[0];}if(signObject){this.signatureAdded=true;this.signatureModule.storeSignatureData(signObject.pageIndex,signObject);// eslint-disable-next-line
var bounds={left:signObject.bounds.x,top:signObject.bounds.y,width:signObject.bounds.width,height:signObject.bounds.height};// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureAdd(signObject.pageIndex,signObject.signatureName,signObject.shapeAnnotationType,bounds,signObject.opacity,signObject.strokeColor,signObject.thickness,this.signatureModule.saveImageString);}this.isNewSignatureAdded=false;}if(this.pdfViewer.annotationModule){var freeTextAnnotModule=this.pdfViewer.annotationModule.freeTextAnnotationModule;var canvasPaddingLeft=5,canvasPaddingWidth=10;// eslint-disable-next-line
if(freeTextAnnotModule.isNewFreeTextAnnot===true){var canvas=void 0;// eslint-disable-next-line max-len
if(evt.target&&(evt.target.id.indexOf('_text')>-1||evt.target.id.indexOf('_annotationCanvas')>-1||evt.target.classList.contains('e-pv-hyperlink'))&&this.pdfViewer.annotation){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(evt);var diagram=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);if(diagram){var canvas1=diagram.getBoundingClientRect();var left=canvas1.x?canvas1.x:canvas1.left;var top_3=canvas1.y?canvas1.y:canvas1.top;canvas=new sf.drawings.Rect(left+canvasPaddingLeft,top_3+canvasPaddingLeft,canvas1.width-canvasPaddingWidth,canvas1.height-canvasPaddingWidth);}}if(touches){this.mouseX=touches[0].clientX;this.mouseY=touches[0].clientY;}if(canvas&&canvas.containsPoint({x:this.mouseX,y:this.mouseY})&&freeTextAnnotModule.isNewAddedAnnot){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(evt);if(!this.pdfViewer.freeTextSettings.enableAutoFit){var zoomFactor=this.getZoomFactor();var width=this.currentPosition.x+freeTextAnnotModule.defautWidth*zoomFactor;var pageWidth=this.getPageWidth(pageIndex);if(width>=pageWidth){this.currentPosition.x=pageWidth-freeTextAnnotModule.defautWidth*zoomFactor;this.currentPosition.x<=0?this.currentPosition.x=canvasPaddingLeft:this.currentPosition.x;freeTextAnnotModule.defautWidth=freeTextAnnotModule.defautWidth*zoomFactor>=pageWidth?pageWidth-canvasPaddingWidth:freeTextAnnotModule.defautWidth;}}freeTextAnnotModule.addInuptElemet(this.currentPosition,null,pageIndex);evt.preventDefault();freeTextAnnotModule.isNewAddedAnnot=false;}}}var sourceElement=null;if(obj){sourceElement=obj.wrapper.children[0];}if(!this.tool||this.tool&&!this.tool.drawingObject){if(!isStamp){this.action=this.findToolToActivate(obj,this.currentPosition);// eslint-disable-next-line
if(obj&&obj.annotationSettings&&obj.annotationSettings.isLock){if(this.action==='Select'){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Select',obj)){this.action='';}}if(this.action==='Drag'){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Move',obj)){this.action='Select';}}if(this.action==='Rotate'){this.action='Select';}// eslint-disable-next-line max-len
if(this.action==='ResizeSouthEast'||this.action==='ResizeNorthEast'||this.action==='ResizeNorthWest'||this.action==='ResizeSouthWest'||this.action==='ResizeSouth'||// eslint-disable-next-line max-len
this.action==='ResizeNorth'||this.action==='ResizeWest'||this.action==='ResizeEast'||this.action.includes('ConnectorSegmentPoint')||this.action.includes('Leader')){if(!this.pdfViewer.annotationModule.checkAllowedInteractions('Resize',obj)){this.action='Select';}}}this.tool=this.getTool(this.action);if(!this.tool){this.action=this.pdfViewer.tool||'Select';this.tool=this.getTool(this.action);}}else{this.action='Select';this.tool=this.getTool(this.action);}}this.getMouseEventArgs(this.currentPosition,this.eventArgs,evt);this.eventArgs.position=this.currentPosition;if(this.tool){this.isAnnotationMouseDown=false;this.isFormFieldMouseDown=false;this.isAnnotationMouseMove=false;this.isFormFieldMouseMove=false;this.tool.mouseDown(this.eventArgs);this.isAnnotationDrawn=true;this.signatureAdded=true;}if(this.pdfViewer.annotation){this.pdfViewer.annotation.onAnnotationMouseDown();}var signatureFieldAnnotation=this.pdfViewer.selectedItems.annotations.length===1?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0]+'_content']:null;if(!signatureFieldAnnotation){signatureFieldAnnotation=this.pdfViewer.selectedItems.annotations.length===1?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id]:null;}// eslint-disable-next-line max-len
if(this.eventArgs&&this.eventArgs.source&&(this.eventArgs.source.formFieldAnnotationType||signatureFieldAnnotation)&&!this.pdfViewer.designerMode){var currentObject=void 0;if(signatureFieldAnnotation){currentObject=this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split('_')[0]];}else{currentObject=this.eventArgs.source;}if(!currentObject){currentObject=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(el){return el.id===signatureFieldAnnotation.id;})];}if(currentObject){// eslint-disable-next-line
var field={// eslint-disable-next-line max-len
id:currentObject.id,fontFamily:currentObject.fontFamily,fontSize:currentObject.fontSize,fontStyle:currentObject.fontStyle,// eslint-disable-next-line
color:currentObject.color,value:currentObject.value,type:currentObject.formFieldAnnotationType?currentObject.formFieldAnnotationType:currentObject.type,backgroundColor:currentObject.backgroundColor,alignment:currentObject.alignment};var target_1=document.getElementById(currentObject.id);target_1=target_1?target_1:document.getElementById(currentObject.id+'_content_html_element')?document.getElementById(currentObject.id+'_content_html_element').children[0].children[0]:null;if(target_1&&currentObject.type!="StickyNotes"&&!target_1.classList.contains("e-pv-comments-container")){this.currentTarget=target_1;this.pdfViewer.fireFormFieldClickEvent('formFieldClicked',field,false,evt.button===0);}}}this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper};this.initialEventArgs.position=this.currentPosition;this.initialEventArgs.info=this.eventArgs.info;this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.exportAnnotationsAsObject=function(){var _this_1=this;if(this.pdfViewer.annotationModule){var isAnnotations=this.updateExportItem();if(isAnnotations){return new Promise(function(resolve,reject){_this_1.createRequestForExportAnnotations(true,AnnotationDataFormat.Json).then(function(value){resolve(value);});});}}};/**
     * @private
     * @param {string} type - The type.
     */ // eslint-disable-next-line
PdfViewerBase.prototype.getItemFromSessionStorage=function(type){if(this.isStorageExceed){return this.formFieldStorage[this.documentId+type];}else{return window.sessionStorage.getItem(this.documentId+type);}};/**
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @param textDiv
     * @param left
     * @param top
     * @param fontHeight
     * @param width
     * @param height
     * @param isPrint
     * @private
     */ // eslint-disable-next-line max-len
PdfViewerBase.prototype.setStyleToTextDiv=function(textDiv,left,top,fontHeight,width,height,isPrint,isParentDiv,insertSpaceValue){var zoomvalue=this.getZoomFactor();if(isPrint){zoomvalue=1;textDiv.style.position='absolute';}textDiv.style.left=left*zoomvalue+'px';textDiv.style.top=top*zoomvalue+'px';textDiv.style.height=height*zoomvalue+'px';textDiv.style.width=width*zoomvalue+'px';textDiv.style.margin='0px';var floatProp='float';textDiv.style[floatProp]='left';if(fontHeight>0&&(!isParentDiv||!insertSpaceValue)){textDiv.style.fontSize=fontHeight*zoomvalue+'px';}};/**
     * @param number
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.ConvertPointToPixel=function(number){return number*(96/72);};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.setItemInSessionStorage=function(formFieldsData,type){// eslint-disable-next-line
var formFieldsSize=Math.round(JSON.stringify(formFieldsData).length/1024);if(formFieldsSize>4500){this.isStorageExceed=true;if(this.pdfViewer.formFieldsModule){this.pdfViewer.formFieldsModule.clearFormFieldStorage();}}if(this.isStorageExceed){this.formFieldStorage[this.documentId+type]=JSON.stringify(formFieldsData);}else{window.sessionStorage.setItem(this.documentId+type,JSON.stringify(formFieldsData));}};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.exportFormFieldsAsObject=function(){var _this_1=this;if(this.pdfViewer.formFieldsModule){return new Promise(function(resolve,reject){_this_1.createRequestForExportFormfields(true).then(function(value){resolve(value);});});}};/**
     * @param importData
     * @param annotationDataFormat
     * @param isXfdf
     * @param importData
     * @param annotationDataFormat
     * @param isXfdf
     * @param importData
     * @param annotationDataFormat
     * @param isXfdf
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.importAnnotations=function(importData,annotationDataFormat,isXfdf){if(this.pdfViewer.annotationModule){this.createRequestForImportAnnotations(importData,annotationDataFormat,isXfdf);var xfdfFileObj=document.getElementById(this.pdfViewer.dataId+"_annotationXFdfUploadElement");xfdfFileObj.value="";var jsonFileObj=document.getElementById(this.pdfViewer.dataId+"_annotationUploadElement");jsonFileObj.value="";}};/**
     * @private
     * @param {AnnotationDataFormat} annotationDataFormat - The annotationDataFormat.
     * @returns {void}
     */PdfViewerBase.prototype.exportAnnotations=function(annotationDataFormat){if(this.pdfViewer.annotationModule){var isAnnotations=this.updateExportItem();if(isAnnotations){this.createRequestForExportAnnotations(false,annotationDataFormat);}}};/**
     * @param isObject
     * @param annotationDataFormat
     * @param isBase64String
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createRequestForExportAnnotations=function(isObject,annotationDataFormat,isBase64String){var _this_1=this;var proxy=null;proxy=this;var promise=new Promise(function(resolve,reject){// eslint-disable-next-line
var jsonObject;jsonObject=_this_1.constructJsonDownload();jsonObject.annotationDataFormat=annotationDataFormat;// eslint-disable-next-line
jsonObject['action']='ExportAnnotations';proxy.pdfViewer.fireExportStart(jsonObject);if(proxy.jsonDocumentId){// eslint-disable-next-line
jsonObject.document=proxy.jsonDocumentId;}var url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.exportAnnotations;proxy.exportAnnotationRequestHandler=new AjaxHandler(_this_1.pdfViewer);proxy.exportAnnotationRequestHandler.url=url;proxy.exportAnnotationRequestHandler.mode=true;proxy.exportAnnotationRequestHandler.responseType='text';proxy.exportAnnotationRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.exportAnnotationRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)==='object'){data=JSON.parse(data);}if(data){var isCancel=proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.exportAnnotations,data);if(isObject){if(data.split('base64,')[1]){var exportObject=data;// eslint-disable-next-line 
var annotationJson=decodeURIComponent(escape(atob(data.split(',')[1])));if(isObject){if(jsonObject.annotationDataFormat==='Json'){annotationJson=proxy.getSanitizedString(annotationJson);exportObject=JSON.parse(annotationJson);}else{exportObject=annotationJson;}}if(proxy.pdfViewer.exportAnnotationFileName!==null){proxy.pdfViewer.fireExportSuccess(exportObject,proxy.pdfViewer.exportAnnotationFileName);}else{proxy.pdfViewer.fireExportSuccess(exportObject,proxy.pdfViewer.fileName);}proxy.updateDocumentAnnotationCollections();if(isBase64String){resolve(data);}else{resolve(annotationJson);}}else{// eslint-disable-next-line max-len
proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,proxy.pdfViewer.localeObj.getConstant('Export Failed'));}}else{if(annotationDataFormat==='Json'){if(data.split('base64,')[1]){if(!isCancel){var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/json');if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){if(proxy.pdfViewer.exportAnnotationFileName!==null){// eslint-disable-next-line max-len
window.navigator.msSaveOrOpenBlob(blobUrl,proxy.pdfViewer.exportAnnotationFileName.split('.')[0]+'.json');}else{window.navigator.msSaveOrOpenBlob(blobUrl,proxy.pdfViewer.fileName.split('.')[0]+'.json');}}else{proxy.downloadExportAnnotationJson(blobUrl);}proxy.updateDocumentAnnotationCollections();}else{return data;}}else{var promise_2=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_ExportFailed');promise_2.then(function(value){proxy.openImportExportNotificationPopup(value);});// eslint-disable-next-line max-len
proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,proxy.pdfViewer.localeObj.getConstant('Export Failed'));}}else{if(data.split('base64,')[1]){if(!isCancel){var blobUrl=proxy.createBlobUrl(data.split('base64,')[1],'application/vnd.adobe.xfdf');if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'){window.navigator.msSaveOrOpenBlob(blobUrl,proxy.pdfViewer.fileName.split('.')[0]+'.xfdf');}else{proxy.downloadExportedXFdfAnnotation(blobUrl);}}else{return data;}}else{var promise_3=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_ExportFailed');promise_3.then(function(value){proxy.openImportExportNotificationPopup(value);});// eslint-disable-next-line max-len
proxy.pdfViewer.fireExportFailed(jsonObject,proxy.pdfViewer.localeObj.getConstant('Export Failed'));}}}}if(typeof data!=='string'){try{if(typeof data==='string'){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.exportAnnotations);data=null;}}catch(error){// eslint-disable-next-line max-len
proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,proxy.pdfViewer.localeObj.getConstant('Export Failed'));proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.exportAnnotations);data=null;}}}else{var fileName=void 0;if(proxy.pdfViewer.exportAnnotationFileName!==null){fileName=proxy.pdfViewer.exportAnnotationFileName;}else{fileName=proxy.pdfViewer.fileName;}proxy.pdfViewer.fireExportSuccess('Exported data saved in server side successfully',fileName);resolve(null);}};// eslint-disable-next-line
proxy.exportAnnotationRequestHandler.onFailure=function(result){proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,result.statusText);};// eslint-disable-next-line
proxy.exportAnnotationRequestHandler.onError=function(result){proxy.pdfViewer.fireExportFailed(jsonObject.pdfAnnotation,result.statusText);};});if(isObject||isBase64String){return promise;}else{return true;}};/**
        * @private
        */PdfViewerBase.prototype.updateModifiedDateToLocalDate=function(newData,annotationType){if(newData[annotationType]&&newData[annotationType].length>0){var data=newData[annotationType];if(data){for(var j=0;j<data.length;j++){data[j].ModifiedDate=this.convertUTCDateToLocalDate(data[j].ModifiedDate);if(data[j].Comments){for(var i=0;i<data[j].Comments.length;i++){data[j].Comments[i].ModifiedDate=this.convertUTCDateToLocalDate(data[j].Comments[i].ModifiedDate);}}}}}};/**
     * @private
     */PdfViewerBase.prototype.convertUTCDateToLocalDate=function(date){var dateTime=new Date(Date.parse(date+' '+'UTC'));this.globalize=new sf.base.Internationalization(this.pdfViewer.locale);var timeValue=dateTime.toLocaleTimeString("en-us");var newDate=dateTime.toLocaleDateString("en-us");var dateTimeValue=newDate+','+' '+timeValue;return dateTimeValue;};// eslint-disable-next-line
PdfViewerBase.prototype.createRequestForImportAnnotations=function(importData,annotationDataFormat,isXfdf){var jsonObject;var proxy=null;proxy=this;if(!isXfdf&&proxy.isPDFViewerJson){this.isJsonImported=true;}else{this.isJsonImported=false;}if(_typeof(importData)==='object'){if(importData&&importData.pdfAnnotation){var newArray=Object.keys(importData.pdfAnnotation);for(var i=0;i<newArray.length;i++){var newData=importData.pdfAnnotation[newArray[i]];this.updateModifiedDateToLocalDate(newData,"freeTextAnnotation");this.updateModifiedDateToLocalDate(newData,"measureShapeAnnotation");this.updateModifiedDateToLocalDate(newData,"shapeAnnotation");this.updateModifiedDateToLocalDate(newData,"signatureAnnotation");this.updateModifiedDateToLocalDate(newData,"signatureInkAnnotation");this.updateModifiedDateToLocalDate(newData,"stampAnnotations");this.updateModifiedDateToLocalDate(newData,"stickyNotesAnnotation");this.updateModifiedDateToLocalDate(newData,"textMarkupAnnotation");}}proxy.reRenderAnnotations(importData.pdfAnnotation);proxy.isImportedAnnotation=true;proxy.updateDocumentEditedProperty(true);proxy.fireDocumentEditedEvent("AnnotationImported");if(!this.isAddAnnotation){proxy.pdfViewer.fireImportSuccess(importData.pdfAnnotation);}}else{proxy.pdfViewer.fireImportStart(importData);if(annotationDataFormat==='Json'){// eslint-disable-next-line max-len
if(proxy.isPDFViewerJson){jsonObject={fileName:importData,action:'ImportAnnotations',elementId:proxy.pdfViewer.element.id,hashId:proxy.hashId,uniqueId:proxy.documentId,annotationDataFormat:annotationDataFormat};}else{jsonObject={importedData:importData,action:'ImportAnnotations',elementId:proxy.pdfViewer.element.id,hashId:proxy.hashId,uniqueId:proxy.documentId,annotationDataFormat:annotationDataFormat};}}else{if(!isXfdf){importData=btoa(importData);}importData=importData.split(',')[1]?importData.split(',')[1]:importData.split(',')[0];// eslint-disable-next-line max-len
jsonObject={importedData:importData,action:'ImportAnnotations',elementId:proxy.pdfViewer.element.id,hashId:proxy.hashId,uniqueId:proxy.documentId,annotationDataFormat:annotationDataFormat};}jsonObject=Object.assign(jsonObject,this.constructJsonDownload());jsonObject["action"]='ImportAnnotations';if(proxy.jsonDocumentId){// eslint-disable-next-line
if(jsonObject.documentId){delete jsonObject['documentId'];}jsonObject.document=proxy.jsonDocumentId;}var url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.importAnnotations;proxy.importAnnotationRequestHandler=new AjaxHandler(proxy.pdfViewer);proxy.importAnnotationRequestHandler.url=url;proxy.importAnnotationRequestHandler.mode=true;proxy.importAnnotationRequestHandler.responseType='text';proxy.importAnnotationRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.importAnnotationRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);if(_typeof(data)!=='object'){proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.importAnnotations);data=null;}}catch(error){proxy.pdfViewer.fireImportFailed(importData,proxy.pdfViewer.localeObj.getConstant('File not found'));var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_FileNotFound');promise.then(function(value){proxy.openImportExportNotificationPopup(value);});proxy.onControlError(500,data,proxy.pdfViewer.serverActionSettings.importAnnotations);data=null;}}if(data){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.importAnnotations,data);if(data.pdfAnnotation){var newData_1;var newArray_1=Object.keys(data.pdfAnnotation);for(var i=0;i<newArray_1.length;i++){newData_1=data.pdfAnnotation[newArray_1[i]];proxy.updateModifiedDateToLocalDate(newData_1,"freeTextAnnotation");proxy.updateModifiedDateToLocalDate(newData_1,"measureShapeAnnotation");proxy.updateModifiedDateToLocalDate(newData_1,"shapeAnnotation");proxy.updateModifiedDateToLocalDate(newData_1,"signatureAnnotation");proxy.updateModifiedDateToLocalDate(newData_1,"signatureInkAnnotation");proxy.updateModifiedDateToLocalDate(newData_1,"stampAnnotations");proxy.updateModifiedDateToLocalDate(newData_1,"stickyNotesAnnotation");proxy.updateModifiedDateToLocalDate(newData_1,"textMarkupAnnotation");}proxy.reRenderAnnotations(data.pdfAnnotation);proxy.isImportedAnnotation=true;proxy.updateDocumentEditedProperty(true);proxy.fireDocumentEditedEvent("AnnotationImported");proxy.pdfViewer.fireImportSuccess(data.pdfAnnotation);}}}};// eslint-disable-next-line
proxy.importAnnotationRequestHandler.onFailure=function(result){proxy.pdfViewer.fireImportFailed(importData,result.statusText);};// eslint-disable-next-line
proxy.importAnnotationRequestHandler.onError=function(result){proxy.pdfViewer.fireImportFailed(importData,result.statusText);};}};/**
     * @private
     * @param {string} errorDetails - The error details.
     * @returns {void}
     */PdfViewerBase.prototype.openImportExportNotificationPopup=function(errorDetails){if(this.pdfViewer.showNotificationDialog){this.textLayer.createNotificationPopup(errorDetails);}};// eslint-disable-next-line
PdfViewerBase.prototype.reRenderAnnotations=function(annotation){if(annotation){this.isImportAction=true;var count=void 0;if(this.isImportedAnnotation){this.importedAnnotation=this.combineImportedData(this.importedAnnotation,annotation);}else{if(this.pageCount>0){this.importedAnnotation=annotation;}}if(!this.isImportedAnnotation){count=0;}var lastValue=Object.keys(annotation).pop();var isLastPage=false;for(var i=0;i<this.pageCount;i++){if(annotation[i]){if(lastValue===i.toString()){isLastPage=true;}// eslint-disable-next-line
var importPageCollections=[];// eslint-disable-next-line
var pageCollections=[];// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');// eslint-disable-next-line
var measureShapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');// eslint-disable-next-line
var signatureObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');// eslint-disable-next-line
var inkObject=window.sessionStorage.getItem(this.documentId+'_annotations_ink');// eslint-disable-next-line
var pageRotations=this.pageSize[i].rotation;if(this.isStorageExceed){textMarkupObject=this.annotationStorage[this.documentId+'_annotations_textMarkup'];shapeObject=this.annotationStorage[this.documentId+'_annotations_shape'];measureShapeObject=this.annotationStorage[this.documentId+'_annotations_shape_measure'];stampObject=this.annotationStorage[this.documentId+'_annotations_stamp'];stickyObject=this.annotationStorage[this.documentId+'_annotations_sticky'];freeTextObject=this.annotationStorage[this.documentId+'_annotations_freetext'];inkObject=this.annotationStorage[this.documentId+'_annotations_ink'];}var annotationCanvas=this.getElement('_annotationCanvas_'+i);if(annotationCanvas&&pageRotations!==undefined){this.drawPageAnnotations(annotation[i],i);if(this.isImportedAnnotation){var isAdded=false;for(var j=0;j<this.annotationPageList.length;j++){if(this.annotationPageList[j]===i){isAdded=true;}}if(isAdded){this.annotationPageList[count]=i;count=count+1;}}else{this.annotationPageList[count]=i;count=count+1;}}if(annotation[i].textMarkupAnnotation&&annotation[i].textMarkupAnnotation.length!==0){if(textMarkupObject){var annotObject=JSON.parse(textMarkupObject);// eslint-disable-next-line max-len
annotation[i].textMarkupAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].textMarkupAnnotation,i);}annotation[i].textMarkupAnnotation=this.checkAnnotationCommentsCollections(annotation[i].textMarkupAnnotation,i);importPageCollections.textMarkupAnnotation=annotation[i].textMarkupAnnotation;if(annotation[i].textMarkupAnnotation.length!==0){for(var j=0;j<annotation[i].textMarkupAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].textMarkupAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(annotation[i].textMarkupAnnotation[j],i));}}}if(annotation[i].shapeAnnotation&&annotation[i].shapeAnnotation.length!==0){if(shapeObject){var annotObject=JSON.parse(shapeObject);annotation[i].shapeAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].shapeAnnotation,i);}annotation[i].shapeAnnotation=this.checkAnnotationCommentsCollections(annotation[i].shapeAnnotation,i);importPageCollections.shapeAnnotation=annotation[i].shapeAnnotation;if(annotation[i].shapeAnnotation.length!==0){for(var j=0;j<annotation[i].shapeAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].shapeAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(annotation[i].shapeAnnotation[j],i));}}}if(annotation[i].measureShapeAnnotation&&annotation[i].measureShapeAnnotation.length!==0){if(measureShapeObject){var annotObject=JSON.parse(measureShapeObject);// eslint-disable-next-line max-len
annotation[i].measureShapeAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].measureShapeAnnotation,i);}// eslint-disable-next-line max-len
annotation[i].measureShapeAnnotation=this.checkAnnotationCommentsCollections(annotation[i].measureShapeAnnotation,i);importPageCollections.measureShapeAnnotation=annotation[i].measureShapeAnnotation;if(annotation[i].measureShapeAnnotation.length!==0){for(var j=0;j<annotation[i].measureShapeAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].measureShapeAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(annotation[i].measureShapeAnnotation[j],i));}}}if(annotation[i].stampAnnotations&&annotation[i].stampAnnotations.length!==0){if(stampObject){var annotObject=JSON.parse(stampObject);// eslint-disable-next-line max-len
annotation[i].stampAnnotations=this.checkAnnotationCollections(annotObject,annotation[i].stampAnnotations,i);}annotation[i].stampAnnotations=this.checkAnnotationCommentsCollections(annotation[i].stampAnnotations,i);importPageCollections.stampAnnotations=annotation[i].stampAnnotations;if(annotation[i].stampAnnotations.length!==0){for(var j=0;j<annotation[i].stampAnnotations.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].stampAnnotations[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(annotation[i].stampAnnotations[j],i));}}}if(annotation[i].stickyNotesAnnotation&&annotation[i].stickyNotesAnnotation.length!==0){if(stickyObject){var annotObject=JSON.parse(stickyObject);// eslint-disable-next-line max-len
annotation[i].stickyNotesAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].stickyNotesAnnotation,i);}// eslint-disable-next-line max-len
annotation[i].stickyNotesAnnotation=this.checkAnnotationCommentsCollections(annotation[i].stickyNotesAnnotation,i);importPageCollections.stickyNotesAnnotation=annotation[i].stickyNotesAnnotation;if(annotation[i].stickyNotesAnnotation.length!==0){for(var j=0;j<annotation[i].stickyNotesAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].stickyNotesAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(annotation[i].stickyNotesAnnotation[j],i));}}}if(annotation[i].freeTextAnnotation&&annotation[i].freeTextAnnotation.length!==0){if(freeTextObject){var annotObject=JSON.parse(freeTextObject);// eslint-disable-next-line max-len
annotation[i].freeTextAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].freeTextAnnotation,i);}annotation[i].freeTextAnnotation=this.checkAnnotationCommentsCollections(annotation[i].freeTextAnnotation,i);importPageCollections.freeTextAnnotation=annotation[i].freeTextAnnotation;if(annotation[i].freeTextAnnotation.length!==0){for(var j=0;j<annotation[i].freeTextAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].freeTextAnnotation[j]);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation[i].freeTextAnnotation[j],i));}}}if(annotation[i].signatureAnnotation&&annotation[i].signatureAnnotation.length!==0){if(signatureObject){var annotObject=JSON.parse(signatureObject);// eslint-disable-next-line max-len
annotation[i].signatureAnnotation=this.checkSignatureCollections(annotObject,annotation[i].signatureAnnotation,i);}importPageCollections.signatureAnnotation=annotation[i].signatureAnnotation;if(annotation[i].signatureAnnotation.length!==0){for(var j=0;j<annotation[i].signatureAnnotation.length;j++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(annotation[i].signatureAnnotation[j],i),true);}}}if(annotation[i].signatureInkAnnotation&&annotation[i].signatureInkAnnotation.length!==0){if(inkObject){var annotObject=JSON.parse(inkObject);// eslint-disable-next-line max-len
annotation[i].signatureInkAnnotation=this.checkAnnotationCollections(annotObject,annotation[i].signatureInkAnnotation,i);}// eslint-disable-next-line max-len
annotation[i].signatureInkAnnotation=this.checkAnnotationCommentsCollections(annotation[i].signatureInkAnnotation,i);importPageCollections.signatureInkAnnotation=annotation[i].signatureInkAnnotation;if(annotation[i].signatureInkAnnotation.length!==0){for(var j=0;j<annotation[i].signatureInkAnnotation.length;j++){// eslint-disable-next-line max-len
pageCollections.push(annotation[i].signatureInkAnnotation[j]);// eslint-disable-next-line max-len
// this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(annotation[i].freeTextAnnotation[j], i));
}}}if((pageCollections.length!==0||isLastPage)&&this.pdfViewer.enableCommentPanel){this.pdfViewer._dotnetInstance.invokeMethodAsync('RenderAnnotationComments',pageCollections,i,isLastPage);}this.updateImportedAnnotationsInDocumentCollections(importPageCollections,i);}}if(this.pageCount>0){// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&!this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered){// eslint-disable-next-line
var annotationCollection=this.createAnnotationsCollection();if(annotationCollection){// eslint-disable-next-line max-len
this.documentAnnotationCollections=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation,annotationCollection);}}}}};/**
     * @param importedAnnotations
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.updateImportedAnnotationsInDocumentCollections=function(importedAnnotations,pageNumber){if(this.documentAnnotationCollections){// eslint-disable-next-line
var documentAnnotationCollection=this.documentAnnotationCollections;// eslint-disable-next-line
var pageCollections=documentAnnotationCollection[pageNumber];if(pageCollections){if(importedAnnotations.textMarkupAnnotation&&importedAnnotations.textMarkupAnnotation.length!==0){for(var i=0;i<importedAnnotations.textMarkupAnnotation.length;i++){pageCollections.textMarkupAnnotation.push(importedAnnotations.textMarkupAnnotation[i]);}}if(importedAnnotations.shapeAnnotation&&importedAnnotations.shapeAnnotation.length!==0){for(var i=0;i<importedAnnotations.shapeAnnotation.length;i++){pageCollections.shapeAnnotation.push(importedAnnotations.shapeAnnotation[i]);}}if(importedAnnotations.measureShapeAnnotation&&importedAnnotations.measureShapeAnnotation.length!==0){for(var i=0;i<importedAnnotations.measureShapeAnnotation.length;i++){pageCollections.measureShapeAnnotation.push(importedAnnotations.measureShapeAnnotation[i]);}}if(importedAnnotations.stampAnnotations&&importedAnnotations.stampAnnotations.length!==0){for(var i=0;i<importedAnnotations.stampAnnotations.length;i++){pageCollections.stampAnnotations.push(importedAnnotations.stampAnnotations[i]);}}if(importedAnnotations.stickyNotesAnnotation&&importedAnnotations.stickyNotesAnnotation.length!==0){for(var i=0;i<importedAnnotations.stickyNotesAnnotation.length;i++){pageCollections.stickyNotesAnnotation.push(importedAnnotations.stickyNotesAnnotation[i]);}}if(importedAnnotations.freeTextAnnotation&&importedAnnotations.freeTextAnnotation.length!==0){for(var i=0;i<importedAnnotations.freeTextAnnotation.length;i++){pageCollections.freeTextAnnotation.push(importedAnnotations.freeTextAnnotation[i]);}}if(importedAnnotations.signatureAnnotation&&importedAnnotations.signatureAnnotation.length!==0){for(var i=0;i<importedAnnotations.signatureAnnotation.length;i++){pageCollections.signatureAnnotation.push(importedAnnotations.signatureAnnotation[i]);}}if(importedAnnotations.signatureInkAnnotation&&importedAnnotations.signatureInkAnnotation.length!==0){for(var i=0;i<importedAnnotations.signatureInkAnnotation.length;i++){pageCollections.signatureInkAnnotation.push(importedAnnotations.signatureInkAnnotation[i]);}}this.documentAnnotationCollections[pageNumber]=pageCollections;}}};/**
     * @param pageIndex
     * @param pageCollections
     * @param pageIndex
     * @param pageCollections
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.checkDocumentCollectionData=function(pageIndex,pageCollections){// eslint-disable-next-line
var importPageCollections;if(pageCollections){importPageCollections=pageCollections;}else if(this.documentAnnotationCollections){// eslint-disable-next-line
var documetCollections=this.documentAnnotationCollections[pageIndex];if(documetCollections){importPageCollections=cloneObject(documetCollections);}}if(importPageCollections){// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');// eslint-disable-next-line
var measureShapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');// eslint-disable-next-line
var inkObject=window.sessionStorage.getItem(this.documentId+'_annotations_ink');// eslint-disable-next-line
var signatureObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');if(this.isStorageExceed){textMarkupObject=this.annotationStorage[this.documentId+'_annotations_textMarkup'];shapeObject=this.annotationStorage[this.documentId+'_annotations_shape'];measureShapeObject=this.annotationStorage[this.documentId+'_annotations_shape_measure'];stampObject=this.annotationStorage[this.documentId+'_annotations_stamp'];stickyObject=this.annotationStorage[this.documentId+'_annotations_sticky'];freeTextObject=this.annotationStorage[this.documentId+'_annotations_freetext'];inkObject=this.annotationStorage[this.documentId+'_annotations_ink'];signatureObject=this.annotationStorage[this.documentId+'_annotations_sign'];}if(importPageCollections.textMarkupAnnotation&&importPageCollections.textMarkupAnnotation.length!==0){if(textMarkupObject){var annotationObject=JSON.parse(textMarkupObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.textMarkupAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.textMarkupAnnotation,pageIndex);}}}if(importPageCollections.shapeAnnotation&&importPageCollections.shapeAnnotation.length!==0){if(shapeObject){var annotationObject=JSON.parse(shapeObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.shapeAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.shapeAnnotation,pageIndex);}}}if(importPageCollections.measureShapeAnnotation&&importPageCollections.measureShapeAnnotation.length!==0){if(measureShapeObject){var annotationObject=JSON.parse(measureShapeObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.measureShapeAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.measureShapeAnnotation,pageIndex);}}}if(importPageCollections.stampAnnotations&&importPageCollections.stampAnnotations.length!==0){if(stampObject){var annotationObject=JSON.parse(stampObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.stampAnnotations=this.findImportedAnnotations(annotationObject,importPageCollections.stampAnnotations,pageIndex);}}}if(importPageCollections.stickyNotesAnnotation&&importPageCollections.stickyNotesAnnotation.length!==0){if(stickyObject){var annotationObject=JSON.parse(stickyObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.stickyNotesAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.stickyNotesAnnotation,pageIndex);}}}if(importPageCollections.freeTextAnnotation&&importPageCollections.freeTextAnnotation.length!==0){if(freeTextObject){var annotationObject=JSON.parse(freeTextObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.freeTextAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.freeTextAnnotation,pageIndex);}}}if(importPageCollections.signatureInkAnnotation&&importPageCollections.signatureInkAnnotation.length!==0){if(inkObject){var annotationObject=JSON.parse(inkObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.signatureInkAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.signatureInkAnnotation,pageIndex);}}}if(importPageCollections.signatureAnnotation&&importPageCollections.signatureAnnotation.length!==0){if(signatureObject){var annotationObject=JSON.parse(inkObject);if(annotationObject){// eslint-disable-next-line max-len
importPageCollections.signatureAnnotation=this.findImportedAnnotations(annotationObject,importPageCollections.signatureAnnotation,pageIndex);}}}return importPageCollections;}};// eslint-disable-next-line
PdfViewerBase.prototype.findImportedAnnotations=function(annotationCollection,importAnnotations,pageNumber){// eslint-disable-next-line
var pageCollections=null;for(var a=0;a<annotationCollection.length;a++){if(annotationCollection[a].pageIndex===pageNumber){pageCollections=annotationCollection[a].annotations;}}if(pageCollections){for(var i=0;i<pageCollections.length;i++){for(var j=0;j<importAnnotations.length;j++){if(pageCollections[i].annotName===importAnnotations[j].AnnotName){importAnnotations.splice(j,1);j=j-1;}}}}pageCollections=null;return importAnnotations;};// eslint-disable-next-line
PdfViewerBase.prototype.drawPageAnnotations=function(annotation,pageIndex,isNewlyAdded){if(isNewlyAdded){annotation=annotation[pageIndex];}if(annotation){if(annotation.textMarkupAnnotation&&annotation.textMarkupAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_textMarkup'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(annotObject){// eslint-disable-next-line max-len
annotation.textMarkupAnnotation=this.checkAnnotationCollections(annotObject,annotation.textMarkupAnnotation,pageIndex);}}annotation.textMarkupAnnotation=this.checkAnnotationCommentsCollections(annotation.textMarkupAnnotation,pageIndex);if(annotation.textMarkupAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,null,null,annotation.textMarkupAnnotation,null,true);}}if(annotation.shapeAnnotation&&annotation.shapeAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_shape'];}if(storeObject){var annotObject=JSON.parse(storeObject);annotation.shapeAnnotation=this.checkAnnotationCollections(annotObject,annotation.shapeAnnotation,pageIndex);}annotation.shapeAnnotation=this.checkAnnotationCommentsCollections(annotation.shapeAnnotation,pageIndex);if(annotation.shapeAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,annotation.shapeAnnotation,null,null,null,true);}}if(annotation.measureShapeAnnotation&&annotation.measureShapeAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_shape_measure'];}if(storeObject){var annotObject=JSON.parse(storeObject);// eslint-disable-next-line max-len
annotation.measureShapeAnnotation=this.checkAnnotationCollections(annotObject,annotation.measureShapeAnnotation,pageIndex);}annotation.measureShapeAnnotation=this.checkAnnotationCommentsCollections(annotation.measureShapeAnnotation,pageIndex);if(annotation.measureShapeAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.renderAnnotations(pageIndex,null,annotation.measureShapeAnnotation,null,null,true);}}if(annotation.stampAnnotations&&annotation.stampAnnotations.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_stamp'];}if(storeObject){var annotObject=JSON.parse(storeObject);annotation.stampAnnotations=this.checkAnnotationCollections(annotObject,annotation.stampAnnotations,pageIndex);}annotation.stampAnnotations=this.checkAnnotationCommentsCollections(annotation.stampAnnotations,pageIndex);if(annotation.stampAnnotations.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(annotation.stampAnnotations,pageIndex,null,true);}}if(annotation.stickyNotesAnnotation&&annotation.stickyNotesAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_sticky'];}if(storeObject){var annotObject=JSON.parse(storeObject);// eslint-disable-next-line max-len
annotation.stickyNotesAnnotation=this.checkAnnotationCollections(annotObject,annotation.stickyNotesAnnotation,pageIndex);}annotation.stickyNotesAnnotation=this.checkAnnotationCommentsCollections(annotation.stickyNotesAnnotation,pageIndex);if(annotation.stickyNotesAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(annotation.stickyNotesAnnotation,pageIndex);}}if(annotation.freeTextAnnotation&&annotation.freeTextAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_freetext'];}if(storeObject){var annotObject=JSON.parse(storeObject);annotation.freeTextAnnotation=this.checkAnnotationCollections(annotObject,annotation.freeTextAnnotation,pageIndex);}annotation.freeTextAnnotation=this.checkAnnotationCommentsCollections(annotation.freeTextAnnotation,pageIndex);if(annotation.freeTextAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(annotation.freeTextAnnotation,pageIndex,true);}}if(annotation.signatureAnnotation&&annotation.signatureAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');var annotObject=JSON.parse(storeObject);if(annotObject){annotation.signatureAnnotation=this.checkSignatureCollections(annotObject,annotation.signatureAnnotation,pageIndex);}this.signatureModule.renderExistingSignature(annotation.signatureAnnotation,pageIndex,true);}if(annotation.signatureInkAnnotation&&annotation.signatureInkAnnotation.length!==0){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.documentId+'_annotations_ink');if(this.isStorageExceed){storeObject=this.annotationStorage[this.documentId+'_annotations_ink'];}if(storeObject){var annotObject=JSON.parse(storeObject);// eslint-disable-next-line max-len
annotation.signatureInkAnnotation=this.checkAnnotationCollections(annotObject,annotation.signatureInkAnnotation,pageIndex);}annotation.signatureInkAnnotation=this.checkAnnotationCommentsCollections(annotation.signatureInkAnnotation,pageIndex);if(annotation.signatureInkAnnotation.length!==0){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(annotation.signatureInkAnnotation,pageIndex,true);}}}};// eslint-disable-next-line
PdfViewerBase.prototype.checkSignatureCollections=function(annotationCollection,annotation,pageNumber){// eslint-disable-next-line
var pageCollections=null;for(var a=0;a<annotationCollection.length;a++){if(annotationCollection[a].pageIndex===pageNumber){pageCollections=annotationCollection[a].annotations;}}if(pageCollections){for(var i=0;i<pageCollections.length;i++){for(var j=0;j<annotation.length;j++){if(pageCollections[i].signatureName===annotation[j].SignatureName){annotation.splice(j,1);j=j-1;}}}}pageCollections=null;return annotation;};// eslint-disable-next-line
PdfViewerBase.prototype.checkAnnotationCollections=function(annotationCollection,annotation,pageNumber){// eslint-disable-next-line
var pageCollections=null;for(var a=0;a<annotationCollection.length;a++){if(annotationCollection[a].pageIndex===pageNumber){pageCollections=annotationCollection[a].annotations;}}if(pageCollections){for(var i=0;i<pageCollections.length;i++){for(var j=0;j<annotation.length;j++){if(pageCollections[i].annotName===annotation[j].AnnotName){annotation.splice(j,1);j=j-1;}}}}pageCollections=null;return annotation;};// eslint-disable-next-line
PdfViewerBase.prototype.checkAnnotationCommentsCollections=function(annotation,pageNumber){if(this.annotationComments){// eslint-disable-next-line
var annotationCollections=this.annotationComments[pageNumber];annotationCollections=this.selectAnnotationCollections(annotationCollections);if(annotationCollections){for(var i=0;i<annotationCollections.length;i++){for(var j=0;j<annotation.length;j++){if(annotationCollections[i].AnnotName===annotation[j].AnnotName){annotationCollections[i].isAlreadyAdded=true;annotation.splice(j,1);j=j-1;}}}}annotationCollections=null;}return annotation;};// eslint-disable-next-line
PdfViewerBase.prototype.selectAnnotationCollections=function(pageAnnotations){// eslint-disable-next-line
var pageCollections=[];if(pageAnnotations){if(pageAnnotations.textMarkupAnnotation&&pageAnnotations.textMarkupAnnotation.length!==0){for(var i=0;i<pageAnnotations.textMarkupAnnotation.length;i++){pageCollections.push(pageAnnotations.textMarkupAnnotation[i]);}}if(pageAnnotations.shapeAnnotation&&pageAnnotations.shapeAnnotation.length!==0){for(var i=0;i<pageAnnotations.shapeAnnotation.length;i++){pageCollections.push(pageAnnotations.shapeAnnotation[i]);}}if(pageAnnotations.measureShapeAnnotation&&pageAnnotations.measureShapeAnnotation.length!==0){for(var i=0;i<pageAnnotations.measureShapeAnnotation.length;i++){pageCollections.push(pageAnnotations.measureShapeAnnotation[i]);}}if(pageAnnotations.stampAnnotations&&pageAnnotations.stampAnnotations.length!==0){for(var i=0;i<pageAnnotations.stampAnnotations.length;i++){pageCollections.push(pageAnnotations.stampAnnotations[i]);}}if(pageAnnotations.stickyNotesAnnotation&&pageAnnotations.stickyNotesAnnotation.length!==0){for(var i=0;i<pageAnnotations.stickyNotesAnnotation.length;i++){pageCollections.push(pageAnnotations.stickyNotesAnnotation[i]);}}if(pageAnnotations.freeTextAnnotation&&pageAnnotations.freeTextAnnotation.length!==0){for(var i=0;i<pageAnnotations.freeTextAnnotation.length;i++){pageCollections.push(pageAnnotations.freeTextAnnotation[i]);}}if(pageAnnotations.signatureInkAnnotation&&pageAnnotations.signatureInkAnnotation.length!==0){for(var i=0;i<pageAnnotations.signatureInkAnnotation.length;i++){pageCollections.push(pageAnnotations.signatureInkAnnotation[i]);}}}return pageCollections;};PdfViewerBase.prototype.saveImportedAnnotations=function(){// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');// eslint-disable-next-line
var measureShapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');// eslint-disable-next-line
var inkObject=window.sessionStorage.getItem(this.documentId+'_annotations_ink');// eslint-disable-next-line
var signatureObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');if(this.isStorageExceed){textMarkupObject=this.annotationStorage[this.documentId+'_annotations_textMarkup'];shapeObject=this.annotationStorage[this.documentId+'_annotations_shape'];measureShapeObject=this.annotationStorage[this.documentId+'_annotations_shape_measure'];stampObject=this.annotationStorage[this.documentId+'_annotations_stamp'];stickyObject=this.annotationStorage[this.documentId+'_annotations_sticky'];freeTextObject=this.annotationStorage[this.documentId+'_annotations_freetext'];inkObject=this.annotationStorage[this.documentId+'_annotations_ink'];signatureObject=this.annotationStorage[this.documentId+'_annotations_sign'];}// eslint-disable-next-line max-len
this.downloadCollections={textMarkupObject:textMarkupObject,shapeObject:shapeObject,measureShapeObject:measureShapeObject,stampObject:stampObject,stickyObject:stickyObject,freeTextObject:freeTextObject,inkObject:inkObject,signatureObject:signatureObject};if(this.documentAnnotationCollections){for(var i=0;i<this.pageCount;i++){if(this.documentAnnotationCollections[i]){// eslint-disable-next-line
var pageCollections=cloneObject(this.documentAnnotationCollections[i]);pageCollections=this.checkDocumentCollectionData(i,pageCollections);this.savePageAnnotations(pageCollections,i);}}}};// eslint-disable-next-line
PdfViewerBase.prototype.savePageAnnotations=function(annotation,pageIndex){if(annotation.textMarkupAnnotation.length!==0){for(var s=0;s<annotation.textMarkupAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(annotation.textMarkupAnnotation[s],pageIndex);}}if(annotation.shapeAnnotation.length!==0){for(var s=0;s<annotation.shapeAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(annotation.shapeAnnotation[s],pageIndex);}}if(annotation.measureShapeAnnotation.length!==0){for(var s=0;s<annotation.measureShapeAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(annotation.measureShapeAnnotation[s],pageIndex);}}if(annotation.stampAnnotations.length!==0){for(var s=0;s<annotation.stampAnnotations.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(annotation.stampAnnotations[s],pageIndex);}}if(annotation.stickyNotesAnnotation.length!==0){for(var s=0;s<annotation.stickyNotesAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(annotation.stickyNotesAnnotation[s],pageIndex);}}if(annotation.freeTextAnnotation.length!==0){for(var s=0;s<annotation.freeTextAnnotation.length;s++){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(annotation.freeTextAnnotation[s],pageIndex);}}if(annotation.signatureInkAnnotation.length!==0){for(var s=0;s<annotation.signatureInkAnnotation.length;s++){this.pdfViewer.annotationModule.inkAnnotationModule.saveImportedInkAnnotation(annotation.signatureInkAnnotation[s],pageIndex);}}};PdfViewerBase.prototype.updateDocumentAnnotationCollections=function(){window.sessionStorage.removeItem(this.documentId+'_annotations_textMarkup');window.sessionStorage.removeItem(this.documentId+'_annotations_shape');window.sessionStorage.removeItem(this.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(this.documentId+'_annotations_stamp');window.sessionStorage.removeItem(this.documentId+'_annotations_sticky');window.sessionStorage.removeItem(this.documentId+'_annotations_freetext');window.sessionStorage.removeItem(this.documentId+'_annotations_ink');if(this.downloadCollections){if(this.isStorageExceed){this.annotationStorage[this.documentId+'_annotations_textMarkup']=this.downloadCollections.textMarkupObject;this.annotationStorage[this.documentId+'_annotations_shape']=this.downloadCollections.shapeObject;this.annotationStorage[this.documentId+'_annotations_shape_measure']=this.downloadCollections.measureShapeObject;this.annotationStorage[this.documentId+'_annotations_stamp']=this.downloadCollections.stampObject;this.annotationStorage[this.documentId+'_annotations_sticky']=this.downloadCollections.stickyObject;this.annotationStorage[this.documentId+'_annotations_freetext']=this.downloadCollections.freeTextObject;this.annotationStorage[this.documentId+'_annotations_ink']=this.downloadCollections.inkObject;}else{if(this.downloadCollections.textMarkupObject){window.sessionStorage.setItem(this.documentId+'_annotations_textMarkup',this.downloadCollections.textMarkupObject);}if(this.downloadCollections.shapeObject){window.sessionStorage.setItem(this.documentId+'_annotations_shape',this.downloadCollections.shapeObject);}if(this.downloadCollections.measureShapeObject){window.sessionStorage.setItem(this.documentId+'_annotations_shape_measure',this.downloadCollections.measureShapeObject);}if(this.downloadCollections.stampObject){window.sessionStorage.setItem(this.documentId+'_annotations_stamp',this.downloadCollections.stampObject);}if(this.downloadCollections.stickyObject){window.sessionStorage.setItem(this.documentId+'_annotations_sticky',this.downloadCollections.stickyObject);}if(this.downloadCollections.freeTextObject){window.sessionStorage.setItem(this.documentId+'_annotations_freetext',this.downloadCollections.freeTextObject);}if(this.downloadCollections.inkObject){window.sessionStorage.setItem(this.documentId+'_annotations_ink',this.downloadCollections.inkObject);}}}};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createAnnotationJsonData=function(){// eslint-disable-next-line
var annotationCollection={};var textMarkupAnnotationCollection;var shapeAnnotations;var calibrateAnnotations;var stampAnnotationCollection;var stickyAnnotationCollection;var freeTextAnnotationCollection;var signaturCollection;var signaturInkCollection;this.saveImportedAnnotations();if(this.isTextMarkupAnnotationModule()){this.isJsonExported=true;// eslint-disable-next-line max-len
textMarkupAnnotationCollection=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();}if(this.isShapeAnnotationModule()){this.isJsonExported=true;// eslint-disable-next-line max-len
shapeAnnotations=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();}if(this.isCalibrateAnnotationModule()){this.isJsonExported=true;// eslint-disable-next-line max-len
calibrateAnnotations=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();}if(this.isStampAnnotationModule()){// eslint-disable-next-line max-len
stampAnnotationCollection=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();}if(this.isCommentAnnotationModule()){// eslint-disable-next-line max-len
stickyAnnotationCollection=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();}if(this.isFreeTextAnnotationModule()){// eslint-disable-next-line max-len
freeTextAnnotationCollection=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations();}if(this.isInkAnnotationModule()){// eslint-disable-next-line
signaturInkCollection=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();}if(this.pdfViewer.isSignatureEditable){// eslint-disable-next-line
signaturCollection=this.signatureModule.saveSignature();}else{// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pageCount;j++){annotations[j]=[];}signaturCollection=JSON.stringify(annotations);}for(var s=0;s<this.pageCount;s++){// eslint-disable-next-line max-len
var annotation={textMarkupAnnotation:JSON.parse(textMarkupAnnotationCollection)[s],shapeAnnotation:JSON.parse(shapeAnnotations)[s],measureShapeAnnotation:JSON.parse(calibrateAnnotations)[s],stampAnnotations:JSON.parse(stampAnnotationCollection)[s],// eslint-disable-next-line max-len
stickyNotesAnnotation:JSON.parse(stickyAnnotationCollection)[s],freeTextAnnotation:JSON.parse(freeTextAnnotationCollection)[s],signatureAnnotation:JSON.parse(signaturCollection)[s],signatureInkAnnotation:JSON.parse(signaturInkCollection)[s]};annotationCollection[s]=annotation;}return JSON.stringify(annotationCollection);};// eslint-disable-next-line
PdfViewerBase.prototype.combineImportedData=function(excistingImportAnnotation,newlyImportAnnotation){for(var i=0;i<this.pageCount;i++){if(newlyImportAnnotation[i]){if(excistingImportAnnotation[i]){if(newlyImportAnnotation[i].textMarkupAnnotation&&newlyImportAnnotation[i].textMarkupAnnotation.length!==0){if(excistingImportAnnotation[i].textMarkupAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].textMarkupAnnotation=this.checkImportedData(excistingImportAnnotation[i].textMarkupAnnotation,newlyImportAnnotation[i].textMarkupAnnotation,i);if(newlyImportAnnotation[i].textMarkupAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].textMarkupAnnotation=excistingImportAnnotation[i].textMarkupAnnotation.concat(newlyImportAnnotation[i].textMarkupAnnotation);}}else{excistingImportAnnotation[i].textMarkupAnnotation=newlyImportAnnotation[i].textMarkupAnnotation;}}if(newlyImportAnnotation[i].shapeAnnotation&&newlyImportAnnotation[i].shapeAnnotation.length!==0){if(excistingImportAnnotation[i].shapeAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].shapeAnnotation=this.checkImportedData(excistingImportAnnotation[i].shapeAnnotation,newlyImportAnnotation[i].shapeAnnotation,i);if(newlyImportAnnotation[i].shapeAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].shapeAnnotation=excistingImportAnnotation[i].shapeAnnotation.concat(newlyImportAnnotation[i].shapeAnnotation);}}else{excistingImportAnnotation[i].shapeAnnotation=newlyImportAnnotation[i].shapeAnnotation;}}if(newlyImportAnnotation[i].measureShapeAnnotation&&newlyImportAnnotation[i].measureShapeAnnotation.length!==0){if(excistingImportAnnotation[i].measureShapeAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].measureShapeAnnotation=this.checkImportedData(excistingImportAnnotation[i].measureShapeAnnotation,newlyImportAnnotation[i].measureShapeAnnotation,i);if(newlyImportAnnotation[i].measureShapeAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].measureShapeAnnotation=excistingImportAnnotation[i].measureShapeAnnotation.concat(newlyImportAnnotation[i].measureShapeAnnotation);}}else{excistingImportAnnotation[i].measureShapeAnnotation=newlyImportAnnotation[i].measureShapeAnnotation;}}if(newlyImportAnnotation[i].stampAnnotations&&newlyImportAnnotation[i].stampAnnotations.length!==0){if(excistingImportAnnotation[i].stampAnnotations){// eslint-disable-next-line max-len
newlyImportAnnotation[i].stampAnnotations=this.checkImportedData(excistingImportAnnotation[i].stampAnnotations,newlyImportAnnotation[i].stampAnnotations,i);if(newlyImportAnnotation[i].stampAnnotations.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].stampAnnotations=excistingImportAnnotation[i].stampAnnotations.concat(newlyImportAnnotation[i].stampAnnotations);}}else{excistingImportAnnotation[i].stampAnnotations=newlyImportAnnotation[i].stampAnnotations;}}if(newlyImportAnnotation[i].stickyNotesAnnotation&&newlyImportAnnotation[i].stickyNotesAnnotation.length!==0){if(excistingImportAnnotation[i].stickyNotesAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].stickyNotesAnnotation=this.checkImportedData(excistingImportAnnotation[i].stickyNotesAnnotation,newlyImportAnnotation[i].stickyNotesAnnotation,i);if(newlyImportAnnotation[i].stickyNotesAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].stickyNotesAnnotation=excistingImportAnnotation[i].stickyNotesAnnotation.concat(newlyImportAnnotation[i].stickyNotesAnnotation);}}else{excistingImportAnnotation[i].stickyNotesAnnotation=newlyImportAnnotation[i].stickyNotesAnnotation;}}if(newlyImportAnnotation[i].freeTextAnnotation&&newlyImportAnnotation[i].freeTextAnnotation.length!==0){if(excistingImportAnnotation[i].freeTextAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].freeTextAnnotation=this.checkImportedData(excistingImportAnnotation[i].freeTextAnnotation,newlyImportAnnotation[i].freeTextAnnotation,i);if(newlyImportAnnotation[i].freeTextAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].freeTextAnnotation=excistingImportAnnotation[i].freeTextAnnotation.concat(newlyImportAnnotation[i].freeTextAnnotation);}}else{excistingImportAnnotation[i].freeTextAnnotation=newlyImportAnnotation[i].freeTextAnnotation;}}if(newlyImportAnnotation[i].signatureInkAnnotation&&newlyImportAnnotation[i].signatureInkAnnotation.length!==0){if(excistingImportAnnotation[i].signatureInkAnnotation){// eslint-disable-next-line max-len
newlyImportAnnotation[i].signatureInkAnnotation=this.checkImportedData(excistingImportAnnotation[i].signatureInkAnnotation,newlyImportAnnotation[i].signatureInkAnnotation,i);if(newlyImportAnnotation[i].signatureInkAnnotation.length!==0){// eslint-disable-next-line max-len
excistingImportAnnotation[i].signatureInkAnnotation=excistingImportAnnotation[i].signatureInkAnnotation.concat(newlyImportAnnotation[i].signatureInkAnnotation);}}else{excistingImportAnnotation[i].signatureInkAnnotation=newlyImportAnnotation[i].signatureInkAnnotation;}}}else{// eslint-disable-next-line max-len
var annotation={// eslint-disable-next-line max-len
textMarkupAnnotation:newlyImportAnnotation[i].textMarkupAnnotation,shapeAnnotation:newlyImportAnnotation[i].shapeAnnotation,// eslint-disable-next-line max-len
measureShapeAnnotation:newlyImportAnnotation[i].measureShapeAnnotation,stampAnnotations:newlyImportAnnotation[i].stampAnnotations,// eslint-disable-next-line max-len
stickyNotesAnnotation:newlyImportAnnotation[i].stickyNotesAnnotation,freeTextAnnotation:newlyImportAnnotation[i].freeTextAnnotation,signatureInkAnnotation:newlyImportAnnotation[i].signatureInkAnnotation};excistingImportAnnotation[i]=annotation;}}}return excistingImportAnnotation;};/**
     * @private
     * @returns {boolean} - Returns true or false.
     */PdfViewerBase.prototype.updateExportItem=function(){// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape');// eslint-disable-next-line
var measureObject=window.sessionStorage.getItem(this.documentId+'_annotations_shape_measure');// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.documentId+'_annotations_stamp');// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.documentId+'_annotations_sticky');// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.documentId+'_annotations_textMarkup');// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.documentId+'_annotations_freetext');var isSignatureEditable=false;// eslint-disable-next-line
var inkAnnotationObjct=window.sessionStorage.getItem(this.documentId+'_annotations_ink');if(this.pdfViewer.isSignatureEditable){// eslint-disable-next-line
var signatureObject=window.sessionStorage.getItem(this.documentId+'_annotations_sign');if(signatureObject){isSignatureEditable=true;}}// eslint-disable-next-line max-len
if(shapeObject||measureObject||stampObject||stickyObject||textMarkupObject||freeTextObject||this.isImportAction||this.isStorageExceed||isSignatureEditable||inkAnnotationObjct||this.isAnnotationPresent){return true;}else{return false;}};PdfViewerBase.prototype.isFreeTextAnnotation=function(annotations){var resut=false;if(annotations&&annotations.length>0){resut=annotations.some(function(s){return s.shapeAnnotationType==='FreeText'&&s.subject==='Text Box';});}return resut;};// eslint-disable-next-line
PdfViewerBase.prototype.checkImportedData=function(existingCollection,newCollection,pageIndex){for(var i=0;i<existingCollection.length;i++){for(var j=0;j<newCollection.length;j++){if(existingCollection[i].AnnotName===newCollection[j].AnnotName){newCollection.splice(j,1);j=j-1;}}}if(this.annotationComments){// eslint-disable-next-line
var annotationCollections=this.annotationComments[pageIndex];annotationCollections=this.selectAnnotationCollections(annotationCollections);if(annotationCollections){for(var i=0;i<annotationCollections.length;i++){for(var j=0;j<newCollection.length;j++){if(annotationCollections[i].AnnotName===newCollection[j].AnnotName){newCollection.splice(j,1);j=j-1;}}}}}return newCollection;};/**
     * @param points
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.checkAnnotationWidth=function(points){var width=0;var height=0;var minWidth;var maxWidth;var minHeight;var maxHeight;for(var i=0;i<points.length;i++){if(!minWidth){minWidth=points[i].x;maxWidth=points[i].x;minHeight=points[i].y;maxHeight=points[i].y;}else{if(minWidth>points[i].x){minWidth=points[i].x;}else if(maxWidth<points[i].x){maxWidth=points[i].x;}if(minHeight>points[i].y){minHeight=points[i].y;}else if(maxHeight<points[i].y){maxHeight=points[i].y;}}}width=maxWidth-minWidth;height=maxHeight-minHeight;return{width:width,height:height};};PdfViewerBase.prototype.deleteAnnotations=function(){if(this.pdfViewer.annotationModule){this.pdfViewer.annotations=[];this.pdfViewer.zIndexTable=[];this.pdfViewer.annotationCollection=[];this.pdfViewer.signatureCollection=[];// eslint-disable-next-line
var annotationCollection=this.createAnnotationsCollection();this.annotationComments=annotationCollection;this.documentAnnotationCollections=annotationCollection;this.annotationRenderredList=[];window.sessionStorage.removeItem(this.documentId+'_annotations_shape');window.sessionStorage.removeItem(this.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(this.documentId+'_annotations_stamp');window.sessionStorage.removeItem(this.documentId+'_annotations_sticky');window.sessionStorage.removeItem(this.documentId+'_annotations_textMarkup');window.sessionStorage.removeItem(this.documentId+'_annotations_freetext');window.sessionStorage.removeItem(this.documentId+'_annotations_sign');window.sessionStorage.removeItem(this.documentId+'_annotations_ink');for(var i=0;i<this.pageCount;i++){this.pdfViewer.annotationModule.renderAnnotations(i,null,null,null);this.pdfViewer.renderDrawing(undefined,i);this.pdfViewer.clearSelection(i);var accordionContent=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+(i+1));// eslint-disable-next-line max-len
var accordionContentContainer=document.getElementById(this.pdfViewer.dataId+'_accordionContentContainer');if(accordionContentContainer){if(accordionContentContainer.childElementCount===0){accordionContentContainer.style.display='none';if(document.getElementById(this.pdfViewer.dataId+'_commentsPanelText')){// eslint-disable-next-line max-len
this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],false);document.getElementById(this.pdfViewer.dataId+'_commentsPanelText').style.display='block';}}}}this.isImportedAnnotation=false;this.isImportAction=false;this.importedAnnotation=[];this.annotationPageList=[];this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers=[];this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber=[];this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[];this.isAnnotationCollectionRemoved=true;}};/**
     * @param pageNumber
     * @param isObject
     * @param pageNumber
     * @param isObject
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.createAnnotationsCollection=function(pageNumber,isObject){// eslint-disable-next-line
var annotationCollectionList=[];if(!isObject){for(var i=0;i<this.pageCount;i++){var annotation={// eslint-disable-next-line max-len
textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};annotationCollectionList.push(annotation);}}else{annotationCollectionList={};var annotation={// eslint-disable-next-line max-len
textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};annotationCollectionList[pageNumber]=annotation;}return annotationCollectionList;};/**
     * @param importAnnotation
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.addAnnotation=function(importAnnotation){// eslint-disable-next-line
var pdfAnnotation={};// eslint-disable-next-line
var documentCollections;if(importAnnotation){var isAnnotationObject=false;var annotationCount=1;if(importAnnotation.shapeAnnotationType||importAnnotation.author){isAnnotationObject=true;documentCollections=this.createAnnotationsCollection(importAnnotation.pageNumber,true);}else{if(importAnnotation.length){annotationCount=importAnnotation.length;documentCollections=this.createAnnotationsCollection();}else{isAnnotationObject=true;documentCollections=this.createAnnotationsCollection(importAnnotation.pageNumber,true);}}for(var a=0;a<annotationCount;a++){// eslint-disable-next-line
var annotation=void 0;if(isAnnotationObject){annotation=importAnnotation;}else{annotation=importAnnotation[a];}// eslint-disable-next-line
var newAnnotation={};newAnnotation.ShapeAnnotationType=annotation.shapeAnnotationType;newAnnotation.AnnotationAddMode=annotation.annotationAddMode;newAnnotation.Author=annotation.author;newAnnotation.AnnotationSelectorSettings=annotation.annotationSelectorSettings;newAnnotation.AnnotationSettings=annotation.annotationSettings;newAnnotation.PageNumber=annotation.pageNumber;newAnnotation.ModifiedDate=annotation.modifiedDate;newAnnotation.Subject=annotation.subject;newAnnotation.Note=annotation.note;newAnnotation.AnnotName=annotation.annotationId;newAnnotation.IsCommentLock=annotation.isCommentLock;newAnnotation.Comments=annotation.comments;if(annotation.comments&&annotation.comments.length>0){// eslint-disable-next-line
var comments=[];for(var i=0;i<annotation.comments.length;i++){comments.push(this.updateComments(annotation,annotation.comments[i]));}newAnnotation.Comments=comments;}if(annotation.review){newAnnotation.State=annotation.review.state;newAnnotation.StateModel=annotation.review.stateModel;}newAnnotation.CustomData=annotation.customData;newAnnotation.Opacity=annotation.opacity;if(annotation.shapeAnnotationType==='textMarkup'){newAnnotation.AnnotType='textMarkup';newAnnotation.Color=annotation.color;newAnnotation.IsMultiSelect=annotation.isMultiSelect;newAnnotation.TextMarkupAnnotationType=annotation.textMarkupAnnotationType;newAnnotation.TextMarkupContent=annotation.textMarkupContent;newAnnotation.TextMarkupStartIndex=annotation.textMarkupStartIndex;newAnnotation.TextMarkupEndIndex=annotation.textMarkupEndIndex;if(annotation.rect){newAnnotation.Rect=this.convertBounds(annotation.rect,true);}if(annotation.bounds&&annotation.bounds.length>=1){// eslint-disable-next-line
var bounds=new Array();for(var i=0;i<annotation.bounds.length;i++){bounds.push(this.convertBounds(annotation.bounds[i]));}newAnnotation.Bounds=bounds;}documentCollections[annotation.pageNumber].textMarkupAnnotation.push(newAnnotation);}else if(annotation.shapeAnnotationType==='sticky'){newAnnotation.AnnotType='sticky';newAnnotation.Icon='Comment';newAnnotation.Bounds=this.convertBounds(annotation.bounds);newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.Color=annotation.color;documentCollections[annotation.pageNumber].stickyNotesAnnotation.push(newAnnotation);}else if(annotation.shapeAnnotationType==='FreeText'){newAnnotation.AnnotType='freeText';newAnnotation.Name=annotation.annotationId;newAnnotation.MarkupText=annotation.dynamicText;newAnnotation.Text=annotation.dynamicText;newAnnotation.Note=annotation.dynamicText;newAnnotation.TextAlign=annotation.textAlign;newAnnotation.Thickness=annotation.thicknes;newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.FillColor=annotation.fillColor;newAnnotation.FontColor=annotation.fontColor;newAnnotation.FontSize=annotation.fontSize;newAnnotation.FontFamily=annotation.fontFamily;newAnnotation.Rotate=annotation.rotateAngle;newAnnotation.Bounds=this.convertBounds(annotation.bounds);// eslint-disable-next-line max-len
newAnnotation.Font={'Name':annotation.fontFamily,'Size':annotation.fontSize,'Bold':annotation.font.isBold,'Italic':annotation.font.isItalic,'Strikeout':annotation.font.isStrikeout,'Underline':annotation.font.isUnderline};documentCollections[annotation.pageNumber].freeTextAnnotation.push(newAnnotation);}else if(annotation.shapeAnnotationType==='stamp'){newAnnotation.AnnotType='stamp';newAnnotation.Icon=annotation.icon;newAnnotation.isDynamic=false;newAnnotation.Rect=this.convertBounds(annotation.bounds,false,true);newAnnotation.RotateAngle=annotation.rotateAngle;newAnnotation.FillColor=annotation.fillColor;newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.StampAnnotationType=annotation.stampAnnotationType;newAnnotation.CreationDate=annotation.creationDate;if(annotation.stampAnnotationType==='image'){// eslint-disable-next-line
var apperarance=[];// eslint-disable-next-line
var imageData={'imagedata':annotation.stampAnnotationPath};apperarance.push(imageData);newAnnotation.Apperarance=apperarance;}if(annotation.isDynamicStamp){newAnnotation.IsDynamic=true;newAnnotation.StrokeColor=annotation.stampFillcolor;// eslint-disable-next-line
var apperarance=[];// eslint-disable-next-line
var imageData={'type':'string','text':annotation.dynamicText,'currentFontname':'95b303ab-d397-438a-83af-e2ff8a9900f1','baseFontName':'Helvetica-BoldOblique','fontSize':10,'isImport':true};apperarance.push(imageData);newAnnotation.Apperarance=apperarance;}documentCollections[annotation.pageNumber].stampAnnotations.push(newAnnotation);}else if(annotation.shapeAnnotationType==='Ink'||annotation.shapeAnnotationType==='Signature'){newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.FillColor=annotation.fillColor;newAnnotation.Thickness=annotation.thickness;newAnnotation.Bounds=this.convertBounds(annotation.bounds);newAnnotation.PathData=annotation.data;newAnnotation.pageIndex=annotation.pageNumber;if(annotation.shapeAnnotationType==='Ink'){newAnnotation.AnnotType='Ink';newAnnotation.IsPathData=true;documentCollections[annotation.pageNumber].signatureInkAnnotation.push(newAnnotation);}if(annotation.shapeAnnotationType==='Signature'){newAnnotation.AnnotType='Signature';newAnnotation.SignatureName=annotation.annotationId;newAnnotation.IsSignature=true;documentCollections[annotation.pageNumber].signatureAnnotation.push(newAnnotation);}}else{// eslint-disable-next-line max-len
if(annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='LineWidthArrowHead'||annotation.shapeAnnotationType==='Polyline'||annotation.shapeAnnotationType==='Polygon'||annotation.shapeAnnotationType==='Polyline'||annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Oval'||annotation.shapeAnnotationType==='Rectangle'||annotation.shapeAnnotationType==='Square'||annotation.shapeAnnotationType==='Ellipse'){newAnnotation.AnnotType='shape';newAnnotation.StrokeColor=annotation.strokeColor;newAnnotation.FillColor=annotation.fillColor;newAnnotation.Thickness=annotation.thickness;newAnnotation.BorderStyle=annotation.borderStyle;newAnnotation.BorderDashArray=annotation.borderDashArray;newAnnotation.RotateAngle=annotation.rotateAngle;newAnnotation.IsCloudShape=annotation.isCloudShape;newAnnotation.CloudIntensity=annotation.cloudIntensity;newAnnotation.RectangleDifference=annotation.rectangleDifference;newAnnotation.LineHeadStart=annotation.lineHeadStart;newAnnotation.LineHeadEnd=annotation.lineHeadEnd;newAnnotation.IsLocked=annotation.isLocked;newAnnotation.EnableShapeLabel=annotation.enableShapeLabel;newAnnotation.LabelContent=annotation.labelContent;newAnnotation.LabelFillColor=annotation.labelFillColor;newAnnotation.LabelBorderColor=annotation.labelBorderColor;newAnnotation.FontColor=annotation.fontColor;newAnnotation.FontSize=annotation.fontSize;newAnnotation.LabelBounds=this.convertBounds(annotation.labelBounds);newAnnotation.LabelSettings=annotation.labelSettings;newAnnotation.Bounds=this.convertBounds(annotation.bounds);newAnnotation.LeaderLength=annotation.leaderLength;newAnnotation.LeaderLineExtenstion=annotation.leaderLineExtension;if(annotation.vertexPoints&&annotation.vertexPoints.length>=1){// eslint-disable-next-line
var points=new Array();for(var i=0;i<annotation.vertexPoints.length;i++){points.push(this.convertVertexPoints(annotation.vertexPoints[i]));}newAnnotation.VertexPoints=points;}newAnnotation.EnableShapeLabel=annotation.enableShapeLabel;// eslint-disable-next-line max-len
if(annotation.subject==='Distance calculation'||annotation.subject==='Perimeter calculation'||annotation.subject==='Area calculation'||annotation.subject==='Radius calculation'||annotation.subject==='Volume calculation'){newAnnotation.AnnotType='shape_measure';// eslint-disable-next-line
var calibrate=annotation.calibrate;if(calibrate){// eslint-disable-next-line
newAnnotation.Calibrate={'Ratio':calibrate.ratio,'X':[{'Unit':calibrate.x[0].unit,'ConversionFactor':calibrate.x[0].conversionFactor,'FractionalType':calibrate.x[0].fractionalType,'Denominator':calibrate.x[0].denominator,'FormatDenominator':calibrate.x[0].formatDenominator}],// eslint-disable-next-line
'Distance':[{'Unit':calibrate.distance[0].unit,'ConversionFactor':calibrate.distance[0].conversionFactor,'FractionalType':calibrate.distance[0].fractionalType,'Denominator':calibrate.distance[0].denominator,'FormatDenominator':calibrate.distance[0].formatDenominator}],// eslint-disable-next-line
'Area':[{'Unit':calibrate.area[0].unit,'ConversionFactor':calibrate.area[0].conversionFactor,'FractionalType':calibrate.area[0].fractionalType,'Denominator':calibrate.area[0].denominator,'FormatDenominator':calibrate.area[0].formatDenominator}],// eslint-disable-next-line
'Angle':null,'Volume':null,'TargetUnitConversion':calibrate.targetUnitConversion,'Depth':calibrate.depth};}newAnnotation.Indent=annotation.indent;newAnnotation.Caption=annotation.caption;newAnnotation.CaptionPosition=annotation.captionPosition;newAnnotation.LeaderLineExtension=annotation.leaderLineExtension;newAnnotation.LeaderLength=annotation.leaderLength;newAnnotation.LeaderLineOffset=annotation.leaderLineOffset;documentCollections[annotation.pageNumber].measureShapeAnnotation.push(newAnnotation);}else{documentCollections[annotation.pageNumber].shapeAnnotation.push(newAnnotation);}}}}pdfAnnotation.pdfAnnotation=documentCollections;this.pdfViewer.importAnnotation(pdfAnnotation);}};/**
     * @param bounds
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.convertBounds=function(bounds,isRect,isStamp){if(bounds){if(isRect){var left=bounds.left?bounds.left:bounds.Left?bounds.Left:0;var right=bounds.right?bounds.right:bounds.Right?bounds.Right:0;var bottom=bounds.bottom?bounds.bottom:bounds.Bottom?bounds.Bottom:0;var top_4=bounds.top?bounds.top:bounds.Top?bounds.Top:0;return{left:left,right:right,bottom:bottom,top:top_4};}else{var x=bounds.x?bounds.x:bounds.left?bounds.left:bounds.Left?bounds.Left:0;var y=bounds.y?bounds.y:bounds.top?bounds.top:bounds.Top?bounds.Top:0;var width=bounds.width?bounds.width:bounds.Width?bounds.Width:0;var height=bounds.height?bounds.height:bounds.Height?bounds.Height:0;if(isStamp){return{X:this.ConvertPixelToPoint(x),Y:this.ConvertPixelToPoint(y),Left:this.ConvertPixelToPoint(x),Top:this.ConvertPixelToPoint(y),Height:this.ConvertPixelToPoint(height),Width:this.ConvertPixelToPoint(width)};}else{return{X:x,Y:y,Left:x,Top:y,Height:height,Width:width};}}}};// eslint-disable-next-line
PdfViewerBase.prototype.ConvertPixelToPoint=function(number){return number*(72/96);};// eslint-disable-next-line
PdfViewerBase.prototype.convertVertexPoints=function(points){if(points){var x=points.x?points.x:points.X?points.X:0;var y=points.y?points.y:points.Y?points.Y:0;return{X:x,Y:y,Left:x,Top:y};}};// eslint-disable-next-line
PdfViewerBase.prototype.updateComments=function(annotation,comments){if(annotation&&comments){// eslint-disable-next-line
var newAnnotation={};newAnnotation.ShapeAnnotationType=annotation.shapeAnnotationType;newAnnotation.Author=comments.author;newAnnotation.AnnotationSelectorSettings=annotation.annotationSelectorSettings;newAnnotation.AnnotationSettings=annotation.annotationSettings;newAnnotation.PageNumber=annotation.pageNumber;newAnnotation.ModifiedDate=comments.modifiedDate;newAnnotation.Subject=annotation.subject;newAnnotation.Note=comments.note;newAnnotation.AnnotName=comments.annotName;newAnnotation.Comments=comments.comments;newAnnotation.State=comments.review.state;newAnnotation.StateModel=comments.review.stateModel;newAnnotation.CustomData=annotation.customData;newAnnotation.IsLock=comments.isLock;return newAnnotation;}};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.removeFocus=function(){// eslint-disable-next-line
var currentPageContainer=this.pdfViewer.element.querySelector('#'+this.pdfViewer.dataId+'_totalPage');// eslint-disable-next-line max-len
if(currentPageContainer&&currentPageContainer.firstElementChild&&currentPageContainer.firstElementChild.firstElementChild){currentPageContainer.firstElementChild.firstElementChild.blur();}};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.updateDocumentEditedProperty=function(isEdited){this.pdfViewer.allowServerDataBinding=true;this.pdfViewer.isDocumentEdited=isEdited;this.pdfViewer.updatePdfViewerOptions("IsDocumentEdited",isEdited);this.pdfViewer.allowServerDataBinding=false;};/**
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.fireDocumentEditedEvent=function(editOption){var eventArgs={EditingAction:editOption};this.pdfViewer._dotnetInstance.invokeMethodAsync('Trigger','DocumentEdited',eventArgs);};/**
    * @private
    */PdfViewerBase.prototype.getWindowDevicePixelRatio=function(){var devicePixelRatio=window.devicePixelRatio;if(!sf.base.Browser.isDevice){return devicePixelRatio;}else{return devicePixelRatio=2;}};/**
    * @private
    */PdfViewerBase.prototype.getZoomRatio=function(zoom){var zoomFactor=this.getZoomFactor();var zoomValue=zoom?zoom:1;var ratio;var devicePixelRatio=this.getWindowDevicePixelRatio();if(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&zoomFactor<=0.7){ratio=zoomValue*devicePixelRatio;}else{ratio=zoomValue;}return ratio;};/**
    * @private
    */PdfViewerBase.prototype.importJsonForRotatedDocuments=function(Rotate,pageNumber,bounds,originalRotation){// eslint-disable-next-line
var rotateAngle=Math.abs(Rotate);var pageDetails=this.pageSize[pageNumber];//originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;
if(originalRotation!==pageDetails.rotation){rotateAngle=this.getRotationAngle(originalRotation,pageNumber);this.isPageRotated=true;}else{rotateAngle=0;this.isPageRotated=false;}if(rotateAngle===1){return{X:pageDetails.width-bounds.Y-bounds.Height,Y:bounds.X,Height:bounds.Width,Width:bounds.Height};}else if(rotateAngle===2){return{X:pageDetails.width-bounds.X-bounds.Width,Y:pageDetails.height-bounds.Y-bounds.Height,Height:bounds.Height,Width:bounds.Width};}else if(rotateAngle===3){return{X:bounds.Y,Y:pageDetails.height-bounds.X-bounds.Width,Height:bounds.Width,Width:bounds.Height};}else{return bounds;}};/**
    * @private
    */PdfViewerBase.prototype.getRotationAngle=function(originalRotation,pageNumber){var pageDetails=this.pageSize[pageNumber];originalRotation=Math.abs(originalRotation);var rotateAngle;if(originalRotation===0){return rotateAngle=pageDetails.rotation;}else if(originalRotation===1||originalRotation===90){if(pageDetails.rotation==0){return rotateAngle=3;}else if(pageDetails.rotation===2){return rotateAngle=1;}else if(pageDetails.rotation===3){return rotateAngle=2;}}else if(originalRotation===2||originalRotation===180){if(pageDetails.rotation==0){return rotateAngle=2;}else if(pageDetails.rotation===1){return rotateAngle=3;}else if(pageDetails.rotation===3){return rotateAngle=1;}}else if(originalRotation===3||originalRotation===270){if(pageDetails.rotation==0){return rotateAngle=1;}else if(pageDetails.rotation===2){return rotateAngle=3;}else if(pageDetails.rotation===1){return rotateAngle=2;}}};/**
    * @private
    */PdfViewerBase.prototype.calculateVertexPoints=function(Rotate,pageNumber,vertexPoints,originalRotation){// eslint-disable-next-line
var rotateAngle=Math.abs(Rotate);var vPoints=[];var pageDetails=this.pageSize[pageNumber];var x;var y;var point;//originalRotation = !isNullOrUndefined(originalRotation) ? originalRotation : pageDetails.rotation;
if(originalRotation!==pageDetails.rotation){rotateAngle=this.getRotationAngle(originalRotation,pageNumber);}else{rotateAngle=0;}for(var j=0;j<vertexPoints.length;j++){if(rotateAngle===1){x=vertexPoints[j].Y?pageDetails.width-vertexPoints[j].Y:pageDetails.width-vertexPoints[j].y;y=vertexPoints[j].X?vertexPoints[j].X:vertexPoints[j].x;point={x:x,y:y};vPoints.push(point);}else if(rotateAngle===2){x=vertexPoints[j].X?pageDetails.width-vertexPoints[j].X:pageDetails.width-vertexPoints[j].x;y=vertexPoints[j].Y?pageDetails.height-vertexPoints[j].Y:pageDetails.height-vertexPoints[j].y;var point_1={x:x,y:y};vPoints.push(point_1);}else if(rotateAngle==3){x=vertexPoints[j].Y?vertexPoints[j].Y:vertexPoints[j].y;y=vertexPoints[j].X?pageDetails.height-vertexPoints[j].X:pageDetails.height-vertexPoints[j].x;point={x:x,y:y};vPoints.push(point);}else{x=vertexPoints[j].X?vertexPoints[j].X:vertexPoints[j].x;y=vertexPoints[j].Y?vertexPoints[j].Y:vertexPoints[j].y;var point_2={x:x,y:y};vPoints.push(point_2);}}return vPoints;};/**
    * @private
    */PdfViewerBase.prototype.setLinksInClientSide=function(links){var data=JSON.parse(links);if(data){for(var i=data.startIndex;i<data.endIndex;i++){var hyperlinkId=this.documentId+'_'+i+'_hyperlinkAndLinkAnnotation';if(this.hyperlinkAndLinkAnnotation&&!this.hyperlinkAndLinkAnnotation[hyperlinkId]){var hyperlink=JSON.parse(data.hyperlinikCollection[i]);var storeObject={hyperlinks:hyperlink['hyperlinks'],hyperlinkBounds:hyperlink['hyperlinkBounds'],linkAnnotation:hyperlink['linkAnnotation'],linkPage:hyperlink['linkPage'],annotationLocation:hyperlink['annotationLocation'],textContent:hyperlink['textContent'],width:hyperlink['width'],textBounds:hyperlink['textBounds'],pageText:hyperlink['pageText'],rotation:hyperlink['rotation'],scaleFactor:hyperlink['scaleFactor'],uniqueId:hyperlink['uniqueId'],zoomFactor:hyperlink['zoomFactor'],hyperLinkBorderWidth:hyperlink["hyperLinkBorderWidth"],hyperLinkBorderColor:hyperlink["hyperLinkBorderColor"],textWebLinkBorderWidth:hyperlink["textWebLinkBorderWidth"],textWebLinkBorderColor:hyperlink["textWebLinkBorderColor"]};if(this.pageSize[i]){// eslint-disable-next-line
this.pageSize[i].rotation=parseFloat(hyperlink['rotation']);}this.hyperlinkAndLinkAnnotation[hyperlinkId]=JSON.stringify(storeObject);}}}};/**
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
PdfViewerBase.prototype.getLinkInformation=function(pageIndex,isTextSearch){var zoomFactor=this.retrieveCurrentZoomFactor();if(sf.base.Browser.isDevice&&zoomFactor>1){zoomFactor=1;}if(this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering){zoomFactor=1;}var id=this.documentId+'_'+pageIndex;var storedImage=this.pageImageDetails?this.pageImageDetails[id+'_'+zoomFactor+'_imageUrl']?this.pageImageDetails[id+'_'+zoomFactor+'_imageUrl']:this.getPinchZoomPage(pageIndex):this.getPinchZoomPage(pageIndex);var storedHyperlink=this.hyperlinkAndLinkAnnotation?this.hyperlinkAndLinkAnnotation[id+'_hyperlinkAndLinkAnnotation']?this.hyperlinkAndLinkAnnotation[id+'_hyperlinkAndLinkAnnotation']:this.getPinchZoomPage(pageIndex):this.getPinchZoomPage(pageIndex);var storedTextDetails=this.pageTextDetails?this.pageTextDetails[id+'_textDetails']?this.pageTextDetails[id+'_textDetails']:this.getPinchZoomPage(pageIndex):this.getPinchZoomPage(pageIndex);if(!storedImage){// eslint-disable-next-line
var storedTileData=this.getStoredTileImageDetails(pageIndex,0,0,zoomFactor);if(storedTileData){storedImage=storedTileData;}}// eslint-disable-next-line
var imageUrl=null;var linkAnnotation=null;var textDetails=null;var mergedObj=null;if(storedImage&&storedHyperlink){// eslint-disable-next-line
imageUrl=JSON.parse(storedImage);linkAnnotation=JSON.parse(storedHyperlink);textDetails=JSON.parse(storedTextDetails);mergedObj=Object.assign({},imageUrl,linkAnnotation,textDetails);this.isPinchZoomStorage=false;}return mergedObj;};/**
    * @private
    */PdfViewerBase.prototype.getSanitizedString=function(annotationData){var sanitizedString=annotationData.replace(/[\x00-\x1F\x7F]/g,function(c){return"\\u"+c.charCodeAt(0).toString(16).padStart(4,'0');});return sanitizedString;};/**
    * @private
    */PdfViewerBase.prototype.isSignaturePathData=function(data){// eslint-disable-next-line
var pathRegex=/^([Mm]\s*\d+(\.\d+)?\s*,\s*\d+(\.\d+)?(\s+[Ll]\s*\d+(\.\d+)?\s*,\s*\d+(\.\d+)?)*\s*)+$/;return pathRegex.test(data);};/**
    * @private
    */PdfViewerBase.prototype.isSignatureImageData=function(data){// eslint-disable-next-line
var base64ImageRegex=/^data:image\/([a-z]+);base64,/;return base64ImageRegex.test(data);};return PdfViewerBase;}();/**
 * TextLayer module is used to handle the text content on the control.
 *
 * @hidden
 */var TextLayer=/** @class */function(){/**
     * @param {PdfViewer} pdfViewer - The PdfViewer.
     * @param {PdfViewerBase} pdfViewerBase - The PdfViewerBase.
     * @private
     */function TextLayer(pdfViewer,pdfViewerBase){var _this=this;// eslint-disable-next-line
this.textBoundsArray=[];/**
         * @private
         */ // eslint-disable-next-line
this.characterBound=[];/**
         * @returns {void}
         */this.closeNotification=function(){_this.notifyDialog.hide();};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param {number} pageNumber - The pageNumber.
     * @param {number} pageWidth - The pageWidth.
     * @param {number} pageHeight - The pageHeight.
     * @param {HTMLElement} pageDiv - The pageDiv.
     * @returns {HTMLElement} - The HTMLElement.
     * @private
     */TextLayer.prototype.addTextLayer=function(pageNumber,pageWidth,pageHeight,pageDiv){var textDiv=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageNumber);var textLayer;if(!textDiv){textLayer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_textLayer_'+pageNumber,className:'e-pv-text-layer'});textLayer.style.width=pageWidth+'px';textLayer.style.height=pageHeight+'px';pageDiv.appendChild(textLayer);}this.pdfViewerBase.applyElementStyles(textLayer,pageNumber);return textLayer;};/**
     * @param {number} pageNumber - The pageNumber.
     * @param {any} textContents - The textContents.
     * @param {any} textBounds - The textBounds.
     * @param {any} rotation - The rotation.
     * @returns {void}
     * @private
     */ // eslint-disable-next-line
TextLayer.prototype.renderTextContents=function(pageNumber,textContents,textBounds,rotation){var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageNumber);var canvasElement=sf.base.createElement("canvas");var isRTLText=false;if(canvasElement&&textLayer.childNodes.length===0){for(var i=0;i<textContents.length;i++){// eslint-disable-next-line
var bounds=textBounds[i];// eslint-disable-next-line max-len
var textDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_text_'+pageNumber+'_'+i,className:'e-pv-text'});var textContent=textContents[i];textDiv.textContent=textContent.replace(/&nbsp;/g,' ');// eslint-disable-next-line
var newLine=textContents[i].replace(/  +/g,' ');if(newLine!==' '){textDiv.style.whiteSpace='pre';}if(textContent===' '){textDiv.style.whiteSpace='pre';}if(!sf.base.isNullOrUndefined(textDiv.textContent)&&textContent!==" "){isRTLText=this.pdfViewerBase.checkIsRtlText(textDiv.textContent);textDiv.style.direction=isRTLText?'rtl':'ltr';}else{textDiv.style.direction=isRTLText?'rtl':'ltr';}if(bounds){this.setStyleToTextDiv(textDiv,bounds.X,bounds.Y,bounds.Bottom,bounds.Width,bounds.Height,bounds.Rotation);}this.setTextElementProperties(textDiv);var context=canvasElement.getContext('2d');context.font=textDiv.style.fontSize+' '+textDiv.style.fontFamily;var contextWidth=context.measureText(textContents[i].replace(/(\r\n|\n|\r)/gm,'')).width;if(bounds){var scale=void 0;if(bounds.Rotation===90||bounds.Rotation===270){scale=bounds.Height*this.pdfViewerBase.getZoomFactor()/contextWidth;}else{scale=bounds.Width*this.pdfViewerBase.getZoomFactor()/contextWidth;}this.applyTextRotation(scale,textDiv,rotation,bounds.Rotation,bounds);}textLayer.appendChild(textDiv);// ES-845366- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.
this.resizeExcessDiv(textLayer,textDiv);// eslint-disable-next-line max-len
if(this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.pdfViewerBase.isTextSelectionDisabled&&textDiv.className!=='e-pdfviewer-formFields'&&textDiv.className!=='e-pdfviewer-signatureformfields'&&textDiv.className!=='e-pdfviewer-signatureformfields-signature'){textDiv.classList.add('e-pv-cursor');}}}};/**
     * @param pageNumber
     * @param textContents
     * @param textBounds
     * @param rotation
     * @param isTextSearch
     * @param pageNumber
     * @param textContents
     * @param textBounds
     * @param rotation
     * @param isTextSearch
     * @private
     */ // eslint-disable-next-line
TextLayer.prototype.resizeTextContents=function(pageNumber,textContents,textBounds,rotation,isTextSearch){var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageNumber);var canvasElement=sf.base.createElement("canvas");if(canvasElement){for(var i=0;i<textLayer.childNodes.length;i++){// eslint-disable-next-line
var bounds=void 0;var textDiv=this.pdfViewerBase.getElement('_text_'+pageNumber+'_'+i);if(sf.base.isNullOrUndefined(textDiv)){break;}if(textBounds){bounds=textBounds[i];if(bounds){this.setStyleToTextDiv(textDiv,bounds.X,bounds.Y,bounds.Bottom,bounds.Width,bounds.Height,bounds.Rotation);}}this.setTextElementProperties(textDiv);var context=canvasElement.getContext('2d');context.font=textDiv.style.fontSize+' '+textDiv.style.fontFamily;var contextWidth=void 0;if(textContents){var textContent=textContents[i];if(textContent){contextWidth=context.measureText(textContent.replace(/(\r\n|\n|\r)/gm,'')).width;}}else{contextWidth=context.measureText(textDiv.textContent.replace(/(\r\n|\n|\r)/gm,'')).width;}if(bounds){var scale=void 0;if(bounds.Rotation===90||bounds.Rotation===270){scale=bounds.Height*this.pdfViewerBase.getZoomFactor()/contextWidth;}else{scale=bounds.Width*this.pdfViewerBase.getZoomFactor()/contextWidth;}this.applyTextRotation(scale,textDiv,rotation,bounds.Rotation,bounds);}// ES-845366- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.
this.resizeExcessDiv(textLayer,textDiv);}}else{textLayer.parentElement.removeChild(textLayer);}if(this.pdfViewer.textSearch){if(!isTextSearch){this.pdfViewer.textSearch.resizeSearchElements(pageNumber);}}};TextLayer.prototype.applyTextRotation=function(scale,textDiv,rotation,textRotation,bounds){var scaleString='scaleX('+scale+')';if(rotation===0){if(textRotation===0){textDiv.style.transform=scaleString;}else if(textRotation===90){textDiv.style.left=(bounds.X+bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=bounds.Y*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotation+'deg) '+scaleString;}else if(textRotation===180){textDiv.style.left=(bounds.X+bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y+bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotation+'deg) '+scaleString;}else if(textRotation===270){textDiv.style.left=bounds.X*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y+bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotation+'deg) '+scaleString;}else{textDiv.style.transform=scaleString;}}else if(rotation===1){var textRotationAngle=textRotation+90;if(textRotationAngle>=360){textRotationAngle-=360;}if(textRotation===0){textDiv.style.transform='rotate(90deg) '+scaleString;}else if(textRotation===90){textDiv.style.left=bounds.X*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y+bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===180){textDiv.style.left=(bounds.X-bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y+bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===270){textDiv.style.left=(bounds.X-bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=bounds.Y*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else{textDiv.style.transform='rotate(90deg) '+scaleString;}}else if(rotation===2){var textRotationAngle=textRotation+180;if(textRotationAngle>=360){textRotationAngle-=360;}if(textRotation===0){textDiv.style.transform='rotate(180deg) '+scaleString;}else if(textRotation===90){textDiv.style.left=(bounds.X-bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=bounds.Y*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===180){textDiv.style.left=(bounds.X-bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y-bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===270){textDiv.style.left=bounds.X*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y-bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else{textDiv.style.transform='rotate(180deg) '+scaleString;}}else if(rotation===3){var textRotationAngle=textRotation+270;if(textRotationAngle>=360){textRotationAngle-=360;}if(textRotation===0){textDiv.style.transform='rotate(270deg) '+scaleString;}else if(textRotation===90){textDiv.style.left=bounds.X*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y-bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===180){textDiv.style.left=(bounds.X+bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=(bounds.Y-bounds.Width)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else if(textRotation===270){textDiv.style.left=(bounds.X+bounds.Height)*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.top=bounds.Y*this.pdfViewerBase.getZoomFactor()+"px";textDiv.style.transform='rotate('+textRotationAngle+'deg) '+scaleString;}else{textDiv.style.transform='rotate(270deg) '+scaleString;}}};TextLayer.prototype.setTextElementProperties=function(textDiv){textDiv.style.fontFamily='serif';textDiv.style.transformOrigin='0% 0%';};/**
     * @param {number} pageNumber - The pageNumber.
     * @returns {void}
     * @private
     */TextLayer.prototype.resizeTextContentsOnZoom=function(pageNumber){// eslint-disable-next-line max-len
var renderObject=this.pdfViewerBase.pageTextDetails[this.pdfViewerBase.getDocumentId()+'_'+pageNumber+"_textDetails"];// eslint-disable-next-line
var textBounds=[];var textContents=[];// eslint-disable-next-line
var rotation;if(renderObject){// eslint-disable-next-line
var data=JSON.parse(renderObject);// eslint-disable-next-line
textBounds=data['textBounds'];// eslint-disable-next-line
textContents=data['textContent'];// eslint-disable-next-line
rotation=data['rotation'];}if(textBounds.length!==0){this.textBoundsArray.push({pageNumber:pageNumber,textBounds:textBounds});this.resizeTextContents(pageNumber,textContents,textBounds,rotation);}else{// eslint-disable-next-line
var textElements=this.textBoundsArray.filter(function(obj){return obj.pageNumber===pageNumber;});if(textElements){if(textElements.length!==0){// eslint-disable-next-line
textBounds=textElements[0]['textBounds'];this.resizeTextContents(pageNumber,null,textBounds,rotation);}}}};/**
    * ES-845366- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.
    */TextLayer.prototype.resizeExcessDiv=function(textLayer,textDiv){// ES-845366- Optimize performance by eliminating unnecessary getBoundingClientRect usage in this method.
// const textLayerPosition: ClientRect = textLayer.getBoundingClientRect();
// const textDivPosition: ClientRect = textDiv.getBoundingClientRect();
// // eslint-disable-next-line max-len
// if ((textDivPosition.width + textDivPosition.left) >= (textLayerPosition.width + textLayerPosition.left) || (textDivPosition.width > textLayerPosition.width)) {
//     // 'auto' width is set to reset the size of the div to its contents.
//     textDiv.style.width = 'auto';
//     // Client width gets reset by 'auto' width property which has the width of the content.
//     textDiv.style.width = textDiv.clientWidth + 'px';
// }
};/**
     * @private
     * @param {boolean} isPinchZoomed - The isPinchZoomed.
     * @returns {void}
     */TextLayer.prototype.clearTextLayers=function(isPinchZoomed){var lowerPageValue=this.pdfViewerBase.currentPageNumber-3;lowerPageValue=lowerPageValue>0?lowerPageValue:0;var higherPageValue=this.pdfViewerBase.currentPageNumber+1;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;var textLayers=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(var i=0;i<textLayers.length;i++){textLayers[i].style.display='block';if(this.pdfViewerBase.getMagnified()&&(this.getTextSelectionStatus()||this.getTextSearchStatus())){// eslint-disable-next-line radix
var pageNumber=parseInt(textLayers[i].id.split('_textLayer_')[1]);if(!(lowerPageValue+1<=pageNumber&&pageNumber<=higherPageValue-1)){this.removeElement(textLayers[i],isPinchZoomed);}}else if(this.pdfViewerBase.getPinchZoomed()){this.removeElement(textLayers[i],isPinchZoomed);}else{this.removeElement(textLayers[i],isPinchZoomed);}}};TextLayer.prototype.removeElement=function(element,isPinchZoomed){if(isPinchZoomed){this.removeForeignObjects(element);}else{if(sf.base.Browser.isIE){if(element.parentElement){element.parentElement.removeChild(element);}else if(element.parentNode){element.parentNode.removeChild(element);}}else{element.remove();}}};TextLayer.prototype.removeForeignObjects=function(element){// eslint-disable-next-line
var childElement=element.getElementsByClassName('foreign-object');if(childElement){for(var i=0;i<childElement.length;i++){if(childElement[i].parentElement.className==='e-pv-text-layer'){element.removeChild(childElement[0]);}}}};/**
     * @param pageNumber
     * @param divId
     * @param fromOffset
     * @param toOffset
     * @param textString
     * @param className
     * @private
     */ // eslint-disable-next-line max-len
TextLayer.prototype.convertToSpan=function(pageNumber,divId,fromOffset,toOffset,textString,className,isRTLText){var textDiv=this.pdfViewerBase.getElement('_text_'+pageNumber+'_'+divId);var textContent=textString.substring(fromOffset,toOffset);var node=document.createTextNode(textContent);if(className){var spanElement=sf.base.createElement('span');spanElement.className=className+' e-pv-text';if(isRTLText){if(toOffset===textString.length){spanElement.style.left=0+'px';spanElement.style.top=0+'px';}else{if(textDiv.style.direction=='rtl'){var currentText=textDiv.textContent;textDiv.textContent=textString.substring(toOffset,textString.length);var textBounds=textDiv.getBoundingClientRect();spanElement.style.left=textBounds.width+'px';spanElement.style.top=0+'px';textDiv.textContent=currentText;}}}spanElement.appendChild(node);textDiv.appendChild(spanElement);}else{textDiv.appendChild(node);}};/**
     * @param startPage
     * @param endPage
     * @param anchorOffsetDiv
     * @param focusOffsetDiv
     * @param anchorOffset
     * @param focusOffset
     * @private
     */ // eslint-disable-next-line max-len
TextLayer.prototype.applySpanForSelection=function(startPage,endPage,anchorOffsetDiv,focusOffsetDiv,anchorOffset,focusOffset){if(this.pdfViewer.textSelectionModule){for(var i=startPage;i<=endPage;i++){var storedData=JSON.parse(this.pdfViewerBase.pageTextDetails[this.pdfViewerBase.documentId+'_'+i+'_textDetails']);var pageText=storedData["pageText"];var isRTLText=this.pdfViewerBase.checkIsRtlText(pageText);var startId=void 0;var endId=void 0;// eslint-disable-next-line
var textDivs=this.pdfViewerBase.getElement('_textLayer_'+i).childNodes;if(i===startPage){startId=anchorOffsetDiv;endId=textDivs.length-1;}else if(i===endPage){startId=0;endId=focusOffsetDiv;}else{startId=0;endId=textDivs.length-1;}if(startPage===endPage){startId=anchorOffsetDiv;endId=focusOffsetDiv;}for(var j=startId;j<=endId;j++){var textDiv=this.pdfViewerBase.getElement('_text_'+i+'_'+j);var initId=void 0;var lastId=void 0;var length_1=void 0;if(textDiv&&textDiv.textContent){length_1=textDiv.textContent.length;var textContent=textDiv.textContent;textDiv.textContent='';if(j===startId){if(i===startPage){initId=anchorOffset;}else{initId=0;}lastId=length_1;this.convertToSpan(i,j,0,initId,textContent,null,isRTLText);}else if(j===endId&&i===endPage){initId=0;lastId=focusOffset;}else{initId=0;lastId=length_1;}if(startId===endId&&startPage===endPage){initId=anchorOffset;lastId=focusOffset;}this.convertToSpan(i,j,initId,lastId,textContent,'e-pv-maintaincontent',isRTLText);if(j===endId&&i===endPage){this.convertToSpan(i,j,lastId,textContent.length,textContent,null,isRTLText);}}}}}};/**
     * @private
     * @returns {void}
     */TextLayer.prototype.clearDivSelection=function(){var textLayers=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(var i=0;i<textLayers.length;i++){var childNodes=textLayers[i].childNodes;for(var j=0;j<childNodes.length;j++){var textDiv=childNodes[j];// eslint-disable-next-line max-len
if(textDiv.className!=='e-pdfviewer-formFields'&&textDiv.className!=='e-pdfviewer-signatureformfields'&&textDiv.className!=='e-pdfviewer-signatureformfields-signature'){var textContent=textDiv.textContent;// eslint-disable-next-line max-len
if(textDiv.childNodes.length>1||textDiv.childNodes.length===1&&textDiv.childNodes[0].tagName==='SPAN'){textDiv.textContent='';textDiv.textContent=textContent;}}}}};// eslint-disable-next-line
TextLayer.prototype.setStyleToTextDiv=function(textDiv,left,top,bottom,width,height,rotation){textDiv.style.left=left*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.top=top*this.pdfViewerBase.getZoomFactor()+'px';var textHeight;if(rotation===90||rotation===270){textHeight=width*this.pdfViewerBase.getZoomFactor();}else{textHeight=height*this.pdfViewerBase.getZoomFactor();}textDiv.style.height=textHeight+'px';textDiv.style.fontSize=textHeight+'px';};TextLayer.prototype.getTextSelectionStatus=function(){if(this.pdfViewer.textSelectionModule){return this.pdfViewer.textSelectionModule.isTextSelection;}else{return false;}};/**
     * @param {boolean} isAdd - The isAdd.
     * @returns {void}
     * @private
     */TextLayer.prototype.modifyTextCursor=function(isAdd){var textLayerList=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(var i=0;i<textLayerList.length;i++){var childNodes=textLayerList[i].childNodes;for(var j=0;j<childNodes.length;j++){var textElement=childNodes[j];// eslint-disable-next-line max-len
if(isAdd&&textElement.className!=='e-pdfviewer-formFields'&&textElement.className!=='e-pdfviewer-signatureformfields'&&textElement.className!=='e-pdfviewer-signatureformfields-signature'){textElement.classList.add('e-pv-cursor');}else{textElement.classList.remove('e-pv-cursor');}}}};/**
     * @param {Selection} selection - The Selection.
     * @returns {boolean} - Returns true or false.
     * @private
     */TextLayer.prototype.isBackWardSelection=function(selection){var position=selection.anchorNode.compareDocumentPosition(selection.focusNode);var backward=false;if(!position&&selection.anchorOffset>selection.focusOffset||position===Node.DOCUMENT_POSITION_PRECEDING){backward=true;}return backward;};/**
     * @param {Node} element - The element.
     * @returns {number} - Returns number.
     * @private
     */TextLayer.prototype.getPageIndex=function(element){var pageId;// eslint-disable-next-line
var parentElement=element.parentElement;if(!parentElement){parentElement=element.parentNode;}if(parentElement.className==='e-pv-text-layer'){// eslint-disable-next-line radix
pageId=parseInt(element.id.split('_text_')[1]);}else{// eslint-disable-next-line radix
pageId=parseInt(parentElement.id.split('_text_')[1]);}return pageId;};/**
     * @param {Node} element - The element.
     * @param {number} pageIndex - The pageIndex.
     * @returns {number} - Returns number.
     * @private
     */TextLayer.prototype.getTextIndex=function(element,pageIndex){var textIndex;// eslint-disable-next-line
var parentElement=element.parentElement;if(!parentElement){parentElement=element.parentNode;}if(parentElement.className==='e-pv-text-layer'){// eslint-disable-next-line radix
textIndex=parseInt(element.id.split('_text_'+pageIndex+'_')[1]);}else{// eslint-disable-next-line radix
textIndex=parseInt(parentElement.id.split('_text_'+pageIndex+'_')[1]);}return textIndex;};TextLayer.prototype.getPreviousZoomFactor=function(){if(this.pdfViewer.magnificationModule){return this.pdfViewer.magnificationModule.previousZoomFactor;}else{return 1;}};/**
     * @private
     * @returns {boolean} - Returns true or false.
     */TextLayer.prototype.getTextSearchStatus=function(){if(this.pdfViewer.textSearchModule){return this.pdfViewer.textSearchModule.isTextSearch;}else{return false;}};/**
     * @param {string} text - The text.
     * @returns {void}
     * @private
     */TextLayer.prototype.createNotificationPopup=function(text){if(!this.isMessageBoxOpen){// eslint-disable-next-line
var notificationElement=document.getElementById(this.pdfViewer.dataId+'_notification_popup_content');if(notificationElement){notificationElement.textContent=text;notificationElement.innerHTML=text;}if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearch.isMessagePopupOpened=false;}this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenNotificationPopup',text);}};return TextLayer;}();/**
 * @hidden
 */var AjaxHandler=/** @class */function(){/**
     * Constructor for Ajax class
     * @param  {PdfViewer} pdfviewer - The pdfviewer.
     * @private
     */function AjaxHandler(pdfviewer){/**
         * Specifies the URL to which request to be sent.
         *
         * @default 'POST'
         */this.type='POST';/**
         * A boolean value indicating whether the request should be sent asynchronous or not.
         *
         * @default true
         * @private
         */this.mode=true;/**
         * Specifies the ContentType to which request to be sent
         *
         * @default null
         * @private
         */this.contentType='application/json;charset=UTF-8';this.pdfViewer=pdfviewer;this.retryCount=pdfviewer.retryCount;}/**
     * Send the request to server
     *
     * @param  {object} jsonObj - To send to service
     * @returns {void}
     * @private
     */AjaxHandler.prototype.send=function(jsonObj){var _this=this;this.httpRequest=new XMLHttpRequest();if(!this.mode){setTimeout(function(){_this.sendRequest(jsonObj);});}else{this.sendRequest(jsonObj);}this.httpRequest.onreadystatechange=function(){var isSkip=false;// eslint-disable-next-line
var viewerBase=_this.pdfViewer.viewerBase;if(viewerBase&&viewerBase.isPasswordAvailable&&viewerBase.passwordData===''){isSkip=true;_this.retryCount=0;}if(_this.retryCount>0){isSkip=_this.resendRequest(_this,jsonObj);}if(!isSkip){_this.stateChange(_this);}};this.httpRequest.onerror=function(){_this.error(_this);};};/**
     * Clear the http request
     * @returns {void}
     * @private
     */AjaxHandler.prototype.clear=function(){this.httpRequest&&this.httpRequest.abort();this.onSuccess=null;this.onFailure=null;this.onError=null;};// eslint-disable-next-line
AjaxHandler.prototype.resendRequest=function(proxy,jsonObj){var isSkip=false;var status=proxy.httpRequest.status;var statusString=status.toString().split('')[0];if(proxy.httpRequest.readyState===4&&status===200){// eslint-disable-next-line
var data=void 0;if(this.responseType!==null){data=proxy.httpRequest.response;}else{data=proxy.httpRequest.responseText;}if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){// eslint-disable-next-line max-len
if(data==='Document stream does not exist in the cache'||data==='Document Reference pointer does not exist in the cache'){isSkip=true;}}}}}if(statusString==='5'||isSkip){isSkip=true;this.retryCount--;proxy.pdfViewer.fireAjaxRequestFailed(status,proxy.httpRequest.statusText,jsonObj.action,true);proxy.send(jsonObj);}return isSkip;};AjaxHandler.prototype.sendRequest=function(jsonObj){this.httpRequest.open(this.type,this.url,this.mode);this.httpRequest.withCredentials=this.pdfViewer.ajaxRequestSettings.withCredentials;this.httpRequest.setRequestHeader('Content-Type',this.contentType);jsonObj=this.addExtraData(jsonObj);this.setCustomAjaxHeaders();if(this.responseType!==null){this.httpRequest.responseType=this.responseType;}this.httpRequest.send(JSON.stringify(jsonObj));// jshint ignore:line
};AjaxHandler.prototype.addExtraData=function(jsonObject){this.pdfViewer.viewerBase.ajaxData='';this.pdfViewer.fireAjaxRequestInitiate(jsonObject);if(this.pdfViewer.viewerBase.ajaxData&&this.pdfViewer.viewerBase.ajaxData!==''){jsonObject=this.pdfViewer.viewerBase.ajaxData;}return jsonObject;};AjaxHandler.prototype.stateChange=function(proxy){var status=proxy.httpRequest.status;var statusString=status.toString().split('')[0];if(proxy.httpRequest.readyState===4&&status===200){// eslint-disable-next-line
var data=void 0;if(this.responseType!==null){data=proxy.httpRequest.response;}else{data=proxy.httpRequest.responseText;}// eslint-disable-next-line
var result={name:'onSuccess',data:data,readyState:proxy.httpRequest.readyState,status:proxy.httpRequest.status};proxy.successHandler(result);}else if(proxy.httpRequest.readyState===4&&(statusString==='4'||statusString==='5')){// jshint ignore:line)
// For handling 4xx and 5xx errors.
// eslint-disable-next-line
var result={name:'onFailure',status:proxy.httpRequest.status,statusText:proxy.httpRequest.statusText};proxy.failureHandler(result);}};AjaxHandler.prototype.error=function(proxy){// eslint-disable-next-line
var result={name:'onError',status:this.httpRequest.status,statusText:this.httpRequest.statusText};proxy.errorHandler(result);};/**
     * @private
     */ // eslint-disable-next-line
AjaxHandler.prototype.successHandler=function(response){if(this.onSuccess){this.onSuccess(response);}return response;};// eslint-disable-next-line
AjaxHandler.prototype.failureHandler=function(response){if(this.onFailure){this.onFailure(response);}return response;};// eslint-disable-next-line
AjaxHandler.prototype.errorHandler=function(response){if(this.onError){this.onError(response);}return response;};AjaxHandler.prototype.setCustomAjaxHeaders=function(){for(var i=0;i<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;i++){// eslint-disable-next-line max-len
this.httpRequest.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[i].headerValue);}};return AjaxHandler;}();/**
 * @hidden
 */var Signature=/** @class */function(){/**
     * Initialize the constructor of blazorUIadapater.
     * @private
     * @param { PdfViewer } pdfViewer - Specified PdfViewer class.
     * @param { PdfViewerBase } pdfViewerBase - The pdfViewerBase.
     */function Signature(pdfViewer,pdfViewerBase){var _this=this;// eslint-disable-next-line
this.newObject=[];/**
         * @private
         */this.outputString='';/**
         * @private
         */ // eslint-disable-next-line
this.signaturecollection=[];/**
         * @private
         */ // eslint-disable-next-line
this.outputcollection=[];// eslint-disable-next-line
this.fontsign=[];// eslint-disable-next-line
this.signfontStyle=[];this.isSaveSignature=false;this.isInitialFiledSaveSignature=false;this.isSignatureFieldsSaveSignature=false;this.isSignatureAdded=false;// eslint-disable-next-line
this.saveSignatureString='';/**
         * @private
         */ // eslint-disable-next-line
this.saveImageString='';this.signatureImageString='';/**
         * @private
         */ // eslint-disable-next-line
this.maxSaveLimit=5;// eslint-disable-next-line
this.addStampImage=function(args){// eslint-disable-next-line
var upoadedFiles=args.target.files;if(args.target.files[0]!==null){var uploadedFile=upoadedFiles[0];if(uploadedFile.type.split('/')[0]==='image'){var reader=new FileReader();// eslint-disable-next-line
reader.onload=function(e){// eslint-disable-next-line
var canvas=document.getElementById(_this.pdfViewer.dataId+'_signatureuploadCanvas_');// eslint-disable-next-line
var context=canvas.getContext('2d');// eslint-disable-next-line
var image=new Image();// eslint-disable-next-line
var proxy=_this;image.onload=function(){// eslint-disable-next-line
var signbutton=document.getElementById(_this.pdfViewer.dataId+'_e-pv-upload-button');signbutton.style.visibility='hidden';context.drawImage(image,0,0,canvas.width,canvas.height);proxy.enableCreateButton(false);proxy.outputString=image.src;};image.src=e.currentTarget.result;proxy.outputString=e.currentTarget.result;};reader.readAsDataURL(uploadedFile);}}args.target.value='';args.currentTarget.value='';};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     * @returns {void}
     */Signature.prototype.createSignaturePanel=function(){var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');if(canvas){if(!this.pdfViewerBase.pageContainer.querySelector('.e-pv-signature-window')){var elementID=this.pdfViewer.dataId;// eslint-disable-next-line max-len
var dialogDiv=sf.base.createElement('div',{id:elementID+'_signature_window',className:'e-pv-signature-window'});dialogDiv.style.display='block';this.pdfViewerBase.pageContainer.appendChild(dialogDiv);}canvas.addEventListener('mousedown',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('mousemove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('mouseup',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('mouseleave',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('touchstart',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('touchmove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('touchend',this.signaturePanelMouseUp.bind(this));this.clearSignatureCanvas();}this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenSignaturePanel',this.pdfViewerBase.isToolbarSignClicked);this.drawSavedSignature();};Signature.prototype.drawSavedSignature=function(){if(!this.pdfViewerBase.isToolbarSignClicked&&this.isSaveSignature){this.outputString=this.saveSignatureString;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');// eslint-disable-next-line
var context_1;if(canvas){context_1=canvas.getContext('2d');}// eslint-disable-next-line
var image_1=new Image();image_1.onload=function(){if(context_1){context_1.drawImage(image_1,0,0);}};image_1.src=this.signatureImageString;// eslint-disable-next-line
var checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');if(checkbox){checkbox.checked=true;}this.enableCreateButton(false);this.enableClearbutton(false);}};Signature.prototype.hideSignatureCheckbox=function(checkbox){if(this.pdfViewerBase.isToolbarSignClicked){if(this.pdfViewerBase.isInitialField){if(this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.hideSaveSignature){this.hideCheckboxParent(checkbox);}}else if(this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.hideSaveSignature){this.hideCheckboxParent(checkbox);}}else{if(this.pdfViewerBase.isInitialField){if(this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature){this.hideCheckboxParent(checkbox);}}else{if(this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature){this.hideCheckboxParent(checkbox);}}}};Signature.prototype.saveSignatureCheckbox=function(){if(this.pdfViewerBase.isToolbarSignClicked){return false;}else{if(this.pdfViewerBase.isInitialField){if(this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature){return false;}else{return this.isInitialFiledSaveSignature;}}else{if(this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature){return false;}else{return this.isSignatureFieldsSaveSignature;}}}};Signature.prototype.hideCheckboxParent=function(checkbox){if(checkbox){checkbox.parentElement.style.display='none';}};Signature.prototype.saveSignatureImage=function(){// eslint-disable-next-line
var checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');if(checkbox&&checkbox.checked){if(this.outputString!==''){this.isSaveSignature=true;this.saveSignatureString=this.outputString;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.saveImageString=canvas.toDataURL();this.signatureImageString=this.saveImageString;}}else{if(this.isSaveSignature){this.isSaveSignature=false;this.saveSignatureString='';this.saveImageString='';this.signatureImageString='';}this.clearSignatureCanvas();}};/**
     * @param type
     * @private
     */ // eslint-disable-next-line
Signature.prototype.addSignature=function(type){var annot;if(this.pdfViewerBase.isToolbarSignClicked){this.isSignatureAdded=true;var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.isSignatureAdded=true;var pageIndex=this.pdfViewerBase.currentPageNumber-1;// eslint-disable-next-line max-len
var thickness=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1;// eslint-disable-next-line max-len
var opacity=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1;// eslint-disable-next-line max-len
var strokeColor=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:'#000000';// eslint-disable-next-line
var signatureBounds=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(this.outputString,true);// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.saveImageString=canvas.toDataURL();this.signatureImageString=this.saveImageString;annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:signatureBounds,pageIndex:pageIndex,data:this.outputString,shapeAnnotationType:'HandWrittenSignature',opacity:opacity,strokeColor:strokeColor,thickness:thickness,signatureName:annotationName};this.pdfViewerBase.currentSignatureAnnot=annot;// eslint-disable-next-line
var checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');if(checkbox&&checkbox.checked){this.addSignatureCollection();}this.hideSignaturePanel();this.pdfViewerBase.isToolbarSignClicked=false;}else{this.isSignatureAdded=true;// eslint-disable-next-line
var checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');var isSignatureAdded=false;if(type){if(type==='Image'){this.imageAddSignature();isSignatureAdded=true;this.outputString='';}else if(type==='Type'){this.typeAddSignature();isSignatureAdded=true;this.outputString='';}}if(!isSignatureAdded){// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.saveImageString=canvas.toDataURL();if(checkbox&&checkbox.checked){this.isSaveSignature=true;this.saveSignatureString=this.outputString;this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,true);}else{this.isSaveSignature=false;this.saveSignatureString='';this.checkSaveFiledSign(this.pdfViewerBase.isInitialField,false);}this.signatureImageString=this.saveImageString;this.pdfViewer.formFieldsModule.drawSignature(null,null,this.pdfViewerBase.currentTarget,null);isSignatureAdded=true;}}};Signature.prototype.checkSaveFiledSign=function(initialField,saveSign){if(initialField){this.isInitialFiledSaveSignature=saveSign;}else{this.isSignatureFieldsSaveSignature=saveSign;}};Signature.prototype.addSignatureInPage=function(){if(this.signaturetype==='Draw'){this.addSignature();}else if(this.signaturetype==='Type'){this.typeAddSignature();}else{this.imageAddSignature();}};Signature.prototype.typeAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var zoomvalue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
var annot=null;var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.isSignatureAdded=true;var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var currentLeft=0;var currentTop=0;var currentHeight=65;var currentWidth=200;currentLeft=(parseFloat(pageDiv.style.width)/2-currentWidth/2)/zoomvalue;currentTop=(parseFloat(pageDiv.style.height)/2-currentHeight/2)/zoomvalue;var zoomFactor=this.pdfViewerBase.getZoomFactor();if(!this.signtypevalue){this.updateSignatureTypeValue(true);}var inputValue=this.signtypevalue;annot={// eslint-disable-next-line max-len
id:'Typesign'+this.pdfViewerBase.signatureCount,bounds:{left:currentLeft/zoomFactor,top:currentTop/zoomFactor,x:currentLeft/zoomFactor,// eslint-disable-next-line max-len
y:currentTop/zoomFactor,width:currentWidth,height:currentHeight},pageIndex:pageIndex,dynamicText:inputValue,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:'SignatureText',fontFamily:this.fontName,signatureName:annotationName};this.pdfViewerBase.currentSignatureAnnot=annot;// eslint-disable-next-line
var checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');if(checkbox&&checkbox.checked){this.addSignatureCollection();}this.signtypevalue='';this.hideSignaturePanel();this.pdfViewerBase.isToolbarSignClicked=false;}else{if(this.outputString===''){this.updateSignatureTypeValue();}this.pdfViewer.formFieldsModule.drawSignature('Type','',this.pdfViewerBase.currentTarget);this.hideSignaturePanel();}};Signature.prototype.imageAddSignature=function(){if(this.pdfViewerBase.isToolbarSignClicked){var zoomvalue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
var annot=null;var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.isSignatureAdded=true;var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var currentLeft=0;var currentTop=0;var currentHeight=65;//15arseFloat(this.signHeight);
var currentWidth=200;//parseFloat(this.signWidth);
currentLeft=(parseFloat(pageDiv.style.width)/2-currentWidth/2)/zoomvalue;currentTop=(parseFloat(pageDiv.style.height)/2-currentHeight/2)/zoomvalue;var zoomFactor=this.pdfViewerBase.getZoomFactor();var inputValue=this.signtypevalue;annot={// eslint-disable-next-line max-len
id:'Typesign'+this.pdfViewerBase.signatureCount,bounds:{left:currentLeft/zoomFactor,top:currentTop/zoomFactor,x:currentLeft/zoomFactor,// eslint-disable-next-line max-len
y:currentTop/zoomFactor,width:currentWidth,height:currentHeight},pageIndex:pageIndex,dynamicText:inputValue,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:'SignatureImage',fontFamily:this.fontName,signatureName:annotationName};this.pdfViewerBase.currentSignatureAnnot=annot;// eslint-disable-next-line
var checkbox=document.getElementById(this.pdfViewer.dataId+'_signatureCheckBox');if(checkbox&&checkbox.checked){this.addSignatureCollection();}this.hideSignaturePanel();this.pdfViewerBase.isToolbarSignClicked=false;}else{this.pdfViewer.formFieldsModule.drawSignature('Image','',this.pdfViewerBase.currentTarget);this.hideSignaturePanel();}};Signature.prototype.updateSignatureTypeValue=function(isType){// eslint-disable-next-line
var fontElements=document.querySelectorAll('.e-pv-font-sign');if(fontElements){for(var j=0;j<fontElements.length;j++){if(fontElements[j]&&fontElements[j].style.borderColor==='red'){if(isType){this.signtypevalue=fontElements[j].textContent;this.outputString=fontElements[j].textContent;}else{this.outputString=fontElements[j].textContent;}try{this.fontName=JSON.parse(fontElements[j].style.fontFamily);}catch(e){this.fontName=fontElements[j].style.fontFamily;}}}}};/**
     * @private
     * @returns {void}
     */Signature.prototype.hideSignaturePanel=function(){if(this.signatureDialog){this.signatureDialog.hide();}};Signature.prototype.bindTypeSignatureClickEvent=function(){for(var i=0;i<4;i++){// eslint-disable-next-line
var fontElement=document.querySelector('#'+this.pdfViewer.dataId+'_font_signature'+i);if(fontElement){fontElement.addEventListener('click',this.typeSignatureclicked.bind(this));}}};Signature.prototype.bindDrawSignatureClickEvent=function(){// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');if(canvas){canvas.addEventListener('mousedown',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('mousemove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('mouseup',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('mouseleave',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('touchstart',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('touchmove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('touchend',this.signaturePanelMouseUp.bind(this));}var dialogElement=document.querySelector('.e-control.e-btn.e-lib.e-dlg-closeicon-btn.e-flat.e-pv-signature-dialog-blazor-height.e-icon-btn');if(dialogElement){dialogElement.focus();}};// eslint-disable-next-line
Signature.prototype.typeSignatureclicked=function(event){var eventTarget=event.target;if(eventTarget){for(var i=0;i<4;i++){// eslint-disable-next-line
var fontElement=document.querySelector('#'+this.pdfViewer.dataId+'_font_signature'+i);if(fontElement){fontElement.style.borderColor='';}}eventTarget.style.borderColor='red';this.outputString=eventTarget.textContent;try{this.fontName=JSON.parse(eventTarget.style.fontFamily);}catch(e){this.fontName=eventTarget.style.fontFamily;}this.enableCreateButton(false);}};// eslint-disable-next-line
Signature.prototype.createSignatureCanvas=function(){// eslint-disable-next-line
var previousField=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');// eslint-disable-next-line
var field=document.getElementById(this.pdfViewer.dataId+'Signature_appearance');if(previousField){previousField.remove();}if(field){field.remove();}// eslint-disable-next-line max-len
var appearanceDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'Signature_appearance',className:'e-pv-signature-apperance',styles:'margin-top:30px'});// eslint-disable-next-line max-len
var canvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_signatureCanvas_',className:'e-pv-signature-canvas'});if(this.pdfViewer.element.offsetWidth>750){canvas.width=714;}else{canvas.width=this.pdfViewer.element.offsetWidth-35;}canvas.classList.add('e-pv-canvas-signature');canvas.height=305;canvas.style.height='305px';canvas.style.border='1px dotted #bdbdbd';canvas.style.backgroundColor='white';canvas.style.boxSizing='border-box';canvas.style.borderRadius='2px';canvas.addEventListener('mousedown',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('mousemove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('mouseup',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('mouseleave',this.signaturePanelMouseUp.bind(this));canvas.addEventListener('touchstart',this.signaturePanelMouseDown.bind(this));canvas.addEventListener('touchmove',this.signaturePanelMouseMove.bind(this));canvas.addEventListener('touchend',this.signaturePanelMouseUp.bind(this));appearanceDiv.appendChild(canvas);// eslint-disable-next-line
var checkBoxObj;// eslint-disable-next-line
var input;var saveCheckBoxContent;if(this.pdfViewerBase.isToolbarSignClicked&&!this.pdfViewerBase.isInitialField){saveCheckBoxContent=this.pdfViewer.localeObj.getConstant('Save Signature');}else{saveCheckBoxContent=this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant('Save Initial'):this.pdfViewer.localeObj.getConstant('Save Signature');}if(!this.pdfViewer.hideSaveSignature){// eslint-disable-next-line
input=document.createElement('input');input.type='checkbox';input.id='checkbox';appearanceDiv.appendChild(input);checkBoxObj=new sf.buttons.CheckBox({label:saveCheckBoxContent,disabled:false,checked:false});checkBoxObj.appendTo(input);}this.isSaveSignature=this.saveSignatureCheckbox();if(this.isSaveSignature){checkBoxObj.checked=true;}//if (!this.pdfViewerBase.isToolbarSignClicked) {
// eslint-disable-next-line
var typeDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'type_appearance',className:'e-pv-signature-apperance',styles:'margin-top:6px'});// eslint-disable-next-line
var inputText=document.createElement('input');inputText.type='text';inputText.id=this.pdfViewer.dataId+'_e-pv-Signtext-box';typeDiv.appendChild(inputText);// eslint-disable-next-line
var inputobj=new sf.inputs.TextBox({placeholder:this.pdfViewer.localeObj.getConstant('Enter Signature as Name'),floatLabelType:'Auto'});inputobj.appendTo(inputText);// eslint-disable-next-line
var fontDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_font_appearance',className:'e-pv-font-appearance-style'});fontDiv.classList.add('e-pv-canvas-signature');fontDiv.style.height='270px';fontDiv.style.border='1px dotted #bdbdbd';fontDiv.style.boxSizing='border-box';fontDiv.style.borderRadius='2px';fontDiv.style.backgroundColor='white';fontDiv.style.color='black';fontDiv.style.marginTop='8px';typeDiv.appendChild(fontDiv);input=document.createElement('input');input.type='checkbox';input.id='checkbox1';typeDiv.appendChild(input);checkBoxObj=new sf.buttons.CheckBox({label:saveCheckBoxContent,disabled:false,checked:false});checkBoxObj.appendTo(input);inputobj.addEventListener('input',this.renderSignatureText.bind(this));this.enableCreateButton(true);// eslint-disable-next-line
var tab=sf.base.createElement('div',{id:this.pdfViewer.dataId+'Signature_tab'});var uploadDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'upload_appearance',className:'e-pv-signature-apperance',styles:'padding-top:30px'});// eslint-disable-next-line
var button=document.createElement('div');button.id=this.pdfViewer.dataId+'_e-pv-upload-button';uploadDiv.appendChild(button);// eslint-disable-next-line
var uploadButton=new sf.buttons.Button({cssClass:'e-pv-sign-upload',content:this.pdfViewer.localeObj.getConstant('Browse Signature Image')});uploadButton.appendTo(button);uploadButton.element.style.position='absolute';// eslint-disable-next-line max-len
var uploadCanvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_signatureuploadCanvas_',className:'e-pv-signature-uploadcanvas'});if(this.pdfViewer.element.offsetWidth>750){uploadCanvas.width=714;}else{uploadCanvas.width=this.pdfViewer.element.offsetWidth-35;}uploadCanvas.classList.add('e-pv-canvas-signature');uploadCanvas.height=305;uploadCanvas.style.height='305px';uploadButton.element.style.left=uploadCanvas.width/2-50+'px';uploadButton.element.style.top=parseFloat(uploadCanvas.style.height)/2+20+'px';uploadCanvas.style.border='1px dotted #bdbdbd';uploadCanvas.style.backgroundColor='white';uploadCanvas.style.boxSizing='border-box';uploadCanvas.style.borderRadius='2px';uploadCanvas.style.zIndex='0';uploadDiv.appendChild(uploadCanvas);input=document.createElement('input');input.type='checkbox';input.id='checkbox2';uploadDiv.appendChild(input);checkBoxObj=new sf.buttons.CheckBox({label:saveCheckBoxContent,disabled:false,checked:false});checkBoxObj.appendTo(input);button.addEventListener('click',this.uploadSignatureImage.bind(this));// eslint-disable-next-line max-len
this.signfontStyle=[{FontName:'Helvetica'},{FontName:'Times New Roman'},{FontName:'Courier'},{FontName:'Symbol'}];// eslint-disable-next-line
var fontSignature=[];if(this.pdfViewerBase.isToolbarSignClicked&&!sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts)){for(var j=0;j<4;j++){if(!sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[j])){this.signfontStyle[j].FontName=this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[j];}}}for(var i=0;i<this.signfontStyle.length;i++){fontSignature[i]=document.createElement('div');fontSignature[i].id='_font_signature'+i+'';fontSignature[i].classList.add('e-pv-font-sign');}this.fontsign=fontSignature;// eslint-disable-next-line
var proxy=this;var items=[];if(this.pdfViewerBase.isToolbarSignClicked){if(this.pdfViewerBase.isInitialField){items=this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.displayMode,appearanceDiv,typeDiv,uploadDiv);}else{items=this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.displayMode,appearanceDiv,typeDiv,uploadDiv);}}else{if(this.pdfViewerBase.isInitialField){items=this.showHideSignatureTab(this.pdfViewer.initialFieldSettings.initialDialogSettings.displayMode,appearanceDiv,typeDiv,uploadDiv);}else{items=this.showHideSignatureTab(this.pdfViewer.signatureFieldSettings.signatureDialogSettings.displayMode,appearanceDiv,typeDiv,uploadDiv);}}// eslint-disable-next-line
this.tabObj=new sf.navigations.Tab({selected:function selected(args){proxy.handleSelectEvent(args);},items:items});this.tabObj.appendTo(tab);if(tab&&tab.lastElementChild){tab.lastElementChild.style.overflow='hidden';}if(items[0].header.label==='DRAW'){this.signaturetype='Draw';}else if(items[0].header.label==='TYPE'){this.signaturetype='Type';}else{this.signaturetype='Image';}return tab;// } else {
//     return appearanceDiv;
// }
};Signature.prototype.handleSelectEvent=function(e){// eslint-disable-next-line
var headerText='';var maximumWidth=750;var checkbox=document.getElementById('checkbox');if(checkbox&&checkbox.checked){if(e.previousIndex===0&&this.outputString!==''){this.isSaveSignature=true;this.saveSignatureString=this.outputString;// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.saveImageString=canvas.toDataURL();this.signatureImageString=this.saveImageString;}}else{if(this.isSaveSignature){this.isSaveSignature=false;this.saveSignatureString='';this.saveImageString='';this.signatureImageString='';}this.clearSignatureCanvas();}// eslint-disable-next-line
if(headerText.toLocaleLowerCase()==='draw'){this.signaturetype='Draw';if(this.isSaveSignature){this.enableCreateButton(false);}var drawCheckbox=document.getElementById("checkbox");this.hideSignatureCheckbox(drawCheckbox);}else if(headerText.toLocaleLowerCase()==='type'){this.outputString='';this.signaturetype='Type';// eslint-disable-next-line
this.enableCreateButton(true);var typeCheckbox=document.getElementById("checkbox1");this.hideSignatureCheckbox(typeCheckbox);}else if(headerText.toLocaleLowerCase()==='upload'){this.signaturetype='Image';this.enableCreateButton(true);var imageCheckbox=document.getElementById("checkbox2");this.hideSignatureCheckbox(imageCheckbox);}if(this.pdfViewer.element.offsetWidth<maximumWidth)this.updateCanvasSize();};Signature.prototype.showHideSignatureTab=function(displayMode,appearanceDiv,typeDiv,uploadDiv){var items=[];if(displayMode&DisplayMode.Draw){items.push({header:{'text':this.pdfViewer.localeObj.getConstant('Draw-hand Signature'),'label':'DRAW'},content:appearanceDiv});}if(displayMode&DisplayMode.Text){items.push({header:{'text':this.pdfViewer.localeObj.getConstant('Type Signature'),'label':'TYPE'},content:typeDiv});}if(displayMode&DisplayMode.Upload){items.push({header:{'text':this.pdfViewer.localeObj.getConstant('Upload Signature'),'label':'UPLOAD'},content:uploadDiv});}return items;};/**
     * @private
     * @returns {void}
     */Signature.prototype.createSignatureFileElement=function(){// eslint-disable-next-line
var signImage=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_signElement',attrs:{'type':'file'}});signImage.setAttribute('accept','image/jpg,image/jpeg,image/png');signImage.style.position='absolute';signImage.style.left='0px';signImage.style.top='0px';signImage.style.visibility='hidden';document.body.appendChild(signImage);signImage.addEventListener('change',this.addStampImage);};// eslint-disable-next-line
Signature.prototype.uploadSignatureClick=function(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var signImageElement_1=document.getElementById(this.pdfViewer.dataId+'_signElement');var imageSignature=document.getElementById(this.pdfViewer.dataId+'_e-pv-sign-upload');if(signImageElement_1!==null&&imageSignature!==null){var ImageSignatureClick=function ImageSignatureClick(){signImageElement_1.click();};imageSignature.addEventListener("click",ImageSignatureClick);}}};Signature.prototype.uploadSignatureImage=function(){// eslint-disable-next-line
var signImage=document.getElementById(this.pdfViewer.dataId+'_signElement');if(signImage){signImage.click();}};Signature.prototype.renderSignatureText=function(){var maximumWidth=750;// eslint-disable-next-line
var fontDiv=document.getElementById(this.pdfViewer.dataId+'_font_appearance');// eslint-disable-next-line
var textBox=document.getElementById(this.pdfViewer.dataId+'_e-pv-Signtext-box');for(var i=0;i<this.signfontStyle.length;i++){this.fontsign[i].innerHTML=textBox.value;this.fontsign[i].style.fontFamily=this.signfontStyle[i].FontName;if(this.signfontStyle[i].FontName==='Helvetica'){this.fontsign[i].style.borderColor='red';}fontDiv.appendChild(this.fontsign[i]);}for(var i=0;i<this.signfontStyle.length;i++){// eslint-disable-next-line
var clickSign=document.getElementById('_font_signature'+i+'');clickSign.addEventListener('click',this.typeSignatureclick.bind(this));}this.enableCreateButton(false);this.enableClearbutton(false);if(this.pdfViewer.element.offsetWidth<maximumWidth)this.updateCanvasSize();};Signature.prototype.typeSignatureclick=function(){var eventTarget=event.target;// eslint-disable-next-line
var createButton=document.getElementsByClassName('e-pv-createbtn')[0];createButton.disabled=false;for(var i=0;i<4;i++){// eslint-disable-next-line
var fontElement=document.getElementById('_font_signature'+i+'');if(fontElement){fontElement.style.borderColor='';}}eventTarget.style.borderColor='red';this.outputString=eventTarget.textContent;try{this.fontName=JSON.parse(eventTarget.style.fontFamily);}catch(e){this.fontName=eventTarget.style.fontFamily;}};/**
     * @param bounds
     * @param position
     * @private
     */ // eslint-disable-next-line
Signature.prototype.addSignatureCollection=function(bounds,position){var minimumX=-1;var minimumY=-1;var maximumX=-1;var maximumY=-1;// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(this.outputString);// eslint-disable-next-line
var newCanvas=document.createElement('canvas');// eslint-disable-next-line
var context=newCanvas.getContext('2d');// eslint-disable-next-line
var imageString;var signatureType=this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType;if(signatureType==='HandWrittenSignature'){if(collectionData.length!==0){// eslint-disable-next-line
for(var k=0;k<collectionData.length;k++){// eslint-disable-next-line
var val=collectionData[k];if(minimumX===-1){// eslint-disable-next-line
minimumX=val['x'];// eslint-disable-next-line
maximumX=val['x'];// eslint-disable-next-line
minimumY=val['y'];// eslint-disable-next-line
maximumY=val['y'];}else{// eslint-disable-next-line
var point1=val['x'];// eslint-disable-next-line
var point2=val['y'];if(minimumX>=point1){minimumX=point1;}if(minimumY>=point2){minimumY=point2;}if(maximumX<=point1){maximumX=point1;}if(maximumY<=point2){maximumY=point2;}}}var newdifferenceX=maximumX-minimumX;var newdifferenceY=maximumY-minimumY;var differenceX=newdifferenceX/100;var differenceY=newdifferenceY/100;var left=0;var top_1=0;if(bounds){newCanvas.width=position.currentWidth;newCanvas.height=position.currentHeight;differenceX=newdifferenceX/bounds.width;differenceY=newdifferenceY/bounds.height;left=bounds.x-position.currentLeft;top_1=bounds.y-position.currentTop;}else{newCanvas.width=100;newCanvas.height=100;}context.beginPath();for(var n=0;n<collectionData.length;n++){// eslint-disable-next-line
var val=collectionData[n];// eslint-disable-next-line
var point1=(val['x']-minimumX)/differenceX+left;// eslint-disable-next-line
var point2=(val['y']-minimumY)/differenceY+top_1;// eslint-disable-next-line
if(val['command']==='M'){context.moveTo(point1,point2);// eslint-disable-next-line
}else if(val['command']==='L'){context.lineTo(point1,point2);}}context.stroke();context.closePath();imageString=newCanvas.toDataURL();}}else if(signatureType==='SignatureText'){imageString=this.outputString;}else{imageString=this.outputString;}if(bounds){this.saveImageString=imageString;}else{// eslint-disable-next-line
var signCollection={};signCollection['sign_'+this.pdfViewerBase.imageCount]=this.outputString;this.outputcollection.push(signCollection);// eslint-disable-next-line
var signature=[];signature.push({id:'sign_'+this.pdfViewerBase.imageCount,imageData:imageString,signatureType:signatureType,fontFamily:this.pdfViewerBase.currentSignatureAnnot.fontFamily});this.signaturecollection.push({image:signature,isInitial:this.pdfViewerBase.isInitialField});this.pdfViewerBase.imageCount++;}};/**
     * @private]
     * @param {number} limit - The limit.
     * @returns {number} - Returns number.
     */Signature.prototype.getSaveLimit=function(limit){if(limit>this.maxSaveLimit){limit=this.maxSaveLimit;}else if(limit<1){limit=1;}return limit;};/**
     * @private
     * @returns {void}
     */Signature.prototype.RenderSavedSignature=function(){this.pdfViewerBase.signatureCount++;var zoomvalue=this.pdfViewerBase.getZoomFactor();var annot;if(this.pdfViewerBase.isAddedSignClicked){var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.isSignatureAdded=true;var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var currentLeft=0;var currentTop=0;// eslint-disable-next-line max-len
var currentWidth=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:100;// eslint-disable-next-line max-len
var currentHeight=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100;// eslint-disable-next-line max-len
var thickness=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1;// eslint-disable-next-line max-len
var opacity=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1;// eslint-disable-next-line max-len
var strokeColor=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:'#000000';currentLeft=(parseFloat(pageDiv.style.width)/2-currentWidth/2)/zoomvalue;// eslint-disable-next-line max-len
currentTop=(parseFloat(pageDiv.style.height)/2-currentHeight/2)/zoomvalue;var keyString='';var signatureType=void 0;var signatureFontFamily=void 0;for(var collection=0;collection<this.outputcollection.length;collection++){// eslint-disable-next-line
var collectionAddedsign=this.outputcollection[collection];// eslint-disable-next-line
var eventTarget=event.target;// eslint-disable-next-line max-len
if(eventTarget&&eventTarget.id==='sign_'+collection||eventTarget&&eventTarget.id==='sign_border'+collection){keyString=collectionAddedsign['sign_'+collection];break;}}for(var signatureIndex=0;signatureIndex<this.signaturecollection.length;signatureIndex++){var eventTarget=event.target;var signatureId=this.signaturecollection[signatureIndex].image[0].id.split('_')[1];if(eventTarget&&eventTarget.id==='sign_'+signatureId||eventTarget&&eventTarget.id==='sign_border'+signatureId){signatureType=this.signaturecollection[signatureIndex].image[0].signatureType;signatureFontFamily=this.signaturecollection[signatureIndex].image[0].fontFamily;break;}}if(signatureType==='HandWrittenSignature'){// eslint-disable-next-line
var signatureBounds=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(keyString,true);// eslint-disable-next-line max-len
currentWidth=signatureBounds.width?signatureBounds.width:currentWidth;// eslint-disable-next-line max-len
currentHeight=signatureBounds.height?signatureBounds.height:currentHeight;}else{currentWidth=currentWidth===150?200:this.pdfViewer.handWrittenSignatureSettings.width;// eslint-disable-next-line max-len
currentHeight=currentHeight===100?65:this.pdfViewer.handWrittenSignatureSettings.height;}annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:keyString,// eslint-disable-next-line max-len
shapeAnnotationType:signatureType,opacity:opacity,fontFamily:signatureFontFamily,strokeColor:strokeColor,thickness:thickness,signatureName:annotationName};this.pdfViewerBase.currentSignatureAnnot=annot;this.pdfViewerBase.isAddedSignClicked=false;}else{this.pdfViewer.formFieldsModule.drawSignature();}};/**
     * @private
     * @returns {void}
     */Signature.prototype.updateCanvasSize=function(){// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');this.setTabItemWidth(canvas);var uploadCanvas=document.getElementById(this.pdfViewer.dataId+'_signatureuploadCanvas_');this.setTabItemWidth(uploadCanvas);var fontAppearance=document.getElementById(this.pdfViewer.dataId+'_font_appearance');this.setTabItemWidth(fontAppearance);};Signature.prototype.setTabItemWidth=function(canvas){var padding=2;var maximumWidth=750;var canvasWidth=714;var margin=50;var elem=document.querySelector('.e-dlg-content');if(elem){var style=getComputedStyle(elem);padding=padding+parseInt(style.paddingLeft,10)+parseInt(style.paddingRight,10);}if(canvas&&this.signatureDialog&&this.signatureDialog.visible){if(this.pdfViewer.element.offsetWidth>maximumWidth){canvas.width=canvasWidth;canvas.style.width=canvasWidth+'px';}else{canvas.width=this.pdfViewer.element.offsetWidth-padding;canvas.style.width=canvas.width+'px';}}var fontInnerDiv=document.getElementsByClassName('e-pv-font-sign');if(canvas&&fontInnerDiv&&fontInnerDiv.length>0){for(var i=0;i<fontInnerDiv.length;i++){var fontDiv=fontInnerDiv[i];fontDiv.style.width=canvas.width/2-margin+'px';}}};Signature.prototype.signaturePanelMouseDown=function(e){if(e.type!=='contextmenu'){e.preventDefault();this.findMousePosition(e);this.mouseDetection=true;this.oldX=this.mouseX;this.oldY=this.mouseY;this.newObject=[];this.drawMousePosition(e);}};Signature.prototype.enableCreateButton=function(isEnable){// eslint-disable-next-line
var createbtn=document.getElementsByClassName('e-pv-createbtn')[0];if(createbtn){createbtn.disabled=isEnable;}this.enableClearbutton(isEnable);};Signature.prototype.enableClearbutton=function(isEnable){// eslint-disable-next-line
var clearbtn=document.getElementsByClassName('e-pv-clearbtn')[0];if(clearbtn){clearbtn.disabled=isEnable;}};Signature.prototype.signaturePanelMouseMove=function(e){if(this.mouseDetection){this.findMousePosition(e);this.enableCreateButton(false);this.drawMousePosition(e);}};Signature.prototype.findMousePosition=function(event){if(event.type.indexOf('touch')!==-1){event=event;var element=event.target;// eslint-disable-next-line
var currentRect=element.getBoundingClientRect();this.mouseX=event.touches[0].pageX-currentRect.left;this.mouseY=event.touches[0].pageY-currentRect.top;}else{event=event;this.mouseX=event.offsetX;this.mouseY=event.offsetY;}};Signature.prototype.drawMousePosition=function(event){if(this.mouseDetection){this.drawSignatureInCanvas();this.oldX=this.mouseX;this.oldY=this.mouseY;}};Signature.prototype.drawSignatureInCanvas=function(){// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');// eslint-disable-next-line
var context=canvas.getContext('2d');context.beginPath();context.moveTo(this.oldX,this.oldY);context.lineTo(this.mouseX,this.mouseY);context.stroke();context.lineWidth=2;context.arc(this.oldX,this.oldY,2/2,0,Math.PI*2,true);context.closePath();this.newObject.push(this.mouseX,this.mouseY);};Signature.prototype.signaturePanelMouseUp=function(){if(this.mouseDetection){this.convertToPath(this.newObject);}this.mouseDetection=false;};// eslint-disable-next-line
Signature.prototype.convertToPath=function(newObject){this.movePath(newObject[0],newObject[1]);this.linePath(newObject[0],newObject[1]);for(var n=2;n<newObject.length;n=n+2){this.linePath(newObject[n],newObject[n+1]);}};Signature.prototype.linePath=function(x,y){this.outputString+='L'+x+','+y+' ';};Signature.prototype.movePath=function(x,y){this.outputString+='M'+x+','+y+' ';};/**
     * @private
     * @returns {void}
     */Signature.prototype.clearSignatureCanvas=function(){this.outputString='';this.newObject=[];// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');// eslint-disable-next-line
if(canvas){// eslint-disable-next-line
var context=canvas.getContext('2d');context.clearRect(0,0,canvas.width,canvas.height);}// eslint-disable-next-line
var imageCanvas=document.getElementById(this.pdfViewer.dataId+'_signatureuploadCanvas_');if(imageCanvas){// eslint-disable-next-line
var context=imageCanvas.getContext('2d');context.clearRect(0,0,imageCanvas.width,imageCanvas.height);// eslint-disable-next-line
var signbutton=document.getElementById(this.pdfViewer.dataId+'_e-pv-upload-button');if(signbutton){signbutton.style.visibility='';}}// eslint-disable-next-line
var fontdiv=document.getElementById(this.pdfViewer.dataId+'_font_appearance');// eslint-disable-next-line
var textbox=document.getElementById(this.pdfViewer.dataId+'_e-pv-Signtext-box');if(fontdiv&&textbox){textbox.value='';}this.enableCreateButton(true);};/**
     * @private
     * @returns {void}
     */Signature.prototype.closeSignaturePanel=function(){if(this.isSignatureAdded==true){this.isSignatureAdded=false;if(sf.base.Browser.isDevice){this.pdfViewer.annotation.ShowToastMessage('HandWrittenSignature');}}if(this.pdfViewerBase.currentTarget){this.pdfViewerBase.drawSignatureWithTool=true;}this.clearSignatureCanvas();this.pdfViewerBase.isToolbarSignClicked=false;this.pdfViewerBase.drawSignatureWithTool=false;};/**
     * @private
     * @returns {string} - Returns the string.
     */Signature.prototype.saveSignature=function(){// eslint-disable-next-line
var storeObject=null;if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign'];}else{storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sign');}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){if(this.pdfViewer.isSignatureEditable){var signatureSettings=this.pdfViewer.handWrittenSignatureSettings;var annotationSettings=this.pdfViewer.annotationSettings;var annotationAuthor=signatureSettings.author!=='Guest'?signatureSettings.author:annotationSettings.author?annotationSettings.author:'Guest';// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].author=annotationAuthor;}// eslint-disable-next-line max-len
var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.getRgbCode(strokeColorString));// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));if(pageAnnotationObject.annotations[z].shapeAnnotationType==='HandWrittenSignature'){// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(pageAnnotationObject.annotations[z].data);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);pageAnnotationObject.annotations[z].data=JSON.stringify(csData);}else{if(pageAnnotationObject.annotations[z].shapeAnnotationType==='SignatureText'&&!this.checkDefaultFont(pageAnnotationObject.annotations[z].fontFamily)){var signTypeCanvas=sf.base.createElement('canvas');signTypeCanvas.width=150;signTypeCanvas.height=pageAnnotationObject.annotations[z].fontSize*2;// eslint-disable-next-line
var canvasContext=signTypeCanvas.getContext('2d');var x=signTypeCanvas.width/2;var y=signTypeCanvas.height/2-10;canvasContext.textAlign='center';canvasContext.font=pageAnnotationObject.annotations[z].fontSize+'px '+pageAnnotationObject.annotations[z].fontFamily;canvasContext.fillText(pageAnnotationObject.annotations[z].data,x,y);pageAnnotationObject.annotations[z].data=JSON.stringify(signTypeCanvas.toDataURL('image/png'));pageAnnotationObject.annotations[z].shapeAnnotationType='SignatureImage';}else{pageAnnotationObject.annotations[z].data=JSON.stringify(pageAnnotationObject.annotations[z].data);}}}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};Signature.prototype.checkDefaultFont=function(fontName){// eslint-disable-next-line
if(fontName==='Helvetica'||fontName==='Times New Roman'||fontName==='Courier'||fontName==='Symbol'){return true;}return false;};/**
     * @param colorString
     * @private
     */ // eslint-disable-next-line
Signature.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var stringArray=colorString.split(',');if(sf.base.isNullOrUndefined(stringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');stringArray=colorString.split(',');}// eslint-disable-next-line radix
var r=parseInt(stringArray[0].split('(')[1]);// eslint-disable-next-line radix
var g=parseInt(stringArray[1]);// eslint-disable-next-line radix
var b=parseInt(stringArray[2]);// eslint-disable-next-line radix
var a=parseInt(stringArray[3]);return{r:r,g:g,b:b,a:a};};/**
     * @private
     * @param {number} left - The left.
     * @param {number} top - The top.
     * @returns {void}
     */Signature.prototype.renderSignature=function(left,top){var annot;// eslint-disable-next-line
var currentAnnotation=this.pdfViewerBase.currentSignatureAnnot;var annotationName=this.pdfViewer.annotation.createGUID();if(currentAnnotation){if(this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType==='HandWrittenSignature'){annot={// eslint-disable-next-line max-len
id:currentAnnotation.id,bounds:{x:left,y:top,width:currentAnnotation.bounds.width,height:currentAnnotation.bounds.height},pageIndex:currentAnnotation.pageIndex,data:currentAnnotation.data,shapeAnnotationType:'HandWrittenSignature',type:'HandWrittenSignature',opacity:currentAnnotation.opacity,strokeColor:currentAnnotation.strokeColor,thickness:currentAnnotation.thickness,signatureName:annotationName};}if(this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType==='SignatureText'){annot={// eslint-disable-next-line max-len
id:currentAnnotation.id,bounds:{x:left,y:top,width:currentAnnotation.bounds.width,height:currentAnnotation.bounds.height},pageIndex:currentAnnotation.pageIndex,data:currentAnnotation.data,shapeAnnotationType:'SignatureText',type:'SignatureText',opacity:currentAnnotation.opacity,strokeColor:currentAnnotation.strokeColor,thickness:currentAnnotation.thickness,signatureName:annotationName};}this.pdfViewer.add(annot);// eslint-disable-next-line
var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+currentAnnotation.pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,currentAnnotation.pageIndex);this.pdfViewerBase.signatureAdded=true;// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureAdd(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,currentAnnotation.bounds,currentAnnotation.opacity,currentAnnotation.strokeColor,currentAnnotation.thickness);this.storeSignatureData(currentAnnotation.pageIndex,annot);this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.signatureCount++;}};/**
     * @param annotationCollection
     * @param pageIndex
     * @param isImport
     * @private
     */ // eslint-disable-next-line
Signature.prototype.renderExistingSignature=function(annotationCollection,pageIndex,isImport){var annot;for(var n=0;n<annotationCollection.length;n++){// eslint-disable-next-line
var currentAnnotation=annotationCollection[n];// eslint-disable-next-line
if(currentAnnotation){// eslint-disable-next-line
var bounds=currentAnnotation.Bounds;var currentLeft=bounds.X;var currentTop=bounds.Y;var currentWidth=bounds.Width;var currentHeight=bounds.Height;// eslint-disable-next-line
var data=currentAnnotation.PathData;if(isImport){if(currentAnnotation.IsSignature){data=currentAnnotation.PathData;}else if(currentAnnotation.AnnotationType==='SignatureImage'||currentAnnotation.AnnotationType==='SignatureText'){data=JSON.parse(JSON.stringify(currentAnnotation.PathData));}else{if(data.includes('command')){data=sf.drawings.getPathString(JSON.parse(currentAnnotation.PathData));}else{data=currentAnnotation.PathData;}}}if(currentAnnotation.AnnotationType==='SignatureText'){annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,fontFamily:currentAnnotation.FontFamily,fontSize:currentAnnotation.FontSize,shapeAnnotationType:'SignatureText',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,signatureName:currentAnnotation.SignatureName};}else if(currentAnnotation.AnnotationType==='SignatureImage'){annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,shapeAnnotationType:'SignatureImage',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,signatureName:currentAnnotation.SignatureName};}else{annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,shapeAnnotationType:'HandWrittenSignature',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,signatureName:currentAnnotation.SignatureName};}this.pdfViewer.add(annot);// eslint-disable-next-line
var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+currentAnnotation.pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,annot.pageIndex);this.storeSignatureData(annot.pageIndex,annot);this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.signatureCount++;// eslint-disable-next-line max-len
if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],true);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')],true);}}}};/**
     * @param pageNumber
     * @param annotations
     * @private
     */ // eslint-disable-next-line
Signature.prototype.storeSignatureData=function(pageNumber,annotations){// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(annotations.pageIndex,null,annotations,'Addition','',annotations,annotations);this.pdfViewerBase.fireDocumentEditedEvent("AnnotationAdded");var annotation=null;var left=annotations.bounds.left?annotations.bounds.left:annotations.bounds.x;var top=annotations.bounds.top?annotations.bounds.top:annotations.bounds.y;if(annotations.wrapper&&annotations.wrapper.bounds){left=annotations.wrapper.bounds.left;top=annotations.wrapper.bounds.top;}annotation={// eslint-disable-next-line max-len
id:annotations.id,bounds:{left:left,top:top,width:annotations.bounds.width,height:annotations.bounds.height},shapeAnnotationType:annotations.shapeAnnotationType,opacity:annotations.opacity,thickness:annotations.thickness,strokeColor:annotations.strokeColor,pageIndex:annotations.pageIndex,data:annotations.data,fontSize:annotations.fontSize,fontFamily:annotations.fontFamily,signatureName:annotations.signatureName};// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);// eslint-disable-next-line
var currentAnnotation=Math.round(JSON.stringify(annotation).length/1024);if(sessionSize+currentAnnotation>4500){this.pdfViewerBase.isStorageExceed=true;this.pdfViewer.annotationModule.clearAnnotationStorage();}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sign');var index=0;if(!storeObject){this.storeSignatureCollections(annotation,pageNumber);var shapeAnnotation={pageIndex:pageNumber,annotations:[]};shapeAnnotation.annotations.push(annotation);index=shapeAnnotation.annotations.indexOf(annotation);var annotationCollection=[];annotationCollection.push(shapeAnnotation);var annotationStringified=JSON.stringify(annotationCollection);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sign',annotationStringified);}}else{this.storeSignatureCollections(annotation,pageNumber);var annotObject=JSON.parse(storeObject);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sign');var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[pageIndex]){annotObject[pageIndex].annotations.push(annotation);index=annotObject[pageIndex].annotations.indexOf(annotation);}else{var markupAnnotation={pageIndex:pageNumber,annotations:[]};markupAnnotation.annotations.push(annotation);index=markupAnnotation.annotations.indexOf(annotation);annotObject.push(markupAnnotation);}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sign',annotationStringified);}}};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isSignatureEdited
     * @private
     */ // eslint-disable-next-line
Signature.prototype.modifySignatureCollection=function(property,pageNumber,annotationBase,isSignatureEdited){this.pdfViewerBase.updateDocumentEditedProperty(true);var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){// eslint-disable-next-line max-len
pageAnnotations[i].bounds={left:annotationBase.wrapper.bounds.left,top:annotationBase.wrapper.bounds.top,width:annotationBase.bounds.width,height:annotationBase.bounds.height};pageAnnotations[i].fontSize=annotationBase.fontSize;}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='delete'){this.updateSignatureCollection(pageAnnotations[i]);currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}if(property&&property!=='delete'){this.storeSignatureCollections(pageAnnotations[i],pageNumber);}if(isSignatureEdited){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;this.storeSignatureCollections(pageAnnotations[i],pageNumber);break;}}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};/**
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
Signature.prototype.storeSignatureCollections=function(annotation,pageNumber){// eslint-disable-next-line
var collectionDetails=this.checkSignatureCollection(annotation);// eslint-disable-next-line
var selectAnnotation=cloneObject(annotation);selectAnnotation.annotationId=annotation.signatureName;selectAnnotation.pageNumber=pageNumber;delete selectAnnotation.annotName;if(annotation.id){selectAnnotation.uniqueKey=annotation.id;delete selectAnnotation.id;}if(collectionDetails.isExisting){this.pdfViewer.signatureCollection.splice(collectionDetails.position,0,selectAnnotation);}else{this.pdfViewer.signatureCollection.push(selectAnnotation);}};// eslint-disable-next-line
Signature.prototype.checkSignatureCollection=function(signature){// eslint-disable-next-line
var collections=this.pdfViewer.signatureCollection;if(collections&&signature){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===signature.signatureName){this.pdfViewer.signatureCollection.splice(i,1);return{isExisting:true,position:i};}}}return{isExisting:false,position:null};};/**
     * @param signature
     * @private
     */ // eslint-disable-next-line
Signature.prototype.updateSignatureCollection=function(signature){// eslint-disable-next-line
var collections=this.pdfViewer.signatureCollection;if(collections&&signature){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===signature.signatureName){this.pdfViewer.signatureCollection.splice(i,1);break;}}}};/**
     * @param pageNumber
     * @param signature
     * @private
     */ // eslint-disable-next-line
Signature.prototype.addInCollection=function(pageNumber,signature){if(signature){this.storeSignatureCollections(signature,pageNumber);// eslint-disable-next-line
var pageSignatures=this.getAnnotations(pageNumber,null);if(pageSignatures){pageSignatures.push(signature);}this.manageAnnotations(pageSignatures,pageNumber);}};// eslint-disable-next-line
Signature.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=null;if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign'];}else{storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sign');}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};Signature.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=null;if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign'];}else{storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sign');}if(storeObject){var annotObject=JSON.parse(storeObject);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sign');var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sign']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sign',annotationStringified);}}};/**
     * @private
     * @param {boolean} isShow - Returns the true or false.
     * @returns {void}
     */Signature.prototype.showSignatureDialog=function(isShow){if(isShow){this.createSignaturePanel();}};/**
     * @private
     * @returns {void}
     */Signature.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarSignClicked=true;this.showSignatureDialog(true);};/**
     * @private
     * @returns {void}
     */Signature.prototype.setInitialMode=function(){this.pdfViewerBase.isToolbarSignClicked=true;this.pdfViewerBase.isInitialField=true;this.showSignatureDialog(true);};/**
     * @param number
     * @private
     */ // eslint-disable-next-line
Signature.prototype.ConvertPointToPixel=function(number){return number*(96/72);};/**
     * @param signature
     * @param pageIndex
     * @param isImport
     * @private
     */ // eslint-disable-next-line
Signature.prototype.updateSignatureCollections=function(signature,pageIndex,isImport){var annot;// eslint-disable-next-line
if(signature){// eslint-disable-next-line
var bounds=signature.Bounds;var currentLeft=bounds.X;var currentTop=bounds.Y;var currentWidth=bounds.Width;var currentHeight=bounds.Height;// eslint-disable-next-line
var data=signature.PathData;if(isImport){data=sf.drawings.getPathString(JSON.parse(signature.PathData));}annot={// eslint-disable-next-line max-len
id:'sign'+signature.SignatureName,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,shapeAnnotationType:'HandWrittenSignature',opacity:signature.Opacity,strokeColor:signature.StrokeColor,thickness:signature.Thickness,signatureName:signature.SignatureName};return annot;}};/**
     * @private
     * @returns {void}
     */Signature.prototype.destroy=function(){window.sessionStorage.removeItem('_annotations_sign');// eslint-disable-next-line
var signImage=document.getElementById(this.pdfViewer.dataId+'_signElement');if(signImage){signImage.removeEventListener('change',this.addStampImage);if(signImage.parentElement)signImage.parentElement.removeChild(signImage);}if(this.signatureDialog)this.signatureDialog.destroy();};return Signature;}();var __extends$3=undefined&&undefined.__extends||function(){var _extendStatics4=function extendStatics(d,b){_extendStatics4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return _extendStatics4(d,b);};return function(d,b){_extendStatics4(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();/**
 * Defines the interactive tools
 *
 * @hidden
 */var ToolBase=/** @class */function(){/**
     * Initializes the tool
     *
     * @param {PdfViewer} pdfViewer - Specified the pdfviewer component.
     * @param {PdfViewerBase} pdfViewerBase - Specified the pdfViewer base component.
     * @param {boolean} protectChange - Set the default value as false.
     */function ToolBase(pdfViewer,pdfViewerBase,protectChange){if(protectChange===void 0){protectChange=false;}/**
         * Command that is corresponding to the current action
         */this.commandHandler=null;/**
         * Sets/Gets whether the interaction is being done
         */this.inAction=false;/**
         * Sets/Gets the protect change
         */this.pdfViewerBase=null;/**
         * Sets/Gets the current element that is under mouse
         */ /**   @private  */this.currentElement=null;/**   @private  */this.blocked=false;this.isTooltipVisible=false;/** @private */this.childTable={};/** @private */this.helper=undefined;/**
         * Sets/Gets the previous object when mouse down
         */this.undoElement={annotations:[]};this.undoParentElement={annotations:[]};this.commandHandler=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param {IElement} currentElement - Specified the current element.
     * @returns {void}
     */ToolBase.prototype.startAction=function(currentElement){this.currentElement=currentElement;this.inAction=true;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse up event arguments.
     * @returns {void}
     */ToolBase.prototype.mouseDown=function(args){this.currentElement=args.source;this.startPosition=this.currentPosition=this.prevPosition=args.position;this.isTooltipVisible=true;this.startAction(args.source);};/**
     * @private
     * @param {MouseEventArgs} args - Mouse up event arguments.
     * @returns {boolean} - Returns true or false.
     */ToolBase.prototype.mouseMove=function(args){this.currentPosition=args.position;//this.currentElement = currentElement;
this.prevPageId=this.pdfViewerBase.activeElements.activePageID;return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse up event arguments.
     * @returns {void}
     */ToolBase.prototype.mouseUp=function(args){this.currentPosition=args.position;// this.currentElement = currentElement;
this.isTooltipVisible=false;//At the end
this.endAction();this.helper=null;};ToolBase.prototype.endAction=function(){//remove helper
if(this.commandHandler){this.commandHandler.tool='';if(this.helper){this.commandHandler.remove(this.helper);}}this.commandHandler=null;this.currentElement=null;this.currentPosition=null;this.inAction=false;this.blocked=false;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse wheel event arguments.
     * @returns {void}
     */ToolBase.prototype.mouseWheel=function(args){this.currentPosition=args.position;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse leave event arguments.
     * @returns {void}
     */ToolBase.prototype.mouseLeave=function(args){this.mouseUp(args);};// eslint-disable-next-line
ToolBase.prototype.updateSize=function(shape,startPoint,endPoint,corner,initialBounds,angle,isMouseUp){var zoom=this.commandHandler.viewerBase.getZoomFactor();var difx=this.currentPosition.x/zoom-this.startPosition.x/zoom;var dify=this.currentPosition.y/zoom-this.startPosition.y/zoom;var rotateAngle=shape instanceof sf.drawings.TextElement?angle:shape.rotateAngle;var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,-rotateAngle,0,0);var deltaWidth=0;var deltaHeight=0;var diff;var width;var height;if(shape.shapeAnnotationType==="Image"||shape.shapeAnnotationType==="Stamp"){width=shape instanceof sf.drawings.TextElement?shape.actualSize.width:shape.wrapper.bounds.width;height=shape instanceof sf.drawings.TextElement?shape.actualSize.height:shape.wrapper.bounds.height;}else{width=shape instanceof sf.drawings.TextElement?shape.actualSize.width:shape.bounds.width;height=shape instanceof sf.drawings.TextElement?shape.actualSize.height:shape.bounds.height;}// eslint-disable-next-line
var obj=shape;if(!shape.formFieldAnnotationType){if(!shape.annotName&&!shape.shapeAnnotationType){if(shape){// eslint-disable-next-line
obj=shape.annotations[0];}}}// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(obj):{};var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}var isAnnotationSet=false;if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){isAnnotationSet=true;}if(isAnnotationSet&&isMouseUp){// eslint-disable-next-line
var size=this.getPositions(corner,difx,dify);var newWidth=width+size.x;var newHeight=height+size.y;// eslint-disable-next-line max-len
if(newHeight>annotationMinHeight&&newHeight<annotationMaxHeight&&newWidth>annotationMinWidth&&newWidth<annotationMaxWidth){// eslint-disable-next-line
difx=difx;// eslint-disable-next-line
dify=dify;}else{if(newHeight<annotationMinHeight||newHeight>annotationMaxHeight){if(newHeight<annotationMinHeight){dify=annotationMinHeight-height;}else{dify=annotationMaxHeight-height;}}if(newWidth<annotationMinWidth||newWidth>annotationMaxWidth){if(newWidth<annotationMinWidth){difx=annotationMinWidth-width;}else{difx=annotationMaxWidth-width;}}}}switch(corner){case'ResizeWest':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;deltaHeight=1;// eslint-disable-next-line
difx=difx;dify=0;if(isAnnotationSet){if(initialBounds.width-difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}}deltaWidth=(initialBounds.width-difx)/width;break;case'ResizeEast':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;dify=0;if(isAnnotationSet){if(initialBounds.width+difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}}deltaWidth=(initialBounds.width+difx)/width;deltaHeight=1;break;case'ResizeNorth':deltaWidth=1;diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.height-dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaHeight=(initialBounds.height-dify)/height;break;case'ResizeSouth':deltaWidth=1;diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.height+dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaHeight=(initialBounds.height+dify)/height;break;case'ResizeNorthEast':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.width+difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}if(initialBounds.height-dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaWidth=(initialBounds.width+difx)/width;deltaHeight=(initialBounds.height-dify)/height;break;case'ResizeNorthWest':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.width-difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}if(initialBounds.height-dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaWidth=(initialBounds.width-difx)/width;deltaHeight=(initialBounds.height-dify)/height;break;case'ResizeSouthEast':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.width+difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}if(initialBounds.height+dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaHeight=(initialBounds.height+dify)/height;deltaWidth=(initialBounds.width+difx)/width;break;case'ResizeSouthWest':diff=sf.drawings.transformPointByMatrix(matrix,{x:difx,y:dify});difx=diff.x;dify=diff.y;if(isAnnotationSet){if(initialBounds.width-difx>annotationMaxWidth){difx=annotationMaxWidth-initialBounds.width;}if(initialBounds.height+dify>annotationMaxHeight){dify=annotationMaxHeight-initialBounds.height;}}deltaWidth=(initialBounds.width-difx)/width;deltaHeight=(initialBounds.height+dify)/height;break;}return{width:deltaWidth,height:deltaHeight};};ToolBase.prototype.getPivot=function(corner){switch(corner){case'ResizeWest':return{x:1,y:0.5};case'ResizeEast':return{x:0,y:0.5};case'ResizeNorth':return{x:0.5,y:1};case'ResizeSouth':return{x:0.5,y:0};case'ResizeNorthEast':return{x:0,y:1};case'ResizeNorthWest':return{x:1,y:1};case'ResizeSouthEast':return{x:0,y:0};case'ResizeSouthWest':return{x:1,y:0};}return{x:0.5,y:0.5};};ToolBase.prototype.getPositions=function(corner,x,y){switch(corner){case'ResizeEast':return{x:x,y:0};case'ResizeSouthEast':return{x:x,y:y};case'ResizeSouth':return{x:0,y:y};case'ResizeNorth':return{x:0,y:-y};case'ResizeNorthEast':return{x:x,y:-y};case'ResizeNorthWest':return{x:-x,y:-y};case'ResizeWest':return{x:-x,y:0};case'ResizeSouthWest':return{x:-x,y:y};}return{x:x,y:y};};return ToolBase;}();/**
 * Helps to select the objects
 *
 * @hidden
 */var SelectTool=/** @class */function(_super){__extends$3(SelectTool,_super);function SelectTool(commandHandler,base){return _super.call(this,commandHandler,base,true)||this;//     this.action = action;
}/**
     * @private
     * @param {MouseEventArgs} args - Mouse down event arguments.
     * @returns {void}
     */SelectTool.prototype.mouseDown=function(args){this.inAction=true;this.mouseEventHelper(args);_super.prototype.mouseDown.call(this,args);};SelectTool.prototype.mouseEventHelper=function(args){if(this.commandHandler&&this.commandHandler.annotationModule){// eslint-disable-next-line
this.commandHandler.annotationModule.overlappedCollections=findActiveElement(args,this.pdfViewerBase,this.commandHandler,true);}// eslint-disable-next-line
var object;if(this.commandHandler&&this.commandHandler.textSelectionModule&&this.commandHandler.textSelectionModule.isTextSelection){object=null;}else{object=findActiveElement(args,this.pdfViewerBase,this.commandHandler);}// if (!isNullOrUndefined(object) && (object as any).shapeAnnotationType != 'Path'){
var isLock=false;// eslint-disable-next-line
if(object&&object.shapeAnnotationType==='StickyNotes'){// eslint-disable-next-line
if(object.annotationSettings&&object.annotationSettings.isLock){if(this.commandHandler.annotationModule.checkAllowedInteractions('Select',object)){isLock=false;}else{isLock=true;}}}if(!isLock){// eslint-disable-next-line
var currentSelctor=void 0;if(args.source&&args.annotationSelectorSettings!==null){currentSelctor=args.source.annotationSelectorSettings;}else{currentSelctor='';}if(this.commandHandler){var selectedObject=this.commandHandler.selectedItems;if(selectedObject){// eslint-disable-next-line
var annotation=selectedObject.annotations[0];// eslint-disable-next-line
var formField=selectedObject.formFields[0];var currentAnnot=this.commandHandler.selectedItems.annotations[0];var currentSource=args.source;if(selectedObject.annotations.length&&args.info&&!args.info.ctrlKey// eslint-disable-next-line
&&this.commandHandler.annotationModule&&this.commandHandler.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus===false){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);}else if(args.info&&args.info.ctrlKey&&(currentSource&&currentSource.shapeAnnotationType==='FreeText'||currentAnnot&&currentAnnot.shapeAnnotationType==='FreeText')){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);}if(object){if(!sf.base.isNullOrUndefined(this.pdfViewerBase.isFreeTextSelected)&&!this.pdfViewerBase.isFreeTextSelected){this.commandHandler.select([object.id],currentSelctor);this.commandHandler.viewerBase.isAnnotationMouseDown=true;}this.pdfViewerBase.isFreeTextSelected=false;this.commandHandler.viewerBase.isFormFieldMouseDown=true;}if(selectedObject.annotations.length===0&&annotation&&annotation.shapeAnnotationType!=='HandWrittenSignature'&&annotation.shapeAnnotationType!=='SignatureText'&&annotation.shapeAnnotationType!=='SignatureImage'&&annotation.shapeAnnotationType!=='Path'&&!annotation.formFieldAnnotationType){if(this.commandHandler.enableToolbar&&sf.base.Browser.isDevice&&!this.commandHandler.enableDesktopMode){this.commandHandler.toolbarModule.showToolbar(true);}this.commandHandler.fireAnnotationUnSelect(annotation.annotName,annotation.pageIndex,annotation);}if(selectedObject.annotations.length===0&&annotation){var signature={bounds:annotation.bounds,opacity:annotation.opacity,thickness:annotation.thickness,strokeColor:annotation.strokeColor};if(annotation.shapeAnnotationType==='HandWrittenSignature'){this.commandHandler.fireSignatureUnselect(annotation.signatureName,annotation.pageIndex,signature);}if(annotation.shapeAnnotationType==='SignatureText'||annotation.shapeAnnotationType==='SignatureImage'||annotation.shapeAnnotationType==='Path'){this.commandHandler.fireSignatureUnselect(annotation.id,annotation.pageIndex,signature);}}}}}// } else {
//     if (!isNullOrUndefined(this.commandHandler))
//         this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);
// }
};/**
     * @private
     * @param {MouseEventArgs} args - Mouse move event arguments.
     * @returns {boolean} - Returns true or false.
     */SelectTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);//draw selected region
return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Mouse up event arguments.
     * @returns {void}
     */SelectTool.prototype.mouseUp=function(args){this.mouseEventHelper(args);this.inAction=false;_super.prototype.mouseUp.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Mouse leave event arguments.
     * @returns {void}
     */SelectTool.prototype.mouseLeave=function(args){if(this.inAction){this.mouseUp(args);}};return SelectTool;}(ToolBase);/** @hidden */var MoveTool=/** @class */function(_super){__extends$3(MoveTool,_super);function MoveTool(commandHandler,base){var _this=_super.call(this,commandHandler,base)||this;/**   @private  */_this.currentTarget=null;/**   @private  */_this.prevNode=null;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Mouse down event arguments.
     * @returns {void}
     */MoveTool.prototype.mouseDown=function(args){_super.prototype.mouseDown.call(this,args);this.offset={x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY};this.startPosition=args.position;var nodeMouseDown=cloneObject(args.source);this.redoElement={bounds:{x:nodeMouseDown.wrapper.offsetX,y:nodeMouseDown.wrapper.offsetY,width:nodeMouseDown.wrapper.actualSize.width,height:nodeMouseDown.wrapper.actualSize.height}// eslint-disable-next-line
};if(isLineShapes(nodeMouseDown)){this.redoElement.vertexPoints=nodeMouseDown.vertexPoints;this.redoElement.leaderHeight=nodeMouseDown.leaderHeight;}this.inAction=true;};/**
     * @private
     * @param {any} args - Specified the mouse event arguments.
     * @returns {void}
     */ // eslint-disable-next-line
MoveTool.prototype.mouseUp=function(args){if(this.commandHandler&&args.source){// eslint-disable-next-line max-len
if(this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0){if(this.commandHandler.selectedItems.annotations[0].annotName===args.source.annotName){this.commandHandler.viewerBase.isAnnotationMouseMove=true;}}else{this.commandHandler.viewerBase.isAnnotationMouseMove=false;}// eslint-disable-next-line max-len
if(this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0){if(this.commandHandler.selectedItems.formFields[0].name===args.source.name){this.commandHandler.viewerBase.isFormFieldMouseMove=true;}}else{this.commandHandler.viewerBase.isFormFieldMouseMove=false;}var currentSelctor=args.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.select([args.source.id],currentSelctor);// eslint-disable-next-line max-len
this.commandHandler.dragSelectedObjects(this.calculateMouseActionXDiff(args),this.calculateMouseActionYDiff(args),this.pdfViewerBase.activeElements.activePageID,currentSelctor,null);this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelctor);this.commandHandler.viewerBase.isAnnotationMouseMove=false;this.commandHandler.viewerBase.isFormFieldMouseMove=false;// eslint-disable-next-line
var newShapeObject={bounds:{x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY,width:args.source.wrapper.actualSize.width,height:args.source.wrapper.actualSize.height},modifiedDate:args.source.modifiedDate};if(isLineShapes(args.source)){newShapeObject.vertexPoints=args.source.vertexPoints;newShapeObject.leaderHeight=args.source.leaderHeight;}if(args.target&&args.target.formFieldAnnotationType){var node=args.target;var field={// eslint-disable-next-line
value:node.value,fontFamily:node.fontFamily,fontSize:node.fontSize,fontStyle:node.fontStyle,// eslint-disable-next-line
color:node.color,backgroundColor:node.backgroundColor,borderColor:node.borderColor,// eslint-disable-next-line
thickness:node.thickness,alignment:node.alignment,isReadonly:node.isReadonly,visibility:node.visibility,// eslint-disable-next-line
maxLength:node.maxLength,isRequired:node.isRequired,isPrint:node.isPrint,rotation:node.rotateAngle,tooltip:node.tooltip,options:node.options,// eslint-disable-next-line
isChecked:node.isChecked,isSelected:node.isSelected};// eslint-disable-next-line max-len
var currentPosition={X:args.source.wrapper.offsetX,Y:args.source.wrapper.offsetY,Width:args.source.wrapper.actualSize.width,Height:args.source.wrapper.actualSize.height};// eslint-disable-next-line max-len
var previousPosition={X:this.offset.x,Y:this.offset.y,Width:args.source.wrapper.actualSize.width,Height:args.source.wrapper.actualSize.height};this.commandHandler.fireFormFieldMoveEvent('formFieldMove',field,node.pageIndex,previousPosition,currentPosition);}if(this.commandHandler.annotation){// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,args.source,'Drag','',this.redoElement,newShapeObject);this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(args.source,null,'Drag');this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(args.source,null);}}_super.prototype.mouseUp.call(this,args);};MoveTool.prototype.calculateMouseXDiff=function(){if(this.currentPosition&&this.startPosition){return this.currentPosition.x-this.startPosition.x;}else{return 0;}};MoveTool.prototype.calculateMouseYDiff=function(){if(this.currentPosition&&this.startPosition){return this.currentPosition.y-this.startPosition.y;}else{return 0;}};MoveTool.prototype.calculateMouseActionXDiff=function(args){var x=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor();// let y: number = this.calculateMouseYDiff() / this.commandHandler.magnification.zoomFactor;
if(this.offset){var requiredX=this.offset.x+x;// let requiredY: number = this.offset.y + y;
return requiredX-args.source.wrapper.offsetX;//let diffY: number = requiredY - args.source.wrapper.offsetY;
}else{return 0;}};MoveTool.prototype.calculateMouseActionYDiff=function(args){// let x: number = this.calculateMouseXDiff() / this.commandHandler.magnification.zoomFactor;
var y=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor();if(this.offset){// let requiredX: number = this.offset.x + x;
var requiredY=this.offset.y+y;// let diffX: number = requiredX - args.source.wrapper.offsetX;
return requiredY-args.source.wrapper.offsetY;}else{return 0;}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @param {boolean} isStamp - Specified the stamp annotation or not.
     * @param {boolean} isSkip - Specified the annotation skip or not.
     * @returns {boolean} - Returns the true or false.
     */MoveTool.prototype.mouseMove=function(args,isStamp,isSkip){_super.prototype.mouseMove.call(this,args);if(this.inAction){this.currentPosition=args.position;this.currentTarget=args.target;var currentSelctor=args.source.annotationSelectorSettings;var x=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor();var y=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor();var requiredX=this.offset.x+x;var requiredY=this.offset.y+y;var diffX=this.calculateMouseActionXDiff(args);var diffY=this.calculateMouseActionYDiff(args);var selectedItem=this.commandHandler.selectedItems.annotations[0];if(!this.helper){// eslint-disable-next-line
var cobject=this.commandHandler.selectedItems.annotations.length>0?cloneObject(this.commandHandler.selectedItems.annotations[0]):cloneObject(this.commandHandler.selectedItems.formFields[0]);if(cobject.wrapper){diffX=requiredX-cobject.wrapper.offsetX;diffY=requiredY-cobject.wrapper.offsetY;// eslint-disable-next-line max-len
cobject.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds;}cobject.wrapper=undefined;cobject.id='diagram_helper';if(cobject.shapeAnnotationType==='Stamp'){cobject.strokeColor='';cobject.borderDashArray='';cobject.fillColor='transparent';cobject.stampFillColor='transparent';cobject.data='';}else if(cobject.shapeAnnotationType==='FreeText'){cobject.strokeColor='blue';cobject.fillColor='transparent';cobject.thickness=1;cobject.opacity=1;cobject.dynamicText='';}else if(cobject.shapeAnnotationType==='SignatureText'){cobject.strokeColor='red';cobject.borderDashArray='5,5';cobject.fillColor='transparent';cobject.thickness=2;cobject.opacity=1;cobject.data='';}else{cobject.strokeColor='red';cobject.borderDashArray='5,5';cobject.fillColor='transparent';cobject.thickness=2;cobject.opacity=1;}if(cobject.enableShapeLabel===true){cobject.labelContent='';}if(!isStamp){this.helper=cobject=this.commandHandler.add(cobject);}else{cobject=this.helper=args.source;}if(this.commandHandler.selectedItems.annotations.length>0){this.commandHandler.selectedItems.annotations=[cobject];}else{this.commandHandler.selectedItems.formFields=[cobject];}}else{diffX=requiredX-this.helper.wrapper.offsetX;diffY=requiredY-this.helper.wrapper.offsetY;}if(this.helper&&this.helper.shapeAnnotationType==='Stamp'){isStamp=true;}// eslint-disable-next-line max-len
if(this.commandHandler.checkBoundaryConstraints(diffX,diffY,this.pdfViewerBase.activeElements.activePageID,this.helper.wrapper.bounds,isStamp,isSkip)){// eslint-disable-next-line max-len
this.commandHandler.dragSelectedObjects(diffX,diffY,this.pdfViewerBase.activeElements.activePageID,currentSelctor,this.helper);this.prevNode=this.helper;this.prevPosition=this.currentPosition;}else{this.currentPosition=this.prevPosition;}if(selectedItem&&selectedItem.annotName){this.commandHandler.annotation.triggerAnnotationMove(selectedItem,true);}}return true;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */MoveTool.prototype.mouseLeave=function(args){var currentSelctor=args.source.annotationSelectorSettings;var requiredX=this.offset.x+this.calculateMouseXDiff();var requiredY=this.offset.y+this.calculateMouseYDiff();var diffX=requiredX-args.source.wrapper.offsetX;var diffY=requiredY-args.source.wrapper.offsetY;this.commandHandler.dragSelectedObjects(diffX,diffY,this.prevPageId,currentSelctor,null);this.commandHandler.renderSelector(this.prevPageId,currentSelctor);_super.prototype.mouseLeave.call(this,args);};/**
     * @private
     * @returns {void}
     */MoveTool.prototype.endAction=function(){_super.prototype.endAction.call(this);this.currentTarget=null;this.prevPosition=null;};return MoveTool;}(ToolBase);/** @hidden */var StampTool=/** @class */function(_super){__extends$3(StampTool,_super);function StampTool(){return _super!==null&&_super.apply(this,arguments)||this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {any} - Returns the mouse up event.
     */ // eslint-disable-next-line
StampTool.prototype.mouseDown=function(args){_super.prototype.mouseUp.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns the true or false.
     */StampTool.prototype.mouseMove=function(args){// eslint-disable-next-line
var newObject;if(!this.inAction){var pageIndex=this.pdfViewerBase.activeElements.activePageID;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);// eslint-disable-next-line max-len
var nodeElement=this.commandHandler.annotation.stampAnnotationModule.moveStampElement(args.position.x,args.position.y,pageIndex);if(nodeElement.shapeAnnotationType==='SignatureText'){var textWidth=this.getTextWidth(nodeElement.data,nodeElement.fontSize);var widthRatio=1;if(textWidth>nodeElement.bounds.width)widthRatio=nodeElement.bounds.width/textWidth;nodeElement.fontSize=nodeElement.fontSize*widthRatio;nodeElement.thickness=0;}newObject=this.commandHandler.add(nodeElement);args.source=this.commandHandler.annotations[this.commandHandler.annotations.length-1];args.sourceWrapper=args.source.wrapper;this.inAction=true;// eslint-disable-next-line
var currentSource=args.source;if(currentSource&&(currentSource.shapeAnnotationType==='HandWrittenSignature'||currentSource.shapeAnnotationType==='SignatureText'||currentSource.shapeAnnotationType==='SignatureImage')){this['offset']={x:args.source.wrapper.offsetX-args.source.wrapper.bounds.width/2,y:args.source.wrapper.offsetY-args.source.wrapper.bounds.height/2};}else{this['offset']={x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY};}this.startPosition=args.position;this.commandHandler.select([newObject.id]);}var currentSelctor=args.source.annotationSelectorSettings;_super.prototype.mouseMove.call(this,args,true,true);this.commandHandler.renderSelector(args.source.pageIndex,currentSelctor);return this.inAction;};StampTool.prototype.getTextWidth=function(text,font){var canvas=document.createElement('canvas');var context=canvas.getContext('2d');context.font=font||getComputedStyle(document.body).font;return context.measureText(text).width;};return StampTool;}(MoveTool);/**
 * Draws a node that is defined by the user
 *
 * @hidden
 */var InkDrawingTool=/** @class */function(_super){__extends$3(InkDrawingTool,_super);function InkDrawingTool(commandHandler,base,sourceObject){var _this=_super.call(this,commandHandler,base)||this;_this.sourceObject=sourceObject;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */InkDrawingTool.prototype.mouseDown=function(args){this.pdfViewerBase.disableTextSelectionMode();_super.prototype.mouseDown.call(this,args);this.inAction=true;// eslint-disable-next-line
var node={currentPosition:this.currentPosition,prevPosition:this.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(node,this.pdfViewerBase.activeElements.activePageID);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */InkDrawingTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);if(this.inAction){// eslint-disable-next-line
var node={currentPosition:this.currentPosition,prevPosition:this.pdfViewerBase.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(node,this.pdfViewerBase.activeElements.activePageID);}return this.inAction;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true.
     */InkDrawingTool.prototype.mouseUp=function(args){this.commandHandler.annotation.inkAnnotationModule.storePathData();return true;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */InkDrawingTool.prototype.mouseLeave=function(args){//this.mouseUp(args);
};/**
     * @private
     * @returns {void}
     */InkDrawingTool.prototype.endAction=function(){_super.prototype.endAction.call(this);};return InkDrawingTool;}(ToolBase);/**
 * Helps to edit the selected connectors
 *
 * @hidden
 */var ConnectTool=/** @class */function(_super){__extends$3(ConnectTool,_super);function ConnectTool(commandHandler,base,endPoint){var _this=_super.call(this,commandHandler,base,true)||this;_this.endPoint=endPoint;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */ConnectTool.prototype.mouseDown=function(args){this.inAction=true;this.undoElement=undefined;_super.prototype.mouseDown.call(this,args);var oldValue;var connectors;if(args.source&&args.source.annotations){// eslint-disable-next-line @typescript-eslint/no-unused-vars
oldValue={x:this.prevPosition.x,y:this.prevPosition.y};// eslint-disable-next-line @typescript-eslint/no-unused-vars
connectors=args.source.annotations[0];}this.initialPosition=args.position;this.prevSource=this.commandHandler.selectedItems.annotations[0];var nodeElement=cloneObject(args.source);this.redoElement={bounds:{x:nodeElement.wrapper.offsetX,y:nodeElement.wrapper.offsetY,width:nodeElement.wrapper.actualSize.width,height:nodeElement.wrapper.actualSize.height}// eslint-disable-next-line
};if(isLineShapes(nodeElement)){this.redoElement.vertexPoints=nodeElement.vertexPoints;this.redoElement.leaderHeight=nodeElement.leaderHeight;if(nodeElement.measureType==='Distance'||nodeElement.measureType==='Perimeter'||nodeElement.measureType==='Area'||nodeElement.measureType==='Volume'){this.redoElement.notes=nodeElement.notes;}}this.currentPosition=args.position;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */ConnectTool.prototype.mouseUp=function(args){if(this.commandHandler){var node=this.commandHandler.selectedItems.annotations[0];if(node){// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule.findAnnotationSettings(node);var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;// eslint-disable-next-line max-len
if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}if(node.vertexPoints.length>3){// eslint-disable-next-line
var sizeObject=this.commandHandler.viewerBase.checkAnnotationWidth(node.vertexPoints);var width=sizeObject.width;var height=sizeObject.height;if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){// eslint-disable-next-line max-len
if(height>annotationMinHeight&&height<annotationMaxHeight||width>annotationMinWidth&&width<annotationMaxWidth){// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}else{// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}else{if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){if(node.shapeAnnotationType==='Line'||node.shapeAnnotationType==='Distance'||node.shapeAnnotationType==='LineWidthArrowHead'){var x=0;var y=0;if(node.vertexPoints[0].x>node.vertexPoints[1].x){x=node.vertexPoints[0].x-node.vertexPoints[1].x;}else{x=node.vertexPoints[1].x-node.vertexPoints[0].x;}if(node.vertexPoints[0].y>node.vertexPoints[1].y){y=node.vertexPoints[0].y-node.vertexPoints[1].y;}else{y=node.vertexPoints[1].y-node.vertexPoints[0].y;}var diff=x>y?x:y;if(diff<(annotationMaxHeight||annotationMaxWidth)&&diff>(annotationMinHeight||annotationMinWidth)){// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}else{// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}else{// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});}}var currentSelctor=args.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.select([this.prevSource.id],currentSelctor);this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelctor);// eslint-disable-next-line
var newShapeElementObject={bounds:{x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY,width:args.source.wrapper.actualSize.width,height:args.source.wrapper.actualSize.height}};if(node.measureType==='Distance'||node.measureType==='Perimeter'||node.measureType==='Area'||node.measureType==='Volume'){this.commandHandler.annotation.updateCalibrateValues(this.commandHandler.selectedItems.annotations[0]);newShapeElementObject.notes=args.source.notes;}if(isLineShapes(args.source)){newShapeElementObject.vertexPoints=args.source.vertexPoints;newShapeElementObject.leaderHeight=args.source.leaderHeight;}// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,'Resize','',this.redoElement,newShapeElementObject);}}_super.prototype.mouseUp.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */ConnectTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);var connector;this.currentPosition=args.position;if(this.currentPosition&&this.prevPosition){var diffX=this.currentPosition.x-this.prevPosition.x;var diffY=this.currentPosition.y-this.prevPosition.y;var newValue=void 0;var oldValue=void 0;if(args.source&&args.source.annotations){// eslint-disable-next-line @typescript-eslint/no-unused-vars
newValue={x:this.currentPosition.x,y:this.currentPosition.y};// eslint-disable-next-line @typescript-eslint/no-unused-vars
oldValue={x:this.prevPosition.x,y:this.prevPosition.y};// eslint-disable-next-line @typescript-eslint/no-unused-vars
connector=args.source.annotations[0];}if(this.inAction&&this.endPoint!==undefined&&diffX!==0||diffY!==0){if(!this.helper){// eslint-disable-next-line
var cloneShapebject=cloneObject(this.commandHandler.selectedItems.annotations[0]);cloneShapebject.id='diagram_helper';cloneShapebject.strokeColor='red';cloneShapebject.borderDashArray='5,5';cloneShapebject.fillColor='transparent';cloneShapebject.thickness=2;cloneShapebject.opacity=1;if(cloneShapebject.enableShapeLabel===true){cloneShapebject.labelContent='';}this.helper=cloneShapebject=this.commandHandler.add(cloneShapebject);this.commandHandler.selectedItems.annotations=[cloneShapebject];}var currentSelctor=args.source.annotationSelectorSettings;this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.helper,this.currentPosition,this.selectedSegment,args.target,null,currentSelctor);this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelctor);}}this.prevPosition=this.currentPosition;return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */ConnectTool.prototype.mouseLeave=function(args){this.mouseUp(args);};/**
     * @private
     * @returns {void}
     */ConnectTool.prototype.endAction=function(){_super.prototype.endAction.call(this);this.prevPosition=null;this.endPoint=null;};return ConnectTool;}(ToolBase);/**
 * Scales the selected objects
 *
 * @hidden
 */var ResizeTool=/** @class */function(_super){__extends$3(ResizeTool,_super);function ResizeTool(commandHandler,base,corner){var _this=_super.call(this,commandHandler,base,true)||this;/**   @private  */_this.initialBounds=new sf.drawings.Rect();_this.corner=corner;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void} - Returns true or false.
     */ResizeTool.prototype.mouseDown=function(args){_super.prototype.mouseDown.call(this,args);this.initialBounds.x=args.source.wrapper.offsetX;this.initialBounds.y=args.source.wrapper.offsetY;this.initialBounds.height=args.source.wrapper.actualSize.height;this.initialBounds.width=args.source.wrapper.actualSize.width;this.initialPosition=args.position;var node=cloneObject(args.source);this.redoElement={bounds:{x:node.wrapper.offsetX,y:node.wrapper.offsetY,width:node.wrapper.actualSize.width,height:node.wrapper.actualSize.height}// eslint-disable-next-line
};if(isLineShapes(node)){this.redoElement.vertexPoints=node.vertexPoints;this.redoElement.leaderHeight=node.leaderHeight;}if(node.measureType==='Radius'){this.redoElement.notes=node.notes;}// eslint-disable-next-line max-len
this.prevSource=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0];};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @param {boolean} isPreventHistory - Specified the prevent history value.
     * @returns {boolean} - Returns true or false.
     */ResizeTool.prototype.mouseUp=function(args,isPreventHistory){var object=args.source;var oldObject=cloneObject(args.source);if(this.commandHandler&&this.prevSource){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.viewerBase.isAnnotationSelect=true;this.commandHandler.viewerBase.isFormFieldSelect=true;this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings);// eslint-disable-next-line max-len
var deltaValues=this.updateSize(this.prevSource,this.currentPosition,this.initialPosition,this.corner,this.initialBounds,null,true);this.blocked=this.scaleObjects(deltaValues.width,deltaValues.height,this.corner,this.currentPosition,this.initialPosition,this.prevSource);if(this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations[0]&&this.commandHandler.selectedItems.annotations[0].shapeAnnotationType==='Stamp'){if(this.commandHandler.stampSettings.minHeight||this.commandHandler.stampSettings.minWidth){this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings);}}this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings);if(this.commandHandler.annotation&&args.source.wrapper){// eslint-disable-next-line
var newObject={bounds:{x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY,width:args.source.wrapper.actualSize.width,height:args.source.wrapper.actualSize.height}};if(isLineShapes(args.source)){newObject.vertexPoints=args.source.vertexPoints;newObject.leaderHeight=args.source.leaderHeight;}if(this.prevSource.measureType==='Radius'){newObject.notes=args.source.notes;this.commandHandler.annotation.updateCalibrateValues(this.prevSource);}if(this.prevSource.shapeAnnotationType==='SignatureText'){var boundsRatio=newObject.bounds.width/oldObject.width;newObject.fontSize=this.prevSource.wrapper.children[1].style.fontSize*boundsRatio;if(args.target!=null){args.target.fontSize=newObject.fontSize;// eslint-disable-next-line
args.target.wrapper.children[1].style.fontSize=newObject.fontSize;args.target.wrapper.children[1].horizontalAlignment='Center';args.target.wrapper.children[1].verticalAlignment='Center';args.target.wrapper.children[1].setOffsetWithRespectToBounds(0,0,'Absolute');// eslint-disable-next-line
this.commandHandler.selectedItems.annotations[0].wrapper.children[1].style.fontSize=newObject.fontSize;this.commandHandler.selectedItems.annotations[0].wrapper.children[1].horizontalAlignment='Center';this.commandHandler.selectedItems.annotations[0].wrapper.children[1].verticalAlignment='Center';this.commandHandler.selectedItems.annotations[0].wrapper.children[1].setOffsetWithRespectToBounds(0,0,'Absolute');this.commandHandler.selectedItems.annotations[0].fontSize=newObject.fontSize;}}if(this.prevSource.shapeAnnotationType==='SignatureText'&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0){// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.commandHandler.selectedItems.annotations[0],{fontSize:newObject.fontSize});}// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,'Resize','',this.redoElement,newObject);}if(args.target&&args.target.formFieldAnnotationType){var node=args.target;// eslint-disable-next-line
var field={value:node.value,fontFamily:node.fontFamily,fontSize:node.fontSize,fontStyle:node.fontStyle,// eslint-disable-next-line
color:node.color,backgroundColor:node.backgroundColor,alignment:node.alignment,isReadonly:node.isReadonly,visibility:node.visibility,// eslint-disable-next-line
maxLength:node.maxLength,isRequired:node.isRequired,isPrint:node.isPrint,rotation:node.rotateAngle,tooltip:node.tooltip,// eslint-disable-next-line
options:node.options,isChecked:node.isChecked,isSelected:node.isSelected};// eslint-disable-next-line max-len
var currentPosition={X:args.source.wrapper.offsetX,Y:args.source.wrapper.offsetY,Width:args.source.wrapper.actualSize.width,Height:args.source.wrapper.actualSize.height};// eslint-disable-next-line max-len
var previousPosition={X:this.initialBounds.x,Y:this.initialBounds.y,Width:this.initialBounds.width,Height:this.initialBounds.height};this.commandHandler.fireFormFieldResizeEvent('formFieldResize',field,node.pageIndex,previousPosition,currentPosition);}if(this.commandHandler.annotation&&this.commandHandler.annotation.stampAnnotationModule){this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(args.source,this.prevSource.id,'Resize');}}_super.prototype.mouseUp.call(this,args);return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */ResizeTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);var object=args.source;this.currentPosition=args.position;var x=this.currentPosition.x-this.startPosition.x;var y=this.currentPosition.y-this.startPosition.y;x=x/this.commandHandler.viewerBase.getZoomFactor();y=y/this.commandHandler.viewerBase.getZoomFactor();// eslint-disable-next-line
var annotationElement=args.source;// eslint-disable-next-line
var size=this.getPoints(x,y);var width=annotationElement.width+size.x;var height=annotationElement.height+size.y;// eslint-disable-next-line
var obj=object;if(object&&object.annotations){// eslint-disable-next-line
obj=object.annotations[0];}// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(obj):{};var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}if(annotationMinHeight||annotationMinWidth||annotationMaxHeight||annotationMaxWidth){// eslint-disable-next-line max-len
if(height>=annotationMinHeight&&height<=annotationMaxHeight&&width>=annotationMinWidth&&width<=annotationMaxWidth){// eslint-disable-next-line
x=x;// eslint-disable-next-line
y=y;}else{if(height<annotationMinHeight||height>annotationMaxHeight){if(height<annotationMinHeight){y=annotationMinHeight-annotationElement.height;}else{y=annotationMaxHeight-annotationElement.height;}}if(width<annotationMinWidth||width>annotationMaxWidth){if(width<annotationMinWidth){x=annotationMinWidth-annotationElement.width;}else{x=annotationMaxWidth-annotationElement.width;}}}}var changes={x:x,y:y};if(this.currentElement.wrapper){changes=sf.drawings.rotatePoint(-this.currentElement.wrapper.rotateAngle,undefined,undefined,changes);}changes=this.getChanges(changes);if(!this.helper){// eslint-disable-next-line
var cobject=this.commandHandler.selectedItems.annotations.length>0?cloneObject(this.commandHandler.selectedItems.annotations[0]):cloneObject(this.commandHandler.selectedItems.formFields[0]);cobject.id='diagram_helper';if(cobject.shapeAnnotationType==='Stamp'){cobject.strokeColor='';cobject.bounds.height=obj.wrapper.bounds.height;cobject.bounds.width=obj.wrapper.bounds.width;cobject.bounds.x=obj.wrapper.bounds.x;cobject.bounds.y=obj.wrapper.bounds.y;cobject.borderDashArray='';cobject.fillColor='transparent';cobject.stampFillColor='transparent';cobject.data='';}else if(cobject.shapeAnnotationType==='FreeText'){cobject.strokeColor='blue';cobject.fillColor='transparent';cobject.thickness=1;cobject.opacity=1;cobject.dynamicText='';}else{// eslint-disable-next-line max-len
cobject.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds;cobject.strokeColor='red';cobject.borderDashArray='5,5';cobject.fillColor='transparent';cobject.thickness=2;cobject.opacity=1;}if(cobject.enableShapeLabel===true){cobject.labelContent='';}if(cobject.shapeAnnotationType==='SignatureText'){cobject.fillColor='transparent';cobject.thickness=1;cobject.opacity=1;cobject.data='';}this.helper=cobject=this.commandHandler.add(cobject);if(this.commandHandler.selectedItems.annotations.length>0){this.commandHandler.selectedItems.annotations=[cobject];}else{this.commandHandler.selectedItems.formFields=[cobject];}}var deltaValues=this.updateSize(this.helper,this.startPosition,this.currentPosition,this.corner,this.initialBounds);// eslint-disable-next-line max-len
this.blocked=!this.scaleObjects(deltaValues.width,deltaValues.height,this.corner,this.startPosition,this.currentPosition,this.helper);this.prevPosition=this.currentPosition;return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */ResizeTool.prototype.mouseLeave=function(args){this.mouseUp(args);};ResizeTool.prototype.getTooltipContent=function(pdfAnnotationBaseModel){return'W:'+Math.round(pdfAnnotationBaseModel.wrapper.bounds.width)+' '+'H:'+Math.round(pdfAnnotationBaseModel.wrapper.bounds.height);};ResizeTool.prototype.getChanges=function(change){switch(this.corner){case'ResizeEast':return{x:change.x,y:0};case'ResizeSouthEast':return change;case'ResizeSouth':return{x:0,y:change.y};case'ResizeNorth':return{x:0,y:-change.y};case'ResizeNorthEast':return{x:change.x,y:-change.y};case'ResizeNorthWest':return{x:-change.x,y:-change.y};case'ResizeWest':return{x:-change.x,y:0};case'ResizeSouthWest':return{x:-change.x,y:change.y};}return change;};ResizeTool.prototype.getPoints=function(x,y){switch(this.corner){case'ResizeEast':return{x:x,y:0};case'ResizeSouthEast':return{x:x,y:y};case'ResizeSouth':return{x:0,y:y};case'ResizeNorth':return{x:0,y:-y};case'ResizeNorthEast':return{x:x,y:-y};case'ResizeNorthWest':return{x:-x,y:-y};case'ResizeWest':return{x:-x,y:0};case'ResizeSouthWest':return{x:-x,y:y};}return{x:x,y:y};};/**
     * Updates the size with delta width and delta height using scaling.
     * Aspect ratio used to resize the width or height based on resizing the height or width.
     *
     * @param {number} deltaWidth - Specified the delta width.
     * @param {number} deltaHeight - Specified the delta height.
     * @param {string} corner - Specified the corner value.
     * @param {PointModel} startPoint - Specified the start point of the annotation.
     * @param {PointModel} endPoint - Specified the end point of the annotation.
     * @param {SelectorModel | PdfAnnotationBaseModel} source - Specified the annotation object.
     * @returns {boolean} - Returns true or false.
     */ResizeTool.prototype.scaleObjects=function(deltaWidth,deltaHeight,corner,startPoint,endPoint,source){// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(source):{};var annotationMaxHeight=0;var annotationMaxWidth=0;var annotationMinHeight=0;var annotationMinWidth=0;var x=this.currentPosition.x-this.startPosition.x;var y=this.currentPosition.y-this.startPosition.y;x=x/this.commandHandler.viewerBase.getZoomFactor();y=y/this.commandHandler.viewerBase.getZoomFactor();// eslint-disable-next-line
var annotationElement=source;// eslint-disable-next-line
var size=this.getPoints(x,y);var width=annotationElement.bounds.width+size.x;var height=annotationElement.bounds.height+size.y;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;annotationMinHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;annotationMinWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}if(source instanceof Selector&&source.annotations.length===1&&(source.annotations[0].shapeAnnotationType==='Perimeter'||source.annotations[0].shapeAnnotationType==='Radius'||source.shapeAnnotationType==='Stamp')){if(!(deltaHeight===1&&deltaWidth===1)){deltaHeight=deltaWidth=Math.max(deltaHeight===1?0:deltaHeight,deltaWidth===1?0:deltaWidth);}else if(startPoint!==endPoint){deltaHeight=deltaWidth=Math.max(deltaHeight,deltaWidth);}else{deltaHeight=deltaWidth=0;}}else if(source.shapeAnnotationType==='Image'||source.shapeAnnotationType==='HandWrittenSignature'||source.shapeAnnotationType==='SignatureText'||source.shapeAnnotationType==='SignatureImage'){if(!(deltaHeight===1&&deltaWidth===1)){if(width>=annotationMaxWidth&&height<annotationMaxHeight){deltaHeight=Math.max(deltaHeight,deltaWidth);}if(height>=annotationMaxHeight&&width<annotationMaxWidth){deltaWidth=Math.max(deltaHeight,deltaWidth);}if(width<annotationMaxWidth&&height<annotationMaxHeight){deltaHeight=deltaWidth=Math.max(deltaHeight,deltaWidth);}}}else{if(source.shapeAnnotationType==='Perimeter'||source.shapeAnnotationType==='Radius'||source.shapeAnnotationType==='Stamp'){if(source.shapeAnnotationType==='Stamp'){if(!annotationMaxHeight&&!deltaHeight){deltaHeight=Math.max(deltaHeight===1?0:deltaHeight);}if(!annotationMaxWidth&&!deltaWidth){deltaWidth=Math.max(deltaWidth===1?0:deltaWidth);}}else{if(!annotationMaxHeight||!annotationMaxWidth){if(!(deltaHeight===1&&deltaWidth===1)){deltaHeight=deltaWidth=Math.max(deltaHeight===1?0:deltaHeight,deltaWidth===1?0:deltaWidth);}}}}}this.blocked=this.commandHandler.scaleSelectedItems(deltaWidth,deltaHeight,this.getPivot(this.corner));return this.blocked;};return ResizeTool;}(ToolBase);/**
 * Draws a node that is defined by the user
 *
 * @hidden
 */var NodeDrawingTool=/** @class */function(_super){__extends$3(NodeDrawingTool,_super);function NodeDrawingTool(commandHandler,base,sourceObject){var _this=_super.call(this,commandHandler,base)||this;_this.sourceObject=sourceObject;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */NodeDrawingTool.prototype.mouseDown=function(args){_super.prototype.mouseDown.call(this,args);this.inAction=true;var node={bounds:{x:100,y:300,width:100,height:100},pageIndex:0,strokeColor:'red',thickness:3};node.id=sf.drawings.randomId();this.sourceObject.pageIndex=node.pageIndex=this.pdfViewerBase.activeElements.activePageID||0;this.sourceObject.enableShapeLabel=this.commandHandler.enableShapeLabel;this.pdfViewerBase.updateFreeTextProperties(this.sourceObject);// eslint-disable-next-line
var formFieldElement=document.getElementById('FormField_helper_html_element');if(formFieldElement){formFieldElement.remove();}// eslint-disable-next-line
this.commandHandler.lastAnnotation=this.commandHandler.drawingObject=this.drawingObject=this.commandHandler.add(this.sourceObject||node);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */NodeDrawingTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);if(this.inAction&&sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false){this.dragging=true;var rect=sf.drawings.Rect.toBounds([this.prevPosition,this.currentPosition]);this.updateNodeDimension(this.drawingObject,rect);if(this.drawingObject.shapeAnnotationType==='Radius'){this.updateRadiusLinePosition(this.drawingObject.wrapper.children[1],this.drawingObject);}}return true;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */NodeDrawingTool.prototype.mouseUp=function(args){if(this.drawingObject&&this.dragging){this.commandHandler.blazorAction|=PdfViewerBlazorAction.AnnotationAdding;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.select([this.drawingObject.id],this.commandHandler.annotationSelectorSettings);this.commandHandler.annotation.updateCalibrateValues(this.drawingObject,true);if(this.commandHandler){// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,'Addition','',this.drawingObject,this.drawingObject);}this.drawingObject=null;this.dragging=false;_super.prototype.mouseUp.call(this,args);this.inAction=false;}else{this.drawingObject=null;_super.prototype.mouseUp.call(this,args);}};/**
     * @private
     * @returns {void}
     */NodeDrawingTool.prototype.endAction=function(){_super.prototype.endAction.call(this);};/**
     * @private
     * @param {PdfAnnotationBaseModel} obj - Specified the annotation object.
     * @param {Rect} rect - Specified the annotation rect element.
     * @returns {void}
     */NodeDrawingTool.prototype.updateNodeDimension=function(obj,rect){var zoom=this.commandHandler.viewerBase.getZoomFactor();obj.bounds.x=rect.x/zoom+rect.width/zoom;obj.bounds.y=rect.y/zoom+rect.height/zoom;obj.bounds.width=rect.width/zoom;obj.bounds.height=rect.height/zoom;// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(obj):{};var annotationMaxHeight=0;var annotationMaxWidth=0;if(annotationSettings.maxWidth||annotationSettings.maxHeight){annotationMaxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;if(obj.bounds.width>annotationMaxWidth){obj.bounds.width=annotationMaxWidth;}if(obj.bounds.height>annotationMaxHeight){obj.bounds.height=annotationMaxHeight;}if(obj.bounds.height<=annotationMaxHeight&&obj.bounds.width<=annotationMaxWidth){this.commandHandler.nodePropertyChange(obj,{bounds:obj.bounds});}}else{this.commandHandler.nodePropertyChange(obj,{bounds:obj.bounds});}};/**
     * @private
     * @param {DrawingElement} obj - Specified the drawing element.
     * @param {PdfAnnotationBaseModel} node - Specified the annotation object.
     * @returns {void}
     */NodeDrawingTool.prototype.updateRadiusLinePosition=function(obj,node){var trasPoint={x:node.bounds.x+node.bounds.width/4,y:node.bounds.y};var center={x:node.bounds.x+node.bounds.width/2,y:node.bounds.y+node.bounds.height/2};var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,node.rotateAngle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,trasPoint);var newPoint1={x:rotatedPoint.x,y:rotatedPoint.y};obj.offsetX=newPoint1.x;obj.offsetY=newPoint1.y;obj.width=node.bounds.width/2;// eslint-disable-next-line
var annotationSettings=this.commandHandler.annotationModule.findAnnotationSettings(node);var annotationMaxWidth=0;if(annotationSettings.maxWidth){annotationMaxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;if(node.bounds.width>annotationMaxWidth){node.bounds.width=annotationMaxWidth;obj.width=node.bounds.width/2;}}this.commandHandler.renderDrawing(undefined,node.pageIndex);};return NodeDrawingTool;}(ToolBase);/**
 * Draws a Polygon shape node dynamically using polygon Tool
 *
 * @hidden
 */var PolygonDrawingTool=/** @class */function(_super){__extends$3(PolygonDrawingTool,_super);function PolygonDrawingTool(commandHandler,base,action){var _this=_super.call(this,commandHandler,base)||this;_this.action=action;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */PolygonDrawingTool.prototype.mouseDown=function(args){_super.prototype.mouseDown.call(this,args);this.inAction=true;if(!this.drawingObject){this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var nodeAnnotElement={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},// eslint-disable-next-line max-len
vertexPoints:[{x:this.startPoint.x/this.pdfViewerBase.getZoomFactor(),y:this.startPoint.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:'Line',fillColor:this.commandHandler.drawingObject.fillColor,strokeColor:this.commandHandler.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,// eslint-disable-next-line max-len
notes:this.commandHandler.drawingObject.notes,thickness:this.commandHandler.drawingObject.thickness,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,borderDashArray:this.commandHandler.drawingObject.borderDashArray,modifiedDate:this.commandHandler.drawingObject.modifiedDate,borderStyle:this.commandHandler.drawingObject.borderStyle,// eslint-disable-next-line max-len
measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel,opacity:this.commandHandler.drawingObject.opacity};this.pdfViewerBase.updateFreeTextProperties(nodeAnnotElement);// eslint-disable-next-line
this.drawingObject=this.commandHandler.add(nodeAnnotElement);}else{var pt=void 0;var obj=this.drawingObject;pt=obj.vertexPoints[obj.vertexPoints.length-1];pt={x:pt.x,y:pt.y};var lastPoint=this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1];if(!(lastPoint.x===pt.x&&lastPoint.x===pt.y)){this.drawingObject.vertexPoints.push(pt);}this.commandHandler.nodePropertyChange(obj,{vertexPoints:obj.vertexPoints});}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */PolygonDrawingTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);if(this.inAction&&sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false){this.dragging=true;var obj=this.drawingObject;if(this.drawingObject&&this.currentPosition){obj.vertexPoints[obj.vertexPoints.length-1].x=this.currentPosition.x/this.pdfViewerBase.getZoomFactor();obj.vertexPoints[obj.vertexPoints.length-1].y=this.currentPosition.y/this.pdfViewerBase.getZoomFactor();this.commandHandler.nodePropertyChange(obj,{vertexPoints:obj.vertexPoints});}if(obj.measureType==='Perimeter'){updatePerimeterLabel(obj,obj.vertexPoints,this.commandHandler.annotation.measureAnnotationModule);}}return true;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @param {boolean} isDoubleClineck - Specified the double click event or not.
     * @param {boolean} isMouseLeave - Specified the mouse leave event or not.
     * @returns {void}
     */PolygonDrawingTool.prototype.mouseUp=function(args,isDoubleClineck,isMouseLeave){_super.prototype.mouseMove.call(this,args);// eslint-disable-next-line
var currentSelector;if(args.source&&args.annotationSelectorSettings!==null){currentSelector=args.source.annotationSelectorSettings;}if(this.drawingObject){// eslint-disable-next-line max-len
var bounds=new sf.drawings.Rect(this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].x-20,this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].y-20,40,40);var point={x:this.drawingObject.vertexPoints[0].x,y:this.drawingObject.vertexPoints[0].y};if((bounds.containsPoint(point)||isDoubleClineck)&&this.dragging){if(this.inAction){this.inAction=false;if(this.drawingObject){if(!isMouseLeave){if(this.drawingObject.vertexPoints.length>2){this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1);}}if(this.action==='Polygon'){if(!isMouseLeave){// eslint-disable-next-line max-len
this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1]=this.drawingObject.vertexPoints[0];}else{// eslint-disable-next-line max-len
this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length]=this.drawingObject.vertexPoints[0];}this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints});var cobject=cloneObject(this.drawingObject);cobject.shapeAnnotationType='Polygon';cobject.bounds.width=cobject.wrapper.actualSize.width;cobject.bounds.height=cobject.wrapper.actualSize.height;cobject.bounds.x=this.drawingObject.wrapper.bounds.x;cobject.bounds.y=this.drawingObject.wrapper.bounds.y;this.commandHandler.add(cobject);this.commandHandler.remove(this.drawingObject);this.commandHandler.select([cobject.id],currentSelector);var drawingObject=this.commandHandler.selectedItems.annotations[0];if(drawingObject){if(this.commandHandler.enableShapeAnnotation&&(sf.base.isNullOrUndefined(drawingObject.measureType)||drawingObject.measureType==='')){// eslint-disable-next-line max-len
this.commandHandler.annotation.shapeAnnotationModule.renderShapeAnnotations(drawingObject,drawingObject.pageIndex);}if(this.commandHandler.enableMeasureAnnotation&&(drawingObject.measureType==='Area'||drawingObject.measureType==='Volume')){if(drawingObject.measureType==='Area'){// eslint-disable-next-line max-len
drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculateArea(drawingObject.vertexPoints);}else if(drawingObject.measureType==='Volume'){// eslint-disable-next-line max-len
drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculateVolume(drawingObject.vertexPoints);}if(drawingObject.enableShapeLabel){drawingObject.labelContent=drawingObject.notes;// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(drawingObject,{vertexPoints:drawingObject.vertexPoints,notes:drawingObject.notes});}// eslint-disable-next-line max-len
this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(drawingObject,drawingObject.pageIndex);}}}else{if(!isMouseLeave){if(isDoubleClineck){this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1);}}this.commandHandler.nodePropertyChange(this.drawingObject,{// eslint-disable-next-line max-len
vertexPoints:this.drawingObject.vertexPoints,sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes});this.commandHandler.select([this.drawingObject.id],currentSelector);if(this.commandHandler.enableMeasureAnnotation&&this.drawingObject.measureType==='Perimeter'){this.commandHandler.renderDrawing(null,this.drawingObject.pageIndex);// eslint-disable-next-line max-len
this.drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculatePerimeter(this.drawingObject);if(this.drawingObject.enableShapeLabel){this.drawingObject.labelContent=this.drawingObject.notes;// eslint-disable-next-line max-len
this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,notes:this.drawingObject.notes});}// eslint-disable-next-line max-len
this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(this.drawingObject,this.drawingObject.pageIndex);}}var annotationObject=this.commandHandler.selectedItems.annotations[0];// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,annotationObject,'Addition','',annotationObject,annotationObject);this.drawingObject=null;}}this.endAction();}else if(this.inAction&&!this.dragging){this.commandHandler.remove(this.drawingObject);}}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */PolygonDrawingTool.prototype.mouseLeave=function(args){this.mouseUp(args,true,true);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */PolygonDrawingTool.prototype.mouseWheel=function(args){_super.prototype.mouseWheel.call(this,args);this.mouseMove(args);};/**
     * @private
     * @returns {void}
     */PolygonDrawingTool.prototype.endAction=function(){this.inAction=false;this.drawingObject=null;this.commandHandler.tool='';};return PolygonDrawingTool;}(ToolBase);/**
 * Helps to edit the selected connectors
 *
 * @hidden
 */var LineTool=/** @class */function(_super){__extends$3(LineTool,_super);function LineTool(commandHandler,base,endPoint,drawingObject){var _this=_super.call(this,commandHandler,base,true)||this;_this.endPoint=endPoint;_this.drawingObject=drawingObject;return _this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */LineTool.prototype.mouseDown=function(args){this.inAction=true;this.undoElement=undefined;_super.prototype.mouseDown.call(this,args);var oldPointValue;var connectorsShape;if(args.source&&args.source.annotations){oldPointValue={x:this.prevPosition.x,y:this.prevPosition.y};connectorsShape=this.drawingObject;}this.initialPosition=args.position;this.prevSource=this.drawingObject;this.currentPosition=args.position;if(!this.drawingObject){var measureModule=this.commandHandler.annotation.measureAnnotationModule;var annotationNode={// eslint-disable-next-line max-len
vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes,measureType:'Distance',// eslint-disable-next-line max-len
fillColor:this.commandHandler.drawingObject.fillColor,notes:this.commandHandler.drawingObject.notes,strokeColor:this.commandHandler.drawingObject.strokeColor,// eslint-disable-next-line max-len
opacity:this.commandHandler.drawingObject.opacity,thickness:this.commandHandler.drawingObject.thickness,borderDashArray:this.commandHandler.drawingObject.borderDashArray,shapeAnnotationType:'Distance',pageIndex:this.pdfViewerBase.activeElements.activePageID,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,enableShapeLabel:this.commandHandler.enableShapeLabel,leaderHeight:measureModule.leaderLength};this.pdfViewerBase.updateFreeTextProperties(annotationNode);// eslint-disable-next-line
this.drawingObject=this.commandHandler.add(annotationNode);}else if(!this.dragging){var nodeAnnot={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},// eslint-disable-next-line max-len
vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],// eslint-disable-next-line max-len
shapeAnnotationType:this.drawingObject.shapeAnnotationType,sourceDecoraterShapes:this.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.drawingObject.taregetDecoraterShapes,fillColor:this.drawingObject.fillColor,strokeColor:this.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,// eslint-disable-next-line max-len
opacity:this.drawingObject.opacity||1,borderDashArray:this.drawingObject.borderDashArray,thickness:this.drawingObject.thickness,modifiedDate:this.drawingObject.modifiedDate,author:this.drawingObject.author,subject:this.drawingObject.subject,lineHeadEnd:this.drawingObject.lineHeadEnd,lineHeadStart:this.drawingObject.lineHeadStart,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel};this.pdfViewerBase.updateFreeTextProperties(nodeAnnot);// eslint-disable-next-line
this.drawingObject=this.commandHandler.add(nodeAnnot);}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */LineTool.prototype.mouseUp=function(args){if(this.dragging){_super.prototype.mouseMove.call(this,args);if(this.commandHandler){// eslint-disable-next-line
var currentSelector=void 0;if(args.source&&args.annotationSelectorSettings!==null){currentSelector=args.source.annotationSelectorSettings;}else{currentSelector='';}// eslint-disable-next-line
var node=this.drawingObject;this.commandHandler.nodePropertyChange(node,{vertexPoints:node.vertexPoints,leaderHeight:node.leaderHeight});this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.commandHandler.select([node.id],currentSelector);this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelector);}if(this.endPoint&&this.endPoint.indexOf('ConnectorSegmentPoint')>-1&&this.dragging){this.commandHandler.annotation.updateCalibrateValues(this.drawingObject);// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,'Addition','',this.drawingObject,this.drawingObject);this.drawingObject=null;this.dragging=false;_super.prototype.mouseUp.call(this,args);}if(this.drawingObject){this.endPoint='ConnectorSegmentPoint_1';}}else{if(this.drawingObject){this.commandHandler.remove(this.drawingObject);}}};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */LineTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);if(this.inAction&&sf.drawings.Point.equals(this.currentPosition,this.prevPosition)===false){this.currentPosition=args.position;this.dragging=true;if(this.currentPosition&&this.prevPosition){var diffX=this.currentPosition.x-this.prevPosition.x;var diffY=this.currentPosition.y-this.prevPosition.y;// eslint-disable-next-line
var currentSelector=void 0;if(args.source&&args.annotationSelectorSettings!==null){currentSelector=args.source.annotationSelectorSettings;}else{currentSelector='';}// eslint-disable-next-line max-len
if(this.inAction&&this.commandHandler&&this.drawingObject&&this.endPoint!==undefined&&diffX!==0||diffY!==0){// eslint-disable-next-line max-len
this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.drawingObject,this.currentPosition,this.selectedSegment,args.target,null,currentSelector);this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelector);}}this.prevPosition=this.currentPosition;}return!this.blocked;};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */LineTool.prototype.mouseLeave=function(args){this.mouseUp(args);};/**
     * @private
     * @returns {void}
     */LineTool.prototype.endAction=function(){_super.prototype.endAction.call(this);this.prevPosition=null;this.endPoint=null;};return LineTool;}(ToolBase);/**
 * Rotates the selected objects
 *
 * @hidden
 */var RotateTool=/** @class */function(_super){__extends$3(RotateTool,_super);function RotateTool(commandHandler,base){return _super.call(this,commandHandler,base,true)||this;}/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */RotateTool.prototype.mouseDown=function(args){var nodeMouseDown=cloneObject(args.source);this.undoElement={bounds:{x:nodeMouseDown.wrapper.offsetX,y:nodeMouseDown.wrapper.offsetY,width:nodeMouseDown.wrapper.actualSize.width,height:nodeMouseDown.wrapper.actualSize.height},rotateAngle:nodeMouseDown.rotateAngle// eslint-disable-next-line
};_super.prototype.mouseDown.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */RotateTool.prototype.mouseUp=function(args){var object=args.source;// eslint-disable-next-line
var newShapeObject;if(this.undoElement.rotateAngle!==object.wrapper.rotateAngle){// eslint-disable-next-line
var currentSelector=args.source.annotations[0].annotationSelectorSettings;this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,currentSelector);newShapeObject={bounds:{x:args.source.wrapper.offsetX,y:args.source.wrapper.offsetY,width:args.source.wrapper.actualSize.width,height:args.source.wrapper.actualSize.height},rotateAngle:args.source.wrapper.rotateAngle};}// eslint-disable-next-line
this.commandHandler.annotation.addAction(this.pageIndex,null,args.source,'Rotate','',this.undoElement,newShapeObject);this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(args.source,null,'Rotate');this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(args.source,null);_super.prototype.mouseUp.call(this,args);};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {boolean} - Returns true or false.
     */RotateTool.prototype.mouseMove=function(args){_super.prototype.mouseMove.call(this,args);var object=args.source;// eslint-disable-next-line
var currentSelector=args.source.annotations[0].annotationSelectorSettings;this.currentPosition=args.position;if(object.wrapper){var refPoint={x:object.wrapper.offsetX,y:object.wrapper.offsetY};var angle=sf.drawings.Point.findAngle(refPoint,this.currentPosition)+90;angle=(angle+360)%360;this.blocked=!this.commandHandler.rotate(angle-object.wrapper.rotateAngle,currentSelector);}return!this.blocked;};RotateTool.prototype.getTooltipContent=function(node){return Math.round(node.rotateAngle%360).toString()+'\xB0';};/**
     * @private
     * @param {MouseEventArgs} args - Specified the mouse event arguments.
     * @returns {void}
     */RotateTool.prototype.mouseLeave=function(args){this.mouseUp(args);};/**
     * @private
     * @returns {void}
     */RotateTool.prototype.endAction=function(){_super.prototype.endAction.call(this);};return RotateTool;}(ToolBase);/**
 * @private
 * @param {MouseEvent | TouchEvent} event - Specified the annotaion event.
 * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.
 * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.
 * @param {boolean} isOverlapped - Specified the overlapped element or not.
 * @returns {any} - Returns the active element.
 */ // eslint-disable-next-line
function findActiveElement(event,pdfBase,pdfViewer,isOverlapped){if(pdfViewer&&pdfBase.activeElements.activePageID>-1){var objects=findObjectsUnderMouse(pdfBase,pdfViewer,event);var object=findObjectUnderMouse(objects,event,pdfBase,pdfViewer);if(isOverlapped){return objects;}return object;}return undefined;}/**
 * @private
 * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.
 * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.
 * @param {MouseEvent} event - Specified the annotaion event.
 * @returns {IElement[]} - Returns the annotaion elements.
 */function findObjectsUnderMouse(pdfBase,pdfViewer,event){var pt=pdfBase.currentPosition||{x:event.offsetX,y:event.offsetY};pt={x:pt.x/pdfBase.getZoomFactor(),y:pt.y/pdfBase.getZoomFactor()};var pageTable=pdfViewer.getPageTable(pdfBase.activeElements.activePageID);var objArray=findObjects(pt,pageTable.objects);return objArray;}/**
 * @private
 * @param {PdfAnnotationBaseModel[]} objects - Specified the annotaion object model.
 * @param {any} event - Specified the annotaion event.
 * @param {PdfViewerBase} pdfBase - Specified the pdfviewer base element.
 * @param {PdfViewer} pdfViewer - Specified the pdfviewer element.
 * @returns {IElement} - Returns the annotaion element.
 */function findObjectUnderMouse(// eslint-disable-next-line
objects,event,pdfBase,pdfViewer){var actualTarget=null;var touchArg;var offsetX;var offsetY;if(event&&event.type&&event.type.indexOf('touch')!==-1){touchArg=event;if(pdfViewer.annotation){var pageDiv=pdfBase.getElement('_pageDiv_'+pdfViewer.annotation.getEventPageNumber(event));if(pageDiv){var pageCurrentRect=pageDiv.getBoundingClientRect();offsetX=touchArg.changedTouches[0].clientX-pageCurrentRect.left;offsetY=touchArg.changedTouches[0].clientY-pageCurrentRect.top;}}// eslint-disable-next-line
}else if(event&&event.target&&event.path&&event.target.parentElement&&event.target.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=event.path[4].getBoundingClientRect();offsetX=event.clientX-targetParentRect.left;offsetY=event.clientY-targetParentRect.top;}else if(event.target&&event.target.parentElement&&event.target.parentElement.classList.contains('foreign-object')){// eslint-disable-next-line
var targetParentRect=event.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();offsetX=event.clientX-targetParentRect.left;offsetY=event.clientY-targetParentRect.top;// eslint-disable-next-line
}else{offsetX=!isNaN(event.offsetX)?event.offsetX:event.position?event.position.x:0;offsetY=!isNaN(event.offsetY)?event.offsetY:event.position?event.position.y:0;}var offsetForSelector=5;var boundsDiff=0;for(var i=0;i<objects.length;i++){if(!(objects[i].shapeAnnotationType==='Distance'||objects[i].shapeAnnotationType==='Line'||objects[i].shapeAnnotationType==='LineWidthArrowHead'||pdfBase.tool instanceof LineTool)){var bounds=objects[i].wrapper.bounds;var rotationValue=0;if(objects[i].shapeAnnotationType==='Stamp'||objects[i].shapeAnnotationType==='Image'){rotationValue=25;}// eslint-disable-next-line max-len
if((bounds.x-offsetForSelector)*pdfBase.getZoomFactor()<offsetX&&(bounds.x+bounds.width+offsetForSelector)*pdfBase.getZoomFactor()>offsetX&&// eslint-disable-next-line max-len
(bounds.y-offsetForSelector-rotationValue)*pdfBase.getZoomFactor()<offsetY&&(bounds.y+bounds.height+offsetForSelector)*pdfBase.getZoomFactor()>offsetY){if(pdfBase.tool instanceof NodeDrawingTool||pdfBase.tool instanceof StampTool){actualTarget=objects[i];}else{if(!boundsDiff){actualTarget=objects[i];// eslint-disable-next-line max-len
boundsDiff=offsetX-(bounds.x-offsetForSelector)*pdfBase.getZoomFactor()+((bounds.x+bounds.width+offsetForSelector)*pdfBase.getZoomFactor()-offsetX)+(// eslint-disable-next-line max-len
offsetY-(bounds.y-offsetForSelector-rotationValue)*pdfBase.getZoomFactor())+((bounds.y+bounds.height+offsetForSelector)*pdfBase.getZoomFactor()-offsetY);}else{// eslint-disable-next-line max-len
var objectBounds=offsetX-(bounds.x-offsetForSelector)*pdfBase.getZoomFactor()+((bounds.x+bounds.width+offsetForSelector)*pdfBase.getZoomFactor()-offsetX)+(// eslint-disable-next-line max-len
offsetY-(bounds.y-offsetForSelector-rotationValue)*pdfBase.getZoomFactor())+((bounds.y+bounds.height+offsetForSelector)*pdfBase.getZoomFactor()-offsetY);if(boundsDiff>objectBounds){actualTarget=objects[i];boundsDiff=objectBounds;}else if(boundsDiff===objectBounds){actualTarget=objects[i];boundsDiff=objectBounds;}else if(boundsDiff===objectBounds){actualTarget=objects[i];boundsDiff=objectBounds;}}}}}else{var pt={x:offsetX/pdfBase.getZoomFactor(),y:offsetY/pdfBase.getZoomFactor()};var obj=findElementUnderMouse(objects[i],pt,offsetForSelector);var isOver=isPointOverConnector(objects[i],pt);if(obj&&!isOver){var newpoint=CalculateLeaderPoints(objects[i],obj);if(newpoint){var rect=sf.drawings.Rect.toBounds([newpoint,newpoint]);rect.Inflate(10);if(rect.containsPoint(pt)){isOver=true;}}}if(obj&&isOver){actualTarget=objects[i];}}}return actualTarget;}/**
 * @private
 * @param {any} selector - Specified the annotaion selctor.
 * @param {any} currentobject - Specified the current annotaion object.
 * @returns {any} - Returns the leader points.
 */ // eslint-disable-next-line
function CalculateLeaderPoints(selector,currentobject){var leaderCount=0;var sourcePoint=selector.sourcePoint;var targetPoint=selector.targetPoint;if(selector.shapeAnnotationType==='Distance'){var segment=currentobject;var newPoint1=void 0;var angle=sf.drawings.Point.findAngle(selector.sourcePoint,selector.targetPoint);if(segment.id.indexOf('leader')>-1){var center=selector.wrapper.children[0].bounds.center;if(leaderCount===0&&segment.id.indexOf('leader1')>-1){newPoint1={x:selector.sourcePoint.x,y:selector.sourcePoint.y-selector.leaderHeight};center=sourcePoint;}else{newPoint1={x:selector.targetPoint.x,y:selector.targetPoint.y-selector.leaderHeight};center=targetPoint;}var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,angle,center.x,center.y);var rotatedPoint=sf.drawings.transformPointByMatrix(matrix,{x:newPoint1.x,y:newPoint1.y});return rotatedPoint;}}}/**
 * @private
 * @param {IElement} obj - Specified the annotation element.
 * @param {PointModel} position - Specified the annotation position value.
 * @param {number} padding - Specified the annotation padding.
 * @returns {DrawingElement} - Returns the annotation drawing element.
 */function findElementUnderMouse(obj,position,padding){return findTargetShapeElement(obj.wrapper,position,padding);}/**
 * @private
 * @param {PdfAnnotationBaseModel} obj - Specified the annotation object model.
 * @param {string} key - Specified the annotation key value.
 * @param {Object[]} collection - Specified the annotation collection.
 * @returns {void}
 */function insertObject(obj,key,collection){if(collection.length===0){collection.push(obj);}else if(collection.length===1){// eslint-disable-next-line
if(collection[0][key]>obj[key]){collection.splice(0,0,obj);}else{collection.push(obj);}}else if(collection.length>1){var low=0;var high=collection.length-1;var mid=Math.floor((low+high)/2);while(mid!==low){// eslint-disable-next-line
if(collection[mid][key]<obj[key]){low=mid;mid=Math.floor((low+high)/2);// eslint-disable-next-line
}else if(collection[mid][key]>obj[key]){high=mid;mid=Math.floor((low+high)/2);}}// eslint-disable-next-line
if(collection[high][key]<obj[key]){collection.push(obj);// eslint-disable-next-line
}else if(collection[low][key]>obj[key]){collection.splice(low,0,obj);// eslint-disable-next-line
}else if(collection[low][key]<obj[key]&&collection[high][key]>obj[key]){collection.splice(high,0,obj);}}}/**
 * @private
 * @param {Container} container - Specified the annotaion container.
 * @param {PointModel} position - Specified the annotation position.
 * @param {number} padding - Specified the annotaion padding value.
 * @returns {DrawingElement} - Returns the annotation drawing element.
 */function findTargetShapeElement(container,position,padding){if(container&&container.children){for(var i=container.children.length-1;i>=0;i--){var shapeElement=container.children[i];// eslint-disable-next-line
if(!sf.base.isNullOrUndefined(shapeElement.children)&&shapeElement.children.length>0){// eslint-disable-next-line
for(var j=shapeElement.children.length-1;j>=0;j--){// eslint-disable-next-line
var currentTarget=shapeElement.children[j];if(currentTarget&&currentTarget.bounds.containsPoint(position,10)){if(currentTarget instanceof sf.drawings.Container){var targetElement=this.findTargetElement(currentTarget,position);if(targetElement){return targetElement;}}if(currentTarget.bounds.containsPoint(position,10)){return currentTarget;}}}}else{if(shapeElement&&shapeElement.bounds.containsPoint(position,10)){if(shapeElement instanceof sf.drawings.Container){var targetElement=this.findTargetElement(shapeElement,position);if(targetElement){return targetElement;}}if(shapeElement.bounds.containsPoint(position,10)){return shapeElement;}}}}}if(container&&container.bounds.containsPoint(position,padding)&&container.style.fill!=='none'){var element=container;var paddingValue=10;var rotateThumbDistance=30;var matrix=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(matrix,element.parentTransform,element.offsetX,element.offsetY);var x=element.offsetX-element.pivot.x*element.actualSize.width;var y=element.offsetY-element.pivot.y*element.actualSize.height;var rotateThumb={x:x+(element.pivot.x===0.5?element.pivot.x*2:element.pivot.x)*element.actualSize.width/2,y:y-rotateThumbDistance};rotateThumb=sf.drawings.transformPointByMatrix(matrix,rotateThumb);if(sf.drawings.contains(position,rotateThumb,paddingValue)){return container;}}return null;}/**
 * @private
 * @param {PointModel} region - Specified the annotation region point model.
 * @param {PdfAnnotationBaseModel[]} objCollection - Specified the annotation object collections.
 * @returns {PdfAnnotationBaseModel[]} - Returns the annotation object collections.
 */function findObjects(region,objCollection){var objects=[];for(var _i=0,objCollection_1=objCollection;_i<objCollection_1.length;_i++){var obj=objCollection_1[_i];if(findElementUnderMouse(obj,region,10)||obj.shapeAnnotationType==='Stamp'&&findElementUnderMouse(obj,region,40)){insertObject(obj,'zIndex',objects);}}return objects;}/**
 * @private
 * @param {MouseEvent} event - Specified the annotaion mouse event.
 * @param {PdfViewerBase} pdfBase - Specified the pdfBase element.
 * @returns {number} - Returns the active page Id.
 */ /**
 * @hidden
 */var ActiveElements=/** @class */function(){function ActiveElements(){this.activePage=undefined;this.activePageID=undefined;}Object.defineProperty(ActiveElements.prototype,"activePageID",{/**
         * @private
         * @returns {number} - Returns the active page Id.
         */get:function get(){return this.activePage;},/**
         * @private
         * @param {number} offset - The page offset value.
         */set:function set(offset){this.activePage=offset;// eslint-disable-next-line
if(offset!==this.activePage){}},enumerable:true,configurable:true});return ActiveElements;}();/**
 * PdfViewer diagram component exported items
 */ /* eslint-disable */ /**
 * @hidden
 */var FreeTextAnnotation=/** @class */function(){function FreeTextAnnotation(pdfviewer,pdfViewerBase){/**
         * @private
         */this.inputBoxCount=0;/**
         * @private
         */this.isFreeTextValueChange=false;/**
         * @private
         */this.isAddAnnotationProgramatically=false;/**
         * @private
         */this.isInuptBoxInFocus=false;/**
         * @private
         */ // eslint-disable-next-line
this.freeTextPageNumbers=[];/**
         * @private
         */this.selectedText='';/**
         * @private
         */this.isTextSelected=false;this.selectionStart=0;this.selectionEnd=0;/**
         * @private
         */this.isBold=false;/**
         * @private
         */this.isItalic=false;/**
         * @private
         */this.isUnderline=false;/**
         * @private
         */this.isStrikethrough=false;this.isReadonly=false;this.isMaximumWidthReached=false;/**
         * @private
         */this.previousText='Type Here';this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;this.updateTextProperties();this.inputBoxElement=document.createElement('textarea');this.inputBoxElement.style.position='absolute';this.inputBoxElement.style.Width=this.defautWidth;this.inputBoxElement.style.Height=this.defaultHeight;this.inputBoxElement.style.zIndex='5';this.inputBoxElement.style.fontSize=this.fontSize+'px';this.inputBoxElement.className='free-text-input';this.inputBoxElement.style.resize='none';this.inputBoxElement.style.borderColor=this.borderColor;this.inputBoxElement.style.background=this.fillColor;this.inputBoxElement.style.lineHeight='normal';this.inputBoxElement.style.display='inline-block';this.inputBoxElement.style.borderStyle=this.borderStyle;this.inputBoxElement.style.borderWidth=this.borderWidth+'px';this.inputBoxElement.style.padding=this.padding;this.inputBoxElement.style.paddingLeft='4px';this.inputBoxElement.style.paddingTop='3px';this.inputBoxElement.style.borderRadius='2px';this.inputBoxElement.style.verticalAlign='middle';this.inputBoxElement.style.fontFamily=this.fontFamily;this.inputBoxElement.style.color=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:'#000';this.inputBoxElement.style.overflow='hidden';this.inputBoxElement.style.wordBreak=this.wordBreak;this.inputBoxElement.readOnly=this.isReadonly;this.inputBoxElement.addEventListener('focusout',this.onFocusOutInputBox.bind(this));this.inputBoxElement.addEventListener('keydown',this.onKeyDownInputBox.bind(this));this.inputBoxElement.addEventListener('mouseup',this.onMouseUpInputBox.bind(this));this.freeTextPageNumbers=[];}/**
     * @private
     */FreeTextAnnotation.prototype.updateTextProperties=function(){this.defautWidth=this.pdfViewer.freeTextSettings.width?this.pdfViewer.freeTextSettings.width:151;this.defaultHeight=this.pdfViewer.freeTextSettings.height?this.pdfViewer.freeTextSettings.height:24.6;this.borderColor=this.pdfViewer.freeTextSettings.borderColor?this.pdfViewer.freeTextSettings.borderColor:'#ffffff00';this.fillColor=this.pdfViewer.freeTextSettings.fillColor?this.pdfViewer.freeTextSettings.fillColor:'#fff';this.borderStyle=this.pdfViewer.freeTextSettings.borderStyle?this.pdfViewer.freeTextSettings.borderStyle:'solid';var borderThickness=this.pdfViewer.freeTextSettings.borderThickness||this.pdfViewer.freeTextSettings.borderWidth;this.borderWidth=borderThickness?borderThickness:1;this.fontSize=this.pdfViewer.freeTextSettings.fontSize?this.pdfViewer.freeTextSettings.fontSize:16;this.opacity=this.pdfViewer.freeTextSettings.opacity?this.pdfViewer.freeTextSettings.opacity:1;this.fontColor=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:'#000';// eslint-disable-next-line max-len
this.author=this.pdfViewer.freeTextSettings.author!=='Guest'?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';if(this.pdfViewer.freeTextSettings.fontFamily){var fontName=this.pdfViewer.freeTextSettings.fontFamily;if(fontName==='Helvetica'||fontName==='Times New Roman'||fontName==='Courier'||fontName==='Symbol'||fontName==='ZapfDingbats'){this.fontFamily=fontName;}else{this.fontFamily='Helvetica';}}else{this.fontFamily='Helvetica';}this.textAlign=this.pdfViewer.freeTextSettings.textAlignment?this.pdfViewer.freeTextSettings.textAlignment:'Left';this.defaultText=this.pdfViewer.freeTextSettings.defaultText?this.pdfViewer.freeTextSettings.defaultText:'Type here';this.isReadonly=false;if(this.pdfViewer.freeTextSettings.enableAutoFit){this.wordBreak='break-all';this.padding='2px';}else{this.padding='0px';this.wordBreak='break-word';}// eslint-disable-next-line max-len
if(this.pdfViewer.freeTextSettings.isLock||this.pdfViewer.annotationSettings.isLock||this.pdfViewer.freeTextSettings.isReadonly){this.isReadonly=true;}if(this.pdfViewer.freeTextSettings.fontStyle===1){this.isBold=true;}else if(this.pdfViewer.freeTextSettings.fontStyle===2){this.isItalic=true;}else if(this.pdfViewer.freeTextSettings.fontStyle===4){this.isUnderline=true;}else if(this.pdfViewer.freeTextSettings.fontStyle===8){this.isStrikethrough=true;}else if(3===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isItalic=true;}else if(5===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isUnderline=true;}else if(9===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isStrikethrough=true;}else if(7===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isItalic=true;this.isUnderline=true;}else if(11===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isItalic=true;this.isStrikethrough=true;}else if(14===this.pdfViewer.freeTextSettings.fontStyle){this.isBold=true;this.isUnderline=true;this.isStrikethrough=true;}else if(6===this.pdfViewer.freeTextSettings.fontStyle){this.isUnderline=true;this.isItalic=true;}};/**
     * @param shapeAnnotations
     * @param pageNumber
     * @param isImportAction
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.renderFreeTextAnnotations=function(shapeAnnotations,pageNumber,isImportAction){var isFreeTextAdded=false;if(!isImportAction){for(var p=0;p<this.freeTextPageNumbers.length;p++){if(this.freeTextPageNumbers[p]===pageNumber){isFreeTextAdded=true;break;}}}if(shapeAnnotations&&!isFreeTextAdded){if(shapeAnnotations.length>=1){this.freeTextPageNumbers.push(pageNumber);for(var i=0;i<shapeAnnotations.length;i++){// eslint-disable-next-line
var annotation=shapeAnnotations[i];annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);if(annotation.AnnotType){var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var annot=void 0;var paddingValues=this.getPaddingValues(annotation.FontSize);var leftPadding=paddingValues[0];var topPadding=paddingValues[1];var paddingValue=0.5;var annotationBoundsX=!sf.base.isNullOrUndefined(annotation.Bounds.X)?annotation.Bounds.X-paddingValue:annotation.Bounds.x;var annotationBoundsY=!sf.base.isNullOrUndefined(annotation.Bounds.Y)?annotation.Bounds.Y-paddingValue:annotation.Bounds.y;var width=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var height=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;var rotateValue=this.getRotationValue(pageNumber);var originalRotation=annotation.Rotate;var pageRotate=annotation.PageRotation;if(Math.sign(annotation.Rotate)===1){annotation.Rotate=-annotation.Rotate+rotateValue;}else{annotation.Rotate=annotation.Rotate+rotateValue;}// eslint-disable-next-line
var rotateAngle=Math.abs(annotation.Rotate);if(isImportAction&&rotateValue!==pageRotate){if(this.pdfViewerBase.isJsonImported){var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var boundsX=annotation.Bounds.X;var boundsY=annotation.Bounds.Y;var annotationWidth=width;var annotationHeight=height;if(pageRotate>0){var rotatation=pageRotate/90;if(rotatation===1){height=width;width=annotation.Bounds.Height;annotationBoundsX=annotation.Bounds.Y;if(rotateValue!==270){annotationBoundsY=pageDetails.height-annotation.Bounds.X-annotation.Bounds.Width;}else{annotationBoundsY=pageDetails.width-annotation.Bounds.X-annotation.Bounds.Width;}}else if(rotatation===2){if(rotateValue!==270&&rotateValue!==90){annotationBoundsX=pageDetails.width-annotation.Bounds.X-annotation.Bounds.Width;annotationBoundsY=pageDetails.height-annotation.Bounds.Y-annotation.Bounds.Height;}else{annotationBoundsX=pageDetails.height-annotation.Bounds.X-annotation.Bounds.Width;annotationBoundsY=pageDetails.width-annotation.Bounds.Y-annotation.Bounds.Height;}}else if(rotatation===3){height=width;width=annotation.Bounds.Height;if(rotateValue!==90){annotationBoundsX=pageDetails.width-annotation.Bounds.Y-width;}else{annotationBoundsX=pageDetails.height-annotation.Bounds.Y-width;}annotationBoundsY=annotation.Bounds.X;}boundsX=annotationBoundsX;boundsY=annotationBoundsY;annotationWidth=width;annotationHeight=height;}var newRotateAngle=rotateValue/90%4;if(newRotateAngle===1){height=width;width=annotationHeight;annotationBoundsX=pageDetails.width-boundsY-annotationHeight-paddingValue;annotationBoundsY=boundsX-paddingValue;}else if(newRotateAngle===2){annotationBoundsX=pageDetails.width-boundsX-annotationWidth-paddingValue;annotationBoundsY=pageDetails.height-boundsY-annotationHeight-paddingValue;}else if(newRotateAngle===3){height=width;width=annotationHeight;annotationBoundsX=boundsY-paddingValue;annotationBoundsY=pageDetails.height-boundsX-height-paddingValue;}else if(newRotateAngle===0){annotationBoundsX=boundsX-paddingValue;annotationBoundsY=boundsY-paddingValue;}}}if(rotateAngle===90||rotateAngle===270){var rotationHeight=height;var rotationWidth=width;height=rotationWidth;width=rotationHeight;annotationBoundsX=annotationBoundsX-width/2+height/2;annotationBoundsY=annotationBoundsY+(width/2-height/2);}var isPrint=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint=annotation.IsPrint;}else{isPrint=annotation.AnnotationSettings.isPrint;}// eslint-disable-next-line
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line
annot={author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,id:'freetext'+this.inputBoxCount,rotateAngle:annotation.Rotate,dynamicText:annotation.MarkupText,strokeColor:annotation.StrokeColor,thickness:annotation.Thickness,fillColor:annotation.FillColor,bounds:{x:annotationBoundsX,y:annotationBoundsY,left:annotationBoundsX,top:annotationBoundsY,width:width,height:height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotName:annotation.AnnotName,shapeAnnotationType:'FreeText',// eslint-disable-next-line
pageIndex:pageNumber,opacity:annotation.Opacity,fontColor:annotation.FontColor,fontSize:annotation.FontSize,pageRotation:rotateValue,fontFamily:annotation.FontFamily,notes:annotation.MarkupText,textAlign:annotation.TextAlign,// eslint-disable-next-line
comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},// eslint-disable-next-line max-len
font:{isBold:annotation.Font.Bold,isItalic:annotation.Font.Italic,isStrikeout:annotation.Font.Strikeout,isUnderline:annotation.Font.Underline},annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.AnnotationSettings,// eslint-disable-next-line
customData:this.pdfViewer.annotation.getCustomData(annotation),annotationAddMode:annotation.annotationAddMode,allowedInteractions:annotation.allowedInteractions,isPrint:isPrint,isCommentLock:annotation.IsCommentLock,isReadonly:annotation.IsReadonly};if(isImportAction){annot.id=annotation.AnnotName;annot.previousFontSize=annotation.FontSize?annotation.FontSize:this.fontSize;}var addedAnnot=this.pdfViewer.add(annot);this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annot,'_annotations_freetext');if(this.isAddAnnotationProgramatically){// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'FreeText',annot.bounds,settings);}this.inputBoxCount+=1;this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=true;this.pdfViewer.nodePropertyChange(addedAnnot,{});this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=false;}}}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else if(this.pdfViewer.freeTextSettings.annotationSelectorSettings){selector=this.pdfViewer.freeTextSettings.annotationSelectorSettings;}return selector;};/**
     * @param type
     * @private
     */FreeTextAnnotation.prototype.setAnnotationType=function(type){this.pdfViewerBase.disableTextSelectionMode();switch(type){case'FreeText':this.currentAnnotationMode='FreeText';this.updateTextProperties();// eslint-disable-next-line max-len
var modifiedDateRect=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:'FreeText',strokeColor:this.borderColor,fillColor:this.fillColor,opacity:this.opacity,notes:'',isCommentLock:false,thickness:this.borderWidth,borderDashArray:'0',modifiedDate:modifiedDateRect,// eslint-disable-next-line max-len
author:this.pdfViewer.freeTextSettings.author,subject:'Text Box',font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},textAlign:this.textAlign};this.pdfViewer.tool='Select';break;}};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewAdded
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.modifyInCollection=function(property,pageNumber,annotationBase,isNewAdded){if(!isNewAdded){this.pdfViewerBase.updateDocumentEditedProperty(true);}var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.bounds.x,y:annotationBase.bounds.y,left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else if(property==='fill'){pageAnnotations[i].fillColor=annotationBase.wrapper.children[0].style.fill;}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='notes'){pageAnnotations[i].note=annotationBase.notes;}else if(property==='delete'){currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}else if(property==='dynamicText'){pageAnnotations[i].dynamicText=annotationBase.dynamicText;}else if(property==='fontColor'){pageAnnotations[i].fontColor=annotationBase.fontColor;}else if(property==='fontSize'){pageAnnotations[i].fontSize=annotationBase.fontSize;}else if(property==='fontFamily'){pageAnnotations[i].fontFamily=annotationBase.fontFamily;}else if(property==='textPropertiesChange'){// eslint-disable-next-line max-len
pageAnnotations[i].font={isBold:annotationBase.font.isBold,isItalic:annotationBase.font.isItalic,isStrikeout:annotationBase.font.isStrikeout,isUnderline:annotationBase.font.isUnderline};}else if(property==='textAlign'){pageAnnotations[i].textAlign=annotationBase.textAlign;}// eslint-disable-next-line max-len
pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};/**
     * @param pageNumber
     * @param annotationBase
     * @private
     */FreeTextAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){if(annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber);}};/**
     * @private
     */FreeTextAnnotation.prototype.saveFreeTextAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_freetext');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_freetext'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=this.getBoundsBasedOnRotation(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.annotations[z].rotateAngle,pageAnnotationObject.pageIndex,pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.getRgbCode(strokeColorString));var fillColorString=pageAnnotationObject.annotations[z].fillColor;pageAnnotationObject.annotations[z].fillColor=JSON.stringify(this.getRgbCode(fillColorString));var fontColorString=pageAnnotationObject.annotations[z].fontColor;pageAnnotationObject.annotations[z].fontColor=JSON.stringify(this.getRgbCode(fontColorString));// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].vertexPoints=JSON.stringify(pageAnnotationObject.annotations[z].vertexPoints);if(pageAnnotationObject.annotations[z].rectangleDifference!==null){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].rectangleDifference=JSON.stringify(pageAnnotationObject.annotations[z].rectangleDifference);}}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};// eslint-disable-next-line
FreeTextAnnotation.prototype.getRotationValue=function(pageIndex){// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails.rotation===0){return 0;}else if(pageDetails.rotation===1){return 90;}else if(pageDetails.rotation===2){return 180;}else if(pageDetails.rotation===3){return 270;}return 0;};FreeTextAnnotation.prototype.getBoundsBasedOnRotation=function(bounds,rotateAngle,pageIndex,annotation){var paddingValues=this.getPaddingValues(this.fontSize);var leftPadding=paddingValues[0];var topPadding=paddingValues[1];var rotateValue=this.getRotationValue(pageIndex);var paddingValue=0.5;annotation.rotateAngle=rotateAngle-rotateValue;annotation.pageRotation=rotateValue;if(rotateAngle===90||rotateAngle===-90||rotateAngle===270||rotateAngle===-270){var x=bounds.left+bounds.width/2-bounds.height/2;var y=bounds.top-(bounds.width/2-bounds.height/2);return{x:x+paddingValue,y:y+paddingValue,left:x+paddingValue,top:y+paddingValue,width:bounds.height,height:bounds.width};}else{return{x:bounds.left+paddingValue,y:bounds.top+paddingValue,left:bounds.left+paddingValue,top:bounds.top+paddingValue,width:bounds.width,height:bounds.height};}};FreeTextAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_freetext');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_freetext'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_freetext');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_freetext']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_freetext',annotationStringified);}}};// eslint-disable-next-line
FreeTextAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_freetext');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_freetext'];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};// eslint-disable-next-line
FreeTextAnnotation.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var stringArray=colorString.split(',');if(sf.base.isNullOrUndefined(stringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');stringArray=colorString.split(',');}// eslint-disable-next-line radix
var r=parseInt(stringArray[0].split('(')[1]);// eslint-disable-next-line radix
var g=parseInt(stringArray[1]);// eslint-disable-next-line radix
var b=parseInt(stringArray[2]);// eslint-disable-next-line radix
var a=parseInt(stringArray[3]);return{r:r,g:g,b:b,a:a};};/**
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.onFocusOutInputBox=function(){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);if(!this.pdfViewerBase.isFreeTextContextMenu){this.pdfViewer.fireBeforeAddFreeTextAnnotation(this.inputBoxElement.value);// eslint-disable-next-line
var pageIndex=this.inputBoxElement.id&&this.inputBoxElement.id.split("_freeText_")[1]&&this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]?parseFloat(this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]):this.pdfViewerBase.currentPageNumber-1;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);var width=parseFloat(this.inputBoxElement.style.width);var padding=parseFloat(this.inputBoxElement.style.paddingLeft);if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&!this.isNewFreeTextAnnot){var fontsize=parseFloat(this.inputBoxElement.style.fontSize);this.inputBoxElement.style.width=width+padding-fontsize+'px';}if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&this.isNewFreeTextAnnot){width=parseFloat(this.inputBoxElement.style.width);var characterLength=8;this.inputBoxElement.style.width=width-characterLength+'px';}var inputEleHeight=parseFloat(this.inputBoxElement.style.height);var inputEleWidth=parseFloat(this.inputBoxElement.style.width);var inputEleLeft=parseFloat(this.inputBoxElement.style.left);if(this.pdfViewerBase.isMixedSizeDocument){var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);inputEleLeft=inputEleLeft-canvas.offsetLeft;}var inputEleTop=parseFloat(this.inputBoxElement.style.top);var zoomFactor=this.pdfViewerBase.getZoomFactor();if(this.pdfViewer.isValidFreeText){this.inputBoxElement.value='Type Here';this.pdfViewer.isValidFreeText=false;}var inputValue=this.inputBoxElement.value;var isNewlyAdded=false;if(this.isNewFreeTextAnnot===true){// eslint-disable-next-line max-len
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();this.isNewFreeTextAnnot=false;isNewlyAdded=true;var annot=void 0;// eslint-disable-next-line
var annotationSelectorSettings=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);// eslint-disable-next-line
this.author=this.author?this.author:this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:'Guest';// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('freeText',pageIndex+1,'',annotationName,inputValue,this.author);// eslint-disable-next-line
annot={author:this.author,modifiedDate:currentDateString,subject:'Text Box',id:'free_text'+this.inputBoxCount,// eslint-disable-next-line max-len
rotateAngle:0,dynamicText:inputValue,strokeColor:this.borderColor,thickness:this.borderWidth,fillColor:this.fillColor,bounds:{left:inputEleLeft/zoomFactor,top:inputEleTop/zoomFactor,x:inputEleLeft/zoomFactor,y:inputEleTop/zoomFactor,width:inputEleWidth/zoomFactor,height:inputEleHeight/zoomFactor},annotName:annotationName,shapeAnnotationType:'FreeText',type:'FreeText',pageIndex:pageIndex,fontColor:this.fontColor,fontSize:this.fontSize,fontFamily:this.fontFamily,opacity:this.opacity,comments:[],textAlign:this.textAlign,// eslint-disable-next-line max-len
font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},review:{state:'Unmarked',stateModel:'None',modifiedDate:currentDateString,author:this.author},// eslint-disable-next-line max-len
annotationSelectorSettings:annotationSelectorSettings,annotationSettings:annotationSettings,customData:this.pdfViewer.annotationModule.getData('FreeText'),isPrint:this.pdfViewer.freeTextSettings.isPrint,allowedInteractions:allowedInteractions,isReadonly:this.isReadonly};if(this.pdfViewer.enableRtl){annot.textAlign='Right';}var annotation=this.pdfViewer.add(annot);// eslint-disable-next-line
var bounds={x:annot.bounds.x,y:annot.bounds.y,left:annot.bounds.x,top:annot.bounds.y,width:annot.bounds.width,height:annot.bounds.height};// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.pdfViewer.annotation.storeAnnotations(pageIndex,annot,'_annotations_freetext');this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'FreeText',bounds,settings);// eslint-disable-next-line
this.pdfViewer.annotation.addAction(pageIndex,null,annot,'Addition','',annot,annot);this.pdfViewer.renderSelector(annot.pageIndex);this.pdfViewer.clearSelection(annot.pageIndex);this.pdfViewerBase.updateDocumentEditedProperty(true);this.selectedAnnotation=annotation;}this.isInuptBoxInFocus=false;// eslint-disable-next-line
if(this.selectedAnnotation&&this.pdfViewer.selectedItems.annotations){inputEleWidth=inputEleWidth/zoomFactor;inputEleHeight=inputEleHeight/zoomFactor;var heightDiff=inputEleHeight-this.selectedAnnotation.bounds.height;var y=undefined;if(heightDiff>0){y=this.selectedAnnotation.wrapper.offsetY+heightDiff/2;y=y>0?y:undefined;}var widthDiff=inputEleWidth-this.selectedAnnotation.bounds.width;var x=undefined;if(widthDiff>0){x=this.selectedAnnotation.wrapper.offsetX+widthDiff/2;x=x>0?x:undefined;}else{widthDiff=Math.abs(widthDiff);x=this.selectedAnnotation.wrapper.offsetX-widthDiff/2;}this.selectedAnnotation.bounds.width=inputEleWidth;this.selectedAnnotation.bounds.height=inputEleHeight;this.pdfViewer.annotation.modifyDynamicTextValue(inputValue,this.selectedAnnotation.annotName);this.selectedAnnotation.dynamicText=inputValue;this.modifyInCollection('dynamicText',pageIndex,this.selectedAnnotation,isNewlyAdded);this.modifyInCollection('bounds',pageIndex,this.selectedAnnotation,isNewlyAdded);// eslint-disable-next-line
this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:y,x:x}});// eslint-disable-next-line
this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFreeText',this.selectedAnnotation.annotName,inputValue);if(sf.base.Browser.isDevice){this.pdfViewer.select([this.selectedAnnotation.id],this.selectedAnnotation.annotationSelectorSettings);}else{this.pdfViewer.renderSelector(this.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings);}}if(this.inputBoxElement.parentElement){if(pageDiv&&pageDiv.id===this.inputBoxElement.parentElement.id){pageDiv.removeChild(this.inputBoxElement);}else{this.inputBoxElement.parentElement.removeChild(this.inputBoxElement);}}var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,pageIndex);this.inputBoxCount+=1;if(!isNewlyAdded&&this.previousText!==inputValue){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.triggerAnnotationPropChange(this.selectedAnnotation,false,false,false,false,false,false,false,true,this.previousText,inputValue);}}else{this.inputBoxElement.focus();if(!this.isTextSelected){window.getSelection().removeAllRanges();}}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);};/**
     * @param event
     * @private
     */FreeTextAnnotation.prototype.onKeyDownInputBox=function(event){var inuptEleObj=this;if(event.which===9||sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0])&&!this.isNewFreeTextAnnot){event.preventDefault();}this.selectedAnnotation=this.pdfViewer.selectedItems.annotations&&this.isNewFreeTextAnnot?this.pdfViewer.selectedItems.annotations[0]:this.selectedAnnotation;setTimeout(function(){if(inuptEleObj.defaultHeight<inuptEleObj.inputBoxElement.scrollHeight// eslint-disable-next-line radix
&&parseInt(inuptEleObj.inputBoxElement.style.height)<inuptEleObj.inputBoxElement.scrollHeight){inuptEleObj.updateFreeTextAnnotationSize(true);}else{inuptEleObj.updateFreeTextAnnotationSize(false);}// eslint-disable-next-line
},0);};FreeTextAnnotation.prototype.updateFreeTextAnnotationSize=function(isSize){var inuptEleObj=this;var enableAutoFit=inuptEleObj.pdfViewer.freeTextSettings.enableAutoFit;if(enableAutoFit){this.autoFitFreeText();}else{this.isMaximumWidthReached=true;}if(this.isMaximumWidthReached){// eslint-disable-next-line max-len
var previousHeight=inuptEleObj.inputBoxElement.getBoundingClientRect().height;if(!isSize&&!inuptEleObj.inputBoxElement.readOnly){inuptEleObj.inputBoxElement.style.height=inuptEleObj.defaultHeight+'px';}var currentHeight=inuptEleObj.inputBoxElement.getBoundingClientRect().height;var difference=currentHeight-previousHeight;var fontSize=parseFloat(inuptEleObj.inputBoxElement.style.fontSize);// eslint-disable-next-line max-len
var zoomFactor_1=inuptEleObj.pdfViewerBase.getZoomFactor();if(inuptEleObj.defaultHeight*zoomFactor_1<inuptEleObj.inputBoxElement.scrollHeight&&parseInt(inuptEleObj.inputBoxElement.style.height)<inuptEleObj.inputBoxElement.scrollHeight){inuptEleObj.inputBoxElement.style.height=inuptEleObj.inputBoxElement.readOnly?inuptEleObj.inputBoxElement.style.height:inuptEleObj.inputBoxElement.scrollHeight+fontSize/2+'px';}inuptEleObj.inputBoxElement.style.height=difference<0&&!inuptEleObj.inputBoxElement.readOnly?previousHeight+'px':inuptEleObj.inputBoxElement.style.height;}var zoomFactor=inuptEleObj.pdfViewerBase.getZoomFactor();var inputEleHeight=parseFloat(this.inputBoxElement.style.height);var inputEleWidth=parseFloat(this.inputBoxElement.style.width);inputEleHeight=inputEleHeight/zoomFactor;inputEleWidth=inputEleWidth/zoomFactor;if(this.selectedAnnotation){var heightDiff=inputEleHeight-inuptEleObj.selectedAnnotation.bounds.height;var y=0;if(heightDiff>0){y=inuptEleObj.selectedAnnotation.wrapper.offsetY+heightDiff/2;}else{heightDiff=Math.abs(heightDiff);y=inuptEleObj.selectedAnnotation.wrapper.offsetY-heightDiff/2;}if(enableAutoFit){var widthDiff=inputEleWidth-inuptEleObj.selectedAnnotation.bounds.width;var x=0;if(widthDiff>0){x=inuptEleObj.selectedAnnotation.wrapper.offsetX+widthDiff/2;}else{widthDiff=Math.abs(widthDiff);x=inuptEleObj.selectedAnnotation.wrapper.offsetX-widthDiff/2;}}inuptEleObj.selectedAnnotation.bounds.width=inputEleWidth;inuptEleObj.selectedAnnotation.bounds.height=inputEleHeight;if(enableAutoFit){// eslint-disable-next-line
inuptEleObj.pdfViewer.nodePropertyChange(inuptEleObj.selectedAnnotation,{bounds:{width:inuptEleObj.selectedAnnotation.bounds.width,height:inuptEleObj.selectedAnnotation.bounds.height,y:y,x:x}});}else{// eslint-disable-next-line
inuptEleObj.pdfViewer.nodePropertyChange(inuptEleObj.selectedAnnotation,{bounds:{width:inuptEleObj.selectedAnnotation.bounds.width,height:inuptEleObj.selectedAnnotation.bounds.height,y:y}});}inuptEleObj.pdfViewer.renderSelector(inuptEleObj.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings);}};/**
     * @param event
     * @private
     */FreeTextAnnotation.prototype.autoFitFreeText=function(xPosition,yPosition){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);// eslint-disable-next-line
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageIndex);// eslint-disable-next-line
var context=canvas.getContext("2d");// eslint-disable-next-line
var fontSize=this.inputBoxElement.style.fontSize;if(this.pdfViewer.freeTextSettings.fontStyle===FontStyle.Bold||this.inputBoxElement.style.fontWeight==='bold'){context.font='bold'+' '+fontSize+' '+this.inputBoxElement.style.fontFamily;}else{context.font=fontSize+' '+this.inputBoxElement.style.fontFamily;}var highestTextNode="";// eslint-disable-next-line
var textNodes=[];var textboxValue=this.inputBoxElement.value;if(textboxValue.indexOf('\n')>-1){textNodes=textboxValue.split('\n');for(var j=0;j<textNodes.length;j++){// eslint-disable-next-line
var textNodeData=context.measureText(textNodes[j]);// eslint-disable-next-line
var highestTextNodeData=context.measureText(highestTextNode);if(textNodeData.width>highestTextNodeData.width){highestTextNode=textNodes[j];}}this.isMaximumWidthReached=true;}else{highestTextNode=textboxValue;this.isMaximumWidthReached=false;}// eslint-disable-next-line
var textwidth=context.measureText(highestTextNode);fontSize=parseFloat(this.inputBoxElement.style.fontSize);var inputEleWidth;var characterLength=8;var inputEleHeight=fontSize+fontSize/2;if(this.isNewFreeTextAnnot){inputEleWidth=Math.ceil(textwidth.width+(characterLength+1)*2);this.inputBoxElement.style.height=inputEleHeight+'px';this.inputBoxElement.style.top=yPosition-inputEleHeight/2+'px';}else{inputEleWidth=Math.ceil(textwidth.width)+fontSize+Math.ceil(characterLength/2);}if(!xPosition){this.inputBoxElement.style.height=inputEleHeight+'px';}this.inputBoxElement.style.width=inputEleWidth+'px';var maxWidth=this.pdfViewerBase.getPageWidth(pageIndex)-parseFloat(this.inputBoxElement.style.left);if(parseFloat(this.inputBoxElement.style.width)>maxWidth){this.isMaximumWidthReached=true;if(this.isNewAddedAnnot&&xPosition){inputEleWidth=inputEleWidth-characterLength;this.inputBoxElement.style.width=inputEleWidth+'px';var width=xPosition+inputEleWidth*this.pdfViewerBase.getZoomFactor();var x=parseFloat(this.inputBoxElement.style.left);if(width>=this.pdfViewerBase.getPageWidth(pageIndex)){x=this.pdfViewerBase.getPageWidth(pageIndex)-inputEleWidth;}this.inputBoxElement.style.left=x+'px';}else{this.inputBoxElement.style.width=maxWidth+'px';}}};/**
     * @param event
     * @private
     */FreeTextAnnotation.prototype.onMouseUpInputBox=function(event){// eslint-disable-next-line
var target=event.target;this.selectionStart=0;this.selectionEnd=0;if(event.which===3&&target){this.selectionStart=target.selectionStart;this.selectionEnd=target.selectionEnd;}if(event.which===3&&window.getSelection()!=null&&window.getSelection().toString()!==''){this.isTextSelected=true;}else{this.isTextSelected=false;}};/**
     * @param currentPosition
     * @param annotation
     * @param pageIndex
     * @private
     */FreeTextAnnotation.prototype.addInuptElemet=function(currentPosition,annotation,pageIndex,isEditMode){if(annotation===void 0){annotation=null;}if(sf.base.isNullOrUndefined(pageIndex)){pageIndex=this.pdfViewerBase.currentPageNumber-1;}if(annotation){pageIndex=annotation.pageIndex;}if(annotation===null&&this.pdfViewer.selectedItems.annotations.length===0){this.updateTextProperties();}this.inputBoxElement.id=this.pdfViewer.dataId+'_freeText_'+pageIndex+'_'+this.inputBoxCount;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);var zoomFactor=this.pdfViewerBase.getZoomFactor();this.inputBoxElement.value=annotation&&annotation.dynamicText?annotation.dynamicText:this.defaultText;this.inputBoxElement.style.boxSizing='border-box';this.inputBoxElement.style.left=currentPosition.x+'px';this.inputBoxElement.style.top=currentPosition.y-this.defaultHeight*zoomFactor/2+'px';if(this.pdfViewer.freeTextSettings.enableAutoFit){this.inputBoxElement.style.wordBreak='break-all';}else{this.inputBoxElement.style.wordBreak='break-word';}if(annotation){this.applyFreetextStyles(zoomFactor,annotation.isReadonly);}else{this.applyFreetextStyles(zoomFactor);}if(this.isBold){this.inputBoxElement.style.fontWeight='bold';}else{this.inputBoxElement.style.fontWeight='normal';}if(this.isItalic){this.inputBoxElement.style.fontStyle='italic';}else{this.inputBoxElement.style.fontStyle='normal';}this.inputBoxElement.style.textDecoration='none';if(this.isUnderline){this.inputBoxElement.style.textDecoration='underline';}if(this.isStrikethrough){this.inputBoxElement.style.textDecoration='line-through';}if(this.pdfViewer.enableRtl){this.inputBoxElement.style.textAlign='right';this.inputBoxElement.style.direction='rtl';this.inputBoxElement.style.left=currentPosition.x-this.defautWidth*zoomFactor/2;}else{this.inputBoxElement.style.textAlign=this.textAlign.toLowerCase();}this.inputBoxElement.style.borderColor=this.borderColor;this.inputBoxElement.style.color=this.fontColor;this.inputBoxElement.style.background=this.fillColor;if(annotation&&annotation.wrapper&&annotation.wrapper.children[0]){this.inputBoxElement.style.opacity=annotation.wrapper.children[0].style.opacity;}if(this.isNewFreeTextAnnot===true){this.pdfViewer.clearSelection(pageIndex);}if(annotation&&annotation.wrapper&&annotation.wrapper.bounds){var annotationBounds=annotation.wrapper.bounds;if(annotationBounds.left){this.inputBoxElement.style.left=annotationBounds.left*zoomFactor+'px';}if(annotationBounds.top){this.inputBoxElement.style.top=annotationBounds.top*zoomFactor+'px';}// eslint-disable-next-line max-len
this.inputBoxElement.style.height=annotationBounds.height?annotationBounds.height*zoomFactor+'px':this.defaultHeight*zoomFactor+'px';// eslint-disable-next-line max-len
this.inputBoxElement.style.width=annotationBounds.width?annotationBounds.width*zoomFactor+'px':this.defautWidth*zoomFactor+'px';this.selectedAnnotation=annotation;this.previousText=this.selectedAnnotation.dynamicText;this.selectedAnnotation.dynamicText='';this.inputBoxElement.style.borderColor=this.selectedAnnotation.strokeColor;this.inputBoxElement.style.color=this.selectedAnnotation.fontColor;this.inputBoxElement.style.background=this.selectedAnnotation.fillColor;if(this.selectedAnnotation.font.isBold===true){this.inputBoxElement.style.fontWeight='bold';}if(this.selectedAnnotation.font.isItalic===true){this.inputBoxElement.style.fontStyle='italic';}if(this.selectedAnnotation.font.isUnderline===true){this.inputBoxElement.style.textDecoration='underline';}if(this.selectedAnnotation.font.isStrikeout===true){this.inputBoxElement.style.textDecoration='line-through';}if(this.pdfViewer.enableRtl){this.inputBoxElement.style.textAlign='right';this.inputBoxElement.style.direction='rtl';}else if(this.selectedAnnotation.textAlign){this.inputBoxElement.style.textAlign=this.selectedAnnotation.textAlign;}this.inputBoxElement.style.fontSize=this.selectedAnnotation.fontSize*zoomFactor+'px';this.inputBoxElement.style.fontFamily=this.selectedAnnotation.fontFamily;this.pdfViewer.drawing.clearSelectorLayer(pageIndex);this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{});}if(this.pdfViewerBase.isMixedSizeDocument){this.inputBoxElement.style.left=currentPosition.x+canvass.offsetLeft+'px';}this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=false;if(this.pdfViewer.freeTextSettings.enableAutoFit){this.autoFitFreeText(currentPosition.x,currentPosition.y);}pageDiv.appendChild(this.inputBoxElement);// eslint-disable-next-line
if(!this.pdfViewer.freeTextSettings.enableAutoFit&&this.defaultHeight*zoomFactor<this.inputBoxElement.scrollHeight&&parseInt(this.inputBoxElement.style.height)<this.inputBoxElement.scrollHeight){this.inputBoxElement.style.height=this.inputBoxElement.scrollHeight+'px';if(isEditMode){this.updateFreeTextAnnotationSize(true);}}this.isInuptBoxInFocus=true;this.inputBoxElement.focus();if(this.isNewFreeTextAnnot===true||this.inputBoxElement.value===this.defaultText){this.inputBoxElement.select();this.pdfViewerBase.isFreeTextSelected=true;}};FreeTextAnnotation.prototype.applyFreetextStyles=function(zoomFactor,isReadonly){this.inputBoxElement.style.height=this.defaultHeight*zoomFactor+'px';this.inputBoxElement.style.width=this.defautWidth*zoomFactor+'px';this.inputBoxElement.style.borderWidth=this.borderWidth*zoomFactor+'px';this.inputBoxElement.style.fontSize=this.fontSize*zoomFactor+'px';this.inputBoxElement.style.fontFamily=this.fontFamily;this.inputBoxElement.readOnly=sf.base.isNullOrUndefined(isReadonly)?this.isReadonly:isReadonly;};/**
     * @private
     */FreeTextAnnotation.prototype.copySelectedText=function(){if(window.getSelection()!==null){this.selectedText=window.getSelection().toString();var textArea=document.createElement('textarea');textArea.contentEditable='true';textArea.textContent=this.selectedText;textArea.style.position='fixed';document.body.appendChild(textArea);textArea.select();try{document.execCommand('copy');}catch(ex){console.warn('Copy to clipboard failed.',ex);}finally{if(textArea){document.body.removeChild(textArea);}}}};/**
     * @param target
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.pasteSelectedText=function(target){if(this.selectedText!==''&&target){// eslint-disable-next-line
var text=target.value;target.value=text.slice(0,this.selectionStart)+this.selectedText+text.slice(this.selectionEnd,text.length);}// eslint-disable-next-line
var events=event;this.onKeyDownInputBox(events);};/**
     * @param target
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.cutSelectedText=function(target){if(window.getSelection()!==null){// eslint-disable-next-line
var text=target.value;this.selectedText=window.getSelection().toString();target.value=text.slice(0,target.selectionStart)+text.slice(target.selectionEnd);var textArea=document.createElement('textarea');textArea.contentEditable='true';textArea.textContent=this.selectedText;textArea.style.position='fixed';document.body.appendChild(textArea);textArea.select();try{document.execCommand('cut');}catch(ex){console.warn('Copy to clipboard failed.',ex);}finally{if(textArea){document.body.removeChild(textArea);}}}};/**
     * @param shapeAnnotations
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.saveImportedFreeTextAnnotations=function(shapeAnnotations,pageNumber){// eslint-disable-next-line
var annotation=shapeAnnotations;if(annotation.AnnotType){var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var annot=void 0;// eslint-disable-next-line max-len
annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var annotationBoundsX=!sf.base.isNullOrUndefined(annotation.Bounds.X)?annotation.Bounds.X:annotation.Bounds.x;var annotationBoundsY=!sf.base.isNullOrUndefined(annotation.Bounds.Y)?annotation.Bounds.Y:annotation.Bounds.y;var annotationBoundsWidth=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var annotationBoundsHeight=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;// eslint-disable-next-line
annot={author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,id:'freetext',rotateAngle:annotation.Rotate,dynamicText:annotation.MarkupText,strokeColor:annotation.StrokeColor,thickness:annotation.Thickness,fillColor:annotation.FillColor,bounds:{x:annotationBoundsX,y:annotationBoundsY,left:annotationBoundsX,top:annotationBoundsY,width:annotationBoundsWidth,height:annotationBoundsHeight,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotName:annotation.AnnotName,shapeAnnotationType:'FreeText',// eslint-disable-next-line
pageIndex:pageNumber,opacity:annotation.Opacity,fontColor:annotation.FontColor,fontSize:annotation.FontSize,fontFamily:annotation.FontFamily,notes:annotation.MarkupText,textAlign:annotation.TextAlign,// eslint-disable-next-line
comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},font:{isBold:annotation.Font.Bold,isItalic:annotation.Font.Italic,isStrikeout:annotation.Font.Strikeout,isUnderline:annotation.Font.Underline},annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.AnnotationSettings,// eslint-disable-next-line max-len
customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock,isReadonly:annotation.IsReadonly};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annot,'_annotations_freetext');}};/**
     * @param shapeAnnotations
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
FreeTextAnnotation.prototype.updateFreeTextAnnotationCollections=function(shapeAnnotations,pageNumber){// eslint-disable-next-line
var annotation=shapeAnnotations;if(annotation.AnnotType){var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}// eslint-disable-next-line max-len
annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var annotationBoundsX=annotation.Bounds.X?annotation.Bounds.X:annotation.Bounds.x;var annotationBoundsY=annotation.Bounds.Y?annotation.Bounds.Y:annotation.Bounds.y;var width=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var height=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;// eslint-disable-next-line
var annot=void 0;// eslint-disable-next-line
annot={author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,id:'freetext',rotateAngle:annotation.Rotate,dynamicText:annotation.MarkupText,strokeColor:annotation.StrokeColor,thickness:annotation.Thickness,fillColor:annotation.FillColor,bounds:{x:annotationBoundsX,y:annotationBoundsY,left:annotationBoundsX,top:annotationBoundsY,width:width,height:height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotationId:annotation.AnnotName,shapeAnnotationType:'FreeText',// eslint-disable-next-line
pageIndex:pageNumber,opacity:annotation.Opacity,fontColor:annotation.FontColor,fontSize:annotation.FontSize,fontFamily:annotation.FontFamily,notes:annotation.MarkupText,// eslint-disable-next-line
comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},font:{isBold:annotation.Font.Bold,isItalic:annotation.Font.Italic,isStrikeout:annotation.Font.Strikeout,isUnderline:annotation.Font.Underline},pageNumber:pageNumber,annotationSettings:annotation.AnnotationSettings,isCommentLock:annotation.IsCommentLock};return annot;}};/**
     * This method used to add annotations with using program.
     *
     * @param annotationType - It describes type of annotation
     * @param offset - It describes about the annotation bounds
     * @returns Object
     * @private
     */FreeTextAnnotation.prototype.updateAddAnnotationDetails=function(annotationObject,offset){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:1,y:1},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:1,y:1};else offset=annotationObject.offset;//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();var fontStyle=annotationObject.fontStyle?annotationObject.fontStyle:FontStyle.None;//Creating annotation settings
var annotationSelectorSettings=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var allowedInteractions=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationSettings.minHeight=annotationObject.minHeight?annotationObject.minHeight:0;annotationSettings.minWidth=annotationObject.minWidth?annotationObject.minWidth:0;annotationSettings.maxWidth=annotationObject.maxWidth?annotationObject.maxWidth:0;annotationSettings.maxHeight=annotationObject.maxHeight?annotationObject.maxHeight:0;annotationObject.width=annotationObject.width?annotationObject.width:150;annotationObject.height=annotationObject.height?annotationObject.height:24.6;//Creating Annotation objects with it's proper properties
var freeTextAnnotation=[];var freeText={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'freeText',AnnotationFlags:'Default',AnnotationIntent:null,AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Author:annotationObject.author?annotationObject.author:'Guest',Border:{HorizontalRadius:0,VerticalRadius:0,Width:annotationObject.borderWidth?annotationObject.borderWidth:1},BorderColor:{IsEmpty:true,B:255,Blue:1,C:0,G:255},Bounds:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Right:offset.x+annotationObject.width,Bottom:offset.y+annotationObject.height},CalloutLines:null,Color:{IsEmpty:false,B:51,Blue:0.2,C:0,G:255},Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,FillColor:annotationObject.fillColor?annotationObject.fillColor:'#ffffff00',Flatten:false,FlattenPopups:false,Font:{Bold:fontStyle==FontStyle.Bold?true:false,Italic:fontStyle==FontStyle.Italic?true:false,Strikeout:fontStyle==FontStyle.Strikethrough?true:false,Underline:fontStyle==FontStyle.Underline?true:false},FontColor:annotationObject.fontColor?annotationObject.fontColor:'#000',FontFamily:annotationObject.fontFamily?annotationObject.fontFamily:'Helvetica',FontSize:annotationObject.fontSize?annotationObject.fontSize:16,FreeTextAnnotationType:'Text Box',InnerColor:null,IsCommentLock:false,IsLock:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint!==null&&annotationObject.isPrint!==undefined?annotationObject.isPrint:true,Layer:null,LineEndingStyle:'OpenArrow',Location:null,MarkupText:annotationObject.defaultText?annotationObject.defaultText:'Type Here',ModifiedDate:currentDateString,Name:annotationName,Opacity:annotationObject.opacity?annotationObject.opacity:1,Page:null,PageTags:null,ReviewHistory:null,Rotate:0,IsReadonly:annotationObject.isReadonly?annotationObject.isReadonly:false,State:'Unmarked',StateModel:'None',StrokeColor:annotationObject.borderColor?annotationObject.borderColor:'#ffffff00',Subject:'Text Box',Text:annotationObject.defaultText?annotationObject.defaultText:'Type Here',TextAlign:annotationObject.textAlignment?annotationObject.textAlignment:'Left',TextMarkupColor:null,Thickness:annotationObject.borderWidth?annotationObject.borderWidth:1};//Adding the annotation object to an array and return it
freeTextAnnotation[0]=freeText;return{freeTextAnnotation:freeTextAnnotation};};/**
     * This method used to get the padding.
    */FreeTextAnnotation.prototype.getPaddingValues=function(fontSize){var leftPadding=4;// Left padding used in the drawing.js
var topPadding=5;// Top padding used in the drawing.js
var inputBoxpadding=2;// we have set the input box padding for the free text.
topPadding=(topPadding-inputBoxpadding)*(fontSize/16);return[leftPadding,topPadding];};return FreeTextAnnotation;}();/**
 * @hidden
 */var InputElement=/** @class */function(){function InputElement(pdfviewer,pdfViewerBase){this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;this.inputBoxElement=document.createElement('input');this.inputBoxElement.addEventListener('focusout',this.onFocusOutInputBox.bind(this));this.maxHeight=24.6;this.maxWidth=151;this.fontSize=16;this.isInFocus=false;this.inputBoxElement.style.position='absolute';this.inputBoxElement.style.fontFamily='Helvetica';}/**
     * @param currentPosition
     * @param annotation
     * @private
     */InputElement.prototype.editLabel=function(currentPosition,annotation){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);var zoomFactor=this.pdfViewerBase.getZoomFactor();this.inputBoxElement.value=annotation.labelContent;this.inputBoxElement.select();annotation.labelContent='';this.pdfViewer.nodePropertyChange(annotation,{});this.inputBoxElement.style.left=currentPosition.x*zoomFactor+'px';this.inputBoxElement.style.top=currentPosition.y*zoomFactor+'px';this.inputBoxElement.style.maxHeight=this.maxHeight*zoomFactor+'px';this.inputBoxElement.style.maxWidth=this.maxWidth*zoomFactor+'px';this.inputBoxElement.style.fontSize=this.fontSize*zoomFactor+'px';this.inputBoxElement.style.textAlign='center';if(annotation&&annotation.wrapper&&annotation.wrapper.bounds){// eslint-disable-next-line max-len
this.inputBoxElement.style.width=annotation.wrapper.bounds.width?annotation.wrapper.bounds.width/2*zoomFactor+1+'px':this.maxWidth*zoomFactor+'px';var inputEleWidth=parseFloat(this.inputBoxElement.style.width);inputEleWidth=inputEleWidth>this.maxWidth*zoomFactor?this.maxWidth*zoomFactor:inputEleWidth;if(annotation.wrapper.bounds.left){// eslint-disable-next-line max-len
this.inputBoxElement.style.left=(annotation.wrapper.bounds.left+annotation.wrapper.bounds.width/2-inputEleWidth/(zoomFactor*2))*zoomFactor+'px';}if(annotation.wrapper.bounds.top){// eslint-disable-next-line max-len
if(annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='LineWidthArrowHead'||annotation.shapeAnnotationType==='Distance'||annotation.shapeAnnotationType==='Polygon'){// eslint-disable-next-line max-len
this.inputBoxElement.style.top=(annotation.wrapper.bounds.top+annotation.wrapper.bounds.height/2-this.maxHeight)*zoomFactor+'px';}else{// eslint-disable-next-line max-len
this.inputBoxElement.style.top=(annotation.wrapper.bounds.top+annotation.wrapper.bounds.height/2-this.maxHeight/2)*zoomFactor+'px';}}this.inputBoxElement.maxLength=annotation.labelMaxLength;this.inputBoxElement.fontFamily=annotation.fontFamily;this.inputBoxElement.style.color=annotation.fontColor;this.inputBoxElement.style.border='1px solid #ffffff00';this.inputBoxElement.style.padding='2px';this.inputBoxElement.style.background=annotation.labelFillColor;}pageDiv.appendChild(this.inputBoxElement);this.isInFocus=true;this.inputBoxElement.focus();};/**
     * @private
     */InputElement.prototype.onFocusOutInputBox=function(){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);var inputEleHeight=parseFloat(this.inputBoxElement.style.height);var inputEleWidth=parseFloat(this.inputBoxElement.style.width);this.isInFocus=false;var selectedAnnotation=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line
if(selectedAnnotation){inputEleWidth=(inputEleWidth-1)/this.pdfViewerBase.getZoomFactor();inputEleHeight=(inputEleHeight-1)/this.pdfViewerBase.getZoomFactor();// this.pdfViewer.annotation.modifyDynamicTextValue(this.inputBoxElement.value, this.selectedAnnotation.annotName);
selectedAnnotation.labelContent=this.inputBoxElement.value;selectedAnnotation.notes=this.inputBoxElement.value;// eslint-disable-next-line max-len
if(selectedAnnotation.shapeAnnotationType==='Rectangle'||selectedAnnotation.shapeAnnotationType==='Ellipse'||selectedAnnotation.shapeAnnotationType==='Line'||selectedAnnotation.shapeAnnotationType==='LineWidthArrowHead'){this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('labelContent',pageIndex,selectedAnnotation);}else if(selectedAnnotation.shapeAnnotationType==='Radius'&&selectedAnnotation.measureType){this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('labelContent',pageIndex,selectedAnnotation);}// eslint-disable-next-line
this.pdfViewer.nodePropertyChange(selectedAnnotation,{});this.pdfViewer.renderSelector(selectedAnnotation.pageIndex,this.pdfViewer.annotationSelectorSettings);}pageDiv.removeChild(this.inputBoxElement);var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,pageIndex);};/**
     * @param bounds
     * @param pageIndex
     * @param bounds
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
InputElement.prototype.calculateLabelBounds=function(bounds,pageIndex){// eslint-disable-next-line
var labelBounds={};if(bounds){var labelTop=0;var labelLeft=0;var labelWidth=0;var labelHeight=24.6;var labelMaxWidth=151;if(pageIndex===undefined){pageIndex=this.pdfViewerBase.currentPageNumber-1;}var rotation=this.pdfViewerBase.pageSize[pageIndex].rotation;if(bounds.width){// eslint-disable-next-line max-len
labelWidth=bounds.width/2;labelWidth=labelWidth>0&&labelWidth<labelMaxWidth?labelWidth:labelMaxWidth;}if(bounds.left){// eslint-disable-next-line max-len
labelLeft=bounds.left+bounds.width/2-labelWidth/2;}if(bounds.top){// eslint-disable-next-line max-len
labelTop=bounds.top+bounds.height/2-labelHeight/2;}if(rotation===1||rotation===3){// eslint-disable-next-line max-len
labelBounds={left:labelLeft,top:labelTop,width:labelWidth-labelHeight+labelWidth/2,height:labelHeight*2+labelWidth,right:0,bottom:0};}else{// eslint-disable-next-line max-len
labelBounds={left:labelLeft,top:labelTop,width:labelWidth,height:labelHeight,right:0,bottom:0};}}return labelBounds;};/**
     * @param bounds
     * @private
     */ // eslint-disable-next-line
InputElement.prototype.calculateLabelBoundsFromLoadedDocument=function(bounds){// eslint-disable-next-line
var labelBounds={};if(bounds){var labelTop=0;var labelLeft=0;var labelWidth=0;var labelHeight=24.6;var labelMaxWidth=151;if(bounds.Width){// eslint-disable-next-line max-len
labelWidth=bounds.Width/2;labelWidth=labelWidth>0&&labelWidth<labelMaxWidth?labelWidth:labelMaxWidth;}if(bounds.Left){// eslint-disable-next-line max-len
labelLeft=bounds.Left+bounds.Width/2-labelWidth/2;}if(bounds.Top){// eslint-disable-next-line max-len
labelTop=bounds.Top+bounds.Height/2-labelHeight/2;}// eslint-disable-next-line max-len
labelBounds={left:labelLeft,top:labelTop,width:labelWidth,height:labelHeight,right:0,bottom:0};}return labelBounds;};return InputElement;}();/**
 * The `Annotation` module is used to handle annotation actions of PDF viewer.
 */var Annotation=/** @class */function(){/**
     * @param pdfViewer
     * @param viewerBase
     * @param pdfViewer
     * @param viewerBase
     * @private
     */function Annotation(pdfViewer,viewerBase){/**
         * @private
         */this.isDeleteKeyboardClick=false;this.isUndoRedoAction=false;this.isUndoAction=false;this.annotationSelected=true;/**
         * @private
         */this.isShapeCopied=false;/**
         * @private
         */this.actionCollection=[];/**
         * @private
         */this.redoCollection=[];/**
         * @private
         */this.isPopupNoteVisible=false;/**
         * @private
         */this.undoCommentsElement=[];/**
         * @private
         */this.redoCommentsElement=[];/**
         * @private
         */this.selectAnnotationId=null;/**
         * @private
         */this.isAnnotationSelected=false;/**
         * @private
         */this.annotationPageIndex=null;this.previousIndex=null;// eslint-disable-next-line
this.overlappedAnnotations=[];/**
         * @private
         */ // eslint-disable-next-line
this.overlappedCollections=[];/**
         * @private
         */ // eslint-disable-next-line
this.isFormFieldShape=false;/**
         * @private
         */ // eslint-disable-next-line
this.removedAnnotationCollection=[];this.oldProperties=null;this.pdfViewer=pdfViewer;this.pdfViewerBase=viewerBase;if(this.pdfViewer.enableTextMarkupAnnotation){this.textMarkupAnnotationModule=new TextMarkupAnnotation(this.pdfViewer,this.pdfViewerBase);}if(this.pdfViewer.enableShapeAnnotation){this.shapeAnnotationModule=new ShapeAnnotation(this.pdfViewer,this.pdfViewerBase);}if(this.pdfViewer.enableMeasureAnnotation){this.measureAnnotationModule=new MeasureAnnotation(this.pdfViewer,this.pdfViewerBase);}this.stampAnnotationModule=new StampAnnotation(this.pdfViewer,this.pdfViewerBase);this.stickyNotesAnnotationModule=new StickyNotesAnnotation(this.pdfViewer,this.pdfViewerBase);this.freeTextAnnotationModule=new FreeTextAnnotation(this.pdfViewer,this.pdfViewerBase);this.inputElementModule=new InputElement(this.pdfViewer,this.pdfViewerBase);this.inkAnnotationModule=new InkAnnotation(this.pdfViewer,this.pdfViewerBase);}/**
     * Set annotation type to be added in next user interaction in PDF Document.
     *
     * @param type
     * @param dynamicStampItem
     * @param signStampItem
     * @param standardBusinessStampItem
     * @returns void
     */ // eslint-disable-next-line max-len
Annotation.prototype.setAnnotationMode=function(type,dynamicStampItem,signStampItem,standardBusinessStampItem){var allowServerDataBind=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(false);type!=='None'?this.triggerAnnotationUnselectEvent():null;if(type==='None'){this.clearAnnotationMode();}else if(type==='Highlight'||type==='Strikethrough'||type==='Underline'){if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.isSelectionMaintained=false;this.textMarkupAnnotationModule.drawTextMarkupAnnotations(type.toString());}}else if(type==='Line'||type==='Arrow'||type==='Rectangle'||type==='Circle'||type==='Polygon'){if(this.shapeAnnotationModule){this.shapeAnnotationModule.setAnnotationType(type);}}else if(type==='Distance'||type==='Perimeter'||type==='Area'||type==='Radius'||type==='Volume'){if(this.measureAnnotationModule){this.measureAnnotationModule.setAnnotationType(type);}}else if(type==='FreeText'&&this.freeTextAnnotationModule){this.freeTextAnnotationModule.setAnnotationType('FreeText');this.freeTextAnnotationModule.isNewFreeTextAnnot=true;this.freeTextAnnotationModule.isNewAddedAnnot=true;}else if(type==='HandWrittenSignature'){this.pdfViewerBase.signatureModule.setAnnotationMode();}else if(type==='Initial'){this.pdfViewerBase.signatureModule.setInitialMode();}else if(type==='Ink'){this.inkAnnotationModule.setAnnotationMode();}else if(type==='StickyNotes'){this.pdfViewerBase.isCommentIconAdded=true;this.pdfViewerBase.isAddComment=true;// eslint-disable-next-line max-len
var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+(this.pdfViewerBase.currentPageNumber-1));if(pageDiv){pageDiv.addEventListener('mousedown',this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this));}}else if(type==='Stamp'){this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;this.pdfViewerBase.stampAdded=true;if(dynamicStampItem){// eslint-disable-next-line
var stampName=DynamicStampItem[dynamicStampItem];this.pdfViewerBase.isDynamicStamp=true;this.stampAnnotationModule.retrieveDynamicStampAnnotation(stampName);}else if(signStampItem){// eslint-disable-next-line
var stampName=SignStampItem[signStampItem];this.pdfViewerBase.isDynamicStamp=false;this.stampAnnotationModule.retrievestampAnnotation(stampName);}else if(standardBusinessStampItem){// eslint-disable-next-line
var stampName=StandardBusinessStampItem[standardBusinessStampItem];this.pdfViewerBase.isDynamicStamp=false;this.stampAnnotationModule.retrievestampAnnotation(stampName);}}this.pdfViewer.enableServerDataBinding(allowServerDataBind,true);this.pdfViewerBase.initiateTextSelection();};Annotation.prototype.deleteAnnotationById=function(annotationId){if(annotationId){this.annotationSelected=false;if(annotationId&&this.pdfViewer.annotations&&this.pdfViewer.annotations.length>0&&this.pdfViewer.annotations[0].annotName){if(annotationId!==this.pdfViewer.annotations[0].annotName){this.selectAnnotation(annotationId);}}this.deleteAnnotation();}};Annotation.prototype.clearAnnotationMode=function(){if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;}if(this.freeTextAnnotationModule){this.freeTextAnnotationModule.isNewFreeTextAnnot=false;this.freeTextAnnotationModule.isNewAddedAnnot=false;}if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode='';}if(this.pdfViewerBase.isShapeAnnotationModule()){this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode='';}if(this.pdfViewerBase.isCalibrateAnnotationModule()){this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode='';}if(this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};Annotation.prototype.deleteAnnotation=function(iskeyboardClickEvent){if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.deleteTextMarkupAnnotation();}var selectedAnnotation=this.pdfViewer.selectedItems.annotations[0];this.isDeleteKeyboardClick=iskeyboardClickEvent;if(selectedAnnotation){var data=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_formfields');var formFieldsData=JSON.parse(data);var newFormFieldsData=[];if(formFieldsData){for(var x=0;x<formFieldsData.length;x++){if(formFieldsData[x].uniqueID==selectedAnnotation.id){formFieldsData[x].Value='';}newFormFieldsData.push(formFieldsData[x]);}window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_formfields',JSON.stringify(newFormFieldsData));}}var isLock=false;var isReadOnly=false;if(this.pdfViewer.selectedItems.annotations.length>0){// eslint-disable-next-line
var annotation_1=this.pdfViewer.selectedItems.annotations[0];var type=annotation_1.shapeAnnotationType;if(type==='Path'||annotation_1.formFieldAnnotationType==='SignatureField'||annotation_1.formFieldAnnotationType==='InitialField'||type==='HandWrittenSignature'||type==='SignatureText'||type==='SignatureImage'){var inputFields=document.getElementById(annotation_1.id);if(inputFields&&inputFields.disabled){isReadOnly=true;}}if(annotation_1.annotationSettings){isLock=annotation_1.annotationSettings.isLock;if(isLock&&this.checkAllowedInteractions('Delete',annotation_1)){isLock=false;}}if(!isLock&&!isReadOnly){var pageNumber=annotation_1.pageIndex;// eslint-disable-next-line
var shapeType=annotation_1.shapeAnnotationType;// eslint-disable-next-line
var undoElement=void 0;if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){// eslint-disable-next-line max-len
if(sf.base.isNullOrUndefined(annotation_1.measureType)||annotation_1.measureType===''){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1,'shape');this.updateImportAnnotationCollection(annotation_1,pageNumber,'shapeAnnotation');}else{// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1,'measure');// eslint-disable-next-line max-len
this.updateImportAnnotationCollection(annotation_1,pageNumber,'measureShapeAnnotation');}undoElement=this.modifyInCollections(annotation_1,'delete');}else if(shapeType==='FreeText'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1,'FreeText','delete');undoElement=this.modifyInCollections(annotation_1,'delete');this.updateImportAnnotationCollection(annotation_1,pageNumber,'freeTextAnnotation');}else if(shapeType==='HandWrittenSignature'||shapeType==='SignatureImage'||shapeType==='SignatureText'){undoElement=this.modifyInCollections(annotation_1,'delete');}else if(shapeType==='Ink'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(annotation_1,'Ink','delete');undoElement=this.modifyInCollections(annotation_1,'delete');this.updateImportAnnotationCollection(annotation_1,pageNumber,'signatureInkAnnotation');}else{undoElement=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(undoElement,undoElement.shapeAnnotationType,'delete');// eslint-disable-next-line max-len
this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(annotation_1,null,'delete');}if(shapeType==='StickyNotes'){this.updateImportAnnotationCollection(annotation_1,pageNumber,'stickyNotesAnnotation');}if(shapeType==='Stamp'||'Image'){this.updateImportAnnotationCollection(annotation_1,pageNumber,'stampAnnotations');}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageNumber,null,annotation_1,'Delete','',undoElement,annotation_1);// eslint-disable-next-line
var removeDiv=void 0;if(annotation_1.annotName!==''){removeDiv=document.getElementById(annotation_1.annotName);}else{if(undoElement){if(undoElement.annotName!==''){removeDiv=document.getElementById(undoElement.annotName);}}}if(removeDiv){this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',annotation_1.annotName,pageNumber);}var selectedAnnot=this.pdfViewer.selectedItems.annotations[0];var annotationId=selectedAnnot.annotName;var annotType=this.getAnnotationType(selectedAnnot.shapeAnnotationType,selectedAnnot.measureType);if(shapeType==='Path'||selectedAnnot.formFieldAnnotationType==='SignatureField'||selectedAnnot.formFieldAnnotationType==='InitialField'||shapeType==='HandWrittenSignature'||shapeType==='SignatureText'||shapeType==='SignatureImage'){// eslint-disable-next-line
var inputFields=document.getElementById(selectedAnnot.id);var signatureFieldElement=document.getElementById(selectedAnnot.id+"_html_element");if(inputFields===null&&!sf.base.isNullOrUndefined(signatureFieldElement)){inputFields=signatureFieldElement.children[0].children[0];}if(inputFields&&inputFields.classList.contains('e-pdfviewer-signatureformfields-signature')){inputFields.className='e-pdfviewer-signatureformfields';inputFields.style.pointerEvents='';inputFields.parentElement.style.pointerEvents='';this.pdfViewer.formFieldsModule.updateDataInSession(inputFields,'');}// eslint-disable-next-line
var formFieldCollection=this.pdfViewer.retrieveFormFields();for(var m=0;m<formFieldCollection.length;m++){if(selectedAnnot.id===formFieldCollection[m].id){formFieldCollection[m].value='';formFieldCollection[m].signatureType='';}}}this.updateAnnotationCollection(annotation_1);var formFieldObj=this.pdfViewer.nameTable[annotation_1.id.split("_")[0]];if(formFieldObj!=null&&(formFieldObj.formFieldAnnotationType==='SignatureField'||formFieldObj.formFieldAnnotationType==='InitialField'||formFieldObj.annotName==='SignatureField'||formFieldObj.annotName==='InitialField')){formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(annotation_1.wrapper.children[0]),1);var index=this.pdfViewer.formFieldCollections.findIndex(function(el){return el.id===annotation_1.id;});var formFieldName=void 0;if(index>-1){formFieldName=this.pdfViewer.formFieldCollections[index].name;}var data=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_formfields');var formFieldsData=JSON.parse(data);var newFormFieldsData=[];for(var i=0;i<this.pdfViewer.formFieldCollections.length;i++){if(formFieldName===this.pdfViewer.formFieldCollections[i].name&&formFieldName===formFieldsData[i].FieldName){var formFieldsIndex=this.pdfViewer.formFieldCollections[i];this.pdfViewer.fireFormFieldPropertiesChangeEvent("formFieldPropertiesChange",formFieldsIndex,formFieldsIndex.pageIndex,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,formFieldsIndex.value,"");formFieldsData[i].Value="";var annotation_2=this.getAnnotationsFromCollections(formFieldsIndex.id);undoElement=this.modifyInCollections(annotation_2,'delete');// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(annotation_2.pageIndex,null,annotation_2,'Delete','',undoElement,annotation_2);this.updateInputFieldDivElement(annotation_2);var formFieldObject=this.pdfViewer.nameTable[annotation_2.id];formFieldObject.wrapper.children.splice(formFieldObject.wrapper.children.indexOf(annotation_2.wrapper.children[0]),1);this.pdfViewer.remove(annotation_2);}newFormFieldsData.push(formFieldsData[i]);}window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_formfields',JSON.stringify(newFormFieldsData));}this.pdfViewer.remove(annotation_1);this.pdfViewer.renderDrawing();this.pdfViewer.clearSelection(pageNumber);this.pdfViewerBase.updateDocumentEditedProperty(true);this.pdfViewerBase.fireDocumentEditedEvent("AnnotationDeleted");this.pdfViewerBase.tool=null;this.pdfViewer.tool=null;if(selectedAnnot.shapeAnnotationType==='Path'||selectedAnnot.shapeAnnotationType==='HandWrittenSignature'||selectedAnnot.shapeAnnotationType==='SignatureText'||selectedAnnot.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
var bounds={left:selectedAnnot.bounds.x,top:selectedAnnot.bounds.y,width:selectedAnnot.bounds.width,height:selectedAnnot.bounds.height};// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureRemove(pageNumber,selectedAnnot.signatureName,selectedAnnot.shapeAnnotationType,bounds);}else if(this.pdfViewer.annotationModule){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationRemove(pageNumber,annotationId,annotType,selectedAnnot.bounds);}if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.enableTextSelectionMode();}}}this.updateToolbar(true);if(this.pdfViewer.toolbarModule){if(this.pdfViewer.toolbarModule.annotationToolbarModule&&!isLock){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(false,true);this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(false);}}};/**
     * @param annotationId
     */ // eslint-disable-next-line max-len
Annotation.prototype.getAnnotationsFromCollections=function(annotationId){var collections=this.pdfViewer.annotations;if(collections&&annotationId){for(var i=0;i<collections.length;i++){if(collections[i].id===annotationId){return collections[i];}}}};/**
     * @param annotation
     */Annotation.prototype.updateInputFieldDivElement=function(annotation){var inputFields=document.getElementById(annotation.id);var signatureFieldElement=document.getElementById(annotation.id+"_html_element");if(inputFields===null&&!sf.base.isNullOrUndefined(signatureFieldElement)){inputFields=signatureFieldElement.children[0].children[0];}if(inputFields&&inputFields.classList.contains('e-pdfviewer-signatureformfields-signature')||inputFields.classList.contains('e-pdfviewer-signatureformfields')){inputFields.className='e-pdfviewer-signatureformfields';inputFields.style.pointerEvents='';inputFields.parentElement.style.pointerEvents='';this.pdfViewer.formFieldsModule.updateDataInSession(inputFields,'');}};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.storeAnnotationCollections=function(annotation,pageNumber){if(this.isFormFieldShape){var collectionDetails=this.checkFormDesignCollection(annotation);var selectAnnotation=cloneObject(annotation);selectAnnotation.formFieldId=annotation.annotName;selectAnnotation.pageNumber=pageNumber;delete selectAnnotation.annotName;if(annotation.id){selectAnnotation.uniqueKey=annotation.id;delete selectAnnotation.id;}if(collectionDetails.isExisting){this.pdfViewer.formFieldCollection.splice(collectionDetails.position,0,selectAnnotation);}else{this.pdfViewer.formFieldCollection.push(selectAnnotation);}}else{// eslint-disable-next-line
var collectionDetails=this.checkAnnotationCollection(annotation);// eslint-disable-next-line
var selectAnnotation=cloneObject(annotation);selectAnnotation.annotationId=annotation.annotName;selectAnnotation.pageNumber=pageNumber;delete selectAnnotation.annotName;if(annotation.shapeAnnotationType==='stamp'){selectAnnotation.uniqueKey=annotation.randomId;delete selectAnnotation.randomId;}if(annotation.shapeAnnotationType==='sticky'||annotation.shapeAnnotationType==='StickyNotes'){selectAnnotation.uniqueKey=annotation.annotName;}if(annotation.id){selectAnnotation.uniqueKey=annotation.id;delete selectAnnotation.id;}// eslint-disable-next-line
if(selectAnnotation.customData&&annotation.customData&&JSON.stringify(selectAnnotation.customData)!==JSON.stringify(annotation.customData)){selectAnnotation.customData=annotation.customData;}if(collectionDetails.isExisting){this.pdfViewer.annotationCollection.splice(collectionDetails.position,0,selectAnnotation);}else{this.pdfViewer.annotationCollection.push(selectAnnotation);}}};Annotation.prototype.checkFormDesignCollection=function(annotation){// eslint-disable-next-line
var collections=this.pdfViewer.formFieldCollection;if(collections&&annotation){for(var i=0;i<collections.length;i++){if(collections[i].formFieldId===annotation.annotName){this.pdfViewer.formFieldCollection.splice(i,1);return{isExisting:true,position:i};}}}return{isExisting:false,position:null};};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getCustomData=function(annotation){var customData;if(annotation.ExistingCustomData&&!annotation.CustomData){customData=JSON.parse(annotation.ExistingCustomData);}else if(annotation.CustomData===null){if(annotation.shapeAnnotationType==='sticky'){customData=this.pdfViewer.stickyNotesSettings.customData;}if(annotation.shapeAnnotationType==='Stamp'){customData=this.pdfViewer.stampSettings.customData;}if(annotation.shapeAnnotationType==='FreeText'){customData=this.pdfViewer.freeTextSettings.customData;}if(annotation.id==='shape'){customData=this.getShapeData(annotation.ShapeAnnotationType,annotation.subject);}if(annotation.id==='measure'){customData=this.getMeasureData(annotation.Subject);}if(annotation.shapeAnnotationType==='textMarkup'){customData=this.getTextMarkupData(annotation.subject);}if(annotation.shapeAnnotationType==='Ink'){customData=this.pdfViewer.inkAnnotationSettings.customData;}}else{customData=annotation.CustomData;}return customData;};/**
     * @param type
     * @param subject
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getShapeData=function(type,subject){var customData;if(type==='Line'&&subject!=='Arrow'&&this.pdfViewer.lineSettings.customData){customData=this.pdfViewer.lineSettings.customData;}else if((type==='LineWidthArrowHead'||subject==='Arrow')&&this.pdfViewer.arrowSettings.customData){customData=this.pdfViewer.arrowSettings.customData;}else if((type==='Rectangle'||type==='Square')&&this.pdfViewer.rectangleSettings.customData){customData=this.pdfViewer.rectangleSettings.customData;}else if((type==='Ellipse'||type==='Circle')&&this.pdfViewer.circleSettings.customData){customData=this.pdfViewer.circleSettings.customData;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.customData){customData=this.pdfViewer.polygonSettings.customData;}else if(this.pdfViewer.annotationSettings.customData){customData=this.pdfViewer.annotationSettings.customData;}return customData;};/**
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getMeasureData=function(type){var customData;if((type==='Distance'||type==='Distance calculation')&&this.pdfViewer.distanceSettings.customData){customData=this.pdfViewer.distanceSettings.customData;}else if((type==='Line'||type==='Perimeter calculation')&&this.pdfViewer.lineSettings.customData){customData=this.pdfViewer.lineSettings.customData;// eslint-disable-next-line max-len
}else if((type==='Polygon'||type==='Area calculation'||type==='Volume calculation')&&this.pdfViewer.polygonSettings.customData){customData=this.pdfViewer.polygonSettings.customData;}else if((type==='Radius'||type==='Radius calculation')&&this.pdfViewer.radiusSettings.customData){customData=this.pdfViewer.radiusSettings.customData;}else if(this.pdfViewer.annotationSettings.customData){customData=this.pdfViewer.annotationSettings.customData;}return customData;};/**
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getTextMarkupData=function(type){var customData;if(type==='Highlight'&&this.pdfViewer.highlightSettings.customData){customData=this.pdfViewer.highlightSettings.customData;}else if(type==='Underline'&&this.pdfViewer.underlineSettings.customData){customData=this.pdfViewer.underlineSettings.customData;}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.customData){customData=this.pdfViewer.strikethroughSettings.customData;}else if(this.pdfViewer.annotationSettings.customData){customData=this.pdfViewer.annotationSettings.customData;}return customData;};/**
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getData=function(type){var customData;if(type==='FreeText'&&this.pdfViewer.freeTextSettings.customData){customData=this.pdfViewer.freeTextSettings.customData;}else if((type==='image'||type==='Stamp')&&this.pdfViewer.stampSettings.customData){customData=this.pdfViewer.stampSettings.customData;}else if(type==='sticky'&&this.pdfViewer.stickyNotesSettings.customData){customData=this.pdfViewer.stickyNotesSettings.customData;}else if(this.pdfViewer.annotationSettings.customData){customData=this.pdfViewer.annotationSettings.customData;}return customData;};/**
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.clearAnnotationStorage=function(){// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);var maxSessionSize=4500;if(sessionSize>maxSessionSize){var storageLength=window.sessionStorage.length;// eslint-disable-next-line
var annotationList=[];for(var i=0;i<storageLength;i++){if(window.sessionStorage.key(i)&&window.sessionStorage.key(i).split('_')[3]){if(window.sessionStorage.key(i).split('_')[3]==='annotations'){// eslint-disable-next-line max-len
this.pdfViewerBase.annotationStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i));annotationList.push(window.sessionStorage.key(i));}}}if(annotationList){for(var i=0;i<annotationList.length;i++){window.sessionStorage.removeItem(annotationList[i]);}}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.checkAnnotationCollection=function(annotation){// eslint-disable-next-line
var collections=this.pdfViewer.annotationCollection;if(collections&&annotation){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===annotation.annotName){this.pdfViewer.annotationCollection.splice(i,1);return{isExisting:true,position:i};}}}return{isExisting:false,position:null};};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateAnnotationCollection=function(annotation){// eslint-disable-next-line
var collections=this.pdfViewer.annotationCollection;if(collections&&annotation){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===annotation.annotName){this.removedAnnotationCollection.push(collections[i]);this.pdfViewer.annotationCollection.splice(i,1);break;}}}};/**
     * @param annotation
     * @param pageNumber
     * @param annotationType
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateImportAnnotationCollection=function(annotation,pageNumber,annotationType){if(this.pdfViewerBase.isImportAction){if(this.pdfViewerBase.importedAnnotation&&this.pdfViewerBase.importedAnnotation[pageNumber]){// eslint-disable-next-line
var currentPageAnnotations=this.pdfViewerBase.importedAnnotation[pageNumber];if(currentPageAnnotations[annotationType]){for(var i=0;i<currentPageAnnotations[annotationType].length;i++){// eslint-disable-next-line max-len
if(annotation.annotName===currentPageAnnotations[annotationType][i].AnnotName||annotation.annotName===currentPageAnnotations[annotationType][i].annotName){this.pdfViewerBase.importedAnnotation[pageNumber][annotationType].splice(i,1);break;}}}}}// eslint-disable-next-line
var documentcollections=this.pdfViewerBase.documentAnnotationCollections;if(documentcollections&&documentcollections[pageNumber]){// eslint-disable-next-line
var documentPageCollections=documentcollections[pageNumber];if(documentPageCollections&&documentPageCollections[annotationType]){for(var i=0;i<documentPageCollections[annotationType].length;i++){// eslint-disable-next-line max-len
if(annotation.annotName===documentPageCollections[annotationType][i].AnnotName){this.pdfViewerBase.documentAnnotationCollections[pageNumber][annotationType].splice(i,1);break;}}}}};/**
     * Select the annotations using annotation object or annotation Id.
     *
     * @param annotationId
     * @returns void
     */Annotation.prototype.selectAnnotation=function(annotationId,isTrusted){// eslint-disable-next-line
var annotation;var id;if(_typeof(annotationId)==='object'){annotation=annotationId;id=annotation.annotationId;annotation=this.getAnnotationsFromAnnotationCollections(id);}if(typeof annotationId==='string'){annotation=this.getAnnotationsFromAnnotationCollections(annotationId);id=annotationId;}if(annotation){var pageIndex=annotation.pageNumber;var isRender=false;isRender=this.findRenderPageList(pageIndex);var currentSelector=this.pdfViewer.annotationSelectorSettings;//let pageIndex: number = this.getPageNumberFromAnnotationCollections(annotation);
if(annotation&&pageIndex>=0){if(annotation.shapeAnnotationType==='textMarkup'){if(annotation.rect||annotation.bounds){// eslint-disable-next-line max-len
var scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor()+this.getAnnotationTop(annotation)*this.pdfViewerBase.getZoomFactor();var scroll_1=(scrollValue-20).toString();// eslint-disable-next-line radix
this.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll_1);this.pdfViewerBase.viewerContainer.scrollLeft=this.getAnnotationLeft(annotation)*this.pdfViewerBase.getZoomFactor();}else{if(this.pdfViewer.navigation){this.pdfViewer.navigation.goToPage(pageIndex+1);}}}else{if(annotation.bounds){// eslint-disable-next-line max-len
var scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor()+annotation.bounds.top*this.pdfViewerBase.getZoomFactor();var scrollLeft=annotation.bounds.left*this.pdfViewerBase.getZoomFactor();if(annotation.shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor()+annotation.bounds.y*this.pdfViewerBase.getZoomFactor();scrollLeft=annotation.bounds.x*this.pdfViewerBase.getZoomFactor();}// To check whether the annotation was clicked or the comment panel was clicked.
if(isTrusted){var scroll_2=(scrollValue-20).toString();// eslint-disable-next-line radix
this.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll_2);this.pdfViewerBase.viewerContainer.scrollLeft=scrollLeft;}}else{if(this.pdfViewer.navigation){this.pdfViewer.navigation.goToPage(pageIndex+1);}}}if(isRender){if(this.previousIndex){this.pdfViewer.clearSelection(this.previousIndex);}this.pdfViewer.clearSelection(pageIndex);this.previousIndex=pageIndex;if(annotation.shapeAnnotationType==='textMarkup'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex,true);// eslint-disable-next-line max-len
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageIndex);// eslint-disable-next-line
var textMarkupAnnotation=this.getTextMarkupAnnotations(pageIndex,annotation);if(textMarkupAnnotation){this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null;this.textMarkupAnnotationModule.isSelectedAnnotation=true;this.textMarkupAnnotationModule.showHideDropletDiv(true);this.textMarkupAnnotationModule.annotationClickPosition=null;this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation,canvas,pageIndex,null,true);this.textMarkupAnnotationModule.currentTextMarkupAnnotation=textMarkupAnnotation;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=pageIndex;this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);this.textMarkupAnnotationModule.isSelectedAnnotation=false;if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=true;// eslint-disable-next-line max-len
//this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);
}}}else if(annotation.shapeAnnotationType==='stamp'||annotation.ShapeAnnotationType==='stamp'){this.pdfViewer.select([annotation.uniqueKey],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(annotation.shapeAnnotationType==='sticky'||annotation.ShapeAnnotationType==='sticky'){this.pdfViewer.select([annotation.annotationId],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else{this.pdfViewer.select([annotation.uniqueKey],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}// eslint-disable-next-line max-len
var commentElement=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentElement&&commentElement.style.display==='block'){// eslint-disable-next-line
var commentsDiv=document.getElementById(id);if(commentsDiv){if(!commentsDiv.classList.contains('e-pv-comments-border')){if(commentsDiv.firstChildElement){commentsDiv.firstChildElement.click();}}}}}else{this.selectAnnotationId=id;this.isAnnotationSelected=true;this.annotationPageIndex=pageIndex;}}}};/**
     * @private
     */Annotation.prototype.showCommentsPanelInBlazor=function(){if(this.pdfViewer.enableCommentPanel){// eslint-disable-next-line
var toolbarheight=0;var annotationtoolbarheight=0;var commentPanel=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentPanel){if(commentPanel.style.display==='none'){if(this.pdfViewer.enableRtl){commentPanel.style.right='';commentPanel.style.left='0px';}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var commentClose=this.pdfViewer.element.getElementsByClassName('e-pv-annotation-tools-close-icon');commentClose[0].classList.remove('e-control');commentClose[0].classList.remove('e-btn');commentClose[0].classList.remove('e-lib');document.getElementById('pdfViewer_commentPanelTitle').style.left='37px';document.getElementById('pdfViewer_commentPanelTitle').style.top='10px';}commentPanel.style.display='block';if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations.length>0||this.textMarkupAnnotationModule.currentTextMarkupAnnotation){var selectedAnnotation=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0]:this.textMarkupAnnotationModule.currentTextMarkupAnnotation;var pageIndex=selectedAnnotation.pageIndex!=undefined?selectedAnnotation.pageIndex:selectedAnnotation.pageNumber;for(var i=0;i<this.pdfViewer.pageCount;i++){var commentAccordion=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+(i+1));if(commentAccordion){var accordionFirstChild=commentAccordion.children[0];var isAccordionExpanded=accordionFirstChild.ariaExpanded==='true';var comment=accordionFirstChild.children[1].firstElementChild;if(comment&&!(i===pageIndex&&isAccordionExpanded)&&(i!==pageIndex&&isAccordionExpanded||i===pageIndex)){comment.click();}}}var comments=document.getElementById(selectedAnnotation.annotName);if(comments){if(comments.firstElementChild){comments.firstElementChild.click();}}}else{if(this.pdfViewer.annotationCollection.length>0){for(var i=0;i<this.pdfViewer.pageCount;i++){var commentAccordion=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+(i+1));var accordionComment=commentAccordion.children[0];if(accordionComment.children[1].firstElementChild&&accordionComment.ariaExpanded=='true'){accordionComment.children[1].firstElementChild.click();}}}}this.pdfViewerBase.mobileScrollerContainer.style.display='none';}var annotationToolbar=this.pdfViewer.element.getElementsByClassName("e-pv-annotation-toolbar");annotationToolbar=sf.base.isNullOrUndefined(annotationToolbar)?annotationToolbar:annotationToolbar[0];if(this.pdfViewer.enableAnnotationToolbar&&(sf.base.isNullOrUndefined(annotationToolbar)||annotationToolbar&&annotationToolbar.clientHeight==0)){this.pdfViewer._dotnetInstance.invokeMethodAsync('ShowAnnotationToolbar',null);}// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.commentPanelResizer=document.getElementById(this.pdfViewer.dataId+'_commentPanelResizer');if(this.pdfViewerBase.navigationPane.commentPanelResizer){if(this.pdfViewer.enableRtl){this.pdfViewerBase.navigationPane.commentPanelResizer.className='e-pv-comment-panel-resizer e-left';}this.pdfViewerBase.navigationPane.commentPanelResizer.style.display='block';}// eslint-disable-next-line
var commentPanelResizeIcon=document.getElementById(this.pdfViewer.dataId+'_resize');if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.toolbarElement){toolbarheight=this.pdfViewer.toolbar.toolbarElement.getBoundingClientRect().height;}if(annotationToolbar){annotationtoolbarheight=annotationToolbar.getBoundingClientRect().height;}commentPanel.style.top=toolbarheight+annotationtoolbarheight+'px';if(commentPanel&&commentPanel.clientHeight&&commentPanelResizeIcon&&commentPanelResizeIcon.style.top===''){commentPanelResizeIcon.style.top=commentPanel.clientHeight/2+'px';}var viewerContainer=document.getElementById(this.pdfViewer.dataId+'_viewerContainer');var pageContainer=document.getElementById(this.pdfViewer.dataId+'_pageViewContainer');if(viewerContainer){if(this.pdfViewer.enableRtl){viewerContainer.style.left=this.pdfViewerBase.navigationPane.getViewerContainerRight()+'px';}else{viewerContainer.style.right=this.pdfViewerBase.navigationPane.getViewerContainerRight()+'px';}// eslint-disable-next-line max-len
viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-this.pdfViewerBase.navigationPane.getViewerContainerRight()+'px';pageContainer.style.width=viewerContainer.offsetWidth-this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()+'px';}this.pdfViewerBase.updateZoomValue();if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){commentPanel.style.height='100%';commentPanel.style.width='100%';commentPanel.style.top='0px';commentPanel.style.left='0px';commentPanel.style.right='0px';}}}}};/**
     * Clear the annotation selection.
     *
     * @returns void
     */Annotation.prototype.clearSelection=function(){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation();this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);}else{if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations[0]){// eslint-disable-next-line
var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];this.pdfViewer.clearSelection(currentAnnotation.pageIndex);}else{this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1);}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getAnnotationTop=function(annotation){if(annotation.bounds){if(annotation.bounds[0].Top){return annotation.bounds[0].Top;}else{return annotation.bounds[0].top;}}else if(annotation.rect){if(annotation.rect.Top){return annotation.rect.Top;}else{return annotation.rect.top;}}return 0;};/**
      * @param annotation
      */ // eslint-disable-next-line
Annotation.prototype.getAnnotationLeft=function(annotation){if(annotation.rect){if(annotation.rect.Left){return annotation.rect.Left;}else{return annotation.rect.left;}}else{if(annotation.bounds[0].Left){return annotation.bounds[0].Left;}else{return annotation.bounds[0].left;}}};/**
     * @private
     */Annotation.prototype.selectAnnotationFromCodeBehind=function(){if(this.isAnnotationSelected&&this.selectAnnotationId){// eslint-disable-next-line
var annotation=this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId);var id=this.selectAnnotationId;var pageIndex=annotation.pageNumber;var currentSelector=this.pdfViewer.annotationSelectorSettings;if(annotation&&this.annotationPageIndex>=0&&this.annotationPageIndex===pageIndex){if(this.previousIndex){this.pdfViewer.clearSelection(this.previousIndex);}this.pdfViewer.clearSelection(pageIndex);this.previousIndex=pageIndex;if(annotation.shapeAnnotationType==='textMarkup'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageIndex,true);// eslint-disable-next-line max-len
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageIndex);// eslint-disable-next-line
var textMarkupAnnotation=this.getTextMarkupAnnotations(pageIndex,annotation);if(textMarkupAnnotation){this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null;this.textMarkupAnnotationModule.isSelectedAnnotation=true;this.textMarkupAnnotationModule.showHideDropletDiv(true);this.textMarkupAnnotationModule.annotationClickPosition=null;this.textMarkupAnnotationModule.selectAnnotation(textMarkupAnnotation,canvas,pageIndex);this.textMarkupAnnotationModule.currentTextMarkupAnnotation=textMarkupAnnotation;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=pageIndex;this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);this.textMarkupAnnotationModule.isSelectedAnnotation=false;if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=true;// eslint-disable-next-line max-len
//this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);
}}}else if(annotation.shapeAnnotationType==='stamp'||annotation.ShapeAnnotationType==='stamp'){this.pdfViewer.select([annotation.uniqueKey],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(annotation.shapeAnnotationType==='sticky'||annotation.ShapeAnnotationType==='sticky'){this.pdfViewer.select([annotation.annotationId],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(annotation.uniqueKey){this.pdfViewer.select([annotation.uniqueKey],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else{this.pdfViewer.select([annotation.annotationId],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}// eslint-disable-next-line max-len
var commentElement=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentElement&&commentElement.style.display==='block'){// eslint-disable-next-line
var commentsDiv=document.getElementById(id);if(commentsDiv){if(!commentsDiv.classList.contains('e-pv-comments-border')){if(commentsDiv.firstElementChild){commentsDiv.firstElementChild.click();}}}}}this.isAnnotationSelected=false;this.selectAnnotationId=null;this.annotationPageIndex=null;}};/**
     * @param pageIndex
     * @private
     */Annotation.prototype.findRenderPageList=function(pageIndex){var isRender=false;// eslint-disable-next-line
var pageList=this.pdfViewerBase.renderedPagesList;if(pageList){for(var i=0;i<pageList.length;i++){if(pageList[i]===pageIndex){isRender=true;return isRender;}}}return isRender;};// eslint-disable-next-line
Annotation.prototype.getPageNumberFromAnnotationCollections=function(annotation){// eslint-disable-next-line
var collections=this.pdfViewer.annotations;if(annotation){if(annotation.shapeAnnotationType==='textMarkup'){return annotation.pageNumber;}else{if(collections){for(var i=0;i<collections.length;i++){if(collections[i].annotName===annotation.annotationId){return collections[i].pageIndex;}}}}}};// eslint-disable-next-line
Annotation.prototype.getAnnotationsFromAnnotationCollections=function(annotationId){// eslint-disable-next-line
var collections=this.pdfViewer.annotationCollection;if(collections&&annotationId){for(var i=0;i<collections.length;i++){if(collections[i].annotationId===annotationId){return collections[i];}}}if(this.pdfViewer.selectedItems.annotations.length===0)this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[annotationId]);};// eslint-disable-next-line
Annotation.prototype.getTextMarkupAnnotations=function(pageIndex,annotation){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_textMarkup'];}if(storeObject){// eslint-disable-next-line
var annotObject=JSON.parse(storeObject);var index=this.getPageCollection(annotObject,pageIndex);if(annotObject[index]){for(var i=0;i<annotObject[index].annotations.length;i++){if(annotObject[index].annotations[i].annotName===annotation.annotationId){return annotObject[index].annotations[i];}}return null;}}else{return null;}};/**
     * @param type
     * @param measureType
     * @param type
     * @param measureType
     * @private
     */Annotation.prototype.getAnnotationType=function(type,measureType){var annotType;if(measureType===''||sf.base.isNullOrUndefined(measureType)){switch(type){case'Line':annotType='Line';break;case'LineWidthArrowHead':annotType='Arrow';break;case'Rectangle':annotType='Rectangle';break;case'Ellipse':annotType='Circle';break;case'Polygon':annotType='Polygon';break;case'Stamp':annotType='Stamp';break;case'Image':annotType='Image';break;case'FreeText':annotType='FreeText';break;case'Ink':annotType='Ink';break;case'StickyNotes':annotType='StickyNotes';break;}}else{switch(measureType){case'Distance':annotType='Distance';break;case'Perimeter':annotType='Perimeter';break;case'Area':annotType='Area';break;case'Radius':annotType='Radius';break;case'Volume':annotType='Volume';break;}}return annotType;};/**
     * @param pageNumber
     * @param annotationId
     * @private
     */Annotation.prototype.getAnnotationIndex=function(pageNumber,annotationId){var pageAnnotationBases=this.pdfViewer.drawing.getPageObjects(pageNumber);var index=null;for(var i=0;i<pageAnnotationBases.length;i++){if(pageAnnotationBases[i].id===annotationId){index=i;break;}}return index;};/**
     * @private
     */Annotation.prototype.initializeCollection=function(){this.actionCollection=[];this.redoCollection=[];this.pdfViewerBase.customStampCollection=[];if(!this.popupNote){this.createNote();}};/**
     * @param pageNumber
     * @param index
     * @param annotation
     * @param actionString
     * @param property
     * @param node
     * @param redo
     * @param pageNumber
     * @param index
     * @param annotation
     * @param actionString
     * @param property
     * @param node
     * @param redo
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.addAction=function(// eslint-disable-next-line
pageNumber,index,annotation,actionString,property,node,redo){var action={pageIndex:pageNumber,index:index,annotation:annotation,action:actionString,modifiedProperty:property,undoElement:node,redoElement:redo};this.actionCollection.push(action);this.updateToolbar();};/**
     * @private
     */Annotation.prototype.undo=function(){this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");var actionObject=this.actionCollection.pop();var annotationObject=this.pdfViewer.nameTable[actionObject.annotation.id];if(actionObject){// eslint-disable-next-line
var shapeType=actionObject.annotation.shapeAnnotationType;this.isUndoRedoAction=true;this.isUndoAction=true;switch(actionObject.action){case'Text Markup Added':case'Text Markup Deleted':if(this.textMarkupAnnotationModule){// eslint-disable-next-line max-len
this.textMarkupAnnotationModule.undoTextMarkupAction(actionObject.annotation,actionObject.pageIndex,actionObject.index,actionObject.action);}break;case'Text Markup Property modified':if(this.textMarkupAnnotationModule){// eslint-disable-next-line max-len
actionObject.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation,actionObject.pageIndex,actionObject.index,actionObject.modifiedProperty,true);}break;case'Drag':case'Resize':if(isLineShapes(actionObject.annotation)){// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(actionObject.annotation,{bounds:actionObject.undoElement.bounds,vertexPoints:actionObject.undoElement.vertexPoints,leaderHeight:actionObject.undoElement.leaderHeight});}else{this.pdfViewer.nodePropertyChange(actionObject.annotation,{bounds:actionObject.undoElement.bounds});}// eslint-disable-next-line max-len
if(actionObject.annotation.measureType==='Distance'||actionObject.annotation.measureType==='Perimeter'||actionObject.annotation.measureType==='Area'||actionObject.annotation.measureType==='Radius'||actionObject.annotation.measureType==='Volume'){this.pdfViewer.nodePropertyChange(actionObject.annotation,{notes:actionObject.undoElement.notes});this.updateCalibrateValues(actionObject.annotation);}this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.pdfViewer.select([actionObject.annotation.id]);// eslint-disable-next-line max-len
if(actionObject.annotation.shapeAnnotationType==='Line'||actionObject.annotation.shapeAnnotationType==='Rectangle'||actionObject.annotation.shapeAnnotationType==='Ellipse'||actionObject.annotation.shapeAnnotationType==='Polygon'||actionObject.annotation.shapeAnnotationType==='LineWidthArrowHead'||actionObject.annotation.shapeAnnotationType==='Radius'||actionObject.annotation.shapeAnnotationType==='FreeText'||actionObject.annotation.shapeAnnotationType==='HandWrittenSignature'||actionObject.annotation.shapeAnnotationType==='SignatureText'||actionObject.annotation.shapeAnnotationType==='SignatureImage'||actionObject.annotation.shapeAnnotationType==='Ink'){this.modifyInCollections(actionObject.annotation,'bounds');}break;case'Addition':var isAnnotationUpdate=false;// eslint-disable-next-line max-len
if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){if(actionObject.annotation.measureType===''||sf.base.isNullOrUndefined(actionObject.annotation.measureType)){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,'shape');}else{this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,'measure');}isAnnotationUpdate=true;// eslint-disable-next-line
var annotationObject_1=actionObject.annotation;// eslint-disable-next-line
var wrapper=annotationObject_1.wrapper?annotationObject_1.wrapper:null;if(wrapper&&wrapper.bounds){actionObject.annotation.bounds=wrapper.bounds;}actionObject.duplicate=this.modifyInCollections(actionObject.annotation,'delete');}if(shapeType==='Stamp'||shapeType==='Image'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,actionObject.annotation.shapeAnnotationType,'delete');// eslint-disable-next-line max-len
this.stampAnnotationModule.updateSessionStorage(actionObject.annotation,null,'delete');isAnnotationUpdate=true;}if(shapeType==='FreeText'||shapeType==='HandWrittenSignature'||shapeType==='SignatureImage'||shapeType==='SignatureText'||shapeType==='Ink'){isAnnotationUpdate=true;// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,actionObject.annotation.shapeAnnotationType,'delete');actionObject.duplicate=this.modifyInCollections(actionObject.annotation,'delete');}if(!isAnnotationUpdate){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,actionObject.annotation.shapeAnnotationType,'delete');}this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.pdfViewer.remove(actionObject.annotation);this.pdfViewer.renderDrawing(null,actionObject.annotation.pageIndex);// eslint-disable-next-line
var removeDiv=document.getElementById(actionObject.annotation.annotName);if(removeDiv){this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',actionObject.annotation.annotName,actionObject.annotation.pageIndex);}this.pdfViewer.annotation.undoCommentsElement.pop();break;case'Delete':// eslint-disable-next-line max-len
if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){if(actionObject.annotation.measureType===''||sf.base.isNullOrUndefined(actionObject.annotation.measureType)){shapeType='shape';this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}else{shapeType='shape_measure';this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}}if(shapeType==='Stamp'||shapeType==='Image'){this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex,actionObject.annotation);}else if(shapeType==='FreeText'){this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}else if(shapeType==='Ink'){this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}else if(shapeType==='StickyNotes'){this.stickyNotesAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.undoElement);}var addedAnnot=this.pdfViewer.add(actionObject.annotation);if((shapeType==='FreeText'||addedAnnot.enableShapeLabel)&&addedAnnot){this.pdfViewer.nodePropertyChange(addedAnnot,{});}var formFieldObj=this.pdfViewer.nameTable[actionObject.annotation.id.split("_")[0]];if(formFieldObj!=null&&(formFieldObj.formFieldAnnotationType==='SignatureField'||formFieldObj.formFieldAnnotationType==='InitialField')){formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[0]);if(actionObject.annotation.shapeAnnotationType==="SignatureText")formFieldObj.wrapper.children.push(actionObject.annotation.wrapper.children[1]);}this.pdfViewer.renderDrawing(null,actionObject.annotation.pageIndex);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex,shapeType);break;case'stampOpacity':this.pdfViewer.nodePropertyChange(actionObject.annotation,{opacity:actionObject.undoElement.opacity});this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation,null,true);actionObject.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case'Shape Stroke':this.pdfViewer.nodePropertyChange(actionObject.annotation,{strokeColor:actionObject.undoElement.strokeColor});this.modifyInCollections(actionObject.annotation,'stroke');this.pdfViewer.renderDrawing();break;case'Shape Fill':this.pdfViewer.nodePropertyChange(actionObject.annotation,{fillColor:actionObject.undoElement.fillColor});this.modifyInCollections(actionObject.annotation,'fill');this.pdfViewer.renderDrawing();break;case'Shape Opacity':this.pdfViewer.nodePropertyChange(actionObject.annotation,{opacity:actionObject.undoElement.opacity});if(actionObject.annotation.shapeAnnotationType==='StickyNotes'){this.stickyNotesAnnotationModule.updateOpacityValue(actionObject.annotation);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation,null,true);actionObject.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}else{this.modifyInCollections(actionObject.annotation,'opacity');}this.pdfViewer.renderDrawing();break;case'Shape Thickness':this.pdfViewer.nodePropertyChange(actionObject.annotation,{thickness:actionObject.undoElement.thickness});this.modifyInCollections(actionObject.annotation,'thickness');this.pdfViewer.renderDrawing();break;case'Line properties change':this.pdfViewer.nodePropertyChange(actionObject.annotation,{// eslint-disable-next-line max-len
fillColor:actionObject.undoElement.fillColor,borderDashArray:actionObject.undoElement.borderDashArray,borderStyle:actionObject.undoElement.borderStyle,// eslint-disable-next-line max-len
strokeColor:actionObject.undoElement.strokeColor,opacity:actionObject.undoElement.opacity,thickness:actionObject.undoElement.thickness,sourceDecoraterShapes:this.getArrowType(actionObject.undoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(actionObject.undoElement.lineHeadEnd)});this.updateCollectionForLineProperty(actionObject.annotation);this.pdfViewer.renderDrawing();break;case'Text Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation,null,true);actionObject.annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();break;case'Comments Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);break;case'Status Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);break;case'Comments Reply Deleted':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);break;case'dynamicText Change':this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=true;annotationObject.dynamicText=actionObject.undoElement.dynamicText;if(this.pdfViewer.selectedItems.annotations[0]){this.pdfViewer.selectedItems.annotations[0].dynamicText=actionObject.undoElement.dynamicText;}// eslint-disable-next-line
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(annotationObject,actionObject.action,actionObject.undoElement);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationObject,null,true);this.modifyInCollections(annotationObject,'dynamicText');if(this.pdfViewer.selectedItems.annotations[0]){this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{});}else{this.pdfViewer.nodePropertyChange(annotationObject,{});}this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=false;this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);break;case'fontColor':this.pdfViewer.nodePropertyChange(actionObject.annotation,{fontColor:actionObject.undoElement.fontColor});this.modifyInCollections(actionObject.annotation,'fontColor');this.pdfViewer.renderDrawing();break;case'fontSize':this.pdfViewer.nodePropertyChange(actionObject.annotation,{fontSize:actionObject.undoElement.fontSize});this.modifyInCollections(actionObject.annotation,'fontSize');this.pdfViewer.renderDrawing();break;case'fontFamily':this.pdfViewer.nodePropertyChange(actionObject.annotation,{fontFamily:actionObject.undoElement.fontFamily});this.modifyInCollections(actionObject.annotation,'fontFamily');this.pdfViewer.renderDrawing();break;case'textAlign':this.pdfViewer.nodePropertyChange(actionObject.annotation,{textAlign:actionObject.undoElement.textAlign});this.modifyInCollections(actionObject.annotation,'textAlign');this.pdfViewer.renderDrawing();break;case'textPropertiesChange':this.pdfViewer.nodePropertyChange(actionObject.annotation,{font:actionObject.undoElement.font});this.modifyInCollections(actionObject.annotation,'textPropertiesChange');this.pdfViewer.renderDrawing();break;case'Rotate':// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(actionObject.annotation.annotations[0],{bounds:actionObject.undoElement.bounds,rotateAngle:actionObject.undoElement.rotateAngle});this.modifyInCollections(actionObject.annotation.annotations[0],'bounds');this.pdfViewer.renderDrawing();break;}this.redoCollection.push(actionObject);this.updateToolbar();this.isUndoRedoAction=false;this.isUndoAction=false;}};/**
     * @private
     */Annotation.prototype.redo=function(){this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");var actionObject=this.redoCollection.pop();var annotationObject=this.pdfViewer.nameTable[actionObject.annotation.id];if(actionObject){// eslint-disable-next-line
var shapeType=actionObject.annotation.shapeAnnotationType;this.isUndoRedoAction=true;switch(actionObject.action){case'Text Markup Property modified':if(this.textMarkupAnnotationModule){// eslint-disable-next-line max-len
actionObject.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(actionObject.annotation,actionObject.pageIndex,actionObject.index,actionObject.modifiedProperty);}break;case'Text Markup Added':case'Text Markup Deleted':if(this.textMarkupAnnotationModule){// eslint-disable-next-line max-len
this.textMarkupAnnotationModule.redoTextMarkupAction(actionObject.annotation,actionObject.pageIndex,actionObject.index,actionObject.action);}break;case'Drag':case'Resize':if(isLineShapes(actionObject.annotation)){this.pdfViewer.nodePropertyChange(// eslint-disable-next-line max-len
annotationObject,{bounds:actionObject.redoElement.bounds,vertexPoints:actionObject.redoElement.vertexPoints,leaderHeight:actionObject.redoElement.leaderHeight});}else{this.pdfViewer.nodePropertyChange(annotationObject,{bounds:actionObject.redoElement.bounds});}// eslint-disable-next-line max-len
if(actionObject.annotation.measureType==='Distance'||actionObject.annotation.measureType==='Perimeter'||actionObject.annotation.measureType==='Area'||actionObject.annotation.measureType==='Radius'||actionObject.annotation.measureType==='Volume'){this.pdfViewer.nodePropertyChange(annotationObject,{notes:actionObject.redoElement.notes});this.updateCalibrateValues(annotationObject);}this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.pdfViewer.select([annotationObject.id]);// eslint-disable-next-line max-len
if(actionObject.annotation.shapeAnnotationType==='Line'||actionObject.annotation.shapeAnnotationType==='Rectangle'||actionObject.annotation.shapeAnnotationType==='Ellipse'||actionObject.annotation.shapeAnnotationType==='Polygon'||actionObject.annotation.shapeAnnotationType==='LineWidthArrowHead'||actionObject.annotation.shapeAnnotationType==='Radius'||actionObject.annotation.shapeAnnotationType==='FreeText'||actionObject.annotation.shapeAnnotationType==='HandWrittenSignature'||actionObject.annotation.shapeAnnotationType==='SignatureText'||actionObject.annotation.shapeAnnotationType==='SignatureImage'||actionObject.annotation.shapeAnnotationType==='Ink'){this.modifyInCollections(annotationObject,'bounds');}break;case'Addition':// eslint-disable-next-line max-len
if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){if(actionObject.annotation.measureType===''||sf.base.isNullOrUndefined(actionObject.annotation.measureType)){shapeType='shape';this.shapeAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}else{shapeType='shape_measure';this.measureAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}}if(shapeType==='FreeText'){this.freeTextAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}if(shapeType==='Stamp'||shapeType==='Image'){this.stampAnnotationModule.updateDeleteItems(actionObject.annotation.pageIndex,actionObject.redoElement);}if(shapeType==='HandWrittenSignature'||shapeType==='SignatureText'||shapeType==='SignatureImage'){this.pdfViewerBase.signatureModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}if(shapeType==='Ink'){this.inkAnnotationModule.addInCollection(actionObject.annotation.pageIndex,actionObject.duplicate);}var addedAnnot=this.pdfViewer.add(actionObject.annotation);this.pdfViewer.select([actionObject.annotation.id]);if((shapeType==='FreeText'||addedAnnot.enableShapeLabel)&&addedAnnot){this.pdfViewer.nodePropertyChange(addedAnnot,{});}this.pdfViewer.renderDrawing(null,actionObject.annotation.pageIndex);if(shapeType==='sticky'||shapeType==='StickyNotes'||shapeType==='Stamp'||shapeType==='Image'){this.pdfViewer.annotation.undoCommentsElement.push(actionObject.redoElement);}else{this.pdfViewer.annotation.undoCommentsElement.push(actionObject.duplicate);}// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(actionObject.annotation.pageIndex,shapeType);break;case'Delete':var isUpdate=false;var sType=actionObject.annotation.shapeAnnotationType;// eslint-disable-next-line max-len
if(shapeType==='Line'||shapeType==='LineWidthArrowHead'||shapeType==='Polygon'||shapeType==='Ellipse'||shapeType==='Rectangle'||shapeType==='Radius'||shapeType==='Distance'){if(actionObject.annotation.measureType===''||sf.base.isNullOrUndefined(actionObject.annotation.measureType)){sType='shape';}else{sType='measure';}// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,sType,'delete');this.modifyInCollections(actionObject.annotation,'delete');isUpdate=true;}if(shapeType==='Stamp'||shapeType==='Image'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,sType,'delete');this.stampAnnotationModule.updateSessionStorage(actionObject.annotation,null,'delete');isUpdate=true;}if(shapeType==='FreeText'||shapeType==='HandWrittenSignature'||shapeType==='SignatureText'||shapeType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,sType,'delete');this.modifyInCollections(actionObject.annotation,'delete');}if(!isUpdate){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(actionObject.annotation,sType,'delete');}var formFieldObj=this.pdfViewer.nameTable[actionObject.annotation.id.split("_")[0]];if(formFieldObj!=null&&(formFieldObj.formFieldAnnotationType==='SignatureField'||formFieldObj.formFieldAnnotationType==='InitialField')){formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[0]),1);if(actionObject.annotation.shapeAnnotationType==="SignatureText")formFieldObj.wrapper.children.splice(formFieldObj.wrapper.children.indexOf(actionObject.annotation.wrapper.children[1]),1);}this.pdfViewer.clearSelection(actionObject.annotation.pageIndex);this.pdfViewer.remove(actionObject.annotation);this.pdfViewer.renderDrawing(null,actionObject.annotation.pageIndex);// eslint-disable-next-line
var removeDiv=document.getElementById(actionObject.annotation.annotName);if(removeDiv){this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',actionObject.annotation.annotName,actionObject.annotation.pageIndex);}break;case'stampOpacity':this.pdfViewer.nodePropertyChange(annotationObject,{opacity:actionObject.redoElement.opacity});this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationObject,null,true);break;case'Shape Stroke':this.pdfViewer.nodePropertyChange(annotationObject,{strokeColor:actionObject.redoElement.strokeColor});this.modifyInCollections(annotationObject,'stroke');this.pdfViewer.renderDrawing();break;case'Shape Fill':this.pdfViewer.nodePropertyChange(annotationObject,{fillColor:actionObject.redoElement.fillColor});this.modifyInCollections(annotationObject,'fill');this.pdfViewer.renderDrawing();break;case'Shape Opacity':this.pdfViewer.nodePropertyChange(annotationObject,{opacity:actionObject.redoElement.opacity});if(actionObject.annotation.shapeAnnotationType==='StickyNotes'){this.stickyNotesAnnotationModule.updateOpacityValue(annotationObject);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationObject,null,true);}else{this.modifyInCollections(annotationObject,'opacity');}this.pdfViewer.renderDrawing();break;case'Shape Thickness':this.pdfViewer.nodePropertyChange(annotationObject,{thickness:actionObject.redoElement.thickness});this.modifyInCollections(annotationObject,'thickness');this.pdfViewer.renderDrawing();break;case'Line properties change':this.pdfViewer.nodePropertyChange(annotationObject,{// eslint-disable-next-line max-len
fillColor:actionObject.redoElement.fillColor,strokeColor:actionObject.redoElement.strokeColor,opacity:actionObject.redoElement.opacity,thickness:actionObject.redoElement.thickness,sourceDecoraterShapes:this.getArrowType(actionObject.redoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(actionObject.redoElement.lineHeadEnd),borderDashArray:actionObject.redoElement.borderDashArray,borderStyle:actionObject.redoElement.borderStyle});this.updateCollectionForLineProperty(annotationObject);this.pdfViewer.renderDrawing();break;case'Text Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(actionObject.annotation,null,true);break;case'Comments Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation,actionObject.action,actionObject.undoElement);break;case'Status Property Added':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation,actionObject.action);break;case'Comments Reply Deleted':// eslint-disable-next-line max-len
actionObject.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(actionObject.annotation,actionObject.action);break;case'dynamicText Change':this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=true;annotationObject.dynamicText=actionObject.redoElement.dynamicText;// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];if(annotation){annotation.dynamicText=actionObject.redoElement.dynamicText;annotation.bounds.height=actionObject.redoElement.bounds.height;}// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(annotationObject,actionObject.action,actionObject.undoElement);this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationObject,null,true);this.modifyInCollections(annotationObject,'dynamicText');if(annotation){this.pdfViewer.nodePropertyChange(annotation,{});}else{this.pdfViewer.nodePropertyChange(annotationObject,{});}this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=false;this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.pdfViewer.select([annotationObject.id]);break;case'fontColor':this.pdfViewer.nodePropertyChange(annotationObject,{fontColor:actionObject.redoElement.fontColor});this.modifyInCollections(annotationObject,'fontColor');this.pdfViewer.renderDrawing();break;case'fontSize':this.pdfViewer.nodePropertyChange(annotationObject,{fontSize:actionObject.redoElement.fontSize});this.modifyInCollections(annotationObject,'fontSize');this.pdfViewer.renderDrawing();break;case'textAlign':this.pdfViewer.nodePropertyChange(annotationObject,{textAlign:actionObject.redoElement.textAlign});this.modifyInCollections(annotationObject,'textAlign');this.pdfViewer.renderDrawing();break;case'textPropertiesChange':this.pdfViewer.nodePropertyChange(annotationObject,{font:actionObject.redoElement.font});this.modifyInCollections(annotationObject,'textPropertiesChange');this.pdfViewer.renderDrawing();break;case'Rotate':// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(annotationObject.annotations[0],{bounds:actionObject.redoElement.bounds,rotateAngle:actionObject.redoElement.rotateAngle});this.modifyInCollections(annotationObject.annotations[0],'bounds');this.pdfViewer.renderDrawing();break;}if(actionObject.redoElement&&actionObject.redoElement.modifiedDate!==undefined){actionObject.annotation.modifiedDate=actionObject.redoElement.modifiedDate;}this.actionCollection.push(actionObject);this.updateToolbar();this.isUndoRedoAction=false;}};Annotation.prototype.updateCollectionForLineProperty=function(pdfAnnotationBase){this.modifyInCollections(pdfAnnotationBase,'fill');this.modifyInCollections(pdfAnnotationBase,'stroke');this.modifyInCollections(pdfAnnotationBase,'opacity');this.modifyInCollections(pdfAnnotationBase,'thickness');this.modifyInCollections(pdfAnnotationBase,'dashArray');this.modifyInCollections(pdfAnnotationBase,'startArrow');this.modifyInCollections(pdfAnnotationBase,'endArrow');};Annotation.prototype.updateToolbar=function(isAnnotationDelete){if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.updateUndoRedoButtons();}this.pdfViewer.viewerBase.blazorUIAdaptor.canUndoRedo();if(this.actionCollection&&this.actionCollection.length==0){this.pdfViewerBase.updateDocumentEditedProperty(false);}else{this.pdfViewerBase.updateDocumentEditedProperty(true);}if(isAnnotationDelete){var isEdited=false;if(this.pdfViewer.annotationCollection&&this.pdfViewer.annotationCollection.length>0&&this.pdfViewer.signatureCollection&&this.pdfViewer.signatureCollection.length>0){isEdited=true;}if(!isEdited&&this.pdfViewer.isDocumentEdited){this.pdfViewerBase.updateDocumentEditedProperty(false);}}};Annotation.prototype.createNote=function(){// eslint-disable-next-line max-len
this.popupNote=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_annotation_note',className:'e-pv-annotation-note',styles:'display:none'});this.popupNoteAuthor=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_annotation_note_author',className:'e-pv-annotation-note-author'});this.popupNote.appendChild(this.popupNoteAuthor);// eslint-disable-next-line max-len
this.popupNoteContent=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_annotation_note_content',className:'e-pv-annotation-note-content'});this.popupNote.appendChild(this.popupNoteContent);this.pdfViewerBase.mainContainer.appendChild(this.popupNote);};/**
     * @param event
     * @param color
     * @param author
     * @param note
     * @param type
     * @param event
     * @param color
     * @param author
     * @param note
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.showPopupNote=function(event,color,author,note,type){var mainContainerPosition=this.pdfViewerBase.mainContainer.getBoundingClientRect();var popupNoteClientRect=this.popupNote.getBoundingClientRect();if(author){this.popupNoteAuthor.textContent=author;}this.popupNoteContent.textContent=note;if(type==='Highlight'){this.popupNote.style.backgroundColor='rgb(237, 232, 177)';}else if(type==='Underline'){this.popupNote.style.backgroundColor='rgb(187, 241, 191)';}else if(type==='Strikethrough'){this.popupNote.style.backgroundColor='rgb(242, 188, 207)';}this.popupNote.style.display='block';var topPosition=event.pageY-mainContainerPosition.top+5;var leftPosition=event.pageX-mainContainerPosition.left+5;if(leftPosition+popupNoteClientRect.width>mainContainerPosition.width){leftPosition=leftPosition-popupNoteClientRect.width;}if(topPosition+popupNoteClientRect.height>mainContainerPosition.height){topPosition=topPosition-popupNoteClientRect.height;}this.popupNote.style.top=topPosition+'px';this.popupNote.style.left=leftPosition+'px';};/**
     * @private
     */Annotation.prototype.hidePopupNote=function(){if(this.popupNote){this.popupNote.style.display='none';}};Annotation.prototype.createTextMarkupPopup=function(){var _this=this;var elementId=this.pdfViewer.dataId;// eslint-disable-next-line max-len
this.popupElement=sf.base.createElement('div',{id:elementId+'_popup_annotation_note',className:'e-pv-annotation-popup-menu',styles:'display:none'});var headerElement=sf.base.createElement('div',{id:elementId+'_popup_header',className:'e-pv-annotation-popup-header'});// eslint-disable-next-line max-len
this.authorPopupElement=sf.base.createElement('div',{id:elementId+'_popup_author',className:'e-pv-annotation-popup-author'});headerElement.appendChild(this.authorPopupElement);// eslint-disable-next-line max-len
var closeBtn=sf.base.createElement('span',{id:elementId+'_popup_close',className:'e-pv-annotation-popup-close e-pv-icon'});headerElement.appendChild(closeBtn);this.popupElement.appendChild(headerElement);// eslint-disable-next-line max-len
this.modifiedDateElement=sf.base.createElement('div',{id:elementId+'_popup_modified_time',className:'e-pv-annotation-modified-time'});this.popupElement.appendChild(this.modifiedDateElement);// eslint-disable-next-line max-len
var contentContainer=sf.base.createElement('div',{id:elementId+'_popup_content_container',className:'e-pv-annotation-popup-note-container'});this.noteContentElement=sf.base.createElement('div',{id:elementId+'_popup_content',className:'e-pv-annotation-popup-content'});this.noteContentElement.contentEditable='true';contentContainer.appendChild(this.noteContentElement);this.popupElement.appendChild(contentContainer);this.pdfViewerBase.viewerContainer.appendChild(this.popupElement);closeBtn.addEventListener('click',this.saveClosePopupMenu.bind(this));closeBtn.addEventListener('touchend',this.saveClosePopupMenu.bind(this));this.popupElement.addEventListener('mousedown',this.onPopupElementMoveStart.bind(this));this.popupElement.addEventListener('mousemove',this.onPopupElementMove.bind(this));window.addEventListener('mouseup',this.onPopupElementMoveEnd.bind(this));this.popupElement.addEventListener('touchstart',this.onPopupElementMoveStart.bind(this));this.popupElement.addEventListener('touchmove',this.onPopupElementMove.bind(this));window.addEventListener('touchend',this.onPopupElementMoveEnd.bind(this));this.noteContentElement.addEventListener('mousedown',function(){_this.noteContentElement.focus();});};// eslint-disable-next-line
Annotation.prototype.onPopupElementMoveStart=function(event){if(event.type==='touchstart'){event=event.changedTouches[0];}if(event.target.id!==this.noteContentElement.id||!event.target.contains(this.noteContentElement.childNodes[0])){this.isPopupMenuMoved=true;var popupElementClientRect=this.popupElement.getBoundingClientRect();this.clientX=event.clientX-popupElementClientRect.left;// eslint-disable-next-line max-len
this.clientY=event.clientY-popupElementClientRect.top+this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top*this.pdfViewerBase.getZoomFactor();}};// eslint-disable-next-line
Annotation.prototype.onPopupElementMove=function(event){if(event.type==='touchmove'){event=event.changedTouches[0];}// eslint-disable-next-line max-len
if(this.isPopupMenuMoved&&(event.target.id!==this.noteContentElement.id||!event.target.contains(this.noteContentElement.childNodes[0]))){var left=event.clientX-this.clientX+parseFloat(this.popupElement.style.left);var top_1=event.clientY-this.clientY+parseFloat(this.popupElement.style.top);this.clientX=event.clientX;this.clientY=event.clientY;var clientPosition=this.popupElement.getBoundingClientRect();var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+this.currentAnnotPageNumber);// eslint-disable-next-line max-len
if(left>parseFloat(pageDiv.style.left)&&left+clientPosition.width<parseFloat(pageDiv.style.left)+parseFloat(pageDiv.style.width)){this.popupElement.style.left=left+'px';}else{this.popupElement.style.left=parseFloat(this.popupElement.style.left)+'px';}// eslint-disable-next-line max-len
if(top_1>parseFloat(pageDiv.style.top)&&top_1+clientPosition.height<parseFloat(pageDiv.style.top)+parseFloat(pageDiv.style.height)){this.popupElement.style.top=top_1+'px';}else{this.popupElement.style.top=parseFloat(this.popupElement.style.top)+'px';}}};Annotation.prototype.onPopupElementMoveEnd=function(){this.isPopupMenuMoved=false;};Annotation.prototype.saveClosePopupMenu=function(){if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber,this.noteContentElement.innerText);}this.closePopupMenu();};/**
     * @private
     */Annotation.prototype.closePopupMenu=function(){if(this.popupElement){this.popupElement.parentElement.removeChild(this.popupElement);this.popupElement=null;this.isPopupNoteVisible=false;}};/**
     * @param event
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.showAnnotationPopup=function(event){if(this.textMarkupAnnotationModule){this.currentAnnotPageNumber=this.getEventPageNumber(event);// eslint-disable-next-line max-len
if(this.textMarkupAnnotationModule&&(event.target!==this.noteContentElement||event.target.contains(this.noteContentElement.childNodes[0]))){this.hidePopupNote();if(!this.popupElement){this.createTextMarkupPopup();this.popupElement.style.display='block';this.authorPopupElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author;// eslint-disable-next-line max-len
this.modifiedDateElement.textContent=this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate);this.noteContentElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;var clientPosition=this.popupElement.getBoundingClientRect();// eslint-disable-next-line max-len
var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+this.currentAnnotPageNumber);var canvasPosition=pageDiv.getBoundingClientRect();var topPosition=event.clientY-canvasPosition.top+parseFloat(pageDiv.style.top);var leftPosition=event.clientX;if(leftPosition+clientPosition.width>parseFloat(pageDiv.style.left)+parseFloat(pageDiv.style.width)){this.popupElement.style.left=leftPosition-clientPosition.width+'px';}else{this.popupElement.style.left=leftPosition+'px';}if(topPosition+clientPosition.height>parseFloat(pageDiv.style.top)+parseFloat(pageDiv.style.height)){this.popupElement.style.top=topPosition-clientPosition.height+'px';}else{this.popupElement.style.top=topPosition+'px';}this.isPopupNoteVisible=true;}}}};/**
     * @param args
     * @param isOpacity
     * @param args
     * @param isOpacity
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.modifyOpacity=function(args,isOpacity){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);var opacityValue=1;if(isOpacity){opacityValue=args;}else{opacityValue=args.value/100;}if(currentAnnotation.opacity!==opacityValue){redoClonedObject.opacity=opacityValue;this.pdfViewer.nodePropertyChange(currentAnnotation,{opacity:opacityValue});if(currentAnnotation.shapeAnnotationType==='StickyNotes'){this.stickyNotesAnnotationModule.updateOpacityValue(currentAnnotation);}else{this.modifyInCollections(currentAnnotation,'opacity');}if(currentAnnotation.shapeAnnotationType==='HandWrittenSignature'||currentAnnotation.shapeAnnotationType==='SignatureImage'||currentAnnotation.shapeAnnotationType==='SignatureText'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,false,true,false,clonedObject.opacity,redoClonedObject.opacity);}else{this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Opacity','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();}};/**
     * @param currentColor
     * @private
     */Annotation.prototype.modifyFontColor=function(currentColor){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.fontColor=currentColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{fontColor:currentColor});this.modifyInCollections(currentAnnotation,'fontColor');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'fontColor','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param currentValue
     * @private
     */Annotation.prototype.modifyFontFamily=function(currentValue){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.fontFamily=currentValue;if(this.pdfViewer.freeTextSettings.enableAutoFit){this.updateFontFamilyRenderSize(currentAnnotation,currentValue);}else{this.pdfViewer.nodePropertyChange(currentAnnotation,{fontFamily:currentValue});}this.modifyInCollections(currentAnnotation,'fontFamily');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'fontFamily','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param currentValue
     * @private
     */Annotation.prototype.modifyFontSize=function(currentValue){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.fontSize=currentValue;var freeTextAnnotation=this.freeTextAnnotationModule;var x=currentAnnotation.bounds.x;var y=currentAnnotation.bounds.y;currentAnnotation.fontSize=currentValue;if(freeTextAnnotation&&!freeTextAnnotation.isNewFreeTextAnnot&&currentAnnotation.dynamicText!==''){freeTextAnnotation.addInuptElemet({x:x,y:y},currentAnnotation);if(currentAnnotation){if(currentAnnotation.previousFontSize>currentValue){freeTextAnnotation.inputBoxElement.style.height='auto';freeTextAnnotation.inputBoxElement.style.height=freeTextAnnotation.inputBoxElement.scrollHeight+5+'px';}var inputEleHeight=parseFloat(freeTextAnnotation.inputBoxElement.style.height);var inputEleWidth=parseFloat(freeTextAnnotation.inputBoxElement.style.width);var zoomFactor=this.pdfViewerBase.getZoomFactor();inputEleWidth=inputEleWidth/zoomFactor;inputEleHeight=inputEleHeight/zoomFactor;var heightDiff=inputEleHeight-currentAnnotation.bounds.height;var y_1=undefined;if(heightDiff>0){y_1=currentAnnotation.wrapper.offsetY+heightDiff/2;y_1=y_1>0?y_1:undefined;}else{heightDiff=Math.abs(heightDiff);y_1=currentAnnotation.wrapper.offsetY-heightDiff/2;y_1=y_1>0?y_1:undefined;}var widthDiff=inputEleWidth-currentAnnotation.bounds.width;var x_1=undefined;if(widthDiff>0){x_1=currentAnnotation.wrapper.offsetX+widthDiff/2;x_1=x_1>0?x_1:undefined;}else{widthDiff=Math.abs(widthDiff);x_1=currentAnnotation.wrapper.offsetX-widthDiff/2;}currentAnnotation.bounds.width=inputEleWidth;currentAnnotation.bounds.height=inputEleHeight;// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(currentAnnotation,{fontSize:currentValue,bounds:{width:currentAnnotation.bounds.width,height:currentAnnotation.bounds.height,y:y_1,x:x_1}});this.pdfViewer.renderSelector(currentAnnotation.pageIndex,this.pdfViewer.annotationSelectorSettings);currentAnnotation.previousFontSize=currentValue;}this.modifyInCollections(currentAnnotation,'fontSize');this.modifyInCollections(currentAnnotation,'bounds');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'fontSize','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();}};/**
     * @param currentValue
     * @private
     */Annotation.prototype.modifyTextAlignment=function(currentValue){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.textAlign=currentValue;this.pdfViewer.nodePropertyChange(currentAnnotation,{textAlign:currentValue});this.modifyInCollections(currentAnnotation,'textAlign');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'textAlign','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param fontInfo
     * @param action
     * @private
     */Annotation.prototype.modifyTextProperties=function(fontInfo,action){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);if(action==='bold'){redoClonedObject.font.isBold=fontInfo.isBold;}else if(action==='italic'){redoClonedObject.font.isItalic=fontInfo.isItalic;}else if(action==='underline'){redoClonedObject.font.isUnderline=fontInfo.isUnderline;if(redoClonedObject.font.isUnderline&&redoClonedObject.font.isStrikeout){redoClonedObject.font.isStrikeout=false;}}else if(action==='strikeout'){redoClonedObject.font.isStrikeout=fontInfo.isStrikeout;if(redoClonedObject.font.isUnderline&&redoClonedObject.font.isStrikeout){redoClonedObject.font.isUnderline=false;}}this.pdfViewer.nodePropertyChange(currentAnnotation,{font:fontInfo});this.modifyInCollections(currentAnnotation,'textPropertiesChange');this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'textPropertiesChange','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param thicknessValue
     * @private
     */Annotation.prototype.modifyThickness=function(thicknessValue){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];if(currentAnnotation.thickness!==thicknessValue){var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.thickness=thicknessValue;this.pdfViewer.nodePropertyChange(currentAnnotation,{thickness:thicknessValue});this.modifyInCollections(currentAnnotation,'thickness');if(currentAnnotation.shapeAnnotationType==='HandWrittenSignature'||currentAnnotation.shapeAnnotationType==='SignatureText'||currentAnnotation.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,false,false,true,clonedObject.thickness,redoClonedObject.thickness);}else{this.triggerAnnotationPropChange(currentAnnotation,false,false,true,false);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Thickness','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();}};/**
     * @param color
     * @private
     */Annotation.prototype.modifyStrokeColor=function(color){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.strokeColor=color;this.pdfViewer.nodePropertyChange(currentAnnotation,{strokeColor:color});this.modifyInCollections(currentAnnotation,'stroke');if(currentAnnotation.shapeAnnotationType==='HandWrittenSignature'||currentAnnotation.shapeAnnotationType==='SignatureText'||currentAnnotation.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,true,false,false,clonedObject.strokeColor,redoClonedObject.strokeColor);}else{this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Stroke','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param color
     * @private
     */Annotation.prototype.modifyFillColor=function(color){var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);redoClonedObject.fillColor=color;this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{fillColor:color});this.modifyInCollections(currentAnnotation,'fill');this.triggerAnnotationPropChange(currentAnnotation,true,false,false,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Fill','',clonedObject,redoClonedObject);this.pdfViewer.renderDrawing();};/**
     * @param dynamicText
     * @param annotName
     * @private
     */Annotation.prototype.modifyDynamicTextValue=function(dynamicText,annotName){var currentAnnotation=null;currentAnnotation=this.pdfViewer.selectedItems.annotations.filter(function(s){return s.annotName===annotName;})[0];if(currentAnnotation){var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);currentAnnotation.dynamicText=dynamicText;redoClonedObject.dynamicText=dynamicText;if(clonedObject.dynamicText===''){clonedObject.dynamicText=this.freeTextAnnotationModule.previousText;}this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{dynamicText:dynamicText});// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'dynamicText Change','',clonedObject,redoClonedObject);this.modifyInCollections(currentAnnotation,'dynamicText');this.pdfViewer.renderDrawing();}};// eslint-disable-next-line
Annotation.prototype.modifyInCollections=function(annotationBase,property){// eslint-disable-next-line
var returnObj;if(annotationBase.measureType===''||sf.base.isNullOrUndefined(annotationBase.measureType)){if(annotationBase.shapeAnnotationType==='FreeText'){returnObj=this.freeTextAnnotationModule.modifyInCollection(property,annotationBase.pageIndex,annotationBase);}else if(annotationBase.shapeAnnotationType==='HandWrittenSignature'||annotationBase.shapeAnnotationType==='SignatureText'||annotationBase.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
returnObj=this.pdfViewerBase.signatureModule.modifySignatureCollection(property,annotationBase.pageIndex,annotationBase);}else if(annotationBase.shapeAnnotationType==='Stamp'){returnObj=this.stampAnnotationModule.modifyInCollection(property,annotationBase.pageIndex,annotationBase);}else if(annotationBase.shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
returnObj=this.inkAnnotationModule.modifySignatureInkCollection(property,annotationBase.pageIndex,annotationBase);}else{returnObj=this.shapeAnnotationModule.modifyInCollection(property,annotationBase.pageIndex,annotationBase);}}else if(annotationBase.measureType==='Distance'||annotationBase.measureType==='Perimeter'||annotationBase.measureType==='Radius'||annotationBase.measureType==='Area'||annotationBase.measureType==='Volume'){returnObj=this.measureAnnotationModule.modifyInCollection(property,annotationBase.pageIndex,annotationBase);}if(this.isUndoRedoAction){this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase,null,true);if(this.isUndoAction){annotationBase.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}}else{if(property!=='bounds'){this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase);}}return returnObj;};/**
     * @private
     */Annotation.prototype.createPropertiesWindow=function(){var opacityValue=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity*100;var lineStartElement=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes);var lineEndElement=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes);var lineStyleElement;// eslint-disable-next-line
if(parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray)>=3){lineStyleElement='Dashed';}else if(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray==='2'){lineStyleElement='Dotted';}else if(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray==='0'){lineStyleElement='Solid';}this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenPropertiesDialog',opacityValue,lineStartElement,lineEndElement,lineStyleElement);};Annotation.prototype.updatePropertiesWindowInBlazor=function(){// eslint-disable-next-line
var thicknessElement=document.querySelector('#'+this.pdfViewer.dataId+'_line_thickness');// eslint-disable-next-line
var fillColorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_fill_color_button');// eslint-disable-next-line
var strokeColorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_stroke_color_button');// eslint-disable-next-line
var leaderLengthElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_leader_length');thicknessElement.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;fillColorElement.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill;strokeColorElement.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;this.onStrokeColorChange(strokeColorElement.value);this.onFillColorChange(fillColorElement.value);if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'){// eslint-disable-next-line
leaderLengthElement.value=parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString());}if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Line'){// eslint-disable-next-line
fillColorElement.disabled=true;}};Annotation.prototype.destroyPropertiesWindow=function(){if(this.strokeColorPicker){this.strokeColorPicker.destroy();this.strokeColorPicker=null;}if(this.fillColorPicker){this.fillColorPicker.destroy();this.fillColorPicker=null;}if(this.endArrowDropDown){this.endArrowDropDown.destroy();this.endArrowDropDown=null;}if(this.startArrowDropDown){this.startArrowDropDown.destroy();this.startArrowDropDown=null;}if(this.opacitySlider){this.opacitySlider.destroy();this.opacitySlider=null;}if(this.thicknessBox){this.thicknessBox.destroy();this.thicknessBox=null;}if(this.lineStyleDropDown){this.lineStyleDropDown.destroy();this.lineStyleDropDown=null;}if(this.leaderLengthBox){this.leaderLengthBox.destroy();this.leaderLengthBox=null;}if(this.propertiesDialog){this.propertiesDialog.destroy();this.propertiesDialog=null;}var dialogElement=this.pdfViewerBase.getElement('_properties_window');if(dialogElement){dialogElement.parentElement.removeChild(dialogElement);}};Annotation.prototype.refreshColorPicker=function(colorPick){colorPick.setProperties({'value':colorPick.value},true);colorPick.refresh();};Annotation.prototype.createAppearanceTab=function(){var _this=this;var elementID=this.pdfViewer.dataId;// eslint-disable-next-line max-len
var items=[{text:this.pdfViewer.localeObj.getConstant('None')},{text:this.pdfViewer.localeObj.getConstant('Open Arrow')},{text:this.pdfViewer.localeObj.getConstant('Closed Arrow')},{text:this.pdfViewer.localeObj.getConstant('Round Arrow')},{text:this.pdfViewer.localeObj.getConstant('Square Arrow')},{text:this.pdfViewer.localeObj.getConstant('Diamond Arrow')}];// eslint-disable-next-line max-len
var appearanceDiv=sf.base.createElement('div',{id:elementID+'_properties_appearance'});var lineStyleContainer=sf.base.createElement('div',{className:'e-pv-properties-line-style-prop'});appearanceDiv.appendChild(lineStyleContainer);// eslint-disable-next-line max-len
var lineHeadStartElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Start Arrow'),lineStyleContainer,'text','button',true,'e-pv-properties-line-start',elementID+'_properties_line_start');// eslint-disable-next-line max-len
this.startArrowDropDown=new sf.splitbuttons.DropDownButton({items:items,cssClass:'e-pv-properties-line-start',select:this.onStartArrowHeadStyleSelect.bind(this)},lineHeadStartElement);var lineHeadEndElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('End Arrow'),lineStyleContainer,'text','button',true,'e-pv-properties-line-end',elementID+'_properties_line_end');// eslint-disable-next-line max-len
var borderStyleContainer=sf.base.createElement('div',{className:'e-pv-properties-border-style'});appearanceDiv.appendChild(borderStyleContainer);// eslint-disable-next-line max-len
this.endArrowDropDown=new sf.splitbuttons.DropDownButton({items:items,cssClass:'e-pv-properties-line-end',select:this.onEndArrowHeadStyleSelect.bind(this)},lineHeadEndElement);var lineStyleElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Style'),borderStyleContainer,'text','button',true,'e-pv-properties-line-style',elementID+'_properties_line_style');var dropDownTarget=this.createStyleList();// eslint-disable-next-line max-len
this.lineStyleDropDown=new sf.splitbuttons.DropDownButton({cssClass:'e-pv-properties-line-style',target:dropDownTarget},lineStyleElement);// eslint-disable-next-line max-len
var thicknessElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Thickness'),borderStyleContainer,'text','input',true,'e-pv-properties-line-thickness',elementID+'_properties_thickness');this.thicknessBox=new sf.inputs.NumericTextBox({value:0,format:'## pt',cssClass:'e-pv-properties-line-thickness',min:0,max:12},thicknessElement);var colorStyleContainer=sf.base.createElement('div',{className:'e-pv-properties-color-style'});appearanceDiv.appendChild(colorStyleContainer);// eslint-disable-next-line max-len
var fillColorElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Fill Color'),colorStyleContainer,'color','button',true,'e-pv-properties-line-fill-color',elementID+'_properties_fill_color');this.fillColorPicker=this.createColorPicker(elementID+'_properties_fill_color',true);this.fillColorPicker.change=function(args){var currentColor=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;_this.fillDropDown.toggle();_this.updateColorInIcon(_this.fillDropDown.element,currentColor);};// eslint-disable-next-line max-len
this.fillDropDown=this.createDropDownButton(fillColorElement,'e-pv-properties-fill-color-icon',this.fillColorPicker.element.parentElement);this.fillDropDown.beforeOpen=this.onFillDropDownBeforeOpen.bind(this);this.fillDropDown.open=function(){_this.fillColorPicker.refresh();};// eslint-disable-next-line max-len
var strokeColorElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Line Color'),colorStyleContainer,'color','button',true,'e-pv-properties-line-stroke-color',elementID+'_properties_stroke_color');this.strokeColorPicker=this.createColorPicker(elementID+'_properties_stroke_color',false);this.strokeColorPicker.change=function(args){var currentColor=args.currentValue.hex===''?'#ffffff00':args.currentValue.hex;_this.strokeDropDown.toggle();_this.updateColorInIcon(_this.strokeDropDown.element,currentColor);};// eslint-disable-next-line max-len
this.strokeDropDown=this.createDropDownButton(strokeColorElement,'e-pv-properties-stroke-color-icon',this.strokeColorPicker.element.parentElement);this.strokeDropDown.beforeOpen=this.onStrokeDropDownBeforeOpen.bind(this);this.strokeDropDown.open=function(){_this.strokeColorPicker.refresh();};var opacityContainer=sf.base.createElement('div',{className:'e-pv-properties-opacity-style'});appearanceDiv.appendChild(opacityContainer);// eslint-disable-next-line max-len
var opacityElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Opacity'),opacityContainer,'','div',true,'e-pv-properties-line-opacity',elementID+'_properties_opacity');this.opacitySlider=new sf.inputs.Slider({type:'MinRange',max:100,min:0,cssClass:'e-pv-properties-line-opacity',change:function change(){_this.updateOpacityIndicator();}},opacityElement);if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'){// eslint-disable-next-line max-len
var lineLengthElement=this.createInputElement(this.pdfViewer.localeObj.getConstant('Leader Length'),opacityContainer,'text','input',true,'e-pv-properties-line-leader-length',elementID+'_properties_leader_length');this.leaderLengthBox=new sf.inputs.NumericTextBox({value:0,format:'## pt',cssClass:'e-pv-properties-line-leader-length',min:0,max:100},lineLengthElement);}return appearanceDiv;};Annotation.prototype.createContent=function(text){var divElement=sf.base.createElement('div',{className:'e-pv-properties-line-style-content'});divElement.textContent=text;return divElement;};Annotation.prototype.onStrokeDropDownBeforeOpen=function(){if(this.pdfViewer.selectedItems.annotations.length===1){this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;}this.strokeColorPicker.refresh();};Annotation.prototype.onFillDropDownBeforeOpen=function(){if(this.pdfViewer.selectedItems.annotations.length===1){this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor;}this.fillColorPicker.refresh();};Annotation.prototype.createStyleList=function(){var _this=this;var ulElement=sf.base.createElement('ul');document.body.appendChild(ulElement);var solidLi=this.createListForStyle('solid');solidLi.addEventListener('click',function(){_this.setThickness('0','solid');});ulElement.appendChild(solidLi);var dottedLi=this.createListForStyle('dotted');dottedLi.addEventListener('click',function(){_this.setThickness('2','dotted');});ulElement.appendChild(dottedLi);var dashedLi=this.createListForStyle('dashed');dashedLi.addEventListener('click',function(){_this.setThickness('3','dashed');});ulElement.appendChild(dashedLi);return ulElement;};Annotation.prototype.createColorPicker=function(idString,isNoColor){var inputElement=sf.base.createElement('input',{id:idString+'_target'});document.body.appendChild(inputElement);var colorPicker=new sf.inputs.ColorPicker({inline:true,mode:'Palette',enableOpacity:false,value:'#000000',showButtons:false,modeSwitcher:false,noColor:isNoColor});if(this.pdfViewer.enableRtl){colorPicker.enableRtl=true;}colorPicker.appendTo(inputElement);return colorPicker;};Annotation.prototype.createDropDownButton=function(element,iconClass,target){// eslint-disable-next-line max-len
var dropDownButton=new sf.splitbuttons.DropDownButton({iconCss:iconClass+' e-pv-icon',target:target});if(this.pdfViewer.enableRtl){dropDownButton.enableRtl=true;}dropDownButton.appendTo(element);return dropDownButton;};Annotation.prototype.updateColorInIcon=function(element,color){element.childNodes[0].style.borderBottomColor=color;};/**
     * @param color
     * @private
     */Annotation.prototype.onFillColorChange=function(color){// eslint-disable-next-line
var colorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_fill_color_button');if(color!=='transparent'){colorElement.children[0].style.borderBottomColor=color;}};/**
     * @param color
     * @private
     */Annotation.prototype.onStrokeColorChange=function(color){// eslint-disable-next-line
var colorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_stroke_color_button');if(color!=='transparent'){colorElement.children[0].style.borderBottomColor=color;}};Annotation.prototype.setThickness=function(value,style){this.selectedLineDashArray=value;if(value==='0'){this.selectedLineStyle='Solid';}else if(value==='2'||value==='3'){this.selectedLineStyle='Dashed';}};Annotation.prototype.createDropDownContent=function(style){var divElement=sf.base.createElement('div',{className:'e-pv-line-styles-content-container'});// eslint-disable-next-line max-len
var spanElement=sf.base.createElement('span',{className:'e-pv-line-styles-content',styles:'border-bottom-style:'+style});divElement.appendChild(spanElement);return divElement;};Annotation.prototype.createListForStyle=function(style){var liElement=sf.base.createElement('li',{className:'e-menu-item'});var divElement=sf.base.createElement('div',{className:'e-pv-line-styles-container'});// eslint-disable-next-line max-len
var spanElement=sf.base.createElement('span',{className:'e-pv-line-styles-item',styles:'border-bottom-style:'+style});divElement.appendChild(spanElement);liElement.appendChild(divElement);return liElement;};Annotation.prototype.onStartArrowHeadStyleSelect=function(args){this.startArrowDropDown.content=this.createContent(args.item.text).outerHTML;};Annotation.prototype.onEndArrowHeadStyleSelect=function(args){this.endArrowDropDown.content=this.createContent(args.item.text).outerHTML;};// eslint-disable-next-line max-len
Annotation.prototype.createInputElement=function(labelText,parentElement,inputType,input,isLabelNeeded,className,idString){var container=sf.base.createElement('div',{id:idString+'_container',className:className+'-container'});if(isLabelNeeded){var label=sf.base.createElement('div',{id:idString+'_label',className:className+'-label'});label.textContent=labelText;container.appendChild(label);}if(this.pdfViewer.localeObj.getConstant('Opacity')===labelText){this.opacityIndicator=sf.base.createElement('span',{className:'e-pv-properties-opacity-indicator'});container.appendChild(this.opacityIndicator);}var textBoxInput=sf.base.createElement(input,{id:idString});if(input==='input'){textBoxInput.type=inputType;}container.appendChild(textBoxInput);parentElement.appendChild(container);return textBoxInput;};Annotation.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=this.opacitySlider.value+'%';};/**
     * @private
     */Annotation.prototype.onOkClicked=function(opacityValue){var startArrow;var endArrow;var thickness;var strokeColor;var fillColor;var opacity;// eslint-disable-next-line
var lineStartElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_line_start');// eslint-disable-next-line
var lineEndElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_line_end');// eslint-disable-next-line
var thicknessElement=document.querySelector('#'+this.pdfViewer.dataId+'_line_thickness');// eslint-disable-next-line
var lineStyleElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_style');// eslint-disable-next-line
var fillColorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_fill_color_button');// eslint-disable-next-line
var strokeColorElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_stroke_color_button');// eslint-disable-next-line
var opacityElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_opacity');startArrow=this.getArrowTypeFromDropDown(lineStartElement.value,true);endArrow=this.getArrowTypeFromDropDown(lineEndElement.value,true);// eslint-disable-next-line
thickness=parseInt(thicknessElement.value);strokeColor=this.getValue(strokeColorElement.children[0].style.borderBottomColor,'hex');strokeColor=strokeColor===''?'#ffffff00':strokeColor;fillColor=this.getValue(fillColorElement.children[0].style.borderBottomColor,'hex');fillColor=fillColor===''?'#ffffff00':fillColor;if(opacityValue){opacity=opacityValue/100;}else{opacity=opacityElement.value/100;}if(lineStyleElement.value){if(lineStyleElement.value==='Solid'){this.setThickness('0','solid');}else if(lineStyleElement.value==='Dotted'){this.setThickness('2','dotted');}else if(lineStyleElement.value==='Dashed'){this.setThickness('3','dashed');}}var currentAnnotation=this.pdfViewer.selectedItems.annotations[0];var clonedObject=cloneObject(currentAnnotation);var redoClonedObject=cloneObject(currentAnnotation);var newNode={};var isColorChanged=false;var isStrokeColorChanged=false;var isThicknessChanged=false;var isOpacityChanged=false;var isLineHeadStartStyleChanged=false;var isLineHeadEndStyleChanged=false;var isBorderDashArrayChanged=false;if(startArrow!==currentAnnotation.sourceDecoraterShapes){newNode.sourceDecoraterShapes=startArrow;redoClonedObject.lineHeadStart=this.getArrowString(startArrow);isLineHeadStartStyleChanged=true;}if(endArrow!==currentAnnotation.taregetDecoraterShapes){newNode.taregetDecoraterShapes=endArrow;redoClonedObject.lineHeadEnd=this.getArrowString(endArrow);isLineHeadEndStyleChanged=true;}if(thickness!==currentAnnotation.wrapper.children[0].style.strokeWidth){newNode.thickness=thickness;redoClonedObject.thickness=thickness;isThicknessChanged=true;}if(strokeColor!==currentAnnotation.wrapper.children[0].style.strokeColor){newNode.strokeColor=strokeColor;redoClonedObject.strokeColor=strokeColor;isStrokeColorChanged=true;}if(fillColor!==currentAnnotation.wrapper.children[0].style.fill){newNode.fillColor=fillColor;redoClonedObject.fillColor=fillColor;isColorChanged=true;}if(opacity!==currentAnnotation.wrapper.children[0].style.opacity){newNode.opacity=opacity;redoClonedObject.opacity=opacity;isOpacityChanged=true;}if(this.selectedLineDashArray!==currentAnnotation.wrapper.children[0].style.strokeDashArray){newNode.borderDashArray=this.selectedLineDashArray;newNode.borderStyle=this.selectedLineStyle;redoClonedObject.borderDashArray=newNode.borderDashArray;redoClonedObject.borderStyle=newNode.borderStyle;isBorderDashArrayChanged=true;}// eslint-disable-next-line
var leaderLengthElement=document.querySelector('#'+this.pdfViewer.dataId+'_properties_leader_length');// eslint-disable-next-line
if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'&&parseInt(leaderLengthElement.value)!==this.pdfViewer.selectedItems.annotations[0].leaderHeight){// eslint-disable-next-line
newNode.leaderHeight=parseInt(leaderLengthElement.value);}this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],newNode);this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill=fillColor;// eslint-disable-next-line max-len
this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0],isColorChanged,isStrokeColorChanged,isThicknessChanged,isOpacityChanged,isLineHeadStartStyleChanged,isLineHeadEndStyleChanged,isBorderDashArrayChanged);this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'thickness');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'stroke');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'fill');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'opacity');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'dashArray');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'startArrow');this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'endArrow');// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Distance'){this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],'leaderLength');}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Line properties change','',clonedObject,redoClonedObject);this.renderAnnotations(currentAnnotation.pageIndex,null,null,null);};Annotation.prototype.onCancelClicked=function(){this.propertiesDialog.hide();};Annotation.prototype.getArrowTypeFromDropDown=function(arrowType,isBlazor){var arrow='None';switch(arrowType){case this.pdfViewer.localeObj.getConstant('None'):arrow='None';break;case this.pdfViewer.localeObj.getConstant('Open Arrow'):arrow='OpenArrow';break;case this.pdfViewer.localeObj.getConstant('Closed Arrow'):arrow='Arrow';break;case this.pdfViewer.localeObj.getConstant('Round Arrow'):arrow='Circle';break;case this.pdfViewer.localeObj.getConstant('Square Arrow'):arrow='Square';break;case this.pdfViewer.localeObj.getConstant('Diamond Arrow'):arrow='Diamond';break;case this.pdfViewer.localeObj.getConstant('Butt'):arrow='Butt';break;}return arrow;};/**
     * @param arrow
     * @private
     */Annotation.prototype.getArrowString=function(arrow){var arrowType=this.pdfViewer.localeObj.getConstant('None');switch(arrow){case'Arrow':arrowType=this.pdfViewer.localeObj.getConstant('Closed');break;case'OpenArrow':arrowType=this.pdfViewer.localeObj.getConstant('Open Arrow');break;case'Circle':arrowType=this.pdfViewer.localeObj.getConstant('Round');break;case'None':case'Square':case'Diamond':arrowType=this.pdfViewer.localeObj.getConstant(arrow);break;case'Butt':arrowType=this.pdfViewer.localeObj.getConstant('Butt');break;}return arrowType;};/**
     * @private
     */Annotation.prototype.onAnnotationMouseUp=function(){if(this.pdfViewer.selectedItems.annotations.length!==0){if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){this.enableBasedOnType();this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);if(!sf.base.Browser.isDevice){this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();}}this.pdfViewerBase.disableTextSelectionMode();}else{if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isPanMode&&!this.pdfViewer.designerMode){this.pdfViewer.textSelectionModule.enableTextSelectionMode();}// eslint-disable-next-line max-len
if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){// eslint-disable-next-line max-len
var isSkip=this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected;if(this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus&&!isSkip){this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(false);}this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems();this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(false);}}};/**
     * @param pdfAnnotationBase
     * @param event
     * @param pdfAnnotationBase
     * @param event
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.onShapesMouseup=function(pdfAnnotationBase,event){// eslint-disable-next-line max-len
pdfAnnotationBase=!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0])?this.pdfViewer.selectedItems.annotations[0]:pdfAnnotationBase;if(pdfAnnotationBase){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null;}// eslint-disable-next-line max-len
if((this.pdfViewerBase.tool instanceof NodeDrawingTool||this.pdfViewerBase.tool instanceof LineTool)&&!this.pdfViewerBase.tool.dragging){// eslint-disable-next-line
var setting={opacity:pdfAnnotationBase.opacity,fillColor:pdfAnnotationBase.fillColor,strokeColor:pdfAnnotationBase.strokeColor,thickness:pdfAnnotationBase.thickness,author:pdfAnnotationBase.author,subject:pdfAnnotationBase.subject,modifiedDate:pdfAnnotationBase.modifiedDate};var index=this.getAnnotationIndex(pdfAnnotationBase.pageIndex,pdfAnnotationBase.id);// eslint-disable-next-line
var bounds={left:pdfAnnotationBase.bounds.x,top:pdfAnnotationBase.bounds.y,width:pdfAnnotationBase.bounds.width,height:pdfAnnotationBase.bounds.height};if(this.pdfViewerBase.tool instanceof LineTool){setting.lineHeadStartStyle=this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);setting.borderDashArray=pdfAnnotationBase.borderDashArray;}if(!this.pdfViewerBase.isAnnotationAdded||pdfAnnotationBase.measureType==='Distance'){if(pdfAnnotationBase.measureType===''||sf.base.isNullOrUndefined(pdfAnnotationBase.measureType)){// eslint-disable-next-line max-len
this.shapeAnnotationModule.renderShapeAnnotations(pdfAnnotationBase,this.pdfViewer.annotation.getEventPageNumber(event));}else if(pdfAnnotationBase.measureType==='Distance'||pdfAnnotationBase.measureType==='Perimeter'||pdfAnnotationBase.measureType==='Radius'){// eslint-disable-next-line max-len
this.measureAnnotationModule.renderMeasureShapeAnnotations(pdfAnnotationBase,this.pdfViewer.annotation.getEventPageNumber(event));}}this.pdfViewerBase.updateDocumentEditedProperty(true);}else if(this.pdfViewerBase.tool instanceof MoveTool||this.pdfViewerBase.tool instanceof ResizeTool){this.pdfViewerBase.updateDocumentEditedProperty(true);this.oldProperties=pdfAnnotationBase.bounds;if(pdfAnnotationBase.measureType===''||sf.base.isNullOrUndefined(pdfAnnotationBase.measureType)){if(pdfAnnotationBase.shapeAnnotationType==='FreeText'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}else if(pdfAnnotationBase.shapeAnnotationType==='HandWrittenSignature'||pdfAnnotationBase.shapeAnnotationType==='SignatureImage'||pdfAnnotationBase.shapeAnnotationType==='SignatureText'){// eslint-disable-next-line max-len
this.pdfViewerBase.signatureModule.modifySignatureCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}else if(pdfAnnotationBase.shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
this.inkAnnotationModule.modifySignatureInkCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}else if(pdfAnnotationBase.shapeAnnotationType==='Stamp'||pdfAnnotationBase.shapeAnnotationType==='Image'){// eslint-disable-next-line max-len
this.stampAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}else{// eslint-disable-next-line max-len
this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}// eslint-disable-next-line max-len
}else if(pdfAnnotationBase.measureType==='Distance'||pdfAnnotationBase.measureType==='Perimeter'||pdfAnnotationBase.measureType==='Radius'||pdfAnnotationBase.measureType==='Area'||pdfAnnotationBase.measureType==='Volume'){this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}if(this.pdfViewerBase.tool instanceof ResizeTool){if(!pdfAnnotationBase.formFieldAnnotationType){this.triggerAnnotationResize(pdfAnnotationBase);}}if(this.pdfViewerBase.tool instanceof MoveTool){if(this.pdfViewerBase.action!=='Select'){if(!pdfAnnotationBase.formFieldAnnotationType){this.triggerAnnotationMove(pdfAnnotationBase);}}}}else if(this.pdfViewerBase.tool instanceof ConnectTool){this.pdfViewerBase.updateDocumentEditedProperty(true);this.oldProperties=pdfAnnotationBase.bounds;if(pdfAnnotationBase.measureType===''||sf.base.isNullOrUndefined(pdfAnnotationBase.measureType)){// eslint-disable-next-line max-len
if(pdfAnnotationBase.shapeAnnotationType==='Line'||pdfAnnotationBase.shapeAnnotationType==='LineWidthArrowHead'||pdfAnnotationBase.shapeAnnotationType==='Polygon'){this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}// eslint-disable-next-line max-len
}else if(pdfAnnotationBase.measureType==='Distance'||pdfAnnotationBase.measureType==='Perimeter'||pdfAnnotationBase.measureType==='Area'||pdfAnnotationBase.measureType==='Volume'){if(pdfAnnotationBase.measureType==='Distance'){// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('leaderLength',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('bounds',this.pdfViewer.annotation.getEventPageNumber(event),pdfAnnotationBase);}this.triggerAnnotationResize(pdfAnnotationBase);}// eslint-disable-next-line max-len
if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(pdfAnnotationBase.shapeAnnotationType==='HandWrittenSignature'||pdfAnnotationBase.shapeAnnotationType==='SignatureText'||pdfAnnotationBase.shapeAnnotationType==='SignatureImage')){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],true);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')],true);}if(this.pdfViewer.toolbarModule){if(this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode();if(pdfAnnotationBase.measureType===''||sf.base.isNullOrUndefined(pdfAnnotationBase.measureType)){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();}else if(pdfAnnotationBase.measureType==='Distance'||pdfAnnotationBase.measureType==='Perimeter'||pdfAnnotationBase.measureType==='Area'||pdfAnnotationBase.measureType==='Volume'||pdfAnnotationBase.measureType==='Radius'){this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode();}if(this.pdfViewer.selectedItems.annotations.length===1&&this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType===null){this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(true);}}}}};/**
     * @param pdfAnnotationBase
     * @param isNewlyAdded
     * @param pdfAnnotationBase
     * @param isNewlyAdded
     * @private
     */Annotation.prototype.updateCalibrateValues=function(pdfAnnotationBase,isNewlyAdded){if(pdfAnnotationBase.measureType==='Distance'){pdfAnnotationBase.notes=updateDistanceLabel(pdfAnnotationBase,pdfAnnotationBase.vertexPoints,this.measureAnnotationModule);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}else if(pdfAnnotationBase.measureType==='Radius'){pdfAnnotationBase.notes=updateRadiusLabel(pdfAnnotationBase,this.measureAnnotationModule);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}else if(pdfAnnotationBase.measureType==='Perimeter'){pdfAnnotationBase.notes=updatePerimeterLabel(pdfAnnotationBase,pdfAnnotationBase.vertexPoints,this.measureAnnotationModule);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}else if(pdfAnnotationBase.measureType==='Area'){// eslint-disable-next-line max-len
pdfAnnotationBase.notes=this.measureAnnotationModule.calculateArea(pdfAnnotationBase.vertexPoints,pdfAnnotationBase.id,pdfAnnotationBase.pageIndex);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;updateCalibrateLabel(pdfAnnotationBase);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}else if(pdfAnnotationBase.measureType==='Volume'){// eslint-disable-next-line max-len
pdfAnnotationBase.notes=this.measureAnnotationModule.calculateVolume(pdfAnnotationBase.vertexPoints,pdfAnnotationBase.id,pdfAnnotationBase.pageIndex);if(pdfAnnotationBase.enableShapeLabel===true){pdfAnnotationBase.labelContent=pdfAnnotationBase.notes;updateCalibrateLabel(pdfAnnotationBase);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection('notes',pdfAnnotationBase.pageIndex,pdfAnnotationBase,isNewlyAdded);this.renderAnnotations(pdfAnnotationBase.pageIndex,null,null,null,null);}};/**
     * @private
     */Annotation.prototype.onAnnotationMouseDown=function(){if(this.pdfViewer.selectedItems.annotations.length===1&&this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType===null){if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){this.enableBasedOnType();this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(true);}}};Annotation.prototype.enableBasedOnType=function(){var isLock=false;// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];if(annotation&&annotation.annotationSettings){// eslint-disable-next-line
isLock=annotation.annotationSettings.isLock;if(isLock&&this.checkAllowedInteractions('PropertyChange',annotation)){isLock=false;}}if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(!isLock){if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Stamp'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Image'){this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='StickyNotes'){this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(true);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Path'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureImage'||this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='SignatureText'){this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(false);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(true);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='HandWrittenSignature'){this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);}else if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='Ink'){this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);}else{if(this.pdfViewer.selectedItems.annotations.length===1&&this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType===null){this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(true);}}}}};Annotation.prototype.getProperDate=function(date){var dateObject=new Date(date.toString());if(isNaN(dateObject.getFullYear())){var dateString=date.slice(2,16);// eslint-disable-next-line max-len
dateString=dateString.slice(0,4)+'/'+dateString.slice(4,6)+'/'+dateString.slice(6,8)+' '+dateString.slice(8,10)+':'+dateString.slice(10,12)+':'+dateString.slice(12,14);dateObject=new Date(dateString);}// eslint-disable-next-line max-len
return dateObject.getMonth()+1+'/'+dateObject.getDate()+'/'+dateObject.getFullYear()+' '+dateObject.getHours()+':'+dateObject.getMinutes()+':'+dateObject.getSeconds();};/**
     * @param pageAnnotations
     * @param pageNumber
     * @private
     */Annotation.prototype.getPageCollection=function(pageAnnotations,pageNumber){var index=null;for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].pageIndex===pageNumber){index=i;break;}}return index;};/**
     * @param annotations
     * @param id
     * @param annotations
     * @param id
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getAnnotationWithId=function(annotations,id){// eslint-disable-next-line
var annotation;for(var i=0;i<annotations.length;i++){if(id===annotations[i].id){annotation=annotations[i];}}return annotation;};/**
     * @param event
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getEventPageNumber=function(event){var eventTarget=event.target;if(eventTarget.classList.contains('e-pv-hyperlink')){eventTarget=eventTarget.parentElement;}else if(eventTarget.parentElement&&eventTarget.parentElement.classList.contains('foreign-object')){eventTarget=eventTarget.parentElement.parentElement.parentElement.parentElement;}else if(eventTarget.classList.contains('e-pdfviewer-formFields')&&eventTarget.attributes[0].nodeValue!="text"||eventTarget.classList.contains('e-pdfviewer-signatureformfields')){eventTarget=eventTarget.parentElement;}else if(eventTarget.classList.contains('e-pdfviewer-formFields')&&eventTarget.attributes[0].nodeValue=="text"){eventTarget=eventTarget.parentElement.parentElement;}var pageString;if(eventTarget){// eslint-disable-next-line
pageString=eventTarget.id.split('_text_')[1]||eventTarget.id.split('_textLayer_')[1]||eventTarget.id.split('_annotationCanvas_')[1]||eventTarget.id.split('_pageDiv_')[1];}if(isNaN(pageString)){event=this.pdfViewerBase.annotationEvent;if(event){eventTarget=event.target;// eslint-disable-next-line
pageString=eventTarget.id.split('_text_')[1]||eventTarget.id.split('_textLayer_')[1]||eventTarget.id.split('_annotationCanvas_')[1]||eventTarget.id.split('_pageDiv_')[1];}}// eslint-disable-next-line
return parseInt(pageString);};/**
     * @param commentsAnnotations
     * @param parentAnnotation
     * @param author
     * @param commentsAnnotations
     * @param parentAnnotation
     * @param author
     * @param commentsAnnotations
     * @param parentAnnotation
     * @param author
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getAnnotationComments=function(commentsAnnotations,parentAnnotation,author){var newArray=[];var annotationObject=null;if(commentsAnnotations){if(commentsAnnotations.length>0){for(var i=0;i<commentsAnnotations.length;i++){// eslint-disable-next-line
var annotation=commentsAnnotations[i];annotationObject={// eslint-disable-next-line max-len
shapeAnnotationType:'sticky',author:annotation.Author,modifiedDate:annotation.ModifiedDate,note:annotation.Note,state:annotation.State,stateModel:annotation.StateModel,comments:[],review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},annotName:annotation.AnnotName,parentId:parentAnnotation.AnnotName,subject:'Comments',isLock:annotation.IsLock};newArray[newArray.length]=annotationObject;}}}return newArray;};Annotation.prototype.getRandomNumber=function(){// eslint-disable-next-line
return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){// eslint-disable-next-line
var random=Math.random()*16|0;return random.toString(16);});};/**
     * @private
     */Annotation.prototype.createGUID=function(){// eslint-disable-next-line max-len
return this.getRandomNumber();};/**
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @param pageDiv
     * @param pageWidth
     * @param pageHeight
     * @param pageNumber
     * @param displayMode
     * @private
     */ // eslint-disable-next-line max-len
Annotation.prototype.createAnnotationLayer=function(pageDiv,pageWidth,pageHeight,pageNumber,displayMode){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(canvas){this.updateCanvas(canvas,pageWidth,pageHeight,pageNumber);return canvas;}else{// eslint-disable-next-line max-len
var annotationCanvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_annotationCanvas_'+pageNumber,className:'e-pv-annotation-canvas'});this.updateCanvas(annotationCanvas,pageWidth,pageHeight,pageNumber);pageDiv.appendChild(annotationCanvas);return annotationCanvas;}};/**
     * @param width
     * @param height
     * @param pageNumber
     * @private
     */Annotation.prototype.resizeAnnotations=function(width,height,pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(canvas){canvas.style.width=width+'px';canvas.style.height=height+'px';this.pdfViewerBase.applyElementStyles(canvas,pageNumber);}};/**
     * @param pageNumber
     * @private
     */Annotation.prototype.clearAnnotationCanvas=function(pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);var zoom=this.pdfViewerBase.getZoomFactor();var ratio=this.pdfViewerBase.getZoomRatio(zoom);if(canvas){var width=this.pdfViewerBase.pageSize[pageNumber].width;var height=this.pdfViewerBase.pageSize[pageNumber].height;canvas.width=width*ratio;canvas.height=height*ratio;canvas.style.width=width*zoom+'px';canvas.style.height=height*zoom+'px';}};/**
     * @param pageNumber
     * @param shapeAnnotation
     * @param measureShapeAnnotation
     * @param textMarkupAnnotation
     * @param canvas
     * @param isImportAnnotations
     * @param pageNumber
     * @param shapeAnnotation
     * @param measureShapeAnnotation
     * @param textMarkupAnnotation
     * @param canvas
     * @param isImportAnnotations
     * @param pageNumber
     * @param shapeAnnotation
     * @param measureShapeAnnotation
     * @param textMarkupAnnotation
     * @param canvas
     * @param isImportAnnotations
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.renderAnnotations=function(pageNumber,shapeAnnotation,measureShapeAnnotation,textMarkupAnnotation,canvas,isImportAnnotations){this.clearAnnotationCanvas(pageNumber);if(this.shapeAnnotationModule){if(isImportAnnotations){this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation,pageNumber,true);}else{this.shapeAnnotationModule.renderShapeAnnotations(shapeAnnotation,pageNumber);}}if(this.measureAnnotationModule){if(isImportAnnotations){this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation,pageNumber,true);}else{this.measureAnnotationModule.renderMeasureShapeAnnotations(measureShapeAnnotation,pageNumber);}}if(canvas!==null&&canvas!==undefined){canvas=canvas;}else{canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);}this.pdfViewer.drawing.refreshCanvasDiagramLayer(canvas,pageNumber);if(this.textMarkupAnnotationModule){if(isImportAnnotations){// eslint-disable-next-line
this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation,pageNumber,true);}else{// eslint-disable-next-line
this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(textMarkupAnnotation,pageNumber);}}};/**
     * @param pageNumber
     * @param annotation
     * @param annotationId
     * @param pageNumber
     * @param annotation
     * @param annotationId
     * @param pageNumber
     * @param annotation
     * @param annotationId
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.storeAnnotations=function(pageNumber,annotation,annotationId){// let annotationId: string = '_annotations_textMarkup';
// if (annotation is ITextMarkupAnnotation) {
//     annotationId = '_annotations_textMarkup';
// } else if (annotation as IShapeAnnotation) {
//     annotationId = '_annotations_shape';
// } else {
//     annotationId = '_annotations_stamp';
// }
// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);if(sessionSize>4500){this.clearAnnotationStorage();this.pdfViewerBase.isStorageExceed=true;}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+annotationId);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+annotationId];}var index=0;if(!storeObject){this.storeAnnotationCollections(annotation,pageNumber);var pageAnnotation={pageIndex:pageNumber,annotations:[]};pageAnnotation.annotations.push(annotation);index=pageAnnotation.annotations.indexOf(annotation);var annotationCollection=[];annotationCollection.push(pageAnnotation);var annotationStringified=JSON.stringify(annotationCollection);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+annotationId]=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+annotationId,annotationStringified);}}else{this.storeAnnotationCollections(annotation,pageNumber);var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+annotationId);}var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[pageIndex]){annotObject[pageIndex].annotations.push(annotation);index=annotObject[pageIndex].annotations.indexOf(annotation);}else{var markupAnnotation={pageIndex:pageNumber,annotations:[]};markupAnnotation.annotations.push(annotation);index=markupAnnotation.annotations.indexOf(annotation);annotObject.push(markupAnnotation);}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+annotationId]=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+annotationId,annotationStringified);}}return index;};/**
     * @param type
     * @private
     */Annotation.prototype.getArrowType=function(type){var decoratorShapes='None';switch(type){case'ClosedArrow':case'Closed':decoratorShapes='Arrow';break;case'OpenArrow':case'Open':decoratorShapes='OpenArrow';break;case'Square':decoratorShapes='Square';break;case'Circle':case'Round':decoratorShapes='Circle';break;case'Diamond':decoratorShapes='Diamond';break;case'Butt':decoratorShapes='Butt';break;case'Slash':// decoratorShapes = 'Slash';
break;}return decoratorShapes;};/**
     * @param arrow
     * @private
     */Annotation.prototype.getArrowTypeForCollection=function(arrow){var arrowType;switch(arrow){case'Arrow':arrowType='ClosedArrow';break;case'OpenArrow':case'Square':case'Circle':case'Diamond':case'None':arrowType=arrow.toString();break;case'Butt':arrowType='Butt';break;}return arrowType;};/**
     * @param bound
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getBounds=function(bound,pageIndex){var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails){if(pageDetails.rotation===1){return{left:bound.top,top:pageDetails.width-(bound.left+bound.width),width:bound.height,height:bound.width};}else if(pageDetails.rotation===2){// eslint-disable-next-line max-len
return{left:pageDetails.width-bound.left-bound.width,top:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};}else if(pageDetails.rotation===3){return{left:pageDetails.height-bound.top-bound.height,top:bound.left,width:bound.height,height:bound.width};}else{return bound;}}else{return bound;}};/**
     * @param bound
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getInkBounds=function(bound,pageIndex){var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails){if(pageDetails.rotation===1){return{x:bound.y,y:pageDetails.width-(bound.x+bound.width),width:bound.height,height:bound.width};}else if(pageDetails.rotation===2){// eslint-disable-next-line max-len
return{x:pageDetails.width-bound.x-bound.width,y:pageDetails.height-bound.y-bound.height,width:bound.width,height:bound.height};}else if(pageDetails.rotation===3){return{x:pageDetails.height-bound.y-bound.height,y:bound.x,width:bound.height,height:bound.width};}else{return bound;}}else{return bound;}};/**
     * @param points
     * @param pageIndex
     * @param points
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getVertexPoints=function(points,pageIndex){if(points){var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails.rotation===1){var points1=[];for(var i=0;i<points.length;i++){var point={x:points[i].y,y:pageDetails.width-points[i].x};points1.push(point);}return points1;}else if(pageDetails.rotation===2){var points2=[];for(var i=0;i<points.length;i++){var point={x:pageDetails.width-points[i].x,y:pageDetails.height-points[i].y};points2.push(point);}return points2;}else if(pageDetails.rotation===3){var points3=[];for(var i=0;i<points.length;i++){var point={x:pageDetails.height-points[i].y,y:points[i].x};points3.push(point);}return points3;}else{return points;}}};/**
     * @param pageIndex
     * @param shapeAnnotations
     * @param idString
     * @param pageIndex
     * @param shapeAnnotations
     * @param idString
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.getStoredAnnotations=function(pageIndex,shapeAnnotations,idString){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+idString);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+idString];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=null;}}else{annotationCollection=null;}return annotationCollection;};/**
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @param pdfAnnotationBase
     * @param isColor
     * @param isStroke
     * @param isThickness
     * @param isOpacity
     * @param isLineStart
     * @param isLineEnd
     * @param isDashArray
     * @param isFreeText
     * @param previousText
     * @param currentText
     * @private
     */ // eslint-disable-next-line max-len
Annotation.prototype.triggerAnnotationPropChange=function(pdfAnnotationBase,isColor,isStroke,isThickness,isOpacity,isLineStart,isLineEnd,isDashArray,isFreeText,previousText,currentText){var index=this.getAnnotationIndex(pdfAnnotationBase.pageIndex,pdfAnnotationBase.id);var type=this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.measureType);// eslint-disable-next-line max-len
var eventArgs={name:'annotationPropertiesChange',pageIndex:pdfAnnotationBase.pageIndex,annotationId:pdfAnnotationBase.annotName,annotationType:type,isColorChanged:isColor,isOpacityChanged:isOpacity,isThicknessChanged:isThickness,isStrokeColorChanged:isStroke};if(isFreeText){eventArgs.isFreeTextChanged=isFreeText;eventArgs.previousText=previousText;eventArgs.currentText=currentText;}if(isLineStart){eventArgs.isLineHeadStartStyleChanged=isLineStart;}if(isLineEnd){eventArgs.isLineHeadEndStyleChanged=isLineEnd;}if(isDashArray){eventArgs.isBorderDashArrayChanged=isDashArray;}this.pdfViewer._dotnetInstance.invokeMethodAsync('Trigger','AnnotationPropertiesChange',eventArgs);this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");};/**
     * @param pdfAnnotationBase
     * @private
     */Annotation.prototype.triggerAnnotationAdd=function(pdfAnnotationBase){// eslint-disable-next-line
var setting={opacity:pdfAnnotationBase.opacity,fillColor:pdfAnnotationBase.fillColor,strokeColor:pdfAnnotationBase.strokeColor,thickness:pdfAnnotationBase.thickness,author:pdfAnnotationBase.author,subject:pdfAnnotationBase.subject,modifiedDate:pdfAnnotationBase.modifiedDate};// eslint-disable-next-line
var bounds={x:pdfAnnotationBase.wrapper.bounds.x,y:pdfAnnotationBase.wrapper.bounds.y,left:pdfAnnotationBase.wrapper.bounds.x,top:pdfAnnotationBase.wrapper.bounds.y,width:pdfAnnotationBase.wrapper.bounds.width,height:pdfAnnotationBase.wrapper.bounds.height};var type=this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.measureType);if(type==='Line'||type==='Arrow'||type==='Distance'||type==='Perimeter'){setting.lineHeadStartStyle=this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);setting.borderDashArray=pdfAnnotationBase.borderDashArray;}var labelSettings;if(this.pdfViewer.enableShapeLabel){labelSettings={// eslint-disable-next-line max-len
fontColor:pdfAnnotationBase.fontColor,fontSize:pdfAnnotationBase.fontSize,fontFamily:pdfAnnotationBase.fontFamily,opacity:pdfAnnotationBase.labelOpacity,labelContent:pdfAnnotationBase.labelContent,fillColor:pdfAnnotationBase.labelFillColor};// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,bounds,setting,null,null,null,labelSettings);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,bounds,setting);}};/**
     * @param pdfAnnotationBase
     * @private
     */Annotation.prototype.triggerAnnotationResize=function(pdfAnnotationBase){// eslint-disable-next-line
var setting={opacity:pdfAnnotationBase.opacity,fillColor:pdfAnnotationBase.fillColor,strokeColor:pdfAnnotationBase.strokeColor,thickness:pdfAnnotationBase.thickness,author:pdfAnnotationBase.author,subject:pdfAnnotationBase.subject,modifiedDate:pdfAnnotationBase.modifiedDate};var index=this.getAnnotationIndex(pdfAnnotationBase.pageIndex,pdfAnnotationBase.id);// eslint-disable-next-line
var annotationBounds=pdfAnnotationBase.bounds;var currentPosition={left:annotationBounds.x,top:annotationBounds.y,x:annotationBounds.x,y:annotationBounds.y,width:annotationBounds.width,height:annotationBounds.height};// eslint-disable-next-line max-len
var previousPosition={left:this.oldProperties.x,top:this.oldProperties.y,width:this.oldProperties.width,height:this.oldProperties.height};var type=this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.measureType);if(type==='Line'||type==='Arrow'||type==='Distance'||type==='Perimeter'){setting.lineHeadStartStyle=this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);setting.borderDashArray=pdfAnnotationBase.borderDashArray;}var labelSettings;if(this.pdfViewer.enableShapeLabel&&pdfAnnotationBase.shapeAnnotationType!=='HandWrittenSignature'){labelSettings={// eslint-disable-next-line max-len
fontColor:pdfAnnotationBase.fontColor,fontSize:pdfAnnotationBase.fontSize,fontFamily:pdfAnnotationBase.fontFamily,opacity:pdfAnnotationBase.labelOpacity,labelContent:pdfAnnotationBase.labelContent,fillColor:pdfAnnotationBase.labelFillColor,notes:pdfAnnotationBase.notes};// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,currentPosition,setting,null,null,null,labelSettings);}else{if(pdfAnnotationBase.shapeAnnotationType==='HandWrittenSignature'||pdfAnnotationBase.shapeAnnotationType==='SignatureText'||pdfAnnotationBase.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureResize(pdfAnnotationBase.pageIndex,pdfAnnotationBase.signatureName,pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.opacity,pdfAnnotationBase.strokeColor,pdfAnnotationBase.thickness,currentPosition,previousPosition);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationResize(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,currentPosition,setting);}}if(this.pdfViewerBase.tool.startPosition.x!==this.pdfViewerBase.prevPosition.x||this.pdfViewerBase.tool.startPosition.y!==this.pdfViewerBase.prevPosition.y){this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");}};/**
     * @param pdfAnnotationBase
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.triggerAnnotationMove=function(pdfAnnotationBase,isMoving){// eslint-disable-next-line
var setting={opacity:pdfAnnotationBase.opacity,fillColor:pdfAnnotationBase.fillColor,strokeColor:pdfAnnotationBase.strokeColor,thickness:pdfAnnotationBase.thickness,author:pdfAnnotationBase.author,subject:pdfAnnotationBase.subject,modifiedDate:pdfAnnotationBase.modifiedDate};// eslint-disable-next-line
var annotationBounds=pdfAnnotationBase.bounds;var currentPosition={left:annotationBounds.x,top:annotationBounds.y,x:annotationBounds.x,y:annotationBounds.y,width:annotationBounds.width,height:annotationBounds.height};// eslint-disable-next-line max-len
var previousPosition;if(!this.oldProperties){previousPosition={left:annotationBounds.x,top:annotationBounds.y,width:annotationBounds.width,height:annotationBounds.height};}else{previousPosition={left:this.oldProperties.x?this.oldProperties.x:annotationBounds.x,top:this.oldProperties.y?this.oldProperties.y:annotationBounds.y,width:annotationBounds.width,height:annotationBounds.height};}var type=this.getAnnotationType(pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.measureType);if(type==='Line'||type==='Arrow'||type==='Distance'||type==='Perimeter'){setting.lineHeadStartStyle=this.getArrowString(pdfAnnotationBase.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(pdfAnnotationBase.taregetDecoraterShapes);setting.borderDashArray=pdfAnnotationBase.borderDashArray;}if(pdfAnnotationBase.shapeAnnotationType==='HandWrittenSignature'||pdfAnnotationBase.shapeAnnotationType==='SignatureText'||pdfAnnotationBase.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureMove(pdfAnnotationBase.pageIndex,pdfAnnotationBase.signatureName,pdfAnnotationBase.shapeAnnotationType,pdfAnnotationBase.opacity,pdfAnnotationBase.strokeColor,pdfAnnotationBase.thickness,previousPosition,currentPosition);this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");}else{// eslint-disable-next-line max-len
isMoving?this.pdfViewer.fireAnnotationMoving(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,setting,previousPosition,currentPosition):this.pdfViewer.fireAnnotationMove(pdfAnnotationBase.pageIndex,pdfAnnotationBase.annotName,type,setting,previousPosition,currentPosition);if(!isMoving){if(this.pdfViewerBase.tool.startPosition.x!==this.pdfViewerBase.prevPosition.x||this.pdfViewerBase.tool.startPosition.y!==this.pdfViewerBase.prevPosition.y){this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");}}}};/**
     * @param annotationId
     * @param pageNumber
     * @param annotation
     * @param annotationCollection
     * @param isDblClick
     * @param isSelected
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.annotationSelect=function(annotationId,pageNumber,annotation,annotationCollection,isDblClick,isSelected){// eslint-disable-next-line
var annotSettings;if(annotation.shapeAnnotationType==='textMarkup'){// eslint-disable-next-line max-len
annotSettings={type:'TextMarkup',subType:annotation.subject,opacity:annotation.opacity,color:annotation.color,textMarkupContent:annotation.textMarkupContent,textMarkupStartIndex:annotation.textMarkupStartIndex,textMarkupEndIndex:annotation.textMarkupEndIndex,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='StickyNotes'){annotSettings={type:'StickyNotes',opacity:annotation.opacity,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Stamp'||annotation.shapeAnnotationType==='Image'){annotSettings={type:'Stamp',opacity:annotation.opacity,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Ink'){annotSettings={// eslint-disable-next-line max-len
type:'Ink',opacity:annotation.opacity,strokeColor:annotation.strokeColor,thickness:annotation.thickness,modifiedDate:annotation.modifiedDate,width:annotation.bounds.width,height:annotation.bounds.height,left:annotation.bounds.x,top:annotation.bounds.y,data:annotation.data,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='FreeText'){annotSettings={type:'FreeText',opacity:annotation.opacity,fillColor:annotation.fillColor,// eslint-disable-next-line max-len
strokeColor:annotation.strokeColor,thickness:annotation.thickness,content:annotation.dynamicText,// eslint-disable-next-line max-len
fontFamily:annotation.fontFamily,fontSize:annotation.fontSize,fontColor:annotation.fontColor,textAlign:annotation.textAlign,fontStyle:this.updateFreeTextFontStyle(annotation.font),customData:annotation.customData};}else if(annotation.measureType===''){if(annotation.shapeAnnotationType==='Line'){// eslint-disable-next-line max-len
annotSettings={type:'Shape',subType:'Line',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,borderDashArray:annotation.borderDashArray,lineHeadStartStyle:annotation.sourceDecoraterShapes,lineHeadEndStyle:annotation.taregetDecoraterShapes,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Arrow'||annotation.shapeAnnotationType==='LineWidthArrowHead'){// eslint-disable-next-line max-len
annotSettings={type:'Shape',subType:'Arrow',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,borderDashArray:annotation.borderDashArray,lineHeadStartStyle:annotation.sourceDecoraterShapes,lineHeadEndStyle:annotation.taregetDecoraterShapes,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Rectangle'){annotSettings={type:'Shape',subType:'Rectangle',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Ellipse'){annotSettings={type:'Shape',subType:'Circle',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}else if(annotation.shapeAnnotationType==='Polygon'){annotSettings={type:'Shape',subType:'Polygon',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}}else if(annotation.measureType!==''){if(annotation.measureType==='Distance'){// eslint-disable-next-line max-len
annotSettings={type:'Measure',subType:'Distance',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,borderDashArray:annotation.borderDashArray,lineHeadStartStyle:annotation.sourceDecoraterShapes,lineHeadEndStyle:annotation.taregetDecoraterShapes,customData:annotation.customData};}else if(annotation.measureType==='Perimeter'){// eslint-disable-next-line max-len
annotSettings={type:'Measure',subType:'Perimeter',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,borderDashArray:annotation.borderDashArray,lineHeadStartStyle:annotation.sourceDecoraterShapes,lineHeadEndStyle:annotation.taregetDecoraterShapes,customData:annotation.customData};}else if(annotation.measureType==='Area'){annotSettings={type:'Measure',subType:'Area',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}else if(annotation.measureType==='Radius'){annotSettings={type:'Measure',subType:'Radius',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,customData:annotation.customData};}else if(annotation.measureType==='Volume'){annotSettings={type:'Measure',subType:'Volume',opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,calibrate:annotation.calibrate,annotationId:annotation.annotName,customData:annotation.customData};}}// eslint-disable-next-line
var overlappedCollection=[];// eslint-disable-next-line
var overlappedAnnotations=this.getOverlappedAnnotations(annotation,pageNumber);if(overlappedAnnotations&&this.overlappedCollections){// eslint-disable-next-line
var overlappedCollections=[];// eslint-disable-next-line
for(var i=0;i<overlappedAnnotations.length;i++){if(overlappedAnnotations[i].shapeAnnotationType!=='textMarkup'&&this.overlappedCollections||isSelected){for(var j=0;j<this.overlappedCollections.length;j++){if(overlappedAnnotations[i].annotName===this.overlappedCollections[j].annotName){overlappedCollections.push(overlappedAnnotations[i]);break;}}}else{overlappedCollections.push(overlappedAnnotations[i]);}}overlappedAnnotations=overlappedCollections;}if(this.pdfViewer.enableMultiLineOverlap){// eslint-disable-next-line
for(var i=0;i<overlappedAnnotations.length;i++){if(overlappedAnnotations[i].shapeAnnotationType==='textMarkup'){var isOverlapped=false;for(var j=0;j<overlappedAnnotations[i].bounds.length;j++){// eslint-disable-next-line
var bounds=this.orderTextMarkupBounds(overlappedAnnotations[i].bounds[j]);// eslint-disable-next-line
var clickedPosition=this.textMarkupAnnotationModule.annotationClickPosition;if(clickedPosition&&(clickedPosition.x||clickedPosition.y)){if(bounds.left<=clickedPosition.x&&bounds.left+bounds.width>=clickedPosition.x){if(bounds.top<=clickedPosition.y&&bounds.top+bounds.height>=clickedPosition.y){isOverlapped=true;}}}else{isOverlapped=true;}}if(!isOverlapped){overlappedAnnotations.splice(i,1);}}}}if(overlappedAnnotations&&overlappedAnnotations.length>0){annotationCollection=overlappedAnnotations;// eslint-disable-next-line
for(var i=0;i<annotationCollection.length;i++){// eslint-disable-next-line
var overlappedObject=cloneObject(annotationCollection[i]);overlappedObject.annotationId=annotationCollection[i].annotName;if(annotationId===annotationCollection[i].annotName&&annotation.measureType&&annotation.measureType==='Volume'){overlappedObject.calibrate=annotationCollection[i].calibrate;}delete overlappedObject.annotName;overlappedCollection.push(overlappedObject);}}else{overlappedCollection=null;}this.addFreeTextProperties(annotation,annotSettings);var annotationAddMode=annotation.annotationAddMode;if(!isDblClick){if(annotation.shapeAnnotationType==='Stamp'||annotation.shapeAnnotationType==='Image'){if(!this.pdfViewerBase.isNewStamp&&this.annotationSelected){if(overlappedCollection){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationSelect(annotationId,pageNumber,annotSettings,overlappedCollection,null,null,annotationAddMode);}else{this.pdfViewer.fireAnnotationSelect(annotationId,pageNumber,annotSettings,null,null,null,annotationAddMode);}}}else{var multiPageCollection=this.textMarkupAnnotationModule.multiPageCollectionList(annotation);if(multiPageCollection.length===0){multiPageCollection=null;}if(this.annotationSelected){if(overlappedCollection){isSelected=false;// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationSelect(annotationId,pageNumber,annotSettings,overlappedCollection,multiPageCollection,isSelected,annotationAddMode);}else{isSelected=true;// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationSelect(annotationId,pageNumber,annotSettings,null,multiPageCollection,isSelected,annotationAddMode);}}}}else{if(annotation.shapeAnnotationType==='Stamp'||annotation.shapeAnnotationType==='Image'){if(!this.pdfViewerBase.isNewStamp){this.pdfViewer.fireAnnotationDoubleClick(annotationId,pageNumber,annotSettings);}}else{if(sf.base.Browser.isDevice&&annotSettings.type!='FreeText'){this.pdfViewer.fireAnnotationDoubleClick(annotationId,pageNumber,annotSettings);}else if(sf.base.Browser.isDevice&&annotSettings.type=='FreeText'){this.pdfViewer.toolbarModule.annotationToolbarModule.adjustMobileToolbar(true);}else{this.pdfViewer.fireAnnotationDoubleClick(annotationId,pageNumber,annotSettings);}}}this.annotationSelected=true;};// eslint-disable-next-line
Annotation.prototype.selectSignature=function(signatureId,pageNumber,signatureModule){// eslint-disable-next-line
var annotBounds=signatureModule.bounds;// eslint-disable-next-line
var bounds={height:annotBounds.height,width:annotBounds.width,x:annotBounds.x,y:annotBounds.y};if(!this.pdfViewerBase.signatureAdded){// eslint-disable-next-line max-len
var signature={bounds:bounds,opacity:signatureModule.opacity,thickness:signatureModule.thickness,strokeColor:signatureModule.strokeColor};this.pdfViewer.fireSignatureSelect(signatureId,pageNumber,signature);}};// eslint-disable-next-line
Annotation.prototype.editSignature=function(signature){// eslint-disable-next-line
var currentAnnotation;if(signature.uniqueKey){// eslint-disable-next-line
currentAnnotation=this.pdfViewer.nameTable[signature.uniqueKey];}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}var pageNumber=currentAnnotation.pageIndex;if(currentAnnotation.shapeAnnotationType==='HandWrittenSignature'||currentAnnotation.shapeAnnotationType==='SignatureText'||currentAnnotation.shapeAnnotationType==='SignatureImage'){// eslint-disable-next-line
var clonedObject=cloneObject(currentAnnotation);// eslint-disable-next-line
var redoClonedObject=cloneObject(currentAnnotation);if(currentAnnotation.opacity!==signature.opacity){redoClonedObject.opacity=signature.opacity;this.pdfViewer.nodePropertyChange(currentAnnotation,{opacity:signature.opacity});// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,false,true,false,clonedObject.opacity,redoClonedObject.opacity);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Opacity','',clonedObject,redoClonedObject);}if(currentAnnotation.strokeColor!==signature.strokeColor){redoClonedObject.strokeColor=signature.strokeColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{strokeColor:signature.strokeColor});// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,true,false,false,clonedObject.strokeColor,redoClonedObject.strokeColor);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Stroke','',clonedObject,redoClonedObject);}if(currentAnnotation.thickness!==signature.thickness){redoClonedObject.thickness=signature.thickness;this.pdfViewer.nodePropertyChange(currentAnnotation,{thickness:signature.thickness});// eslint-disable-next-line max-len
this.pdfViewer.fireSignaturePropertiesChange(currentAnnotation.pageIndex,currentAnnotation.signatureName,currentAnnotation.shapeAnnotationType,false,false,true,clonedObject.thickness,redoClonedObject.thickness);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Thickness','',clonedObject,redoClonedObject);}currentAnnotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.renderDrawing();this.pdfViewerBase.signatureModule.modifySignatureCollection(null,pageNumber,currentAnnotation,true);}};// eslint-disable-next-line
Annotation.prototype.editAnnotation=function(annotation){// eslint-disable-next-line
var currentAnnotation;var annotationId;var annotationType;var pageNumber;var isTextMarkupUpdate=false;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;annotationId=currentAnnotation.annotName;pageNumber=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;}else{if(this.pdfViewer.selectedItems.annotations[0]){currentAnnotation=this.pdfViewer.selectedItems.annotations[0];annotationId=currentAnnotation.annotName;pageNumber=currentAnnotation.pageIndex;}}if(annotation.uniqueKey!==undefined){// eslint-disable-next-line
currentAnnotation=this.pdfViewer.nameTable[annotation.uniqueKey];currentAnnotation.annotationSettings.isLock=annotation.annotationSettings.isLock;var filteredAnnotation=this.pdfViewer.annotationCollection.filter(function(annotation){return annotation.annotationId===currentAnnotation.annotName;});if(filteredAnnotation.length>0){filteredAnnotation[0].annotationSettings.isLock=currentAnnotation.annotationSettings.isLock;}annotationId=currentAnnotation.annotName;pageNumber=currentAnnotation.pageIndex;if(annotation.allowedInteractions){var allowedInteractionsCount=annotation.allowedInteractions.length;for(var i=0;i<allowedInteractionsCount;i++){if(annotation.allowedInteractions[i]===0){annotation.allowedInteractions[i]=AllowedInteraction.Select;}if(annotation.allowedInteractions[i]===1){annotation.allowedInteractions[i]=AllowedInteraction.Move;}if(annotation.allowedInteractions[i]===2){annotation.allowedInteractions[i]=AllowedInteraction.Resize;}if(annotation.allowedInteractions[i]===3){annotation.allowedInteractions[i]=AllowedInteraction.Delete;}if(annotation.allowedInteractions[i]===4){annotation.allowedInteractions[i]=AllowedInteraction.PropertyChange;}if(annotation.allowedInteractions[i]===5){annotation.allowedInteractions[i]=AllowedInteraction.None;}}}// eslint-disable-next-line
currentAnnotation.allowedInteractions=annotation.allowedInteractions?annotation.allowedInteractions:this.updateAnnotationAllowedInteractions(annotation);}if(!currentAnnotation){if(annotation.shapeAnnotationType==='sticky'&&annotation.annotationId!==undefined){// eslint-disable-next-line
currentAnnotation=this.pdfViewer.nameTable[annotation.annotationId];currentAnnotation.annotationSettings.isLock=annotation.annotationSettings.isLock;annotationId=currentAnnotation.annotName;pageNumber=currentAnnotation.pageIndex;}}if(annotation.shapeAnnotationType==='textMarkup'){if(!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){// eslint-disable-next-line max-len
currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(annotation.pageNumber,annotation);for(var i=0;i<currentAnnotation.length;i++){if(annotation.annotationId===currentAnnotation[i].annotName){isTextMarkupUpdate=true;currentAnnotation=currentAnnotation[i];currentAnnotation.isPrint=annotation.isPrint;this.textMarkupAnnotationModule.currentTextMarkupAnnotation=currentAnnotation;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=currentAnnotation.pageNumber;currentAnnotation.allowedInteractions=annotation.allowedInteractions;pageNumber=currentAnnotation.pageNumber;annotationId=annotation.annotationId;break;}}}}if(currentAnnotation){// eslint-disable-next-line
var clonedObject=cloneObject(currentAnnotation);// eslint-disable-next-line
var redoClonedObject=cloneObject(currentAnnotation);if(annotation.shapeAnnotationType==='textMarkup'){annotationType='textMarkup';}if(annotation.type==='TextMarkup'||annotation.shapeAnnotationType==='textMarkup'){if(currentAnnotation.annotationSettings&&annotation.annotationSettings){if(currentAnnotation.annotationSettings.isLock!==annotation.annotationSettings.isLock){// eslint-disable-next-line max-len
var pageAnnotations=this.textMarkupAnnotationModule.modifyAnnotationProperty('AnnotationSettings',annotation.annotationSettings.isLock,null);// eslint-disable-next-line max-len
this.textMarkupAnnotationModule.manageAnnotations(pageAnnotations,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);}}if(currentAnnotation.opacity!==annotation.opacity){this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,annotation.opacity);}if(currentAnnotation.color!==annotation.color){this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(annotation.color);}annotationType='textMarkup';if(isTextMarkupUpdate){this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null;this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null;}// eslint-disable-next-line max-len
}else if(annotation&&annotation.stampAnnotationType==='image'&&annotation.shapeAnnotationType==='stamp'&&annotation.stampAnnotationPath){annotationType='stamp';if(currentAnnotation.data!==annotation.stampAnnotationPath){currentAnnotation.data=annotation.stampAnnotationPath;currentAnnotation.wrapper.children[0].imageSource=annotation.stampAnnotationPath;}if(annotation.opacity&&currentAnnotation.opacity!==annotation.opacity){this.annotationPropertyChange(currentAnnotation,annotation.opacity,'Shape Opacity',clonedObject,redoClonedObject);}this.calculateAnnotationBounds(currentAnnotation,annotation);// eslint-disable-next-line max-len
}else if(annotation.type==='StickyNotes'||annotation.type==='Stamp'||annotation.shapeAnnotationType==='sticky'||annotation.shapeAnnotationType==='stamp'){if(annotation.opacity&&currentAnnotation.opacity!==annotation.opacity){this.annotationPropertyChange(currentAnnotation,annotation.opacity,'Shape Opacity',clonedObject,redoClonedObject);}this.calculateAnnotationBounds(currentAnnotation,annotation);if(annotation.type==='StickyNotes'||annotation.shapeAnnotationType==='sticky'){annotationType='sticky';}else{annotationType='stamp';}// eslint-disable-next-line max-len
}else if(annotation.type==='Ink'||annotation.type==='Shape'||annotation.type==='Measure'||annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='Square'||annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Polygon'||annotation.shapeAnnotationType==='Polyline'||annotation.shapeAnnotationType==='Ink'){this.calculateAnnotationBounds(currentAnnotation,annotation);if(annotation.opacity&&currentAnnotation.opacity!==annotation.opacity){this.annotationPropertyChange(currentAnnotation,annotation.opacity,'Shape Opacity',clonedObject,redoClonedObject);}if(annotation.fillColor&&currentAnnotation.fillColor!==annotation.fillColor){redoClonedObject.fillColor=annotation.fillColor;if(annotation.labelSettings&&annotation.labelSettings.fillColor){annotation.labelSettings.fillColor=annotation.fillColor;}this.pdfViewer.nodePropertyChange(currentAnnotation,{fillColor:annotation.fillColor});this.triggerAnnotationPropChange(currentAnnotation,true,false,false,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Fill','',clonedObject,redoClonedObject);}if(annotation.strokeColor&&currentAnnotation.strokeColor!==annotation.strokeColor){redoClonedObject.strokeColor=annotation.strokeColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{strokeColor:annotation.strokeColor});this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Stroke','',clonedObject,redoClonedObject);}if(annotation.thickness&&currentAnnotation.thickness!==annotation.thickness){redoClonedObject.thickness=annotation.thickness;this.pdfViewer.nodePropertyChange(currentAnnotation,{thickness:annotation.thickness});this.triggerAnnotationPropChange(currentAnnotation,false,false,true,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Thickness','',clonedObject,redoClonedObject);}if(currentAnnotation.author!==annotation.author){redoClonedObject.author=annotation.author;this.pdfViewer.nodePropertyChange(currentAnnotation,{author:annotation.author});this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);}if(currentAnnotation.modifiedDate!==annotation.modifiedDate){redoClonedObject.modifiedDate=annotation.modifiedDate;this.pdfViewer.nodePropertyChange(currentAnnotation,{modifiedDate:annotation.modifiedDate});}if(currentAnnotation.subject!==annotation.subject){redoClonedObject.subject=annotation.subject;this.pdfViewer.nodePropertyChange(currentAnnotation,{subject:annotation.subject});this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Shape Stroke','',clonedObject,redoClonedObject);}if(this.pdfViewer.enableShapeLabel&&currentAnnotation.fontColor!==annotation.fontColor){redoClonedObject.fontColor=annotation.fontColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{fontColor:annotation.fontColor});}if(this.pdfViewer.enableShapeLabel&&annotation.labelSettings&&annotation.labelSettings.fillColor){if(currentAnnotation.labelFillColor!==annotation.labelSettings.fillColor){redoClonedObject.labelFillColor=annotation.labelSettings.fillColor;this.pdfViewer.nodePropertyChange(currentAnnotation,{labelFillColor:annotation.labelSettings.fillColor});}}// eslint-disable-next-line max-len
if(annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='Polyline'||annotation.shapeAnnotationType==='Polygon'){if(JSON.stringify(currentAnnotation.vertexPoints)!==JSON.stringify(annotation.vertexPoints)){currentAnnotation.vertexPoints=annotation.vertexPoints;this.pdfViewer.nodePropertyChange(currentAnnotation,{vertexPoints:annotation.vertexPoints});}}// eslint-disable-next-line max-len
if(annotation.subType==='Line'||annotation.subType==='Arrow'||annotation.subType==='Distance'||annotation.subType==='Perimeter'){var isSourceDecoraterShapesChanged=false;var isTargetDecoraterShapesChanged=false;var isBorderDashArrayChanged=false;clonedObject.lineHeadStart=currentAnnotation.sourceDecoraterShapes;clonedObject.lineHeadEnd=currentAnnotation.taregetDecoraterShapes;redoClonedObject.lineHeadStart=annotation.lineHeadStartStyle;redoClonedObject.lineHeadEnd=annotation.lineHeadEndStyle;redoClonedObject.borderDashArray=annotation.borderDashArray;if(currentAnnotation.taregetDecoraterShapes!==annotation.lineHeadEndStyle){isTargetDecoraterShapesChanged=true;}if(currentAnnotation.sourceDecoraterShapes!==annotation.lineHeadStartStyle){isSourceDecoraterShapesChanged=true;}if(currentAnnotation.borderDashArray!==annotation.borderDashArray){isBorderDashArrayChanged=true;}// eslint-disable-next-line max-len
this.pdfViewer.nodePropertyChange(currentAnnotation,{sourceDecoraterShapes:annotation.lineHeadStartStyle,taregetDecoraterShapes:annotation.lineHeadEndStyle,borderDashArray:annotation.borderDashArray});// eslint-disable-next-line max-len
this.triggerAnnotationPropChange(currentAnnotation,false,false,false,false,isSourceDecoraterShapesChanged,isTargetDecoraterShapesChanged,isBorderDashArrayChanged);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,'Line properties change','',clonedObject,redoClonedObject);}// eslint-disable-next-line max-len
if(annotation.type==='Shape'||annotation.shapeAnnotationType==='Line'||annotation.shapeAnnotationType==='Square'||annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Polygon'){annotationType='shape';}if(annotation.type==='Ink'||annotation.shapeAnnotationType==='Ink'){annotationType='ink';}// eslint-disable-next-line max-len
if(annotation.type==='Measure'||annotation.subject==='Distance calculation'||annotation.subject==='Perimeter calculation'||annotation.subject==='Radius calculation'||annotation.subject==='Area calculation'||annotation.subject==='Volume calculation'){annotationType='shape_measure';}if(annotation.labelSettings&&this.pdfViewer.enableShapeLabel){this.updateFreeTextProperties(currentAnnotation);this.pdfViewer.nodePropertyChange(currentAnnotation,{// eslint-disable-next-line max-len
labelOpacity:annotation.labelSettings.opacity,fontColor:annotation.labelSettings.fontColor,fontSize:annotation.labelSettings.fontSize,fontFamily:annotation.labelSettings.fontFamily,labelContent:annotation.labelSettings.labelContent,labelFillColor:annotation.labelSettings.fillColor});}if(this.pdfViewer.enableShapeLabel&&annotation.calibrate&&annotation.calibrate.depth){if(this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth!==annotation.calibrate.depth){this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=annotation.calibrate.depth;// eslint-disable-next-line max-len
currentAnnotation.notes=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(currentAnnotation.vertexPoints);currentAnnotation.labelContent=currentAnnotation.notes;if(annotation.labelSettings&&annotation.labelSettings.labelContent){annotation.labelSettings.labelContent=currentAnnotation.notes;}this.pdfViewer.nodePropertyChange(currentAnnotation,{labelContent:currentAnnotation.labelContent});}}}else if(annotation.type==='FreeText'||annotation.shapeAnnotationType==='FreeText'){annotationType='freetext';if(this.pdfViewer.freeTextSettings.enableAutoFit&&currentAnnotation.dynamicText!==annotation.content){// eslint-disable-next-line
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+currentAnnotation.pageIndex);var context=canvas.getContext("2d");var fontSize=annotation.fontSize;var font=void 0;var fontFamily=annotation.fontFamily;var zoomFactor=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
annotation.font.isBold?font='bold'+' '+fontSize+'px'+' '+fontFamily:font=fontSize+'px'+' '+fontFamily;context.font=font;var characterLength=8;var highestTextNode="";// eslint-disable-next-line
var textNodes=[];var textboxValue=annotation.content?annotation.content:annotation.dynamicText;if(textboxValue.indexOf('\n')>-1){textNodes=textboxValue.split('\n');for(var j=0;j<textNodes.length;j++){// eslint-disable-next-line
var textNodeData=context.measureText(textNodes[j]);// eslint-disable-next-line
var highestTextNodeData=context.measureText(highestTextNode);if(textNodeData.width>highestTextNodeData.width){highestTextNode=textNodes[j];}}}else{highestTextNode=textboxValue;}// eslint-disable-next-line
var textwidth=context.measureText(highestTextNode);annotation.bounds.width=Math.ceil(textwidth.width+(characterLength+1)*2);var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+annotation.pageIndex);var maxWidth=pageDiv.clientWidth-annotation.bounds.left*zoomFactor;if(annotation.bounds.width>maxWidth){annotation.bounds.width=maxWidth/zoomFactor;}var height=annotation.bounds.height;annotation.bounds.height=height>=currentAnnotation.bounds.height?height:currentAnnotation.bounds.height;}annotation.content=annotation.content?annotation.content:annotation.dynamicText;this.calculateAnnotationBounds(currentAnnotation,annotation);this.pdfViewer.nodePropertyChange(currentAnnotation,{// eslint-disable-next-line max-len
opacity:annotation.opacity,fontColor:annotation.fontColor,fontSize:annotation.fontSize,fontFamily:annotation.fontFamily,// eslint-disable-next-line max-len
dynamicText:annotation.content?annotation.content:annotation.dynamicText,fillColor:annotation.fillColor,textAlign:annotation.textAlign,strokeColor:annotation.strokeColor,thickness:annotation.thickness,font:annotation.fontStyle?this.setFreeTextFontStyle(annotation.fontStyle):this.setFreeTextFontStyle(annotation.font),isReadonly:annotation.isReadonly});if(annotation.opacity&&currentAnnotation.opacity!==annotation.opacity){this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);}if(annotation.fillColor&&currentAnnotation.fillColor!==annotation.fillColor){this.triggerAnnotationPropChange(currentAnnotation,true,false,false,false);}if(annotation.strokeColor&&currentAnnotation.strokeColor!==annotation.strokeColor){this.triggerAnnotationPropChange(currentAnnotation,false,true,false,false);}if(annotation.thickness&&currentAnnotation.thickness!==annotation.thickness){this.triggerAnnotationPropChange(currentAnnotation,false,false,true,false);}this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFreeText',annotation.Id,annotation.content);}currentAnnotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();if(currentAnnotation.customData!==annotation.customData){currentAnnotation.customData=annotation.customData;}currentAnnotation.isPrint=annotation.isPrint;if(annotation.type!=='TextMarkup'){this.pdfViewer.renderDrawing();this.updateCollection(annotationId,pageNumber,annotation,annotationType);}}};// eslint-disable-next-line
Annotation.prototype.annotationPropertyChange=function(currentAnnotation,opacity,actionString,clonedObject,redoClonedObject){this.pdfViewer.nodePropertyChange(currentAnnotation,{opacity:opacity});this.triggerAnnotationPropChange(currentAnnotation,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(currentAnnotation.pageIndex,null,currentAnnotation,actionString,'',clonedObject,redoClonedObject);};// eslint-disable-next-line
Annotation.prototype.calculateAnnotationBounds=function(currentAnnotation,annotation){// eslint-disable-next-line
var bounds=this.pdfViewerBase.convertBounds(currentAnnotation.wrapper.bounds);// eslint-disable-next-line
var annotBounds=this.pdfViewerBase.convertBounds(annotation.bounds);if(bounds&&annotBounds){// eslint-disable-next-line
if(JSON.stringify(bounds)!==JSON.stringify(annotBounds)&&Math.abs(bounds.Y-annotBounds.Y)>2||Math.abs(bounds.X-annotBounds.X)>2||Math.abs(bounds.Width-annotBounds.Width)>2||Math.abs(bounds.Height-annotBounds.Height)>2){// eslint-disable-next-line
var annotationBounds={x:annotBounds.X+annotBounds.Width/2,y:annotBounds.Y+annotBounds.Height/2,width:annotBounds.Width,height:annotBounds.Height};this.pdfViewer.nodePropertyChange(currentAnnotation,{bounds:annotationBounds});this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);this.triggerAnnotationPropChange(currentAnnotation,false,false,false,false);}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateFreeTextProperties=function(annotation){if(annotation.labelSettings){if(annotation.labelSettings.fillColor){annotation.labelFillColor=annotation.labelSettings.fillColor;}if(annotation.labelSettings.fontColor){annotation.fontColor=annotation.labelSettings.fontColor;}if(annotation.labelSettings.fontSize){annotation.fontSize=annotation.labelSettings.fontSize;}if(annotation.labelSettings.fontFamily){annotation.fontFamily=annotation.labelSettings.fontFamily;}if(annotation.labelSettings.opacity){annotation.labelOpacity=annotation.labelSettings.opacity;}if(annotation.labelSettings.labelContent){annotation.labelContent=annotation.labelSettings.labelContent;}}};/**
     * @param annotation
     * @param currentAnnotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.addFreeTextProperties=function(annotation,currentAnnotation){if(this.pdfViewer.enableShapeLabel&&annotation&&currentAnnotation){currentAnnotation.labelSettings={fontColor:annotation.fontColor,fontSize:annotation.fontSize,fontFamily:annotation.fontFamily,opacity:annotation.labelOpacity,labelContent:annotation.labelContent,fillColor:annotation.labelFillColor};}};Annotation.prototype.updateMeasurementSettings=function(){if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation){// eslint-disable-next-line max-len
var ratioString='1 '+this.pdfViewer.measurementSettings.conversionUnit+' = '+this.pdfViewer.measurementSettings.scaleRatio+' '+this.pdfViewer.measurementSettings.displayUnit;this.measureAnnotationModule.updateMeasureValues(ratioString,this.pdfViewer.measurementSettings.displayUnit,this.pdfViewer.measurementSettings.conversionUnit,this.pdfViewer.measurementSettings.depth);}};// eslint-disable-next-line
Annotation.prototype.updateCollection=function(annotationId,pageNumber,annotation,annotationType){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+annotationType);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+annotationType];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotationCollection=annotObject[index].annotations;if(annotationCollection!==null){for(var i=0;i<annotationCollection.length;i++){if(annotationCollection[i].annotName===annotationId){// eslint-disable-next-line
var newAnnot=this.modifyAnnotationProperties(annotationCollection[i],annotation,annotationType);annotationCollection[i]=newAnnot;}}if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_'+annotationType);}if(annotObject[index]){annotObject[index].annotations=annotationCollection;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){// eslint-disable-next-line max-len
this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+annotationType]=annotationStringified;}else{// eslint-disable-next-line max-len
window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_'+annotationType,annotationStringified);}}}}};// eslint-disable-next-line
Annotation.prototype.modifyAnnotationProperties=function(newAnnotation,annotation,annotationType){if(annotation&&annotation.isCommentLock===true){newAnnotation.isCommentLock=annotation.isCommentLock;}if(annotation.comments){for(var j=0;j<annotation.comments.length;j++){if(annotation.comments[j].isLock===true){newAnnotation.comments[j].isLock=annotation.comments[j].isLock;}}}if(annotation&&annotation.note!==''&&annotation.note!==undefined){newAnnotation.note=annotation.note;}if(annotationType==='textMarkup'){newAnnotation.opacity=annotation.opacity;newAnnotation.color=annotation.color;newAnnotation.allowedInteractions=annotation.allowedInteractions;}else if(annotationType==='sticky'||annotationType==='stamp'){if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}newAnnotation.opacity=annotation.opacity;newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;if(annotation.stampAnnotationPath){newAnnotation.stampAnnotationPath=annotation.stampAnnotationPath;}}else if(annotationType==='ink'){if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}newAnnotation.opacity=annotation.opacity;newAnnotation.strokeColor=annotation.strokeColor;newAnnotation.thickness=annotation.thickness;newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;}else if(annotationType==='shape'||annotationType==='shape_measure'){if(annotation.subType==='Line'||annotation.subType==='Arrow'||annotation.subType==='Distance'||annotation.subType==='Perimeter'){if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}if(annotation.vertexPoint){newAnnotation.vertexPoints=annotation.vertexPoints;}newAnnotation.opacity=annotation.opacity;newAnnotation.fillColor=annotation.fillColor;newAnnotation.strokeColor=annotation.strokeColor;newAnnotation.thickness=annotation.thickness;newAnnotation.borderDashArray=annotation.borderDashArray;newAnnotation.lineHeadStart=this.getArrowTypeForCollection(annotation.lineHeadStartStyle);newAnnotation.lineHeadEnd=this.getArrowTypeForCollection(annotation.lineHeadEndStyle);newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;}else{if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}if(annotation.vertexPoint){newAnnotation.vertexPoints=annotation.vertexPoints;}newAnnotation.opacity=annotation.opacity;newAnnotation.fillColor=annotation.fillColor;newAnnotation.strokeColor=annotation.strokeColor;newAnnotation.thickness=annotation.thickness;newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;if(annotation.calibrate){if(newAnnotation.annotName===annotation.annotationId){if(newAnnotation.calibrate.depth!==annotation.calibrate.depth){newAnnotation.calibrate.depth=annotation.calibrate.depth;this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=annotation.calibrate.depth;// eslint-disable-next-line max-len
newAnnotation.note=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(newAnnotation.vertexPoints);}}}}if(this.pdfViewer.enableShapeLabel&&annotation.labelSettings){var text=annotation.labelSettings.labelContent;newAnnotation.note=text;newAnnotation.fontSize=annotation.labelSettings.fontSize;newAnnotation.labelFillColor=annotation.labelSettings.fillColor;if(newAnnotation.labelContent){newAnnotation.labelContent=text;}if(newAnnotation.labelSettings){newAnnotation.labelSettings=annotation.labelSettings;}}}else if(annotationType==='freetext'){if(annotation.bounds){newAnnotation.bounds=annotation.bounds;}newAnnotation.opacity=annotation.opacity;newAnnotation.strokeColor=annotation.strokeColor;newAnnotation.thickness=annotation.thickness;if(annotation.content){newAnnotation.dynamicText=annotation.content;}newAnnotation.fontFamily=annotation.fontFamily;newAnnotation.fontSize=annotation.fontSize;newAnnotation.fontColor=annotation.fontColor;newAnnotation.fillColor=annotation.fillColor;newAnnotation.font=annotation.font?annotation.font:annotation.fontStyle;newAnnotation.textAlign=annotation.textAlign;newAnnotation.annotationSettings=annotation.annotationSettings;newAnnotation.allowedInteractions=annotation.allowedInteractions;newAnnotation.isReadonly=annotation.isReadonly;}newAnnotation.customData=annotation.customData;newAnnotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();newAnnotation.isPrint=annotation.isPrint;if(annotation.annotationSettings&&!sf.base.isNullOrUndefined(annotation.annotationSettings.isLock)){newAnnotation.isLocked=annotation.annotationSettings.isLock;}return newAnnotation;};/**
     * @param annotationType
     * @param annotationSubType
     * @param annotationType
     * @param annotationSubType
     * @private
     */Annotation.prototype.updateAnnotationAuthor=function(annotationType,annotationSubType){var annotationAuthor;if(annotationType==='sticky'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.stickyNotesSettings.author!=='Guest'?this.pdfViewer.stickyNotesSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationType==='stamp'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.stampSettings.author!=='Guest'?this.pdfViewer.stampSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationType==='shape'){if(annotationSubType==='Line'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.lineSettings.author!=='Guest'?this.pdfViewer.lineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='LineWidthArrowHead'||annotationSubType==='Arrow'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.arrowSettings.author!=='Guest'?this.pdfViewer.arrowSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Circle'||annotationSubType==='Ellipse'||annotationSubType==='Oval'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.circleSettings.author!=='Guest'?this.pdfViewer.circleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Rectangle'||annotationSubType==='Square'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.rectangleSettings.author!=='Guest'?this.pdfViewer.rectangleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Polygon'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.polygonSettings.author!=='Guest'?this.pdfViewer.polygonSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}}else if(annotationType==='measure'){if(annotationSubType==='Distance'||annotationSubType==='Distance calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.distanceSettings.author!=='Guest'?this.pdfViewer.distanceSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Perimeter'||annotationSubType==='Perimeter calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.perimeterSettings.author!=='Guest'?this.pdfViewer.perimeterSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Radius'||annotationSubType==='Radius calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.radiusSettings.author!=='Guest'?this.pdfViewer.radiusSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Area'||annotationSubType==='Area calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.areaSettings.author!=='Guest'?this.pdfViewer.areaSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Volume'||annotationSubType==='Volume calculation'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.volumeSettings.author!=='Guest'?this.pdfViewer.volumeSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}}else if(annotationType==='textMarkup'){if(annotationSubType==='Highlight'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.highlightSettings.author!=='Guest'?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Underline'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.underlineSettings.author!=='Guest'?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationSubType==='Strikethrough'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.strikethroughSettings.author!=='Guest'?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else{// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.annotationSettings.author;}}else if(annotationType==='freeText'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.freeTextSettings.author!=='Guest'?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}else if(annotationType==='ink'){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.inkAnnotationSettings.author!=='Guest'?this.pdfViewer.inkAnnotationSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';}if(!annotationAuthor){// eslint-disable-next-line max-len
annotationAuthor=this.pdfViewer.annotationSettings.author;}return annotationAuthor;};/**
     * @param colour
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.nameToHash=function(colour){// eslint-disable-next-line
var colours={'aliceblue':'#f0f8ff','antiquewhite':'#faebd7','aqua':'#00ffff','aquamarine':'#7fffd4','azure':'#f0ffff','beige':'#f5f5dc','bisque':'#ffe4c4','black':'#000000','blanchedalmond':'#ffebcd','blue':'#0000ff','blueviolet':'#8a2be2','brown':'#a52a2a','burlywood':'#deb887','yellow':'#ffff00','yellowgreen':'#9acd32','cadetblue':'#5f9ea0','chartreuse':'#7fff00','chocolate':'#d2691e','coral':'#ff7f50','cornflowerblue':'#6495ed','cornsilk':'#fff8dc','crimson':'#dc143c','cyan':'#00ffff','darkblue':'#00008b','darkcyan':'#008b8b','darkgoldenrod':'#b8860b','darkgray':'#a9a9a9','darkred':'#8b0000','darksalmon':'#e9967a','darkgreen':'#006400','darkkhaki':'#bdb76b','darkmagenta':'#8b008b','darkolivegreen':'#556b2f','darkorange':'#ff8c00','darkorchid':'#9932cc','darkseagreen':'#8fbc8f','darkslateblue':'#483d8b','darkslategray':'#2f4f4f','darkturquoise':'#00ced1','darkviolet':'#9400d3','deeppink':'#ff1493','deepskyblue':'#00bfff','dimgray':'#696969','dodgerblue':'#1e90ff','firebrick':'#b22222','floralwhite':'#fffaf0','forestgreen':'#228b22','fuchsia':'#ff00ff','gainsboro':'#dcdcdc','ghostwhite':'#f8f8ff','gold':'#ffd700','goldenrod':'#daa520','gray':'#808080','green':'#008000','greenyellow':'#adff2f','honeydew':'#f0fff0','hotpink':'#ff69b4','indianred ':'#cd5c5c','mediumorchid':'#ba55d3','mediumpurple':'#9370d8','indigo':'#4b0082','ivory':'#fffff0','navy':'#000080','oldlace':'#fdf5e6','olive':'#808000','khaki':'#f0e68c','lavender':'#e6e6fa','lavenderblush':'#fff0f5','lawngreen':'#7cfc00','lemonchiffon':'#fffacd','lightblue':'#add8e6','lightcoral':'#f08080','lightcyan':'#e0ffff','lightgoldenrodyellow':'#fafad2','lightgrey':'#d3d3d3','lightgreen':'#90ee90','lightpink':'#ffb6c1','lightsalmon':'#ffa07a','lightseagreen':'#20b2aa','lightskyblue':'#87cefa','lightslategray':'#778899','lightsteelblue':'#b0c4de','lightyellow':'#ffffe0','lime':'#00ff00','limegreen':'#32cd32','linen':'#faf0e6','magenta':'#ff00ff','maroon':'#800000','mediumaquamarine':'#66cdaa','mediumblue':'#0000cd','mediumseagreen':'#3cb371','mediumslateblue':'#7b68ee','mediumspringgreen':'#00fa9a','mediumturquoise':'#48d1cc','mediumvioletred':'#c71585','midnightblue':'#191970','mintcream':'#f5fffa','mistyrose':'#ffe4e1','moccasin':'#ffe4b5','navajowhite':'#ffdead','rebeccapurple':'#663399','red':'#ff0000','rosybrown':'#bc8f8f','royalblue':'#4169e1','olivedrab':'#6b8e23','orange':'#ffa500','orangered':'#ff4500','orchid':'#da70d6','palegoldenrod':'#eee8aa','palegreen':'#98fb98','paleturquoise':'#afeeee','palevioletred':'#d87093','papayawhip':'#ffefd5','peachpuff':'#ffdab9','peru':'#cd853f','wheat':'#f5deb3','white':'#ffffff','whitesmoke':'#f5f5f5','pink':'#ffc0cb','plum':'#dda0dd','steelblue':'#4682b4','violet':'#ee82ee','powderblue':'#b0e0e6','purple':'#800080','saddlebrown':'#8b4513','salmon':'#fa8072','sandybrown':'#f4a460','seagreen':'#2e8b57','seashell':'#fff5ee','sienna':'#a0522d','silver':'#c0c0c0','skyblue':'#87ceeb','slateblue':'#6a5acd','slategray':'#708090','snow':'#fffafa','springgreen':'#00ff7f','tan':'#d2b48c','teal':'#008080','thistle':'#d8bfd8','tomato':'#ff6347','turquoise':'#40e0d0'};if(typeof colours[colour.toLowerCase()]!=='undefined'){return colours[colour.toLowerCase()];}return'';};// eslint-disable-next-line
Annotation.prototype.updateFreeTextFontStyle=function(font){// eslint-disable-next-line
var fontStyle=0;if(font.isBold===1){fontStyle=1;}else if(font.isItalic===2){fontStyle=2;}else if(font.isUnderline===4){fontStyle=4;}else if(font.isStrikeout){fontStyle=8;}else{fontStyle={isBold:font.isBold,isItalic:font.isItalic,isUnderline:font.isUnderline,isStrikeout:font.isUnderline};}return fontStyle;};// eslint-disable-next-line
Annotation.prototype.setFreeTextFontStyle=function(fontStyle){if(fontStyle===1){return{isBold:true};}else if(fontStyle===2){return{isItalic:true};}else if(fontStyle===4){return{isUnderline:true};}else if(fontStyle===8){return{isStrikeout:true};}else{return{isBold:fontStyle.isBold,isItalic:fontStyle.isItalic,isUnderline:fontStyle.isUnderline,isStrikeout:fontStyle.isUnderline};}};/**
     * @param annotation
     * @param isSettings
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.findAnnotationSettings=function(annotation,isSettings){// eslint-disable-next-line
var annotSettings=this.pdfViewer.annotationSettings;if(annotation){// eslint-disable-next-line
var shapeType=annotation.shapeAnnotationType;if(shapeType==='StickyNotes'&&this.pdfViewer.stickyNotesSettings){annotSettings=this.pdfViewer.stickyNotesSettings;}else if(shapeType==='Stamp'||shapeType==='Image'){annotSettings=this.pdfViewer.stampSettings;// eslint-disable-next-line max-len
if(shapeType==='image'||shapeType==='Image'){annotSettings=this.pdfViewer.customStampSettings;}}else if(shapeType==='FreeText'){annotSettings=this.pdfViewer.freeTextSettings;}else if(shapeType==='HandWrittenSignature'){annotSettings=this.pdfViewer.handWrittenSignatureSettings;}else if(annotation.measureType===''){if(shapeType==='Line'){annotSettings=this.pdfViewer.lineSettings;// eslint-disable-next-line max-len
}else if(shapeType==='Arrow'||shapeType==='LineWidthArrowHead'){annotSettings=this.pdfViewer.arrowSettings;}else if(shapeType==='Rectangle'){annotSettings=this.pdfViewer.rectangleSettings;// eslint-disable-next-line max-len
}else if(shapeType==='Circle'||shapeType==='Ellipse'){annotSettings=this.pdfViewer.circleSettings;}else if(shapeType==='Polygon'&&this.pdfViewer.polygonSettings){annotSettings=this.pdfViewer.polygonSettings;}}else if(annotation.measureType!==''){if(annotation.measureType==='Distance'){annotSettings=this.pdfViewer.distanceSettings;}else if(annotation.measureType==='Perimeter'){annotSettings=this.pdfViewer.perimeterSettings;}else if(annotation.measureType==='Area'){annotSettings=this.pdfViewer.areaSettings;}else if(annotation.measureType==='Radius'){annotSettings=this.pdfViewer.radiusSettings;}else if(annotation.measureType==='Volume'){annotSettings=this.pdfViewer.volumeSettings;}}}var settings=annotation?annotation.annotationSettings:{};if(settings&&(settings.minWidth||settings.maxWidth||settings.minHeight||settings.maxHeight)){return this.updateSettings(settings);}else if(isSettings){return this.updateSettings(annotSettings);}else{return annotSettings;}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateAnnotationSettings=function(annotation){// eslint-disable-next-line
var annotSettings=this.pdfViewer.annotationSettings;if(annotation.AnnotType==='sticky'){annotSettings=this.pdfViewer.stickyNotesSettings;}else if(annotation.AnnotType==='stamp'||annotation.AnnotType==='image'||annotation.AnnotType==='Image'){annotSettings=this.pdfViewer.stampSettings;// eslint-disable-next-line max-len
if(annotation.Subject==='image'||annotation.Subject==='Image'){annotSettings=this.pdfViewer.customStampSettings;}}else if(annotation.AnnotType==='freeText'){annotSettings=this.pdfViewer.freeTextSettings;}else if(annotation.AnnotType==='ink'){annotSettings=this.pdfViewer.inkAnnotationSettings;}else if(annotation.AnnotType==='shape'){if(annotation.Subject==='Line'){annotSettings=this.pdfViewer.lineSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Arrow'||annotation.Subject==='LineWidthArrowHead'){annotSettings=this.pdfViewer.arrowSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Rectangle'||annotation.Subject==='Square'){annotSettings=this.pdfViewer.rectangleSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Circle'||annotation.Subject==='Ellipse'||annotation.Subject==='Oval'){annotSettings=this.pdfViewer.circleSettings;}else if(annotation.Subject==='Polygon'){annotSettings=this.pdfViewer.polygonSettings;}}else if(annotation.AnnotType==='shape_measure'){// eslint-disable-next-line max-len
if(annotation.Subject==='Distance'||annotation.Subject==='Distance calculation'){annotSettings=this.pdfViewer.distanceSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Perimeter'||annotation.Subject==='Perimeter calculation'){annotSettings=this.pdfViewer.perimeterSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Area'||annotation.Subject==='Area calculation'){annotSettings=this.pdfViewer.areaSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Radius'||annotation.Subject==='Radius calculation'){annotSettings=this.pdfViewer.radiusSettings;// eslint-disable-next-line max-len
}else if(annotation.Subject==='Volume'||annotation.Subject==='Volume calculation'){annotSettings=this.pdfViewer.volumeSettings;}}return this.updateSettings(annotSettings);};/**
     * @param annotationSettings
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateSettings=function(annotationSettings){var maxHeight=0;var maxWidth=0;var minHeight=0;var minWidth=0;var isLock=false;var isPrint=true;// eslint-disable-next-line
var settings=this.pdfViewer.annotationSettings;if(annotationSettings.minWidth||annotationSettings.maxWidth||annotationSettings.minHeight||annotationSettings.maxHeight){maxHeight=annotationSettings.maxHeight?annotationSettings.maxHeight:2000;maxWidth=annotationSettings.maxWidth?annotationSettings.maxWidth:2000;minHeight=annotationSettings.minHeight?annotationSettings.minHeight:0;minWidth=annotationSettings.minWidth?annotationSettings.minWidth:0;}else if(settings.minWidth||settings.maxWidth||settings.minHeight||settings.maxHeight){maxHeight=settings.maxHeight?settings.maxHeight:2000;maxWidth=settings.maxWidth?settings.maxWidth:2000;minHeight=settings.minHeight?settings.minHeight:0;minWidth=settings.minWidth?settings.minWidth:0;}isLock=annotationSettings.isLock?annotationSettings.isLock:settings.isLock?settings.isLock:false;isPrint=annotationSettings.isPrint;return{minWidth:minWidth,maxWidth:maxWidth,minHeight:minHeight,maxHeight:maxHeight,isLock:isLock,isPrint:isPrint};};// eslint-disable-next-line
Annotation.prototype.getOverlappedAnnotations=function(annotation,pageNumber){// eslint-disable-next-line
var pageCollections=this.getPageShapeAnnotations(pageNumber);// eslint-disable-next-line
var selectedAnnotation;for(var i=0;i<pageCollections.length;i++){if(annotation.annotName===pageCollections[i].annotName){selectedAnnotation=pageCollections[i];break;}}// eslint-disable-next-line
var annotationCollection=this.findOverlappedAnnotations(selectedAnnotation,pageCollections);return annotationCollection;};// eslint-disable-next-line
Annotation.prototype.getPageShapeAnnotations=function(pageNumber){// eslint-disable-next-line
var pageCollections=[];// eslint-disable-next-line
var inkObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');if(inkObject){var inkAnnotObject=JSON.parse(inkObject);if(inkAnnotObject){var index=this.getPageCollection(inkAnnotObject,pageNumber);if(inkAnnotObject[index]){// eslint-disable-next-line
var inkAnnotations=inkAnnotObject[index].annotations;if(inkAnnotations&&inkAnnotations.length>0){for(var i=0;i<inkAnnotations.length;i++){pageCollections.push(inkAnnotations[i]);}}}}}// eslint-disable-next-line
var shapeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape');if(shapeObject){var shapeAnnotObject=JSON.parse(shapeObject);if(shapeAnnotObject){var index=this.getPageCollection(shapeAnnotObject,pageNumber);if(shapeAnnotObject[index]){// eslint-disable-next-line
var shapeAnnotations=shapeAnnotObject[index].annotations;if(shapeAnnotations&&shapeAnnotations.length>0){for(var i=0;i<shapeAnnotations.length;i++){pageCollections.push(shapeAnnotations[i]);}}}}}// eslint-disable-next-line
var measureObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');if(measureObject){var measureAnnotationObject=JSON.parse(measureObject);if(measureAnnotationObject){var index=this.getPageCollection(measureAnnotationObject,pageNumber);if(measureAnnotationObject[index]){// eslint-disable-next-line
var measureAnnotations=measureAnnotationObject[index].annotations;if(measureAnnotations&&measureAnnotations.length>0){for(var i=0;i<measureAnnotations.length;i++){pageCollections.push(measureAnnotations[i]);}}}}}// eslint-disable-next-line
var stampObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(stampObject){var stampAnnotationObject=JSON.parse(stampObject);if(stampAnnotationObject){var index=this.getPageCollection(stampAnnotationObject,pageNumber);if(stampAnnotationObject[index]){// eslint-disable-next-line
var stampAnnotations=stampAnnotationObject[index].annotations;if(stampAnnotations&&stampAnnotations.length>0){for(var i=0;i<stampAnnotations.length;i++){pageCollections.push(stampAnnotations[i]);}}}}}// eslint-disable-next-line
var freeTextObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_freetext');if(freeTextObject){var freeTextAnnotationObject=JSON.parse(freeTextObject);if(freeTextAnnotationObject){var index=this.getPageCollection(freeTextAnnotationObject,pageNumber);if(freeTextAnnotationObject[index]){// eslint-disable-next-line
var freeTextAnnotations=freeTextAnnotationObject[index].annotations;if(freeTextAnnotations&&freeTextAnnotations.length>0){for(var i=0;i<freeTextAnnotations.length;i++){pageCollections.push(freeTextAnnotations[i]);}}}}}// eslint-disable-next-line
var stickyObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sticky');if(stickyObject){var stickyNotesAnnotationObject=JSON.parse(stickyObject);if(stickyNotesAnnotationObject){var index=this.getPageCollection(stickyNotesAnnotationObject,pageNumber);if(stickyNotesAnnotationObject[index]){// eslint-disable-next-line
var stickyNotesAnnotations=stickyNotesAnnotationObject[index].annotations;if(stickyNotesAnnotations&&stickyNotesAnnotations.length>0){for(var i=0;i<stickyNotesAnnotations.length;i++){pageCollections.push(stickyNotesAnnotations[i]);}}}}}// eslint-disable-next-line
var textMarkupObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');if(textMarkupObject){var textMarkupAnnotationObject=JSON.parse(textMarkupObject);if(textMarkupAnnotationObject){var index=this.getPageCollection(textMarkupAnnotationObject,pageNumber);if(textMarkupAnnotationObject[index]){// eslint-disable-next-line
var textMarkupAnnotations=textMarkupAnnotationObject[index].annotations;if(textMarkupAnnotations&&textMarkupAnnotations.length>0){for(var i=0;i<textMarkupAnnotations.length;i++){pageCollections.push(textMarkupAnnotations[i]);}}}}}return pageCollections;};// eslint-disable-next-line
Annotation.prototype.findOverlappedAnnotations=function(annotation,pageCollections){this.overlappedAnnotations=[];if(annotation&&annotation.bounds){if(annotation.shapeAnnotationType==='textMarkup'){for(var i=0;i<annotation.bounds.length;i++){// eslint-disable-next-line
var bounds=this.orderTextMarkupBounds(annotation.bounds[i]);this.calculateOverlappedAnnotationBounds(annotation,bounds,pageCollections);}}else{this.calculateOverlappedAnnotationBounds(annotation,annotation.bounds,pageCollections);}}return this.overlappedAnnotations;};// eslint-disable-next-line
Annotation.prototype.calculateOverlappedAnnotationBounds=function(annotation,bounds,pageCollections){// eslint-disable-next-line
var selectBounds=bounds;if(annotation.shapeAnnotationType==='Ink'){selectBounds={left:bounds.x,top:bounds.y,height:bounds.height,width:bounds.width};}// eslint-disable-next-line
var left=parseInt(selectBounds.left);// eslint-disable-next-line
var top=parseInt(selectBounds.top);// eslint-disable-next-line
var totalHeight=parseInt(selectBounds.top+selectBounds.height);// eslint-disable-next-line
var totalWidth=parseInt(selectBounds.left+selectBounds.width);for(var i=0;i<pageCollections.length;i++){if(annotation.annotName===pageCollections[i].annotName){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}else{var boundsCount=1;if(pageCollections[i].shapeAnnotationType==='textMarkup'){boundsCount=pageCollections[i].bounds.length;}for(var j=0;j<boundsCount;j++){// eslint-disable-next-line
var annotationBounds=void 0;// eslint-disable-next-line
var annotationBoundsCollection=pageCollections[i].bounds;if(pageCollections[i].shapeAnnotationType==='Ink'){// eslint-disable-next-line
annotationBoundsCollection={left:annotationBoundsCollection.x,top:annotationBoundsCollection.y,height:annotationBoundsCollection.height,width:annotationBoundsCollection.width};}if(pageCollections[i].shapeAnnotationType!=='textMarkup'&&boundsCount===1){annotationBounds=annotationBoundsCollection;}else{// eslint-disable-next-line
annotationBounds=this.orderTextMarkupBounds(annotationBoundsCollection[j]);}if(annotationBounds){var isOverlapped=false;// eslint-disable-next-line
if(left<=parseInt(annotationBounds.left)&&totalWidth>=parseInt(annotationBounds.left)||left<=parseInt(annotationBounds.left+annotationBounds.width)&&totalWidth>=parseInt(annotationBounds.left+annotationBounds.width)){isOverlapped=true;}if(isOverlapped){// eslint-disable-next-line
if(top<=parseInt(annotationBounds.top)&&totalHeight>=parseInt(annotationBounds.top)||top<=parseInt(annotationBounds.top+annotationBounds.height)&&totalHeight>=parseInt(annotationBounds.top+annotationBounds.height)){isOverlapped=true;}else{isOverlapped=false;}}if(isOverlapped){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}else{// eslint-disable-next-line
if(parseInt(annotationBounds.left)<=left&&parseInt(annotationBounds.left+annotationBounds.width)>=left||totalWidth>=parseInt(annotationBounds.left)&&totalWidth<=parseInt(annotationBounds.left+annotationBounds.width)){isOverlapped=true;}if(isOverlapped){// eslint-disable-next-line
if(parseInt(annotationBounds.top)<=top&&parseInt(annotationBounds.top+annotationBounds.height)>=top||totalHeight>=parseInt(annotationBounds.top)&&totalHeight<=parseInt(annotationBounds.top+annotationBounds.height)){isOverlapped=true;}else{isOverlapped=false;}}if(isOverlapped){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}else{// eslint-disable-next-line
if(left<=parseInt(annotationBounds.left)&&totalWidth>=parseInt(annotationBounds.left)||left<=parseInt(annotationBounds.left+annotationBounds.width)&&totalWidth>=parseInt(annotationBounds.left+annotationBounds.width)){isOverlapped=true;}if(isOverlapped){// eslint-disable-next-line
if(parseInt(annotationBounds.top)<=top&&parseInt(annotationBounds.top+annotationBounds.height)>=top||totalHeight>=parseInt(annotationBounds.top)&&totalHeight<=parseInt(annotationBounds.top+annotationBounds.height)){isOverlapped=true;}else{isOverlapped=false;}}if(isOverlapped){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}else{// eslint-disable-next-line
if(parseInt(annotationBounds.left)<=left&&parseInt(annotationBounds.left+annotationBounds.width)>=left||totalWidth>=parseInt(annotationBounds.left)&&totalWidth<=parseInt(annotationBounds.left+annotationBounds.width)){isOverlapped=true;}if(isOverlapped){// eslint-disable-next-line
if(top<=parseInt(annotationBounds.top)&&totalHeight>=parseInt(annotationBounds.top)||top<=parseInt(annotationBounds.top+annotationBounds.height)&&totalHeight>=parseInt(annotationBounds.top+annotationBounds.height)){isOverlapped=true;}else{isOverlapped=false;}}if(isOverlapped){this.checkOverlappedCollections(pageCollections[i],this.overlappedAnnotations);}}}}}}}}};/**
     * @param annotation
     * @param pageNumber
     * @param type
     * @param annotation
     * @param pageNumber
     * @param type
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.findAnnotationMode=function(annotation,pageNumber,type){// eslint-disable-next-line
var importCollection=this.pdfViewer.viewerBase.importedAnnotation[pageNumber];if(importCollection){// eslint-disable-next-line
var collection=void 0;if(type==='shape'){collection=importCollection.shapeAnnotation;}else if(type==='shape_measure'){collection=importCollection.measureShapeAnnotation;}else if(type==='freeText'){collection=importCollection.freeTextAnnotation;}else if(type==='stamp'){collection=importCollection.stampAnnotations;}else if(type==='sticky'){collection=importCollection.stickyNotesAnnotation;}else if(type==='textMarkup'){collection=importCollection.textMarkupAnnotation;}if(collection){for(var i=0;i<collection.length;i++){if(collection[i].AnnotName===annotation.AnnotName){return'Imported Annotation';}}}}return'Existing Annotation';};// eslint-disable-next-line
Annotation.prototype.checkOverlappedCollections=function(annotation,overlappedCollections){if(overlappedCollections.length>0){var isAdded=false;for(var i=0;i<overlappedCollections.length;i++){if(annotation.annotName===overlappedCollections[i].annotName&&annotation.bounds===overlappedCollections[i].bounds){isAdded=true;break;}}if(!isAdded){overlappedCollections.push(annotation);}}else{overlappedCollections.push(annotation);}};// eslint-disable-next-line
Annotation.prototype.orderTextMarkupBounds=function(bounds){if(bounds.Left||bounds.Width){return{left:bounds.Left,top:bounds.Top,height:bounds.Height,width:bounds.Width};}else{return{left:bounds.left,top:bounds.top,height:bounds.height,width:bounds.width};}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateModifiedDate=function(annotation){if(annotation.modifiedDate){annotation.modifiedDate=this.setAnnotationModifiedDate(annotation.modifiedDate);}if(annotation.comments&&annotation.comments.length>0){for(var i=0;i<annotation.comments.length;i++){if(annotation.comments[i].modifiedDate){annotation.comments[i].modifiedDate=this.setAnnotationModifiedDate(annotation.comments[i].modifiedDate);if(annotation.comments[i].review&&annotation.comments[i].review.modifiedDate){// eslint-disable-next-line max-len
annotation.comments[i].review.modifiedDate=this.setAnnotationModifiedDate(annotation.comments[i].review.modifiedDate);}}}}if(annotation.review&&annotation.review.modifiedDate){annotation.review.modifiedDate=this.setAnnotationModifiedDate(annotation.review.modifiedDate);}};Annotation.prototype.setAnnotationModifiedDate=function(date){var modifiedTime;var modifiedDateTime;if(date!==''){// eslint-disable-next-line
var time=parseInt(date.split(' ')[1].split(':')[0]);if(date.split(' ').length===3){// eslint-disable-next-line max-len
modifiedTime=time+':'+date.split(' ')[1].split(':')[1]+':'+date.split(' ')[1].split(':')[2]+' '+date.split(' ')[2];}else{if(time>=12){if(time===12){modifiedTime=time+':'+date.split(' ')[1].split(':')[1]+':'+date.split(' ')[1].split(':')[2]+' PM';}else{// eslint-disable-next-line max-len
modifiedTime=time-12+':'+date.split(' ')[1].split(':')[1]+':'+date.split(' ')[1].split(':')[2]+' PM';}}else{modifiedTime=time+':'+date.split(' ')[1].split(':')[1]+':'+date.split(' ')[1].split(':')[2]+' AM';}}// eslint-disable-next-line
var dateString=date.split(' ')[0];// eslint-disable-next-line
var dateStringSpilt=date.split(',');if(dateStringSpilt.length>1){modifiedDateTime=dateString+' '+modifiedTime;}else{modifiedDateTime=dateString+', '+modifiedTime;}}else{return date;}return modifiedDateTime;};/**
     * @private
     */Annotation.prototype.clear=function(){if(this.shapeAnnotationModule){this.shapeAnnotationModule.shapeCount=0;}if(this.measureAnnotationModule){this.measureAnnotationModule.measureShapeCount=0;}if(this.textMarkupAnnotationModule){this.textMarkupAnnotationModule.clear();}if(this.stickyNotesAnnotationModule){this.stickyNotesAnnotationModule.clear();}this.pdfViewer.refresh();this.undoCommentsElement=[];this.redoCommentsElement=[];this.overlappedAnnotations=[];this.previousIndex=null;// eslint-disable-next-line max-len
if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule){this.pdfViewer.annotation.stampAnnotationModule.stampPageNumber=[];}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule){this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers=[];this.freeTextAnnotationModule.previousText='Type Here';}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.inkAnnotationModule){this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[];}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_shape');window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_stamp');window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sticky');};// eslint-disable-next-line
Annotation.prototype.retrieveAnnotationCollection=function(){return this.pdfViewer.annotationCollection;};/**
     * @param interaction
     * @param annotation
     * @param interaction
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.checkAllowedInteractions=function(interaction,annotation){// eslint-disable-next-line
var annotationInteraction=this.updateAnnotationAllowedInteractions(annotation);if(annotationInteraction&&annotationInteraction.length>0){for(var i=0;i<annotationInteraction.length;i++){if(interaction==='Select'){// eslint-disable-next-line max-len
if(annotationInteraction[i]==='Move'||annotationInteraction[i]==='Resize'||annotationInteraction[i]==='Delete'||annotationInteraction[i]==='PropertyChange'||annotationInteraction[i]==='Select'){return true;}}else{if(annotationInteraction[i]===interaction){return true;}}}}return false;};/**
     * @param menuObj
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.checkContextMenuDeleteItem=function(menuObj){// eslint-disable-next-line
var annotation=this.findCurrentAnnotation();if(annotation&&annotation.annotationSettings){// eslint-disable-next-line
if(annotation.annotationSettings.isLock){if(this.checkAllowedInteractions('Delete',annotation)){menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')],true);}else{menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')],false);}}else{menuObj.enableItems([this.pdfViewer.localeObj.getConstant('Delete Context')],true);}}};/**
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.isEnableDelete=function(){// eslint-disable-next-line
var annotation=this.findCurrentAnnotation();if(annotation&&annotation.annotationSettings){// eslint-disable-next-line
if(annotation.annotationSettings.isLock){if(this.checkAllowedInteractions('Delete',annotation)){return true;}else{return false;}}else{return true;}}return false;};/**
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.findCurrentAnnotation=function(){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation){return this.textMarkupAnnotationModule.currentTextMarkupAnnotation;}if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]){return this.pdfViewer.selectedItems.annotations[0];}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.updateAnnotationAllowedInteractions=function(annotation){// eslint-disable-next-line
var annotationInteraction=['None'];if(annotation){if(annotation.shapeAnnotationType==='FreeText'&&this.pdfViewer.freeTextSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='Ink'&&this.pdfViewer.inkAnnotationSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='StickyNotes'&&this.pdfViewer.stickyNotesSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='Stamp'&&this.pdfViewer.stampSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='Image'&&this.pdfViewer.customStampSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='textMarkup'){if(annotation.textMarkupAnnotationType==='Highlight'&&this.pdfViewer.highlightSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.textMarkupAnnotationType==='Underline'&&this.pdfViewer.underlineSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.textMarkupAnnotationType==='Strikethrough'&&this.pdfViewer.strikethroughSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions,annotation.allowedInteractions);}}else{if(annotation.measureType!==''){if(annotation.measureType==='Distance'&&this.pdfViewer.distanceSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.measureType==='Perimeter'&&this.pdfViewer.perimeterSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.measureType==='Radius'&&this.pdfViewer.radiusSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.measureType==='Area'&&this.pdfViewer.areaSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.measureType==='Volume'&&this.pdfViewer.volumeSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions,annotation.allowedInteractions);}}else{if(annotation.shapeAnnotationType==='Line'&&this.pdfViewer.lineSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions,annotation.allowedInteractions);// eslint-disable-next-line max-len
}else if((annotation.shapeAnnotationType==='Arrow'||annotation.shapeAnnotationType==='LineWidthArrowHead')&&this.pdfViewer.arrowSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions,annotation.allowedInteractions);// eslint-disable-next-line max-len
}else if((annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Ellipse'||annotation.shapeAnnotationType==='Oval')&&this.pdfViewer.circleSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions,annotation.allowedInteractions);}else if((annotation.shapeAnnotationType==='Rectangle'||annotation.shapeAnnotationType==='Square')&&this.pdfViewer.rectangleSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions,annotation.allowedInteractions);}else if(annotation.shapeAnnotationType==='Polygon'&&this.pdfViewer.polygonSettings.allowedInteractions){// eslint-disable-next-line max-len
annotationInteraction=this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions,annotation.allowedInteractions);}}}}return annotationInteraction;};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.checkIsLockSettings=function(annotation){// eslint-disable-next-line
var isLocked=false;if(annotation){if(annotation.shapeAnnotationType==='FreeText'){isLocked=this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock);}else if(annotation.shapeAnnotationType==='Ink'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock);}else if(annotation.shapeAnnotationType==='StickyNotes'){isLocked=this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock);}else if(annotation.shapeAnnotationType==='Stamp'){isLocked=this.checkLockSettings(this.pdfViewer.stampSettings.isLock);}else if(annotation.shapeAnnotationType==='Image'){isLocked=this.checkLockSettings(this.pdfViewer.customStampSettings.isLock);}else if(annotation.shapeAnnotationType==='textMarkup'){if(annotation.textMarkupAnnotationType==='Highlight'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.highlightSettings.isLock);}else if(annotation.textMarkupAnnotationType==='Underline'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.underlineSettings.isLock);}else if(annotation.textMarkupAnnotationType==='Strikethrough'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock);}}else{if(annotation.measureType!==''){if(annotation.measureType==='Distance'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.distanceSettings.isLock);}else if(annotation.measureType==='Perimeter'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock);}else if(annotation.measureType==='Radius'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.radiusSettings.isLock);}else if(annotation.measureType==='Area'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.areaSettings.isLock);}else if(annotation.measureType==='Volume'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.volumeSettings.isLock);}}else{if(annotation.shapeAnnotationType==='Line'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.lineSettings.isLock);// eslint-disable-next-line max-len
}else if(annotation.shapeAnnotationType==='Arrow'||annotation.shapeAnnotationType==='LineWidthArrowHead'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.arrowSettings.isLock);// eslint-disable-next-line max-len
}else if(annotation.shapeAnnotationType==='Circle'||annotation.shapeAnnotationType==='Ellipse'||annotation.shapeAnnotationType==='Oval'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.circleSettings.isLock);}else if(annotation.shapeAnnotationType==='Rectangle'||annotation.shapeAnnotationType==='Square'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock);}else if(annotation.shapeAnnotationType==='Polygon'){// eslint-disable-next-line max-len
isLocked=this.checkLockSettings(this.pdfViewer.polygonSettings.isLock);}}}}return isLocked;};// eslint-disable-next-line
Annotation.prototype.checkLockSettings=function(locked){var islock=false;if(locked||this.pdfViewer.annotationSettings.isLock){islock=true;}return islock;};/**
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.restrictContextMenu=function(){// eslint-disable-next-line
var isRestrict=false;// eslint-disable-next-line
var annotation=this.findCurrentAnnotation();if(annotation&&this.checkIsLockSettings(annotation)&&this.checkAllowedInteractions('Select',annotation)){isRestrict=true;}return isRestrict;};// eslint-disable-next-line
Annotation.prototype.checkAllowedInteractionSettings=function(annotationInteraction,annotationAllowedInteraction){if(annotationAllowedInteraction){if(annotationAllowedInteraction.length===1){if(annotationAllowedInteraction[0]!=='None'){return annotationAllowedInteraction;}}else{return annotationAllowedInteraction;}}if(annotationInteraction){if(annotationInteraction.length===1){if(annotationInteraction[0]!=='None'){return annotationInteraction;}}else{return annotationInteraction;}}if(this.pdfViewer.annotationSettings.allowedInteractions){return this.pdfViewer.annotationSettings.allowedInteractions;}return['None'];};/**
     * @param value
     * @param type
     * @param value
     * @param type
     * @private
     */Annotation.prototype.getValue=function(value,type){type=!type?'hex':type.toLowerCase();if(value[0]==='r'){var cValue=this.convertRgbToNumberArray(value);if(type==='hex'||type==='hexa'){var hex=this.rgbToHex(cValue);return type==='hex'?hex.slice(0,7):hex;}else{if(type==='hsv'){return this.convertToHsvString(this.rgbToHsv.apply(this,cValue.slice(0,3)));}else{if(type==='hsva'){return this.convertToHsvString(this.rgbToHsv.apply(this,cValue));}else{return'null';}}}}else{if(value[0]==='h'){var cValue=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(value));if(type==='rgba'){return this.convertToRgbString(cValue);}else{if(type==='hex'||type==='hexa'){var hex=this.rgbToHex(cValue);return type==='hex'?hex.slice(0,7):hex;}else{if(type==='rgb'){return this.convertToRgbString(cValue.slice(0,3));}else{return'null';}}}}else{value=this.roundValue(value);var rgb=this.hexToRgb(value);if(type==='rgb'||type==='hsv'){rgb=rgb.slice(0,3);}if(type==='rgba'||type==='rgb'){return this.convertToRgbString(rgb);}else{if(type==='hsva'||type==='hsv'){return this.convertToHsvString(this.rgbToHsv.apply(this,rgb));}else{if(type==='hex'){return value.slice(0,7);}else{if(type==='a'){return rgb[3].toString();}else{return'null';}}}}}}};Annotation.prototype.convertRgbToNumberArray=function(value){// eslint-disable-next-line max-len
return value.slice(value.indexOf('(')+1,value.indexOf(')')).split(',').map(function(n,i){return i!==3?parseInt(n,10):parseFloat(n);});};Annotation.prototype.convertToRgbString=function(rgb){return rgb.length?rgb.length===4?'rgba('+rgb.join()+')':'rgb('+rgb.join()+')':'';};Annotation.prototype.convertToHsvString=function(hsv){return hsv.length===4?'hsva('+hsv.join()+')':'hsv('+hsv.join()+')';};Annotation.prototype.roundValue=function(value){if(!value){return'';}if(value[0]!=='#'){value='#'+value;}var len=value.length;if(len===4){value+='f';len=5;}if(len===5){var tempValue='';for(var i=1,len_1=value.length;i<len_1;i++){tempValue+=value.charAt(i)+value.charAt(i);}value='#'+tempValue;len=9;}if(len===7){value+='ff';}return value;};Annotation.prototype.hexToRgb=function(hex){if(!hex){return[];}hex=hex.trim();if(hex.length!==9){hex=this.roundValue(hex);}var opacity=Number((parseInt(hex.slice(-2),16)/255).toFixed(2));hex=hex.slice(1,7);var bigInt=parseInt(hex,16);var h=[];h.push(bigInt>>16&255);h.push(bigInt>>8&255);h.push(bigInt&255);h.push(opacity);return h;};Annotation.prototype.rgbToHsv=function(r,g,b,opacity){r/=255;g/=255;b/=255;var max=Math.max(r,g,b);var min=Math.min(r,g,b);var h;var s;var v=max;var d=max-min;s=max===0?0:d/max;if(max===min){h=0;}else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6;}var hsv=[Math.round(h*360),Math.round(s*1000)/10,Math.round(v*1000)/10];if(!sf.base.isNullOrUndefined(opacity)){hsv.push(opacity);}return hsv;};Annotation.prototype.hsvToRgb=function(h,s,v,opacity){var r;var g;var b;var i;var f;var p;var q;var t;s/=100;v/=100;if(s===0){r=g=b=v;return[Math.round(r*255),Math.round(g*255),Math.round(b*255),opacity];}h/=60;i=Math.floor(h);f=h-i;p=v*(1-s);q=v*(1-s*f);t=v*(1-s*(1-f));switch(i){case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;case 4:r=t;g=p;b=v;break;default:r=v;g=p;b=q;}var rgb=[Math.round(r*255),Math.round(g*255),Math.round(b*255)];if(!sf.base.isNullOrUndefined(opacity)){rgb.push(opacity);}return rgb;};Annotation.prototype.rgbToHex=function(rgb){// eslint-disable-next-line max-len
return rgb.length?'#'+this.hex(rgb[0])+this.hex(rgb[1])+this.hex(rgb[2])+(!sf.base.isNullOrUndefined(rgb[3])?rgb[3]!==0?(Math.round(rgb[3]*255)+0x10000).toString(16).substr(-2):'00':''):'';};/**
     * @param dataFormat
     * @private
     */Annotation.prototype.exportAnnotationsAsStream=function(dataFormat){var _this=this;if(this.pdfViewer.annotationModule){var isAnnotations=this.pdfViewer.viewerBase.updateExportItem();if(isAnnotations){return new Promise(function(resolve,reject){_this.pdfViewer.viewerBase.createRequestForExportAnnotations(true,dataFormat,true).then(function(value){resolve(value);});});}}return null;};Annotation.prototype.hex=function(x){if(!sf.base.isNullOrUndefined(x)){return('0'+x.toString(16)).slice(-2);}else{return'0';}};/**
     * @param obj
     * @private
     */ // eslint-disable-next-line
Annotation.prototype.cloneObject=function(obj){return JSON.parse(JSON.stringify(obj));};/**
     * @private
     */Annotation.prototype.destroy=function(){this.destroyPropertiesWindow();this.textMarkupAnnotationModule.clear();};/**
     * @private
     */Annotation.prototype.getModuleName=function(){return'Annotation';};/**
     * Get vertex points properties
     * @private
     */Annotation.prototype.getVertexPointsXY=function(points){var vertexPoints=[];//Converting points model into vertex property
for(var j=0;j<points.length;j++){vertexPoints[j]={X:points[j].x,Y:points[j].y};}return vertexPoints;};/**
     * Method used to add annotations using program.
     *
     * @param annotationType - It describes type of annotation object.
     * @param options -  It describes about the annotation objects and it's property.
     * @param dynamicStampItem - It describe which type of dynamic stamp.
     * @param signStampItem - It describe which type of sign stamp.
     * @param standardBusinessStampItem - It describe which type of standard business stamp.
     * @returns void
     */Annotation.prototype.addAnnotation=function(annotationType,options,dynamicStampItem,signStampItem,standardBusinessStampItem){//Initialize the bounds and pageNumber
var offset={x:1,y:1};var pageNumber=0;if(options){if(options.pageNumber&&options.pageNumber>0)pageNumber=options.pageNumber?options.pageNumber-1:0;}//Initialize the pdf annotation object array
var annotationObject=null;var pdfAnnotation=[];this.pdfViewer.annotation.triggerAnnotationUnselectEvent();//Seperate the annotation type with it's method
if(annotationType=='FreeText'){pdfAnnotation[pageNumber]=this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(options,offset);this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType=='StickyNotes'){pdfAnnotation[pageNumber]=this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(options,offset);this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType=='Highlight'||annotationType=='Underline'||annotationType=='Strikethrough'){if(annotationType=='Highlight')annotationObject=options;else if(annotationType=='Underline')annotationObject=options;else if(annotationType=='Strikethrough')annotationObject=options;pdfAnnotation[pageNumber]=this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(annotationType,annotationObject);this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType==='Line'||annotationType==='Arrow'||annotationType==='Rectangle'||annotationType==='Circle'||annotationType==='Polygon'){if(annotationType=='Line')annotationObject=options;else if(annotationType=='Arrow')annotationObject=options;else if(annotationType=='Rectangle')annotationObject=options;else if(annotationType=='Circle')annotationObject=options;else if(annotationType=='Polygon')annotationObject=options;pdfAnnotation[pageNumber]=this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(annotationType,annotationObject,offset);this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType==='Distance'||annotationType==='Perimeter'||annotationType==='Area'||annotationType==='Radius'||annotationType==='Volume'){if(annotationType=='Distance')annotationObject=options;else if(annotationType=='Perimeter')annotationObject=options;else if(annotationType=='Area')annotationObject=options;else if(annotationType=='Radius')annotationObject=options;else if(annotationType=='Volume')annotationObject=options;pdfAnnotation[pageNumber]=this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(annotationType,annotationObject,offset);this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType==='Stamp'){if(options&&options.customStamps){pdfAnnotation[pageNumber]=this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options,offset,pageNumber,dynamicStampItem,signStampItem,standardBusinessStampItem);}else{pdfAnnotation[pageNumber]=this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(options,offset,pageNumber,dynamicStampItem,signStampItem,standardBusinessStampItem);}this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically=true;}else if(annotationType==='Ink'){pdfAnnotation[pageNumber]=this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(options,offset,pageNumber);this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically=true;}//Annotation rendering can be done with the import annotation method.
var pdf={pdfAnnotation:pdfAnnotation};this.pdfViewerBase.isAddAnnotation=true;this.pdfViewerBase.importAnnotations(pdf);this.pdfViewerBase.isAddAnnotation=false;};/**
     * @param annotation
     * @private
     */Annotation.prototype.triggerAnnotationAddEvent=function(annotation){var annotationType=annotation.shapeAnnotationType;if(annotationType==='Stamp'||annotationType==='Image'||annotationType==='Path'||annotationType==='FreeText'||annotationType==='StickyNotes'||annotationType==='Ink'){var settings=void 0;if(annotationType==='FreeText'){settings={opacity:annotation.opacity,borderColor:annotation.strokeColor,borderWidth:annotation.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,fillColor:annotation.fillColor,fontSize:annotation.fontSize,width:annotation.bounds.width,height:annotation.bounds.height,fontColor:annotation.fontColor,fontFamily:annotation.fontFamily,defaultText:annotation.dynamicText,fontStyle:annotation.font,textAlignment:annotation.textAlign};}else{settings={opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,data:annotation.data};}// eslint-disable-next-line
var bounds={left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height};var type=this.getAnnotationType(annotation.shapeAnnotationType,annotation.measureType);// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(annotation.pageIndex,annotation.annotName,type,bounds,settings);}else if(annotationType==='SignatureText'||annotationType==='SignatureImage'||annotationType==='HandWrittenSignature'){// eslint-disable-next-line
var bounds={left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height};// eslint-disable-next-line max-len
this.pdfViewer.fireSignatureAdd(annotation.pageIndex,annotation.signatureName,annotation.shapeAnnotationType,bounds,annotation.opacity,annotation.strokeColor,annotation.thickness,annotation.data);}else{// eslint-disable-next-line
var setting={opacity:annotation.opacity,fillColor:annotation.fillColor,strokeColor:annotation.strokeColor,thickness:annotation.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate};var bounds={left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height};var type=this.getAnnotationType(annotation.shapeAnnotationType,annotation.measureType);if(type==='Line'||type==='Arrow'||type==='Distance'||type==='Perimeter'){setting.lineHeadStartStyle=this.getArrowString(annotation.sourceDecoraterShapes);setting.lineHeadEndStyle=this.getArrowString(annotation.taregetDecoraterShapes);setting.borderDashArray=annotation.borderDashArray;}var labelSettings=void 0;if(this.pdfViewer.enableShapeLabel){labelSettings={// eslint-disable-next-line max-len
fontColor:annotation.fontColor,fontSize:annotation.fontSize,fontFamily:annotation.fontFamily,opacity:annotation.labelOpacity,labelContent:annotation.labelContent,fillColor:annotation.labelFillColor};// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(annotation.pageIndex,annotation.annotName,type,bounds,setting,null,null,null,labelSettings);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(annotation.pageIndex,annotation.annotName,type,bounds,setting);}}};/**
     * @private
     */Annotation.prototype.triggerAnnotationUnselectEvent=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]){var annotation=this.pdfViewer.selectedItems.annotations[0];if(annotation.shapeAnnotationType!=='HandWrittenSignature'&&annotation.shapeAnnotationType!=='SignatureText'&&annotation.shapeAnnotationType!=='SignatureImage'&&annotation.shapeAnnotationType!=='Path'){this.pdfViewer.fireAnnotationUnSelect(annotation.annotName,annotation.pageIndex,annotation);this.pdfViewer.clearSelection(annotation.pageIndex);}}};/**
     * @private
    */Annotation.prototype.updateFontFamilyRenderSize=function(currentAnnotation,currentValue){var freeTextAnnotation=this.freeTextAnnotationModule;freeTextAnnotation.inputBoxElement.style.fontFamily=currentValue;freeTextAnnotation.autoFitFreeText();var zoomFactor=this.pdfViewerBase.getZoomFactor();var padding=parseFloat(freeTextAnnotation.inputBoxElement.style.paddingLeft);var inputEleHeight=currentAnnotation.bounds.height*zoomFactor;var characterLength=8;var inputEleWidth=parseFloat(freeTextAnnotation.inputBoxElement.style.width)-characterLength;inputEleWidth=inputEleWidth/zoomFactor;inputEleHeight=inputEleHeight/zoomFactor;var heightDiff=inputEleHeight-currentAnnotation.bounds.height;var y=undefined;if(heightDiff>0){y=currentAnnotation.wrapper.offsetY+heightDiff/2;y=y>0?y:undefined;}else{heightDiff=Math.abs(heightDiff);y=currentAnnotation.wrapper.offsetY-heightDiff/2;y=y>0?y:undefined;}var widthDiff=inputEleWidth-currentAnnotation.bounds.width;var x=undefined;if(widthDiff>0){x=currentAnnotation.wrapper.offsetX+widthDiff/2;x=x>0?x:undefined;}else{widthDiff=Math.abs(widthDiff);x=currentAnnotation.wrapper.offsetX-widthDiff/2;}currentAnnotation.bounds.width=inputEleWidth;currentAnnotation.bounds.height=inputEleHeight;this.pdfViewer.nodePropertyChange(currentAnnotation,{fontFamily:currentValue,bounds:{width:currentAnnotation.bounds.width,height:currentAnnotation.bounds.height,y:y,x:x}});this.pdfViewer.renderSelector(currentAnnotation.pageIndex,this.pdfViewer.annotationSelectorSettings);this.modifyInCollections(currentAnnotation,'bounds');};Annotation.prototype.updateCanvas=function(canvas,pageWidth,pageHeight,pageNumber){var ratio=this.pdfViewerBase.getZoomRatio();canvas.width=pageWidth*ratio;canvas.height=pageHeight*ratio;canvas.style.width=pageWidth+'px';canvas.style.height=pageHeight+'px';canvas.style.position='absolute';canvas.style.zIndex='1';this.pdfViewerBase.applyElementStyles(canvas,pageNumber);};/**
     * @param text
     * @private
     */Annotation.prototype.ShowToastMessage=function(type){var text="";if(type==='Line'||type==='Arrow'||type==='Rectangle'||type==='Circle'||type==='Polygon'){text="Draw on the active page to insert.";}else if(type==='Distance'||type==='Perimeter'||type==='Area'||type==='Radius'||type==='Volume'){text="Draw on the active page to insert.";}else if(type==='FreeText'){text="Touch on the active page to insert.";}else if(type==='Ink'){text="Draw and touch the Ink tool again to add.";}else if(type==='StickyNotes'){text="Touch on the active page to insert.";}else if(type==='Stamp'){text="Touch on the active page to insert.";}else if(type==='HandWrittenSignature'){text="Touch on the active page to sign.";}if(text!=""){var x=(this.pdfViewer.element.clientWidth-220)/2;var y=this.pdfViewer.element.clientHeight/2;var tooltipDiv=document.getElementById(this.pdfViewer.dataId+'_annotation_message');if(tooltipDiv){tooltipDiv.style.pointerEvents='none';var tooltipChild=tooltipDiv.firstElementChild;if(tooltipChild){tooltipChild.firstElementChild.firstElementChild.textContent=text;}else{this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateToastMessageXYPosition',text,x,y);}}}};/**
           * @private
           */Annotation.prototype.focusComment=function(){var selectedAnnotation=this.pdfViewer.selectedItems.annotations?this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0]:this.textMarkupAnnotationModule.currentTextMarkupAnnotation:null;if(selectedAnnotation){this.pdfViewer.focusElement(selectedAnnotation.annotName);}};return Annotation;}();var __awaiter$4=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator$4=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};/**
 * The `LinkAnnotation` module is used to handle link annotation actions of PDF viewer.
 *
 * @hidden
 */var LinkAnnotation=/** @class */function(){/**
     * @param pdfViewer
     * @param viewerBase
     * @param pdfViewer
     * @param viewerBase
     * @private
     */function LinkAnnotation(pdfViewer,viewerBase){this.pdfViewer=pdfViewer;this.pdfViewerBase=viewerBase;}/**
     * @param data
     * @param pageIndex
     * @param data
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
LinkAnnotation.prototype.renderHyperlinkContent=function(data,pageIndex){if(this.pdfViewer.enableHyperlink){var hyperlinks=data.hyperlinks;var hyperlinksBounds=data.hyperlinkBounds;this.linkAnnotation=data.linkAnnotation;this.linkPage=data.linkPage;this.annotationY=data.annotationLocation;if(hyperlinks&&hyperlinks.length>0&&hyperlinksBounds.length>0){this.renderWebLink(hyperlinks,hyperlinksBounds,pageIndex,data.textWebLinkBorderWidth,data.textWebLinkBorderColor);}if(this.linkAnnotation&&this.linkAnnotation.length>0&&this.linkPage.length>0){this.renderDocumentLink(this.linkAnnotation,this.linkPage,this.annotationY,pageIndex,data.hyperLinkBorderWidth,data.hyperLinkBorderColor);}}};/**
     * @private
     */LinkAnnotation.prototype.disableHyperlinkNavigationUnderObjects=function(eventTarget,evt,element){var objects=findObjectsUnderMouse(element,element.pdfViewer,evt);if(objects.length>0){if(evt.target.classList.contains('e-pv-hyperlink')){eventTarget.style.cursor='move';eventTarget.style.pointerEvents='none';eventTarget.title='';}}else{var hyperlinkObjects=document.getElementsByClassName('e-pv-hyperlink');if(hyperlinkObjects&&hyperlinkObjects.length>0){for(var i=0;i<hyperlinkObjects.length;i++){if(hyperlinkObjects[i].style.pointerEvents==='none')hyperlinkObjects[i].style.pointerEvents='all';if(!hyperlinkObjects[i].title)hyperlinkObjects[i].title=hyperlinkObjects[i].href;}}}};LinkAnnotation.prototype.renderWebLink=function(hyperlinks,hyperlinksBounds,pageIndex,textWebLinkBorderWidth,textWebLinkBorderColor){var _this=this;var proxy=this;var isHyperlinkClicked=false;var _loop_1=function _loop_1(i){var aTag=sf.base.createElement('a',{id:'weblinkdiv_'+i,attrs:{onfocus:"this.style.boxShadow = '0px 0px 0px 1px black'",onblur:"this.style.boxShadow = ''"}});// eslint-disable-next-line
var rect=hyperlinksBounds[i];aTag=this_1.setHyperlinkProperties(aTag,rect,pageIndex,i,textWebLinkBorderWidth,textWebLinkBorderColor,true);aTag.title=hyperlinks[i];if(hyperlinks[i]&&hyperlinks[i].split('http').length===1){var hyperlinkText="http://"+hyperlinks[i];aTag.setAttribute('href',hyperlinkText);}else{aTag.setAttribute('href',hyperlinks[i]);}if(this_1.pdfViewer.hyperlinkOpenState==='CurrentTab'){aTag.target='_self';aTag.onclick=function(e){return __awaiter$4(_this,void 0,void 0,function(){var isCancel;return __generator$4(this,function(_a){switch(_a.label){case 0:if(!!isHyperlinkClicked)return[3/*break*/,4];e.preventDefault();if(!(proxy.pdfViewerBase.tool instanceof LineTool||proxy.pdfViewerBase.tool instanceof PolygonDrawingTool))return[3/*break*/,1];return[2/*return*/,false];case 1:return[4/*yield*/,proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i],aTag)];case 2:isCancel=_a.sent();if(isCancel){isHyperlinkClicked=true;aTag.click();}return[2/*return*/,isCancel];case 3:return[3/*break*/,5];case 4:isHyperlinkClicked=false;return[2/*return*/,true];case 5:return[2/*return*/];}});});};aTag.onmouseover=function(){proxy.triggerHyperlinkEvent(aTag);};}else if(this_1.pdfViewer.hyperlinkOpenState==='NewTab'){aTag.target='_blank';aTag.onclick=function(e){return __awaiter$4(_this,void 0,void 0,function(){var isCancel;return __generator$4(this,function(_a){switch(_a.label){case 0:if(!!isHyperlinkClicked)return[3/*break*/,4];e.preventDefault();if(!(proxy.pdfViewerBase.tool instanceof LineTool||proxy.pdfViewerBase.tool instanceof PolygonDrawingTool))return[3/*break*/,1];return[2/*return*/,false];case 1:return[4/*yield*/,proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i],aTag)];case 2:isCancel=_a.sent();if(isCancel){isHyperlinkClicked=true;aTag.click();}return[2/*return*/,isCancel];case 3:return[3/*break*/,5];case 4:isHyperlinkClicked=false;return[2/*return*/,true];case 5:return[2/*return*/];}});});};aTag.onmouseover=function(){proxy.triggerHyperlinkEvent(aTag);};}else if(this_1.pdfViewer.hyperlinkOpenState==='NewWindow'){aTag.onclick=function(e){return __awaiter$4(_this,void 0,void 0,function(){var isCancel;return __generator$4(this,function(_a){switch(_a.label){case 0:e.preventDefault();if(!(proxy.pdfViewerBase.tool instanceof LineTool||proxy.pdfViewerBase.tool instanceof PolygonDrawingTool))return[3/*break*/,1];return[2/*return*/,false];case 1:return[4/*yield*/,proxy.pdfViewer.fireHyperlinkClick(hyperlinks[i],aTag)];case 2:isCancel=_a.sent();if(isCancel){window.open(aTag.href,'_blank','scrollbars=yes,resizable=yes');}return[2/*return*/,false];}});});};aTag.onmouseover=function(){proxy.triggerHyperlinkEvent(aTag);};}var pageDiv=document.getElementById(this_1.pdfViewer.dataId+'_pageDiv_'+pageIndex);pageDiv.appendChild(aTag);};var this_1=this;for(var i=0;i<hyperlinks.length;i++){_loop_1(i);}};LinkAnnotation.prototype.triggerHyperlinkEvent=function(aTag){if(this.pdfViewerBase.tool instanceof LineTool||this.pdfViewerBase.tool instanceof PolygonDrawingTool){return false;}else{this.pdfViewer.fireHyperlinkHover(aTag);return true;}};LinkAnnotation.prototype.renderDocumentLink=function(linkAnnotation,linkPage,annotationY,pageIndex,hyperLinkBorderWidth,hyperLinkBorderColor){var proxy=this;var _loop_2=function _loop_2(i){var aTag=sf.base.createElement('a',{id:'linkdiv_'+i,attrs:{onfocus:"this.style.boxShadow = '0px 0px 0px 1px black'",onblur:"this.style.boxShadow = ''"}});// eslint-disable-next-line
var rect=linkAnnotation[i];aTag=this_2.setHyperlinkProperties(aTag,rect,pageIndex,i,hyperLinkBorderWidth,hyperLinkBorderColor,false);aTag.setAttribute('href','javascript:void(0)');if(linkPage[i]!==undefined&&linkPage[i]>=0){var destPageHeight=this_2.pdfViewerBase.pageSize[pageIndex].height;var destLocation=void 0;var scrollValue=void 0;var pageSize=this_2.pdfViewerBase.pageSize[linkPage[i]];if(pageSize){if(annotationY.length!==0){destLocation=annotationY[i];// eslint-disable-next-line max-len
scrollValue=pageSize.top*this_2.pdfViewerBase.getZoomFactor()+(destPageHeight-destLocation)*this_2.pdfViewerBase.getZoomFactor();}else{// eslint-disable-next-line max-len
scrollValue=pageSize.top*this_2.pdfViewerBase.getZoomFactor();}}if(scrollValue!==undefined){aTag.name=scrollValue.toString();aTag.onclick=function(){if(proxy.pdfViewerBase.tool instanceof LineTool||proxy.pdfViewerBase.tool instanceof PolygonDrawingTool){return false;}else{// eslint-disable-next-line radix
proxy.pdfViewerBase.viewerContainer.scrollTop=parseInt(aTag.name);return false;}};}var pageDiv=document.getElementById(this_2.pdfViewer.dataId+'_pageDiv_'+pageIndex);pageDiv.appendChild(aTag);}else{var pageDiv=document.getElementById(this_2.pdfViewer.dataId+'_pageDiv_'+pageIndex);pageDiv.appendChild(aTag);}};var this_2=this;for(var i=0;i<linkAnnotation.length;i++){_loop_2(i);}};// eslint-disable-next-line
LinkAnnotation.prototype.setHyperlinkProperties=function(aTag,rect,pageIndex,linkIndex,hyperLinkBorderWidth,hyperLinkBorderColor,isTextWebLink){aTag.className='e-pv-hyperlink';aTag.style.background='transparent';aTag.style.position='absolute';aTag.style.left=rect.Left*this.pdfViewerBase.getZoomFactor()+'px';aTag.style.top=rect.Top*this.pdfViewerBase.getZoomFactor()+'px';aTag.style.width=rect.Width*this.pdfViewerBase.getZoomFactor()+'px';if(rect.Height<0){aTag.style.height=-rect.Height*this.pdfViewerBase.getZoomFactor()+'px';aTag.style.top=(rect.Top+rect.Height)*this.pdfViewerBase.getZoomFactor()+'px';}else{aTag.style.height=(rect.Height<0?-rect.Height:rect.Height)*this.pdfViewerBase.getZoomFactor()+'px';}aTag.style.color='transparent';if(!isTextWebLink&&hyperLinkBorderWidth!=null&&hyperLinkBorderColor!=null&&hyperLinkBorderColor[linkIndex]!=null){aTag.style.border=hyperLinkBorderWidth[linkIndex]+"px solid rgb("+hyperLinkBorderColor[linkIndex].R+", "+hyperLinkBorderColor[linkIndex].G+", "+hyperLinkBorderColor[linkIndex].B+")";}if(isTextWebLink&&hyperLinkBorderWidth!=null&&hyperLinkBorderWidth!=null&&hyperLinkBorderColor[linkIndex]!=null){aTag.style.border=hyperLinkBorderWidth[linkIndex]+"px solid rgb("+hyperLinkBorderColor[linkIndex].R+", "+hyperLinkBorderColor[linkIndex].G+", "+hyperLinkBorderColor[linkIndex].B+")";}this.pdfViewerBase.applyElementStyles(aTag,pageIndex);return aTag;};/**
     * @param pageNumber
     * @param isAdd
     * @param pageNumber
     * @param isAdd
     * @private
     */LinkAnnotation.prototype.modifyZindexForTextSelection=function(pageNumber,isAdd){if(this.pdfViewerBase.pageCount>0){var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+pageNumber);if(pageDiv){var pageChildNodes=pageDiv.childNodes;for(var i=0;i<pageChildNodes.length;i++){var childElement=pageChildNodes[i];if(childElement.tagName==='A'){if(isAdd){childElement.classList.add('e-pv-onselection');}else{childElement.classList.remove('e-pv-onselection');}}}}}};/**
     * @param element
     * @param isAdd
     * @param element
     * @param isAdd
     * @private
     */LinkAnnotation.prototype.modifyZindexForHyperlink=function(element,isAdd){if(isAdd){element.classList.add('e-pv-onselection');}else{element.classList.remove('e-pv-onselection');}};/**
     * @private
     */LinkAnnotation.prototype.destroy=function(){for(var i=0;i<this.pdfViewerBase.pageCount-1;i++){var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+i);if(pageDiv){// eslint-disable-next-line max-len
var aElement=pageDiv.getElementsByTagName('a');if(aElement.length!==0){for(var index=aElement.length-1;index>=0;index--){aElement[index].parentNode.removeChild(aElement[index]);}}}}};/**
     * @private
     */LinkAnnotation.prototype.getModuleName=function(){return'LinkAnnotation';};return LinkAnnotation;}();/**
 * The `TextMarkupAnnotation` module is used to handle text markup annotation actions of PDF viewer.
 *
 * @hidden
 */var TextMarkupAnnotation=/** @class */function(){/**
     * @param pdfViewer
     * @param viewerBase
     * @private
     */function TextMarkupAnnotation(pdfViewer,viewerBase){var _this=this;/**
         * @private
         */this.currentTextMarkupAddMode='';/**
         * @private
         */this.selectTextMarkupCurrentPage=null;/**
         * @private
         */this.currentTextMarkupAnnotation=null;/**
         * @private
         */this.isAddAnnotationProgramatically=false;this.currentAnnotationIndex=null;this.isAnnotationSelect=false;/**
         * @private
         */this.isDropletClicked=false;/**
         * @private
         */this.isRightDropletClicked=false;/**
         * @private
         */this.isLeftDropletClicked=false;/**
         * @private
         */this.isSelectionMaintained=false;this.isExtended=false;this.isNewAnnotation=false;this.selectedTextMarkup=null;this.multiPageCollection=[];this.triggerAddEvent=false;/**
         * @private
         */this.isSelectedAnnotation=false;this.dropletHeight=20;/**
         * @private
         */this.annotationClickPosition={};// eslint-disable-next-line
this.maintainSelection=function(event){_this.isDropletClicked=true;_this.pdfViewer.textSelectionModule.initiateSelectionByTouch();_this.isExtended=true;_this.pdfViewer.textSelectionModule.selectionRangeArray=[];};// eslint-disable-next-line
this.selectionEnd=function(event){if(_this.isDropletClicked){_this.isDropletClicked=false;}};// eslint-disable-next-line
this.annotationLeftMove=function(event){if(_this.isDropletClicked){_this.isLeftDropletClicked=true;}};// eslint-disable-next-line
this.annotationRightMove=function(event){if(_this.isDropletClicked){_this.isRightDropletClicked=true;}};this.pdfViewer=pdfViewer;this.pdfViewerBase=viewerBase;}/**
     * @private
     */TextMarkupAnnotation.prototype.createAnnotationSelectElement=function(){// eslint-disable-next-line max-len
this.dropDivAnnotationLeft=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_droplet_left',className:'e-pv-drop'});this.dropDivAnnotationLeft.style.borderRight='2px solid';// eslint-disable-next-line max-len
this.dropDivAnnotationRight=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_droplet_right',className:'e-pv-drop'});this.dropDivAnnotationRight.style.borderLeft='2px solid';this.dropElementLeft=sf.base.createElement('div',{className:'e-pv-droplet',id:this.pdfViewer.dataId+'_dropletspan_left'});this.dropElementLeft.style.transform='rotate(0deg)';this.dropDivAnnotationLeft.appendChild(this.dropElementLeft);this.dropElementRight=sf.base.createElement('div',{className:'e-pv-droplet',id:this.pdfViewer.dataId+'_dropletspan_right'});this.dropElementRight.style.transform='rotate(-90deg)';this.dropDivAnnotationRight.appendChild(this.dropElementRight);this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationLeft);this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationRight);this.dropElementLeft.style.top='20px';this.dropElementRight.style.top='20px';this.dropElementRight.style.left='-8px';this.dropElementLeft.style.left='-8px';this.dropDivAnnotationLeft.style.display='none';this.dropDivAnnotationRight.style.display='none';this.dropDivAnnotationLeft.addEventListener('mousedown',this.maintainSelection);this.dropDivAnnotationLeft.addEventListener('mousemove',this.annotationLeftMove);this.dropDivAnnotationLeft.addEventListener('mouseup',this.selectionEnd);this.dropDivAnnotationRight.addEventListener('mousedown',this.maintainSelection);this.dropDivAnnotationRight.addEventListener('mousemove',this.annotationRightMove);this.dropDivAnnotationRight.addEventListener('mouseup',this.selectionEnd);};/**
     * @param target
     * @param x
     * @param y
     * @param target
     * @param x
     * @param y
     * @param target
     * @param x
     * @param y
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.textSelect=function(target,x,y){if(this.isLeftDropletClicked){var leftElement=this.dropDivAnnotationRight.getBoundingClientRect();var rightElement=this.dropDivAnnotationLeft.getBoundingClientRect();var clientX=x;var clientY=y;if(target.classList.contains('e-pv-text')){if(rightElement.top-25>leftElement.top){this.pdfViewer.textSelectionModule.textSelectionOnDrag(target,clientX,clientY,true);}else{this.pdfViewer.textSelectionModule.textSelectionOnDrag(target,clientX,clientY,false);}this.updateLeftposition(clientX,clientY);}}else if(this.isRightDropletClicked){var leftElement=this.dropDivAnnotationLeft.getBoundingClientRect();var clientX=x;var clientY=y;if(target.classList.contains('e-pv-text')){if(clientY>=leftElement.top){this.pdfViewer.textSelectionModule.textSelectionOnDrag(target,clientX,clientY,true);}else{this.pdfViewer.textSelectionModule.textSelectionOnDrag(target,clientX,clientY,false);}this.updatePosition(clientX,clientY);}}};/**
     * @param hide
     * @private
     */TextMarkupAnnotation.prototype.showHideDropletDiv=function(hide){var type=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode;var isEnableResizer=this.isEnableTextMarkupResizer(type);if(isEnableResizer&&this.dropDivAnnotationLeft&&this.dropDivAnnotationRight){if(hide){this.dropDivAnnotationLeft.style.display='none';this.dropDivAnnotationRight.style.display='none';}else{this.dropDivAnnotationLeft.style.display='';this.dropDivAnnotationRight.style.display='';this.updateDropletStyles(type);}}};/**
     * @param type
     * @private
     */TextMarkupAnnotation.prototype.isEnableTextMarkupResizer=function(type){var isEnableResizer=false;if(type){if(type==='Highlight'&&this.pdfViewer.highlightSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(type==='Underline'&&this.pdfViewer.underlineSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(this.pdfViewer.enableTextMarkupResizer){isEnableResizer=true;}}else{if(this.pdfViewer.enableTextMarkupResizer){isEnableResizer=true;}else if(this.pdfViewer.highlightSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(this.pdfViewer.underlineSettings.enableTextMarkupResizer){isEnableResizer=true;}else if(this.pdfViewer.strikethroughSettings.enableTextMarkupResizer){isEnableResizer=true;}}return isEnableResizer;};TextMarkupAnnotation.prototype.updateDropletStyles=function(type){if(this.isEnableTextMarkupResizer(type)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationLeft.offsetWidth>0){this.dropDivAnnotationLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropDivAnnotationRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropDivAnnotationLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropDivAnnotationRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementLeft.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';this.dropElementRight.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';}};TextMarkupAnnotation.prototype.updateAnnotationBounds=function(){this.isSelectionMaintained=false;// eslint-disable-next-line
var annotation=this.currentTextMarkupAnnotation;if(annotation&&annotation.isMultiSelect){this.showHideDropletDiv(true);this.updateMultiAnnotBounds(annotation);}else if(annotation&&annotation.bounds){var canProceed=true;if(document.activeElement&&document.activeElement.tagName=="INPUT"){canProceed=false;}if(canProceed){this.retreieveSelection(annotation,null);this.pdfViewer.textSelectionModule.maintainSelection(this.selectTextMarkupCurrentPage,false);this.isSelectionMaintained=true;window.getSelection().removeAllRanges();}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.updateMultiAnnotBounds=function(annotation){if(!annotation.annotpageNumbers){var annotationList=this.getAnnotations(annotation.pageNumber,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===annotation.annotName){annotation=annotationList[z];break;}}}}var lowestNumber=annotation.annotpageNumbers[0];var highestNumber=annotation.annotpageNumbers[0];for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];if(currentPage>=highestNumber){highestNumber=currentPage;}if(currentPage<=lowestNumber){lowestNumber=currentPage;}}for(var k=lowestNumber;k<=highestNumber;k++){var annotationList=this.getAnnotations(k,null);if(annotationList){for(var j=0;j<annotation.annotNameCollection.length;j++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[j];for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){// eslint-disable-next-line
var newAnnotation=annotationList[z];this.retreieveSelection(newAnnotation,null);this.pdfViewer.textSelectionModule.maintainSelection(newAnnotation.pageNumber,false);}}}}}this.isSelectionMaintained=true;window.getSelection().removeAllRanges();};// eslint-disable-next-line
TextMarkupAnnotation.prototype.retreieveSelection=function(annotation,element){for(var k=0;k<annotation.bounds.length;k++){// eslint-disable-next-line
var bound=annotation.bounds[k];var x=(bound.left?bound.left:bound.Left)*this.pdfViewerBase.getZoomFactor();var y=(bound.top?bound.top:bound.Top)*this.pdfViewerBase.getZoomFactor();var width=(bound.width?bound.width:bound.Width)*this.pdfViewerBase.getZoomFactor();var height=bound.height?bound.height:bound.Height;// eslint-disable-next-line
var textLayer=this.pdfViewerBase.getElement('_textLayer_'+annotation.pageNumber);if(textLayer){// eslint-disable-next-line
var textDivs=textLayer.childNodes;for(var n=0;n<textDivs.length;n++){if(textDivs[n]){// eslint-disable-next-line
var rangebounds=textDivs[n].getBoundingClientRect();var top_1=this.getClientValueTop(rangebounds.top,annotation.pageNumber);// eslint-disable-next-line max-len
var currentLeft=rangebounds.left-this.pdfViewerBase.getElement('_pageDiv_'+annotation.pageNumber).getBoundingClientRect().left;var totalLeft=currentLeft+rangebounds.width;// eslint-disable-next-line
var textDiVLeft=parseInt(textDivs[n].style.left);// eslint-disable-next-line
var currentTop=parseInt(textDivs[n].style.top);var isLeftBounds=this.pdfViewer.textSelectionModule.checkLeftBounds(currentLeft,textDiVLeft,totalLeft,x);var isTopBounds=this.pdfViewer.textSelectionModule.checkTopBounds(top_1,currentTop,y);if(isLeftBounds&&isTopBounds){element=textDivs[n];break;}}}if(element!=null){// eslint-disable-next-line
var boundingRect=this.pdfViewerBase.getElement('_textLayer_'+annotation.pageNumber).getBoundingClientRect();this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(element,x+boundingRect.left,y+boundingRect.top,false);if(annotation.bounds.length-1===k){// eslint-disable-next-line max-len
this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(element,x+boundingRect.left+width,y+boundingRect.top,false);}}}}};/**
     * @param x
     * @param y
     * @param isSelected
     * @private
     */TextMarkupAnnotation.prototype.updatePosition=function(x,y,isSelected){this.showHideDropletDiv(false);var pageTopValue=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top;var topClientValue=this.getClientValueTop(y,this.pdfViewerBase.currentPageNumber-1);// eslint-disable-next-line
var rightDivElement=document.getElementById(this.pdfViewer.dataId+'_droplet_right');if(isSelected){// eslint-disable-next-line max-len
rightDivElement.style.top=topClientValue*this.pdfViewerBase.getZoomFactor()+pageTopValue*this.pdfViewerBase.getZoomFactor()+'px';}else{// eslint-disable-next-line max-len
rightDivElement.style.top=topClientValue+pageTopValue*this.pdfViewerBase.getZoomFactor()+'px';}// eslint-disable-next-line max-len
rightDivElement.style.left=x+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left+'px';};/**
     * @param x
     * @param y
     * @param isSelected
     * @param x
     * @param y
     * @param isSelected
     * @private
     */TextMarkupAnnotation.prototype.updateLeftposition=function(x,y,isSelected){this.showHideDropletDiv(false);var pageTopValue=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top;var topClientValue=this.getClientValueTop(y,this.pdfViewerBase.currentPageNumber-1);// eslint-disable-next-line
var leftDivElement=document.getElementById(this.pdfViewer.dataId+'_droplet_left');leftDivElement.style.display='';if(isSelected){// eslint-disable-next-line max-len
leftDivElement.style.top=topClientValue*this.pdfViewerBase.getZoomFactor()+pageTopValue*this.pdfViewerBase.getZoomFactor()+'px';}else{// eslint-disable-next-line max-len
leftDivElement.style.top=topClientValue+pageTopValue*this.pdfViewerBase.getZoomFactor()+'px';}// eslint-disable-next-line max-len
leftDivElement.style.left=x+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-this.dropletHeight*this.pdfViewerBase.getZoomFactor()+'px';};TextMarkupAnnotation.prototype.getClientValueTop=function(clientValue,pageNumber){if(this.pdfViewerBase.getElement('_pageDiv_'+pageNumber)){// eslint-disable-next-line max-len
return clientValue-this.pdfViewerBase.getElement('_pageDiv_'+pageNumber).getBoundingClientRect().top;}else{return clientValue;}};/**
     * @param textMarkupAnnotations
     * @param pageNumber
     * @param isImportTextMarkup
     * @param textMarkupAnnotations
     * @param pageNumber
     * @param isImportTextMarkup
     * @param textMarkupAnnotations
     * @param pageNumber
     * @param isImportTextMarkup
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.renderTextMarkupAnnotationsInPage=function(textMarkupAnnotations,pageNumber,isImportTextMarkup){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(isImportTextMarkup){this.renderTextMarkupAnnotations(null,pageNumber,canvas,this.pdfViewerBase.getZoomFactor());this.renderTextMarkupAnnotations(textMarkupAnnotations,pageNumber,canvas,this.pdfViewerBase.getZoomFactor(),true);}else{this.renderTextMarkupAnnotations(textMarkupAnnotations,pageNumber,canvas,this.pdfViewerBase.getZoomFactor());}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.renderTextMarkupAnnotations=function(textMarkupAnnotations,pageNumber,canvas,factor,isImportAction){if(canvas){var context=canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.setLineDash([]);// eslint-disable-next-line
var annotations=void 0;if(!isImportAction){annotations=this.getAnnotations(pageNumber,textMarkupAnnotations);}else{annotations=textMarkupAnnotations;}if(annotations){for(var i=0;i<annotations.length;i++){// eslint-disable-next-line
var annotation=annotations[i];var annotationObject=null;var isAnnotationRotated=void 0;if(annotation.TextMarkupAnnotationType){if(isImportAction&&!annotation.isAlreadyAdded){if(this.pdfViewerBase.isJsonImported){var newArray=[];for(var i_1=0;i_1<annotation.Bounds.length;i_1++){// eslint-disable-next-line
annotation.Bounds[i_1]=this.pdfViewerBase.importJsonForRotatedDocuments(annotation.Rotate,pageNumber,annotation.Bounds[i_1],annotation.AnnotationRotation);annotation.Bounds[i_1].left=annotation.Bounds[i_1].X;annotation.Bounds[i_1].top=annotation.Bounds[i_1].Y;newArray.push(annotation.Bounds[i_1]);}annotation.Bounds=newArray;isAnnotationRotated=this.pdfViewerBase.isPageRotated;}}// eslint-disable-next-line max-len
annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);if(!annotation.Author){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor('textMarkup',annotation.TextMarkupAnnotationType);}if(!annotation.Subject){annotation.Subject=annotation.TextMarkupAnnotationType;}if(annotation.AnnotationSettings&&annotation.AnnotationSettings.isLock){annotation.AnnotationSettings={isLock:annotation.AnnotationSettings.isLock};}else{annotation.AnnotationSettings=this.getAnnotationSettings(annotation.TextMarkupAnnotationType);}var isPrint_1=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint_1=annotation.IsPrint;}else{isPrint_1=this.getIsPrintValue(annotation.TextMarkupAnnotationType);}// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line max-len
annotationObject={textMarkupAnnotationType:annotation.TextMarkupAnnotationType,color:annotation.Color,allowedInteractions:annotation.allowedInteractions,opacity:annotation.Opacity,bounds:annotation.Bounds,author:annotation.Author,subject:annotation.Subject,modifiedDate:annotation.ModifiedDate,note:annotation.Note,rect:annotation.Rect,// eslint-disable-next-line max-len
annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},shapeAnnotationType:'textMarkup',pageNumber:pageNumber,textMarkupContent:annotation.TextMarkupContent,textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(annotation),// eslint-disable-next-line max-len
customData:this.pdfViewer.annotation.getCustomData(annotation),annotationAddMode:annotation.annotationAddMode,annotationSettings:annotation.AnnotationSettings,isPrint:isPrint_1,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:isAnnotationRotated,annotationRotation:annotation.AnnotationRotation};if(annotation.IsMultiSelect){annotationObject.annotNameCollection=annotation.AnnotNameCollection;annotationObject.annotpageNumbers=annotation.AnnotpageNumbers;annotationObject.isMultiSelect=annotation.IsMultiSelect;}if(annotation.textMarkupContent&&annotation.textMarkupContent!==''){annotationObject.textMarkupContent=annotation.textMarkupContent;annotationObject.textMarkupStartIndex=annotation.textMarkupStartIndex;annotationObject.textMarkupEndIndex=annotation.textMarkupEndIndex;}this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_textMarkup');if(this.isAddAnnotationProgramatically){// eslint-disable-next-line
var settings={opacity:annotationObject.opacity,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
width:annotationObject.bounds.width,height:annotationObject.bounds.height};this.pdfViewer.fireAnnotationAdd(annotationObject.pageNumber,annotationObject.annotName,annotation.TextMarkupAnnotationType,annotationObject.bounds,settings);}}// eslint-disable-next-line max-len
var type=annotation.TextMarkupAnnotationType?annotation.TextMarkupAnnotationType:annotation.textMarkupAnnotationType;// eslint-disable-next-line
var annotBounds=annotation.Bounds?annotation.Bounds:annotation.bounds;var opacity=annotation.Opacity?annotation.Opacity:annotation.opacity;var color=annotation.Color?annotation.Color:annotation.color;var annotationRotation=annotation.AnnotationRotation?annotation.AnnotationRotation:annotation.annotationRotation;var isPrint=true;if(annotation.TextMarkupAnnotationType){isPrint=annotation.IsPrint;}if(annotation.textMarkupAnnotationType){isPrint=annotation.isPrint;}switch(type){case'Highlight':this.renderHighlightAnnotation(annotBounds,opacity,color,context,factor,isPrint,pageNumber);break;case'Strikethrough':this.renderStrikeoutAnnotation(annotBounds,opacity,color,context,factor,pageNumber,isPrint,annotationRotation);break;case'Underline':this.renderUnderlineAnnotation(annotBounds,opacity,color,context,factor,pageNumber,isPrint,annotationRotation);break;}}}var isMaintainedSelector=false;if(this.currentTextMarkupAnnotation&&this.currentTextMarkupAnnotation.annotpageNumbers){for(var m=0;m<this.currentTextMarkupAnnotation.annotpageNumbers.length;m++){if(pageNumber===this.currentTextMarkupAnnotation.annotpageNumbers[m]){isMaintainedSelector=true;this.isAnnotationSelect=false;break;}}}if(pageNumber===this.selectTextMarkupCurrentPage||isMaintainedSelector){if(!this.isAnnotationSelect){this.maintainAnnotationSelection();}else{this.isAnnotationSelect=false;}}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.getSettings=function(annotation){var selector;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else{selector=this.getSelector(annotation.TextMarkupAnnotationType);}return selector;};/**
     * @param type
     * @private
     */TextMarkupAnnotation.prototype.drawTextMarkupAnnotations=function(type){this.isTextMarkupAnnotationMode=true;this.currentTextMarkupAddMode=type;var isCleared=true;this.multiPageCollection=[];var selectionObject=this.pdfViewer.textSelectionModule?this.pdfViewer.textSelectionModule.selectionRangeArray:[];if(selectionObject.length>0&&!this.isSelectionMaintained){this.convertSelectionToTextMarkup(type,selectionObject,this.pdfViewerBase.getZoomFactor());}var selection=window.getSelection();var targetElement;if(selection&&selection.anchorNode){targetElement=selection.anchorNode.parentElement;}if(this.isEnableTextMarkupResizer(type)&&this.isExtended&&window.getSelection().toString()){var pageBounds=this.getDrawnBounds();if(pageBounds[0]&&pageBounds[0].bounds){// eslint-disable-next-line
var currentAnnot=this.currentTextMarkupAnnotation;for(var k=0;k<pageBounds.length;k++){if(currentAnnot&&currentAnnot.pageNumber===pageBounds[k].pageIndex){this.currentTextMarkupAnnotation=currentAnnot;this.selectTextMarkupCurrentPage=pageBounds[k].pageIndex;this.updateTextMarkupAnnotationBounds(pageBounds,k);}else{if(currentAnnot){if(type===''){type=currentAnnot.textMarkupAnnotationType;}}if(!currentAnnot.isMultiSelect){var isMultiSelect=false;if(this.isMultiAnnotation(type)){this.multiPageCollection.push(currentAnnot);isMultiSelect=true;}// eslint-disable-next-line max-len
this.drawTextMarkups(type,pageBounds[k].bounds,pageBounds[k].pageIndex,pageBounds[k].rect,this.pdfViewerBase.getZoomFactor(),pageBounds[k].textContent,pageBounds[k].startIndex,pageBounds[k].endIndex,isMultiSelect,targetElement);}else{if(currentAnnot.isMultiSelect&&currentAnnot.annotNameCollection){this.modifyCurrentAnnotation(currentAnnot,pageBounds,k);}}}}}}else if(window.getSelection().toString()){var pageBounds=this.getDrawnBounds();var isMultiSelect=this.isMultiPageAnnotations(pageBounds,type);if(pageBounds.length>0){for(var i=0;i<pageBounds.length;i++){if(type===''){isCleared=false;}// eslint-disable-next-line max-len
this.drawTextMarkups(type,pageBounds[i].bounds,pageBounds[i].pageIndex,pageBounds[i].rect,this.pdfViewerBase.getZoomFactor(),pageBounds[i].textContent,pageBounds[i].startIndex,pageBounds[i].endIndex,isMultiSelect,targetElement);}}}if(this.multiPageCollection){for(var j=0;j<this.multiPageCollection.length;j++){this.updateAnnotationNames(this.multiPageCollection[j],this.multiPageCollection[j].pageNumber);}}this.isExtended=false;this.isSelectionMaintained=false;// this.pdfViewerBase.annotationHelper.redoCollection = [];
if(isCleared&&this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.clearTextSelection();}if(this.isEnableTextMarkupResizer(type)){this.updateAnnotationBounds();}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.isMultiPageAnnotations=function(pageBounds,type){var isMultiSelect=false;for(var n=0;n<pageBounds.length;n++){if(pageBounds[n].pageIndex!==pageBounds[0].pageIndex&&this.isMultiAnnotation(type)){isMultiSelect=true;break;}}return isMultiSelect;};TextMarkupAnnotation.prototype.isMultiAnnotation=function(type){var isSelection=false;if(type==='Highlight'&&this.pdfViewer.highlightSettings.enableMultiPageAnnotation){isSelection=true;}else if(type==='Underline'&&this.pdfViewer.underlineSettings.enableMultiPageAnnotation){isSelection=true;}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.enableMultiPageAnnotation){isSelection=true;}else if(this.pdfViewer.enableMultiPageAnnotation){isSelection=true;}return isSelection;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.modifyCurrentAnnotation=function(currentAnnot,pageBounds,index){for(var c=0;c<currentAnnot.annotNameCollection.length;c++){// eslint-disable-next-line
var currentAnnots=currentAnnot.annotNameCollection[c];var annotationList=this.getAnnotations(pageBounds[index].pageIndex,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnots){this.currentTextMarkupAnnotation=annotationList[z];this.selectTextMarkupCurrentPage=pageBounds[index].pageIndex;this.updateTextMarkupAnnotationBounds(pageBounds,index);break;}}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.drawAnnotationSelector=function(newAnnotation,annotation,newcanvas){var newBounds=[];var x=0;var y=0;var width=0;var height=0;var currentTop=0;var nextTop=0;var currentLeft=0;var nextLeft=0;var currentRotation=0;var nextRotation=0;for(var i=0;i<newAnnotation.bounds.length;i++){// eslint-disable-next-line
currentTop=newAnnotation.bounds[i].top?newAnnotation.bounds[i].top:newAnnotation.bounds[i].Top;nextTop=!sf.base.isNullOrUndefined(newAnnotation.bounds[i+1])?newAnnotation.bounds[i+1].top?newAnnotation.bounds[i+1].top:newAnnotation.bounds[i+1].Top:0;currentLeft=newAnnotation.bounds[i].left?newAnnotation.bounds[i].left:newAnnotation.bounds[i].Left;nextLeft=!sf.base.isNullOrUndefined(newAnnotation.bounds[i+1])?newAnnotation.bounds[i+1].left?newAnnotation.bounds[i+1].left:newAnnotation.bounds[i+1].Left:0;currentRotation=newAnnotation.bounds[i].rotation;nextRotation=!sf.base.isNullOrUndefined(newAnnotation.bounds[i+1])?newAnnotation.bounds[i+1].rotation:0;var rotation_0_180_exists=currentRotation==0||currentRotation==180;if(newAnnotation.bounds.length>1&&i<newAnnotation.bounds.length-1&&currentTop===nextTop&&rotation_0_180_exists||currentLeft===nextLeft&&!rotation_0_180_exists){newBounds.push(newAnnotation.bounds[i]);}else{if(i===newAnnotation.bounds.length-1||newAnnotation.bounds.length>=1){newBounds.push(newAnnotation.bounds[i]);}if(newBounds.length>=1){var boundsLength=newBounds.length-1;x=newBounds.reduce(function(min,rect){return(rect.left?rect.left:rect.Left||0)<min?rect.left?rect.left:rect.Left||0:min;},Infinity);y=newBounds.reduce(function(min,rect){return(rect.top?rect.top:rect.Top||0)<min?rect.top?rect.top:rect.Top||0:min;},Infinity);if(rotation_0_180_exists){height=newBounds[0].height?newBounds[0].height:newBounds[0].Height;width=newBounds.reduce(function(sum,rect){return sum+(rect.width?rect.width:rect.Width||0);},0);}else{width+=newBounds[0].width?newBounds[0].width:newBounds[0].Width;height=newBounds.reduce(function(sum,rect){return sum+(rect.height?rect.height:rect.Height||0);},0);}}if(!newcanvas){newcanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+newAnnotation.pageNumber);}// eslint-disable-next-line max-len
this.drawAnnotationSelectRect(newcanvas,this.getMagnifiedValue(x-0.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(y-0.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(width+0.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(height+0.5,this.pdfViewerBase.getZoomFactor()),annotation);newBounds=[];width=0;height=0;}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.selectMultiPageAnnotations=function(annotation){for(var k=0;k<annotation.annotNameCollection.length;k++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[k];if(currentAnnot!==annotation.annotName){for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];var annotationList=this.getAnnotations(currentPage,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){// eslint-disable-next-line
var newAnnotation=annotationList[z];this.drawAnnotationSelector(newAnnotation,annotation);}}}}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.deletMultiPageAnnotation=function(annotation){for(var k=0;k<annotation.annotNameCollection.length;k++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[k];if(currentAnnot!==annotation.annotName){for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];var annotationList=this.getAnnotations(currentPage,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){// eslint-disable-next-line
var newAnnotation=annotationList[z];var deletedAnnotation=null;deletedAnnotation=annotationList.splice(z,1)[0];this.pdfViewer.annotationModule.addAction(currentPage,z,deletedAnnotation,'Text Markup Deleted',null);this.currentAnnotationIndex=z;this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(deletedAnnotation,'textMarkup');var removeDiv=document.getElementById(deletedAnnotation.annotName);if(removeDiv){if(removeDiv.parentElement.childElementCount===1){}else{removeDiv.remove();}}this.pdfViewer.annotationModule.updateAnnotationCollection(newAnnotation);this.manageAnnotations(annotationList,currentPage);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.updateImportAnnotationCollection(newAnnotation,newAnnotation.pageNumber,'textMarkupAnnotation');var annotationId=newAnnotation.annotName;// eslint-disable-next-line
var annotationBounds=newAnnotation.bounds;this.pdfViewer.annotationModule.renderAnnotations(currentPage,null,null,null);}}}}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.modifyMultiPageAnnotations=function(annotation,property,value){for(var k=0;k<annotation.annotNameCollection.length;k++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[k];if(currentAnnot!==annotation.annotName){for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];var annotationList=this.getAnnotations(currentPage,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){if(property==='Color'){annotationList[z].color=value;}else{annotationList[z].opacity=value;}annotationList[z].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.currentAnnotationIndex=z;if(status===null||status==='changed'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.addAction(annotationList[z].pageNumber,z,annotationList[z],'Text Markup Property modified',property);}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationList[z]);this.manageAnnotations(annotationList,currentPage);this.pdfViewer.annotationModule.renderAnnotations(currentPage,null,null,null);}}}}}}};TextMarkupAnnotation.prototype.convertSelectionToTextMarkup=function(type,selectionObject,factor){var isMultiSelect=false;this.triggerAddEvent=false;this.multiPageCollection=[];for(var i=0;i<selectionObject.length;i++){var textValue=selectionObject[i].textContent;// eslint-disable-next-line
var indexes=void 0;if(selectionObject[i].startNode===selectionObject[i].endNode){var parentText=document.getElementById(selectionObject[i].startNode).textContent;indexes=this.getIndexNumbers(selectionObject[i].pageNumber,textValue,parentText);}else{indexes=this.getIndexNumbers(selectionObject[i].pageNumber,textValue);}if(!isMultiSelect){for(var n=1;n<selectionObject.length;n++){if(selectionObject[n].pageNumber!==selectionObject[0].pageNumber&&this.isMultiAnnotation(type)){isMultiSelect=true;break;}}}if(this.isMultiAnnotation(type)&&selectionObject.length-1===i){this.triggerAddEvent=true;}// eslint-disable-next-line max-len
this.drawTextMarkups(type,selectionObject[i].rectangleBounds,selectionObject[i].pageNumber,selectionObject[i].bound,factor,textValue,indexes.startIndex,indexes.endIndex,isMultiSelect,document.getElementById(selectionObject[i].startNode));}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.updateTextMarkupAnnotationBounds=function(pageBounds,currentIndex){if(this.currentTextMarkupAnnotation){var pageAnnotations=this.getAnnotations(pageBounds[currentIndex].pageIndex,null);var annotation=null;if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(pageAnnotations[i])){pageAnnotations[i].bounds=pageBounds[currentIndex].bounds;pageAnnotations[i].textMarkupContent=pageBounds[currentIndex].textContent;pageAnnotations[i].textMarkupStartIndex=pageBounds[currentIndex].startIndex;pageAnnotations[i].textMarkupEndIndex=pageBounds[currentIndex].endIndex;pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();annotation=pageAnnotations[i];}}this.manageAnnotations(pageAnnotations,pageBounds[currentIndex].pageIndex);this.currentTextMarkupAnnotation=null;this.pdfViewer.annotationModule.renderAnnotations(pageBounds[currentIndex].pageIndex,null,null,null);this.pdfViewerBase.updateDocumentEditedProperty(true);if(annotation){// eslint-disable-next-line
var settings={opacity:annotation.opacity,color:annotation.color,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate};// eslint-disable-next-line max-len
var multiPageCollection=this.multiPageCollectionList(annotation);if(multiPageCollection.length>0){if(pageBounds.length-1===currentIndex){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationResize(pageBounds[currentIndex].pageIndex,annotation.annotName,annotation.textMarkupAnnotationType,annotation.bounds,settings,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex,null,multiPageCollection);}}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationResize(pageBounds[currentIndex].pageIndex,annotation.annotName,annotation.textMarkupAnnotationType,annotation.bounds,settings,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex,null);}}// eslint-disable-next-line max-len
this.currentAnnotationIndex=null;this.selectTextMarkupCurrentPage=null;}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.multiPageCollectionList=function(annotation){var multiPageCollectionList=[];if(annotation.isMultiSelect&&annotation.annotNameCollection){multiPageCollectionList.push(annotation);for(var k=0;k<annotation.annotNameCollection.length;k++){// eslint-disable-next-line
var currentAnnot=annotation.annotNameCollection[k];if(currentAnnot!==annotation.annotName){for(var p=0;p<annotation.annotpageNumbers.length;p++){var currentPage=annotation.annotpageNumbers[p];var annotationList=this.getAnnotations(currentPage,null);if(annotationList){for(var z=0;z<annotationList.length;z++){if(annotationList[z].annotName===currentAnnot){multiPageCollectionList.push(annotationList[z]);}}}}}}}return multiPageCollectionList;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.updateAnnotationNames=function(annotations,pageNumber){if(annotations){var pageAnnotations=this.getAnnotations(pageNumber,null);var annotation=null;if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(annotations.annotName===pageAnnotations[i].annotName){// eslint-disable-next-line
var annotNamesCollections=[];// eslint-disable-next-line
var annotpageNumbers=[];for(var p=0;p<this.multiPageCollection.length;p++){annotNamesCollections.push(this.multiPageCollection[p].annotName);annotpageNumbers.push(this.multiPageCollection[p].pageNumber);}pageAnnotations[i].isMultiSelect=true;pageAnnotations[i].annotNameCollection=annotNamesCollections;pageAnnotations[i].annotpageNumbers=annotpageNumbers;annotation=pageAnnotations[i];}}this.manageAnnotations(pageAnnotations,pageNumber);}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.updateAnnotationContent=function(annotation,pageBound){if(annotation){var pageAnnotations=this.getAnnotations(this.selectTextMarkupCurrentPage,null);var annotation_1=null;if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(pageAnnotations[i])){pageAnnotations[i].textMarkupContent=pageBound.textContent;pageAnnotations[i].textMarkupStartIndex=pageBound.startIndex;pageAnnotations[i].textMarkupEndIndex=pageBound.endIndex;annotation_1=pageAnnotations[i];}this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],this.selectTextMarkupCurrentPage);}this.manageAnnotations(pageAnnotations,this.selectTextMarkupCurrentPage);}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.drawTextMarkups=function(type,bounds,pageNumber,rect,factor,textContent,startIndex,endIndex,isMultiSelect,targetElement){var annotation=null;this.isNewAnnotation=false;var author='Guest';var subject;var context=this.getPageContext(pageNumber);var modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.highlightColor=this.highlightColor?this.highlightColor:this.pdfViewer.highlightSettings.color;this.underlineColor=this.underlineColor?this.underlineColor:this.pdfViewer.underlineSettings.color;this.strikethroughColor=this.strikethroughColor?this.strikethroughColor:this.pdfViewer.strikethroughSettings.color;this.highlightOpacity=this.pdfViewer.highlightSettings.opacity;this.underlineOpacity=this.pdfViewer.underlineSettings.opacity;this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity;this.annotationAddMode='UI Drawn Annotation';// eslint-disable-next-line
var allowedInteractions;var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var annotationRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);if(context){context.setLineDash([]);switch(type){case'Highlight':this.isNewAnnotation=true;subject='Highlight';// eslint-disable-next-line max-len
author=this.pdfViewer.highlightSettings.author!=='Guest'&&this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';allowedInteractions=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:'None';// eslint-disable-next-line max-len
annotation=this.getAddedAnnotation(type,this.highlightColor,this.highlightOpacity,bounds,author,subject,modifiedDate,'',false,rect,pageNumber,textContent,startIndex,endIndex,isMultiSelect,allowedInteractions,annotationRotate);if(annotation){// eslint-disable-next-line max-len
this.renderHighlightAnnotation(annotation.bounds,annotation.opacity,annotation.color,context,factor,annotation.isPrint,pageNumber);}this.currentTextMarkupAnnotation=annotation;this.selectTextMarkupCurrentPage=pageNumber;this.drawAnnotationSelector(annotation,annotation,context.canvas);break;case'Strikethrough':this.isNewAnnotation=true;subject='Strikethrough';// eslint-disable-next-line max-len
author=this.pdfViewer.strikethroughSettings.author!=='Guest'&&this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';allowedInteractions=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:'None';// eslint-disable-next-line max-len
if(targetElement&&targetElement.style.transform!==''){if(targetElement.style.transform.startsWith('rotate(90deg)')){annotationRotate=Math.abs(pageRotation-90);}else if(targetElement.style.transform.startsWith('rotate(180deg)')){annotationRotate=Math.abs(pageRotation-180);}else if(targetElement.style.transform.startsWith('rotate(-90deg)')){annotationRotate=Math.abs(pageRotation-270);}else{annotationRotate=pageRotation;}}annotation=this.getAddedAnnotation(type,this.strikethroughColor,this.strikethroughOpacity,bounds,author,subject,modifiedDate,'',false,rect,pageNumber,textContent,startIndex,endIndex,isMultiSelect,allowedInteractions,annotationRotate);if(annotation){// eslint-disable-next-line max-len
this.renderStrikeoutAnnotation(annotation.bounds,annotation.opacity,annotation.color,context,factor,pageNumber,annotation.isPrint,annotation.annotationRotation);}this.currentTextMarkupAnnotation=annotation;this.selectTextMarkupCurrentPage=pageNumber;this.drawAnnotationSelector(annotation,annotation,context.canvas);break;case'Underline':this.isNewAnnotation=true;subject='Underline';// eslint-disable-next-line max-len
author=this.pdfViewer.underlineSettings.author!=='Guest'&&this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:'Guest';allowedInteractions=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:'None';// eslint-disable-next-line max-len
if(targetElement&&targetElement.style.transform!==''){if(targetElement.style.transform.startsWith('rotate(90deg)')){annotationRotate=Math.abs(pageRotation-90);}else if(targetElement.style.transform.startsWith('rotate(180deg)')){annotationRotate=Math.abs(pageRotation-180);}else if(targetElement.style.transform.startsWith('rotate(-90deg)')){annotationRotate=Math.abs(pageRotation-270);}else{annotationRotate=pageRotation;}}annotation=this.getAddedAnnotation(type,this.underlineColor,this.underlineOpacity,bounds,author,subject,modifiedDate,'',false,rect,pageNumber,textContent,startIndex,endIndex,isMultiSelect,allowedInteractions,annotationRotate);if(annotation){// eslint-disable-next-line max-len
this.renderUnderlineAnnotation(annotation.bounds,annotation.opacity,annotation.color,context,factor,pageNumber,annotation.isPrint,annotation.annotationRotation);}this.currentTextMarkupAnnotation=annotation;this.selectTextMarkupCurrentPage=pageNumber;this.drawAnnotationSelector(annotation,annotation,context.canvas);break;}this.isNewAnnotation=false;if(annotation){this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var settings={opacity:annotation.opacity,color:annotation.color,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate};var index=this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length-1].index;// eslint-disable-next-line max-len
if(this.isMultiAnnotation(type)){if(this.triggerAddEvent){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(pageNumber,annotation.annotName,type,annotation.bounds,settings,textContent,startIndex,endIndex,null,this.multiPageCollection);}}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationAdd(pageNumber,annotation.annotName,type,annotation.bounds,settings,textContent,startIndex,endIndex);}}}};TextMarkupAnnotation.prototype.getAngle=function(rotation){// eslint-disable-next-line
var angle=0;if(rotation){switch(rotation){case 0:angle=0;break;case 1:angle=90;break;case 2:angle=180;break;case 3:angle=270;break;}}return angle;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.retreiveTextIndex=function(annotation){if(annotation.textMarkupContent===''){this.retreieveSelection(annotation,null);var pageBounds=this.getDrawnBounds();window.getSelection().removeAllRanges();if(pageBounds[0]&&pageBounds[0].bounds){this.updateAnnotationContent(annotation,pageBounds[0]);annotation.textMarkupContent=pageBounds[0].textContent;annotation.textMarkupStartIndex=pageBounds[0].startIndex;annotation.textMarkupEndIndex=pageBounds[0].endIndex;}}return annotation;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.renderHighlightAnnotation=function(bounds,opacity,color,context,factor,isPrint,pageIndex){var zoomRatio=this.pdfViewerBase.getZoomRatio(factor);for(var i=0;i<bounds.length;i++){// eslint-disable-next-line
var bound=bounds[i];context.beginPath();var x=bound.X?bound.X:bound.left;var y=bound.Y?bound.Y:bound.top;var width=bound.Width?bound.Width:bound.width;var height=bound.Height?bound.Height:bound.height;var rotation=bound.Rotation?bound.Rotation:bound.rotation;x=x?x:bound.x;y=y?y:bound.y;// The highlighted position is slightly increased. So Subtract -1 from the height. 
if(rotation>=0){rotation=Math.abs(rotation)/90;}if(rotation==0||rotation==2){height=height-1;}else if(rotation==1||rotation==3){width=width-1;}if(context.canvas.id===this.pdfViewer.dataId+'_print_annotation_layer_'+pageIndex){if(isPrint){// eslint-disable-next-line max-len
context.rect(x*zoomRatio,y*zoomRatio,width*zoomRatio,height*zoomRatio);context.globalAlpha=opacity*0.5;context.closePath();context.fillStyle=color;context.msFillRule='nonzero';context.fill();}}else{// eslint-disable-next-line max-len
context.rect(x*zoomRatio,y*zoomRatio,width*zoomRatio,height*zoomRatio);context.globalAlpha=opacity*0.5;context.closePath();context.fillStyle=color;context.msFillRule='nonzero';context.fill();}}context.save();};// eslint-disable-next-line
TextMarkupAnnotation.prototype.renderStrikeoutAnnotation=function(bounds,opacity,color,context,factor,pageNumber,isPrint,annotationRotation){for(var i=0;i<bounds.length;i++){// eslint-disable-next-line
var bound=this.getProperBounds(bounds[i]);var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var factorRatio=this.pdfViewerBase.getZoomRatio(factor);var rotation=pageDetails.rotation;if(bounds[i].rotation){rotation=Math.abs(bounds[i].rotation)/90;}if(context.canvas.id===this.pdfViewer.element.id+'_print_annotation_layer_'+pageNumber){if(isPrint){if(rotation===1){// eslint-disable-next-line max-len
this.drawLine(opacity,bound.x+bound.width/2,bound.y,bound.width,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else if(rotation===2){// eslint-disable-next-line max-len
this.drawLine(opacity,bound.x,bound.y+bound.height/2,bound.width,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else if(rotation===3){this.drawLine(opacity,bound.x,bound.y,bound.width/2,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else{this.drawLine(opacity,bound.x,bound.y,bound.width,bound.height/2,color,factorRatio,context,pageNumber,bounds[i].rotation);}}}else{if(rotation===1){// eslint-disable-next-line max-len
this.drawLine(opacity,bound.x+bound.width/2,bound.y,bound.width,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else if(rotation===2){// eslint-disable-next-line max-len
this.drawLine(opacity,bound.x,bound.y+bound.height/2,bound.width,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else if(rotation===3){this.drawLine(opacity,bound.x,bound.y,bound.width/2,bound.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}else{this.drawLine(opacity,bound.x,bound.y,bound.width,bound.height/2,color,factorRatio,context,pageNumber,bounds[i].rotation);}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.renderUnderlineAnnotation=function(bounds,opacity,color,context,factor,pageNumber,isPrint,annotationRotation){for(var i=0;i<bounds.length;i++){// eslint-disable-next-line
var boundValues=this.getProperBounds(bounds[i]);var factorRatio=this.pdfViewerBase.getZoomRatio(factor);if(context.canvas.id===this.pdfViewer.dataId+'_print_annotation_layer_'+pageNumber){if(isPrint){// eslint-disable-next-line max-len
this.drawLine(opacity,boundValues.x,boundValues.y,boundValues.width,boundValues.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}}else{this.drawLine(opacity,boundValues.x,boundValues.y,boundValues.width,boundValues.height,color,factorRatio,context,pageNumber,bounds[i].rotation);}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getProperBounds=function(bound){var x=bound.X?bound.X:bound.left;var y=bound.Y?bound.Y:bound.top;var width=bound.Width?bound.Width:bound.width;var height=bound.Height?bound.Height:bound.height;x=x?x:bound.x;y=y?y:bound.y;return{x:x,y:y,width:width,height:height};};// eslint-disable-next-line max-len
TextMarkupAnnotation.prototype.drawLine=function(opacity,x,y,width,height,color,factor,context,pageNumber,annotationRotation){context.globalAlpha=opacity;y=y-1;context.setLineDash([]);context.beginPath();var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var rotation=pageDetails.rotation;if(annotationRotation>=0){rotation=Math.abs(annotationRotation)/90;}if(rotation==0||rotation==2){height=height-1;}else if(rotation==1||rotation==3){width=width-1;}if(rotation===1){context.moveTo(x*factor,y*factor);context.lineTo(x*factor,(y+height)*factor);}else if(rotation===2){context.moveTo(x*factor,y*factor);context.lineTo((width+x)*factor,y*factor);}else if(rotation===3){context.moveTo((width+x)*factor,y*factor);context.lineTo((width+x)*factor,(y+height)*factor);}else{context.moveTo(x*factor,(y+height)*factor);context.lineTo((width+x)*factor,(y+height)*factor);}context.lineWidth=1;context.strokeStyle=color;context.closePath();context.msFillRule='nonzero';context.stroke();};/**
     * @param textMarkupAnnotations
     * @param pageIndex
     * @param stampData
     * @param shapeData
     * @param measureShapeData
     * @param stickyData
     * @param textMarkupAnnotations
     * @param pageIndex
     * @param stampData
     * @param shapeData
     * @param measureShapeData
     * @param stickyData
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.printTextMarkupAnnotations=function(textMarkupAnnotations,pageIndex,stampData,shapeData,measureShapeData,stickyData){var canvas=sf.base.createElement('canvas',{id:this.pdfViewer.dataId+'_print_annotation_layer_'+pageIndex});canvas.style.width=816+'px';canvas.style.height=1056+'px';var pageWidth=this.pdfViewerBase.pageSize[pageIndex].width;var pageHeight=this.pdfViewerBase.pageSize[pageIndex].height;var zoom=this.pdfViewerBase.getZoomFactor();var zoomRatio=this.pdfViewerBase.getZoomRatio(zoom);canvas.height=pageHeight*zoomRatio;canvas.width=pageWidth*zoomRatio;// eslint-disable-next-line
var textMarkupannotations=this.getAnnotations(pageIndex,null,'_annotations_textMarkup');// eslint-disable-next-line
var shapeAnnotation=this.getAnnotations(pageIndex,null,'_annotations_shape');// eslint-disable-next-line
var measureShapeAnnotation=this.getAnnotations(pageIndex,null,'_annotations_shape_measure');// eslint-disable-next-line
var stampAnnotation=this.getAnnotations(pageIndex,null,'_annotations_stamp');// eslint-disable-next-line
var stickyNoteAnnotation=this.getAnnotations(pageIndex,null,'_annotations_sticky');if(stampAnnotation||shapeAnnotation||stickyNoteAnnotation||measureShapeAnnotation){this.pdfViewer.renderDrawing(canvas,pageIndex);}else{this.pdfViewer.annotation.renderAnnotations(pageIndex,shapeData,measureShapeData,null,canvas);this.pdfViewer.annotation.stampAnnotationModule.renderStampAnnotations(stampData,pageIndex,canvas);this.pdfViewer.annotation.stickyNotesAnnotationModule.renderStickyNotesAnnotations(stickyData,pageIndex,canvas);}var zoomFactor=this.pdfViewerBase.getZoomFactor();if(textMarkupannotations){this.renderTextMarkupAnnotations(null,pageIndex,canvas,zoomFactor);}else{this.renderTextMarkupAnnotations(textMarkupAnnotations,pageIndex,canvas,zoomFactor);}var imageSource=canvas.toDataURL();return imageSource;};/**
     * @private
     */TextMarkupAnnotation.prototype.saveTextMarkupAnnotations=function(){// eslint-disable-next-line
var storeTextMarkupObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');if(this.pdfViewerBase.isStorageExceed){storeTextMarkupObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_textMarkup'];}// eslint-disable-next-line
var textMarkupAnnotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){textMarkupAnnotations[j]=[];}if(storeTextMarkupObject&&!this.pdfViewer.annotationSettings.skipDownload){var textMarkupAnnotationCollection=JSON.parse(storeTextMarkupObject);for(var i=0;i<textMarkupAnnotationCollection.length;i++){var newArray=[];var pageAnnotationObject=textMarkupAnnotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);if(this.pdfViewerBase.isJsonExported){if(pageAnnotationObject.annotations[z].isAnnotationRotated){pageAnnotationObject.annotations[z].bounds=this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds,i);}else{var pageDetails=this.pdfViewerBase.pageSize[pageAnnotationObject.pageIndex];if(pageDetails){pageAnnotationObject.annotations[z].annotationRotation=pageDetails.rotation;}}}// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.getBoundsForSave(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));var colorString=pageAnnotationObject.annotations[z].color;pageAnnotationObject.annotations[z].color=JSON.stringify(this.getRgbCode(colorString));pageAnnotationObject.annotations[z].rect=JSON.stringify(pageAnnotationObject.annotations[z].rect);}newArray=pageAnnotationObject.annotations;}textMarkupAnnotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(textMarkupAnnotations);};/**
     * @private
     */TextMarkupAnnotation.prototype.deleteTextMarkupAnnotation=function(){if(this.currentTextMarkupAnnotation){var isLock=false;if(this.currentTextMarkupAnnotation.annotationSettings){// eslint-disable-next-line
isLock=this.currentTextMarkupAnnotation.annotationSettings.isLock;if(this.pdfViewer.annotationModule.checkAllowedInteractions('Delete',this.currentTextMarkupAnnotation)){isLock=false;}}if(!isLock){var deletedAnnotation=null;this.showHideDropletDiv(true);// eslint-disable-next-line
var annotation=this.currentTextMarkupAnnotation;if(this.currentTextMarkupAnnotation.isMultiSelect&&annotation.annotNameCollection){this.deletMultiPageAnnotation(annotation);}var pageAnnotations=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(this.currentTextMarkupAnnotation.annotName===pageAnnotations[i].annotName){deletedAnnotation=pageAnnotations.splice(i,1)[0];// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,i,deletedAnnotation,'Text Markup Deleted',null);this.currentAnnotationIndex=i;this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(deletedAnnotation,'textMarkup');var removeDiv=document.getElementById(deletedAnnotation.annotName);if(removeDiv){this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',deletedAnnotation.annotName,this.currentAnnotationIndex);}}}this.pdfViewer.annotationModule.updateAnnotationCollection(this.currentTextMarkupAnnotation);this.manageAnnotations(pageAnnotations,this.selectTextMarkupCurrentPage);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.updateImportAnnotationCollection(this.currentTextMarkupAnnotation,this.currentTextMarkupAnnotation.pageNumber,'textMarkupAnnotation');var annotationId=this.currentTextMarkupAnnotation.annotName;// eslint-disable-next-line
var annotationBounds=this.currentTextMarkupAnnotation.bounds;this.currentTextMarkupAnnotation=null;this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null);this.pdfViewerBase.updateDocumentEditedProperty(true);this.pdfViewerBase.fireDocumentEditedEvent("AnnotationDeleted");// eslint-disable-next-line max-len
var multiPageCollection=this.multiPageCollectionList(annotation);if(multiPageCollection.length>0){multiPageCollection.push(deletedAnnotation);// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,annotationId,deletedAnnotation.textMarkupAnnotationType,annotationBounds,deletedAnnotation.textMarkupContent,deletedAnnotation.textMarkupStartIndex,deletedAnnotation.textMarkupEndIndex,multiPageCollection);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,annotationId,deletedAnnotation.textMarkupAnnotationType,annotationBounds,deletedAnnotation.textMarkupContent,deletedAnnotation.textMarkupStartIndex,deletedAnnotation.textMarkupEndIndex);}this.currentAnnotationIndex=null;this.selectTextMarkupCurrentPage=null;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
//this.pdfViewer.toolbarModule.annotationToolbarModule.hideMobileAnnotationToolbar();
this.pdfViewer.toolbarModule.showToolbar(true);}}}}};/**
     * @param color
     * @private
     */TextMarkupAnnotation.prototype.modifyColorProperty=function(color){if(this.currentTextMarkupAnnotation){var pageAnnotations=this.modifyAnnotationProperty('Color',color,null);this.manageAnnotations(pageAnnotations,this.selectTextMarkupCurrentPage);this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null);this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var annotation=this.currentTextMarkupAnnotation;// eslint-disable-next-line max-len
var multiPageCollection=this.multiPageCollectionList(annotation);if(multiPageCollection.length>0){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,annotation.annotName,annotation.textMarkupAnnotationType,true,false,false,false,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex,multiPageCollection);this.currentAnnotationIndex=null;}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,annotation.annotName,annotation.textMarkupAnnotationType,true,false,false,false,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex);this.currentAnnotationIndex=null;}}};/**
     * @param args
     * @param isOpacity
     * @private
     */TextMarkupAnnotation.prototype.modifyOpacityProperty=function(args,isOpacity){if(this.currentTextMarkupAnnotation){var pageAnnotations=void 0;if(isOpacity!==null&&isOpacity!==undefined){pageAnnotations=this.modifyAnnotationProperty('Opacity',isOpacity,'changed');}else{pageAnnotations=this.modifyAnnotationProperty('Opacity',args.value/100,args.name);}if(pageAnnotations){this.manageAnnotations(pageAnnotations,this.selectTextMarkupCurrentPage);this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null);if(isOpacity||args.name==='changed'){this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var annotation=this.currentTextMarkupAnnotation;// eslint-disable-next-line max-len
var multiPageCollection=this.multiPageCollectionList(annotation);if(multiPageCollection.length>0){// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,annotation.annotName,annotation.textMarkupAnnotationType,false,true,false,false,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex,multiPageCollection);this.currentAnnotationIndex=null;}else{// eslint-disable-next-line max-len
this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,annotation.annotName,annotation.textMarkupAnnotationType,false,true,false,false,annotation.textMarkupContent,annotation.textMarkupStartIndex,annotation.textMarkupEndIndex);this.currentAnnotationIndex=null;}}}}};/**
     * @param property
     * @param value
     * @param status
     * @param annotName
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.modifyAnnotationProperty=function(property,value,status,annotName){// eslint-disable-next-line
this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");var annotation=this.currentTextMarkupAnnotation;if(annotation.isMultiSelect&&annotation.annotNameCollection){this.modifyMultiPageAnnotations(annotation,property,value);}var pageAnnotations=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(pageAnnotations[i])){if(property==='Color'){pageAnnotations[i].color=value;}else if(property==='Opacity'){pageAnnotations[i].opacity=value;}else if(property==='AnnotationSettings'){pageAnnotations[i].annotationSettings={isLock:value};}pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.currentAnnotationIndex=i;if(status===null||status==='changed'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,i,this.currentTextMarkupAnnotation,'Text Markup Property modified',property);}this.currentTextMarkupAnnotation=pageAnnotations[i];this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(pageAnnotations[i]);this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],this.selectTextMarkupCurrentPage);}}}return pageAnnotations;};/**
     * @param annotation
     * @param pageNumber
     * @param index
     * @param action
     * @private
     */TextMarkupAnnotation.prototype.undoTextMarkupAction=function(annotation,pageNumber,index,action){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){if(action==='Text Markup Added'){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(pageAnnotations[index],'textMarkup');// eslint-disable-next-line
var removeDiv=document.getElementById(pageAnnotations[index].annotName);if(removeDiv){this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveCommentsCollection',annotation.annotName,pageNumber);}pageAnnotations.splice(index,1);}else if(action==='Text Markup Deleted'){// eslint-disable-next-line max-len
pageAnnotations.splice(index,0,annotation);}}this.clearCurrentAnnotation();this.pdfViewerBase.updateDocumentEditedProperty(true);this.manageAnnotations(pageAnnotations,pageNumber);this.pdfViewer.annotationModule.renderAnnotations(pageNumber,null,null,null);this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(pageNumber,annotation.shapeAnnotationType);};/**
     * @param annotation
     * @param pageNumber
     * @param index
     * @param property
     * @param isUndoAction
     * @param annotation
     * @param pageNumber
     * @param index
     * @param property
     * @param isUndoAction
     * @param annotation
     * @param pageNumber
     * @param index
     * @param property
     * @param isUndoAction
     * @param annotation
     * @param pageNumber
     * @param index
     * @param property
     * @param isUndoAction
     * @private
     */ // eslint-disable-next-line max-len
TextMarkupAnnotation.prototype.undoRedoPropertyChange=function(annotation,pageNumber,index,property,isUndoAction){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){if(property==='Color'){var tempColor=pageAnnotations[index].color;pageAnnotations[index].color=annotation.color;annotation.color=tempColor;}else{var tempOpacity=pageAnnotations[index].opacity;pageAnnotations[index].opacity=annotation.opacity;annotation.opacity=tempOpacity;}this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotation,null,true);if(isUndoAction){annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}}this.clearCurrentAnnotation();this.pdfViewerBase.updateDocumentEditedProperty(true);this.manageAnnotations(pageAnnotations,pageNumber);this.pdfViewer.annotationModule.renderAnnotations(pageNumber,null,null,null);return annotation;};/**
     * @param annotation
     * @param pageNumber
     * @param index
     * @param action
     * @private
     */TextMarkupAnnotation.prototype.redoTextMarkupAction=function(annotation,pageNumber,index,action){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){if(action==='Text Markup Added'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(pageNumber,annotation.shapeAnnotationType);pageAnnotations.push(annotation);}else if(action==='Text Markup Deleted'){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(pageAnnotations[index],'textMarkup');// eslint-disable-next-line
var removeDiv=document.getElementById(pageAnnotations[index].annotName);if(removeDiv){if(removeDiv.parentElement.childElementCount===1){}else{removeDiv.remove();}}pageAnnotations.splice(index,1);}}this.clearCurrentAnnotation();this.pdfViewerBase.updateDocumentEditedProperty(true);this.manageAnnotations(pageAnnotations,pageNumber);this.pdfViewer.annotationModule.renderAnnotations(pageNumber,null,null,null);};/**
     * @param pageNumber
     * @param note
     * @param pageNumber
     * @param note
     * @private
     */TextMarkupAnnotation.prototype.saveNoteContent=function(pageNumber,note){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){for(var i=0;i<pageAnnotations.length;i++){if(JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(pageAnnotations[i])){pageAnnotations[i].note=note;}}}this.manageAnnotations(pageAnnotations,pageNumber);this.pdfViewerBase.updateDocumentEditedProperty(true);};TextMarkupAnnotation.prototype.clearCurrentAnnotation=function(){if(!this.isExtended){if(this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection){this.selectTextMarkupCurrentPage=this.selectTextMarkupCurrentPage;this.currentTextMarkupAnnotation=this.currentTextMarkupAnnotation;}else{this.selectTextMarkupCurrentPage=null;this.currentTextMarkupAnnotation=null;}var isSkip=false;// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus){isSkip=true;}if(!isSkip){this.enableAnnotationPropertiesTool(false);}}};/**
     * @param pageNumber
     * @param isSelect
     * @param pageNumber
     * @param isSelect
     * @private
     */TextMarkupAnnotation.prototype.clearCurrentAnnotationSelection=function(pageNumber,isSelect){if(isSelect){this.isAnnotationSelect=true;}else{this.isAnnotationSelect=false;}var lowerPageIndex=pageNumber-2>=0?pageNumber-2:0;// eslint-disable-next-line max-len
var higherPageIndex=pageNumber+2<this.pdfViewerBase.pageCount?pageNumber+2:this.pdfViewerBase.pageCount-1;for(var k=lowerPageIndex;k<=higherPageIndex;k++){this.clearAnnotationSelection(k);}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getBoundsForSave=function(bounds,pageIndex){// eslint-disable-next-line
var newArray=[];for(var i=0;i<bounds.length;i++){// eslint-disable-next-line
var bound=this.getAnnotationBounds(bounds[i],pageIndex);newArray.push(bound);}return newArray;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getAnnotationBounds=function(bounds,pageIndex){var left=bounds.left?bounds.left:bounds.Left?bounds.Left:0;var top=bounds.top?bounds.top:bounds.Top?bounds.Top:0;var height=bounds.height?bounds.height:bounds.Height?bounds.Height:0;var width=bounds.width?bounds.width:bounds.Width?bounds.Width:0;var pageDetails=this.pdfViewerBase.pageSize[pageIndex];left=left?left:bounds.x;top=top?top:bounds.y;if(pageDetails){if(pageDetails.rotation===1){return{left:top,top:pageDetails.width-(left+width),width:height,height:width};}else if(pageDetails.rotation===2){// eslint-disable-next-line max-len
return{left:pageDetails.width-left-width,top:pageDetails.height-top-height,width:width,height:height};}else if(pageDetails.rotation===3){return{left:pageDetails.height-top-height,top:left,width:height,height:width};}else{return{left:left,top:top,width:width,height:height};}}else{return{left:left,top:top,width:width,height:height};}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var markupStringArray=colorString.split(',');if(sf.base.isNullOrUndefined(markupStringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');markupStringArray=colorString.split(',');}// eslint-disable-next-line radix
var textMarkupR=parseInt(markupStringArray[0].split('(')[1]);// eslint-disable-next-line radix
var textMarkupG=parseInt(markupStringArray[1]);// eslint-disable-next-line radix
var textMarkupB=parseInt(markupStringArray[2]);// eslint-disable-next-line radix
var textMarkupA=parseInt(markupStringArray[3]);return{a:textMarkupA,r:textMarkupR,g:textMarkupG,b:textMarkupB};};TextMarkupAnnotation.prototype.getDrawnBounds=function(){var pageBounds=[];var selection=window.getSelection();if(selection.anchorNode!==null){var range=document.createRange();var isBackWardSelection=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(selection.anchorNode===selection.focusNode){var pageId=this.pdfViewerBase.textLayer.getPageIndex(selection.anchorNode);var startIndex=0;var endIndex=0;if(!isNaN(pageId)){var pageRect=this.pdfViewerBase.getElement('_pageDiv_'+pageId).getBoundingClientRect();if(this.pdfViewerBase.isMixedSizeDocument){pageRect=this.pdfViewerBase.getElement('_textLayer_'+pageId).getBoundingClientRect();}if(isBackWardSelection){range.setStart(selection.focusNode,selection.focusOffset);range.setEnd(selection.anchorNode,selection.anchorOffset);}else{if(selection.anchorOffset<selection.focusOffset){startIndex=selection.anchorOffset;endIndex=selection.focusOffset;range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else{startIndex=selection.focusOffset;endIndex=selection.anchorOffset;range.setStart(selection.focusNode,selection.focusOffset);range.setEnd(selection.anchorNode,selection.anchorOffset);}}var boundingRect=range.getBoundingClientRect();var pageDetails=this.pdfViewerBase.pageSize[pageId];var annotationRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);var textElement=void 0;if(range.startContainer.parentElement){textElement=range.startContainer.parentElement;}else{textElement=range.startContainer.parentNode;}if(textElement&&textElement.style.transform!==''){if(textElement.style.transform.startsWith('rotate(90deg)')){annotationRotate=90;}else if(textElement.style.transform.startsWith('rotate(180deg)')){annotationRotate=180;}else if(textElement.style.transform.startsWith('rotate(-90deg)')||textElement.style.transform.startsWith('rotate(270deg)')){annotationRotate=270;}else{annotationRotate=0;}}// eslint-disable-next-line
var indexes=this.getIndexNumbers(pageId,range.toString(),range.commonAncestorContainer.textContent.toString());// eslint-disable-next-line max-len
var rectangle={x:this.getDefaultValue(boundingRect.left-pageRect.left),y:this.getDefaultValue(boundingRect.top-pageRect.top),left:this.getDefaultValue(boundingRect.left-pageRect.left),top:this.getDefaultValue(boundingRect.top-pageRect.top),width:this.getDefaultValue(boundingRect.width),height:this.getDefaultValue(boundingRect.height),right:this.getDefaultValue(boundingRect.right-pageRect.left),bottom:this.getDefaultValue(boundingRect.bottom-pageRect.top),rotation:annotationRotate};var rectangleArray=[];rectangleArray.push(rectangle);// eslint-disable-next-line
var rect={x:rectangle.left,y:rectangle.top,left:rectangle.left,top:rectangle.top,right:rectangle.right,bottom:rectangle.bottom,rotation:annotationRotate};pageBounds.push({pageIndex:pageId,bounds:rectangleArray,rect:rect,startIndex:indexes.startIndex,endIndex:indexes.endIndex,textContent:range.toString()});}}else{var startNode=void 0;var endNode=void 0;var selectionStartOffset=void 0;var selectionEndOffset=void 0;if(isBackWardSelection){startNode=selection.focusNode;selectionStartOffset=selection.focusOffset;endNode=selection.anchorNode;selectionEndOffset=selection.anchorOffset;}else{startNode=selection.anchorNode;selectionStartOffset=selection.anchorOffset;endNode=selection.focusNode;selectionEndOffset=selection.focusOffset;}var anchorPageId=this.pdfViewerBase.textLayer.getPageIndex(startNode);var anchorTextId=this.pdfViewerBase.textLayer.getTextIndex(startNode,anchorPageId);var focusPageId=this.pdfViewerBase.textLayer.getPageIndex(endNode);var focusTextId=this.pdfViewerBase.textLayer.getTextIndex(endNode,focusPageId);var startOffset=0;var endOffset=0;var currentId=0;for(var i=anchorPageId;i<=focusPageId;i++){var selectionRects=[];var pageStartId=void 0;var pageEndId=void 0;var pageStartOffset=void 0;var pageEndOffset=void 0;var textDivs=this.pdfViewerBase.getElement('_textLayer_'+i).childNodes;var pageRect=this.pdfViewerBase.getElement('_pageDiv_'+i).getBoundingClientRect();if(this.pdfViewerBase.isMixedSizeDocument){pageRect=this.pdfViewerBase.getElement('_textLayer_'+i).getBoundingClientRect();}if(i===anchorPageId){currentId=anchorTextId;}else{currentId=0;}for(var j=currentId;j<textDivs.length;j++){var textElement=textDivs[j];if(j===currentId){pageStartId=currentId;pageStartOffset=i===anchorPageId?selectionStartOffset:0;}else{pageEndId=j;pageEndOffset=i===focusPageId?selectionEndOffset:textElement.textContent.length;}if(j===anchorTextId&&i===anchorPageId){startOffset=selectionStartOffset;}else{startOffset=0;}if(j===focusTextId&&i===focusPageId){endOffset=selectionEndOffset;}else{endOffset=textElement.textContent.length;}for(var k=0;k<textElement.childNodes.length;k++){var node=textElement.childNodes[k];range.setStart(node,startOffset);range.setEnd(node,endOffset);}var boundingRect=range.getBoundingClientRect();var pageDetails=this.pdfViewerBase.pageSize[i];var annotationRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);if(textElement&&textElement.style.transform!==''){if(textElement.style.transform.startsWith('rotate(90deg)')){annotationRotate=90;}else if(textElement.style.transform.startsWith('rotate(180deg)')){annotationRotate=180;}else if(textElement.style.transform.startsWith('rotate(-90deg)')||textElement.style.transform.startsWith('rotate(270deg)')){annotationRotate=270;}else{annotationRotate=0;}}// eslint-disable-next-line max-len
var rectangle={x:this.getDefaultValue(boundingRect.left-pageRect.left),y:this.getDefaultValue(boundingRect.top-pageRect.top),left:this.getDefaultValue(boundingRect.left-pageRect.left),top:this.getDefaultValue(boundingRect.top-pageRect.top),width:this.getDefaultValue(boundingRect.width),height:this.getDefaultValue(boundingRect.height),right:this.getDefaultValue(boundingRect.right-pageRect.left),bottom:this.getDefaultValue(boundingRect.bottom-pageRect.top),rotation:annotationRotate};selectionRects.push(rectangle);range.detach();if(i===focusPageId&&j===focusTextId){break;}}if(!pageEndId){pageEndId=pageStartId;}if(!pageEndOffset){pageEndOffset=endOffset;}var startElementNode=this.pdfViewerBase.getElement('_text_'+i+'_'+pageStartId).childNodes[0];var endElementNode=this.pdfViewerBase.getElement('_text_'+i+'_'+pageEndId).childNodes[0];var pageRange=document.createRange();pageRange.setStart(startElementNode,pageStartOffset);pageRange.setEnd(endElementNode,pageEndOffset);var pageRectBounds=pageRange.getBoundingClientRect();var textValue=pageRange.toString();// eslint-disable-next-line
var indexes=this.getIndexNumbers(i,textValue);// eslint-disable-next-line max-len
var pageRectangle={x:this.getDefaultValue(pageRectBounds.left-pageRect.left),y:this.getDefaultValue(pageRectBounds.top-pageRect.top),left:this.getDefaultValue(pageRectBounds.left-pageRect.left),top:this.getDefaultValue(pageRectBounds.top-pageRect.top),width:this.getDefaultValue(pageRectBounds.width),height:this.getDefaultValue(pageRectBounds.height),right:this.getDefaultValue(pageRectBounds.right-pageRect.left),bottom:this.getDefaultValue(pageRectBounds.bottom-pageRect.top)};// eslint-disable-next-line
var rect={x:pageRectangle.left,y:pageRectangle.top,left:pageRectangle.left,top:pageRectangle.top,right:pageRectangle.right,bottom:pageRectangle.bottom};pageBounds.push({pageIndex:i,bounds:selectionRects,rect:rect,startIndex:indexes.startIndex,endIndex:indexes.endIndex,textContent:textValue});}}}selection.removeAllRanges();return pageBounds;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.getIndexNumbers=function(pageNumber,content,parentText){// eslint-disable-next-line
var storedData=this.pdfViewerBase.getLinkInformation(pageNumber);var startIndex;var endIndex;if(storedData){var previousIndex=0;var pageText=storedData.pageText;for(var p=0;p<pageNumber;p++){if(this.pdfViewer.isExtractText){// eslint-disable-next-line
var documentIndex=this.pdfViewer.textSearchModule.documentTextCollection[p][p];var pageTextData=documentIndex.pageText?documentIndex.pageText:documentIndex.PageText;// eslint-disable-next-line max-len
if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection&&this.pdfViewer.textSearchModule.isTextRetrieved){if(this.pdfViewer.textSearchModule.documentTextCollection[p]){previousIndex=previousIndex+pageTextData.length;}}else{// eslint-disable-next-line max-len
if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection){if(pageNumber<=this.pdfViewer.textSearchModule.documentTextCollection.length){if(this.pdfViewer.textSearchModule.documentTextCollection[p]){// eslint-disable-next-line max-len
previousIndex=previousIndex+pageTextData.length;}}else{previousIndex=0;break;}}}}}if(!sf.base.isNullOrUndefined(parentText)){var parentIndex=pageText.indexOf(parentText);var initialIndex=parentText.indexOf(content);startIndex=parentIndex+initialIndex+previousIndex;}else{startIndex=pageText.indexOf(content)+previousIndex;}endIndex=startIndex+(content.length-1);}return{startIndex:startIndex,endIndex:endIndex};};/**
     * @param pageNumber
     * @private
     */TextMarkupAnnotation.prototype.rerenderAnnotationsPinch=function(pageNumber){var annotCanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(annotCanvas){var oldAnnotCanvas=this.pdfViewerBase.getElement('_old_annotationCanvas_'+pageNumber);if(oldAnnotCanvas){if(annotCanvas){oldAnnotCanvas.id=annotCanvas.id;annotCanvas.parentElement.removeChild(annotCanvas);}else{oldAnnotCanvas.id=this.pdfViewer.dataId+'_annotationCanvas_'+pageNumber;}annotCanvas=oldAnnotCanvas;}annotCanvas.style.width='';annotCanvas.style.height='';if(this.pdfViewer.restrictZoomRequest){// eslint-disable-next-line max-len
annotCanvas.style.width=this.pdfViewerBase.pageSize[pageNumber].width*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line max-len
annotCanvas.style.height=this.pdfViewerBase.pageSize[pageNumber].height*this.pdfViewerBase.getZoomFactor()+'px';}else{// eslint-disable-next-line max-len
annotCanvas.width=this.pdfViewerBase.pageSize[pageNumber].width*this.pdfViewerBase.getZoomFactor();annotCanvas.height=this.pdfViewerBase.pageSize[pageNumber].height*this.pdfViewerBase.getZoomFactor();}this.renderTextMarkupAnnotations(null,pageNumber,annotCanvas,this.pdfViewerBase.getZoomFactor());}};/**
     * @param pageNumber
     * @private
     */TextMarkupAnnotation.prototype.rerenderAnnotations=function(pageNumber){// eslint-disable-next-line
var oldCanvasCollection=document.querySelectorAll('#'+this.pdfViewer.dataId+'_old_annotationCanvas_'+pageNumber);for(var i=0;i<oldCanvasCollection.length;i++){if(oldCanvasCollection[i]){oldCanvasCollection[i].parentElement.removeChild(oldCanvasCollection[i]);}}var newCanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(newCanvas){newCanvas.style.display='block';}};/**
     * @param event
     * @private
     */TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseUp=function(event){var pageNumber=this.pdfViewer.annotationModule.getEventPageNumber(event);if(!sf.base.isNullOrUndefined(pageNumber)&&!isNaN(pageNumber)){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(this.currentTextMarkupAnnotation){this.selectedTextMarkup=this.currentTextMarkupAnnotation;}else{this.selectedTextMarkup=null;}this.clearCurrentSelectedAnnotation();var currentAnnot=this.getCurrentMarkupAnnotation(event.clientX,event.clientY,pageNumber,canvas);if(currentAnnot&&!window.getSelection().toString()){var isLock=false;var isSelection=false;if(currentAnnot.annotationSettings&&currentAnnot.annotationSettings.isLock){isLock=currentAnnot.annotationSettings.isLock;if(isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions('Select',currentAnnot)){isLock=false;if(this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange',currentAnnot)){isSelection=false;}else{isSelection=true;}}}if(!isLock){var canvasParentPosition=canvas.parentElement.getBoundingClientRect();var leftClickPosition=event.clientX-canvasParentPosition.left;var topClickPosition=event.clientY-canvasParentPosition.top;this.annotationClickPosition={x:leftClickPosition,y:topClickPosition};this.selectAnnotation(currentAnnot,canvas,pageNumber,event);this.currentTextMarkupAnnotation=currentAnnot;this.selectTextMarkupCurrentPage=pageNumber;if(!isSelection){this.enableAnnotationPropertiesTool(true);}var commentPanelDiv=document.getElementById(this.pdfViewer.dataId+'_commantPanel');if(commentPanelDiv&&commentPanelDiv.style.display==='block'){// eslint-disable-next-line
var comments=document.getElementById(currentAnnot.annotName);if(comments){if(comments.firstElementChild){comments.firstElementChild.click();}}}}}else{this.clearCurrentAnnotation();if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&!this.pdfViewerBase.isAddComment&&this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length==0){if(this.pdfViewerBase.action!='Select'){this.pdfViewerBase.action='Select';this.pdfViewer.tool='Select';this.pdfViewerBase.tool=this.pdfViewerBase.getTool('Select');}this.pdfViewer._dotnetInstance.invokeMethodAsync('AdjustMobileToolbar');}}if(this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection){if(currentAnnot){this.clearCurrentAnnotationSelection(pageNumber);}}else{this.clearCurrentAnnotationSelection(pageNumber);}}else{if(!this.pdfViewerBase.isClickedOnScrollBar(event,true)){this.clearCurrentAnnotation();this.clearCurrentAnnotationSelection(pageNumber);}}};/**
     * @param event
     * @private
     */TextMarkupAnnotation.prototype.onTextMarkupAnnotationTouchEnd=function(event){var pageNumber=this.pdfViewer.annotationModule.getEventPageNumber(event);if(!sf.base.isNullOrUndefined(pageNumber)&&!isNaN(pageNumber)){if(this.currentTextMarkupAnnotation){this.selectedTextMarkup=this.currentTextMarkupAnnotation;}else{this.selectedTextMarkup=null;}this.clearCurrentAnnotationSelection(pageNumber);var touchCanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);this.clearCurrentSelectedAnnotation();// eslint-disable-next-line max-len
var currentAnnot=this.getCurrentMarkupAnnotation(event.touches[0].clientX,event.touches[0].clientY,pageNumber,touchCanvas);if(currentAnnot){var isLock=false;if(currentAnnot.annotationSettings&&currentAnnot.annotationSettings.isLock){isLock=currentAnnot.annotationSettings.isLock;}if(!isLock){var canvasParentPosition=touchCanvas.parentElement.getBoundingClientRect();var leftClickPosition=event.touches[0].clientX-canvasParentPosition.left;var topClickPosition=event.touches[0].clientY-canvasParentPosition.top;this.annotationClickPosition={x:leftClickPosition,y:topClickPosition};this.selectAnnotation(currentAnnot,touchCanvas,pageNumber,event);this.currentTextMarkupAnnotation=currentAnnot;this.selectTextMarkupCurrentPage=pageNumber;this.enableAnnotationPropertiesTool(true);// eslint-disable-next-line
var comments=document.getElementById(currentAnnot.annotName);if(comments){if(!sf.base.Browser.isDevice){comments.firstChild.click();}}}}else{this.clearCurrentAnnotation();}this.clearCurrentAnnotationSelection(pageNumber);}else if(this.selectTextMarkupCurrentPage!=null&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var number=this.selectTextMarkupCurrentPage;this.selectTextMarkupCurrentPage=null;this.clearAnnotationSelection(number);}else{this.clearCurrentAnnotation();this.clearCurrentAnnotationSelection(pageNumber);}};/**
     * @private
     */TextMarkupAnnotation.prototype.clearCurrentSelectedAnnotation=function(){if(this.currentTextMarkupAnnotation){this.clearAnnotationSelection(this.selectTextMarkupCurrentPage);// eslint-disable-next-line
var currentAnnot=this.currentTextMarkupAnnotation;this.pdfViewer.fireAnnotationUnSelect(currentAnnot.annotName,currentAnnot.pageNumber,currentAnnot);this.clearCurrentAnnotation();}};/**
     * @param event
     * @private
     */TextMarkupAnnotation.prototype.onTextMarkupAnnotationMouseMove=function(event){var eventTarget=event.target;// eslint-disable-next-line
var pageIndex=parseInt(eventTarget.id.split('_text_')[1])||parseInt(eventTarget.id.split('_textLayer_')[1])||parseInt(eventTarget.id.split('_annotationCanvas_')[1]);if(event.target&&(eventTarget.id.indexOf('_text')>-1||eventTarget.id.indexOf('_annotationCanvas')>-1||eventTarget.classList.contains('e-pv-hyperlink'))&&this.pdfViewer.annotation){pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageIndex);var currentAnnot=this.getCurrentMarkupAnnotation(event.clientX,event.clientY,pageIndex,canvas);if(currentAnnot){eventTarget.style.cursor='pointer';// eslint-disable-next-line
var currentPosition=this.pdfViewerBase.getMousePosition(event);// eslint-disable-next-line
var relativePosition=this.pdfViewerBase.relativePosition(event);// eslint-disable-next-line
var viewerPositions={left:relativePosition.x,top:relativePosition.y};// eslint-disable-next-line
var mousePositions={left:currentPosition.x,top:currentPosition.y};// eslint-disable-next-line
var annotationSettings={opacity:currentAnnot.opacity,color:currentAnnot.color,author:currentAnnot.author,subject:currentAnnot.subject,modifiedDate:currentAnnot.modifiedDate};// eslint-disable-next-line max-len
this.pdfViewerBase.isMousedOver=true;this.pdfViewer.fireAnnotationMouseover(currentAnnot.annotName,currentAnnot.pageNumber,currentAnnot.textMarkupAnnotationType,currentAnnot.bounds,annotationSettings,mousePositions,viewerPositions);// this.showPopupNote(event, currentAnnot);
}else{this.pdfViewer.annotationModule.hidePopupNote();if(this.pdfViewerBase.isPanMode&&!this.pdfViewerBase.getAnnotationToolStatus()){eventTarget.style.cursor='grab';}if(this.pdfViewerBase.isMousedOver&&!this.pdfViewerBase.isFormFieldMousedOver){this.pdfViewer.fireAnnotationMouseLeave(pageIndex);this.pdfViewerBase.isMousedOver=false;}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.showPopupNote=function(event,annotation){if(annotation.note){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.showPopupNote(event,annotation.color,annotation.author,annotation.note,annotation.textMarkupAnnotationType);}};TextMarkupAnnotation.prototype.getCurrentMarkupAnnotation=function(clientX,clientY,pageNumber,canvas){var currentTextMarkupAnnotations=[];if(canvas){var canvasParentPosition=canvas.parentElement.getBoundingClientRect();if(canvas.clientWidth!==canvas.parentElement.clientWidth){canvasParentPosition=canvas.getBoundingClientRect();}var leftClickPosition=clientX-canvasParentPosition.left;var topClickPosition=clientY-canvasParentPosition.top;var annotationList=this.getAnnotations(pageNumber,null);var isAnnotationGot=false;if(annotationList){for(var i=0;i<annotationList.length;i++){var annotation=annotationList[i];for(var j=0;j<annotation.bounds.length;j++){// eslint-disable-next-line
var bound=annotation.bounds[j];var left=bound.left?bound.left:bound.Left;var top_2=bound.top?bound.top:bound.Top;var width=bound.width?bound.width:bound.Width;var height=bound.height?bound.height:bound.Height;// eslint-disable-next-line max-len
if(leftClickPosition>=this.getMagnifiedValue(left,this.pdfViewerBase.getZoomFactor())&&leftClickPosition<=this.getMagnifiedValue(left+width,this.pdfViewerBase.getZoomFactor())&&topClickPosition>=this.getMagnifiedValue(top_2,this.pdfViewerBase.getZoomFactor())&&topClickPosition<=this.getMagnifiedValue(top_2+height,this.pdfViewerBase.getZoomFactor())){currentTextMarkupAnnotations.push(annotation);isAnnotationGot=true;}else{if(isAnnotationGot){isAnnotationGot=false;break;}}}}}var currentAnnot=null;if(currentTextMarkupAnnotations.length>1){currentAnnot=this.compareCurrentAnnotations(currentTextMarkupAnnotations);}else if(currentTextMarkupAnnotations.length===1){currentAnnot=currentTextMarkupAnnotations[0];}return currentAnnot;}else{return null;}};TextMarkupAnnotation.prototype.compareCurrentAnnotations=function(annotations){var previousX;var currentAnnotation=null;for(var i=0;i<annotations.length;i++){if(i===annotations.length-1){break;}// eslint-disable-next-line
var firstAnnotBounds=annotations[i].bounds;var firstXposition=firstAnnotBounds[0].left?firstAnnotBounds[0].left:firstAnnotBounds[0].Left;var firstYposition=firstAnnotBounds[0].top?firstAnnotBounds[0].top:firstAnnotBounds[0].Top;// eslint-disable-next-line
var secondAnnotBounds=annotations[i+1].bounds;var secondXposition=secondAnnotBounds[0].left?secondAnnotBounds[0].left:secondAnnotBounds[0].Left;var secondYposition=secondAnnotBounds[0].top?secondAnnotBounds[0].top:secondAnnotBounds[0].Top;if(firstXposition<secondXposition||firstYposition<secondYposition){previousX=secondXposition;currentAnnotation=annotations[i+1];}else{previousX=firstXposition;currentAnnotation=annotations[i];}if(previousX&&i===annotations.length-2){if(previousX===firstXposition&&previousX===secondXposition){previousX=secondXposition;currentAnnotation=annotations[i+1];}}}return currentAnnotation;};/**
     * @param pageNumber
     * @private
     */TextMarkupAnnotation.prototype.clearAnnotationSelection=function(pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(canvas){var context=canvas.getContext('2d');context.setLineDash([]);this.pdfViewer.annotationModule.renderAnnotations(pageNumber,null,null,null);}};/**
     * @param annotation
     * @param canvas
     * @param pageNumber
     * @param event
     * @param isProgrammaticSelection
     * @param annotation
     * @param canvas
     * @param pageNumber
     * @param event
     * @param isProgrammaticSelection
     * @private
     */ // eslint-disable-next-line max-len
TextMarkupAnnotation.prototype.selectAnnotation=function(annotation,canvas,pageNumber,event,isProgrammaticSelection){if(this.pdfViewer.selectedItems.annotations[0]){this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex);this.pdfViewer.clearSelection(this.selectTextMarkupCurrentPage);}var isLock=false;if(annotation.annotationSettings&&annotation.annotationSettings.isLock){isLock=annotation.annotationSettings.isLock;if(isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions('Select',annotation)){isLock=false;}}if(!isLock){var isCurrentTextMarkup=false;if(!this.currentTextMarkupAnnotation){isCurrentTextMarkup=true;}if(this.selectedTextMarkup&&annotation&&!isProgrammaticSelection){if(this.selectedTextMarkup.annotName===annotation.annotName){isCurrentTextMarkup=false;}else{isCurrentTextMarkup=true;}}if(!isNaN(pageNumber)){this.selectTextMarkupCurrentPage=pageNumber;this.currentTextMarkupAnnotation=annotation;annotation=this.retreiveTextIndex(annotation);this.currentTextMarkupAnnotation=annotation;}if(this.isSelectedAnnotation&&this.pdfViewer.textSelectionModule){this.pdfViewerBase.isSelection=true;this.updateAnnotationBounds();}// eslint-disable-next-line
var currentEvent=event;if(this.isEnableTextMarkupResizer(annotation.textMarkupAnnotationType)&&annotation&&currentEvent&&!currentEvent.touches){this.updateCurrentResizerPosition(annotation);}this.drawAnnotationSelector(annotation,this.currentTextMarkupAnnotation,canvas);if(annotation.isMultiSelect&&annotation.annotNameCollection){this.selectMultiPageAnnotations(annotation);}if(annotation.annotName!==''&&!this.isNewAnnotation){if(isCurrentTextMarkup){var isSelected=false;if(!currentEvent){isSelected=true;}// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.annotationSelect(annotation.annotName,this.selectTextMarkupCurrentPage,annotation,null,false,isSelected);this.selectedTextMarkup=null;}}if(annotation&&this.isEnableTextMarkupResizer(annotation.textMarkupAnnotationType)){this.isTextMarkupAnnotationMode=true;}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.updateCurrentResizerPosition=function(annotation){if(!annotation){annotation=this.currentTextMarkupAnnotation;}if(annotation){if(this.isEnableTextMarkupResizer(annotation.textMarkupAnnotationType)&&annotation){// eslint-disable-next-line
var textElement=this.pdfViewerBase.getElement('_textLayer_'+this.selectTextMarkupCurrentPage);if(textElement){// eslint-disable-next-line
var boundingRect=textElement.getBoundingClientRect();var left=annotation.bounds[0].left?annotation.bounds[0].left:annotation.bounds[0].Left;var top_3=annotation.bounds[0].top?annotation.bounds[0].top:annotation.bounds[0].Top;this.updateLeftposition(left*this.pdfViewerBase.getZoomFactor()+boundingRect.left,boundingRect.top+top_3,true);// eslint-disable-next-line
var endPosition=annotation.bounds[annotation.bounds.length-1];var endLeft=endPosition.left?endPosition.left:endPosition.Left;var endTop=endPosition.top?endPosition.top:endPosition.Top;var endWidth=endPosition.width?endPosition.width:endPosition.Width;// eslint-disable-next-line max-len
this.updatePosition((endLeft+endWidth)*this.pdfViewerBase.getZoomFactor()+boundingRect.left,endTop+boundingRect.top,true);}}}};// eslint-disable-next-line
TextMarkupAnnotation.prototype.drawAnnotationSelectRect=function(canvas,x,y,width,height,annotation){var ratio=this.pdfViewerBase.getZoomRatio();if(canvas){var context=canvas.getContext('2d');context.setTransform(1,0,0,1,0,0);context.beginPath();if(typeof annotation.annotationSelectorSettings==='string'){// eslint-disable-next-line max-len
var lineDash=JSON.parse(annotation.annotationSelectorSettings).selectorLineDashArray.length===0?[4]:JSON.parse(annotation.annotationSelectorSettings).selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}context.setLineDash(lineDash);context.globalAlpha=1;context.rect(x*ratio,y*ratio,width*ratio,height*ratio);context.closePath();// eslint-disable-next-line max-len
var borderColor=JSON.parse(annotation.annotationSelectorSettings).selectionBorderColor===''?'#0000ff':JSON.parse(annotation.annotationSelectorSettings).selectionBorderColor;context.strokeStyle=borderColor;// eslint-disable-next-line max-len
context.lineWidth=JSON.parse(annotation.annotationSelectorSettings).selectionBorderThickness===1?1:annotation.annotationSelectorSettings.selectionBorderThickness;context.stroke();context.save();}else{// eslint-disable-next-line max-len
var lineDash=annotation.annotationSelectorSettings.selectorLineDashArray.length===0?[4]:annotation.annotationSelectorSettings.selectorLineDashArray;if(lineDash.length>2){lineDash=[lineDash[0],lineDash[1]];}context.setLineDash(lineDash);context.globalAlpha=1;context.rect(x*ratio,y*ratio,width*ratio,height*ratio);context.closePath();// eslint-disable-next-line max-len
var borderColor=annotation.annotationSelectorSettings.selectionBorderColor===''?'#0000ff':annotation.annotationSelectorSettings.selectionBorderColor;context.strokeStyle=borderColor;// eslint-disable-next-line max-len
context.lineWidth=annotation.annotationSelectorSettings.selectionBorderThickness?1:annotation.annotationSelectorSettings.selectionBorderThickness;context.stroke();context.save();}}};/**
     * @param isEnable
     * @private
     */TextMarkupAnnotation.prototype.enableAnnotationPropertiesTool=function(isEnable){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');}// eslint-disable-next-line max-len
if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isMobileAnnotEnabled&&this.pdfViewer.selectedItems.annotations.length===0){if(this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(isEnable);var enable=isEnable;if(this.isTextMarkupAnnotationMode){enable=true;}this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(enable);if(this.currentTextMarkupAnnotation){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,this.currentTextMarkupAnnotation.color);}else{if(!sf.base.isNullOrUndefined(this.isTextMarkupAnnotationMode)&&!this.isTextMarkupAnnotationMode){// eslint-disable-next-line max-len
this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,'#000000');}}}}};/**
     * @private
     */TextMarkupAnnotation.prototype.maintainAnnotationSelection=function(){if(this.currentTextMarkupAnnotation){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+this.selectTextMarkupCurrentPage);if(canvas){this.selectAnnotation(this.currentTextMarkupAnnotation,canvas,this.selectTextMarkupCurrentPage);}}};// private storeAnnotations(pageNumber: number, annotation: ITextMarkupAnnotation): number {
// eslint-disable-next-line
//     let storeObject: any = window.sessionStorage.getItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');
//     let index: number = 0;
//     if (!storeObject) {
//         let markupAnnotation: IPageAnnotations = { pageIndex: pageNumber, annotations: [] };
//         markupAnnotation.annotations.push(annotation);
//         index = markupAnnotation.annotations.indexOf(annotation);
//         let annotationCollection: IPageAnnotations[] = [];
//         annotationCollection.push(markupAnnotation);
//         let annotationStringified: string = JSON.stringify(annotationCollection);
//         window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);
//     } else {
//         let annotObject: IPageAnnotations[] = JSON.parse(storeObject);
//         window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_annotations_textMarkup');
//         let pageIndex: number = this.pdfViewer.annotationModule.getPageCollection(annotObject, pageNumber);
//         if (annotObject[pageIndex]) {
//             (annotObject[pageIndex] as IPageAnnotations).annotations.push(annotation);
//             index = (annotObject[pageIndex] as IPageAnnotations).annotations.indexOf(annotation);
//         } else {
//             let markupAnnotation: IPageAnnotations = { pageIndex: pageNumber, annotations: [] };
//             markupAnnotation.annotations.push(annotation);
//             index = markupAnnotation.annotations.indexOf(annotation);
//             annotObject.push(markupAnnotation);
//         }
//         let annotationStringified: string = JSON.stringify(annotObject);
//         window.sessionStorage.setItem(this.pdfViewerBase.documentId + '_annotations_textMarkup', annotationStringified);
//     }
//     return index;
// }
/**
     * @param pageAnnotations
     * @param pageNumber
     * @private
     */TextMarkupAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_textMarkup'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_textMarkup']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_textMarkup',annotationStringified);}}};/**
     * @param pageIndex
     * @param textMarkupAnnotations
     * @param id
     * @param pageIndex
     * @param textMarkupAnnotations
     * @param id
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.getAnnotations=function(pageIndex,textMarkupAnnotations,id){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
if(id==null||id==undefined){id='_annotations_textMarkup';}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+id);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+id];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=textMarkupAnnotations;}}else{annotationCollection=textMarkupAnnotations;}return annotationCollection;};// eslint-disable-next-line max-len
// eslint-disable-next-line
TextMarkupAnnotation.prototype.getAddedAnnotation=function(type,color,opacity,bounds,author,subject,predefinedDate,note,isCommentLock,rect,pageNumber,textContent,startIndex,endIndex,isMultiSelect,allowedInteractions,annotationRotate){// eslint-disable-next-line max-len
var modifiedDate=predefinedDate?predefinedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('textMarkup',pageNumber+1,type,annotationName,'',author);// eslint-disable-next-line
var annotationSettings=this.getAnnotationSettings(type);var isPrint=this.getIsPrintValue(type);var annotation={// eslint-disable-next-line max-len
textMarkupAnnotationType:type,color:color,opacity:opacity,bounds:bounds,author:author,allowedInteractions:allowedInteractions,subject:subject,modifiedDate:modifiedDate,note:note,rect:rect,annotName:annotationName,comments:[],review:{state:'',stateModel:'',author:author,modifiedDate:modifiedDate},shapeAnnotationType:'textMarkup',pageNumber:pageNumber,// eslint-disable-next-line max-len
textMarkupContent:textContent,textMarkupStartIndex:startIndex,textMarkupEndIndex:endIndex,isMultiSelect:isMultiSelect,annotationSelectorSettings:this.getSelector(type),customData:this.pdfViewer.annotation.getTextMarkupData(subject),annotationAddMode:this.annotationAddMode,annotationSettings:annotationSettings,isPrint:isPrint,isCommentLock:isCommentLock,isAnnotationRotated:false,annotationRotation:annotationRotate};if(isMultiSelect){this.multiPageCollection.push(annotation);}var isSkip=false;if(isMultiSelect&&this.isExtended){isSkip=true;}if(document.getElementById(annotationName)&&!isSkip){document.getElementById(annotationName).addEventListener('mouseup',this.annotationDivSelect(annotation,pageNumber));}var storedIndex=this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotation,'_annotations_textMarkup');this.pdfViewer.annotationModule.addAction(pageNumber,storedIndex,annotation,'Text Markup Added',null);return annotation;};TextMarkupAnnotation.prototype.getSelector=function(type){var selector=this.pdfViewer.annotationSelectorSettings;if(type==='Highlight'&&this.pdfViewer.highlightSettings.annotationSelectorSettings){selector=this.pdfViewer.highlightSettings.annotationSelectorSettings;}else if(type==='Underline'&&this.pdfViewer.underlineSettings.annotationSelectorSettings){selector=this.pdfViewer.underlineSettings.annotationSelectorSettings;}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.annotationSelectorSettings){selector=this.pdfViewer.strikethroughSettings.annotationSelectorSettings;}return selector;};TextMarkupAnnotation.prototype.getAnnotationSettings=function(type){var annotationSettings={isLock:false};if(type==='Highlight'&&this.pdfViewer.highlightSettings.isLock){annotationSettings={isLock:true};}else if(type==='Underline'&&this.pdfViewer.underlineSettings.isLock){annotationSettings={isLock:true};}else if(type==='Strikethrough'&&this.pdfViewer.strikethroughSettings.isLock){annotationSettings={isLock:true};}else if(this.pdfViewer.annotationSettings.isLock){annotationSettings={isLock:true};}return annotationSettings;};TextMarkupAnnotation.prototype.getIsPrintValue=function(type){var isPrint=true;if(type==='Highlight'){isPrint=this.pdfViewer.highlightSettings.isPrint;}if(type==='Underline'){isPrint=this.pdfViewer.underlineSettings.isPrint;}if(type==='Strikethrough'){isPrint=this.pdfViewer.strikethroughSettings.isPrint;}return isPrint;};// eslint-disable-next-line
TextMarkupAnnotation.prototype.annotationDivSelect=function(annotation,pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);this.selectAnnotation(annotation,canvas,pageNumber);if(this.pdfViewer.toolbarModule){if(this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode();this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();var isLock=false;if(annotation.annotationSettings&&annotation.annotationSettings.isLock){isLock=annotation.annotationSettings.isLock;}if(isLock){if(this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange',annotation)){this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(true);}if(this.pdfViewer.annotationModule.checkAllowedInteractions('Delete',annotation)){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(true);}}else{this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(true);this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(true);}this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=false;}}};TextMarkupAnnotation.prototype.getPageContext=function(pageNumber){var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);var context=null;if(canvas){context=canvas.getContext('2d');}return context;};TextMarkupAnnotation.prototype.getDefaultValue=function(value){return value/this.pdfViewerBase.getZoomFactor();};TextMarkupAnnotation.prototype.getMagnifiedValue=function(value,factor){return value*factor;};/**
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.saveImportedTextMarkupAnnotations=function(annotation,pageNumber){var annotationObject=null;annotation.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor('textMarkup',annotation.Subject);if(annotation.AnnotationSettings&&annotation.AnnotationSettings.isLock){annotation.AnnotationSettings={isLock:annotation.AnnotationSettings.isLock};}else{annotation.AnnotationSettings=this.getAnnotationSettings(annotation.TextMarkupAnnotationType);}// eslint-disable-next-line max-len
annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line max-len
annotationObject={// eslint-disable-next-line max-len
textMarkupAnnotationType:annotation.TextMarkupAnnotationType,color:annotation.Color,opacity:annotation.Opacity,allowedInteractions:annotation.allowedInteractions,bounds:annotation.Bounds,author:annotation.Author,subject:annotation.Subject,modifiedDate:annotation.ModifiedDate,note:annotation.Note,rect:annotation.Rect,annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},shapeAnnotationType:'textMarkup',pageNumber:pageNumber,textMarkupContent:annotation.TextMarkupContent,textMarkupStartIndex:0,// eslint-disable-next-line max-len
textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(annotation),customData:this.pdfViewer.annotation.getCustomData(annotation),isMultiSelect:annotation.IsMultiSelect,annotNameCollection:annotation.AnnotNameCollection,annotpageNumbers:annotation.AnnotpageNumbers,// eslint-disable-next-line max-len
annotationAddMode:this.annotationAddMode,annotationSettings:annotation.AnnotationSettings,isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:false};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_textMarkup');};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.updateTextMarkupAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annotationObject={// eslint-disable-next-line max-len
textMarkupAnnotationType:annotation.TextMarkupAnnotationType,allowedInteractions:annotation.allowedInteractions,color:annotation.Color,opacity:annotation.Opacity,bounds:annotation.Bounds,author:annotation.Author,subject:annotation.Subject,modifiedDate:annotation.ModifiedDate,note:annotation.Note,rect:annotation.Rect,annotationId:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},shapeAnnotationType:'textMarkup',pageNumber:pageNumber,isMultiSelect:annotation.IsMultiSelect,annotNameCollection:annotation.AnnotNameCollection,annotpageNumbers:annotation.AnnotpageNumbers,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock};return annotationObject;};/**
     * @param textMarkUpSettings
     * @private
     */ // eslint-disable-next-line
TextMarkupAnnotation.prototype.updateTextMarkupSettings=function(textMarkUpSettings){if(textMarkUpSettings==='highlightSettings'){// eslint-disable-next-line max-len
this.highlightColor=this.pdfViewer.highlightSettings.color?this.pdfViewer.highlightSettings.color:this.highlightColor;// eslint-disable-next-line max-len
this.highlightOpacity=this.pdfViewer.highlightSettings.opacity?this.pdfViewer.highlightSettings.opacity:this.highlightOpacity;}if(textMarkUpSettings==='underlineSettings'){// eslint-disable-next-line max-len
this.underlineColor=this.pdfViewer.underlineSettings.color?this.pdfViewer.underlineSettings.color:this.underlineColor;// eslint-disable-next-line max-len
this.underlineOpacity=this.pdfViewer.underlineSettings.opacity?this.pdfViewer.underlineSettings.opacity:this.underlineOpacity;}if(textMarkUpSettings==='strikethroughSettings'){// eslint-disable-next-line max-len
this.strikethroughColor=this.pdfViewer.strikethroughSettings.color?this.pdfViewer.strikethroughSettings.color:this.strikethroughColor;// eslint-disable-next-line max-len
this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity?this.pdfViewer.strikethroughSettings.opacity:this.strikethroughOpacity;}};/**
     * @private
     */TextMarkupAnnotation.prototype.clear=function(){this.selectTextMarkupCurrentPage=null;this.currentTextMarkupAnnotation=null;this.annotationClickPosition=null;window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_textMarkup');};/**
     * Get vertex points properties
     * @private
     */TextMarkupAnnotation.prototype.getOffsetPoints=function(points){var offsetPoints=[];//Converting points model into vertex property
for(var j=0;j<points.length;j++){offsetPoints[j]={X:points[j].x,Y:points[j].y,Width:points[j].width,Height:points[j].height,Left:points[j].x,Top:points[j].y};}return offsetPoints;};/**
     * This method used to add annotations with using program.
     *
     * @param annotationType - It describes the annotation type
     * @param annotationObject - It describes type of annotation object
     * @returns Object
     * @private
     */TextMarkupAnnotation.prototype.updateAddAnnotationDetails=function(annotationType,annotationObject){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={pageNumber:0};}//Initialize the annotation settings
var annotSelectorSettings=null;var annotallowedInteractions=null;var textMarkupAnnotationType='';var annotSettings=null;var color='';var bounds=[];//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();if(annotationType=='Highlight'){//Creating annotation settings
annotSelectorSettings=this.pdfViewer.highlightSettings.annotationSelectorSettings?this.pdfViewer.highlightSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.highlightSettings);annotallowedInteractions=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;textMarkupAnnotationType='Highlight';color=annotationObject.color?annotationObject.color:'#ffff00';}else if(annotationType=='Underline'){//Creating annotation settings
annotSelectorSettings=this.pdfViewer.underlineSettings.annotationSelectorSettings?this.pdfViewer.underlineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.underlineSettings);annotallowedInteractions=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;textMarkupAnnotationType='Underline';color=annotationObject.color?annotationObject.color:'#00ff00';}else if(annotationType=='Strikethrough'){//Creating annotation settings
annotSelectorSettings=this.pdfViewer.strikethroughSettings.annotationSelectorSettings?this.pdfViewer.strikethroughSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.strikethroughSettings);annotallowedInteractions=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;textMarkupAnnotationType='Strikethrough';color=annotationObject.color?annotationObject.color:'#ff0000';}annotSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;//Creating the offset points
if(annotationObject.bounds){bounds=this.getOffsetPoints(annotationObject.bounds);}else bounds=[{X:1,Y:1,Width:100,Height:14,Left:1,Top:1,Location:{X:1,Y:1},Size:{Height:14,IsEmpty:false,Width:100}}];//Creating Annotation objects with it's proper properties       
var textMarkupAnnotation=[];var textmarkup={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:annotallowedInteractions,AnnotName:annotationName,AnnotNameCollection:null,AnnotType:'textMarkup',AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotSelectorSettings,AnnotationSettings:annotSettings,Author:annotationObject.author?annotationObject.author:'Guest',Bounds:bounds,Color:annotationObject.color?annotationObject.color:color,Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,EnableMultiPageAnnotation:annotationObject.enableMultiPageAnnotation?annotationObject.enableMultiPageAnnotation:false,EnableTextMarkupResizer:annotationObject.enableTextMarkupResizer?annotationObject.enableTextMarkupResizer:false,IsCommentLock:false,IsMultiSelect:false,IsLock:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,ModifiedDate:currentDateString,Note:'',Opacity:annotationObject.opacity?annotationObject.opacity:1,Rect:{},State:'',StateModel:'',Subject:textMarkupAnnotationType,TextMarkupAnnotationType:textMarkupAnnotationType};//Adding the annotation object to an array and return it
textMarkupAnnotation[0]=textmarkup;return{textMarkupAnnotation:textMarkupAnnotation};};return TextMarkupAnnotation;}();/**
 * @hidden
 */var MeasureAnnotation=/** @class */function(){function MeasureAnnotation(pdfviewer,pdfViewerBase){/**
         * @private
         */this.measureShapeCount=0;/**
         * @private
         */this.isAddAnnotationProgramatically=false;this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;}Object.defineProperty(MeasureAnnotation.prototype,"pixelToPointFactor",{/**
         * @private
         */get:function get(){return 72/96;},enumerable:true,configurable:true});/**
     * @param shapeAnnotations
     * @param pageNumber
     * @param isImportAction
     * @param shapeAnnotations
     * @param pageNumber
     * @param isImportAction
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.renderMeasureShapeAnnotations=function(shapeAnnotations,pageNumber,isImportAction){if(shapeAnnotations){if(shapeAnnotations.length>=1){// eslint-disable-next-line
var measureAnnots=this.pdfViewer.annotation.getStoredAnnotations(pageNumber,shapeAnnotations,'_annotations_shape_measure');if(!measureAnnots||isImportAction){for(var i=0;i<shapeAnnotations.length;i++){// eslint-disable-next-line
var annotation=shapeAnnotations[i];var annotationObject=null;this.measureShapeCount=this.measureShapeCount+1;// eslint-disable-next-line max-len
annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);var isAnnotationRotated=void 0;if(annotation.ShapeAnnotationType){if(isImportAction){if(this.pdfViewerBase.isJsonImported){annotation.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(annotation.Rotate,pageNumber,annotation.Bounds,annotation.AnnotationRotation);isAnnotationRotated=this.pdfViewerBase.isPageRotated;}}var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];if(isImportAction&&this.pdfViewerBase.isJsonImported){vertexPoints=this.pdfViewerBase.calculateVertexPoints(annotation.Rotate,pageNumber,annotation.VertexPoints,annotation.AnnotationRotation);}else{for(var j=0;j<annotation.VertexPoints.length;j++){var x=annotation.VertexPoints[j].X?annotation.VertexPoints[j].X:annotation.VertexPoints[j].x;var y=annotation.VertexPoints[j].Y?annotation.VertexPoints[j].Y:annotation.VertexPoints[j].y;var point={x:x,y:y};vertexPoints.push(point);}}}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;// eslint-disable-next-line max-len
annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:this.pdfViewer.shapeLabelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isPrint=annotation.AnnotationSettings.isPrint;var measureObject={// eslint-disable-next-line max-len
ratio:annotation.Calibrate.Ratio,x:this.getNumberFormatArray(annotation.Calibrate.X),distance:this.getNumberFormatArray(annotation.Calibrate.Distance),area:this.getNumberFormatArray(annotation.Calibrate.Area),angle:this.getNumberFormatArray(annotation.Calibrate.Angle),volume:this.getNumberFormatArray(annotation.Calibrate.Volume),targetUnitConversion:annotation.Calibrate.TargetUnitConversion};if(annotation.Calibrate.Depth){measureObject.depth=annotation.Calibrate.Depth;}var left=annotation.Bounds.X?annotation.Bounds.X:annotation.Bounds.x;var top_1=annotation.Bounds.Y?annotation.Bounds.Y:annotation.Bounds.y;var width=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var height=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;annotationObject={// eslint-disable-next-line max-len
id:'measure'+this.measureShapeCount,shapeAnnotationType:annotation.ShapeAnnotationType,author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,// eslint-disable-next-line max-len
borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,// eslint-disable-next-line max-len
bounds:{x:left,y:top_1,left:left,top:top_1,width:width,height:height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},caption:annotation.Caption,captionPosition:annotation.CaptionPosition,calibrate:measureObject,leaderLength:annotation.LeaderLength,leaderLineExtension:annotation.LeaderLineExtension,// eslint-disable-next-line max-len
leaderLineOffset:annotation.LeaderLineOffset,indent:annotation.Indent,annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},// eslint-disable-next-line max-len
labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,fontColor:annotation.FontColor,labelBorderColor:annotation.LabelBorderColor,fontSize:annotation.FontSize,type:this.getMeasureType(annotation.ShapeAnnotationType,annotation.Indent),// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,annotationSelectorSettings:this.getSettings(annotation),labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:isPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:isAnnotationRotated};var annot=void 0;// eslint-disable-next-line
var vPoints=annotationObject.vertexPoints;if(vertexPoints==null){vPoints=[];}// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annot={// eslint-disable-next-line max-len
id:'measure'+this.measureShapeCount,type:this.getMeasureType(annotationObject.shapeAnnotationType,annotationObject.indent),shapeAnnotationType:this.getShapeType(annotationObject),author:annotationObject.author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotationObject.modifiedDate,subject:annotationObject.subject,notes:annotationObject.note,fillColor:annotationObject.fillColor,strokeColor:annotationObject.strokeColor,opacity:annotationObject.opacity,// eslint-disable-next-line max-len
thickness:annotationObject.thickness,borderStyle:annotationObject.borderStyle,borderDashArray:annotationObject.borderDashArray.toString(),rotateAngle:parseFloat(annotationObject.rotateAngle.split('Angle')[1]),isCloudShape:annotationObject.isCloudShape,cloudIntensity:annotationObject.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadStart),// eslint-disable-next-line max-len
vertexPoints:vPoints,bounds:{x:annotationObject.bounds.left,y:annotationObject.bounds.top,width:annotationObject.bounds.width,height:annotationObject.bounds.height},leaderHeight:annotationObject.leaderLength,pageIndex:pageNumber,annotName:annotationObject.annotName,comments:annotationObject.comments,review:annotationObject.review,measureType:this.getMeasureType(annotationObject.shapeAnnotationType,annotationObject.indent),// eslint-disable-next-line max-len
labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,fontColor:annotation.FontColor,labelBorderColor:annotation.LabelBorderColor,fontSize:annotation.FontSize,labelBounds:annotation.LabelBounds,annotationSelectorSettings:annotation.AnnotationSelectorSettings,annotationSettings:annotationObject.annotationSettings,annotationAddMode:annotation.annotationAddMode,isPrint:isPrint,isCommentLock:annotationObject.isCommentLock};this.pdfViewer.annotation.storeAnnotations(pageNumber,annotationObject,'_annotations_shape_measure');if(this.isAddAnnotationProgramatically){var settings={opacity:annot.opacity,strokeColor:annot.strokeColor,thickness:annot.thickness,modifiedDate:annot.modifiedDate,width:annot.bounds.width,height:annot.bounds.height};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,annotation.ShapeAnnotationType,annot.bounds,settings);}this.pdfViewer.add(annot);}}}}else if(shapeAnnotations.shapeAnnotationType){var annotationObject=this.createAnnotationObject(shapeAnnotations);this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape_measure');this.pdfViewer.annotationModule.triggerAnnotationAdd(shapeAnnotations);}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else{selector=this.getSelector(annotation.Subject);}return selector;};/**
     * @param type
     * @private
     */MeasureAnnotation.prototype.setAnnotationType=function(type){var author='Guest';this.updateMeasureproperties();this.pdfViewerBase.disableTextSelectionMode();switch(type){case'Distance':this.currentAnnotationMode='Distance';var modifiedDateDist=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:'Guest';this.pdfViewer.drawingObject={sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceEndHead),measureType:'Distance',fillColor:this.distanceFillColor,notes:'',strokeColor:this.distanceStrokeColor,leaderHeight:this.leaderLength,opacity:this.distanceOpacity,thickness:this.distanceThickness,borderDashArray:this.distanceDashArray.toString(),// eslint-disable-next-line max-len
shapeAnnotationType:'Distance',author:author,subject:'Distance calculation',isCommentLock:false};this.pdfViewer.tool='Distance';break;case'Perimeter':this.currentAnnotationMode='Perimeter';var modifiedDatePeri=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:'LineWidthArrowHead',fillColor:this.perimeterFillColor,notes:'',strokeColor:this.perimeterStrokeColor,opacity:this.perimeterOpacity,thickness:this.perimeterThickness,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterStartHead),// eslint-disable-next-line max-len
taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterEndHead),measureType:'Perimeter',borderDashArray:this.perimeterDashArray.toString(),author:author,subject:'Perimeter calculation',isCommentLock:false};this.pdfViewer.tool='Perimeter';break;case'Area':this.currentAnnotationMode='Area';var modifiedDateArea=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:'Polygon',fillColor:this.areaFillColor,notes:'',strokeColor:this.areaStrokeColor,thickness:this.areaThickness,opacity:this.areaOpacity,measureType:'Area',modifiedDate:modifiedDateArea,borderStyle:'',borderDashArray:'0',author:author,subject:'Area calculation',isCommentLock:false};this.pdfViewer.tool='Polygon';break;case'Radius':this.currentAnnotationMode='Radius';var modifiedDateRad=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:'Radius',fillColor:this.radiusFillColor,notes:'',strokeColor:this.radiusStrokeColor,opacity:this.radiusOpacity,thickness:this.radiusThickness,measureType:'Radius',modifiedDate:modifiedDateRad,borderStyle:'',borderDashArray:'0',author:author,subject:'Radius calculation',isCommentLock:false};this.pdfViewer.tool='DrawTool';break;case'Volume':this.currentAnnotationMode='Volume';var modifiedDateVol=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:'Polygon',notes:'',fillColor:this.volumeFillColor,strokeColor:this.volumeStrokeColor,opacity:this.volumeOpacity,thickness:this.volumeThickness,measureType:'Volume',modifiedDate:modifiedDateVol,borderStyle:'',borderDashArray:'0',author:author,subject:'Volume calculation',isCommentLock:false};this.pdfViewer.tool='Polygon';break;}};MeasureAnnotation.prototype.updateMeasureproperties=function(){this.distanceFillColor=this.pdfViewer.distanceSettings.fillColor?this.pdfViewer.distanceSettings.fillColor:'#ff0000';this.distanceStrokeColor=this.pdfViewer.distanceSettings.strokeColor?this.pdfViewer.distanceSettings.strokeColor:'#ff0000';this.distanceOpacity=this.pdfViewer.distanceSettings.opacity?this.pdfViewer.distanceSettings.opacity:1;this.distanceThickness=this.pdfViewer.distanceSettings.thickness?this.pdfViewer.distanceSettings.thickness:1;this.distanceDashArray=this.pdfViewer.distanceSettings.borderDashArray?this.pdfViewer.distanceSettings.borderDashArray:0;this.leaderLength=this.pdfViewer.distanceSettings.leaderLength!=null?this.pdfViewer.distanceSettings.leaderLength:40;// eslint-disable-next-line max-len
this.distanceStartHead=this.pdfViewer.distanceSettings.lineHeadStartStyle?this.pdfViewer.distanceSettings.lineHeadStartStyle:'Closed';this.distanceEndHead=this.pdfViewer.distanceSettings.lineHeadEndStyle?this.pdfViewer.distanceSettings.lineHeadEndStyle:'Closed';this.perimeterFillColor=this.pdfViewer.perimeterSettings.fillColor?this.pdfViewer.perimeterSettings.fillColor:'#ffffff00';this.perimeterStrokeColor=this.pdfViewer.perimeterSettings.strokeColor?this.pdfViewer.perimeterSettings.strokeColor:'#ff0000';this.perimeterOpacity=this.pdfViewer.perimeterSettings.opacity?this.pdfViewer.perimeterSettings.opacity:1;this.perimeterThickness=this.pdfViewer.perimeterSettings.thickness?this.pdfViewer.perimeterSettings.thickness:1;this.perimeterDashArray=this.pdfViewer.perimeterSettings.borderDashArray?this.pdfViewer.perimeterSettings.borderDashArray:0;// eslint-disable-next-line max-len
this.perimeterStartHead=this.pdfViewer.perimeterSettings.lineHeadStartStyle?this.pdfViewer.perimeterSettings.lineHeadStartStyle:'Open';this.perimeterEndHead=this.pdfViewer.perimeterSettings.lineHeadEndStyle?this.pdfViewer.perimeterSettings.lineHeadEndStyle:'Open';this.areaFillColor=this.pdfViewer.areaSettings.fillColor?this.pdfViewer.areaSettings.fillColor:'#ffffff00';this.areaStrokeColor=this.pdfViewer.areaSettings.strokeColor?this.pdfViewer.areaSettings.strokeColor:'#ff0000';this.areaOpacity=this.pdfViewer.areaSettings.opacity?this.pdfViewer.areaSettings.opacity:1;this.areaThickness=this.pdfViewer.areaSettings.thickness?this.pdfViewer.areaSettings.thickness:1;this.radiusFillColor=this.pdfViewer.radiusSettings.fillColor?this.pdfViewer.radiusSettings.fillColor:'#ffffff00';this.radiusStrokeColor=this.pdfViewer.radiusSettings.strokeColor?this.pdfViewer.radiusSettings.strokeColor:'#ff0000';this.radiusOpacity=this.pdfViewer.radiusSettings.opacity?this.pdfViewer.radiusSettings.opacity:1;this.radiusThickness=this.pdfViewer.radiusSettings.thickness?this.pdfViewer.radiusSettings.thickness:1;this.volumeFillColor=this.pdfViewer.volumeSettings.fillColor?this.pdfViewer.volumeSettings.fillColor:'#ffffff00';this.volumeStrokeColor=this.pdfViewer.volumeSettings.strokeColor?this.pdfViewer.volumeSettings.strokeColor:'#ff0000';this.volumeOpacity=this.pdfViewer.volumeSettings.opacity?this.pdfViewer.volumeSettings.opacity:1;this.volumeThickness=this.pdfViewer.volumeSettings.thickness?this.pdfViewer.volumeSettings.thickness:1;this.unit=this.pdfViewer.measurementSettings.conversionUnit.toLowerCase();this.displayUnit=this.pdfViewer.measurementSettings.displayUnit.toLowerCase();this.ratio=this.pdfViewer.measurementSettings.scaleRatio;this.volumeDepth=this.pdfViewer.measurementSettings.depth;this.scaleRatioString='1 '+this.unit+' = '+this.ratio.toString()+' '+this.displayUnit;};MeasureAnnotation.prototype.createAnnotationObject=function(annotationModel){var bound;var labelBound;var annotationName=this.pdfViewer.annotation.createGUID();// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('shape_measure',annotationModel.pageIndex+1,annotationModel.measureType,annotationName,annotationModel.notes,annotationModel.author);annotationModel.annotName=annotationName;annotationModel.author=this.pdfViewer.annotationModule.updateAnnotationAuthor('measure',annotationModel.subject);if(annotationModel.wrapper.bounds){bound={// eslint-disable-next-line max-len
x:annotationModel.wrapper.bounds.x,y:annotationModel.wrapper.bounds.y,left:annotationModel.wrapper.bounds.x,top:annotationModel.wrapper.bounds.y,height:annotationModel.wrapper.bounds.height,width:annotationModel.wrapper.bounds.width,right:annotationModel.wrapper.bounds.right,bottom:annotationModel.wrapper.bounds.bottom};labelBound=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(annotationModel.wrapper.bounds);}else{bound={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0};labelBound={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0};}// eslint-disable-next-line radix
var borderDashArray=parseInt(annotationModel.borderDashArray);borderDashArray=isNaN(borderDashArray)?0:borderDashArray;// eslint-disable-next-line max-len
var measure={ratio:this.scaleRatioString,x:[this.createNumberFormat('x')],distance:[this.createNumberFormat('d')],area:[this.createNumberFormat('a')]};if(annotationModel.measureType==='Volume'){measure.depth=this.volumeDepth;}// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule.findAnnotationSettings(annotationModel,true);// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotationModel);annotationModel.isPrint=annotationSettings.isPrint;var setting=this.pdfViewer.shapeLabelSettings;var labelSettings={borderColor:annotationModel.strokeColor,fillColor:annotationModel.fillColor,fontColor:annotationModel.fontColor,fontSize:annotationModel.fontSize,labelContent:annotationModel.labelContent,labelHeight:setting.labelHeight,labelWidth:setting.labelMaxWidth,opacity:annotationModel.opacity};return{// eslint-disable-next-line max-len
id:annotationModel.id,shapeAnnotationType:this.getShapeAnnotType(annotationModel.measureType),type:this.getMeasureType(this.getShapeAnnotType(annotationModel.measureType),this.getIndent(annotationModel.measureType)),author:annotationModel.author,allowedInteractions:allowedInteractions,subject:annotationModel.subject,note:annotationModel.notes,strokeColor:annotationModel.strokeColor,fillColor:annotationModel.fillColor,opacity:annotationModel.opacity,thickness:annotationModel.thickness,// eslint-disable-next-line max-len
borderStyle:annotationModel.borderStyle,borderDashArray:borderDashArray,bounds:bound,// eslint-disable-next-line max-len
modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:'RotateAngle'+annotationModel.rotateAngle,isCloudShape:annotationModel.isCloudShape,cloudIntensity:annotationModel.cloudIntensity,// eslint-disable-next-line max-len
vertexPoints:annotationModel.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.taregetDecoraterShapes),rectangleDifference:[],isLocked:annotationSettings.isLock,// eslint-disable-next-line max-len
leaderLength:annotationModel.leaderHeight,leaderLineExtension:2,leaderLineOffset:0,calibrate:measure,caption:true,captionPosition:'Top',indent:this.getIndent(annotationModel.measureType),annotName:annotationName,comments:[],review:{state:'',stateModel:'',modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:annotationModel.author},// eslint-disable-next-line max-len
labelContent:annotationModel.labelContent,enableShapeLabel:annotationModel.enableShapeLabel,labelFillColor:annotationModel.labelFillColor,labelBorderColor:annotationModel.labelBorderColor,fontColor:annotationModel.fontColor,fontSize:annotationModel.fontSize,// eslint-disable-next-line max-len
labelBounds:labelBound,annotationSelectorSettings:this.getSelector(annotationModel.subject),labelSettings:labelSettings,annotationSettings:annotationSettings,customData:this.pdfViewer.annotation.getMeasureData(annotationModel.subject),isPrint:annotationModel.isPrint,isCommentLock:annotationModel.isCommentLock,isAnnotationRotated:false};};MeasureAnnotation.prototype.getSelector=function(type){var selector=this.pdfViewer.annotationSelectorSettings;if(type==='Distance calculation'&&this.pdfViewer.distanceSettings.annotationSelectorSettings){selector=this.pdfViewer.distanceSettings.annotationSelectorSettings;}else if(type==='Perimeter calculation'&&this.pdfViewer.perimeterSettings.annotationSelectorSettings){selector=this.pdfViewer.perimeterSettings.annotationSelectorSettings;// eslint-disable-next-line max-len
}else if(type==='Area calculation'&&this.pdfViewer.areaSettings.annotationSelectorSettings){selector=this.pdfViewer.areaSettings.annotationSelectorSettings;}else if(type==='Radius calculation'&&this.pdfViewer.radiusSettings.annotationSelectorSettings){selector=this.pdfViewer.radiusSettings.annotationSelectorSettings;}else if(type==='Volume calculation'&&this.pdfViewer.volumeSettings.annotationSelectorSettings){selector=this.pdfViewer.volumeSettings.annotationSelectorSettings;}return selector;};MeasureAnnotation.prototype.getShapeAnnotType=function(measureType){var annotationType;switch(measureType){case'Distance':annotationType='Line';break;case'Perimeter':annotationType='Polyline';break;case'Area':case'Volume':annotationType='Polygon';break;case'Radius':annotationType='Circle';break;}return annotationType;};MeasureAnnotation.prototype.getShapeType=function(shape){var shapeType;if(shape.shapeAnnotationType==='Line'){shapeType='Distance';}else if(shape.shapeAnnotationType==='Polyline'){shapeType='LineWidthArrowHead';}else if(shape.shapeAnnotationType==='Polygon'&&shape.indent==='PolygonDimension'){shapeType='Polygon';// eslint-disable-next-line max-len
}else if(shape.shapeAnnotationType==='Polygon'&&shape.indent==='PolygonRadius'||shape.shapeAnnotationType==='Circle'){shapeType='Radius';}else if(shape.shapeAnnotationType==='Polygon'&&shape.indent==='PolygonVolume'){shapeType='Polygon';}return shapeType;};MeasureAnnotation.prototype.getMeasureType=function(shapeAnnotationType,indent){var measureType;if(shapeAnnotationType==='Line'){measureType='Distance';}else if(shapeAnnotationType==='Polyline'){measureType='Perimeter';}else if(shapeAnnotationType==='Polygon'&&indent==='PolygonDimension'){measureType='Area';// eslint-disable-next-line max-len
}else if(shapeAnnotationType==='Polygon'&&indent==='PolygonRadius'||shapeAnnotationType==='Circle'){measureType='Radius';}else if(shapeAnnotationType==='Polygon'&&indent==='PolygonVolume'){measureType='Volume';}return measureType;};MeasureAnnotation.prototype.getIndent=function(measureType){var indent;switch(measureType){case'Distance':indent='LineDimension';break;case'Perimeter':indent='PolyLineDimension';break;case'Area':indent='PolygonDimension';break;case'Radius':indent='PolygonRadius';break;case'Volume':indent='PolygonVolume';break;}return indent;};// eslint-disable-next-line
MeasureAnnotation.prototype.getNumberFormatArray=function(list){// eslint-disable-next-line
var numberFormatArray=new Array();if(list){for(var i=0;i<list.length;i++){// eslint-disable-next-line max-len
numberFormatArray[i]={unit:list[i].Unit,fractionalType:list[i].FractionalType,conversionFactor:list[i].ConversionFactor,denominator:list[i].Denominator,formatDenominator:list[i].FormatDenominator};}}return numberFormatArray;};MeasureAnnotation.prototype.createNumberFormat=function(type){var cFactor=1;var unit=this.displayUnit;if(type==='x'){cFactor=this.getFactor(this.unit);}if(type==='a'){unit='sq '+this.displayUnit;}// eslint-disable-next-line max-len
var numberFormat={unit:unit,fractionalType:'D',conversionFactor:cFactor,denominator:100,formatDenominator:false};return numberFormat;};/**
     * @private
     */MeasureAnnotation.prototype.saveMeasureShapeAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape_measure'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);if(this.pdfViewerBase.isJsonExported){if(pageAnnotationObject.annotations[z].isAnnotationRotated){pageAnnotationObject.annotations[z].bounds=this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex);pageAnnotationObject.annotations[z].vertexPoints=this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints,pageAnnotationObject.pageIndex);}else{var pageDetails=this.pdfViewerBase.pageSize[pageAnnotationObject.pageIndex];if(pageDetails){pageAnnotationObject.annotations[z].annotationRotation=pageDetails.rotation;}}}// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.getRgbCode(strokeColorString));var fillColorString=pageAnnotationObject.annotations[z].fillColor;pageAnnotationObject.annotations[z].fillColor=JSON.stringify(this.getRgbCode(fillColorString));// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints,pageAnnotationObject.pageIndex));if(pageAnnotationObject.annotations[z].rectangleDifference!==null){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].rectangleDifference=JSON.stringify(pageAnnotationObject.annotations[z].rectangleDifference);}// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].calibrate=this.getStringifiedMeasure(pageAnnotationObject.annotations[z].calibrate);if(pageAnnotationObject.annotations[z].enableShapeLabel===true){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(pageAnnotationObject.annotations[z].bounds),pageAnnotationObject.pageIndex));var labelFillColorString=pageAnnotationObject.annotations[z].labelFillColor;pageAnnotationObject.annotations[z].labelFillColor=JSON.stringify(this.getRgbCode(labelFillColorString));var labelBorderColorString=pageAnnotationObject.annotations[z].labelBorderColor;pageAnnotationObject.annotations[z].labelBorderColor=JSON.stringify(this.getRgbCode(labelBorderColorString));pageAnnotationObject.annotations[z].labelSettings.fillColor=labelFillColorString;var fontColorString=pageAnnotationObject.annotations[z].labelSettings.fontColor;pageAnnotationObject.annotations[z].fontColor=JSON.stringify(this.getRgbCode(fontColorString));}}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};/**
     * @private
     */MeasureAnnotation.prototype.createScaleRatioWindow=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync('OpenScaleRatioDialog');};MeasureAnnotation.prototype.convertUnitSelect=function(args){this.convertUnit.content=this.createContent(args.item.text).outerHTML;};MeasureAnnotation.prototype.dispUnitSelect=function(args){this.dispUnit.content=this.createContent(args.item.text).outerHTML;this.depthUnit.content=this.createContent(args.item.text).outerHTML;};MeasureAnnotation.prototype.depthUnitSelect=function(args){this.depthUnit.content=this.createContent(args.item.text).outerHTML;};MeasureAnnotation.prototype.createContent=function(text){var divElement=sf.base.createElement('div',{className:'e-pv-scale-unit-content'});divElement.textContent=text;return divElement;};MeasureAnnotation.prototype.createInputElement=function(input,className,idString,parentElement){var container=sf.base.createElement('div',{id:idString+'_container',className:className+'-container'});var textBoxInput=sf.base.createElement(input,{id:idString});if(input==='input'){textBoxInput.type='text';}container.appendChild(textBoxInput);parentElement.appendChild(container);return textBoxInput;};/**
     * @private
     */MeasureAnnotation.prototype.onOkClicked=function(){// eslint-disable-next-line
var unitElement=document.querySelector('#'+this.pdfViewer.dataId+'_src_unit');// eslint-disable-next-line
var displayElement=document.querySelector('#'+this.pdfViewer.dataId+'_dest_unit');// eslint-disable-next-line
var sourceTextBox=document.querySelector('#'+this.pdfViewer.dataId+'_ratio_input');// eslint-disable-next-line
var destTextBox=document.querySelector('#'+this.pdfViewer.dataId+'_dest_input');// eslint-disable-next-line
var depthTextBox=document.querySelector('#'+this.pdfViewer.dataId+'_depth_input');if(unitElement&&displayElement&&sourceTextBox&&destTextBox&&depthTextBox){this.unit=unitElement.value;this.displayUnit=displayElement.value;// eslint-disable-next-line
this.ratio=parseInt(destTextBox.value)/parseInt(sourceTextBox.value);// eslint-disable-next-line
this.volumeDepth=parseInt(depthTextBox.value);}// eslint-disable-next-line
this.scaleRatioString=parseInt(sourceTextBox.value)+' '+this.unit+' = '+parseInt(destTextBox.value)+' '+this.displayUnit;this.updateMeasureValues(this.scaleRatioString,this.displayUnit,this.unit,this.volumeDepth);};MeasureAnnotation.prototype.restoreUnit=function(dropdownObject){var calibUnit;for(var i=0;i<dropdownObject.items.length;i++){var convertUnitItem=dropdownObject.items[i];if(this.unit===convertUnitItem.text){calibUnit=convertUnitItem.label;}}return calibUnit;};/**
     * @param ratio
     * @param displayUnit
     * @param conversionUnit
     * @param depth
     * @private
     */MeasureAnnotation.prototype.updateMeasureValues=function(ratio,displayUnit,conversionUnit,depth){this.scaleRatioString=ratio;this.displayUnit=displayUnit;this.unit=conversionUnit;this.volumeDepth=depth;for(var i=0;i<this.pdfViewerBase.pageCount;i++){var pageAnnotations=this.getAnnotations(i,null);if(pageAnnotations){for(var j=0;j<pageAnnotations.length;j++){pageAnnotations=this.getAnnotations(i,null);var measureObject=pageAnnotations[j];if(!measureObject.annotationSettings.isLock){measureObject.calibrate.ratio=ratio;measureObject.calibrate.x[0].unit=displayUnit;measureObject.calibrate.distance[0].unit=displayUnit;measureObject.calibrate.area[0].unit=displayUnit;measureObject.calibrate.x[0].conversionFactor=this.getFactor(conversionUnit);if(measureObject.indent==='PolygonVolume'){measureObject.calibrate.depth=depth;}pageAnnotations[j]=measureObject;this.manageAnnotations(pageAnnotations,i);this.pdfViewer.annotation.updateCalibrateValues(this.getAnnotationBaseModel(measureObject.id));}}}this.pdfViewer.annotation.renderAnnotations(i,null,null,null,null,false);}};MeasureAnnotation.prototype.getAnnotationBaseModel=function(id){var annotationBase=null;for(var i=0;i<this.pdfViewer.annotations.length;i++){if(id===this.pdfViewer.annotations[i].id){annotationBase=this.pdfViewer.annotations[i];break;}}return annotationBase;};MeasureAnnotation.prototype.getContent=function(unit){return unit.split('</div>')[0].split('">')[1];};/**
     * @param value
     * @param currentAnnot
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.setConversion=function(value,currentAnnot){// eslint-disable-next-line
var values;if(currentAnnot){var pageIndex=currentAnnot.pageIndex;if(currentAnnot.id==='diagram_helper'){pageIndex=currentAnnot.pageIndex?currentAnnot.pageIndex:this.pdfViewerBase.activeElements.activePageID;currentAnnot=this.getCurrentObject(pageIndex,null,currentAnnot.annotName);}if(currentAnnot){values=this.getCurrentValues(currentAnnot.id,pageIndex);}else{values=this.getCurrentValues();}}else{values=this.getCurrentValues();}var scaledValue=value*values.ratio;return this.convertPointToUnits(values.factor,scaledValue,values.unit);};MeasureAnnotation.prototype.onCancelClicked=function(){this.scaleRatioDialog.hide();};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewlyAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewlyAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewlyAdded
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param isNewlyAdded
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.modifyInCollection=function(property,pageNumber,annotationBase,isNewlyAdded){if(!isNewlyAdded){this.pdfViewerBase.updateDocumentEditedProperty(true);}var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase,true);if(pageAnnotations[i].shapeAnnotationType==='Line'||pageAnnotations[i].shapeAnnotationType==='Polyline'){pageAnnotations[i].vertexPoints=annotationBase.vertexPoints;// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.bounds.x,y:annotationBase.bounds.y,left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else if(pageAnnotations[i].shapeAnnotationType==='Polygon'){pageAnnotations[i].vertexPoints=annotationBase.vertexPoints;// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.bounds.x,y:annotationBase.bounds.y,left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else{// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.bounds.x,y:annotationBase.bounds.y,left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}if(pageAnnotations[i].enableShapeLabel===true&&annotationBase.wrapper){// eslint-disable-next-line max-len
pageAnnotations[i].labelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(annotationBase.wrapper.bounds);}}else if(property==='fill'){pageAnnotations[i].fillColor=annotationBase.wrapper.children[0].style.fill;if(this.pdfViewer.enableShapeLabel){pageAnnotations[i].labelFillColor=annotationBase.wrapper.children[0].style.fill;}}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='dashArray'){pageAnnotations[i].borderDashArray=annotationBase.wrapper.children[0].style.strokeDashArray;pageAnnotations[i].borderStyle=annotationBase.borderStyle;}else if(property==='startArrow'){// eslint-disable-next-line max-len
pageAnnotations[i].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.sourceDecoraterShapes);}else if(property==='endArrow'){// eslint-disable-next-line max-len
pageAnnotations[i].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.taregetDecoraterShapes);}else if(property==='leaderLength'){pageAnnotations[i].leaderLength=annotationBase.leaderHeight;}else if(property==='notes'){pageAnnotations[i].note=annotationBase.notes;if(pageAnnotations[i].enableShapeLabel===true){pageAnnotations[i].labelContent=annotationBase.notes;}}else if(property==='delete'){currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}else if(property==='labelContent'){pageAnnotations[i].note=annotationBase.labelContent;pageAnnotations[i].labelContent=annotationBase.labelContent;break;}else if(property==='fontColor'){pageAnnotations[i].fontColor=annotationBase.fontColor;}else if(property==='fontSize'){pageAnnotations[i].fontSize=annotationBase.fontSize;}// eslint-disable-next-line max-len
pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};/**
     * @param pageNumber
     * @param annotationBase
     * @param pageNumber
     * @param annotationBase
     * @private
     */MeasureAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber);};MeasureAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape_measure'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape_measure']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_shape_measure',annotationStringified);}}};// eslint-disable-next-line
MeasureAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape_measure');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape_measure'];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};MeasureAnnotation.prototype.getCurrentObject=function(pageNumber,id,annotName){var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null){for(var i=0;i<pageAnnotations.length;i++){if(id){if(id===pageAnnotations[i].id){currentAnnotObject=pageAnnotations[i];break;}}else if(annotName){if(annotName===pageAnnotations[i].annotName){currentAnnotObject=pageAnnotations[i];break;}}}}return currentAnnotObject;};// eslint-disable-next-line
MeasureAnnotation.prototype.getCurrentValues=function(id,pageNumber){var ratio;var unit;var factor;var depth;if(id&&!isNaN(pageNumber)){var currentAnnotObject=this.getCurrentObject(pageNumber,id);if(currentAnnotObject){ratio=this.getCurrentRatio(currentAnnotObject.calibrate.ratio);unit=currentAnnotObject.calibrate.x[0].unit;factor=currentAnnotObject.calibrate.x[0].conversionFactor;depth=currentAnnotObject.calibrate.depth;}else{ratio=this.ratio;unit=this.displayUnit;factor=this.getFactor(this.unit);depth=this.volumeDepth;}}else{ratio=this.ratio;unit=this.displayUnit;factor=this.getFactor(this.unit);depth=this.volumeDepth;}return{ratio:ratio,unit:unit,factor:factor,depth:depth};};MeasureAnnotation.prototype.getCurrentRatio=function(ratioString){var stringArray=ratioString.split(' ');if(stringArray[3]==='='){return parseFloat(stringArray[4])/parseFloat(stringArray[0]);}else{return parseFloat(stringArray[3])/parseFloat(stringArray[0]);}};/**
     * @param points
     * @param id
     * @param pageNumber
     * @param points
     * @param id
     * @param pageNumber
     * @param points
     * @param id
     * @param pageNumber
     * @private
     */MeasureAnnotation.prototype.calculateArea=function(points,id,pageNumber){// eslint-disable-next-line
var values=this.getCurrentValues(id,pageNumber);var area=this.getArea(points,values.factor,values.unit)*values.ratio;if(values.unit==='ft_in'){// eslint-disable-next-line
var calculateValue=Math.round(area*100)/100;if(calculateValue>=12){calculateValue=(Math.round(calculateValue/12*100)/100).toString();calculateValue=calculateValue.split('.');if(calculateValue[1]){// eslint-disable-next-line
var inchValue=0;if(calculateValue[1].charAt(1)){// eslint-disable-next-line
inchValue=parseInt(calculateValue[1].charAt(0))+'.'+parseInt(calculateValue[1].charAt(1));inchValue=Math.round(inchValue);}else{inchValue=calculateValue[1];}if(!inchValue){return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant('ft');}else{return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant('ft')+' '+inchValue+' '+this.pdfViewer.localeObj.getConstant('in');}}else{return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant('ft');}}else{return Math.round(area*100)/100+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant('in');}}if(values.unit==='m'){return area*100/100+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant(values.unit);}return Math.round(area*100)/100+' '+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant(values.unit);};MeasureAnnotation.prototype.getArea=function(points,factor,unit){var area=0;var j=points.length-1;for(var i=0;i<points.length;i++){// eslint-disable-next-line max-len
area+=(points[j].x*this.pixelToPointFactor*factor+points[i].x*this.pixelToPointFactor*factor)*(points[j].y*this.pixelToPointFactor*factor-points[i].y*this.pixelToPointFactor*factor);j=i;}if(unit==='ft_in'){return Math.abs(area*2.0);}else{return Math.abs(area/2.0);}};/**
     * @param points
     * @param id
     * @param pageNumber
     * @param points
     * @param id
     * @param pageNumber
     * @param points
     * @param id
     * @param pageNumber
     * @private
     */MeasureAnnotation.prototype.calculateVolume=function(points,id,pageNumber){// eslint-disable-next-line
var values=this.getCurrentValues(id,pageNumber);var depth=values.depth?values.depth:this.volumeDepth;var area=this.getArea(points,values.factor,values.unit);var volume=area*(depth*this.convertUnitToPoint(values.unit)*values.factor)*values.ratio;if(values.unit==='ft_in'){// eslint-disable-next-line
var calculateValue=Math.round(volume*100)/100;if(calculateValue>=12){calculateValue=(Math.round(calculateValue/12*100)/100).toString();calculateValue=calculateValue.split('.');if(calculateValue[1]){// eslint-disable-next-line
var inchValue=0;if(calculateValue[1].charAt(1)){// eslint-disable-next-line
inchValue=parseInt(calculateValue[1].charAt(0))+'.'+parseInt(calculateValue[1].charAt(1));inchValue=Math.round(inchValue);}else{inchValue=calculateValue[1];}if(!inchValue){return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant('ft');}else{return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant('ft')+' '+inchValue+' '+this.pdfViewer.localeObj.getConstant('in');}}else{return calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant('ft');}}else{return Math.round(volume*100)/100+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant('in');}}return Math.round(volume*100)/100+' '+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant(values.unit);};/**
     * @param pdfAnnotationBase
     * @private
     */MeasureAnnotation.prototype.calculatePerimeter=function(pdfAnnotationBase){var perimeter=sf.drawings.Point.getLengthFromListOfPoints(pdfAnnotationBase.vertexPoints);return this.setConversion(perimeter*this.pixelToPointFactor,pdfAnnotationBase);};MeasureAnnotation.prototype.getFactor=function(unit){var factor;switch(unit){case'in':factor=1/72;break;case'cm':factor=1/28.346;break;case'mm':factor=1/2.835;break;case'pt':factor=1;break;case'p':factor=1/12;break;case'ft':factor=1/864;break;case'ft_in':factor=1/72;break;case'm':factor=1/2834.64567;break;}return factor;};MeasureAnnotation.prototype.convertPointToUnits=function(factor,value,unit){var convertedValue;if(unit==='ft_in'){// eslint-disable-next-line
var calculateValue=Math.round(value*factor*100)/100;if(calculateValue>=12){calculateValue=(Math.round(calculateValue/12*100)/100).toString();calculateValue=calculateValue.split('.');if(calculateValue[1]){// eslint-disable-next-line
var inchValue=0;if(calculateValue[1].charAt(1)){// eslint-disable-next-line
inchValue=parseInt(calculateValue[1].charAt(0))+'.'+parseInt(calculateValue[1].charAt(1));inchValue=Math.round(inchValue);}else{inchValue=calculateValue[1];}if(!inchValue){convertedValue=calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('ft');}else{convertedValue=calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('ft')+' '+inchValue+' '+this.pdfViewer.localeObj.getConstant('in');}}else{convertedValue=calculateValue[0]+' '+this.pdfViewer.localeObj.getConstant('ft');}}else{convertedValue=Math.round(value*factor*100)/100+' '+this.pdfViewer.localeObj.getConstant('in');}}else{convertedValue=Math.round(value*factor*100)/100+' '+this.pdfViewer.localeObj.getConstant(unit);}return convertedValue;};MeasureAnnotation.prototype.convertUnitToPoint=function(unit){var factor;switch(unit){case'in':factor=72;break;case'cm':factor=28.346;break;case'mm':factor=2.835;break;case'pt':factor=1;break;case'p':factor=12;break;case'ft':factor=864;break;case'ft_in':factor=72;break;case'm':factor=2834.64567;break;}return factor;};// eslint-disable-next-line
MeasureAnnotation.prototype.getStringifiedMeasure=function(measure){if(!sf.base.isNullOrUndefined(measure)){measure.angle=JSON.stringify(measure.angle);measure.area=JSON.stringify(measure.area);measure.distance=JSON.stringify(measure.distance);measure.volume=JSON.stringify(measure.volume);}return JSON.stringify(measure);};// eslint-disable-next-line
MeasureAnnotation.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var stringArray=colorString.split(',');if(sf.base.isNullOrUndefined(stringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');stringArray=colorString.split(',');}// eslint-disable-next-line radix
var r=parseInt(stringArray[0].split('(')[1]);// eslint-disable-next-line radix
var g=parseInt(stringArray[1]);// eslint-disable-next-line radix
var b=parseInt(stringArray[2]);// eslint-disable-next-line radix
var a=parseInt(stringArray[3]);return{r:r,g:g,b:b,a:a};};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.saveImportedMeasureAnnotations=function(annotation,pageNumber){var annotationObject=null;var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}var measureObject={// eslint-disable-next-line max-len
ratio:annotation.Calibrate.Ratio,x:this.getNumberFormatArray(annotation.Calibrate.X),distance:this.getNumberFormatArray(annotation.Calibrate.Distance),area:this.getNumberFormatArray(annotation.Calibrate.Area),angle:this.getNumberFormatArray(annotation.Calibrate.Angle),volume:this.getNumberFormatArray(annotation.Calibrate.Volume),targetUnitConversion:annotation.Calibrate.TargetUnitConversion};if(annotation.Calibrate.Depth){measureObject.depth=annotation.Calibrate.Depth;}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:this.pdfViewer.shapeLabelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);annotation.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor('measure',annotation.Subject);annotationObject={// eslint-disable-next-line max-len
id:'measure',shapeAnnotationType:annotation.ShapeAnnotationType,type:this.getMeasureType(annotation.ShapeAnnotationType,annotation.Indent),author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,// eslint-disable-next-line max-len
borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,// eslint-disable-next-line max-len
bounds:{x:annotation.Bounds.X,y:annotation.Bounds.Y,left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},caption:annotation.Caption,captionPosition:annotation.CaptionPosition,calibrate:measureObject,leaderLength:annotation.LeaderLength,leaderLineExtension:annotation.LeaderLineExtension,// eslint-disable-next-line max-len
leaderLineOffset:annotation.LeaderLineOffset,indent:annotation.Indent,annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,labelBorderColor:annotation.LabelBorderColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,annotationSelectorSettings:this.getSettings(annotation),labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:false};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape_measure');};/**
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
MeasureAnnotation.prototype.updateMeasureAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}var measureObject={// eslint-disable-next-line max-len
ratio:annotation.Calibrate.Ratio,x:this.getNumberFormatArray(annotation.Calibrate.X),distance:this.getNumberFormatArray(annotation.Calibrate.Distance),area:this.getNumberFormatArray(annotation.Calibrate.Area),angle:this.getNumberFormatArray(annotation.Calibrate.Angle),volume:this.getNumberFormatArray(annotation.Calibrate.Volume),targetUnitConversion:annotation.Calibrate.TargetUnitConversion};if(annotation.Calibrate.Depth){measureObject.depth=annotation.Calibrate.Depth;}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;var settings=this.pdfViewer.shapeLabelSettings;var labelSettings={borderColor:annotation.StrokeColor,fillColor:annotation.FillColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,labelContent:annotation.LabelContent,labelHeight:settings.labelHeight,labelWidth:settings.labelWidth,opacity:annotation.Opacity};annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:labelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}annotationObject={// eslint-disable-next-line max-len
id:'measure',shapeAnnotationType:annotation.ShapeAnnotationType,type:this.getMeasureType(annotation.ShapeAnnotationType,annotation.Indent),author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,// eslint-disable-next-line max-len
borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,// eslint-disable-next-line max-len
bounds:{x:annotation.Bounds.X,y:annotation.Bounds.Y,left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},caption:annotation.Caption,captionPosition:annotation.CaptionPosition,calibrate:measureObject,leaderLength:annotation.LeaderLength,leaderLineExtension:annotation.LeaderLineExtension,// eslint-disable-next-line max-len
leaderLineOffset:annotation.LeaderLineOffset,indent:annotation.Indent,annotationId:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,labelBorderColor:annotation.LabelBorderColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,pageNumber:pageNumber,annotationSelectorSettings:annotation.AnnotationSelectorSettings,labelSettings:annotation.labelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint};return annotationObject;};/**
    * This method used to add annotations with using program.
    *
    * @param annotationType - It describes the annotation type
    * @param annotationObject - It describes type of annotation object
    * @param offset - It describes about the annotation bounds or location
    * @returns Object
    * @private
    */MeasureAnnotation.prototype.updateAddAnnotationDetails=function(annotationType,annotationObject,offset){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:10,y:10},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:10,y:10};else offset=annotationObject.offset;//Initialize the annotation settings
var annotationSelectorSettings=null;var allowedInteractions=null;var annotationSettings=null;var measureAnnotationType='';var shapeAnnotationType='';var subject='';var isArrow=false;var vertexPoints=[];//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();if(annotationType=='Distance'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings);allowedInteractions=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='LineDimension';shapeAnnotationType='Line';subject='Distance calculation';isArrow=true;if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+100,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Perimeter'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings);allowedInteractions=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='PolyLineDimension';shapeAnnotationType='Polyline';subject='Perimeter calculation';isArrow=true;if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+85,y:offset.y},{x:offset.x+86,y:offset.y+62}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Area'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings);allowedInteractions=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='PolygonDimension';shapeAnnotationType='Polygon';subject='Area calculation';if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+88,y:offset.y-1},{x:offset.x+89,y:offset.y+53},{x:offset.x,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Radius'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings);allowedInteractions=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='PolygonRadius';shapeAnnotationType='Circle';subject='Radius calculation';annotationObject.width=annotationObject.width?annotationObject.width:100;annotationObject.height=annotationObject.height?annotationObject.height:100;vertexPoints=null;}else if(annotationType=='Volume'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings);allowedInteractions=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;measureAnnotationType='PolygonVolume';shapeAnnotationType='Polygon';subject='Volume calculation';if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x,y:offset.y+109},{x:offset.x+120,y:offset.y+109},{x:offset.x+120,y:offset.y-1},{x:offset.x,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationSettings.minHeight=annotationObject.minHeight?annotationObject.minHeight:0;annotationSettings.minWidth=annotationObject.minWidth?annotationObject.minWidth:0;annotationSettings.maxWidth=annotationObject.maxWidth?annotationObject.maxWidth:0;annotationSettings.maxHeight=annotationObject.maxHeight?annotationObject.maxHeight:0;//Calculating area for all the measurements
var values={depth:96,factor:0.013888888888888888,ratio:1,unit:'in'};var notes='';if(vertexPoints||annotationType=='Radius'||annotationType=='Volume'){if(annotationType=='Distance'||annotationType=='Perimeter'||annotationType=='Radius'){var length_1=0;if(annotationType=='Radius'){length_1=annotationObject.width/2*this.pixelToPointFactor;}else{for(var i_1=0;i_1<vertexPoints.length-1;i_1++){length_1+=Math.sqrt(Math.pow(vertexPoints[i_1].x-vertexPoints[i_1+1].x,2)+Math.pow(vertexPoints[i_1].y-vertexPoints[i_1+1].y,2));}length_1=length_1*this.pixelToPointFactor;}var scaledValue=length_1*values.ratio;notes=this.convertPointToUnits(values.factor,scaledValue,values.unit);}else if(annotationType=='Area'||annotationType=='Volume'){var area=0;var j=vertexPoints.length-1;for(var i=0;i<vertexPoints.length;i++){area+=(vertexPoints[j].x*this.pixelToPointFactor*values.factor+vertexPoints[i].x*this.pixelToPointFactor*values.factor)*(vertexPoints[j].y*this.pixelToPointFactor*values.factor-vertexPoints[i].y*this.pixelToPointFactor*values.factor);j=i;}area=Math.abs(area/2.0);if(annotationType=='Volume'){area=area*(values.depth*this.convertUnitToPoint(values.unit)*values.factor)*values.ratio;notes=Math.round(area*100)/100+this.pdfViewer.localeObj.getConstant('cu')+' '+this.pdfViewer.localeObj.getConstant(values.unit);}else notes=Math.round(area*100)/100+this.pdfViewer.localeObj.getConstant('sq')+' '+this.pdfViewer.localeObj.getConstant(values.unit);}}//Converting points model into vertex property
if(vertexPoints)vertexPoints=this.pdfViewer.annotation.getVertexPointsXY(vertexPoints);//Creating Annotation objects with it's proper properties
var measureShapeAnnotation=[];var shape={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'shape_measure',AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Author:annotationObject.author?annotationObject.author:'Guest',BorderDashArray:annotationObject.borderDashArray?annotationObject.borderDashArray:0,BorderStyle:'Solid',Bounds:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:annotationObject.height,IsEmpty:false,Width:annotationObject.width}},Calibrate:{Area:[{ConversionFactor:1,Denominator:100,FormatDenominator:false,FractionalType:'D',Unit:'sq in'}],Depth:annotationObject.depth?annotationObject.depth:0,Distance:[{ConversionFactor:1,Denominator:100,FormatDenominator:false,FractionalType:'D',Unit:'in'}],Ratio:'1 in = 1 in',TargetUnitConversion:0,Volume:null,X:[{ConversionFactor:0.013888889,Denominator:100,FormatDenominator:false,FractionalType:'D',Unit:'in'}]},Caption:true,CaptionPosition:'Top',CloudIntensity:0,Comments:null,CustomData:annotationObject.customData?annotationObject.customData:null,CreatedDate:currentDateString,EnableShapeLabel:false,ExistingCustomData:null,FillColor:annotationObject.fillColor?annotationObject.fillColor:'#ffffff00',FontColor:null,FontSize:0,Indent:measureAnnotationType,IsCloudShape:false,IsCommentLock:false,IsLocked:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LeaderLength:0,LeaderLineExtension:0,LeaderLineOffset:0,LineHeadEnd:annotationObject.lineHeadStartStyle?annotationObject.lineHeadStartStyle:isArrow?'ClosedArrow':'None',LineHeadStart:annotationObject.lineHeadEndStyle?annotationObject.lineHeadEndStyle:isArrow?'ClosedArrow':'None',ModifiedDate:'',Note:notes,Opacity:annotationObject.opacity?annotationObject.opacity:1,RectangleDifference:null,RotateAngle:'RotateAngle0',ShapeAnnotationType:shapeAnnotationType,State:'',StateModel:'',StrokeColor:annotationObject.strokeColor?annotationObject.strokeColor:'#ff0000',Subject:subject,Thickness:annotationObject.thickness?annotationObject.thickness:1,VertexPoints:vertexPoints};//Adding the annotation object to an array and return it
measureShapeAnnotation[0]=shape;return{measureShapeAnnotation:measureShapeAnnotation};};return MeasureAnnotation;}();/**
 * @hidden
 */var ShapeAnnotation=/** @class */function(){function ShapeAnnotation(pdfviewer,pdfViewerBase){/**
         * @private
         */this.shapeCount=0;/**
         * @private
         */this.isAddAnnotationProgramatically=false;this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param shapeAnnotations
     * @param pageNumber
     * @param isImportAcion
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.renderShapeAnnotations=function(shapeAnnotations,pageNumber,isImportAcion){if(shapeAnnotations){if(shapeAnnotations.length>=1){// eslint-disable-next-line
var shapeAnnots=this.pdfViewer.annotation.getStoredAnnotations(pageNumber,shapeAnnotations,'_annotations_shape');if(!shapeAnnots||isImportAcion){for(var i=0;i<shapeAnnotations.length;i++){// eslint-disable-next-line
var annotation=shapeAnnotations[i];annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);var annotationObject=null;this.shapeCount=this.shapeCount+1;var isAnnotationRotated=void 0;if(annotation.ShapeAnnotationType){if(isImportAcion&&!annotation.isAlreadyAdded){if(this.pdfViewerBase.isJsonImported){annotation.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(annotation.Rotate,pageNumber,annotation.Bounds,annotation.AnnotationRotation);isAnnotationRotated=this.pdfViewerBase.isPageRotated;}}var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];if(isImportAcion&&this.pdfViewerBase.isJsonImported){vertexPoints=this.pdfViewerBase.calculateVertexPoints(annotation.Rotate,pageNumber,annotation.VertexPoints,annotation.AnnotationRotation);}else{for(var j=0;j<annotation.VertexPoints.length;j++){var x=annotation.VertexPoints[j].X?annotation.VertexPoints[j].X:annotation.VertexPoints[j].x;var y=annotation.VertexPoints[j].Y?annotation.VertexPoints[j].Y:annotation.VertexPoints[j].y;var point={x:x,y:y};vertexPoints.push(point);}}}// eslint-disable-next-line
if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);// eslint-disable-next-line max-len
annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;// eslint-disable-next-line max-len
annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:this.pdfViewer.shapeLabelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isPrint=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint=annotation.IsPrint;}else{isPrint=annotation.AnnotationSettings.isPrint;}var left=annotation.Bounds.X?annotation.Bounds.X:annotation.Bounds.x;var top_1=annotation.Bounds.Y?annotation.Bounds.Y:annotation.Bounds.y;var width=annotation.Bounds.Width?annotation.Bounds.Width:annotation.Bounds.width;var height=annotation.Bounds.Height?annotation.Bounds.Height:annotation.Bounds.height;// eslint-disable-next-line max-len
annotationObject={id:'shape'+this.shapeCount,shapeAnnotationType:annotation.ShapeAnnotationType,author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,pageNumber:pageNumber,type:this.getShapeType(annotation.ShapeAnnotationType,annotation.LineHeadStart,annotation.LineHeadEnd),// eslint-disable-next-line max-len
note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,// eslint-disable-next-line max-len
cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},annotName:annotation.AnnotName,bounds:{x:left,y:top_1,left:left,top:top_1,width:width,height:height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},// eslint-disable-next-line max-len
labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,fontColor:annotation.FontColor,labelBorderColor:annotation.LabelBorderColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,annotationSelectorSettings:this.getSettings(annotation),labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:isPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:isAnnotationRotated};var annot=void 0;// eslint-disable-next-line
var vPoints=annotationObject.vertexPoints;if(vertexPoints==null){vPoints=[];}// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annot={// eslint-disable-next-line max-len
id:'shape'+this.shapeCount,type:this.getShapeType(annotation.ShapeAnnotationType,annotation.LineHeadStart,annotation.LineHeadEnd),shapeAnnotationType:this.getShapeType(annotation.ShapeAnnotationType,annotation.LineHeadStart,annotation.LineHeadEnd),author:annotationObject.author,allowedInteractions:annotationObject.allowedInteractions,modifiedDate:annotationObject.modifiedDate,annotName:annotationObject.annotName,subject:annotationObject.subject,notes:annotationObject.note,fillColor:annotationObject.fillColor,strokeColor:annotationObject.strokeColor,opacity:annotationObject.opacity,// eslint-disable-next-line max-len
thickness:annotationObject.thickness,borderStyle:annotationObject.borderStyle,borderDashArray:annotationObject.borderDashArray?annotationObject.borderDashArray.toString():'0',rotateAngle:parseFloat(annotationObject.rotateAngle.split('Angle')[1]),comments:annotationObject.comments,review:annotationObject.review,isCloudShape:annotationObject.isCloudShape,cloudIntensity:annotationObject.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadEnd),// eslint-disable-next-line max-len
sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(annotationObject.lineHeadStart),vertexPoints:vPoints,bounds:{x:annotationObject.bounds.left,y:annotationObject.bounds.top,width:annotationObject.bounds.width,height:annotationObject.bounds.height},pageIndex:annotationObject.pageNumber,// eslint-disable-next-line max-len
labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,fontColor:annotation.FontColor,labelBorderColor:annotation.LabelBorderColor,fontSize:annotation.FontSize,labelBounds:annotation.LabelBounds,annotationSelectorSettings:annotation.AnnotationSelectorSettings,annotationSettings:annotationObject.annotationSettings,annotationAddMode:annotation.annotationAddMode,isPrint:isPrint,isCommentLock:annotationObject.isCommentLock};var addedAnnot=this.pdfViewer.add(annot);this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape');if(this.isAddAnnotationProgramatically){var settings={opacity:annot.opacity,strokeColor:annot.strokeColor,thickness:annot.thickness,modifiedDate:annot.modifiedDate,width:annot.bounds.width,height:annot.bounds.height};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,annotation.ShapeAnnotationType,annot.bounds,settings);}}}}}else if(shapeAnnotations.shapeAnnotationType){var annotationObject=this.createAnnotationObject(shapeAnnotations);if(!sf.base.isNullOrUndefined(shapeAnnotations.formFieldAnnotationType)&&shapeAnnotations.formFieldAnnotationType!=="")this.pdfViewer.annotationModule.isFormFieldShape=true;else this.pdfViewer.annotationModule.isFormFieldShape=false;this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape');this.pdfViewer.annotationModule.triggerAnnotationAdd(shapeAnnotations);}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else{selector=this.getSelector(annotation.ShapeAnnotationType,annotation.Subject);}return selector;};/**
     * @param type
     * @private
     */ShapeAnnotation.prototype.setAnnotationType=function(type){this.updateShapeProperties();this.pdfViewerBase.disableTextSelectionMode();var author='Guest';switch(type){case'Line':this.currentAnnotationMode='Line';// eslint-disable-next-line max-len
var modifiedDateLine=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:'Guest';this.pdfViewer.drawingObject={// eslint-disable-next-line max-len
shapeAnnotationType:this.setShapeType('Line'),fillColor:this.lineFillColor,notes:'',strokeColor:this.lineStrokeColor,opacity:this.lineOpacity,thickness:this.lineThickness,modifiedDate:modifiedDateLine,borderDashArray:this.lineDashArray.toString(),// eslint-disable-next-line max-len
sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineEndHead.toString()),author:author,subject:'Line',lineHeadStart:this.lineStartHead,lineHeadEnd:this.lineEndHead,isCommentLock:false};this.pdfViewer.tool='Line';break;case'Arrow':this.currentAnnotationMode='Arrow';// eslint-disable-next-line max-len
var modifiedDateArrow=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:'Guest';this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType('Arrow'),opacity:this.arrowOpacity,// eslint-disable-next-line max-len
sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowEndHead.toString()),// eslint-disable-next-line max-len
fillColor:this.arrowFillColor,strokeColor:this.arrowStrokeColor,notes:'',thickness:this.arrowThickness,borderDashArray:this.arrowDashArray.toString(),author:author,subject:'Arrow',// eslint-disable-next-line max-len
modifiedDate:modifiedDateArrow,lineHeadStart:this.arrowStartHead,lineHeadEnd:this.arrowEndHead,isCommentLock:false};this.pdfViewer.tool='Line';break;case'Rectangle':this.currentAnnotationMode='Rectangle';// eslint-disable-next-line max-len
var modifiedDateRect=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:'Guest';this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType('Rectangle'),strokeColor:this.rectangleStrokeColor,fillColor:this.rectangleFillColor,opacity:this.rectangleOpacity,notes:'',thickness:this.rectangleThickness,borderDashArray:'0',modifiedDate:modifiedDateRect,author:author,subject:'Rectangle',isCommentLock:false};this.pdfViewer.tool='DrawTool';break;case'Circle':this.currentAnnotationMode='Circle';// eslint-disable-next-line max-len
var modifiedDateCir=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:'Guest';this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType('Circle'),strokeColor:this.circleStrokeColor,fillColor:this.circleFillColor,opacity:this.circleOpacity,notes:'',thickness:this.circleThickness,borderDashArray:'0',modifiedDate:modifiedDateCir,author:author,subject:'Circle',isCommentLock:false};this.pdfViewer.tool='DrawTool';break;case'Polygon':this.currentAnnotationMode='Polygon';// eslint-disable-next-line max-len
var modifiedDatePolygon=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:'Guest';this.pdfViewer.drawingObject={strokeColor:this.polygonStrokeColor,fillColor:this.polygonFillColor,opacity:this.polygonOpacity,thickness:this.polygonThickness,borderDashArray:'0',notes:'',author:author,subject:'Polygon',modifiedDate:modifiedDatePolygon,borderStyle:'',isCommentLock:false};this.pdfViewer.tool='Polygon';break;}};ShapeAnnotation.prototype.updateShapeProperties=function(){this.lineFillColor=this.pdfViewer.lineSettings.fillColor?this.pdfViewer.lineSettings.fillColor:'#ffffff00';this.lineStrokeColor=this.pdfViewer.lineSettings.strokeColor?this.pdfViewer.lineSettings.strokeColor:'#ff0000';this.lineThickness=this.pdfViewer.lineSettings.thickness?this.pdfViewer.lineSettings.thickness:1;this.lineOpacity=this.pdfViewer.lineSettings.opacity?this.pdfViewer.lineSettings.opacity:1;this.lineDashArray=this.pdfViewer.lineSettings.borderDashArray?this.pdfViewer.lineSettings.borderDashArray:0;this.lineStartHead=this.pdfViewer.lineSettings.lineHeadStartStyle?this.pdfViewer.lineSettings.lineHeadStartStyle:'None';this.lineEndHead=this.pdfViewer.lineSettings.lineHeadEndStyle?this.pdfViewer.lineSettings.lineHeadEndStyle:'None';this.arrowFillColor=this.pdfViewer.arrowSettings.fillColor?this.pdfViewer.arrowSettings.fillColor:'#ffffff00';this.arrowStrokeColor=this.pdfViewer.arrowSettings.strokeColor?this.pdfViewer.arrowSettings.strokeColor:'#ff0000';this.arrowThickness=this.pdfViewer.arrowSettings.thickness?this.pdfViewer.arrowSettings.thickness:1;this.arrowOpacity=this.pdfViewer.arrowSettings.opacity?this.pdfViewer.arrowSettings.opacity:1;this.arrowDashArray=this.pdfViewer.arrowSettings.borderDashArray?this.pdfViewer.arrowSettings.borderDashArray:0;this.arrowStartHead=this.pdfViewer.arrowSettings.lineHeadStartStyle?this.pdfViewer.arrowSettings.lineHeadStartStyle:'Closed';this.arrowEndHead=this.pdfViewer.arrowSettings.lineHeadEndStyle?this.pdfViewer.arrowSettings.lineHeadEndStyle:'Closed';this.rectangleFillColor=this.pdfViewer.rectangleSettings.fillColor?this.pdfViewer.rectangleSettings.fillColor:'#ffffff00';this.rectangleStrokeColor=this.pdfViewer.rectangleSettings.strokeColor?this.pdfViewer.rectangleSettings.strokeColor:'#ff0000';this.rectangleThickness=this.pdfViewer.rectangleSettings.thickness?this.pdfViewer.rectangleSettings.thickness:1;this.rectangleOpacity=this.pdfViewer.rectangleSettings.opacity?this.pdfViewer.rectangleSettings.opacity:1;this.circleFillColor=this.pdfViewer.circleSettings.fillColor?this.pdfViewer.circleSettings.fillColor:'#ffffff00';this.circleStrokeColor=this.pdfViewer.circleSettings.strokeColor?this.pdfViewer.circleSettings.strokeColor:'#ff0000';this.circleThickness=this.pdfViewer.circleSettings.thickness?this.pdfViewer.circleSettings.thickness:1;this.circleOpacity=this.pdfViewer.circleSettings.opacity?this.pdfViewer.circleSettings.opacity:1;this.polygonFillColor=this.pdfViewer.polygonSettings.fillColor?this.pdfViewer.polygonSettings.fillColor:'#ffffff00';this.polygonStrokeColor=this.pdfViewer.polygonSettings.strokeColor?this.pdfViewer.polygonSettings.strokeColor:'#ff0000';this.polygonThickness=this.pdfViewer.polygonSettings.thickness?this.pdfViewer.polygonSettings.thickness:1;this.polygonOpacity=this.pdfViewer.polygonSettings.opacity?this.pdfViewer.polygonSettings.opacity:1;};ShapeAnnotation.prototype.setShapeType=function(shape){var shapeType;switch(shape){case'Line':shapeType='Line';break;case'Circle':shapeType='Ellipse';break;case'Square':shapeType='Rectangle';break;case'Polyline':shapeType='Line';break;case'Arrow':shapeType='LineWidthArrowHead';break;}return shapeType;};ShapeAnnotation.prototype.getShapeType=function(shapeAnnotationType,lineHeadStart,lineHeadEnd){var shapeType;switch(shapeAnnotationType){case'Line':shapeType='Line';break;case'Circle':shapeType='Ellipse';break;case'Square':shapeType='Rectangle';break;case'Polyline':shapeType='Line';break;case'Polygon':shapeType='Polygon';break;}// eslint-disable-next-line max-len
if((shapeAnnotationType==='Line'||shapeAnnotationType==='Polyline')&&(lineHeadStart!=='None'||lineHeadEnd!=='None')){shapeType='LineWidthArrowHead';}return shapeType;};ShapeAnnotation.prototype.getShapeAnnotType=function(shape){var shapeType;switch(shape){case'Line':case'LineWidthArrowHead':shapeType='Line';break;case'Rectangle':shapeType='Square';break;case'Ellipse':shapeType='Circle';break;case'Polygon':shapeType='Polygon';break;}return shapeType;};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.modifyInCollection=function(property,pageNumber,annotationBase){if(!sf.base.isNullOrUndefined(annotationBase.formFieldAnnotationType)&&annotationBase.formFieldAnnotationType!=="")this.pdfViewer.annotationModule.isFormFieldShape=true;else this.pdfViewer.annotationModule.isFormFieldShape=false;this.pdfViewerBase.updateDocumentEditedProperty(true);var currentAnnotObject=null;if(annotationBase){if(property==='bounds'){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(annotationBase,true);}}var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){if(pageAnnotations[i].shapeAnnotationType==='Line'){pageAnnotations[i].vertexPoints=annotationBase.vertexPoints;// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.bounds.x,y:annotationBase.bounds.y,left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else if(pageAnnotations[i].shapeAnnotationType==='Polygon'){pageAnnotations[i].vertexPoints=annotationBase.vertexPoints;// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.bounds.x,y:annotationBase.bounds.y,left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}else{// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.bounds.x,y:annotationBase.bounds.y,left:annotationBase.bounds.x,top:annotationBase.bounds.y,width:annotationBase.bounds.width,height:annotationBase.bounds.height,right:annotationBase.bounds.right,bottom:annotationBase.bounds.bottom};}if(pageAnnotations[i].enableShapeLabel===true&&annotationBase.wrapper){var labelTop=0;var labelLeft=0;var labelWidth=0;var labelHeight=24.6;var labelMaxWidth=151;if(annotationBase.wrapper.bounds.width){// eslint-disable-next-line max-len
labelWidth=annotationBase.wrapper.bounds.width/2;labelWidth=labelWidth>0&&labelWidth<labelMaxWidth?labelWidth:labelMaxWidth;}if(annotationBase.wrapper.bounds.left){// eslint-disable-next-line max-len
labelLeft=annotationBase.wrapper.bounds.left+annotationBase.wrapper.bounds.width/2-labelWidth/2;}if(annotationBase.wrapper.bounds.top){// eslint-disable-next-line max-len
labelTop=annotationBase.wrapper.bounds.top+annotationBase.wrapper.bounds.height/2-12.3;}// eslint-disable-next-line max-len
pageAnnotations[i].labelBounds={left:labelLeft,top:labelTop,width:labelWidth,height:labelHeight,right:0,bottom:0};}}else if(property==='fill'){pageAnnotations[i].fillColor=annotationBase.wrapper.children[0].style.fill;}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='dashArray'){pageAnnotations[i].borderDashArray=annotationBase.wrapper.children[0].style.strokeDashArray;pageAnnotations[i].borderStyle=annotationBase.borderStyle;}else if(property==='startArrow'){// eslint-disable-next-line max-len
pageAnnotations[i].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.sourceDecoraterShapes);}else if(property==='endArrow'){// eslint-disable-next-line max-len
pageAnnotations[i].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(annotationBase.taregetDecoraterShapes);}else if(property==='notes'){pageAnnotations[i].note=annotationBase.notes;}else if(property==='delete'){currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}else if(property==='labelContent'){pageAnnotations[i].note=annotationBase.labelContent;pageAnnotations[i].labelContent=annotationBase.labelContent;break;}else if(property==='fontColor'){pageAnnotations[i].fontColor=annotationBase.fontColor;}else if(property==='fontSize'){pageAnnotations[i].fontSize=annotationBase.fontSize;}pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};/**
     * @param pageNumber
     * @param annotationBase
     * @param pageNumber
     * @param annotationBase
     * @private
     */ShapeAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber);};/**
     * @private
     */ShapeAnnotation.prototype.saveShapeAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);if(this.pdfViewerBase.isJsonExported){if(pageAnnotationObject.annotations[z].isAnnotationRotated){pageAnnotationObject.annotations[z].bounds=this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex);pageAnnotationObject.annotations[z].vertexPoints=this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints,pageAnnotationObject.pageIndex);}else{var pageDetails=this.pdfViewerBase.pageSize[pageAnnotationObject.pageIndex];if(pageDetails){pageAnnotationObject.annotations[z].annotationRotation=pageDetails.rotation;}}}// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.getRgbCode(strokeColorString));var fillColorString=pageAnnotationObject.annotations[z].fillColor;pageAnnotationObject.annotations[z].fillColor=JSON.stringify(this.getRgbCode(fillColorString));// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(pageAnnotationObject.annotations[z].vertexPoints,pageAnnotationObject.pageIndex));if(pageAnnotationObject.annotations[z].rectangleDifference!==null){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].rectangleDifference=JSON.stringify(pageAnnotationObject.annotations[z].rectangleDifference);}if(pageAnnotationObject.annotations[z].enableShapeLabel===true){// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(pageAnnotationObject.annotations[z].bounds)));var labelFillColorString=pageAnnotationObject.annotations[z].labelFillColor;pageAnnotationObject.annotations[z].labelFillColor=JSON.stringify(this.getRgbCode(labelFillColorString));var labelBorderColorString=pageAnnotationObject.annotations[z].labelBorderColor;pageAnnotationObject.annotations[z].labelBorderColor=JSON.stringify(this.getRgbCode(labelBorderColorString));pageAnnotationObject.annotations[z].labelSettings.fillColor=labelFillColorString;var fontColorString=pageAnnotationObject.annotations[z].labelSettings.fontColor;pageAnnotationObject.annotations[z].fontColor=JSON.stringify(this.getRgbCode(fontColorString));}}pageAnnotationObject.annotations=pageAnnotationObject.annotations.filter(function(item){return item;});newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};ShapeAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_shape');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_shape',annotationStringified);}}};ShapeAnnotation.prototype.createAnnotationObject=function(annotationModel){var bound;var labelBound;var annotationName=this.pdfViewer.annotation.createGUID();if(!annotationModel.formFieldAnnotationType){// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('shape',annotationModel.pageIndex+1,annotationModel.shapeAnnotationType,annotationName,'',annotationModel.author);}annotationModel.annotName=annotationName;if(annotationModel.wrapper.bounds){bound={// eslint-disable-next-line max-len
x:annotationModel.wrapper.bounds.x,y:annotationModel.wrapper.bounds.y,left:annotationModel.wrapper.bounds.x,top:annotationModel.wrapper.bounds.y,height:annotationModel.wrapper.bounds.height,width:annotationModel.wrapper.bounds.width,right:annotationModel.wrapper.bounds.right,bottom:annotationModel.wrapper.bounds.bottom};labelBound=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(annotationModel.wrapper.bounds);}else{bound={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0};labelBound={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0};}if(annotationModel.subject==='Line'&&annotationModel.shapeAnnotationType==='Polygon'){annotationModel.author=this.pdfViewer.annotationModule.updateAnnotationAuthor('shape','Polygon');}else{annotationModel.author=this.pdfViewer.annotationModule.updateAnnotationAuthor('shape',annotationModel.subject);}// eslint-disable-next-line radix
var borderDashArray=parseInt(annotationModel.borderDashArray);borderDashArray=isNaN(borderDashArray)?0:borderDashArray;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule.findAnnotationSettings(annotationModel,true);annotationModel.isPrint=annotationSettings.isPrint;var setting=this.pdfViewer.shapeLabelSettings;var labelSettings={borderColor:annotationModel.strokeColor,fillColor:annotationModel.fillColor,fontColor:annotationModel.fontColor,fontSize:annotationModel.fontSize,labelContent:annotationModel.labelContent,labelHeight:setting.labelHeight,labelWidth:setting.labelMaxWidth,opacity:annotationModel.opacity};return{// eslint-disable-next-line max-len
id:annotationModel.id,shapeAnnotationType:this.getShapeAnnotType(annotationModel.shapeAnnotationType),type:this.getShapeType(annotationModel.shapeAnnotationType,annotationModel.lineHeadStart,annotationModel.lineHeadEnd),author:annotationModel.author,allowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotationModel),subject:annotationModel.subject,note:annotationModel.notes,strokeColor:annotationModel.strokeColor,annotName:annotationName,comments:[],review:{state:'',stateModel:'',modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:annotationModel.author},fillColor:annotationModel.fillColor,opacity:annotationModel.opacity,thickness:annotationModel.thickness,pageNumber:annotationModel.pageIndex,// eslint-disable-next-line max-len
borderStyle:annotationModel.borderStyle,borderDashArray:borderDashArray,bounds:bound,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:'RotateAngle'+annotationModel.rotateAngle,isCloudShape:annotationModel.isCloudShape,cloudIntensity:annotationModel.cloudIntensity,// eslint-disable-next-line max-len
vertexPoints:annotationModel.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(annotationModel.taregetDecoraterShapes),rectangleDifference:[],isLocked:annotationSettings.isLock,// eslint-disable-next-line max-len
labelContent:annotationModel.labelContent,enableShapeLabel:annotationModel.enableShapeLabel,labelFillColor:annotationModel.labelFillColor,fontColor:annotationModel.fontColor,labelBorderColor:annotationModel.labelBorderColor,fontSize:annotationModel.fontSize,// eslint-disable-next-line max-len
labelBounds:labelBound,annotationSelectorSettings:this.getSelector(annotationModel.shapeAnnotationType,annotationModel.subject),labelSettings:labelSettings,annotationSettings:annotationSettings,customData:this.pdfViewer.annotation.getShapeData(annotationModel.shapeAnnotationType,annotationModel.subject),isPrint:annotationModel.isPrint,isCommentLock:annotationModel.isCommentLock,isAnnotationRotated:false};};ShapeAnnotation.prototype.getSelector=function(type,subject){var selector=this.pdfViewer.annotationSelectorSettings;if(type==='Line'&&subject!=='Arrow'&&this.pdfViewer.lineSettings.annotationSelectorSettings){selector=this.pdfViewer.lineSettings.annotationSelectorSettings;}else if((type==='LineWidthArrowHead'||subject==='Arrow')&&this.pdfViewer.lineSettings.annotationSelectorSettings){selector=this.pdfViewer.arrowSettings.annotationSelectorSettings;}else if((type==='Rectangle'||type==='Square')&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){selector=this.pdfViewer.rectangleSettings.annotationSelectorSettings;}else if((type==='Ellipse'||type==='Circle')&&this.pdfViewer.circleSettings.annotationSelectorSettings){selector=this.pdfViewer.circleSettings.annotationSelectorSettings;}else if(type==='Polygon'&&this.pdfViewer.polygonSettings.annotationSelectorSettings){selector=this.pdfViewer.polygonSettings.annotationSelectorSettings;}return selector;};// eslint-disable-next-line
ShapeAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_shape');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_shape'];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};// eslint-disable-next-line
ShapeAnnotation.prototype.getRgbCode=function(colorString){if(!colorString.match(/#([a-z0-9]+)/gi)&&!colorString.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)){colorString=this.pdfViewer.annotationModule.nameToHash(colorString);}var stringArray=colorString.split(',');if(sf.base.isNullOrUndefined(stringArray[1])){colorString=this.pdfViewer.annotationModule.getValue(colorString,'rgba');stringArray=colorString.split(',');}// eslint-disable-next-line radix
var r=parseInt(stringArray[0].split('(')[1]);// eslint-disable-next-line radix
var g=parseInt(stringArray[1]);// eslint-disable-next-line radix
var b=parseInt(stringArray[2]);// eslint-disable-next-line radix
var a=parseFloat(stringArray[3]);return{r:r,g:g,b:b,a:a};};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.saveImportedShapeAnnotations=function(annotation,pageNumber){var annotationObject=null;var vertexPoints=null;annotation.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor('shape',annotation.Subject);if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);// eslint-disable-next-line max-len
annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:this.pdfViewer.shapeLabelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);// eslint-disable-next-line max-len
annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line max-len
annotationObject={id:'shape',shapeAnnotationType:annotation.ShapeAnnotationType,type:this.getShapeType(annotation.ShapeAnnotationType,annotation.LineHeadStart,annotation.LineHeadEnd),author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,pageNumber:pageNumber,// eslint-disable-next-line max-len
note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,// eslint-disable-next-line max-len
cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},annotName:annotation.AnnotName,bounds:{x:annotation.Bounds.X,y:annotation.Bounds.Y,left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,labelBorderColor:annotation.LabelBorderColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,annotationSelectorSettings:this.getSettings(annotation),labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock,isAnnotationRotated:false};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_shape');};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
ShapeAnnotation.prototype.updateShapeAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;var vertexPoints=null;if(annotation.VertexPoints){vertexPoints=[];for(var j=0;j<annotation.VertexPoints.length;j++){var point={x:annotation.VertexPoints[j].X,y:annotation.VertexPoints[j].Y};vertexPoints.push(point);}}if(annotation.Bounds&&annotation.EnableShapeLabel===true){// eslint-disable-next-line max-len
annotation.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(annotation.Bounds);// eslint-disable-next-line max-len
annotation.LabelBorderColor=annotation.LabelBorderColor?annotation.LabelBorderColor:annotation.StrokeColor;annotation.FontColor=annotation.FontColor?annotation.FontColor:annotation.StrokeColor;annotation.LabelFillColor=annotation.LabelFillColor?annotation.LabelFillColor:annotation.FillColor;annotation.FontSize=annotation.FontSize?annotation.FontSize:16;var settings=this.pdfViewer.shapeLabelSettings;var labelSettings={borderColor:annotation.StrokeColor,fillColor:annotation.FillColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,labelContent:annotation.LabelContent,labelHeight:settings.labelHeight,labelWidth:settings.labelWidth,opacity:annotation.Opacity};annotation.LabelSettings=annotation.LabelSettings?annotation.LabelSettings:labelSettings;}// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);// eslint-disable-next-line max-len
annotationObject={id:'shape',shapeAnnotationType:annotation.ShapeAnnotationType,type:this.getShapeType(annotation.ShapeAnnotationType,annotation.LineHeadStart,annotation.LineHeadEnd),author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,// eslint-disable-next-line max-len
note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,thickness:annotation.Thickness,rectangleDifference:annotation.RectangleDifference,borderStyle:annotation.BorderStyle,borderDashArray:annotation.BorderDashArray,rotateAngle:annotation.RotateAngle,isCloudShape:annotation.IsCloudShape,// eslint-disable-next-line max-len
cloudIntensity:annotation.CloudIntensity,vertexPoints:vertexPoints,lineHeadStart:annotation.LineHeadStart,lineHeadEnd:annotation.LineHeadEnd,isLocked:annotation.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},annotationId:annotation.AnnotName,bounds:{x:annotation.Bounds.X,y:annotation.Bounds.Y,left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},labelContent:annotation.LabelContent,enableShapeLabel:annotation.EnableShapeLabel,labelFillColor:annotation.LabelFillColor,labelBorderColor:annotation.LabelBorderColor,fontColor:annotation.FontColor,fontSize:annotation.FontSize,// eslint-disable-next-line max-len
labelBounds:annotation.LabelBounds,pageNumber:pageNumber,labelSettings:annotation.LabelSettings,annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.IsPrint};return annotationObject;};/**
     * This method used to add annotations with using program.
     *
     * @param annotationType - It describes the annotation type
     * @param annotationObject - It describes type of annotation object
     * @param offset - It describes about the annotation bounds or location
     * @returns Object
     * @private
     */ShapeAnnotation.prototype.updateAddAnnotationDetails=function(annotationType,annotationObject,offset){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:10,y:10},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:10,y:10};else offset=annotationObject.offset;//Initialize the annotation settings
var annotationSelectorSettings=null;var allowedInteractions=null;var annotationSettings=null;var shapeAnnotationType='';var isArrow=false;var vertexPoints=null;//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();if(annotationType=='Line'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings);allowedInteractions=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Line';if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+100,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Arrow'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings);allowedInteractions=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Line';isArrow=true;if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+100,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}else if(annotationType=='Rectangle'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings);allowedInteractions=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Square';annotationObject.width=annotationObject.width?annotationObject.width:150;annotationObject.height=annotationObject.height?annotationObject.height:75;}else if(annotationType=='Circle'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings);allowedInteractions=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Circle';annotationObject.width=annotationObject.width?annotationObject.width:100;annotationObject.height=annotationObject.height?annotationObject.height:90;}else if(annotationType=='Polygon'){//Creating annotation settings
annotationSelectorSettings=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings);allowedInteractions=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;shapeAnnotationType='Polygon';if(annotationObject.vertexPoints)vertexPoints=annotationObject.vertexPoints;else vertexPoints=[{x:offset.x,y:offset.y},{x:offset.x+42,y:offset.y-29},{x:offset.x+89,y:offset.y-1},{x:offset.x+78,y:offset.y+42},{x:offset.x+11,y:offset.y+42},{x:offset.x,y:offset.y}];annotationObject.width=annotationObject.width?annotationObject.width:1;annotationObject.height=annotationObject.height?annotationObject.height:1;}annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationSettings.minHeight=annotationObject.minHeight?annotationObject.minHeight:0;annotationSettings.minWidth=annotationObject.minWidth?annotationObject.minWidth:0;annotationSettings.maxWidth=annotationObject.maxWidth?annotationObject.maxWidth:0;annotationSettings.maxHeight=annotationObject.maxHeight?annotationObject.maxHeight:0;//Converting points model into vertex property
if(vertexPoints)vertexPoints=this.pdfViewer.annotation.getVertexPointsXY(vertexPoints);//Creating Annotation objects with it's proper properties
var shapeAnnotation=[];var shape={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'shape',AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Author:annotationObject.author?annotationObject.author:'Guest',BorderDashArray:annotationObject.borderDashArray?annotationObject.borderDashArray:0,BorderStyle:'Solid',Bounds:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:annotationObject.height,IsEmpty:false,Width:annotationObject.width}},CloudIntensity:0,Comments:null,CustomData:annotationObject.customData?annotationObject.customData:null,CreatedDate:currentDateString,EnableShapeLabel:false,ExistingCustomData:null,FillColor:annotationObject.fillColor?annotationObject.fillColor:'#ffffff00',FontColor:null,FontSize:0,IsCloudShape:false,IsCommentLock:false,IsLocked:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LineHeadEnd:annotationObject.lineHeadStartStyle?annotationObject.lineHeadStartStyle:isArrow?'ClosedArrow':'None',LineHeadStart:annotationObject.lineHeadEndStyle?annotationObject.lineHeadEndStyle:isArrow?'ClosedArrow':'None',ModifiedDate:'',Note:'',Opacity:annotationObject.opacity?annotationObject.opacity:1,RectangleDifference:null,RotateAngle:'RotateAngle0',ShapeAnnotationType:shapeAnnotationType,State:'',StateModel:'',StrokeColor:annotationObject.strokeColor?annotationObject.strokeColor:'#ff0000',Subject:annotationType.toString(),Thickness:annotationObject.thickness?annotationObject.thickness:1,VertexPoints:vertexPoints};//Adding the annotation object to an array and return it
shapeAnnotation[0]=shape;return{shapeAnnotation:shapeAnnotation};};return ShapeAnnotation;}();/**
 * The `StampAnnotation` module is used to handle annotation actions of PDF viewer.
 *
 * @hidden
 */var StampAnnotation=/** @class */function(){function StampAnnotation(pdfviewer,pdfViewerBase){/**
         * @private
         */this.isStampAddMode=false;/**
         * @private
         */ // eslint-disable-next-line
this.stampPageNumber=[];/**
         * @private
         */this.isAddAnnotationProgramatically=false;/**
         * @private
         */this.customStampName=null;this.dynamicText='';this.pdfViewer=pdfviewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param stampAnnotations
     * @param pageNumber
     * @param canvass
     * @param isImport
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.renderStampAnnotations=function(stampAnnotations,pageNumber,canvass,isImport){var isStampAdded=false;for(var p=0;p<this.stampPageNumber.length;p++){if(this.stampPageNumber[p]===pageNumber){isStampAdded=true;break;}}if(isImport){isStampAdded=false;}if(stampAnnotations&&!isStampAdded){this.stampPageNumber.push(pageNumber);for(var s=0;s<stampAnnotations.length;s++){// eslint-disable-next-line
var annotation=stampAnnotations[s];annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);// eslint-disable-next-line
var Apperance=annotation['Apperarance'];// eslint-disable-next-line
var position=annotation['Rect'];// eslint-disable-next-line
var opacity=annotation['Opacity'];// eslint-disable-next-line
var annotationSelectorSettings=annotation["AnnotationSelectorSettings"];// eslint-disable-next-line
var pageIndex=parseFloat(stampAnnotations[s]['pageNumber']);/* eslint-disable */if(isNaN(pageIndex)){pageIndex=stampAnnotations[s]['PageNumber'];}// eslint-disable-next-line
var stampName=annotation['IsDynamic'];var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);// eslint-disable-next-line
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);// eslint-disable-next-line
var isImageStamp=this.stampImageData(annotation);if(stampName&&annotation['Subject']&&annotation['Subject']!=='Draft'&&!isImageStamp){// eslint-disable-next-line
this.retrieveDynamicStampAnnotation(annotation['Subject']);this.isExistingStamp=true;var currentLocation=this.calculateImagePosition(position,true);// eslint-disable-next-line
var rotation=annotation['RotateAngle'];for(var d=0;d<Apperance.length;d++){// eslint-disable-next-line
var stampShapes=Apperance[d];// eslint-disable-next-line
var stampType=stampShapes['type'];// eslint-disable-next-line
if(stampType==='string'&&stampShapes['text']!==undefined){// eslint-disable-next-line
var text=void 0;if(!isImport){// eslint-disable-next-line
text=stampShapes['text'].split('(')[1].split(')')[0];}else{// eslint-disable-next-line
text=stampShapes['text'];}if(text.split('(').length===2){if(text.split('(')[1].split(')')[0].toLowerCase()!==annotation['Subject'].toLowerCase()){this.dynamicText+=text.split('(')[1].split(')')[0];}}else if(text.toLowerCase()!==annotation['Subject'].toLowerCase()){this.dynamicText+=text;}}}// eslint-disable-next-line max-len
this.renderStamp(currentLocation.left,currentLocation.top,currentLocation.width,currentLocation.height,pageIndex,opacity,rotation,canvass,annotation,true);}// eslint-disable-next-line
else if(annotation['Subject']&&!isImageStamp){// eslint-disable-next-line
this.retrievestampAnnotation(annotation['Subject']);this.isExistingStamp=true;var currentLocation=this.calculateImagePosition(position,true);// eslint-disable-next-line
var rotation=annotation['RotateAngle'];// eslint-disable-next-line max-len
this.renderStamp(currentLocation.left,currentLocation.top,currentLocation.width,currentLocation.height,pageIndex,opacity,rotation,canvass,annotation);this.isExistingStamp=false;}else{if(Apperance){for(var j=0;j<Apperance.length;j++){// eslint-disable-next-line
var stampShapes=Apperance[j];// eslint-disable-next-line
var imageData=stampShapes['imagedata'];// eslint-disable-next-line
var matrix=stampShapes['matrix'];// eslint-disable-next-line
var currentDate=stampShapes['CreationDate'];// eslint-disable-next-line
var modifiedDate=stampShapes['ModifiedDate'];// eslint-disable-next-line
var rotationAngle=stampShapes['RotateAngle'];if(imageData){var image=void 0;if(window.customStampCollection&&window.customStampCollection.get(annotation.AnnotName)){image=window.customStampCollection.get(annotation.AnnotName);}else{image=new Image();image.src=imageData;}// eslint-disable-next-line
var proxy=this;if(image.complete){this.customStampLoad(this,position,annotation,pageIndex,image,currentDate,modifiedDate,rotationAngle,opacity,canvass);}else{proxy.customStampLoad(proxy,position,annotation,pageIndex,image,currentDate,modifiedDate,rotationAngle,opacity,canvass);}}}}}}}};/**
     * @private
     */StampAnnotation.prototype.customStampLoad=function(proxy,position,annotation,pageIndex,image,currentDate,modifiedDate,rotationAngle,opacity,canvass){if(position){var y=parseFloat(position.y?position.y:position.Y);if(y<0){position.Y=(proxy.pdfViewerBase.pageSize[pageIndex].height+y)*(72/96);}}var currentLocation=proxy.calculateImagePosition(position,true);// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:proxy.pdfViewer.customStampSettings.annotationSettings;// eslint-disable-next-line max-len
proxy.renderCustomImage(currentLocation,pageIndex,image,currentDate,modifiedDate,rotationAngle,opacity,canvass,true,annotation);};/**
     * @private
     */StampAnnotation.prototype.moveStampElement=function(X,Y,pageIndex){var zoomFactor=this.pdfViewerBase.getZoomFactor();X=X/zoomFactor;Y=Y/zoomFactor;// eslint-disable-next-line max-len
var author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';if(this.pdfViewerBase.isDynamicStamp){if(this.pdfViewer.dateTimeFormat){var dateTime=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
this.dynamicText='By '+author+' at '+dateTime+' ';}else{// eslint-disable-next-line
var today=new Date().toString().split(' ').splice(1,3).join(' ');// eslint-disable-next-line
var time=new Date().toLocaleTimeString();this.dynamicText='By '+author+' at '+time+' , '+today+'   ';}}var annot;// eslint-disable-next-line
var annotation=this.currentStampAnnotation;if(annotation&&annotation.shapeAnnotationType==='Image'){annot={// eslint-disable-next-line max-len
id:'stamp'+this.pdfViewerBase.customStampCount,bounds:{x:X,y:Y,width:annotation.bounds.width,height:annotation.bounds.height},pageIndex:pageIndex,data:annotation.data,modifiedDate:annotation.modifiedDate,shapeAnnotationType:'Image',opacity:annotation.opacity,rotateAngle:annotation.RotationAngle,annotName:annotation.annotationName?annotation.annotationName:annotation.annotName,comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:annotation.author}};}else if(annotation){annot={// eslint-disable-next-line max-len
id:'stamp'+this.pdfViewerBase.customStampCount,bounds:{x:X,y:Y,width:annotation.width,height:annotation.height},pageIndex:pageIndex,data:annotation.pathdata,// eslint-disable-next-line max-len
shapeAnnotationType:'Stamp',strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:0.5,stampFillColor:annotation.stampFillColor,stampStrokeColor:annotation.stampStrokeColor,rotateAngle:annotation.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,subject:annotation.iconName,annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings};}if(this.pdfViewerBase.currentSignatureAnnot){annotation=this.pdfViewerBase.currentSignatureAnnot;if(annotation.shapeAnnotationType==='SignatureText'){annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:X,y:Y,width:annotation.bounds.width,height:annotation.bounds.height},pageIndex:pageIndex,data:annotation.data,modifiedDate:'',shapeAnnotationType:'SignatureText',thickness:annotation.thickness,strokeColor:annotation.strokeColor,opacity:annotation.opacity,signatureName:annotation.signatureName,fontFamily:annotation.fontFamily,fontSize:annotation.bounds.height/2};}else if(annotation.shapeAnnotationType==='SignatureImage'){annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:X,y:Y,width:annotation.bounds.width,height:annotation.bounds.height},pageIndex:pageIndex,data:annotation.data,modifiedDate:'',shapeAnnotationType:'SignatureImage',thickness:annotation.thickness,strokeColor:annotation.strokeColor,opacity:annotation.opacity,signatureName:annotation.signatureName};}else{annot={// eslint-disable-next-line max-len
id:'sign'+this.pdfViewerBase.signatureCount,bounds:{x:X,y:Y,width:annotation.bounds.width,height:annotation.bounds.height},pageIndex:pageIndex,data:annotation.data,// eslint-disable-next-line max-len
shapeAnnotationType:'HandWrittenSignature',thickness:annotation.thickness,strokeColor:annotation.strokeColor,opacity:annotation.opacity,signatureName:annotation.signatureName};}}return annot;};// eslint-disable-next-line
StampAnnotation.prototype.ConvertPointToPixel=function(number){return number*(96/72);};// eslint-disable-next-line
StampAnnotation.prototype.calculateImagePosition=function(position,flags){var positions={width:0,height:0,left:0,top:0};var x=parseFloat(position.x?position.x:position.X);var y=parseFloat(position.y?position.y:position.Y);var newWidth=parseFloat(position.width?position.width:position.Width);var newHeight=parseFloat(position.height?position.height:position.Height);if(flags){var width=this.ConvertPointToPixel(newWidth);var height=this.ConvertPointToPixel(newHeight);var left=this.ConvertPointToPixel(x);var top_1=this.ConvertPointToPixel(y);positions={width:width,height:height,left:left,top:top_1};}else{positions={width:newWidth,height:newHeight,left:x,top:y};}return positions;};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.createCustomStampAnnotation=function(imageSource,annotName){var _this=this;var isStampInitialRender=this.pdfViewerBase.stampAdded;var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var image=new Image();// eslint-disable-next-line
var proxy=this;image.onload=function(){var zoomFactor=_this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line max-len
var customStampWidth=_this.pdfViewer.customStampSettings.width>0?_this.pdfViewer.customStampSettings.width:100;var customStampHeight=_this.pdfViewer.customStampSettings.height>0?_this.pdfViewer.customStampSettings.height:100;var customStampleft=0;var customStamptop=0;// eslint-disable-next-line max-len
if(_this.pdfViewer.customStampSettings.left>0&&_this.pdfViewer.customStampSettings.left<parseFloat(pageDiv.style.width)){customStampleft=_this.pdfViewer.customStampSettings.left;}else{customStampleft=(parseFloat(pageDiv.style.width)/2-customStampWidth/2)/zoomFactor;}// eslint-disable-next-line max-len
if(_this.pdfViewer.customStampSettings.top>0&&_this.pdfViewer.customStampSettings.top<parseFloat(pageDiv.style.height)){customStamptop=_this.pdfViewer.customStampSettings.top;}else{customStamptop=(parseFloat(pageDiv.style.height)/2-customStampHeight/2)/zoomFactor;}// eslint-disable-next-line max-len
var positions={width:customStampWidth,height:customStampHeight,left:customStampleft,top:customStamptop};// eslint-disable-next-line
var currentDate=new Date().toLocaleDateString();// eslint-disable-next-line
var modifiedDate=_this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var rotationAngle=0;proxy.renderCustomImage(positions,pageIndex,image,currentDate,modifiedDate,rotationAngle,1,null,null,null,annotName,isStampInitialRender);};image.src=imageSource;};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.renderStamp=function(X,Y,width,height,pageIndex,opacity,rotation,canvass,existingAnnotation,isDynamic){if(sf.base.Browser.isDevice){this.pdfViewerBase.customStampCount+=1;}// eslint-disable-next-line max-len
var author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';if(this.pdfViewerBase.isDynamicStamp){// eslint-disable-next-line
var today=new Date().toString().split(' ').splice(1,3).join(' ');// eslint-disable-next-line
var time=new Date().toLocaleTimeString();this.dynamicText='By '+author+' at '+time+' , '+today+' ';}if(isDynamic){this.dynamicText+=' ';this.pdfViewerBase.isDynamicStamp=true;}var annot;var annotationObject=null;// eslint:disable-next-line
var annotationAddMode=existingAnnotation?existingAnnotation.annotationAddMode:'UI Drawn Annotation';// eslint-disable-next-line
var annotation=this.currentStampAnnotation;if(annotation){if(width!==null&&height!==null){annotation.width=width;annotation.height=height;annotation.Opacity=opacity;annotation.RotateAngle=rotation;// eslint-disable-next-line
var annotationName=existingAnnotation['AnnotName'];annotation.AnnotName=annotationName;// eslint-disable-next-line
var state=existingAnnotation['State'];annotation.State=state;// eslint-disable-next-line
var annotationSettings=existingAnnotation["AnnotationSettings"];// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotationSettings?annotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);// eslint-disable-next-line
var annotationSelectorSettings=existingAnnotation['AnnotationSelectorSettings'];// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotationSelectorSettings?annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line
var modifiedDate=existingAnnotation['ModifiedDate'];annotation.ModifiedDate=modifiedDate;// eslint-disable-next-line
var stateModel=existingAnnotation['StateNodel'];annotation.StateModel=stateModel;// eslint-disable-next-line
var lock=existingAnnotation['IsCommentLock'];annotation.IsCommentLock=lock;// eslint-disable-next-line
var text=existingAnnotation['Note'];annotation.Note=text;// eslint-disable-next-line
var author_1=existingAnnotation['Author'];annotation.Author=author_1;// eslint-disable-next-line
var subject=existingAnnotation['Subject'];annotation.Subject=subject;// eslint-disable-next-line
var customData=this.pdfViewer.annotation.getCustomData(existingAnnotation);// eslint-disable-next-line
annotation.allowedInteractions=existingAnnotation['AllowedInteractions']?existingAnnotation['AllowedInteractions']:existingAnnotation['allowedInteractions']?existingAnnotation['allowedInteractions']:['None'];annotation.CustomData=customData;// eslint-disable-next-line
var isPrint=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint=existingAnnotation['IsPrint'];}else{isPrint=existingAnnotation.AnnotationSettings.isPrint;}annotation.isPrint=isPrint;if(annotation.Author===null){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';}// eslint-disable-next-line
var annotationComments=existingAnnotation['Comments'];annotation.Comments=this.pdfViewer.annotationModule.getAnnotationComments(annotationComments,existingAnnotation,author_1);}else{var annotationName=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('stamp',pageIndex+1,'',annotationName,'',annotation.author);annotation.AnnotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);annotation.AnnotName=annotationName;annotation.Comments=[];annotation.State='';annotation.StateModel='';annotation.Note='';annotation.Opacity=1;annotation.RotateAngle=0;annotation.ModifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';}// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(annotation.pathdata);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);// eslint:disable-next-line
var annotationAddMode_1=existingAnnotation?existingAnnotation.annotationAddMode:'UI Drawn Annotation';// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annot={// eslint-disable-next-line max-len
id:'stamp'+this.pdfViewerBase.customStampCount,bounds:{x:X,y:Y,width:annotation.width,height:annotation.height},pageIndex:pageIndex,data:annotation.pathdata,modifiedDate:annotation.ModifiedDate,// eslint-disable-next-line max-len
shapeAnnotationType:'Stamp',type:'Stamp',strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:annotation.Opacity,stampFillColor:annotation.stampFillColor,stampStrokeColor:annotation.stampStrokeColor,rotateAngle:annotation.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotName:annotation.AnnotName,notes:annotation.Note,comments:annotation.Comments,review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},subject:annotation.iconName,// eslint-disable-next-line
annotationSelectorSettings:annotation.AnnotationSelectorSettings,annotationSettings:annotation.AnnotationSettings,allowedInteractions:annotation.allowedInteractions,annotationAddMode:annotationAddMode_1,isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock};annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'path',author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,type:'Stamp',strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:annotation.Opacity,stampFillcolor:annotation.stampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,creationDate:annotation.creationDate,pageNumber:pageIndex,icon:annotation.iconName,stampAnnotationPath:csData,randomId:'stamp'+this.pdfViewerBase.customStampCount,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{x:X,y:Y,left:X,top:Y,width:annotation.width,height:annotation.height},annotName:annotation.AnnotName,comments:annotation.Comments,review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),allowedInteractions:annotation.allowedInteractions,isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock,isMaskedImage:annotation.IsMaskedImage,customStampName:''};this.storeStampInSession(pageIndex,annotationObject);if(this.isAddAnnotationProgramatically){this.triggerAnnotationAdd(annot,annotation);}this.pdfViewer.add(annot);// eslint-disable-next-line
if(canvass!=undefined&&canvass!=null){canvass=canvass;}else{canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);}// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,pageIndex);if(this.pdfViewerBase.stampAdded){this.triggerAnnotationAdd(annot,annotation);this.pdfViewerBase.isNewStamp=true;this.pdfViewer.annotation.addAction(pageIndex,null,annot,'Addition','',annot,annot);}this.pdfViewerBase.stampAdded=false;if(!this.isExistingStamp){annotation.creationDate=new Date().toLocaleDateString();// eslint-disable-next-line max-len
annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}}this.resetAnnotation();};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else if(this.pdfViewer.stampSettings.annotationSelectorSettings){selector=this.pdfViewer.stampSettings.annotationSelectorSettings;}return selector;};/**
     * @private
     */StampAnnotation.prototype.resetAnnotation=function(){this.pdfViewerBase.isDynamicStamp=false;this.dynamicText='';this.currentStampAnnotation=null;if(!sf.base.Browser.isDevice){this.pdfViewerBase.customStampCount+=1;}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.updateDeleteItems=function(pageNumber,annotation,opacity){this.pdfViewerBase.updateDocumentEditedProperty(true);var annotationObject=null;var isStampSaved=false;annotation.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();// eslint-disable-next-line max-len
annotation.author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:'Guest';if(opacity){var annotationName=annotation.annotName?annotation.annotName:this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('stamp',pageNumber+1,'',annotationName,'',annotation.author);annotation.annotName=annotationName;annotation.Comments=[];annotation.State='';annotation.StateModel='';annotation.Note='';annotation.Opacity=1;annotation.RotateAngle=0;}if(annotation.shapeAnnotationType==='Stamp'){annotation.isPrint=this.pdfViewer.stampSettings.isPrint;}// eslint-disable-next-line
var annotationSelectorSettings=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if(annotation.shapeAnnotationType==='Image'){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:'Guest';annotation.isPrint=this.pdfViewer.customStampSettings.isPrint;var undoCollection=this.pdfViewer.annotationModule.undoCommentsElement;if(!this.customStampName){for(var i=0;i<undoCollection.length;i++){if(annotation.annotName===undoCollection[i].annotName){this.customStampName=undoCollection[i].customStampName;}}}annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'image',author:annotation.author,modifiedDate:annotation.modifiedDate,subject:'',note:'',strokeColor:'',fillColor:'',opacity:opacity,// eslint-disable-next-line max-len
rotateAngle:'0',creationDate:annotation.currentDate,pageNumber:pageNumber,icon:'',stampAnnotationPath:annotation.data,randomId:'stamp'+this.pdfViewerBase.customStampCount,// eslint-disable-next-line max-len
bounds:{x:annotation.bounds.x,y:annotation.bounds.y,left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height},stampFillcolor:'',isDynamicStamp:false,annotName:annotation.annotName,comments:[],review:{state:'',stateModel:'',author:annotation.author,modifiedDate:annotation.modifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
type:'Image',annotationSelectorSettings:annotationSelectorSettings,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),customData:this.pdfViewer.annotationModule.getData('image'),isPrint:annotation.isPrint,allowedInteractions:allowedInteractions,isCommentLock:false,isMaskedImage:annotation.isMaskedImage,customStampName:this.customStampName};}else if(annotation.stampAnnotationType){annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:annotation.stampAnnotationType,author:annotation.author,modifiedDate:annotation.modifiedDate,subject:annotation.Subject?annotation.Subject:annotation.subject,note:annotation.Note?annotation.Note:annotation.note,strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:annotation.opacity,stampFillcolor:annotation.stampFillcolor,// eslint-disable-next-line max-len
rotateAngle:annotation.rotateAngle,creationDate:annotation.creationDate,pageNumber:annotation.pageNumber,icon:annotation.icon,stampAnnotationPath:annotation.stampAnnotationPath,randomId:annotation.randomId,isDynamicStamp:annotation.isDynamicStamp,dynamicText:annotation.dynamicText,bounds:{x:annotation.bounds.left,y:annotation.bounds.top,left:annotation.bounds.left,top:annotation.bounds.top,width:annotation.bounds.width,height:annotation.bounds.height},annotName:annotation.annotName,comments:annotation.Comments?annotation.Comments:annotation.comments,review:{state:annotation.State?annotation.State:annotation.review.state,stateModel:annotation.StateModel?annotation.StateModel:annotation.review.stateModel,author:annotation.author?annotation.author:annotation.review.author,modifiedDate:annotation.ModifiedDate?annotation.ModifiedDate:annotation.review.modifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
type:'Stamp',annotationSelectorSettings:annotationSelectorSettings,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(annotation.stampAnnotationType),isPrint:annotation.isPrint,allowedInteractions:allowedInteractions,isCommentLock:annotation.isCommentLock,isMaskedImage:annotation.isMaskedImage,customStampName:''};}else{annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:annotation.shapeAnnotationType,author:annotation.author,modifiedDate:annotation.modifiedDate,subject:annotation.subject,note:annotation.notes,strokeColor:annotation.strokeColor,fillColor:annotation.fillColor,opacity:annotation.opacity,stampFillcolor:annotation.stampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.rotateAngle,creationDate:annotation.creationDate,pageNumber:annotation.pageIndex,icon:annotation.subject,stampAnnotationPath:annotation.data,randomId:annotation.id,isDynamicStamp:annotation.isDynamicStamp,dynamicText:annotation.dynamicText,shapeAnnotationType:'stamp',type:'Stamp',bounds:{x:annotation.bounds.x,y:annotation.bounds.y,left:annotation.bounds.x,top:annotation.bounds.y,width:annotation.bounds.width,height:annotation.bounds.height},annotName:annotation.annotName,comments:annotation.Comments,review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.author,modifiedDate:annotation.ModifiedDate},// eslint-disable-next-line max-len
annotationSelectorSettings:annotationSelectorSettings,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(annotation.shapeAnnotationType),isPrint:annotation.isPrint,allowedInteractions:allowedInteractions,isCommentLock:annotation.isCommentLock,isMaskedImage:annotation.isMaskedImage,customStampName:''};}if(opacity){if(annotation.shapeAnnotationType!=='Image'){// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(annotation.data);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);annotationObject.stampAnnotationPath=csData;}annotation.creationDate=new Date().toLocaleDateString();if(!sf.base.Browser.isDevice){annotationObject.bounds.width=annotation.wrapper.actualSize.width;annotationObject.bounds.height=annotation.wrapper.actualSize.height;annotationObject.bounds.left=annotation.wrapper.bounds.x;annotationObject.bounds.top=annotation.wrapper.bounds.y;annotationObject.bounds.x=annotation.wrapper.bounds.x;annotationObject.bounds.y=annotation.wrapper.bounds.y;}annotationObject.opacity=opacity;if(this.pdfViewerBase.stampAdded){this.storeStampInSession(pageNumber,annotationObject);isStampSaved=true;// eslint-disable-next-line
var bounds={left:annotationObject.bounds.left,top:annotationObject.bounds.top,width:annotationObject.bounds.width,height:annotationObject.bounds.height};this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line max-len
// eslint-disable-next-line
var settings={opacity:annotationObject.opacity,author:annotationObject.author,modifiedDate:annotationObject.modifiedDate};this.pdfViewerBase.stampAdded=false;if(annotation.shapeAnnotationType==='Image'){this.pdfViewer.fireAnnotationAdd(annotationObject.pageNumber,annotationObject.annotName,'Image',bounds,settings,null,null,null,null,null,this.customStampName);this.customStampName=null;}else{this.pdfViewer.fireAnnotationAdd(annotationObject.pageNumber,annotationObject.annotName,'Stamp',bounds,settings);}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageNumber,null,annotation,'Addition','',annotation,annotationObject);}}if(!isStampSaved){this.storeStampInSession(pageNumber,annotationObject);}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.renderCustomImage=function(position,pageIndex,image,currentDate,modifiedDate,RotationAngle,opacity,canvas,isExistingStamp,annotation,annotName,isStampInitialRender){var annot;var annotationObject=null;var annotationName;var author;var annotationId;var isCommentsLock;// eslint-disable-next-line
var isCustomStamp=this.pdfViewer.customStampSettings.left>0&&this.pdfViewer.customStampSettings.top>0?true:false;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings);// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if(sf.base.Browser.isDevice){this.pdfViewerBase.customStampCount+=1;}if(isExistingStamp){annotationName=annotation.AnnotName;author=annotation.Author;isCommentsLock=annotation.IsCommentLock;// eslint-disable-next-line max-len
annotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings);// eslint-disable-next-line max-len
allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);if(author===null){// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:'Guest';}}else{annotationName=this.pdfViewer.annotation.createGUID();// eslint-disable-next-line max-len
author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:'Guest';isCommentsLock=false;}if(!modifiedDate){modifiedDate=annotation.ModifiedDate?annotation.ModifiedDate:new Date().toLocaleString();}var annotationAddMode=annotation?annotation.annotationAddMode:'UI Drawn Annotation ';var isPrint=true;if(!isExistingStamp){isPrint=this.pdfViewer.customStampSettings.isPrint;}else{if(annotation.annotationAddMode==='Imported Annotation'){isPrint=annotation.IsPrint;}else{isPrint=annotation.AnnotationSettings.isPrint;}}annot={// eslint-disable-next-line max-len
id:'stamp'+this.pdfViewerBase.customStampCount,allowedInteractions:allowedInteractions,bounds:{x:position.left,y:position.top,width:position.width,height:position.height},pageIndex:pageIndex,data:isStampInitialRender?image.src:'',modifiedDate:modifiedDate,shapeAnnotationType:'Image',type:'Image',opacity:opacity,rotateAngle:RotationAngle,annotName:annotationName,comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:author},// eslint-disable-next-line max-len
annotationSettings:annotationSettings,annotationAddMode:annotationAddMode,signatureName:annotName,isPrint:isPrint,isCommentLock:isCommentsLock};this.currentStampAnnotation=annot;// eslint-disable-next-line
var annotationSelectorSettings=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;if(isExistingStamp||isCustomStamp){if(!annotation){this.isStampAnnotSelected=false;annotation=annot;// eslint-disable-next-line
annotation.Note='';// eslint-disable-next-line
annotation.State='';// eslint-disable-next-line
annotation.StateModel='';this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('stamp',pageIndex+1,'',annotationName,'',author);}annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'image',type:'Image',author:author,allowedInteractions:allowedInteractions,modifiedDate:modifiedDate,subject:'',note:annotation.Note,strokeColor:'',fillColor:'',opacity:opacity,// eslint-disable-next-line max-len
rotateAngle:'0',creationDate:currentDate,pageNumber:pageIndex,icon:'',stampAnnotationPath:isStampInitialRender?image.src:'',randomId:'stamp'+this.pdfViewerBase.customStampCount,// eslint-disable-next-line max-len
bounds:{x:position.left,y:position.top,left:position.left,top:position.top,width:position.width,height:position.height},stampFillcolor:'',isDynamicStamp:false,annotName:annotationName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:author,modifiedDate:modifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:annotationSelectorSettings,annotationSettings:annotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:isPrint,isCommentLock:isCommentsLock,isMaskedImage:annotation.IsMaskedImage,customStampName:annotation.CustomStampName};annot.comments=this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author);annot.review={state:annotation.State,stateModel:annotation.StateModel,author:author,modifiedDate:modifiedDate};if(this.isAddAnnotationProgramatically){// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:annotation.id;this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'Image',annot.bounds,settings,null,null,null,null,null,this.customStampName);this.customStampName=null;}this.pdfViewer.add(annot);// eslint-disable-next-line
if(canvas!=undefined&&canvas!=null){canvas=canvas;}else{canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);}// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvas,pageIndex);if(this.pdfViewerBase.stampAdded){// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,annot,'Addition','',annot,annot);}}if(!sf.base.Browser.isDevice){this.pdfViewerBase.customStampCount+=1;}var proxy=this;if(annotation){annotationId=annotation.AnnotName;image.setAttribute("annotationId",annotationId);}image.onload=function(){var objects=proxy.pdfViewer.drawing.getPageObjects(pageIndex);var imageSrc=image.src;if(objects&&objects.length>0){for(var i=0;i<objects.length;i++){if(objects[i].annotName==annotationId){var nameTableObject=proxy.pdfViewer.nameTable[objects[i].id];if(nameTableObject!==null&&nameTableObject.shapeAnnotationType==="Image"){var customImageId=image.getAttribute("annotationId");if(customImageId===nameTableObject.annotName){var wrapperChildren=nameTableObject.wrapper.children[0];if(wrapperChildren!==null){wrapperChildren.source=wrapperChildren.source===''?imageSrc:wrapperChildren.source;wrapperChildren.imageSource=wrapperChildren.imageSource===''?imageSrc:wrapperChildren.imageSource;}annotationObject.stampAnnotationPath=annotationObject.stampAnnotationPath===''?imageSrc:annotationObject.stampAnnotationPath;}proxy.storeStampInSession(pageIndex,annotationObject);proxy.pdfViewer.renderDrawing(canvas,pageIndex);}}}}};};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.retrieveDynamicStampAnnotation=function(icontype){var stampCollection;if(icontype){switch(icontype.trim()){case'Revised':{stampCollection={iconName:'Revised',// eslint-disable-next-line max-len
pathdata:'M19.68,21.22a3.94,3.94,0,0,1-1.1-1.9L16,11.87l-.21-.64a20.77,20.77,0,0,0,2.11-.58,7.24,7.24,0,0,0,2-1.09,5.65,5.65,0,0,0,1.72-2.12,5.4,5.4,0,0,0,.52-2.2A4.15,4.15,0,0,0,19.1,1.05a14.58,14.58,0,0,0-4.72-.6H5.31v.86a7,7,0,0,1,2,.33c.3.14.45.48.45,1a6.1,6.1,0,0,1-.14,1.08l-.21.8L3.31,19.32a3.35,3.35,0,0,1-.94,1.78,3.58,3.58,0,0,1-1.74.57v.86h9.83v-.86a6.22,6.22,0,0,1-2-.35c-.29-.15-.43-.52-.43-1.11,0-.1,0-.21,0-.31a2.36,2.36,0,0,1,0-.28l.28-1.14,1.95-6.86h.93l3.56,10.91h6.25v-.88A3.05,3.05,0,0,1,19.68,21.22ZM13.29,10.31a14,14,0,0,1-2.63.23l2-7.56a2.67,2.67,0,0,1,.52-1.17,1.4,1.4,0,0,1,1-.3,2.74,2.74,0,0,1,2.33.91,3.72,3.72,0,0,1,.69,2.3,6.4,6.4,0,0,1-.49,2.52,6.72,6.72,0,0,1-1.06,1.82A4.11,4.11,0,0,1,13.29,10.31ZM26,.45H43.74l-1.4,6.27-.88-.15a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.11-1.69a2.9,2.9,0,0,0-1.68.32A2.34,2.34,0,0,0,33.26,3l-1.95,7.33a13.55,13.55,0,0,0,4.48-.56c.68-.32,1.44-1.3,2.27-2.92l.91.11-2.44,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4A7.57,7.57,0,0,0,31,11.38l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.85,9.85,0,0,0,40.73,16l.81.14-1.95,6.42h-18v-.9a3.43,3.43,0,0,0,1.42-.53A3.42,3.42,0,0,0,24,19.32L28,4.51c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.15-.91-.44-1.06a6.85,6.85,0,0,0-2-.34ZM63.4,3.37,51,23.15H49.9L47.39,6.34a17.25,17.25,0,0,0-.93-4.24c-.25-.43-.93-.7-2.05-.79V.45h9.86v.86a5.47,5.47,0,0,0-1.72.19,1.14,1.14,0,0,0-.81,1.16,3,3,0,0,0,0,.31l0,.32L53.5,16.43l6.24-9.85c.49-.79.94-1.57,1.33-2.36a4.45,4.45,0,0,0,.6-1.85.88.88,0,0,0-.61-.9,6.11,6.11,0,0,0-1.52-.16V.45h6.34v.86a3.88,3.88,0,0,0-1.16.5A5.73,5.73,0,0,0,63.4,3.37ZM70.08,20c0,.11,0,.22,0,.31,0,.56.15.91.45,1.06a6.39,6.39,0,0,0,1.95.35v.86H62.63v-.86a3.58,3.58,0,0,0,1.74-.57,3.35,3.35,0,0,0,.94-1.78l4-14.81q.18-.63.27-1a3.78,3.78,0,0,0,.09-.75c0-.56-.16-.91-.47-1.06a7,7,0,0,0-2-.34V.45h9.83v.86a3.61,3.61,0,0,0-1.75.58,3.37,3.37,0,0,0-.91,1.78L70.4,18.48l-.26,1.14Zm19.26-7.23a6.37,6.37,0,0,1,1.07,3.62,6.58,6.58,0,0,1-2.06,4.71,7.54,7.54,0,0,1-5.65,2.1A10.15,10.15,0,0,1,80.89,23a11.42,11.42,0,0,1-1.8-.49l-.83-.3-.58-.2a2,2,0,0,0-.38,0,1,1,0,0,0-.78.26,3.89,3.89,0,0,0-.52.92H75l1.19-7.4,1,.07a14.63,14.63,0,0,0,.28,2.3,5.27,5.27,0,0,0,2.79,3.44,4.73,4.73,0,0,0,2.06.44,3.85,3.85,0,0,0,3.07-1.26,4.39,4.39,0,0,0,1.09-2.94q0-2.09-4.05-5.25c-2.7-2.22-4-4.26-4-6.14a6.31,6.31,0,0,1,1.78-4.53,6.51,6.51,0,0,1,5-1.87,9.67,9.67,0,0,1,1.82.18A6.54,6.54,0,0,1,88,.45l.84.28.56.13a2.59,2.59,0,0,0,.52.06,1.4,1.4,0,0,0,.88-.24,2.2,2.2,0,0,0,.53-.6h1L91,6.69l-.85-.12L90,5.49a6,6,0,0,0-1-2.62,3.82,3.82,0,0,0-3.38-1.73A3,3,0,0,0,82.9,2.53a3.6,3.6,0,0,0-.58,2,3.44,3.44,0,0,0,.59,2,6,6,0,0,0,1,1l2.85,2.33A12.75,12.75,0,0,1,89.34,12.72ZM110.27,16l.81.14-2,6.42H90.85v-.86a3.66,3.66,0,0,0,1.74-.57,3.42,3.42,0,0,0,.93-1.78l4-14.81c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.14-.91-.44-1.06a6.85,6.85,0,0,0-2-.34V.45h17.77l-1.4,6.27L111,6.57a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.1-1.69a2.92,2.92,0,0,0-1.69.32A2.34,2.34,0,0,0,102.8,3l-2,7.33a13.55,13.55,0,0,0,4.48-.56c.69-.32,1.44-1.3,2.27-2.92l.92.11-2.45,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4,7.57,7.57,0,0,0-3.79-.64l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.81,9.81,0,0,0,110.27,16Zm22.65-13Q130.39.45,125.52.45h-9.58v.86a7,7,0,0,1,2,.34c.31.15.47.5.47,1.06a3.61,3.61,0,0,1-.09.74c-.06.29-.15.64-.26,1.06L114,19.31a3.18,3.18,0,0,1-1.15,1.91,3.57,3.57,0,0,1-1.53.45v.86h9.47a14.87,14.87,0,0,0,10.95-4.14,12,12,0,0,0,3.75-8.77A8.94,8.94,0,0,0,132.92,2.94ZM129,15.36q-2.62,6.06-8.52,6.05a2.46,2.46,0,0,1-1.42-.29,1.05,1.05,0,0,1-.4-.93,2.24,2.24,0,0,1,0-.34,2.65,2.65,0,0,1,.08-.43l4.55-16.67a2,2,0,0,1,.54-.92,2.2,2.2,0,0,1,1.44-.35,4.74,4.74,0,0,1,4.47,2.22,7.9,7.9,0,0,1,.83,3.9A19.32,19.32,0,0,1,129,15.36Z',opacity:1,strokeColor:'',fillColor:'#192760',width:127.47,height:55.84601,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Reviewed':{stampCollection={iconName:'Reviewed',// eslint-disable-next-line max-len
pathdata:'M17.37,18.25a3.47,3.47,0,0,1-1-1.67L14.17,10c0-.07-.1-.26-.19-.56A14.71,14.71,0,0,0,15.83,9a6.08,6.08,0,0,0,1.76-1A4.92,4.92,0,0,0,19.1,6.14a4.71,4.71,0,0,0,.46-1.93A3.65,3.65,0,0,0,16.86.52,12.83,12.83,0,0,0,12.72,0h-8V.75a6.62,6.62,0,0,1,1.72.3c.26.12.39.41.39.88a4.56,4.56,0,0,1-.13.94c0,.2-.1.44-.17.7L3,16.58a2.87,2.87,0,0,1-.82,1.56,3.15,3.15,0,0,1-1.53.51v.75H9.27v-.75a5.88,5.88,0,0,1-1.74-.31c-.25-.13-.37-.46-.37-1a2.53,2.53,0,0,1,0-.28,1.44,1.44,0,0,1,0-.24l.24-1,1.71-6H10l3.13,9.59h5.49v-.77A2.71,2.71,0,0,1,17.37,18.25ZM11.75,8.67a12.06,12.06,0,0,1-2.3.19L11.2,2.22a2.2,2.2,0,0,1,.46-1,1.19,1.19,0,0,1,.87-.27,2.41,2.41,0,0,1,2.05.8,3.29,3.29,0,0,1,.6,2A5.63,5.63,0,0,1,14.75,6a6.06,6.06,0,0,1-.93,1.59A3.65,3.65,0,0,1,11.75,8.67ZM22.9,0H38.52L37.29,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L27.59,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1-2.16,7.93-.79-.15c0-.27.06-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11A6.61,6.61,0,0,0,27.3,9.6l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L34.86,19.4H19.05v-.79a2.88,2.88,0,0,0,1.28-.47,2.94,2.94,0,0,0,.82-1.56l3.56-13q.13-.49.21-.9A3.26,3.26,0,0,0,25,2q0-.73-.39-.93A6.44,6.44,0,0,0,22.9.75ZM55.79,2.57,44.86,20h-.93L41.72,5.17a16.05,16.05,0,0,0-.81-3.73c-.22-.37-.82-.6-1.81-.69V0h8.67V.75a5,5,0,0,0-1.52.17,1,1,0,0,0-.7,1,2.53,2.53,0,0,0,0,.28l0,.27L47.09,14l5.48-8.66C53,4.69,53.4,4,53.75,3.32a4,4,0,0,0,.52-1.63.78.78,0,0,0-.54-.8A5.88,5.88,0,0,0,52.4.75V0H58V.75a3.55,3.55,0,0,0-1,.44A5.18,5.18,0,0,0,55.79,2.57ZM62,18.34a6,6,0,0,0,1.71.31v.75H55.12v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56L61,3.57c.1-.37.18-.68.23-.93A2.81,2.81,0,0,0,61.34,2c0-.49-.13-.8-.41-.93a6.61,6.61,0,0,0-1.71-.3V0h8.63V.75a3.17,3.17,0,0,0-1.53.51,3,3,0,0,0-.8,1.57l-3.58,13-.22,1a2.74,2.74,0,0,0,0,.28,1.41,1.41,0,0,0,0,.28C61.64,17.9,61.78,18.21,62,18.34ZM69.13,0H84.75L83.52,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L73.82,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1L78.4,13.64l-.79-.15c0-.27.07-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11,6.61,6.61,0,0,0-3.33-.57l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L81.1,19.4H65v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56l3.56-13q.14-.49.21-.9A3.26,3.26,0,0,0,71.24,2q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3Zm39.15,2.83L100,20h-.84L97.41,5.85,90.67,20h-.84L87.58,3.13A3.83,3.83,0,0,0,87,1.23,2.84,2.84,0,0,0,85.33.71V0h8.06V.75A2.55,2.55,0,0,0,92.27,1a1.33,1.33,0,0,0-.66,1.31c0,.06,0,.13,0,.19s0,.15,0,.26l1.15,10.16,4.32-9a1,1,0,0,0,0-.27,3.33,3.33,0,0,0-.64-2.38A2.5,2.5,0,0,0,95.06.71V0h7.78V.71a2.9,2.9,0,0,0-1.4.34c-.27.19-.41.6-.41,1.24,0,.13,0,.32,0,.55,0,.4.08.88.14,1.47l1,8.47,4.51-9.42a7.12,7.12,0,0,0,.29-.74,2.48,2.48,0,0,0,.14-.79.9.9,0,0,0-.48-.93,3.25,3.25,0,0,0-1.34-.19V0h5.41V.71a2.34,2.34,0,0,0-1.1.35A4.56,4.56,0,0,0,108.28,2.83Zm16.45,10.81.71.12-1.71,5.64H107.66v-.75a3.15,3.15,0,0,0,1.53-.51,2.87,2.87,0,0,0,.82-1.56l3.57-13q.12-.49.21-.9a3.17,3.17,0,0,0,.08-.69q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3V0h15.62l-1.23,5.51-.78-.13a5.26,5.26,0,0,0-.68-3C124,1.4,122.46.91,120.2.91a2.64,2.64,0,0,0-1.48.27,2.09,2.09,0,0,0-.55,1l-1.72,6.45a12,12,0,0,0,3.94-.5,5.62,5.62,0,0,0,2-2.56l.81.1L121,13.64l-.79-.15c0-.27.06-.51.07-.71s0-.37,0-.5a2.34,2.34,0,0,0-.86-2.11,6.57,6.57,0,0,0-3.32-.57l-1.91,7.08a5,5,0,0,0-.11.5,3.14,3.14,0,0,0,0,.38.8.8,0,0,0,.31.65,2.25,2.25,0,0,0,1.3.25,12.26,12.26,0,0,0,4.5-.73A8.67,8.67,0,0,0,124.73,13.64ZM144.64,2.19Q142.41,0,138.14,0h-8.42V.75a6.61,6.61,0,0,1,1.71.3c.28.13.41.44.41.93a2.81,2.81,0,0,1-.08.66c0,.25-.12.56-.23.93l-3.56,13a2.78,2.78,0,0,1-1,1.68,3.44,3.44,0,0,1-1.35.4v.75h8.32a13.06,13.06,0,0,0,9.63-3.64,10.49,10.49,0,0,0,3.3-7.7A7.87,7.87,0,0,0,144.64,2.19ZM141.2,13.1q-2.31,5.32-7.48,5.32a2.27,2.27,0,0,1-1.26-.25,1,1,0,0,1-.34-.82,1.62,1.62,0,0,1,0-.3,2.16,2.16,0,0,1,.08-.38l4-14.65a1.63,1.63,0,0,1,.47-.81A2,2,0,0,1,138,.91a4.16,4.16,0,0,1,3.93,1.95,7,7,0,0,1,.72,3.42A16.82,16.82,0,0,1,141.2,13.1Z',opacity:1,strokeColor:'',fillColor:'#192760',width:127.70402,height:55.84601,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Received':{stampCollection={iconName:'Received',// eslint-disable-next-line max-len
pathdata:'M18.17,8.76a5,5,0,0,0,1.57-1.93,5,5,0,0,0,.47-2A3.76,3.76,0,0,0,17.42,1,13,13,0,0,0,13.13.48H4.89v.78a6.49,6.49,0,0,1,1.77.31c.27.12.41.43.41.91a5.87,5.87,0,0,1-.13,1c-.05.2-.12.44-.19.72L3.06,17.64a3,3,0,0,1-.84,1.61,3.36,3.36,0,0,1-1.59.53v.77H9.57v-.77a6.17,6.17,0,0,1-1.8-.32c-.26-.14-.39-.48-.39-1a2.46,2.46,0,0,1,0-.28,1.78,1.78,0,0,1,0-.26l.25-1,1.78-6.25h.84l3.24,9.92h5.66v-.8A2.76,2.76,0,0,1,18,19.36a3.57,3.57,0,0,1-1-1.72l-2.31-6.78c0-.07-.09-.27-.19-.58.87-.2,1.51-.38,1.92-.52A6.56,6.56,0,0,0,18.17,8.76Zm-2.93-2.1a6.19,6.19,0,0,1-1,1.65,3.85,3.85,0,0,1-2.14,1.14,12.92,12.92,0,0,1-2.39.2l1.81-6.87A2.5,2.5,0,0,1,12,1.72a1.27,1.27,0,0,1,.9-.27,2.5,2.5,0,0,1,2.12.83,3.35,3.35,0,0,1,.62,2.09A5.81,5.81,0,0,1,15.24,6.66ZM30.3,2.78,28.52,9.45a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,31.66,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76,9,9,0,0,0,4.67-4.23l.73.13-1.77,5.83H19.8v-.83A2.83,2.83,0,0,0,21,19.25a3.09,3.09,0,0,0,.85-1.61L25.54,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H39.82l-1.27,5.7-.81-.13A5.44,5.44,0,0,0,37,3Q35.9,1.42,32.4,1.42a2.69,2.69,0,0,0-1.54.29A2.08,2.08,0,0,0,30.3,2.78ZM56.56,6.1c0-.07,0-.18,0-.33a4.89,4.89,0,0,0-1.12-3.53,3.75,3.75,0,0,0-2.82-1.16c-2.33,0-4.35,1.55-6.07,4.63a17.09,17.09,0,0,0-2.31,8.43c0,2.08.47,3.5,1.43,4.27a4.89,4.89,0,0,0,3.11,1.15,6.84,6.84,0,0,0,4.14-1.45A11.51,11.51,0,0,0,55,16l.91.66A10.08,10.08,0,0,1,52.26,20a9.33,9.33,0,0,1-4.34,1.11A8.56,8.56,0,0,1,42,19a7.25,7.25,0,0,1-2.35-5.67A13.53,13.53,0,0,1,43.22,4a11.19,11.19,0,0,1,8.56-4A12.34,12.34,0,0,1,55,.44,13.17,13.17,0,0,0,56.9.88a1,1,0,0,0,.71-.24A2.94,2.94,0,0,0,58.06,0H59L57.45,7l-.94-.18C56.54,6.42,56.55,6.17,56.56,6.1Zm18,8.49.74.13-1.78,5.83H56.87v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L63,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.14-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H77.26L76,6.18l-.81-.13A5.44,5.44,0,0,0,74.48,3q-1.14-1.54-4.64-1.54a2.69,2.69,0,0,0-1.54.29,2.08,2.08,0,0,0-.56,1.07L66,9.45A12.53,12.53,0,0,0,70,8.94a5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,69.1,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76A8.91,8.91,0,0,0,74.52,14.59Zm31-11.45-11.31,18h-1L91,5.83A16.56,16.56,0,0,0,90.12,2c-.2-.34-.71-.56-1.51-.67a3,3,0,0,0-1.31.48,3.08,3.08,0,0,0-.82,1.62l-3.7,13.47-.24,1c0,.1,0,.2-.05.3s0,.2,0,.28c0,.51.14.83.41,1a6.21,6.21,0,0,0,1.77.32v.77H75.72v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L81.83,4.17c.11-.38.19-.7.25-.95a3.75,3.75,0,0,0,.08-.69c0-.5-.15-.82-.43-1A6.49,6.49,0,0,0,80,1.26V.48H97.22v.78a4.92,4.92,0,0,0-1.57.18,1,1,0,0,0-.73,1.05,2.81,2.81,0,0,0,0,.29l0,.28,1.56,12,5.67-9a24.21,24.21,0,0,0,1.21-2.14,4.07,4.07,0,0,0,.54-1.68.79.79,0,0,0-.55-.82A5.69,5.69,0,0,0,102,1.26V.48h5.76v.78a3.5,3.5,0,0,0-1,.46A5.16,5.16,0,0,0,105.52,3.14Zm16.83,11.45.73.13-1.77,5.83H104.69v-.77a3.31,3.31,0,0,0,1.58-.53,3,3,0,0,0,.85-1.61l3.69-13.47c.08-.34.16-.65.22-.93a4,4,0,0,0,.08-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48h16.16l-1.28,5.7-.8-.13A5.43,5.43,0,0,0,122.3,3q-1.14-1.54-4.64-1.54a2.67,2.67,0,0,0-1.53.29,2.16,2.16,0,0,0-.57,1.07l-1.78,6.67a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2.06-2.66l.83.11-2.22,8.2-.82-.15c0-.28.06-.53.08-.74s0-.38,0-.52a2.45,2.45,0,0,0-.88-2.18,6.9,6.9,0,0,0-3.44-.58l-2,7.32c-.05.18-.08.35-.11.51a3.58,3.58,0,0,0,0,.4.81.81,0,0,0,.32.67,2.28,2.28,0,0,0,1.35.26,12.62,12.62,0,0,0,4.65-.76A9,9,0,0,0,122.35,14.59ZM142.94,2.75Q140.63.48,136.21.48h-8.7v.78a6.66,6.66,0,0,1,1.77.31q.42.21.42,1a2.91,2.91,0,0,1-.08.68q-.08.39-.24,1L125.7,17.62a2.93,2.93,0,0,1-1,1.75,3.54,3.54,0,0,1-1.39.41v.77h8.61a13.5,13.5,0,0,0,10-3.76,10.84,10.84,0,0,0,3.41-8A8.14,8.14,0,0,0,142.94,2.75ZM139.38,14q-2.38,5.51-7.74,5.5a2.35,2.35,0,0,1-1.29-.26,1,1,0,0,1-.36-.85,1.78,1.78,0,0,1,0-.31,2.08,2.08,0,0,1,.08-.39l4.13-15.15a1.76,1.76,0,0,1,.49-.84A2,2,0,0,1,136,1.42a4.32,4.32,0,0,1,4.07,2A7.17,7.17,0,0,1,140.83,7,17.49,17.49,0,0,1,139.38,14Z',opacity:1,strokeColor:'',fillColor:'#192760',width:127.70402,height:55.84601,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Approved':{stampCollection={iconName:'Approved',// eslint-disable-next-line max-len
pathdata:'M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z',opacity:1,strokeColor:'',fillColor:'#516c30',width:127.70402,height:55.84601,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'Confidential':{stampCollection={iconName:'Confidential',// eslint-disable-next-line max-len
pathdata:'M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:127.70402,height:55.84601,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;case'NotApproved':case'Not Approved':{stampCollection={iconName:'Not Approved',// eslint-disable-next-line max-len
pathdata:'M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:127.70402,height:55.84601,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;}if(stampCollection){stampCollection.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.currentStampAnnotation=stampCollection;return stampCollection;}}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.retrievestampAnnotation=function(icontype){if(icontype){var stampCollection=void 0;switch(icontype.trim()){// eslint-disable-next-line
case'Approved':{stampCollection={iconName:'Approved',// eslint-disable-next-line max-len
pathdata:'M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z',opacity:1,strokeColor:'',fillColor:'#516c30',width:149.474,height:20.783,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'Confidential':{stampCollection={iconName:'Confidential',// eslint-disable-next-line max-len
pathdata:'M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z',opacity:1,strokeColor:'',fillColor:'#192760',width:149.633,height:20.811,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Witness':{stampCollection={iconName:'Witness',// eslint-disable-next-line max-len
pathdata:'M19.63,2.67,12.77,16.84h-.69L10.63,5.17,5.05,16.84H4.36L2.5,2.92A3.13,3.13,0,0,0,2,1.35,2.38,2.38,0,0,0,.63.91V.33H7.3V1a2.27,2.27,0,0,0-.92.17A1.11,1.11,0,0,0,5.84,2.2v.16c0,.05,0,.13,0,.22L6.81,11l3.57-7.48a.79.79,0,0,0,0-.23,2.78,2.78,0,0,0-.53-2A2.23,2.23,0,0,0,8.68.91V.33h6.45V.91A2.42,2.42,0,0,0,14,1.2c-.23.16-.34.5-.34,1,0,.11,0,.26,0,.46s.07.73.12,1.21l.8,7L18.3,3.11c.09-.19.17-.4.25-.62a2.11,2.11,0,0,0,.11-.65.73.73,0,0,0-.4-.76,2.73,2.73,0,0,0-1.1-.17V.33h4.47V.91a1.92,1.92,0,0,0-.91.3A3.66,3.66,0,0,0,19.63,2.67ZM29.76.33H22.62V1A5.07,5.07,0,0,1,24,1.2c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L21.17,14.05a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,25,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,29.76,1ZM41.9,4.88l.63,0,.86-4.6H30.2l-.93,4.1.62.16A6.6,6.6,0,0,1,32,2a5.22,5.22,0,0,1,3.06-.86L31.53,14.05a2.24,2.24,0,0,1-1,1.5,3.67,3.67,0,0,1-1.51.21v.62H37v-.62a6,6,0,0,1-1.62-.24c-.26-.1-.39-.36-.39-.77,0-.07,0-.14,0-.21s0-.16.05-.27l.2-.83L38.57,1.16a3.76,3.76,0,0,1,2,.52A3.69,3.69,0,0,1,41.9,4.88ZM59.24,1,59.58,1V.33H54.65V1A3.78,3.78,0,0,1,56,1.22a1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13l-1.87,6.79L49.05.33H44.21V1a3.51,3.51,0,0,1,1.13.2,1.51,1.51,0,0,1,.74.85l.1.25L43.49,12.1A13.5,13.5,0,0,1,42.4,15a1.87,1.87,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.64-1.17,3.55,3.55,0,0,1,.06-.64q.11-.53.39-1.59L47,3.5,53.2,16.78h.59L57.13,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,59.24,1Zm7.26.31a2.11,2.11,0,0,1,1.23-.23c1.87,0,3.1.41,3.71,1.23A4.39,4.39,0,0,1,72,4.78l.64.11,1-4.56H60.75V1a5,5,0,0,1,1.42.25c.22.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-3,10.77a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h13.3l1.42-4.66-.59-.11A7.1,7.1,0,0,1,67.75,15a10,10,0,0,1-3.72.61A1.86,1.86,0,0,1,63,15.4a.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.48,5.48,0,0,1,2.75.47,2,2,0,0,1,.71,1.75c0,.11,0,.25,0,.41s0,.37-.06.6l.65.11L70.2,5.05,69.54,5a4.69,4.69,0,0,1-1.65,2.12,10.06,10.06,0,0,1-3.26.41l1.42-5.33A1.75,1.75,0,0,1,66.5,1.31ZM80.88.83a2.77,2.77,0,0,1,2.46,1.26A4.36,4.36,0,0,1,84,4l.08.78.62.08,1-4.8H85a1.77,1.77,0,0,1-.38.43A1,1,0,0,1,84,.67a2.76,2.76,0,0,1-.37,0l-.41-.1-.61-.2a4.78,4.78,0,0,0-.79-.2A6.71,6.71,0,0,0,80.46,0a4.76,4.76,0,0,0-3.62,1.36,4.61,4.61,0,0,0-1.29,3.29q0,2.05,2.94,4.47t2.94,3.82a3.19,3.19,0,0,1-.79,2.14,2.8,2.8,0,0,1-2.23.92,3.43,3.43,0,0,1-1.5-.33,3.82,3.82,0,0,1-2-2.5,10.33,10.33,0,0,1-.2-1.67L74,11.45l-.87,5.38h.73a2.85,2.85,0,0,1,.38-.67A.75.75,0,0,1,74.8,16a1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.62,8.62,0,0,0,1.3.35,7.53,7.53,0,0,0,1.32.12,5.48,5.48,0,0,0,4.11-1.53,4.77,4.77,0,0,0,1.49-3.43,4.59,4.59,0,0,0-.77-2.63,9.31,9.31,0,0,0-1.87-2L79.61,5.5a4.31,4.31,0,0,1-.74-.77,2.55,2.55,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.23,2.23,0,0,1,80.88.83Zm12.31,0a2.8,2.8,0,0,1,2.47,1.26A4.49,4.49,0,0,1,96.35,4l.08.78.62.08,1-4.8h-.71a1.62,1.62,0,0,1-.39.43,1,1,0,0,1-.64.18,2.9,2.9,0,0,1-.38,0l-.41-.1-.61-.2a4.65,4.65,0,0,0-.78-.2A6.88,6.88,0,0,0,92.77,0a4.73,4.73,0,0,0-3.61,1.36,4.57,4.57,0,0,0-1.3,3.29q0,2.05,2.94,4.47c2,1.54,3,2.81,3,3.82a3.2,3.2,0,0,1-.8,2.14,2.78,2.78,0,0,1-2.23.92,3.36,3.36,0,0,1-1.49-.33A3.68,3.68,0,0,1,88,14.73a3.76,3.76,0,0,1-.81-1.56A10.6,10.6,0,0,1,87,11.5l-.7-.05-.86,5.38h.72a2.85,2.85,0,0,1,.38-.67.78.78,0,0,1,.57-.19,1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.74,8.74,0,0,0,1.31.35,7.37,7.37,0,0,0,1.32.12,5.49,5.49,0,0,0,4.11-1.53,4.81,4.81,0,0,0,1.49-3.43,4.67,4.67,0,0,0-.77-2.63A9.57,9.57,0,0,0,94,7.2L91.93,5.5a4,4,0,0,1-.74-.77,2.48,2.48,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.2,2.2,0,0,1,93.19.83Z',opacity:1,strokeColor:'',fillColor:'#192760',width:97.39,height:16.84,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'InitialHere':case'Initial Here':{stampCollection={iconName:'Initial Here',// eslint-disable-next-line max-len
pathdata:'M6.36,15.51a5.09,5.09,0,0,0,1.42.25v.62H.63v-.62a2.62,2.62,0,0,0,1.27-.42,2.47,2.47,0,0,0,.68-1.29l3-10.77c.08-.3.15-.56.19-.77A2.86,2.86,0,0,0,5.78,2c0-.41-.11-.66-.34-.77A5.07,5.07,0,0,0,4,1V.33h7.14V1a2.76,2.76,0,0,0-1.27.42,2.5,2.5,0,0,0-.66,1.3l-3,10.77-.19.83c0,.08,0,.16,0,.24a2,2,0,0,0,0,.23C6,15.14,6.14,15.4,6.36,15.51ZM27,1,27.36,1V.33H22.43V1a3.78,3.78,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13L22,11.43,16.83.33H12V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.11.25-2.7,9.85A13,13,0,0,1,10.18,15a1.85,1.85,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.63-1.17,4.72,4.72,0,0,1,.05-.64q.1-.53.39-1.59l2.39-8.6L21,16.78h.6L24.91,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,27,1ZM35.78.33H28.64V1a5.16,5.16,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L27.19,14.05a2.47,2.47,0,0,1-.68,1.29,2.66,2.66,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,31,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23,2,2,0,0,1,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,35.78,1Zm12.76,4.6.87-4.6H36.22l-.93,4.1.62.16A6.52,6.52,0,0,1,38,2a5.21,5.21,0,0,1,3-.86L37.55,14.05a2.24,2.24,0,0,1-1,1.5,3.7,3.7,0,0,1-1.51.21v.62H43v-.62a5.79,5.79,0,0,1-1.61-.24c-.26-.1-.39-.36-.39-.77a1.48,1.48,0,0,1,0-.21,2,2,0,0,1,0-.27l.2-.83L44.58,1.16a3.77,3.77,0,0,1,2,.52,3.74,3.74,0,0,1,1.31,3.2Zm4,9.81a.93.93,0,0,1,0-.23,2,2,0,0,1,0-.24l.18-.83,3-10.77a2.42,2.42,0,0,1,.67-1.3A2.72,2.72,0,0,1,57.72,1V.33H50.57V1A5.26,5.26,0,0,1,52,1.2c.23.11.34.36.34.77a2.28,2.28,0,0,1-.07.54,7.71,7.71,0,0,1-.19.77l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62h7.14v-.62a5.07,5.07,0,0,1-1.41-.25C52.69,15.4,52.58,15.14,52.58,14.74Zm32-3.13.57.11-1.4,4.66H63.34v-.57a3.65,3.65,0,0,0,1.46-.34c.29-.16.43-.51.43-1,0-.18,0-.61-.13-1.29,0-.14-.09-.73-.23-1.75H59.69l-1.4,2.44a3.38,3.38,0,0,0-.25.54,1.64,1.64,0,0,0-.11.56q0,.5.3.63a4.41,4.41,0,0,0,1.25.25v.57H54.76v-.57a3.36,3.36,0,0,0,1-.43,4.58,4.58,0,0,0,1-1.27L65.7,0h.62l2.3,13.72a3.49,3.49,0,0,0,.56,1.7,2.34,2.34,0,0,0,1.29.37v0a2.58,2.58,0,0,0,1.26-.42,2.46,2.46,0,0,0,.68-1.3L75.35,3.28c.09-.3.16-.56.2-.77A2.86,2.86,0,0,0,75.61,2c0-.41-.11-.66-.34-.77A5.17,5.17,0,0,0,73.85,1V.33h7.61V1a4.77,4.77,0,0,0-1.69.39A2.27,2.27,0,0,0,79,2.67L75.92,14.12c0,.13,0,.25-.07.36a2.21,2.21,0,0,0,0,.39.59.59,0,0,0,.35.57,2.33,2.33,0,0,0,1,.17,10.06,10.06,0,0,0,4.28-.84A7.67,7.67,0,0,0,84.6,11.61ZM64.7,10.44,63.81,4.6l-3.55,5.84Zm38,4.32a.71.71,0,0,1,0-.16s0-.16.07-.34l.2-.83L106,2.67a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,107.9,1V.33h-7.15V1a4.45,4.45,0,0,1,1.27.19.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-1.14,4.16h-5.7L96.7,2.67a2.27,2.27,0,0,1,.73-1.33A4.77,4.77,0,0,1,99.12,1V.33H91.51V1a5.09,5.09,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c-.05.24-.1.48-.17.73L90.07,14a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3.11,3.11,0,0,1,0-.57c0-.16.1-.43.19-.8L95.12,8.5h5.7L99.31,14a2.21,2.21,0,0,1-.74,1.33,4.36,4.36,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.8.8,0,0,1,102.73,14.76Zm13.38.24a10.07,10.07,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.25,0,.41s0,.37-.07.6l.66.11,1.78-6.56L117.89,5a4.63,4.63,0,0,1-1.65,2.12A10,10,0,0,1,113,7.5l1.43-5.33a1.6,1.6,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47l.65.11,1-4.56H109.1V1a5.1,5.1,0,0,1,1.43.25c.21.11.32.36.32.77a3.63,3.63,0,0,1-.07.57c0,.22-.11.47-.18.74l-2.95,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H119l1.42-4.66-.58-.11A7.17,7.17,0,0,1,116.11,15ZM144.36,2.17,142.93,7.5a10.13,10.13,0,0,0,3.27-.41A4.69,4.69,0,0,0,147.84,5l.67.08-1.78,6.56-.66-.11c0-.23.06-.43.07-.6s0-.3,0-.41a2,2,0,0,0-.7-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.36,2.36,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.07,10.07,0,0,0,3.72-.61,7.14,7.14,0,0,0,3.73-3.39l.58.11L149,16.38H131l-2.59-7.93h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.81a4.87,4.87,0,0,0,1.43.25v.62h-7.14v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.72A4.8,4.8,0,0,0,124,1V.33h6.6a10.58,10.58,0,0,1,3.42.43,3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4,4,0,0,1,134.66,7a5.47,5.47,0,0,1-1.45.8c-.33.11-.85.25-1.54.42a4.73,4.73,0,0,0,.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.53,2.53,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74A2.73,2.73,0,0,0,140.8,2c0-.41-.11-.66-.32-.77A5.1,5.1,0,0,0,139.05,1V.33H152l-1,4.56-.65-.11a4.32,4.32,0,0,0-.56-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.67,1.67,0,0,0,144.36,2.17ZM131.54,6.59a5,5,0,0,0,.77-1.32,4.68,4.68,0,0,0,.36-1.84,2.74,2.74,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66,1,1,0,0,0-.72.22,2,2,0,0,0-.38.85l-1.45,5.49a10.33,10.33,0,0,0,1.91-.16A3.07,3.07,0,0,0,131.54,6.59Z',opacity:1,strokeColor:'',fillColor:'#192760',width:151.345,height:16.781,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'SignHere':case'Sign Here':{stampCollection={iconName:'Sign Here',// eslint-disable-next-line max-len
pathdata:'M6.38,1.9A2.56,2.56,0,0,0,6,3.34a2.49,2.49,0,0,0,.44,1.45,3.9,3.9,0,0,0,.73.76l2.07,1.7a9.34,9.34,0,0,1,1.87,2.06,4.6,4.6,0,0,1,.78,2.63,4.78,4.78,0,0,1-1.5,3.43A5.46,5.46,0,0,1,6.23,16.9a7.34,7.34,0,0,1-1.31-.12,7.48,7.48,0,0,1-1.31-.36L3,16.2l-.42-.14a1.12,1.12,0,0,0-.27,0,.71.71,0,0,0-.57.19,2.85,2.85,0,0,0-.38.67H.63l.87-5.38.69,0a10.34,10.34,0,0,0,.2,1.68,3.82,3.82,0,0,0,2,2.5,3.42,3.42,0,0,0,1.5.32,2.76,2.76,0,0,0,2.23-.92A3.14,3.14,0,0,0,8.94,13c0-1-1-2.29-2.94-3.82S3.06,6.08,3.06,4.71A4.59,4.59,0,0,1,4.35,1.42,4.76,4.76,0,0,1,8,.06,6.71,6.71,0,0,1,9.29.19a4.78,4.78,0,0,1,.79.2l.61.2.41.1a2.76,2.76,0,0,0,.37,0,1,1,0,0,0,.65-.18A1.75,1.75,0,0,0,12.5.12h.72l-1,4.8-.62-.08-.09-.79a4.45,4.45,0,0,0-.69-1.91A2.78,2.78,0,0,0,8.39.89,2.2,2.2,0,0,0,6.38,1.9ZM22.8.39H15.66V1a4.71,4.71,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L14.21,14.11a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A4.63,4.63,0,0,1,18,15.56c-.22-.1-.33-.36-.33-.77a1.8,1.8,0,0,1,0-.22c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,22.8,1ZM38.09,9.14V8.52H31.18v.62a5.05,5.05,0,0,1,1.44.28c.22.1.32.35.32.75a13.35,13.35,0,0,1-.54,2.54,19.13,19.13,0,0,1-.54,1.87A1.85,1.85,0,0,1,31,15.66a3.77,3.77,0,0,1-1.78.35A3.71,3.71,0,0,1,27,15.38c-1.09-.77-1.64-2.13-1.64-4.08a13.74,13.74,0,0,1,1.78-6.69q2.05-3.72,5-3.72a2.93,2.93,0,0,1,3,1.86,6.09,6.09,0,0,1,.4,2.48l.69.08L37.44,0h-.71a2.44,2.44,0,0,1-.41.53.82.82,0,0,1-.58.2A9.14,9.14,0,0,1,34.33.36,9.23,9.23,0,0,0,31.73,0a9.4,9.4,0,0,0-7.46,3.42,10.46,10.46,0,0,0-2.65,7,5.88,5.88,0,0,0,2.2,4.83,7.77,7.77,0,0,0,5,1.64A13.06,13.06,0,0,0,32,16.52a14.26,14.26,0,0,0,2.33-.75l.67-.3,1.2-4.36a4.15,4.15,0,0,1,.62-1.59A2.28,2.28,0,0,1,38.09,9.14ZM50.36,1a3.36,3.36,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.7-.27,1.13L50,11.48,44.76.39H39.93V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.1.25L39.2,12.16a12.62,12.62,0,0,1-1.09,2.93,1.86,1.86,0,0,1-1.35.73v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.21,1.21,0,0,1-.63-1.17,4.72,4.72,0,0,1,0-.64q.1-.52.39-1.59l2.39-8.6,6.23,13.28h.6L52.84,4.66a15.29,15.29,0,0,1,1-2.78A1.52,1.52,0,0,1,55,1.05l.34,0V.39H50.36Zm22.33,13.8a.66.66,0,0,1,0-.15c0-.05,0-.16.07-.34l.2-.83L75.91,2.73a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,77.86,1V.39H70.71V1A4.45,4.45,0,0,1,72,1.2a.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74L71.07,7.5h-5.7l1.29-4.77a2.27,2.27,0,0,1,.73-1.33A4.36,4.36,0,0,1,69.08,1V.39H61.47V1a4.73,4.73,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c0,.24-.1.48-.17.73L60,14.1a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3,3,0,0,1,0-.57c0-.16.1-.43.19-.8l1.35-4.94h5.7L69.27,14.1a2.21,2.21,0,0,1-.74,1.33,4.77,4.77,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.82.82,0,0,1,72.69,14.81Zm13.38.25a10.28,10.28,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.23,2.23,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.24,0,.41s0,.37-.07.59l.66.12,1.78-6.56L87.85,5a4.75,4.75,0,0,1-1.64,2.12,10.13,10.13,0,0,1-3.27.41l1.43-5.33a1.56,1.56,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47L91,5,92,.39H79.06V1a4.75,4.75,0,0,1,1.43.25c.21.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.11.47-.18.74l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H89l1.41-4.66-.58-.11A7.22,7.22,0,0,1,86.07,15.06ZM114.32,2.23l-1.43,5.33a10.13,10.13,0,0,0,3.27-.41A4.75,4.75,0,0,0,117.8,5l.67.08-1.78,6.56-.66-.12c0-.22.06-.42.07-.59s0-.3,0-.41a2,2,0,0,0-.71-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.23,2.23,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.28,10.28,0,0,0,3.72-.61,7.22,7.22,0,0,0,3.73-3.39l.58.11-1.41,4.66h-18L98.33,8.51h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.8a4.51,4.51,0,0,0,1.43.26v.62H90.59v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.73A5.3,5.3,0,0,0,94,1V.39h6.6A10.58,10.58,0,0,1,104,.82a3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4.06,4.06,0,0,1,104.62,7a5.32,5.32,0,0,1-1.45.8c-.33.11-.84.25-1.54.42.08.24.13.4.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.64,2.64,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74a2.73,2.73,0,0,0,.07-.57c0-.41-.11-.66-.32-.77A4.75,4.75,0,0,0,109,1V.39h12.93l-1,4.56-.64-.11a4.39,4.39,0,0,0-.57-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.7,1.7,0,0,0,114.32,2.23ZM101.5,6.64a4.76,4.76,0,0,0,.77-1.31,4.68,4.68,0,0,0,.36-1.84,2.72,2.72,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66.94.94,0,0,0-.71.22,1.81,1.81,0,0,0-.39.85L97.88,7.72a10.33,10.33,0,0,0,1.91-.16A3,3,0,0,0,101.5,6.64Z',opacity:1,strokeColor:'',fillColor:'#192760',width:121.306,height:16.899,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Accepted':{stampCollection={iconName:'Accepted',// eslint-disable-next-line max-len
pathdata:'M22.409294,0.00021190348 C22.64747,0.0056831966 22.875833,0.11701412 23.023336,0.32638185 23.631345,1.1873664 25.36437,2.8183636 27.4584,4.1123583 28.000408,4.4483535 28.015407,5.227338 27.477398,5.5713293 23.803344,7.9272954 12.881201,15.464245 9.4751583,23.800168 9.2091556,24.452168 8.3321453,24.542164 7.9521352,23.95016 6.0691143,21.014182 1.8990528,14.526234 0.095028103,11.832258 -0.13796928,11.485277 0.081027784,11.023275 0.49603404,10.97927 1.9670546,10.824272 4.8490969,10.421291,6.5811144,9.5293013 6.9811216,9.3233086 7.4691268,9.5782811 7.5601316,10.019287 7.847138,11.400286 8.4021459,13.83224 8.952148,14.781236 8.952148,14.781236 16.385246,3.2303471 21.985326,0.10638282 22.119951,0.031756414 22.266389,-0.003070501 22.409294,0.00021190348 z',opacity:1,strokeColor:'',fillColor:'#516c30',width:27.873,height:24.346,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'Rejected':{stampCollection={iconName:'Rejected',// eslint-disable-next-line max-len
pathdata:'M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:22.588,height:22.586,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;case'Rejected_with_border':{stampCollection={iconName:'Rejected_with_border',// eslint-disable-next-line max-len
pathdata:'M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z',opacity:1,strokeColor:'',fillColor:'#192760',width:22.588,height:24.346,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'NotApproved':case'Not Approved':{stampCollection={iconName:'Not Approved',// eslint-disable-next-line max-len
pathdata:'M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:147.425,height:20.783,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;case'Draft':{stampCollection={iconName:'Draft',// eslint-disable-next-line max-len
pathdata:'M24.92,3Q22,.46,16.4.46h-11v.87a9.38,9.38,0,0,1,2.24.35q.54.23.54,1.08a3.24,3.24,0,0,1-.1.76c-.07.29-.17.65-.31,1.08L3.08,19.69a3.26,3.26,0,0,1-1.32,1.95A4.67,4.67,0,0,1,0,22.1V23H10.91q7.8,0,12.61-4.22a11.56,11.56,0,0,0,4.32-8.94A8.58,8.58,0,0,0,24.92,3ZM20.41,15.66a10.18,10.18,0,0,1-9.8,6.18A3.18,3.18,0,0,1,9,21.54a1,1,0,0,1-.46-.95,2.47,2.47,0,0,1,0-.35,3,3,0,0,1,.1-.44l5.24-17a1.91,1.91,0,0,1,.62-.95,2.81,2.81,0,0,1,1.66-.35c2.44,0,4.15.76,5.15,2.27a7.29,7.29,0,0,1,.94,4A17.63,17.63,0,0,1,20.41,15.66ZM49.75,9.74a5.84,5.84,0,0,0,2-2.16,5.1,5.1,0,0,0,.59-2.24c0-2.1-1.18-3.53-3.54-4.27A18.67,18.67,0,0,0,43.36.46H32.92v.87a8.79,8.79,0,0,1,2.24.35c.35.14.52.48.52,1a5.36,5.36,0,0,1-.17,1.11c-.06.23-.14.5-.23.8L30.61,19.7a3.26,3.26,0,0,1-1.08,1.81,4.44,4.44,0,0,1-2,.59V23H38.85V22.1a8.54,8.54,0,0,1-2.28-.36c-.32-.15-.49-.53-.49-1.13,0-.11,0-.21,0-.32a1.15,1.15,0,0,1,.06-.28l.31-1.16,2.25-7h1.07L43.89,23h7.64V22.1a4.27,4.27,0,0,1-2.07-.47,3.91,3.91,0,0,1-1.27-1.93l-2.92-7.6a4.67,4.67,0,0,1-.25-.65c1.1-.23,1.91-.42,2.43-.59A8.49,8.49,0,0,0,49.75,9.74ZM46,7.39a6.73,6.73,0,0,1-1.21,1.84,5,5,0,0,1-2.72,1.29,19.56,19.56,0,0,1-3,.23L41.38,3A2.54,2.54,0,0,1,42,1.85a1.76,1.76,0,0,1,1.14-.31,3.38,3.38,0,0,1,2.69.93,3.52,3.52,0,0,1,.79,2.34A5.94,5.94,0,0,1,46,7.39Zm27.9,11.85L70.29,0h-1L55.21,19.78a6.61,6.61,0,0,1-1.66,1.78,5.3,5.3,0,0,1-1.55.6V23h7.45v-.81a8,8,0,0,1-2-.34.85.85,0,0,1-.47-.89,2,2,0,0,1,.17-.79,5.32,5.32,0,0,1,.4-.75L59.8,16H68c.22,1.44.35,2.25.37,2.45a16,16,0,0,1,.2,1.81,1.51,1.51,0,0,1-.67,1.47,6.38,6.38,0,0,1-2.31.46V23H77.1v-.81a4.28,4.28,0,0,1-2.28-.55A4.47,4.47,0,0,1,73.93,19.24ZM60.7,14.64l5.62-8.19,1.4,8.19ZM84,.46h20.2l-1.61,6.39-1-.15a5.61,5.61,0,0,0-.88-3.43Q99.2,1.52,94.86,1.51a3.56,3.56,0,0,0-1.76.3A2.05,2.05,0,0,0,92.34,3L90.1,10.5A16.53,16.53,0,0,0,95,9.91c.77-.33,1.62-1.32,2.56-3l1.06.12-2.82,9.2-1-.17c0-.33.08-.61.1-.85s0-.43,0-.56a2.76,2.76,0,0,0-1-2.38c-.66-.49-2.07-.73-4.23-.73l-2.5,8.22a3.56,3.56,0,0,0-.09.39,1.55,1.55,0,0,0,0,.37,1.32,1.32,0,0,0,1,1.33,5.52,5.52,0,0,0,1.78.21V23H78.58V22.1a4.35,4.35,0,0,0,2-.61,3.33,3.33,0,0,0,1.06-1.8L86.32,4.6c.09-.31.16-.58.23-.81a5.05,5.05,0,0,0,.16-1.1c0-.53-.17-.87-.52-1A8.7,8.7,0,0,0,84,1.33Zm24.1,0h20.89l-1.37,6.46-1-.08c-.07-2.2-.76-3.69-2.09-4.49a6.61,6.61,0,0,0-3.2-.72L116,18.84,115.7,20a2.63,2.63,0,0,0-.07.38,1.51,1.51,0,0,0,0,.3c0,.57.2.94.61,1.08a11.19,11.19,0,0,0,2.56.34V23H106.2V22.1a6.49,6.49,0,0,0,2.4-.3,3.19,3.19,0,0,0,1.56-2.1l5.58-18.07a9.07,9.07,0,0,0-4.83,1.2,9.52,9.52,0,0,0-3.34,3.61l-1-.23Z',opacity:1,strokeColor:'',fillColor:'#192760',width:128.941,height:22.97,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Final':{stampCollection={iconName:'Final',// eslint-disable-next-line max-len
pathdata:'M24.94,6l-1.06-.13a4.37,4.37,0,0,0-.91-3q-1.51-1.54-6-1.54a4.28,4.28,0,0,0-1.83.26,1.8,1.8,0,0,0-.78,1.08L12,9.21a20.26,20.26,0,0,0,5.15-.52A6.49,6.49,0,0,0,19.8,6.1l1.1.1L18,14.27l-1.09-.15a6.34,6.34,0,0,0,.11-.74c0-.22,0-.38,0-.5a2.26,2.26,0,0,0-1-2.09c-.68-.42-2.15-.63-4.39-.63L9,17.37a3.09,3.09,0,0,0-.1.34,1.22,1.22,0,0,0,0,.32,1.18,1.18,0,0,0,1,1.17,7,7,0,0,0,1.86.18v.77H0v-.77a5.14,5.14,0,0,0,2.11-.53,3,3,0,0,0,1.1-1.58L8.06,4c.09-.27.17-.5.23-.7a3.74,3.74,0,0,0,.18-1,.83.83,0,0,0-.55-.89,10.94,10.94,0,0,0-2.33-.3V.4h21Zm8.54,12.11a1.49,1.49,0,0,1,0-.28,2.46,2.46,0,0,1,.07-.29l.3-1L38.76,3.29a2.93,2.93,0,0,1,1.09-1.6A5.42,5.42,0,0,1,42,1.17V.4H30.17v.77a10.52,10.52,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.26-.18.57-.32,1L27.79,17.28a2.94,2.94,0,0,1-1.12,1.59,5.28,5.28,0,0,1-2.09.51v.77H36.36v-.77A10.22,10.22,0,0,1,34,19.07.89.89,0,0,1,33.48,18.12ZM66.19,2.24a2.53,2.53,0,0,1,1.87-1l.56-.06V.4H60.5v.77a8,8,0,0,1,2.16.33,1.47,1.47,0,0,1,1,1.48,5.61,5.61,0,0,1-.25,1.34c-.11.4-.25.87-.43,1.38l-3.08,8.35L51.26.4h-8v.77a8.44,8.44,0,0,1,1.86.24,2.26,2.26,0,0,1,1.22,1.05l.17.31L42.11,14.88a13.74,13.74,0,0,1-1.8,3.61,3.36,3.36,0,0,1-2.22.89v.77h8.23v-.77a7.75,7.75,0,0,1-2.1-.31,1.45,1.45,0,0,1-1-1.44,3.56,3.56,0,0,1,.1-.79,16.15,16.15,0,0,1,.64-2L47.85,4.31,58.11,20.64h1l5.5-15A15.48,15.48,0,0,1,66.19,2.24Zm23,17.13v.78H78.08v-.71A7.47,7.47,0,0,0,80.49,19a1.25,1.25,0,0,0,.7-1.29A13.26,13.26,0,0,0,81,16.16c0-.18-.16-.89-.39-2.15H72.06l-2.3,3a3.7,3.7,0,0,0-.42.66,1.54,1.54,0,0,0-.18.69.74.74,0,0,0,.49.78,10.28,10.28,0,0,0,2.06.3v.71H63.94v-.71a6.43,6.43,0,0,0,1.63-.53,6.63,6.63,0,0,0,1.72-1.56L82,0h1l3.78,16.88A3.69,3.69,0,0,0,87.7,19,3.53,3.53,0,0,0,89.24,19.37Zm-8.93-6.53L78.86,5.65,73,12.84Zm32.8,1.44a11.51,11.51,0,0,1-5.23,3.88,21.36,21.36,0,0,1-7,1A4.88,4.88,0,0,1,99.22,19a.74.74,0,0,1-.58-.71,2.33,2.33,0,0,1,0-.48c0-.13.08-.28.13-.43L104,3.29a2.72,2.72,0,0,1,1.19-1.64,9.4,9.4,0,0,1,2.79-.48V.4H95.4v.77a10.42,10.42,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.25-.17.57-.31.94L93,17.27a2.92,2.92,0,0,1-1.12,1.6,4.59,4.59,0,0,1-1.71.47v.81h21.55l2.32-5.74Z',opacity:1,strokeColor:'',fillColor:'#516c30',width:114.058,height:20.639,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'Completed':{stampCollection={iconName:'Completed',// eslint-disable-next-line max-len
pathdata:'M16.37,0,15.08,6.9l-.79-.17c0-.41,0-.66,0-.73a2.73,2.73,0,0,0,0-.32,5.33,5.33,0,0,0-.94-3.47A3,3,0,0,0,11,1.07c-2,0-3.68,1.51-5.13,4.55a18.84,18.84,0,0,0-2,8.29q0,3.06,1.2,4.2a3.82,3.82,0,0,0,2.64,1.13,5.3,5.3,0,0,0,3.51-1.43,10.75,10.75,0,0,0,1.78-2.09l.77.65a9.32,9.32,0,0,1-3.12,3.35A7,7,0,0,1,7,20.81a6.66,6.66,0,0,1-5-2.08,7.72,7.72,0,0,1-2-5.57A14.57,14.57,0,0,1,3.05,3.92Q6.1,0,10.29,0A8.92,8.92,0,0,1,13,.43a9.09,9.09,0,0,0,1.65.43.72.72,0,0,0,.6-.23A2.55,2.55,0,0,0,15.6,0ZM32.83,7.11a15.24,15.24,0,0,1-3.11,9.07q-3.31,4.61-7.63,4.6a5.63,5.63,0,0,1-4.42-1.92A7.47,7.47,0,0,1,16,13.72a15.27,15.27,0,0,1,3.18-9.19Q22.46,0,26.57,0a5.82,5.82,0,0,1,4.5,1.92A7.35,7.35,0,0,1,32.83,7.11ZM29.16,4.6a4.92,4.92,0,0,0-.63-2.55,2.14,2.14,0,0,0-2-1.06Q23.4,1,21.24,7.53a27.45,27.45,0,0,0-1.63,8.26A6.68,6.68,0,0,0,19.92,18a2.24,2.24,0,0,0,2.2,1.78,3.71,3.71,0,0,0,2.73-1.29,15,15,0,0,0,2.54-4.93,30.56,30.56,0,0,0,1.3-4.83A23,23,0,0,0,29.16,4.6Zm21.2,13.62a3.83,3.83,0,0,1,.08-.75,8.6,8.6,0,0,1,.19-.88L53.75,3.31a3,3,0,0,1,.85-1.67,2.72,2.72,0,0,1,1.21-.4V.48H50.42L42.66,14.39,41.21.48h-5.8v.76a4.65,4.65,0,0,1,1.45.21c.26.11.38.37.38.78a4.57,4.57,0,0,1-.08.75c-.06.28-.13.61-.23,1L34.34,15a16.85,16.85,0,0,1-1.16,3.65,1.9,1.9,0,0,1-1.42.86v.76h5.3v-.76a3.22,3.22,0,0,1-1.32-.29A1.48,1.48,0,0,1,35,17.74a8.32,8.32,0,0,1,.17-1.42c.07-.37.17-.82.3-1.37L38.06,4.23l1.71,16.38h.71L50,3.76l-3.2,13.58A2.84,2.84,0,0,1,46,19a4.06,4.06,0,0,1-1.76.49v.76h7.93v-.76a4.79,4.79,0,0,1-1.49-.31Q50.36,19,50.36,18.22ZM67.69,9.29a7.39,7.39,0,0,1-4.89,1.58l-.73,0-1.48-.11L59.21,16.6l-.21,1a1,1,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.12.81.35.94a4.74,4.74,0,0,0,1.51.31v.76H53.31v-.76a2.52,2.52,0,0,0,1.33-.52,3.18,3.18,0,0,0,.72-1.59L58.48,4.11q.1-.45.18-.9a4.48,4.48,0,0,0,.08-.72,1,1,0,0,0-.49-1,4.36,4.36,0,0,0-1.36-.23V.48h7.29a7.29,7.29,0,0,1,3.07.57,4,4,0,0,1,2.33,4A5.22,5.22,0,0,1,67.69,9.29Zm-1.8-5a3.65,3.65,0,0,0-.51-2,1.85,1.85,0,0,0-1.7-.79,1,1,0,0,0-.8.28,3.27,3.27,0,0,0-.4,1l-1.66,7,.47.06h.41a4.37,4.37,0,0,0,2-.36,3.14,3.14,0,0,0,1.2-1.18,6.51,6.51,0,0,0,.74-2A9.87,9.87,0,0,0,65.89,4.25Zm16.9,10.1a8.71,8.71,0,0,1-3.35,3.88,9.36,9.36,0,0,1-4.53,1,2.15,2.15,0,0,1-1-.21.75.75,0,0,1-.37-.71,3.18,3.18,0,0,1,0-.47c0-.14,0-.28.08-.44l3.3-14.08a2.94,2.94,0,0,1,.77-1.64,4.47,4.47,0,0,1,1.79-.48V.48h-8v.76a4.8,4.8,0,0,1,1.5.31c.23.13.35.44.35.94a4.36,4.36,0,0,1-.06.67c0,.26-.12.57-.21,1L69.9,17.34a3.18,3.18,0,0,1-.72,1.6,2.53,2.53,0,0,1-1.34.52v.76H81.91l1.49-5.74ZM85.73,1.24a4.59,4.59,0,0,1,1.5.31c.23.13.34.44.34.94a3.84,3.84,0,0,1-.07.7c0,.28-.11.58-.19.92L84.2,17.35a3.18,3.18,0,0,1-.72,1.59,2.27,2.27,0,0,1-1.06.47h-.07v.8H96.2l1.5-5.74-.62-.13a8.14,8.14,0,0,1-3.94,4.17,9.39,9.39,0,0,1-3.94.75A1.75,1.75,0,0,1,88.06,19a.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.16,5.16,0,0,1,2.91.57A2.58,2.58,0,0,1,93.24,13c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14,1.88-8.07L95,6.18a5.62,5.62,0,0,1-1.74,2.61,9.05,9.05,0,0,1-3.45.51l1.51-6.56a2.23,2.23,0,0,1,.47-1.06,2,2,0,0,1,1.3-.28c2,0,3.29.5,3.93,1.51a6.13,6.13,0,0,1,.6,3l.68.13L99.4.48H85.73ZM114,6.14l.92-5.66h-14l-1,5,.66.2a7.81,7.81,0,0,1,2.23-3.16,4.91,4.91,0,0,1,3.23-1.06l-3.73,15.85a2.84,2.84,0,0,1-1,1.85,3.48,3.48,0,0,1-1.6.26v.76h8.4v-.76a5.82,5.82,0,0,1-1.71-.3c-.27-.13-.41-.45-.41-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.21-1,3.53-15.1a3.65,3.65,0,0,1,2.14.63c.89.7,1.35,2,1.39,3.94Zm9.44,12.38a9.39,9.39,0,0,1-3.94.75,1.77,1.77,0,0,1-1.14-.26.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.12,5.12,0,0,1,2.91.57,2.58,2.58,0,0,1,.75,2.15c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14L126,6.28l-.7-.1a5.78,5.78,0,0,1-1.74,2.61,9.16,9.16,0,0,1-3.46.51l1.51-6.56a2.14,2.14,0,0,1,.48-1.06,2,2,0,0,1,1.3-.28c2,0,3.28.5,3.92,1.51a6,6,0,0,1,.6,3l.68.13,1.08-5.6H116v.76a4.67,4.67,0,0,1,1.51.31c.22.13.34.44.34.94a4,4,0,0,1-.08.7c0,.28-.11.58-.18.92l-3.12,13.24a3.18,3.18,0,0,1-.72,1.59,2.56,2.56,0,0,1-1.34.52v.76h14.06l1.5-5.74-.62-.13A8.14,8.14,0,0,1,123.39,18.52Zm23.32-9.84a11.62,11.62,0,0,1-2.89,7.84,10.6,10.6,0,0,1-8.42,3.7h-7.29v-.76a2.58,2.58,0,0,0,1.18-.41,2.94,2.94,0,0,0,.88-1.71l3.11-13.23c.09-.38.16-.69.21-1a4.49,4.49,0,0,0,.07-.67c0-.5-.12-.81-.36-.94a4.8,4.8,0,0,0-1.5-.31V.48h7.36a7.16,7.16,0,0,1,5.69,2.22A8.72,8.72,0,0,1,146.71,8.68ZM143,6.87a8,8,0,0,0-.64-3.48,3.52,3.52,0,0,0-3.44-2,1.52,1.52,0,0,0-1.11.31,1.75,1.75,0,0,0-.41.83l-3.5,14.9c0,.14,0,.27-.07.39s0,.21,0,.3a1.06,1.06,0,0,0,.3.84,1.75,1.75,0,0,0,1.1.26q4.53,0,6.55-5.42A19.84,19.84,0,0,0,143,6.87Z',opacity:1,strokeColor:'',fillColor:'#516c30',width:146.706,height:20.811,stampFillColor:'#e6eddf',stampStrokeColor:''};}break;case'ForPublicRelease':case'For Public Release':{stampCollection={iconName:'For Public Release',// eslint-disable-next-line max-len
pathdata:'M10.33.48l-.65,5.6L9.27,6a9.74,9.74,0,0,0-.36-3A2.27,2.27,0,0,0,6.57,1.4a.85.85,0,0,0-.71.26,2.67,2.67,0,0,0-.3,1.08L4.65,9.28a3.45,3.45,0,0,0,2-.52,6.65,6.65,0,0,0,1-2.59l.43.1L7,14.34l-.42-.14c0-.29,0-.54,0-.75s0-.38,0-.49a4.17,4.17,0,0,0-.39-2.09,1.91,1.91,0,0,0-1.71-.64l-1,7.21c0,.13,0,.24,0,.35s0,.21,0,.31a1.45,1.45,0,0,0,.38,1.17,1.17,1.17,0,0,0,.72.19v.76H0v-.76a1.31,1.31,0,0,0,.82-.54,4.39,4.39,0,0,0,.42-1.58L3.13,4.11c0-.27.06-.51.09-.71,0-.41.07-.73.07-1a1.34,1.34,0,0,0-.21-.9,2.13,2.13,0,0,0-.91-.3V.48ZM20.5,7.11a22.43,22.43,0,0,1-1.88,9.07q-2,4.61-4.62,4.6a3,3,0,0,1-2.67-1.92,10.91,10.91,0,0,1-1-5.14,22.46,22.46,0,0,1,1.92-9.19Q14.23,0,16.71,0a3.11,3.11,0,0,1,2.72,1.92A10.72,10.72,0,0,1,20.5,7.11ZM18.28,4.6a7.7,7.7,0,0,0-.38-2.55c-.26-.7-.65-1-1.19-1-1.28,0-2.35,2.17-3.22,6.53a43.69,43.69,0,0,0-1,8.26,10.72,10.72,0,0,0,.19,2.2c.24,1.18.69,1.77,1.33,1.77s1.16-.43,1.65-1.29a19.35,19.35,0,0,0,1.54-4.93A48.7,48.7,0,0,0,18,8.71,38.21,38.21,0,0,0,18.28,4.6Zm11.59.16a8.73,8.73,0,0,1-.24,2,5.64,5.64,0,0,1-.8,1.9,3.49,3.49,0,0,1-.93,1,7.31,7.31,0,0,1-1,.52c0,.3.08.49.1.57l1.18,6.66a4.54,4.54,0,0,0,.52,1.7,1.1,1.1,0,0,0,.83.41v.76H26.46l-1.65-9.76h-.43l-.91,6.14-.13,1a2,2,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28,1.57,1.57,0,0,0,.2,1,1.77,1.77,0,0,0,.92.32v.76H19.86v-.76a1.33,1.33,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L23,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.22A3.79,3.79,0,0,1,28.44,1C29.4,1.66,29.87,2.91,29.87,4.76Zm-2.31-.47a5.77,5.77,0,0,0-.32-2,1.12,1.12,0,0,0-1.09-.81.5.5,0,0,0-.46.26,3.87,3.87,0,0,0-.24,1.05L24.52,9.5a3.73,3.73,0,0,0,1.22-.2,2.1,2.1,0,0,0,1.1-1.13,8.41,8.41,0,0,0,.49-1.62A10.75,10.75,0,0,0,27.56,4.29Zm14.92.78a7.06,7.06,0,0,1-1.14,4.22,3.5,3.5,0,0,1-3,1.58l-.44,0-.89-.11-.84,5.86-.12,1a1.45,1.45,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29,1.38,1.38,0,0,0,.21.94,1.93,1.93,0,0,0,.91.31v.76H32.65v-.76a1.28,1.28,0,0,0,.8-.52,4.3,4.3,0,0,0,.44-1.59L35.77,4.11c0-.3.08-.6.11-.9a5.21,5.21,0,0,0,0-.72,1.29,1.29,0,0,0-.3-1,1.82,1.82,0,0,0-.81-.23V.48h4.4a3,3,0,0,1,1.86.57C42,1.78,42.48,3.12,42.48,5.07Zm-2.23-.82a5.74,5.74,0,0,0-.3-2,1.07,1.07,0,0,0-1-.79.5.5,0,0,0-.49.28,5.11,5.11,0,0,0-.24,1l-1,7,.28.06h.25a1.79,1.79,0,0,0,1.2-.36,2.88,2.88,0,0,0,.73-1.18,10.56,10.56,0,0,0,.44-2A15.74,15.74,0,0,0,40.25,4.25Zm12.91-3V.48H50v.76a1.46,1.46,0,0,1,.82.32A2,2,0,0,1,51.24,3a15,15,0,0,1-.14,1.57q0-.17-.15,1.17l-.89,6.16a29.63,29.63,0,0,1-1,4.77c-.55,1.63-1.31,2.44-2.28,2.44a1.59,1.59,0,0,1-1.38-.77,4.16,4.16,0,0,1-.5-2.23q0-.63.15-2c.06-.5.15-1.14.27-1.93l1.26-8.84a4.13,4.13,0,0,1,.46-1.66,1.66,1.66,0,0,1,1-.46V.48H43.34v.76a2,2,0,0,1,.9.3,1.3,1.3,0,0,1,.21.9,7.27,7.27,0,0,1,0,.75c0,.29-.07.59-.11.92l-1,7.24c-.16,1.14-.27,1.93-.32,2.38a19.16,19.16,0,0,0-.12,2,6.13,6.13,0,0,0,1,3.71,2.93,2.93,0,0,0,2.43,1.33c1.39,0,2.45-.9,3.17-2.69a29.58,29.58,0,0,0,1.23-5.61l1-6.74A24.45,24.45,0,0,1,52.3,2.1,1.22,1.22,0,0,1,53.16,1.24Zm7.14,9.82a5.87,5.87,0,0,1,.68,3,8.55,8.55,0,0,1-1,4.27,3.68,3.68,0,0,1-3.48,1.84H51.82v-.76a1.3,1.3,0,0,0,.72-.4,3.94,3.94,0,0,0,.52-1.71L55,4.1c0-.39.09-.72.12-1s0-.46,0-.6c0-.53-.07-.86-.23-1A1.64,1.64,0,0,0,54,1.24V.48h4.17a3.4,3.4,0,0,1,2.67,1,4.91,4.91,0,0,1,1,3.38,5.33,5.33,0,0,1-1.17,3.61,4.8,4.8,0,0,1-1.68,1.22A4.84,4.84,0,0,1,60.3,11.06Zm-1.66,2.45a3.81,3.81,0,0,0-.73-2.74,2.63,2.63,0,0,0-1.58-.52l-1,7.2a4,4,0,0,0-.05.4c0,.15,0,.32,0,.51a.9.9,0,0,0,.33.82,1.13,1.13,0,0,0,.59.12c1,0,1.67-.87,2.1-2.59A13.54,13.54,0,0,0,58.64,13.51Zm.12-5.29A5.92,5.92,0,0,0,59.4,6.1a12.74,12.74,0,0,0,.13-1.74,6.54,6.54,0,0,0-.29-2.11,1.11,1.11,0,0,0-1.13-.81.49.49,0,0,0-.49.32,3.52,3.52,0,0,0-.23,1l-.94,6.62A7.45,7.45,0,0,0,58,9,1.8,1.8,0,0,0,58.76,8.22Zm11.71,6.14a8.78,8.78,0,0,1-2,3.87,4,4,0,0,1-2.74,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.22-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2-14.08a3.8,3.8,0,0,1,.47-1.64,1.94,1.94,0,0,1,1.08-.48V.48H63.6v.76a2,2,0,0,1,.91.31,1.36,1.36,0,0,1,.22.94c0,.2,0,.42,0,.67s-.07.57-.13,1L62.68,17.34a4.31,4.31,0,0,1-.44,1.6,1.28,1.28,0,0,1-.8.52v.76h8.5l.9-5.74ZM76.89.48H72.32v.76a1.92,1.92,0,0,1,.9.31c.15.13.22.44.22.94a5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1L71.39,17.35A4.35,4.35,0,0,1,71,18.94a1.33,1.33,0,0,1-.81.52v.76h4.57v-.76a1.81,1.81,0,0,1-.91-.32,1.39,1.39,0,0,1-.21-.94c0-.09,0-.18,0-.28l0-.3.12-1L75.65,3.36a4.43,4.43,0,0,1,.43-1.6,1.3,1.3,0,0,1,.81-.52Zm8.46.15A.38.38,0,0,1,85,.87a4.12,4.12,0,0,1-1-.44A3.51,3.51,0,0,0,82.37,0Q79.84,0,78,3.92a21.42,21.42,0,0,0-1.84,9.24,11.15,11.15,0,0,0,1.2,5.57,3.51,3.51,0,0,0,3.05,2.08,3.15,3.15,0,0,0,2.21-1.09,8.92,8.92,0,0,0,1.89-3.35L84,15.72A11.08,11.08,0,0,1,83,17.81a2.71,2.71,0,0,1-2.12,1.43,2,2,0,0,1-1.59-1.13,8.33,8.33,0,0,1-.74-4.2A29.46,29.46,0,0,1,79.7,5.62Q81,1.08,82.8,1.07c.59,0,1.07.38,1.45,1.14a8,8,0,0,1,.57,3.47,2.73,2.73,0,0,1,0,.32c0,.08,0,.32,0,.73l.48.17L86.05,0h-.47A2.93,2.93,0,0,1,85.35.63Zm21.41,13.73.37.12-.9,5.74H94.72l-1.66-9.76h-.43l-.91,6.14-.13,1c0,.08,0,.16,0,.25s0,.19,0,.28a1.57,1.57,0,0,0,.2,1,1.81,1.81,0,0,0,.92.32v.76H88.11v-.76a1.3,1.3,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L91.24,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.23A3.81,3.81,0,0,1,96.7,1c1,.65,1.43,1.9,1.43,3.75a8.73,8.73,0,0,1-.24,2,5.66,5.66,0,0,1-.81,1.9,3.49,3.49,0,0,1-.93,1,6.73,6.73,0,0,1-1,.52c0,.3.09.49.1.57l1.18,6.66a4.74,4.74,0,0,0,.52,1.7,1,1,0,0,0,.78.39,1.23,1.23,0,0,0,.78-.5A4.3,4.3,0,0,0,99,17.35l1.88-13.24c.05-.34.09-.64.12-.92a6.28,6.28,0,0,0,0-.7,1.45,1.45,0,0,0-.2-.94,2,2,0,0,0-.91-.31V.48h8.26l-.65,5.6L107.1,6a9.57,9.57,0,0,0-.36-3,2.3,2.3,0,0,0-2.38-1.51c-.41,0-.67.09-.78.28a2.87,2.87,0,0,0-.29,1.06l-.91,6.56a3.57,3.57,0,0,0,2.08-.51,6.59,6.59,0,0,0,1.06-2.61l.42.1-1.14,8.08-.42-.15c0-.28,0-.52.05-.73s0-.37,0-.51a3.6,3.6,0,0,0-.46-2.15,2.14,2.14,0,0,0-1.75-.57l-1,7.2a4.7,4.7,0,0,0-.06.51c0,.16,0,.29,0,.39a1.12,1.12,0,0,0,.17.66.77.77,0,0,0,.69.26,3.77,3.77,0,0,0,2.37-.75A7.71,7.71,0,0,0,106.76,14.36ZM95.09,8.17a7.75,7.75,0,0,0,.49-1.62,10.75,10.75,0,0,0,.23-2.26,5.77,5.77,0,0,0-.32-2,1.11,1.11,0,0,0-1.08-.81.48.48,0,0,0-.46.26,3.44,3.44,0,0,0-.25,1.05L92.78,9.5A3.78,3.78,0,0,0,94,9.3,2.08,2.08,0,0,0,95.09,8.17Zm21.32,6.19a8.67,8.67,0,0,1-2,3.87,4,4,0,0,1-2.73,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.23-.7c0-.19,0-.35,0-.48s0-.28,0-.44l2-14.08a3.84,3.84,0,0,1,.46-1.64,2,2,0,0,1,1.08-.48V.48h-4.86v.76a2,2,0,0,1,.91.31,1.38,1.38,0,0,1,.21.94,5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1l-1.89,13.23a4.16,4.16,0,0,1-.43,1.6,1.27,1.27,0,0,1-.81.52v.76h8.51l.9-5.74Zm8.64,0a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.13-8.08-.42-.1a6.79,6.79,0,0,1-1,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56a2.87,2.87,0,0,1,.29-1.06c.12-.19.38-.28.78-.28A2.3,2.3,0,0,1,125,2.91a9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31,1.45,1.45,0,0,1,.2.94,6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74Zm10.29,5.15v.71h-4.65v-.71a1.44,1.44,0,0,0,.93-.41,2.08,2.08,0,0,0,.27-1.29c0-.22,0-.75-.08-1.58,0-.17-.06-.89-.15-2.15h-3.31l-.89,3a5.32,5.32,0,0,0-.16.66,3.4,3.4,0,0,0-.08.69,1.06,1.06,0,0,0,.2.78,1.68,1.68,0,0,0,.79.3v.71h-3v-.71a1.8,1.8,0,0,0,.63-.53,6.45,6.45,0,0,0,.67-1.56L132.19.07h.4L134.06,17a7.15,7.15,0,0,0,.36,2.08A1.13,1.13,0,0,0,135.34,19.51Zm-3.79-6.6L131,5.73l-2.27,7.18Zm9.6-4-1.32-2.09a4.57,4.57,0,0,1-.47-.94,5.12,5.12,0,0,1-.28-1.78,5.57,5.57,0,0,1,.27-1.77c.27-.83.7-1.24,1.29-1.24s1.21.51,1.57,1.54A8.78,8.78,0,0,1,142.65,5l.06,1,.39.1.63-5.91h-.46a2.09,2.09,0,0,1-.25.54.46.46,0,0,1-.41.21.57.57,0,0,1-.24-.05,1.23,1.23,0,0,1-.26-.12l-.39-.24a2.34,2.34,0,0,0-.5-.25,2.41,2.41,0,0,0-.85-.16,2.55,2.55,0,0,0-2.31,1.67,9.11,9.11,0,0,0-.83,4.05,10.47,10.47,0,0,0,1.88,5.5A9.21,9.21,0,0,1,141,16a6.49,6.49,0,0,1-.5,2.63,1.59,1.59,0,0,1-1.43,1.14,1.42,1.42,0,0,1-1-.4,3.55,3.55,0,0,1-.78-1.16,7.09,7.09,0,0,1-.52-1.92c-.05-.43-.1-1.12-.13-2.06l-.44-.06-.55,6.62h.46a4.11,4.11,0,0,1,.25-.82.36.36,0,0,1,.36-.23.47.47,0,0,1,.17,0,2.38,2.38,0,0,1,.27.18l.39.27a3.52,3.52,0,0,0,.84.43,2.48,2.48,0,0,0,.84.15,2.91,2.91,0,0,0,2.63-1.88,9.24,9.24,0,0,0,1-4.21,9.85,9.85,0,0,0-.49-3.24A12.1,12.1,0,0,0,141.15,8.92Zm7.75-7.24c.12-.19.38-.28.78-.28a2.3,2.3,0,0,1,2.38,1.51,9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31c.14.13.2.44.2.94a6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74-.38-.12a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.14-8.08-.43-.1a6.79,6.79,0,0,1-1.05,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56A2.87,2.87,0,0,1,148.9,1.68Z',opacity:1,strokeColor:'',fillColor:'#192760',width:153.485,height:20.812,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'NotForPublicRelease':case'Not For Public Release':{stampCollection={iconName:'Not For Public Release',// eslint-disable-next-line max-len
pathdata:'M9,2.35q-.21.9-.51,3.48L6.69,21.05H6.38L3.11,4.45,1.85,15.19c-.1.89-.17,1.56-.2,2s0,.55,0,.81A2.39,2.39,0,0,0,2,19.45a1.09,1.09,0,0,0,.67.33v.77H0v-.77a1.22,1.22,0,0,0,.71-.91,33.91,33.91,0,0,0,.57-3.68L2.7,2.88l-.06-.3a2.09,2.09,0,0,0-.39-1.07,1,1,0,0,0-.59-.25V.48H4.2L6.93,14.36l1-8.49c.06-.53.11-1,.14-1.4.06-.63.08-1.08.08-1.37a2.67,2.67,0,0,0-.3-1.5,1.07,1.07,0,0,0-.69-.34V.48H9.73v.78l-.18.06C9.29,1.41,9.09,1.75,9,2.35ZM16.74,2a13.19,13.19,0,0,1,.87,5.28,27.45,27.45,0,0,1-1.54,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.31,13.31,0,0,1-.85-5.23A27.59,27.59,0,0,1,10.82,4.6C11.91,1.53,13.15,0,14.51,0,15.41,0,16.16.65,16.74,2Zm-.95,2.73a9.33,9.33,0,0,0-.31-2.59c-.21-.72-.54-1.08-1-1.08-1.05,0-1.92,2.21-2.64,6.64a54.69,54.69,0,0,0-.81,8.4,14.21,14.21,0,0,0,.15,2.23c.2,1.2.57,1.8,1.1,1.8s.95-.43,1.35-1.31a22.84,22.84,0,0,0,1.26-5c.28-1.55.49-3.19.65-4.91S15.79,5.74,15.79,4.68Zm2.3.93.32.21A10.7,10.7,0,0,1,19.52,2.6a1.87,1.87,0,0,1,1.6-1.08L19.27,17.63a4,4,0,0,1-.52,1.88,1,1,0,0,1-.79.27v.77h4.17v-.77a1.72,1.72,0,0,1-.85-.3,1.56,1.56,0,0,1-.2-1,2.44,2.44,0,0,1,0-.27c0-.08,0-.2,0-.33l.11-1L23,1.52A1.31,1.31,0,0,1,24,2.17a8.49,8.49,0,0,1,.69,4l.33.07L25.5.48H18.57ZM28.75.48v.78a1.39,1.39,0,0,1,.74.31,1.44,1.44,0,0,1,.18.9q0,.36-.06,1c0,.2-.05.44-.07.71L28,17.62a5.34,5.34,0,0,1-.35,1.61,1.05,1.05,0,0,1-.67.55v.77H30.7v-.77a.82.82,0,0,1-.6-.2,1.69,1.69,0,0,1-.31-1.18c0-.11,0-.22,0-.32l0-.35.83-7.33a1.42,1.42,0,0,1,1.4.64,5,5,0,0,1,.33,2.13c0,.12,0,.28,0,.5s0,.47,0,.76l.34.15.94-8.21-.35-.1a8.12,8.12,0,0,1-.85,2.64,2.42,2.42,0,0,1-1.64.52l.74-6.65a3.34,3.34,0,0,1,.25-1.1.64.64,0,0,1,.59-.26A1.91,1.91,0,0,1,34.28,3a11.32,11.32,0,0,1,.29,3.06l.34.13.54-5.7Zm15,6.75a27.46,27.46,0,0,1-1.55,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.49,13.49,0,0,1-.85-5.23A27.59,27.59,0,0,1,37,4.6Q38.65,0,40.69,0c.91,0,1.65.65,2.23,2A13.17,13.17,0,0,1,43.8,7.23ZM42,4.68a9.3,9.3,0,0,0-.32-2.59c-.21-.72-.53-1.08-1-1.08Q39.12,1,38,7.65a54.69,54.69,0,0,0-.81,8.4,13,13,0,0,0,.16,2.23c.2,1.2.56,1.8,1.09,1.8s1-.43,1.35-1.31a23.28,23.28,0,0,0,1.27-5c.27-1.55.49-3.19.64-4.91S42,5.74,42,4.68ZM50.32,1c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,7.2,7.2,0,0,1-.66,1.93,3.45,3.45,0,0,1-.77,1,5.58,5.58,0,0,1-.8.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.85.85,0,0,0,.69.42v.77H48.69l-1.36-9.92H47l-.75,6.25-.1,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H43.27v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L45.84,4.18c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46A2.67,2.67,0,0,1,50.32,1Zm-.73,3.34a7.2,7.2,0,0,0-.26-2.09c-.18-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,4.46,4.46,0,0,0-.2,1.06L47.1,9.65a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,49,8.31a10,10,0,0,0,.4-1.65A12.71,12.71,0,0,0,49.59,4.37Zm11.1-3.3c.77.74,1.16,2.1,1.16,4.09a8.51,8.51,0,0,1-.94,4.28A2.78,2.78,0,0,1,58.48,11h-.36l-.73-.12-.69,6-.11,1c0,.1,0,.2,0,.3s0,.2,0,.3a1.7,1.7,0,0,0,.17.95,1.47,1.47,0,0,0,.75.32v.77H53.77v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L56.34,4.17l.09-.9c0-.31,0-.55,0-.74a1.58,1.58,0,0,0-.25-1,1.33,1.33,0,0,0-.67-.23V.48h3.62A2.11,2.11,0,0,1,60.69,1.07ZM60,4.32a7,7,0,0,0-.25-2.06c-.17-.53-.45-.8-.84-.8a.4.4,0,0,0-.4.29,6.14,6.14,0,0,0-.2,1L57.5,9.93l.23.06h.21a1.3,1.3,0,0,0,1-.36,3.17,3.17,0,0,0,.6-1.2,12.69,12.69,0,0,0,.36-2A19.64,19.64,0,0,0,60,4.32Zm10.6-3.06V.48H68v.78a1.17,1.17,0,0,1,.68.32A2.43,2.43,0,0,1,69,3.05c0,.32,0,.85-.11,1.6,0-.12,0,.27-.12,1.18l-.73,6.26a36.28,36.28,0,0,1-.8,4.86c-.45,1.65-1.07,2.47-1.87,2.47a1.27,1.27,0,0,1-1.13-.78,5.05,5.05,0,0,1-.41-2.27c0-.43,0-1.1.13-2,.05-.51.12-1.17.21-2l1-9a4.69,4.69,0,0,1,.38-1.69,1.24,1.24,0,0,1,.8-.47V.48H62.55v.78a1.39,1.39,0,0,1,.74.31,1.56,1.56,0,0,1,.17.91c0,.21,0,.47,0,.76s-.06.6-.1.94l-.85,7.36c-.14,1.15-.23,2-.27,2.42-.06.76-.1,1.44-.1,2a7.4,7.4,0,0,0,.81,3.78,2.35,2.35,0,0,0,2,1.35c1.14,0,2-.91,2.6-2.74a35.69,35.69,0,0,0,1-5.7l.79-6.85a30.83,30.83,0,0,1,.58-3.7A1.15,1.15,0,0,1,70.61,1.26Zm5.86,10a7.16,7.16,0,0,1,.56,3.1,10.31,10.31,0,0,1-.86,4.34,2.93,2.93,0,0,1-2.86,1.87h-3.8v-.77a1.07,1.07,0,0,0,.59-.41,4.64,4.64,0,0,0,.43-1.73L72.08,4.17c0-.4.08-.73.1-1s0-.46,0-.61a1.83,1.83,0,0,0-.19-1,1.22,1.22,0,0,0-.73-.28V.48h3.43a2.58,2.58,0,0,1,2.19,1.06A5.92,5.92,0,0,1,77.69,5a6.3,6.3,0,0,1-1,3.67,4.18,4.18,0,0,1-1.39,1.24A4.36,4.36,0,0,1,76.47,11.24Zm-1.36,2.49a4.59,4.59,0,0,0-.6-2.79,2,2,0,0,0-1.3-.52l-.84,7.32c0,.12,0,.25,0,.4s0,.33,0,.52a1.06,1.06,0,0,0,.27.84.77.77,0,0,0,.48.11c.8,0,1.38-.87,1.73-2.63A17.3,17.3,0,0,0,75.11,13.73Zm.1-5.38a7.33,7.33,0,0,0,.52-2.15,15,15,0,0,0,.11-1.77,7.89,7.89,0,0,0-.24-2.14c-.16-.55-.46-.83-.93-.83a.42.42,0,0,0-.4.33,4.42,4.42,0,0,0-.19,1l-.77,6.73a5.23,5.23,0,0,0,1.27-.36A1.77,1.77,0,0,0,75.21,8.35Zm9.61,6.24a9.73,9.73,0,0,1-1.66,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1,1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44L81.91,3.41a4.53,4.53,0,0,1,.38-1.66,1.47,1.47,0,0,1,.88-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1L78.42,17.62a5.28,5.28,0,0,1-.35,1.63,1.12,1.12,0,0,1-.67.53v.77h7l.73-5.83ZM90.09,1.26V.48H86.34v.78a1.38,1.38,0,0,1,.74.32,1.59,1.59,0,0,1,.18.95q0,.3,0,.69c0,.25-.06.57-.11.95L85.58,17.64a5.41,5.41,0,0,1-.36,1.61,1.07,1.07,0,0,1-.66.53v.77h3.75v-.77a1.47,1.47,0,0,1-.75-.32,1.78,1.78,0,0,1-.17-1c0-.08,0-.18,0-.28s0-.2,0-.3l.1-1L89.07,3.41a5.68,5.68,0,0,1,.35-1.62A1.1,1.1,0,0,1,90.09,1.26Zm7-.62a.33.33,0,0,1-.3.24,3.1,3.1,0,0,1-.82-.44A2.5,2.5,0,0,0,94.59,0Q92.51,0,91,4a26.57,26.57,0,0,0-1.51,9.39,13.57,13.57,0,0,0,1,5.67c.66,1.41,1.49,2.11,2.5,2.11A2.46,2.46,0,0,0,94.79,20a9.66,9.66,0,0,0,1.55-3.4L96,16a12.68,12.68,0,0,1-.89,2.13c-.54,1-1.12,1.45-1.74,1.45-.47,0-.91-.39-1.31-1.15a10.33,10.33,0,0,1-.6-4.27,36.59,36.59,0,0,1,1-8.43c.72-3.08,1.57-4.63,2.54-4.63.48,0,.88.39,1.19,1.16a10,10,0,0,1,.47,3.53V6.1c0,.07,0,.32,0,.74L97,7l.64-7h-.38A4.28,4.28,0,0,1,97,.64Zm17.57,14,.31.13-.75,5.83h-9.45l-1.35-9.92H103l-.74,6.25-.11,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H99.3v-.77a1.12,1.12,0,0,0,.67-.53,5.18,5.18,0,0,0,.35-1.61l1.55-13.46c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46a2.64,2.64,0,0,1,1.8.55c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,6.57,6.57,0,0,1-.66,1.93,3.61,3.61,0,0,1-.76,1,6.48,6.48,0,0,1-.81.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.84.84,0,0,0,.65.4,1.06,1.06,0,0,0,.64-.51,5.41,5.41,0,0,0,.36-1.61l1.54-13.47c0-.34.07-.65.1-.92s0-.52,0-.72a1.61,1.61,0,0,0-.17-.95,1.31,1.31,0,0,0-.74-.32V.48h6.78l-.53,5.7-.34-.13a11.8,11.8,0,0,0-.3-3.09,1.92,1.92,0,0,0-2-1.54c-.33,0-.55.1-.64.29a3.46,3.46,0,0,0-.24,1.07L111,9.45a2.6,2.6,0,0,0,1.72-.51,7.79,7.79,0,0,0,.86-2.66l.35.11-.93,8.2-.35-.15c0-.28,0-.53,0-.74v-.52a4.42,4.42,0,0,0-.37-2.18,1.56,1.56,0,0,0-1.44-.58l-.83,7.32c0,.18,0,.35,0,.51s0,.3,0,.4a1.45,1.45,0,0,0,.13.67c.09.18.28.26.57.26a2.72,2.72,0,0,0,2-.76A8.33,8.33,0,0,0,114.61,14.59ZM105,8.31a9.81,9.81,0,0,0,.41-1.65,13.72,13.72,0,0,0,.18-2.29,6.87,6.87,0,0,0-.26-2.09c-.17-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,5.05,5.05,0,0,0-.2,1.06l-.76,6.87a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,105,8.31Zm17.51,6.28a9.86,9.86,0,0,1-1.67,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1.1,1.1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44l1.64-14.32A4.53,4.53,0,0,1,120,1.75a1.47,1.47,0,0,1,.89-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1l-1.55,13.45a5.28,5.28,0,0,1-.35,1.63,1.1,1.1,0,0,1-.66.53v.77h7l.74-5.83Zm7.09,0a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33,0-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51l.75-6.67A3.46,3.46,0,0,1,127,1.71c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13.54-5.7H124v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83Zm8.45,5.24v.72h-3.83v-.72a1.11,1.11,0,0,0,.77-.41,2.52,2.52,0,0,0,.23-1.31c0-.23,0-.77-.07-1.62,0-.17-.05-.9-.13-2.18h-2.71l-.74,3c0,.2-.09.43-.13.67a4.44,4.44,0,0,0-.06.71,1.27,1.27,0,0,0,.16.79,1.35,1.35,0,0,0,.65.3v.72h-2.47v-.72a1.66,1.66,0,0,0,.52-.54,7.25,7.25,0,0,0,.55-1.58L135.49.07h.33L137,17.23a8.87,8.87,0,0,0,.3,2.11A.9.9,0,0,0,138.08,19.83ZM135,13.12l-.47-7.3-1.86,7.3Zm7.88-4-1.09-2.13a6.38,6.38,0,0,1-.39-1,6.65,6.65,0,0,1-.23-1.82,6.93,6.93,0,0,1,.23-1.8q.33-1.26,1-1.26c.57,0,1,.53,1.3,1.57a10.87,10.87,0,0,1,.36,2.39l0,1,.33.1.51-6h-.38a2.26,2.26,0,0,1-.2.54.38.38,0,0,1-.34.22.54.54,0,0,1-.19-.05l-.22-.13-.32-.25a2.36,2.36,0,0,0-.41-.25,1.82,1.82,0,0,0-.7-.16c-.81,0-1.44.57-1.9,1.7a11.21,11.21,0,0,0-.68,4.12,12.36,12.36,0,0,0,1.55,5.58,10.74,10.74,0,0,1,1.54,4.78,7.8,7.8,0,0,1-.41,2.67c-.28.76-.67,1.15-1.17,1.15a1.07,1.07,0,0,1-.79-.4,3.78,3.78,0,0,1-.64-1.18,7.79,7.79,0,0,1-.42-1.95c-.05-.44-.08-1.14-.11-2.1l-.36-.06-.46,6.73h.38a6.32,6.32,0,0,1,.2-.83.31.31,0,0,1,.3-.24.21.21,0,0,1,.14,0,1.06,1.06,0,0,1,.22.18l.32.27a3,3,0,0,0,.69.44,1.72,1.72,0,0,0,.69.15c.92,0,1.64-.63,2.16-1.91a11.22,11.22,0,0,0,.78-4.28,12.2,12.2,0,0,0-.4-3.29A14.21,14.21,0,0,0,142.85,9.07Zm6.36-7.36c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13L153,.48h-6.79v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83-.31-.13a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33.05-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51L149,2.78A3.46,3.46,0,0,1,149.21,1.71Z',opacity:1,strokeColor:'',fillColor:'#192760',width:152.969,height:21.152,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'ForComment':case'For Comment':{stampCollection={iconName:'For Comment',// eslint-disable-next-line max-len
pathdata:'M14.1.48l-.89,5.6L12.65,6a7.14,7.14,0,0,0-.48-3c-.54-1-1.6-1.54-3.19-1.54a1.37,1.37,0,0,0-1,.26,2.06,2.06,0,0,0-.42,1.08L6.35,9.28a6,6,0,0,0,2.73-.52,5.92,5.92,0,0,0,1.41-2.59l.58.1L9.52,14.34,9,14.2c0-.29,0-.54.05-.75s0-.38,0-.49a3.15,3.15,0,0,0-.55-2.09,3.07,3.07,0,0,0-2.32-.64L4.77,17.44c0,.13,0,.24-.06.35s0,.21,0,.31a1.23,1.23,0,0,0,.53,1.17,2,2,0,0,0,1,.19v.76H0v-.76a1.91,1.91,0,0,0,1.12-.54,3.56,3.56,0,0,0,.58-1.58L4.27,4.11c.05-.27.09-.51.12-.71a7.42,7.42,0,0,0,.1-1c0-.48-.1-.77-.29-.9A3.54,3.54,0,0,0,3,1.24V.48ZM28,7.11a17.42,17.42,0,0,1-2.57,9.07q-2.75,4.61-6.3,4.6a4.33,4.33,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.41-5.14,17.56,17.56,0,0,1,2.62-9.19Q19.43,0,22.82,0a4.48,4.48,0,0,1,3.72,1.92A8.46,8.46,0,0,1,28,7.11ZM25,4.6a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.88,2.88,0,0,0,2.25-1.29,16.48,16.48,0,0,0,2.1-4.93,37.09,37.09,0,0,0,1.07-4.83A28.26,28.26,0,0,0,25,4.6Zm15.83.16a6.49,6.49,0,0,1-.33,2,5.12,5.12,0,0,1-1.09,1.9,4.65,4.65,0,0,1-1.27,1,11.5,11.5,0,0,1-1.35.52c.07.3.12.49.14.57l1.62,6.66a3.79,3.79,0,0,0,.7,1.7,1.75,1.75,0,0,0,1.14.41v.76H36.13l-2.26-9.76h-.59L32,16.6l-.17,1,0,.25a2.62,2.62,0,0,0,0,.28q0,.8.27,1a3,3,0,0,0,1.25.32v.76H27.11v-.76a1.93,1.93,0,0,0,1.11-.52,3.54,3.54,0,0,0,.59-1.59L31.38,4.11c.06-.27.1-.51.13-.71a6,6,0,0,0,.1-1c0-.47-.1-.77-.29-.9a3.54,3.54,0,0,0-1.24-.3V.48h5.76a6.77,6.77,0,0,1,3,.53Q40.79,2,40.79,4.76Zm-3.16-.47a4.35,4.35,0,0,0-.44-2,1.54,1.54,0,0,0-1.48-.81.75.75,0,0,0-.63.26,2.78,2.78,0,0,0-.33,1.05L33.48,9.5a6.85,6.85,0,0,0,1.67-.2,2.55,2.55,0,0,0,1.49-1.13,6.37,6.37,0,0,0,.67-1.62A7.81,7.81,0,0,0,37.63,4.29ZM58.49,0a2.61,2.61,0,0,1-.32.63.55.55,0,0,1-.49.24A7,7,0,0,1,56.31.43,6.15,6.15,0,0,0,54.1,0q-3.47,0-6,3.92a16.73,16.73,0,0,0-2.51,9.24,8.73,8.73,0,0,0,1.64,5.57,5,5,0,0,0,7.19,1A8.89,8.89,0,0,0,57,16.37l-.64-.65a10.47,10.47,0,0,1-1.47,2.09A4,4,0,0,1,52,19.24a2.89,2.89,0,0,1-2.17-1.13c-.67-.75-1-2.15-1-4.2a22.2,22.2,0,0,1,1.62-8.29q1.8-4.54,4.23-4.55a2.33,2.33,0,0,1,2,1.14,6.16,6.16,0,0,1,.78,3.47c0,.14,0,.25,0,.32s0,.32,0,.73l.66.17L59.12,0ZM72.71,7.11a17.33,17.33,0,0,1-2.57,9.07c-1.82,3.07-3.93,4.6-6.3,4.6a4.34,4.34,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.4-5.14A17.55,17.55,0,0,1,61.4,4.53Q64.15,0,67.54,0a4.48,4.48,0,0,1,3.72,1.92A8.39,8.39,0,0,1,72.71,7.11Zm-3-2.51a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.85,2.85,0,0,0,2.25-1.29,16,16,0,0,0,2.1-4.93,34.08,34.08,0,0,0,1.07-4.83A28.26,28.26,0,0,0,69.68,4.6Zm17.5,13.62a4.63,4.63,0,0,1,.07-.75c0-.3.09-.59.15-.88L90,3.31a3.32,3.32,0,0,1,.7-1.67,2,2,0,0,1,1-.4V.48H87.23l-6.4,13.91L79.63.48H74.84v.76a3.29,3.29,0,0,1,1.2.21c.21.11.31.37.31.78a4.35,4.35,0,0,1-.07.75c0,.28-.11.61-.18,1L74,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76H76.2v-.76a2.31,2.31,0,0,1-1.09-.29,1.6,1.6,0,0,1-.58-1.43,8.8,8.8,0,0,1,.14-1.42c0-.37.14-.82.24-1.37L77,4.24l1.41,16.37H79L86.89,3.76,84.25,17.34A2.94,2.94,0,0,1,83.61,19a2.87,2.87,0,0,1-1.44.49v.76h6.54v-.76a3.39,3.39,0,0,1-1.23-.31Q87.18,19,87.18,18.22Zm17.73,0a4.63,4.63,0,0,1,.07-.75c0-.3.1-.59.16-.88l2.58-13.28a3.24,3.24,0,0,1,.69-1.67,2,2,0,0,1,1-.4V.48H105l-6.4,13.91L97.36.48H92.57v.76a3.29,3.29,0,0,1,1.2.21c.21.11.32.37.32.78A5.65,5.65,0,0,1,94,3c0,.28-.11.61-.19,1L91.69,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76h4.38v-.76a2.33,2.33,0,0,1-1.1-.29,1.6,1.6,0,0,1-.58-1.43,10.12,10.12,0,0,1,.14-1.42c.06-.37.14-.82.25-1.37L94.76,4.24l1.41,16.37h.59l7.86-16.85L102,17.34a3.1,3.1,0,0,1-.64,1.63,3,3,0,0,1-1.45.49v.76h6.55v-.76a3.46,3.46,0,0,1-1.24-.31Q104.91,19,104.91,18.22Zm11.52.3a6.56,6.56,0,0,1-3.25.75,1.27,1.27,0,0,1-.94-.26,1,1,0,0,1-.22-.66,3,3,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.38-7.2a3.65,3.65,0,0,1,2.4.57,2.92,2.92,0,0,1,.62,2.15c0,.14,0,.31,0,.51s0,.45-.06.73l.58.15,1.55-8.08-.58-.1a5.92,5.92,0,0,1-1.44,2.61,6.32,6.32,0,0,1-2.85.51L115,2.74a2.44,2.44,0,0,1,.39-1.06,1.43,1.43,0,0,1,1.07-.28c1.63,0,2.71.5,3.25,1.51a7.37,7.37,0,0,1,.49,3l.56.13.89-5.6H110.31v.76a3.28,3.28,0,0,1,1.25.31c.19.13.28.44.28.94a4.83,4.83,0,0,1-.06.7c0,.28-.09.58-.16.92l-2.57,13.24a3.54,3.54,0,0,1-.59,1.59,1.93,1.93,0,0,1-1.11.52v.76H119l1.24-5.74-.51-.12A7.7,7.7,0,0,1,116.43,18.52ZM136.6,1.24V.48h-4.3v.76a2.5,2.5,0,0,1,1.14.33A1.8,1.8,0,0,1,134,3.05a10.58,10.58,0,0,1-.14,1.34c-.05.41-.13.87-.22,1.39L132,14.12,127.41.48h-4.22v.76a2.53,2.53,0,0,1,1,.24,1.82,1.82,0,0,1,.64,1.06l.1.3L122.55,15a19.54,19.54,0,0,1-1,3.61,1.59,1.59,0,0,1-1.18.9v.76h4.37v-.76a2.5,2.5,0,0,1-1.12-.32,1.67,1.67,0,0,1-.55-1.44,5.32,5.32,0,0,1,0-.79c0-.43.17-1.09.34-2l2.08-10.57L131,20.71h.52l2.91-15a24.72,24.72,0,0,1,.85-3.42,1.42,1.42,0,0,1,1-1Zm.48-.76-.81,5,.54.2a8.1,8.1,0,0,1,1.85-3.16,3.63,3.63,0,0,1,2.66-1.06l-3.08,15.85a3,3,0,0,1-.86,1.85,2.42,2.42,0,0,1-1.32.26v.76H143v-.76a4,4,0,0,1-1.41-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.17-1,2.92-15.1a2.64,2.64,0,0,1,1.76.63c.74.7,1.12,2,1.15,3.94l.55.07L148.6.48Z',opacity:1,strokeColor:'',fillColor:'#192760',width:148.603,height:20.812,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'Void':{stampCollection={iconName:'Void',// eslint-disable-next-line max-len
pathdata:'M27.88,1.72a6.53,6.53,0,0,0-1.81,1.42L9,21.12H7.54L4.09,5.83A11.83,11.83,0,0,0,2.82,2Q2.3,1.4,0,1.26V.48H13.54v.78a11,11,0,0,0-2.37.18q-1.11.27-1.11,1.05a1.43,1.43,0,0,0,0,.29c0,.09,0,.19,0,.28l2.35,12,8.56-9a25.11,25.11,0,0,0,1.83-2.14,3.15,3.15,0,0,0,.82-1.68c0-.41-.28-.69-.84-.82a12.57,12.57,0,0,0-2.08-.15V.48h8.7v.78A7.11,7.11,0,0,0,27.88,1.72ZM57.37,7.23q0,4.85-5.56,9.22a21.41,21.41,0,0,1-13.62,4.67,14.41,14.41,0,0,1-7.89-1.95,6,6,0,0,1-3-5.23q0-4.92,5.66-9.34A21.12,21.12,0,0,1,46.2,0a15,15,0,0,1,8,2A6,6,0,0,1,57.37,7.23ZM50.82,4.68a3.46,3.46,0,0,0-1.13-2.59A4.93,4.93,0,0,0,46.17,1q-5.64,0-9.49,6.64c-1.94,3.36-2.92,6.16-2.92,8.4a4.27,4.27,0,0,0,.56,2.23q1.08,1.8,3.93,1.8a9.24,9.24,0,0,0,4.87-1.31,15.24,15.24,0,0,0,4.54-5A21.81,21.81,0,0,0,50,8.85,14.23,14.23,0,0,0,50.82,4.68ZM66,18.49a1.49,1.49,0,0,1,0-.28c0-.1,0-.2.08-.3l.35-1L72,3.41a2.94,2.94,0,0,1,1.25-1.62,6.79,6.79,0,0,1,2.4-.53V.48H62.19v.78a13.27,13.27,0,0,1,2.67.32.88.88,0,0,1,.64.95,2.38,2.38,0,0,1-.12.69c-.08.25-.2.57-.36.95L59.45,17.64a3,3,0,0,1-1.28,1.61,6.84,6.84,0,0,1-2.39.53v.77H69.27v-.77a13.72,13.72,0,0,1-2.67-.32A.9.9,0,0,1,66,18.49Zm38.25-9.67q0,4.59-5.15,8-5.73,3.77-15,3.76h-13v-.77a7.4,7.4,0,0,0,2.1-.41,3.08,3.08,0,0,0,1.57-1.75L80.28,4.17c.16-.38.28-.7.37-1a2.27,2.27,0,0,0,.12-.68.89.89,0,0,0-.64-.95,13.41,13.41,0,0,0-2.68-.32V.48H90.6q6.68,0,10.15,2.27A6.92,6.92,0,0,1,104.23,8.82ZM97.58,7a5.28,5.28,0,0,0-1.13-3.54q-1.77-2-6.14-2a4.24,4.24,0,0,0-2,.32,1.77,1.77,0,0,0-.74.84L81.35,17.73a1.72,1.72,0,0,0-.12.39,1.89,1.89,0,0,0,0,.31.89.89,0,0,0,.54.85,5.1,5.1,0,0,0,2,.26q8.07,0,11.68-5.5A12.61,12.61,0,0,0,97.58,7Z',opacity:1,strokeColor:'',fillColor:'#8a251a',width:104.233,height:21.123,stampFillColor:'#f6dedd',stampStrokeColor:''};}break;case'PreliminaryResults':case'Preliminary Results':{stampCollection={iconName:'Preliminary Results',// eslint-disable-next-line max-len
pathdata:'M9.23,5.08q0-3-1.32-4.08A2.6,2.6,0,0,0,6.17.41H2v.78a1.5,1.5,0,0,1,.76.23,1.39,1.39,0,0,1,.28,1c0,.19,0,.43,0,.73s-.07.61-.1.91L1.17,17.56a4.76,4.76,0,0,1-.41,1.62A1.18,1.18,0,0,1,0,19.7v.78H4.25V19.7a1.77,1.77,0,0,1-.86-.31,1.5,1.5,0,0,1-.2-1c0-.09,0-.19,0-.3a1.36,1.36,0,0,1,0-.29l.12-1,.78-6L5,11h.41a3.21,3.21,0,0,0,2.78-1.6A7.57,7.57,0,0,0,9.23,5.08ZM7,6.32a10,10,0,0,1-.42,2,3,3,0,0,1-.68,1.21,1.63,1.63,0,0,1-1.13.36H4.53l-.27-.06,1-7.15a4.75,4.75,0,0,1,.22-1,.45.45,0,0,1,.46-.29,1,1,0,0,1,1,.8,6.22,6.22,0,0,1,.29,2.06A18,18,0,0,1,7,6.32ZM23.4,18.75a3.35,3.35,0,0,1-2.23.76.68.68,0,0,1-.64-.26,1.27,1.27,0,0,1-.16-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.4-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67a3,3,0,0,1,.28-1.08c.11-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,26,6l.39.13L27,.41H19.2v.78a1.67,1.67,0,0,1,.86.31,1.52,1.52,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93L18.33,17.56a4.59,4.59,0,0,1-.4,1.62,1.22,1.22,0,0,1-.74.51,1,1,0,0,1-.73-.4A5.08,5.08,0,0,1,16,17.56l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.23,3.23,0,0,0,.87-1,6,6,0,0,0,.76-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.4,3.4,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21-.05.45-.09.73L9.31,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8L26,14.65l-.35-.13A7.9,7.9,0,0,1,23.4,18.75ZM13.67,9.38a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,13.67,9.38ZM35,14.65l-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L29.15,4.1q.08-.57.12-1c0-.26,0-.48,0-.68a1.42,1.42,0,0,0-.21-1,1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49,4.17,4.17,0,0,0-.44,1.66L29.49,17.65c0,.16,0,.31,0,.45a3.47,3.47,0,0,0,0,.48,1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm2.79,4.73a1.61,1.61,0,0,0,.85.32v.78H34.39V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L37.33,4.1c.05-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L37.78,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,37.83,19.38Zm12.2,0a1.81,1.81,0,0,0,.85.31v.78h-4.5V19.7a1.64,1.64,0,0,0,1-.49,4,4,0,0,0,.44-1.66l1.81-13.8-5.4,17.12h-.4l-1-16.64L41.39,15.12c-.07.56-.13,1-.17,1.39-.06.61-.09,1.09-.09,1.45a2,2,0,0,0,.4,1.45,1.19,1.19,0,0,0,.75.29v.78h-3V19.7a1.21,1.21,0,0,0,.81-.87,29.47,29.47,0,0,0,.66-3.71L42.21,4c0-.38.09-.71.12-1a5.41,5.41,0,0,0,.05-.75c0-.42-.07-.69-.21-.8a1.69,1.69,0,0,0-.83-.21V.41h3.29l.83,14.14L49.85.41h3.07v.78a1.12,1.12,0,0,0-.69.41,4.08,4.08,0,0,0-.48,1.69L50,16.79c0,.29-.08.59-.11.89s0,.56,0,.76A1.41,1.41,0,0,0,50,19.39Zm5,0a1.61,1.61,0,0,0,.85.32v.78H51.56V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L54.5,4.1c0-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L55,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,55,19.38ZM66.13,5.75,64.13,21h-.36L60,4.38,58.6,15.12c-.12.89-.2,1.55-.23,2a7.32,7.32,0,0,0,0,.81,2.17,2.17,0,0,0,.38,1.46,1.32,1.32,0,0,0,.77.32v.78h-3V19.7a1.26,1.26,0,0,0,.81-.91,29,29,0,0,0,.65-3.67L59.56,2.81,59.5,2.5a2,2,0,0,0-.45-1.06,1.21,1.21,0,0,0-.67-.25V.41h2.9L64.4,14.28,65.52,5.8c.07-.53.12-1,.16-1.41.06-.62.09-1.08.09-1.36a2.45,2.45,0,0,0-.34-1.51,1.39,1.39,0,0,0-.79-.33V.41h3v.78l-.21.06c-.29.08-.52.43-.68,1A34.22,34.22,0,0,0,66.13,5.75ZM83.27,1A3.41,3.41,0,0,0,81.21.41h-4v.78a1.74,1.74,0,0,1,.85.3c.14.13.2.43.2.91,0,.24,0,.56-.06,1,0,.21-.06.45-.09.73L76.38,17.56A4.53,4.53,0,0,1,76,19.18a1.18,1.18,0,0,1-.76.52v0a1,1,0,0,1-.67-.45,8.11,8.11,0,0,1-.34-2.12L72.83,0h-.38L67.11,17.64a6.42,6.42,0,0,1-.63,1.58,1.84,1.84,0,0,1-.59.54v.72h2.83v-.72a1.68,1.68,0,0,1-.75-.31,1.16,1.16,0,0,1-.18-.79,3.46,3.46,0,0,1,.07-.7,5.16,5.16,0,0,1,.15-.67l.84-3H72c.08,1.28.13,2,.13,2.18.06.85.08,1.39.08,1.61a2.26,2.26,0,0,1-.25,1.31,1.43,1.43,0,0,1-.88.42v.72H79.5V19.7a1.58,1.58,0,0,1-.86-.32,1.7,1.7,0,0,1-.19-1c0-.1,0-.2,0-.29a1.81,1.81,0,0,1,0-.25l.12-1,.85-6.24h.41l1.55,9.92h2.9V19.7a1,1,0,0,1-.79-.41A5.15,5.15,0,0,1,83,17.56l-1.11-6.77c0-.08,0-.27-.09-.58a5.53,5.53,0,0,0,.92-.53,3.52,3.52,0,0,0,.87-1,6.16,6.16,0,0,0,.75-1.93,9.67,9.67,0,0,0,.23-2C84.61,2.89,84.16,1.62,83.27,1ZM69.19,13.05l2.13-7.3.53,7.3Zm13-6.47a8.39,8.39,0,0,1-.46,1.65,2,2,0,0,1-1,1.15,3.29,3.29,0,0,1-1.14.2l.87-6.87a3.61,3.61,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08A11,11,0,0,1,82.22,6.58ZM90.48.41h3v.78a1.07,1.07,0,0,0-.55.41,6.13,6.13,0,0,0-.77,1.62l-2.72,8-.72,5.55c0,.22-.07.51-.1.86a7.29,7.29,0,0,0-.06.73,1.46,1.46,0,0,0,.29,1.07,1.61,1.61,0,0,0,.83.25v.78H85V19.7a1.56,1.56,0,0,0,.93-.39,3.7,3.7,0,0,0,.53-1.76l.85-6.45-1.26-8a6.07,6.07,0,0,0-.36-1.47.81.81,0,0,0-.7-.4V.41h4v.78a1.32,1.32,0,0,0-.76.23c-.15.12-.23.4-.23.84a4.46,4.46,0,0,0,0,.48c0,.19,0,.39.07.6l1,6.54,1.88-5.55c.1-.29.18-.55.24-.79a4.68,4.68,0,0,0,.14-1.11,1.35,1.35,0,0,0-.31-1,1.14,1.14,0,0,0-.66-.2Zm18.61,1.22c.1-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,112.39,6l.38.13.62-5.7h-7.76v.78a1.67,1.67,0,0,1,.86.31,1.59,1.59,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93l-1.77,13.46a4.53,4.53,0,0,1-.41,1.62,1.17,1.17,0,0,1-.73.51,1,1,0,0,1-.73-.4,5.08,5.08,0,0,1-.49-1.73l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.4,3.4,0,0,0,.88-1,6.16,6.16,0,0,0,.75-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.38,3.38,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21,0,.45-.09.73L95.74,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8l.85-5.83-.35-.13a7.9,7.9,0,0,1-2.24,4.23,3.35,3.35,0,0,1-2.23.76.71.71,0,0,1-.65-.26,1.37,1.37,0,0,1-.15-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.41-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67A3,3,0,0,1,109.09,1.63Zm-9,7.75a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,100.1,9.38ZM120.18.07h.43l-.59,6-.37-.1-.05-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57s-.95.42-1.21,1.26a6.17,6.17,0,0,0-.25,1.8,5.92,5.92,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L118.19,9a12.6,12.6,0,0,1,1.12,2.57,10.75,10.75,0,0,1,.47,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.17,2.17,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,117.46,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.15,1.15,0,0,0,.25.12.47.47,0,0,0,.22,0A.44.44,0,0,0,120,.62,2.6,2.6,0,0,0,120.18.07Zm10,2a26.67,26.67,0,0,0-.66,3.7l-.9,6.85a32.12,32.12,0,0,1-1.16,5.7c-.68,1.83-1.67,2.74-3,2.74a2.7,2.7,0,0,1-2.28-1.36,6.67,6.67,0,0,1-.92-3.77,19.46,19.46,0,0,1,.11-2c0-.46.15-1.26.3-2.42l1-7.36c0-.33.08-.64.11-.93s0-.55,0-.77a1.38,1.38,0,0,0-.2-.91,1.74,1.74,0,0,0-.85-.3V.41h4.43v.78a1.39,1.39,0,0,0-.91.47,4.25,4.25,0,0,0-.44,1.68l-1.18,9c-.11.8-.19,1.46-.25,2q-.15,1.37-.15,2a4.41,4.41,0,0,0,.48,2.27,1.44,1.44,0,0,0,1.29.78c.91,0,1.62-.82,2.13-2.48a30.62,30.62,0,0,0,.91-4.85L129,5.76c.1-.91.14-1.3.13-1.19a14.64,14.64,0,0,0,.13-1.6,2.12,2.12,0,0,0-.38-1.46,1.35,1.35,0,0,0-.77-.32V.41H131v.78A1.18,1.18,0,0,0,130.23,2.06Zm8.41,12.59-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L132.75,4.1q.08-.57.12-1c0-.26,0-.48,0-.68,0-.51-.06-.83-.2-1a1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49A4.17,4.17,0,0,0,135,3.34l-1.87,14.31c0,.16,0,.31-.05.45s0,.3,0,.48a1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm7.72-8.56a7.63,7.63,0,0,0-.79-4,1.53,1.53,0,0,0-1.21-.64l-2,15.35-.12,1a2.47,2.47,0,0,0,0,.34,2.35,2.35,0,0,0,0,.26c0,.52.08.84.23,1a2,2,0,0,0,1,.3v.78h-4.76V19.7a1.18,1.18,0,0,0,.9-.26,3.75,3.75,0,0,0,.6-1.88l2.11-16.11a2.17,2.17,0,0,0-1.83,1.08,9.57,9.57,0,0,0-1.27,3.21l-.37-.2.56-5.13h7.91l-.52,5.76Zm3.41-3.79a6.17,6.17,0,0,0-.25,1.8,5.63,5.63,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L151.46,9a13.19,13.19,0,0,1,1.13,2.57,11.08,11.08,0,0,1,.46,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.21,2.21,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,150.73,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.34,1.34,0,0,0,.24.12.56.56,0,0,0,.23,0,.44.44,0,0,0,.39-.21,2.6,2.6,0,0,0,.23-.55h.43l-.59,6-.37-.1,0-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57S150,1.46,149.77,2.3Z',opacity:1,strokeColor:'',fillColor:'#192760',width:153.879,height:21.051,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;case'InformationOnly':case'Information Only':{stampCollection={iconName:'Information Only',// eslint-disable-next-line max-len
pathdata:'M4,19.14a2,2,0,0,0,1,.32v.76H0v-.76a1.42,1.42,0,0,0,.87-.52,4,4,0,0,0,.47-1.59l2-13.24c.06-.38.1-.69.13-1a5.73,5.73,0,0,0,0-.67c0-.5-.08-.81-.24-.94a2.2,2.2,0,0,0-1-.31V.48H7.26v.76a1.48,1.48,0,0,0-.88.52,4.14,4.14,0,0,0-.45,1.6l-2,13.24-.13,1c0,.1,0,.19,0,.3a2.72,2.72,0,0,0,0,.28A1.32,1.32,0,0,0,4,19.14ZM18.17,1.3l.24-.06V.48H15v.76a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c-.05.41-.11.87-.18,1.39l-1.29,8.34L11.15.48H7.83v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L7.33,15a24.86,24.86,0,0,1-.76,3.61,1.32,1.32,0,0,1-.92.9v.76H9.09v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2L9.72,4.38,14,20.71h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42C17.57,1.72,17.83,1.38,18.17,1.3ZM19.33.48v.76a2.32,2.32,0,0,1,1,.3c.15.13.23.42.23.9,0,.23,0,.55-.07,1,0,.2-.06.44-.1.71l-2,13.23a4,4,0,0,1-.46,1.58,1.39,1.39,0,0,1-.88.54v.76h4.89v-.76a1.36,1.36,0,0,1-.78-.19,1.39,1.39,0,0,1-.41-1.17c0-.1,0-.21,0-.31s0-.22,0-.35l1.09-7.21a2.09,2.09,0,0,1,1.83.64A3.81,3.81,0,0,1,24.1,13c0,.11,0,.28,0,.49s0,.46,0,.75l.45.14,1.22-8.07-.46-.1a6.19,6.19,0,0,1-1.11,2.59A3.89,3.89,0,0,1,22,9.28l1-6.54a2.43,2.43,0,0,1,.33-1.08.93.93,0,0,1,.76-.26,2.45,2.45,0,0,1,2.52,1.54A9,9,0,0,1,27,6l.44.13.7-5.6ZM39.06,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19Q32.31,0,35,0a3.37,3.37,0,0,1,2.93,1.92A10.14,10.14,0,0,1,39.06,7.11ZM36.68,4.6a7,7,0,0,0-.42-2.55A1.37,1.37,0,0,0,35,1c-1.37,0-2.52,2.17-3.46,6.53a40.81,40.81,0,0,0-1.07,8.26,10,10,0,0,0,.21,2.2c.26,1.18.74,1.77,1.43,1.77s1.24-.43,1.78-1.29a18.75,18.75,0,0,0,1.65-4.93,43.28,43.28,0,0,0,.85-4.83A36.93,36.93,0,0,0,36.68,4.6ZM61,19.15a2.25,2.25,0,0,0,1,.31v.76H56.84v-.76A2,2,0,0,0,58,19a3.6,3.6,0,0,0,.5-1.63L60.56,3.76l-6.2,16.85H53.9L52.78,4.24,51.12,15c-.09.55-.15,1-.2,1.37a13,13,0,0,0-.11,1.42,1.8,1.8,0,0,0,.46,1.43,1.54,1.54,0,0,0,.86.29v.76H45.49l-1.78-9.76h-.47l-1,6.14-.13,1,0,.25c0,.09,0,.19,0,.28a1.47,1.47,0,0,0,.22,1,2,2,0,0,0,1,.32v.76H38.37v-.76a1.42,1.42,0,0,0,.88-.52,4.21,4.21,0,0,0,.46-1.59l2-13.24c0-.27.08-.51.11-.71a8.23,8.23,0,0,0,.07-1,1.23,1.23,0,0,0-.23-.9,2.32,2.32,0,0,0-1-.3V.48h4.54A4.34,4.34,0,0,1,47.62,1c1,.65,1.54,1.9,1.54,3.75a7.78,7.78,0,0,1-.26,2A5.56,5.56,0,0,1,48,8.62a3.87,3.87,0,0,1-1,1,8.06,8.06,0,0,1-1.06.52c.05.3.09.49.11.57l1.27,6.66a4.58,4.58,0,0,0,.55,1.7,1.23,1.23,0,0,0,.83.39,1.31,1.31,0,0,0,.86-.84A23,23,0,0,0,50.36,15L52.05,4c.06-.37.11-.7.15-1a7.42,7.42,0,0,0,0-.75c0-.41-.08-.67-.25-.78a2.09,2.09,0,0,0-.94-.21V.48h3.77l1,13.91,5-13.91h3.51v.76a1.46,1.46,0,0,0-.79.4A3.71,3.71,0,0,0,63,3.31L61,16.59c0,.29-.09.58-.13.88s-.05.55-.05.75Q60.79,19,61,19.15Zm-15.14-11a7.46,7.46,0,0,0,.53-1.62,9.54,9.54,0,0,0,.25-2.26,5.31,5.31,0,0,0-.35-2,1.18,1.18,0,0,0-1.16-.81.54.54,0,0,0-.5.26,3.37,3.37,0,0,0-.26,1.05l-1,6.76a4.28,4.28,0,0,0,1.31-.2A2.17,2.17,0,0,0,45.89,8.17ZM73.21,19.51v.71h-5v-.71a1.61,1.61,0,0,0,1-.41,1.92,1.92,0,0,0,.3-1.29c0-.22,0-.75-.09-1.58,0-.17-.06-.89-.16-2.15H65.68l-1,3c-.06.2-.12.42-.17.66a3.4,3.4,0,0,0-.08.69q0,.62.21.78a1.9,1.9,0,0,0,.86.3v.71H62.29v-.71A2,2,0,0,0,63,19a6.47,6.47,0,0,0,.72-1.56L69.82.07h.43L71.83,17A6.77,6.77,0,0,0,72.22,19,1.23,1.23,0,0,0,73.21,19.51Zm-4.08-6.6-.61-7.18-2.44,7.18ZM82.52,6.14l.6-5.66H74l-.63,5,.42.2a8.71,8.71,0,0,1,1.46-3.16,2.57,2.57,0,0,1,2.1-1.06L75,17.35a3.36,3.36,0,0,1-.68,1.85,1.57,1.57,0,0,1-1,.26v.76H78.7v-.76a2.69,2.69,0,0,1-1.11-.3c-.18-.13-.27-.45-.27-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.14-1L79.8,1.5a1.87,1.87,0,0,1,1.39.63c.58.7.88,2,.91,3.94ZM88.84.48H83.92v.76a2.31,2.31,0,0,1,1,.31c.15.13.23.44.23.94a5.56,5.56,0,0,1,0,.67c0,.26-.08.57-.14,1l-2,13.24a4,4,0,0,1-.47,1.59,1.36,1.36,0,0,1-.87.52v.76H86.5v-.76a2,2,0,0,1-1-.32,1.32,1.32,0,0,1-.23-.94c0-.09,0-.18,0-.28s0-.2,0-.3l.13-1,2-13.24A4.09,4.09,0,0,1,88,1.76a1.45,1.45,0,0,1,.87-.52ZM99.11,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19C91.63,1.51,93.25,0,95,0A3.36,3.36,0,0,1,98,1.92,10,10,0,0,1,99.11,7.11ZM96.72,4.6a7.18,7.18,0,0,0-.41-2.55c-.28-.7-.7-1-1.29-1-1.37,0-2.52,2.17-3.46,6.53a40.7,40.7,0,0,0-1.06,8.26,10,10,0,0,0,.2,2.2c.26,1.18.74,1.77,1.43,1.77a2.2,2.2,0,0,0,1.78-1.29,18.75,18.75,0,0,0,1.65-4.93,41.1,41.1,0,0,0,.85-4.83A34.65,34.65,0,0,0,96.72,4.6Zm11.1-3.36a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c0,.41-.11.87-.18,1.39l-1.29,8.34L104,.48h-3.33v.76a1.7,1.7,0,0,1,.78.24,2,2,0,0,1,.51,1.06l.07.3L100.13,15a24,24,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.45v-.76a1.67,1.67,0,0,1-.88-.32,1.88,1.88,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2l1.64-10.57,4.29,16.33h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42c.18-.59.44-.93.78-1l.23-.06V.48h-3.39ZM125,7.11a21,21,0,0,1-2,9.07c-1.45,3.07-3.1,4.6-5,4.6a3.28,3.28,0,0,1-2.87-1.92A10.29,10.29,0,0,1,114,13.72a21.22,21.22,0,0,1,2.06-9.19Q118.22,0,120.91,0a3.36,3.36,0,0,1,2.92,1.92A10,10,0,0,1,125,7.11ZM122.59,4.6a7,7,0,0,0-.41-2.55,1.37,1.37,0,0,0-1.28-1c-1.37,0-2.53,2.17-3.46,6.53a40.11,40.11,0,0,0-1.07,8.26,10.65,10.65,0,0,0,.2,2.2q.39,1.77,1.44,1.77a2.2,2.2,0,0,0,1.77-1.29,18.29,18.29,0,0,0,1.66-4.93,45.71,45.71,0,0,0,.85-4.83A36.53,36.53,0,0,0,122.59,4.6Zm14.26-3.3.24-.06V.48h-3.4v.76a1.74,1.74,0,0,1,.91.33,2.13,2.13,0,0,1,.4,1.48c0,.28,0,.73-.11,1.34,0,.41-.11.87-.18,1.39l-1.29,8.34L129.83.48h-3.32v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L126,15a27,27,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.44v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44c0-.26,0-.52,0-.79.05-.43.13-1.09.27-2l1.65-10.57,4.29,16.33h.41l2.29-15a31.07,31.07,0,0,1,.67-3.42C136.25,1.72,136.52,1.38,136.85,1.3Zm8.52,13.06a8.55,8.55,0,0,1-2.19,3.87,4.44,4.44,0,0,1-2.94,1,1,1,0,0,1-.68-.21.9.9,0,0,1-.24-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2.15-14.08a3.69,3.69,0,0,1,.5-1.64,2.22,2.22,0,0,1,1.16-.48V.48H138v.76a2.2,2.2,0,0,1,1,.31c.16.13.24.44.24.94a5.73,5.73,0,0,1-.05.67c0,.26-.07.57-.13,1l-2,13.23a4,4,0,0,1-.47,1.6,1.36,1.36,0,0,1-.87.52v.76h9.16l1-5.74ZM151.79.48v.76a1.52,1.52,0,0,1,.76.2,1.21,1.21,0,0,1,.37,1,4.09,4.09,0,0,1-.17,1.09c-.07.24-.16.5-.27.79L150.32,9.8l-1.18-6.44a4.51,4.51,0,0,1-.08-.6,4.37,4.37,0,0,1,0-.46c0-.43.09-.71.27-.83a1.75,1.75,0,0,1,.87-.23V.48h-4.63v.76a.94.94,0,0,1,.8.4,5.08,5.08,0,0,1,.42,1.44L148.2,11l-1,6.35a3.35,3.35,0,0,1-.61,1.73,1.91,1.91,0,0,1-1.06.39v.76h5.32v-.76a2,2,0,0,1-.95-.25,1.29,1.29,0,0,1-.33-1.05,7.29,7.29,0,0,1,.06-.73q.06-.51.12-.84l.82-5.46,3.12-7.89a5.54,5.54,0,0,1,.89-1.59,1.28,1.28,0,0,1,.63-.41V.48Z',opacity:1,strokeColor:'',fillColor:'#192760',width:155.237,height:20.783,stampFillColor:'#dce3ef',stampStrokeColor:''};}break;}if(stampCollection){stampCollection.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.currentStampAnnotation=stampCollection;return stampCollection;}}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.saveStampAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));if(this.pdfViewer.nameTable[pageAnnotationObject.annotations[z].randomId]){pageAnnotationObject.annotations[z].wrapperBounds=this.pdfViewer.nameTable[pageAnnotationObject.annotations[z].randomId].wrapper.bounds;}}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.storeStampInSession=function(pageNumber,annotation){// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);var currentAnnotation=Math.round(JSON.stringify(annotation).length/1024);if(sessionSize+currentAnnotation>4500){this.pdfViewerBase.isStorageExceed=true;this.pdfViewer.annotationModule.clearAnnotationStorage();}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');var index=0;if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}if(!storeObject){this.pdfViewer.annotationModule.storeAnnotationCollections(annotation,pageNumber);var shapeAnnotation={pageIndex:pageNumber,annotations:[]};shapeAnnotation.annotations.push(annotation);index=shapeAnnotation.annotations.indexOf(annotation);var annotationCollection=[];annotationCollection.push(shapeAnnotation);var annotationStringified=JSON.stringify(annotationCollection);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_stamp',annotationStringified);}}else{this.pdfViewer.annotationModule.storeAnnotationCollections(annotation,pageNumber);var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_stamp');}var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[pageIndex]){annotObject[pageIndex].annotations.push(annotation);index=annotObject[pageIndex].annotations.indexOf(annotation);}else{var markupAnnotation={pageIndex:pageNumber,annotations:[]};markupAnnotation.annotations.push(annotation);index=markupAnnotation.annotations.indexOf(annotation);annotObject.push(markupAnnotation);}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_stamp',annotationStringified);}}return index;};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.updateSessionStorage=function(annotation,id,type){if(id!=null){for(var p=0;p<annotation.annotations.length;p++){if(annotation.annotations[p].id===id){annotation=annotation.annotations[p];break;}}}if(type==='Rotate'){annotation=annotation.annotations[0];}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}if(storeObject){// eslint-disable-next-line
var bounds=annotation.bounds;var annotObject=JSON.parse(storeObject);for(var k=0;k<annotObject.length;k++){// eslint-disable-next-line
var currentAnnot=annotObject[k];for(var j=0;j<currentAnnot.annotations.length;j++){if(annotObject[k].annotations[j]!=null&&annotObject[k].annotations[j].randomId===annotation.id){if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_stamp');}// eslint-disable-next-line max-len
var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,annotObject[k].annotations[j].pageNumber);if(type!=='delete'){if(annotObject[pageIndex]){// eslint-disable-next-line max-len
//annotObject[k].annotations[j].modifiedDate = new Date().toLocaleString();
if(annotation.wrapper.children[1]){annotObject[k].annotations[j].opacity=annotation.wrapper.children[1].style.opacity;}else{annotObject[k].annotations[j].opacity=annotation.wrapper.children[0].style.opacity;}annotObject[k].annotations[j].rotateAngle=annotation.rotateAngle;// eslint-disable-next-line max-len
annotObject[k].annotations[j].bounds={x:bounds.x,y:bounds.y,left:bounds.x,top:bounds.y,width:annotation.wrapper.actualSize.width,height:annotation.wrapper.actualSize.height,right:bounds.right,bottom:bounds.bottom};}}else{annotObject[k].annotations.splice(j,1);}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){// eslint-disable-next-line max-len
this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_stamp',annotationStringified);}break;}}}}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.saveImportedStampAnnotations=function(annotation,pageNumber){var annotationObject=null;var isDynamic=false;// eslint-disable-next-line
var stampAnnotation;// eslint-disable-next-line
var stampName=annotation['IsDynamic'];annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);annotation.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);if(annotation.Subject&&stampName){stampAnnotation=this.retrieveDynamicStampAnnotation(annotation.Subject);isDynamic=true;}else if(annotation.Subject){stampAnnotation=this.retrievestampAnnotation(annotation.Subject);if(annotation.Subject==='Accepted'||annotation.Subject==='Rejected'){// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(stampAnnotation.pathdata);stampAnnotation.pathdata=sf.drawings.splitArrayCollection(collectionData);isDynamic=true;}}else{// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings);annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'image',author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,allowedInteractions:annotation.allowedInteractions,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,stampFillcolor:annotation.FillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,creationDate:annotation.ModifiedDate,pageNumber:pageNumber,icon:'',stampAnnotationPath:this.findImageData(annotation.Apperarance),randomId:'image',isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:' ',bounds:this.calculateImagePosition(annotation.Rect,true),annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.annotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock,isMaskedImage:annotation.IsMaskedImage,customStampName:annotation.CustomStampName};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_stamp');}if(stampAnnotation){annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'path',author:annotation.Author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,stampFillcolor:stampAnnotation.stampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,creationDate:annotation.ModifiedDate,pageNumber:pageNumber,icon:stampAnnotation.iconName,stampAnnotationPath:stampAnnotation.pathdata,randomId:'stamp',isDynamicStamp:false,dynamicText:this.dynamicText,// eslint-disable-next-line max-len
bounds:this.calculateImagePosition(annotation.Rect,true),annotName:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',// eslint-disable-next-line max-len
annotationSelectorSettings:this.getSettings(annotation),annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isCommentLock:annotation.IsCommentLock,isMaskedImage:annotation.IsMaskedImage,customStampName:''};if(isDynamic){annotationObject.dynamicText=this.findDynamicText(annotation.Apperarance,annotation.Subject);annotationObject.isDynamicStamp=true;}this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_stamp');}};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.updateStampAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;// eslint-disable-next-line
var stampAnnotation;// eslint-disable-next-line
var stampName=annotation['IsDynamic'];// eslint-disable-next-line
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isImageStamp=this.stampImageData(annotation);if(annotation.Subject&&stampName&&annotation.Subject!=='Draft'&&!isImageStamp){stampAnnotation=this.retrieveDynamicStampAnnotation(annotation.Subject);}else if(annotation.Subject&&!isImageStamp){stampAnnotation=this.retrievestampAnnotation(annotation.Subject);}else{// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'image',author:annotation.Author,modifiedDate:annotation.ModifiedDate,allowedInteractions:annotation.allowedInteractions,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,stampFillcolor:annotation.StampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,pageNumber:pageNumber,randomId:'stamp',isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,// eslint-disable-next-line max-len
annotationId:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',annotationSettings:annotation.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isMaskedImage:annotation.IsMaskedImage,customStampName:annotation.CustomStampName};return annotationObject;}if(stampAnnotation){// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);if(annotation.IsLocked){annotation.AnnotationSettings.isLock=annotation.IsLocked;}// eslint-disable-next-line max-len
annotation.allowedInteractions=annotation.AllowedInteractions?annotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annotationObject={// eslint-disable-next-line max-len
stampAnnotationType:'path',author:annotation.Author,allowedInteractions:annotation.allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,strokeColor:annotation.StrokeColor,fillColor:annotation.FillColor,opacity:annotation.Opacity,stampFillcolor:annotation.StampFillColor,// eslint-disable-next-line max-len
rotateAngle:annotation.RotateAngle,creationDate:stampAnnotation.creationDate,pageNumber:pageNumber,icon:stampAnnotation.iconName,stampAnnotationPath:stampAnnotation.pathdata,randomId:'stamp',isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,// eslint-disable-next-line max-len
bounds:{left:annotation.Rect.X,top:annotation.Rect.Y,width:annotation.Rect.Width,height:annotation.Rect.Height},annotationId:annotation.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,author:annotation.Author,modifiedDate:annotation.ModifiedDate},shapeAnnotationType:'stamp',customData:this.pdfViewer.annotation.getCustomData(annotation),isPrint:annotation.isPrint,isMaskedImage:annotation.IsMaskedImage,customStampName:''};return annotationObject;}};StampAnnotation.prototype.stampImageData=function(annot){var isStampImage=false;if(annot&&annot.Apperarance){for(var j=0;j<annot.Apperarance.length;j++){if(annot.Apperarance[j].imagedata){isStampImage=true;break;}}}return isStampImage;};// eslint-disable-next-line
StampAnnotation.prototype.findImageData=function(Apperance){if(Apperance){for(var j=0;j<Apperance.length;j++){// eslint-disable-next-line
var stampShapes=Apperance[j];// eslint-disable-next-line
var imageData=stampShapes['imagedata'];if(imageData){return imageData;}}}return'';};// eslint-disable-next-line
StampAnnotation.prototype.findDynamicText=function(apperance,subject){var dynamicText='';if(apperance){for(var d=0;d<apperance.length;d++){// eslint-disable-next-line
var stampShapes=apperance[d];// eslint-disable-next-line
var stampType=stampShapes['type'];// eslint-disable-next-line
var isImport=stampShapes['isImport'];// eslint-disable-next-line
if(stampType==='string'&&stampShapes['text']!==undefined){// eslint-disable-next-line
var text=void 0;if(!isImport){// eslint-disable-next-line
var stampText=stampShapes['text'].split('(');if(stampText[1]){// eslint-disable-next-line
text=stampText[1].split(')')[0];}else{// eslint-disable-next-line
text=stampShapes['text'];}}else{// eslint-disable-next-line
text=stampShapes['text'];}// eslint-disable-next-line
if(text.toLowerCase()!==subject.toLowerCase()){dynamicText+=text;}}}return dynamicText;}return dynamicText;};// eslint-disable-next-line
StampAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};/**
     * @private
     */ // eslint-disable-next-line
StampAnnotation.prototype.modifyInCollection=function(property,pageNumber,annotationBase){this.pdfViewerBase.updateDocumentEditedProperty(true);var currentAnnotObject=null;var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.annotName===pageAnnotations[i].annotName){if(property==='bounds'){// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.wrapper.bounds.x,y:annotationBase.wrapper.bounds.y,left:annotationBase.wrapper.bounds.x,top:annotationBase.wrapper.bounds.y,width:annotationBase.wrapper.bounds.width,height:annotationBase.wrapper.bounds.height};pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();}this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};StampAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_stamp');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_stamp');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_stamp']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_stamp',annotationStringified);}}};/**
     * This method used to add annotations with using programmatically.
     *
     * @param annotationObject - It describes type of annotation object
     * @param offset - It describes about the annotation bounds or location
     * @param pageNumber - It describes about the annotation page number
     * @param dynamicStampItem - It describe which type of dynamic stamp
     * @param signStampItem - It describe which type of sign stamp
     * @param standardBusinessStampItem - It describe which type of standard business stamp
     * @returns Object
     * @private
     */StampAnnotation.prototype.updateAddAnnotationDetails=function(annotationObject,offset,pageNumber,dynamicStampItem,signStampItem,standardBusinessStampItem){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:10,y:10},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:10,y:10};else offset=annotationObject.offset;//Checking the all stamps are present
if(!dynamicStampItem&&!signStampItem&&!standardBusinessStampItem){dynamicStampItem=DynamicStampItem.Approved;}//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();var page=pageNumber;//Creating annotation settings
var stampAnnotations=[];var stampName='';var stampAnnotationtype='Stamp';var apperarance=[];var isDynamic=false;var author=annotationObject.author?annotationObject.author:'Guest';var annotationSelectorSettings=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);var allowedInteractions=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationSettings.minHeight=annotationObject.minHeight?annotationObject.minHeight:0;annotationSettings.minWidth=annotationObject.minWidth?annotationObject.minWidth:0;annotationSettings.maxWidth=annotationObject.maxWidth?annotationObject.maxWidth:0;annotationSettings.maxHeight=annotationObject.maxHeight?annotationObject.maxHeight:0;//checking the stamp is custom and Updating the string and datetime values for dynamic stamp
if(annotationObject.customStamps&&annotationObject.customStamps[0].customStampName){apperarance[0]={imagedata:annotationObject.customStamps[0].customStampImageSource,isImport:true};this.customStampName=annotationObject.customStamps[0].customStampName;this.pdfViewerBase.customStampCollection.push(annotationObject.customStamps[0]);stampAnnotationtype='Image';annotationObject.width=annotationObject.width?annotationObject.width:100;annotationObject.height=annotationObject.height?annotationObject.height:100;}else if(dynamicStampItem){var dateTime=[];dateTime=currentDateString.split(' ');stampName=dynamicStampItem.toString();apperarance[0]={baseFontName:'Helvetica-BoldOblique',currentFontname:'95b303ab-d397-438a-83af-e2ff8a9900f1',fontSize:10,isImport:true,text:'By '+author+' at '+dateTime[1]+dateTime[2]+' , '+dateTime[0],type:'string'};isDynamic=true;annotationObject.width=annotationObject.width?annotationObject.width:140;annotationObject.height=annotationObject.height?annotationObject.height:55;}else if(signStampItem){stampName=signStampItem.toString();if(signStampItem==SignStampItem.Accepted||signStampItem==SignStampItem.Rejected){annotationObject.width=annotationObject.width?annotationObject.width:35;annotationObject.height=annotationObject.height?annotationObject.height:35;}else if(signStampItem==SignStampItem.SignHere){annotationObject.width=annotationObject.width?annotationObject.width:110;annotationObject.height=annotationObject.height?annotationObject.height:30;}else if(signStampItem==SignStampItem.Witness){annotationObject.width=annotationObject.width?annotationObject.width:130;annotationObject.height=annotationObject.height?annotationObject.height:30;}else if(signStampItem==SignStampItem.InitialHere){annotationObject.width=annotationObject.width?annotationObject.width:90;annotationObject.height=annotationObject.height?annotationObject.height:30;}}else if(standardBusinessStampItem){stampName=standardBusinessStampItem.toString();if(standardBusinessStampItem==StandardBusinessStampItem.Final||standardBusinessStampItem==StandardBusinessStampItem.Draft){annotationObject.width=annotationObject.width?annotationObject.width:110;annotationObject.height=annotationObject.height?annotationObject.height:30;}else if(standardBusinessStampItem==StandardBusinessStampItem.Void){annotationObject.width=annotationObject.width?annotationObject.width:100;annotationObject.height=annotationObject.height?annotationObject.height:30;}else{annotationObject.width=annotationObject.width?annotationObject.width:130;annotationObject.height=annotationObject.height?annotationObject.height:30;}}//Creating Annotation objects with it's proper properties
var stickyNotes={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'stamp',AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Apperarance:apperarance?apperarance:null,Author:author,Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,FillColor:'#192760',Icon:0,IsCommentLock:false,IsDynamic:isDynamic,IsLocked:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,ModifiedDate:'',Name:null,Note:'',Opacity:annotationObject.opacity?annotationObject.opacity:1,Rect:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:annotationObject.height,IsEmpty:false,Width:annotationObject.width}},RotateAngle:0,StampAnnotationtype:stampAnnotationtype,State:'',StateModel:'',StrokeColor:'#dce3ef',Subject:stampName,matrix:null,CustomStampName:this.customStampName?this.customStampName:'',pageNumber:page};//Adding the annotation object to an array and return it
stampAnnotations[0]=stickyNotes;return{stampAnnotations:stampAnnotations};};/**
     * @private
    */StampAnnotation.prototype.triggerAnnotationAdd=function(annot,annotation){// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'Stamp',annot.bounds,settings);};return StampAnnotation;}();/**
 * StickyNotes module
 */var StickyNotesAnnotation=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function StickyNotesAnnotation(pdfViewer,pdfViewerBase){this.commentsCount=0;this.commentsreplyCount=0;this.commentContextMenu=[];this.isAccordionContainer=true;this.isCreateContextMenu=false;this.isCommentsSelected=false;/**
         * @private
         */this.isAddAnnotationProgramatically=false;/**
         * @private
         */this.isEditableElement=false;this.isMouseClickEvent=false;this.isPageCommentsRendered=false;this.isCommentsRendered=false;/**
         * @private
         */this.isAnnotationRendered=false;this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;this.opacity=this.pdfViewer.stickyNotesSettings.opacity?this.pdfViewer.stickyNotesSettings.opacity:1;}/**
     * @param stickyAnnotations
     * @param pageNumber
     * @param canvas
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.renderStickyNotesAnnotations=function(stickyAnnotations,pageNumber,canvas){if(stickyAnnotations){if(stickyAnnotations.length>0){for(var i=0;i<stickyAnnotations.length;i++){// eslint-disable-next-line
var annotation=stickyAnnotations[i];var isAdded=false;// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageNumber,null,'sticky');if(pageAnnotations!==null){for(var k=0;k<pageAnnotations.length;k++){var annotationName=annotation.annotName?annotation.annotName:annotation.AnnotName;var pageAnnotationName=pageAnnotations[k].annotName?pageAnnotations[k].annotName:pageAnnotations[k].AnnotName;if(pageAnnotationName&&annotationName&&pageAnnotationName===annotationName){isAdded=true;break;}}}if(!isAdded){annotation.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(annotation,pageNumber,annotation.AnnotType);var annotationObject=null;// eslint-disable-next-line
var position=annotation.Bounds;var author=annotation.Author;// eslint-disable-next-line max-len
annotation.AnnotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);annotation.allowedInteractions=annotation.AllowedInteraction?annotation.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var isPrint=true;if(annotation.annotationAddMode==='Imported Annotation'){isPrint=annotation.IsPrint;}else{isPrint=annotation.AnnotationSettings.isPrint;}if(annotation.IsLock){annotation.AnnotationSettings.isLock=annotation.IsLock;}annotationObject={// eslint-disable-next-line max-len
shapeAnnotationType:'sticky',author:author,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,opacity:annotation.Opacity,state:annotation.State,stateModel:annotation.StateModel,pathData:'',comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:author},pageNumber:pageNumber,// eslint-disable-next-line max-len
bounds:{x:annotation.Bounds.X,y:annotation.Bounds.Y,left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotName:annotation.AnnotName,color:annotation.color,type:'StickyNotes',annotationSelectorSettings:this.getSettings(annotation),customData:this.pdfViewer.annotation.getCustomData(annotation),annotationSettings:annotation.AnnotationSettings,allowedInteractions:annotation.allowedInteractions,isPrint:isPrint,isCommentLock:annotation.IsCommentLock};var annot=void 0;// eslint-disable-next-line max-len
annotation.AnnotationSelectorSettings=annotation.AnnotationSelectorSettings?annotation.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;annot={// eslint-disable-next-line max-len
author:author,modifiedDate:annotationObject.modifiedDate,annotName:annotationObject.annotName,pageIndex:pageNumber,bounds:{x:position.Left,y:position.Top,width:position.Width,height:position.Height},strokeColor:'transparent',stampStrokeColor:'',data:this.setImageSource(),shapeAnnotationType:'StickyNotes',type:'StickyNotes',subject:annotationObject.subject,notes:annotationObject.note,opacity:annotationObject.opacity,id:annotationObject.annotName,fillColor:annotationObject.color,annotationSelectorSettings:annotation.AnnotationSelectorSettings,annotationSettings:annotationObject.annotationSettings,// eslint-disable-next-line max-len
annotationAddMode:annotation.annotationAddMode,isPrint:isPrint,isCommentLock:annotationObject.isCommentLock};if(canvas){this.drawStickyNotes(position.Left,position.Top,position.Width,position.Height,pageNumber,annot,canvas);}else{this.pdfViewer.add(annot);this.drawStickyNotes(position.Left,position.Top,position.Width,position.Height,pageNumber,annot);this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_sticky');}if(this.isAddAnnotationProgramatically){// eslint-disable-next-line
var settings={opacity:annot.opacity,borderColor:annot.strokeColor,borderWidth:annot.thickness,author:annotation.author,subject:annotation.subject,modifiedDate:annotation.modifiedDate,// eslint-disable-next-line
fillColor:annot.fillColor,fontSize:annot.fontSize,width:annot.bounds.width,height:annot.bounds.height,fontColor:annot.fontColor,fontFamily:annot.fontFamily,defaultText:annot.dynamicText,fontStyle:annot.font,textAlignment:annot.textAlign};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'StickyNotes',annot.bounds,settings);}}}}}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else if(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings){selector=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings;}return selector;};/**
     * @param X
     * @param Y
     * @param width
     * @param height
     * @param pageIndex
     * @param annotation
     * @param canvas
     * @param X
     * @param Y
     * @param width
     * @param height
     * @param pageIndex
     * @param annotation
     * @param canvas
     * @param X
     * @param Y
     * @param width
     * @param height
     * @param pageIndex
     * @param annotation
     * @param canvas
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.drawStickyNotes=function(X,Y,width,height,pageIndex,annotation,canvas){var _this=this;var annot;var annotationObject=null;var image=new Image();// eslint-disable-next-line
var proxy=this;image.onload=function(){var commentsDivid;var annotationName;// eslint-disable-next-line max-len
var author=_this.pdfViewer.annotationSettings.author!=='Guest'?_this.pdfViewer.annotationSettings.author:_this.pdfViewer.stickyNotesSettings.author;if(annotation){annot={// eslint-disable-next-line max-len
author:annotation.author,modifiedDate:annotation.modifiedDate,annotName:annotation.annotName,data:image.src,bounds:{x:X,y:Y,width:width,height:height},subject:annotation.subject,notes:annotation.notes,opacity:annotation.opacity,id:annotation.annotName,shapeAnnotationType:'StickyNotes',type:'StickyNotes',strokeColor:'transparent',stampStrokeColor:'',pageIndex:annotation.pageIndex,isPrint:annotation.isPrint};}else{annotationName=_this.pdfViewer.annotation.createGUID();commentsDivid=proxy.addComments('sticky',pageIndex+1,'',annotationName,'',author);if(commentsDivid){document.getElementById(commentsDivid).id=annotationName;}// eslint-disable-next-line
var annotationSelectorSettings=_this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?_this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:_this.pdfViewer.annotationSelectorSettings;var isPrint=_this.pdfViewer.stickyNotesSettings.isPrint;annot={// eslint-disable-next-line max-len
bounds:{x:X,y:Y,width:width,height:height},pageIndex:pageIndex,data:image.src,modifiedDate:_this.getDateAndTime(),shapeAnnotationType:'StickyNotes',type:'StickyNotes',strokeColor:'transparent',stampStrokeColor:'',annotName:annotationName,id:annotationName,opacity:_this.opacity,isPrint:isPrint};// eslint-disable-next-line max-len
var isLock=_this.pdfViewer.stickyNotesSettings.isLock?_this.pdfViewer.stickyNotesSettings.isLock:_this.pdfViewer.annotationSettings.isLock;// eslint-disable-next-line
var allowedInteractions=_this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annotationObject={// eslint-disable-next-line max-len
author:author,allowedInteractions:allowedInteractions,modifiedDate:_this.getDateAndTime(),subject:'Sticky Note',shapeAnnotationType:'sticky',pageNumber:pageIndex,type:'StickyNotes',// eslint-disable-next-line max-len
note:'',opacity:_this.opacity,pathData:'',state:'',stateModel:'',color:'rgba(255,255,0)',comments:[],annotName:annotationName,// eslint-disable-next-line max-len
bounds:{x:X,y:Y,left:X,top:Y,width:width,height:height},review:{state:'',stateModel:'',modifiedDate:'',author:author},annotationSelectorSettings:annotationSelectorSettings,// eslint-disable-next-line max-len
customData:_this.pdfViewer.annotationModule.getData('sticky'),annotationSettings:{isLock:isLock},isPrint:isPrint,isCommentLock:false};}if(!annotation){// eslint-disable-next-line max-len
proxy.pdfViewer.annotation.addAction(pageIndex,null,annot,'Addition','',annot,annot);proxy.pdfViewer.add(annot);proxy.pdfViewer.annotationModule.storeAnnotations(pageIndex,annotationObject,'_annotations_sticky');}if(proxy.pdfViewerBase.isAddComment){// eslint-disable-next-line max-len
// eslint-disable-next-line
var bounds={x:annot.bounds.x,y:annot.bounds.y,left:annot.bounds.x,top:annot.bounds.y,width:annot.bounds.width,height:annot.bounds.height};_this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var settings={opacity:annot.opacity,author:author,modifiedDate:annot.modifiedDate,subject:annot.shapeAnnotationType};_this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'StickyNotes',bounds,settings);}proxy.pdfViewerBase.isFreeTextSelected=false;if(canvas){// eslint-disable-next-line
proxy.pdfViewer.renderDrawing(canvas,pageIndex);}else{// eslint-disable-next-line
var canvass=document.getElementById(proxy.pdfViewer.element.id+'_annotationCanvas_'+pageIndex);// eslint-disable-next-line
proxy.pdfViewer.renderDrawing(canvass,pageIndex);}if(sf.base.Browser.isDevice&&!annotation){proxy.pdfViewer.select([annot.id],annot.annotationSelectorSettings);proxy.pdfViewer._dotnetInstance.invokeMethodAsync('OpenCommentPanel');}proxy.pdfViewerBase.isAddComment=false;};image.src=this.setImageSource();};StickyNotesAnnotation.prototype.setImageSource=function(){// eslint-disable-next-line max-len
var imageSource='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo=';return imageSource;};/**
     * @private
     */StickyNotesAnnotation.prototype.createRequestForComments=function(){var jsonObject;var proxy=this;var startIndex=0;var pageLimit=20;var pageCount=proxy.pdfViewerBase.pageCount;if(!proxy.isCommentsRendered){if(pageLimit<pageCount){pageCount=pageLimit;}else{proxy.isPageCommentsRendered=true;}}if(!this.isCommentsRendered){// eslint-disable-next-line max-len
jsonObject={pageStartIndex:startIndex,pageEndIndex:pageCount,hashId:this.pdfViewerBase.hashId,action:'RenderAnnotationComments',elementId:this.pdfViewer.dataId,uniqueId:proxy.pdfViewerBase.documentId};proxy.isCommentsRendered=true;}else{// eslint-disable-next-line max-len
jsonObject={pageStartIndex:pageLimit,pageEndIndex:pageCount,hashId:this.pdfViewerBase.hashId,action:'RenderAnnotationComments',elementId:this.pdfViewer.dataId,uniqueId:proxy.pdfViewerBase.documentId};}if(this.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.pdfViewerBase.jsonDocumentId;}var url=this.pdfViewer.serviceUrl+'/'+this.pdfViewer.serverActionSettings.renderComments;proxy.commentsRequestHandler=new AjaxHandler(proxy.pdfViewer);proxy.commentsRequestHandler.url=url;proxy.commentsRequestHandler.mode=true;proxy.commentsRequestHandler.responseType='text';proxy.commentsRequestHandler.send(jsonObject);// eslint-disable-next-line
proxy.commentsRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;proxy.updateCommentsCollection(data);};// eslint-disable-next-line
proxy.commentsRequestHandler.onFailure=function(result){this.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText);};// eslint-disable-next-line
proxy.commentsRequestHandler.onError=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.renderComments);};};/**
     * @private
    */StickyNotesAnnotation.prototype.updateCommentsCollection=function(jsonObject){var proxy=this;if(jsonObject){if(_typeof(jsonObject)!=='object'){try{jsonObject=JSON.parse(jsonObject);if(_typeof(jsonObject)!=='object'){jsonObject=JSON.parse(jsonObject);}if(_typeof(jsonObject)!=='object'){proxy.pdfViewerBase.onControlError(500,jsonObject,proxy.pdfViewer.serverActionSettings.renderComments);jsonObject=null;}}catch(error){proxy.pdfViewerBase.onControlError(500,jsonObject,proxy.pdfViewer.serverActionSettings.renderComments);jsonObject=null;}}if(jsonObject){var isInitialRender=false;if(proxy.pdfViewerBase.annotationComments){proxy.pdfViewerBase.annotationComments=jsonObject.annotationDetails;}else{proxy.pdfViewerBase.annotationComments=jsonObject.annotationDetails;isInitialRender=true;}if(jsonObject.annotationDetails&&jsonObject.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderComments,jsonObject);proxy.isAnnotationRendered=true;var annotationCollections=void 0;if(proxy.pdfViewerBase.documentAnnotationCollections){annotationCollections=proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments,proxy.pdfViewerBase.documentAnnotationCollections);}else{var newCollection=proxy.pdfViewerBase.createAnnotationsCollection();annotationCollections=proxy.updateAnnotationsInDocumentCollections(proxy.pdfViewerBase.annotationComments,newCollection);}proxy.pdfViewerBase.annotationComments=annotationCollections;proxy.pdfViewerBase.documentAnnotationCollections=annotationCollections;for(var i=jsonObject.startPageIndex;i<jsonObject.endPageIndex;i++){var newData=jsonObject.annotationDetails[i];this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"freeTextAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"measureShapeAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"shapeAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"signatureAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"signatureInkAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"stampAnnotations");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"stickyNotesAnnotation");this.pdfViewerBase.updateModifiedDateToLocalDate(newData,"textMarkupAnnotation");}for(var j=jsonObject.startPageIndex;j<jsonObject.endPageIndex;j++){if(jsonObject.annotationDetails[j]){proxy.renderAnnotationCollections(jsonObject.annotationDetails[j],j,isInitialRender,jsonObject.endPageIndex);}}if(!proxy.isPageCommentsRendered){proxy.isPageCommentsRendered=true;proxy.pdfViewer.viewerBase.isAnnotationPresent=jsonObject.isAnnotationPresent;proxy.createRequestForComments();}else if(jsonObject.endPageIndex<=20){proxy.pdfViewer.viewerBase.isAnnotationPresent=jsonObject.isAnnotationPresent;}else if(jsonObject.endPageIndex>20){if(!proxy.pdfViewer.viewerBase.isAnnotationPresent){proxy.pdfViewer.viewerBase.isAnnotationPresent=jsonObject.isAnnotationPresent;}}}}}};/**
     * @param excistingAnnotation
     * @param newAnnotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateAnnotationsInDocumentCollections=function(excistingAnnotation,newAnnotation){for(var i=0;i<this.pdfViewerBase.pageCount;i++){if(excistingAnnotation[i]&&newAnnotation[i]){// eslint-disable-next-line max-len
if(excistingAnnotation[i].textMarkupAnnotation&&excistingAnnotation[i].textMarkupAnnotation.length!==0&&newAnnotation[i].textMarkupAnnotation){for(var j=0;j<excistingAnnotation[i].textMarkupAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].textMarkupAnnotation[j],newAnnotation[i].textMarkupAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].shapeAnnotation&&excistingAnnotation[i].shapeAnnotation.length!==0&&newAnnotation[i].shapeAnnotation){for(var j=0;j<excistingAnnotation[i].shapeAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].shapeAnnotation[j],newAnnotation[i].shapeAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].measureShapeAnnotation&&excistingAnnotation[i].measureShapeAnnotation.length!==0&&newAnnotation[i].measureShapeAnnotation){for(var j=0;j<excistingAnnotation[i].measureShapeAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].measureShapeAnnotation[j],newAnnotation[i].measureShapeAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].stampAnnotations&&excistingAnnotation[i].stampAnnotations.length!==0&&newAnnotation[i].stampAnnotations){for(var j=0;j<excistingAnnotation[i].stampAnnotations.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].stampAnnotations[j],newAnnotation[i].stampAnnotations);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].stickyNotesAnnotation&&excistingAnnotation[i].stickyNotesAnnotation.length!==0&&newAnnotation[i].stickyNotesAnnotation){for(var j=0;j<excistingAnnotation[i].stickyNotesAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].stickyNotesAnnotation[j],newAnnotation[i].stickyNotesAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].freeTextAnnotation&&excistingAnnotation[i].freeTextAnnotation.length!==0&&newAnnotation[i].freeTextAnnotation){for(var j=0;j<excistingAnnotation[i].freeTextAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].freeTextAnnotation[j],newAnnotation[i].freeTextAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].signatureAnnotation&&excistingAnnotation[i].signatureAnnotation.length!==0&&newAnnotation[i].signatureAnnotation){for(var j=0;j<excistingAnnotation[i].signatureAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureAnnotation[j],newAnnotation[i].signatureAnnotation);}}// eslint-disable-next-line max-len
if(excistingAnnotation[i].signatureInkAnnotation&&excistingAnnotation[i].signatureInkAnnotation.length!==0&&newAnnotation[i].signatureInkAnnotation){for(var j=0;j<excistingAnnotation[i].signatureInkAnnotation.length;j++){// eslint-disable-next-line max-len
this.updateDocumentAnnotationCollections(excistingAnnotation[i].signatureInkAnnotation[j],newAnnotation[i].signatureInkAnnotation);}}}}return newAnnotation;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateDocumentAnnotationCollections=function(excistingAnnotation,newAnnotation){if(newAnnotation.length===0){newAnnotation.push(excistingAnnotation);}else{var isAdded=false;for(var i=0;i<newAnnotation.length;i++){// eslint-disable-next-line max-len
if(excistingAnnotation.AnnotName&&newAnnotation[i].AnnotName&&excistingAnnotation.AnnotName===newAnnotation[i].AnnotName){isAdded=true;break;}}if(!isAdded){newAnnotation.push(excistingAnnotation);}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.renderAnnotationCollections=function(pageAnnotations,pageNumber,isInitialRender,lastPage){// eslint-disable-next-line
var pageCollections=[];var pageCommentsCollections=[];if(pageAnnotations.textMarkupAnnotation&&pageAnnotations.textMarkupAnnotation.length!==0){for(var i=0;i<pageAnnotations.textMarkupAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.textMarkupAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.textMarkupAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.textMarkupAnnotation[i]);var textMarkupComment=this.getAnnotationComment(pageAnnotations.textMarkupAnnotation[i]);pageCommentsCollections.push(textMarkupComment);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(pageAnnotations.textMarkupAnnotation[i],pageNumber));}}if(pageAnnotations.shapeAnnotation&&pageAnnotations.shapeAnnotation.length!==0){for(var i=0;i<pageAnnotations.shapeAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.shapeAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.shapeAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.shapeAnnotation[i]);var shapeAnnotationComment=this.getAnnotationComment(pageAnnotations.shapeAnnotation[i]);pageCommentsCollections.push(shapeAnnotationComment);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(pageAnnotations.shapeAnnotation[i],pageNumber));}}if(pageAnnotations.measureShapeAnnotation&&pageAnnotations.measureShapeAnnotation.length!==0){for(var i=0;i<pageAnnotations.measureShapeAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.measureShapeAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.measureShapeAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.measureShapeAnnotation[i]);var measureShapeAnnotationComment=this.getAnnotationComment(pageAnnotations.measureShapeAnnotation[i]);pageCommentsCollections.push(measureShapeAnnotationComment);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(pageAnnotations.measureShapeAnnotation[i],pageNumber));}}if(pageAnnotations.stampAnnotations&&pageAnnotations.stampAnnotations.length!==0){for(var i=0;i<pageAnnotations.stampAnnotations.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.stampAnnotations[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.stampAnnotations[i].ModifiedDate);}pageCollections.push(pageAnnotations.stampAnnotations[i]);var stampAnnotationComment=this.getAnnotationComment(pageAnnotations.stampAnnotations[i]);pageCommentsCollections.push(stampAnnotationComment);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(pageAnnotations.stampAnnotations[i],pageNumber));}}if(pageAnnotations.stickyNotesAnnotation&&pageAnnotations.stickyNotesAnnotation.length!==0){for(var i=0;i<pageAnnotations.stickyNotesAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.stickyNotesAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.stickyNotesAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.stickyNotesAnnotation[i]);var stickyNotesAnnotationComment=this.getAnnotationComment(pageAnnotations.stickyNotesAnnotation[i]);pageCommentsCollections.push(stickyNotesAnnotationComment);// eslint-disable-next-line max-len
this.updateCollections(this.updateStickyNotesAnnotationCollections(pageAnnotations.stickyNotesAnnotation[i],pageNumber));}}if(pageAnnotations.freeTextAnnotation&&pageAnnotations.freeTextAnnotation.length!==0){for(var i=0;i<pageAnnotations.freeTextAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.freeTextAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.freeTextAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.freeTextAnnotation[i]);var freeTextAnnotationComment=this.getAnnotationComment(pageAnnotations.freeTextAnnotation[i]);pageCommentsCollections.push(freeTextAnnotationComment);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(pageAnnotations.freeTextAnnotation[i],pageNumber));}}if(pageAnnotations.signatureAnnotation&&pageAnnotations.signatureAnnotation.length!==0){for(var i=0;i<pageAnnotations.signatureAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.signatureAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureAnnotation[i].ModifiedDate);}// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(pageAnnotations.signatureAnnotation[i],pageNumber),true);}}if(pageAnnotations.signatureInkAnnotation&&pageAnnotations.signatureInkAnnotation.length!==0){for(var i=0;i<pageAnnotations.signatureInkAnnotation.length;i++){if(this.pdfViewer.dateTimeFormat){// eslint-disable-next-line max-len
pageAnnotations.signatureInkAnnotation[i].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(pageAnnotations.signatureInkAnnotation[i].ModifiedDate);}pageCollections.push(pageAnnotations.signatureInkAnnotation[i]);var signatureInkAnnotationComment=this.getAnnotationComment(pageAnnotations.signatureInkAnnotation[i]);pageCommentsCollections.push(signatureInkAnnotationComment);// eslint-disable-next-line max-len
this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(pageAnnotations.signatureInkAnnotation[i],pageNumber));}}var isLastPage=false;if(pageNumber===lastPage-1){isLastPage=true;}if(this.pdfViewer.enableCommentPanel){this.pdfViewer._dotnetInstance.invokeMethodAsync('RenderAnnotationComments',pageCommentsCollections,pageNumber,isLastPage);//this.renderAnnotationComments(pageCollections, pageNumber);
}if(isInitialRender){for(var i=0;i<this.pdfViewerBase.renderedPagesList.length;i++){this.pdfViewerBase.renderAnnotations(this.pdfViewerBase.renderedPagesList[i]);}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.getAnnotationComment=function(annotation,isSignature){var annotationComment={AnnotName:annotation.AnnotName,AnnotType:annotation.AnnotType,Author:annotation.Author,Note:annotation.Note,ModifiedDate:annotation.ModifiedDate,Comments:annotation.Comments,State:annotation.State,StateModel:annotation.StateModel,Subject:annotation.Subject,TextMarkupAnnotationType:annotation.TextMarkupAnnotationType,MarkupText:annotation.MarkupText,Text:annotation.Text};return annotationComment;};/**
     * @param annotation
     * @param isSignature
     * @param annotation
     * @param isSignature
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateCollections=function(annotation,isSignature){var isAdded=false;// eslint-disable-next-line
var collections;if(isSignature){collections=this.pdfViewer.signatureCollection;}else{collections=this.pdfViewer.annotationCollection;}if(collections&&annotation){for(var i=0;i<collections.length;i++){if(isSignature){if(collections[i].signatureName===annotation.signatureName){isAdded=true;break;}}else{if(collections[i].annotationId===annotation.annotationId){isAdded=true;break;}}}}if(!isAdded&&annotation){if(isSignature){this.pdfViewer.signatureCollection.push(annotation);}else{this.pdfViewer.annotationCollection.push(annotation);}}};/**
     * @private
     */StickyNotesAnnotation.prototype.updateCommentPanelTextTop=function(){var commentPanelText=document.getElementById(this.pdfViewer.dataId+'_commentsPanelText');// eslint-disable-next-line max-len
if(this.pdfViewerBase.navigationPane.commentPanelContainer&&this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight&&commentPanelText.style.display!=='none'){commentPanelText.style.paddingTop=this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight/2-47+'px';commentPanelText.style.paddingLeft=this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth/3+'px';}};/**
     * @param pageNumber
     * @private
     */StickyNotesAnnotation.prototype.updateCommentPanelScrollTop=function(pageNumber){var accordionDiv=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+pageNumber);this.pdfViewerBase.navigationPane.commentsContentContainer=document.querySelector('.e-pv-comments-content-container');if(accordionDiv){var scrollValue=accordionDiv.offsetTop+accordionDiv.clientTop-35;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=scrollValue;}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentDivFocus=function(args){// eslint-disable-next-line
var proxy=this;var pageNumber=this.pdfViewerBase.currentPageNumber;setTimeout(function(){proxy.updateScrollPosition(pageNumber);},500);};StickyNotesAnnotation.prototype.updateScrollPosition=function(pageNumber){var accordionDiv=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+pageNumber);if(accordionDiv&&this.isNewcommentAdded){var commentHeight=0;// eslint-disable-next-line
var textBox=document.querySelectorAll('.e-editable-inline');if(textBox[0]){commentHeight=textBox[0].getBoundingClientRect().height;}var scrollValue=accordionDiv.offsetTop+accordionDiv.clientTop+commentHeight;if(this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop<scrollValue){this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=scrollValue;}this.isNewcommentAdded=false;}};StickyNotesAnnotation.prototype.updateCommentsScrollTop=function(isCommentsAdded){// eslint-disable-next-line max-len
var accordionDiv=document.getElementById(this.pdfViewer.dataId+'_accordionContainer'+this.pdfViewerBase.currentPageNumber);// eslint-disable-next-line
var commentsContainer=document.querySelector('.e-pv-comments-border');var commentsHeight=0;if(accordionDiv&&commentsContainer){commentsHeight=commentsContainer.getBoundingClientRect().height;var scrollValue=void 0;if(isCommentsAdded){scrollValue=accordionDiv.offsetTop+commentsContainer.offsetTop+commentsHeight/4;}else{scrollValue=accordionDiv.offsetTop+commentsContainer.offsetTop-70;}this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=scrollValue;}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyProperty=function(args){var commentElement=args.element.parentElement.id;var parentElement=args.element.parentElement.parentElement.id;var titleElement=args.element.previousSibling.firstChild;this.updateModifiedDate(titleElement);this.modifyCommentsProperty(args.value,commentElement,parentElement,args.prevValue);};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateCommentIcon=function(commentSpan,annotationType,annotationSubType){if(annotationType==='sticky'){commentSpan.className='e-pv-comment-icon e-pv-icon';}else if(annotationType==='stamp'){commentSpan.className='e-pv-stamp-icon e-pv-icon';}else if(annotationType==='shape'){if(annotationSubType==='Line'){commentSpan.className='e-pv-shape-line-icon e-pv-icon';}else if(annotationSubType==='LineWidthArrowHead'||annotationSubType==='Arrow'){commentSpan.className='e-pv-shape-arrow-icon e-pv-icon';}else if(annotationSubType==='Circle'||annotationSubType==='Ellipse'||annotationSubType==='Oval'){commentSpan.className='e-pv-shape-circle-icon e-pv-icon';}else if(annotationSubType==='Rectangle'||annotationSubType==='Square'){commentSpan.className='e-pv-shape-rectangle-icon e-pv-icon';}else if(annotationSubType==='Polygon'){commentSpan.className='e-pv-shape-pentagon-icon e-pv-icon';}else{commentSpan.className='e-pv-annotation-shape-icon e-pv-icon';}}else if(annotationType==='measure'){if(annotationSubType==='Distance'||annotationSubType==='Distance calculation'){commentSpan.className='e-pv-calibrate-distance-icon e-pv-icon';}else if(annotationSubType==='Perimeter'||annotationSubType==='Perimeter calculation'){commentSpan.className='e-pv-calibrate-perimeter-icon e-pv-icon';}else if(annotationSubType==='Radius'||annotationSubType==='Radius calculation'){commentSpan.className='e-pv-calibrate-radius-icon e-pv-icon';}else if(annotationSubType==='Area'||annotationSubType==='Area calculation'){commentSpan.className='e-pv-calibrate-area-icon e-pv-icon';}else if(annotationSubType==='Volume'||annotationSubType==='Volume calculation'){commentSpan.className='e-pv-calibrate-volume-icon e-pv-icon';}else{commentSpan.className='e-pv-annotation-calibrate-icon e-pv-icon';}}else if(annotationType==='textMarkup'){if(annotationSubType==='Highlight'){commentSpan.className='e-pv-highlight-icon e-pv-icon';}else if(annotationSubType==='Underline'){commentSpan.className='e-pv-underline-icon e-pv-icon';}else if(annotationSubType==='Strikethrough'){commentSpan.className='e-pv-strikethrough-icon e-pv-icon';}else{commentSpan.className='e-pv-annotation-icon e-pv-icon';}}else if(annotationType==='freeText'){commentSpan.className='e-pv-freetext-icon e-pv-icon';}else if(annotationType==='ink'||annotationSubType==='Ink'){commentSpan.className='e-pv-inkannotation-icon e-pv-icon';}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateStatusContainer=function(state,statusSpan,statusDiv,statusContainer){if(state==='Accepted'){statusDiv.style.backgroundColor='rgb(24,169,85)';statusSpan.className='e-pv-accepted-icon';}else if(state==='Completed'){statusDiv.style.backgroundColor='rgb(0,122,255)';statusSpan.className='e-pv-completed-icon';}else if(state==='Cancelled'){statusDiv.style.backgroundColor='rgb(245,103,0)';statusSpan.className='e-pv-cancelled-icon';}else if(state==='Rejected'){statusDiv.style.backgroundColor='rgb(255,59,48)';statusSpan.className='e-pv-rejected-icon';}else{statusSpan.className='';statusContainer.parentElement.removeChild(statusContainer);}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateCommentMenuItem=function(text){// eslint-disable-next-line
var contextActiveDiv;// eslint-disable-next-line
var contextDiv=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');if(contextDiv){for(var i=0;i<contextDiv.length;i++){if(contextDiv[i].style.visibility==='visible'){contextActiveDiv=contextDiv[i].parentElement.nextSibling;}}}if(text){switch(text){case this.pdfViewer.localeObj.getConstant('Edit'):// eslint-disable-next-line
var commentShow=document.querySelectorAll('.e-pv-new-comments-div');for(var i=0;i<commentShow.length;i++){commentShow[i].style.display='none';}break;case this.pdfViewer.localeObj.getConstant('Delete Context'):if(contextActiveDiv.parentElement.parentElement.firstElementChild===contextActiveDiv.parentElement){this.pdfViewer.annotationModule.deleteAnnotation();var moreElement=document.getElementsByClassName("e-pv-viewer-container");moreElement[0].focus();moreElement[0].classList.add("e-focused");}else{// eslint-disable-next-line max-len
this.modifyCommentDeleteProperty(contextActiveDiv.parentElement.parentElement,contextActiveDiv.parentElement);}break;case this.pdfViewer.localeObj.getConstant('Set Status'):break;case this.pdfViewer.localeObj.getConstant('Accepted'):case this.pdfViewer.localeObj.getConstant('Completed'):case this.pdfViewer.localeObj.getConstant('Cancelled'):case this.pdfViewer.localeObj.getConstant('Rejected'):case this.pdfViewer.localeObj.getConstant('None'):var statusElement=contextActiveDiv.parentElement;this.modifyStatusProperty(text,statusElement);break;}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentMenuItemSelect=function(args){// eslint-disable-next-line
var contextActiveDiv;// eslint-disable-next-line
var contextDiv=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');if(contextDiv){for(var i=0;i<contextDiv.length;i++){if(contextDiv[i].style.visibility==='visible'){contextActiveDiv=contextDiv[i].parentElement.nextSibling;}}if(args.item){switch(args.item.text){case this.pdfViewer.localeObj.getConstant('Edit'):// eslint-disable-next-line
var commentShow=document.querySelectorAll('.e-pv-new-comments-div');for(var i=0;i<commentShow.length;i++){commentShow[i].style.display='none';}break;case this.pdfViewer.localeObj.getConstant('Delete Context'):if(contextActiveDiv.parentElement.parentElement.firstElementChild===contextActiveDiv.parentElement){this.pdfViewer.annotationModule.deleteAnnotation();}else{// eslint-disable-next-line max-len
this.modifyCommentDeleteProperty(contextActiveDiv.parentElement.parentElement,contextActiveDiv.parentElement);var moreElement=document.getElementsByClassName("e-pv-viewer-container");moreElement[0].focus();moreElement[0].classList.add("e-focused");}break;case this.pdfViewer.localeObj.getConstant('Set Status'):break;case this.pdfViewer.localeObj.getConstant('Accepted'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}// eslint-disable-next-line max-len
var acceptedStatusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var statusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});var statusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon',className:'e-pv-accepted-icon'});statusDiv.style.backgroundColor='rgb(24,169,85)';statusDiv.appendChild(statusSpan);acceptedStatusDiv.appendChild(statusDiv);contextActiveDiv.parentElement.appendChild(acceptedStatusDiv);this.modifyStatusProperty('Accepted',contextActiveDiv.parentElement);break;case this.pdfViewer.localeObj.getConstant('Completed'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}// eslint-disable-next-line max-len
var completedStatusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var statusElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});// eslint-disable-next-line max-len
var statusOptionSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon',className:'e-pv-completed-icon'});statusElement.style.backgroundColor='rgb(0,122,255)';statusElement.appendChild(statusOptionSpan);completedStatusDiv.appendChild(statusElement);contextActiveDiv.parentElement.appendChild(completedStatusDiv);this.modifyStatusProperty('Completed',contextActiveDiv.parentElement);break;case this.pdfViewer.localeObj.getConstant('Cancelled'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}// eslint-disable-next-line max-len
var cancelStatusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var cancelStatusElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});// eslint-disable-next-line max-len
var cancelStatusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon',className:'e-pv-cancelled-icon'});cancelStatusElement.style.backgroundColor='rgb(245,103,0)';cancelStatusElement.appendChild(cancelStatusSpan);cancelStatusDiv.appendChild(cancelStatusElement);contextActiveDiv.parentElement.appendChild(cancelStatusDiv);this.modifyStatusProperty('Cancelled',contextActiveDiv.parentElement);break;case this.pdfViewer.localeObj.getConstant('Rejected'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}// eslint-disable-next-line max-len
var rejectedStatusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var rejectedStatusElement=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});// eslint-disable-next-line max-len
var rejectedStatusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon',className:'e-pv-rejected-icon'});rejectedStatusElement.style.backgroundColor='rgb(255,59,48)';rejectedStatusElement.appendChild(rejectedStatusSpan);rejectedStatusDiv.appendChild(rejectedStatusElement);contextActiveDiv.parentElement.appendChild(rejectedStatusDiv);this.modifyStatusProperty('Rejected',contextActiveDiv.parentElement);break;case this.pdfViewer.localeObj.getConstant('None'):if(contextActiveDiv.parentElement.lastChild.id===this.pdfViewer.dataId+'status_container'){contextActiveDiv.parentElement.lastChild.remove();}this.modifyStatusProperty('None',contextActiveDiv.parentElement);break;default:break;}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.moreOptionsClick=function(event,isMoreOptionClick){if(document.getElementById(this.pdfViewer.dataId+'_comment_context_menu').style.display!=='block'){if(event.currentTarget.className==='e-pv-more-options-button e-btn'){event.currentTarget.parentElement.nextSibling.lastChild.firstChild.click();}this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj);this.commentMenuObj.open(event.clientY,event.clientX,event.currentTarget);}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentDivOnSelect=function(event){// eslint-disable-next-line
var commentSelect=document.querySelectorAll('.e-pv-comments-select');for(var z=0;z<commentSelect.length;z++){commentSelect[z].classList.remove('e-pv-comments-select');}var activeElement=document.getElementById(event.currentTarget.id);if(activeElement){activeElement.classList.remove('e-pv-comments-hover');activeElement.classList.remove('e-pv-comments-leave');activeElement.classList.add('e-pv-comments-select');if(event.currentTarget.nextSibling){if(event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')){var activeSiblingElement=document.getElementById(event.currentTarget.nextSibling.id);activeSiblingElement.classList.remove('e-pv-comments-hover');activeSiblingElement.classList.remove('e-pv-comments-leave');activeSiblingElement.classList.add('e-pv-comments-select');}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentDivMouseOver=function(event){var activeElement=document.getElementById(event.currentTarget.id);if(activeElement){activeElement.classList.remove('e-pv-comments-select');activeElement.classList.remove('e-pv-comments-leave');activeElement.classList.add('e-pv-comments-hover');if(event.currentTarget.nextSibling){if(event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')){var activeSiblingElement=document.getElementById(event.currentTarget.nextSibling.id);activeSiblingElement.classList.remove('e-pv-comments-select');activeSiblingElement.classList.remove('e-pv-comments-leave');activeSiblingElement.classList.add('e-pv-comments-hover');}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentDivMouseLeave=function(event){var activeElement=document.getElementById(event.currentTarget.id);if(activeElement){activeElement.classList.remove('e-pv-comments-hover');activeElement.classList.remove('e-pv-comments-select');activeElement.classList.add('e-pv-comments-leave');if(event.currentTarget.nextSibling){if(event.currentTarget.nextSibling.classList.contains('e-pv-new-comments-div')){var activeSiblingElement=document.getElementById(event.currentTarget.nextSibling.id);activeSiblingElement.classList.remove('e-pv-comments-hover');activeSiblingElement.classList.remove('e-pv-comments-select');activeSiblingElement.classList.add('e-pv-comments-leave');}}}};/**
     * @param event
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.drawIcons=function(event){// eslint-disable-next-line
if(this.pdfViewerBase.isCommentIconAdded){var pageIndex=this.pdfViewer.annotation.getEventPageNumber(event);var pageCurrentRect=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex).getBoundingClientRect();var zoomValue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((event.clientX-pageCurrentRect.left)/zoomValue,(event.clientY-pageCurrentRect.top)/zoomValue,30,30,pageIndex,null);this.pdfViewerBase.isCommentIconAdded=false;var commentsButton=document.getElementById(this.pdfViewer.dataId+'_comment');commentsButton=commentsButton.children[0];if(commentsButton&&commentsButton.classList.contains('e-pv-select')){commentsButton.classList.remove('e-pv-select');}else{var commentsIcon=document.getElementById(this.pdfViewer.dataId+'_commentIcon');if(commentsIcon){this.pdfViewer.enableRtl?commentsIcon.className='e-pv-comment-icon e-pv-icon e-icon-left e-right':commentsIcon.className='e-pv-comment-icon e-pv-icon e-icon-left';}}}};/**
     * @param annotationType
     * @param pageNumber
     * @param annotationSubType
     * @param annotationType
     * @param pageNumber
     * @param annotationSubType
     * @param annotationType
     * @param pageNumber
     * @param annotationSubType
     * @private
     */StickyNotesAnnotation.prototype.addComments=function(annotationType,pageNumber,annotationSubType,annotId,inputValue,author,comments){// eslint-disable-next-line:max-line-length
this.pdfViewer._dotnetInstance.invokeMethodAsync('AddComment',annotationType,pageNumber,annotationSubType,annotId,inputValue,author,comments);};// eslint-disable-next-line
StickyNotesAnnotation.prototype.commentsAnnotationSelect=function(event){var element=event.currentTarget;var isLocked=this.checkAnnotationSettings(element.id);if(isLocked){// eslint-disable-next-line
var annotation=this.findAnnotationObject(element.id);if(this.pdfViewer.annotationModule.checkAllowedInteractions('Select',annotation)){isLocked=false;}}if(!isLocked){if(element.classList.contains('e-pv-comments-border')){// eslint-disable-next-line
var commentsDiv=document.querySelectorAll('.e-pv-comments-div');for(var j=0;j<commentsDiv.length;j++){commentsDiv[j].style.minHeight=60+'px';}if(event.currentTarget.childElementCount===1){if(event.currentTarget.childNodes[0].querySelector('.e-editable-inline')){event.currentTarget.childNodes[0].style.minHeight=event.currentTarget.childNodes[0].clientHeight;}}}if(event.target.className==='e-pv-more-icon e-pv-icon'||event.target.className==='e-pv-more-options-button e-btn'){event.preventDefault();return null;}// eslint-disable-next-line
var pageNumber=parseInt(element.accessKey);if(!element.classList.contains('e-pv-comments-border')){// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}var commentsDiv=document.getElementById(element.id);if(commentsDiv){commentsDiv.classList.add('e-pv-comments-border');}// eslint-disable-next-line
var commentTextBox=document.querySelectorAll('.e-pv-new-comments-div');for(var j=0;j<commentTextBox.length;j++){commentTextBox[j].style.display='none';}if(commentsDiv){// eslint-disable-next-line
var currentTextBox=commentsDiv.querySelector('.e-pv-new-comments-div');if(currentTextBox){currentTextBox.style.display='block';}}// eslint-disable-next-line
var textDiv=element.lastChild;this.isEditableElement=false;if(textDiv.querySelector('.e-editable-inline')){textDiv.style.display='block';textDiv.querySelector('.e-editable-inline').style.display='block';for(var i=0;i<element.childElementCount;i++){// eslint-disable-next-line
var activeElement=element.childNodes[i];// eslint-disable-next-line
var textElement=activeElement.querySelector('.e-editable-inline');if(textElement){if(textElement.style.display===''){if(textDiv.classList.contains('e-pv-new-comments-div')){this.isEditableElement=true;textDiv.style.display='none';textDiv.querySelector('.e-editable-inline').style.display='none';}}}}}this.isSetAnnotationType=false;}else{this.isSetAnnotationType=true;}if(!this.isSetAnnotationType){if(this.pdfViewer.navigation){this.pdfViewer.navigationModule.goToPage(pageNumber);}var annotType=element.getAttribute('name');if(annotType==='null'||annotType==='Ink'){annotType='ink';}this.isCommentsSelected=false;this.setAnnotationType(element.id,annotType,pageNumber);if(!this.isCommentsSelected){this.selectAnnotationObj={id:element.id,annotType:annotType,pageNumber:pageNumber};}}}this.isSetAnnotationType=false;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.findAnnotationObject=function(id){// eslint-disable-next-line max-len
if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else if(this.pdfViewer.selectedItems.annotations[0]){return this.pdfViewer.selectedItems.annotations[0];}// eslint-disable-next-line
var annotationCollection=this.pdfViewer.annotationCollection;if(annotationCollection){for(var i=0;i<annotationCollection.length;i++){if(annotationCollection[i].annotationId&&annotationCollection[i].annotationId===id){if(annotationCollection[i].shapeAnnotationType==='textMarkup'){return annotationCollection[i];}else{annotationCollection=this.pdfViewer.annotations;for(var j=0;j<annotationCollection.length;j++){if(annotationCollection[j].annotName&&annotationCollection[j].annotName===id){return annotationCollection[j];}}}}}}};StickyNotesAnnotation.prototype.checkAnnotationSettings=function(id){// eslint-disable-next-line
var annotationCollection=this.pdfViewer.annotationCollection;if(annotationCollection){for(var i=0;i<annotationCollection.length;i++){if(annotationCollection[i].annotationId&&annotationCollection[i].annotationId===id){if(annotationCollection[i].annotationSettings&&annotationCollection[i].annotationSettings.isLock){return true;}else{return false;}}}return false;}else{return false;}};StickyNotesAnnotation.prototype.updateCommentsContainerWidth=function(){var accordionContainer=document.getElementById(this.pdfViewer.dataId+'_accordionContentContainer');var commentsContentContainer=document.getElementById(this.pdfViewer.dataId+'_commentscontentcontainer');accordionContainer.style.width=commentsContentContainer.clientWidth+'px';};/**
     * @param pageIndex
     * @private
     */StickyNotesAnnotation.prototype.selectCommentsAnnotation=function(pageIndex){if(this.selectAnnotationObj&&!this.isCommentsSelected){if(this.selectAnnotationObj.pageNumber-1===pageIndex){// eslint-disable-next-line max-len
this.setAnnotationType(this.selectAnnotationObj.id,this.selectAnnotationObj.annotType,this.selectAnnotationObj.pageNumber);this.selectAnnotationObj=null;this.isCommentsSelected=true;}}};StickyNotesAnnotation.prototype.setAnnotationType=function(id,type,pageNumber){var typeString=type==='measure'?'shape_measure':type;if(typeString==='freeText'){typeString='freetext';}// eslint-disable-next-line
var storeCommentObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+typeString);if(this.pdfViewerBase.isStorageExceed){storeCommentObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+typeString];}if(storeCommentObject){var annotationCommentObject=JSON.parse(storeCommentObject);// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line max-len
var index=this.pdfViewer.annotationModule.getPageCollection(annotationCommentObject,pageNumber-1);if(annotationCommentObject[index]){// eslint-disable-next-line
var pageCollections=annotationCommentObject[index].annotations;for(var i=0;i<pageCollections.length;i++){var currentSelector=pageCollections[i].annotationSelectorSettings;if(pageCollections[i].annotName===id){if(annotation){this.pdfViewer.fireAnnotationUnSelect(annotation.annotName,annotation.pageIndex,annotation);}this.pdfViewer.clearSelection(pageNumber-1);if(type==='textMarkup'){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(pageNumber-1,true);// eslint-disable-next-line max-len
var canvas=this.pdfViewerBase.getElement('_annotationCanvas_'+(pageNumber-1));this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(pageCollections[i],canvas,pageNumber-1);this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation=pageCollections[i];this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage=pageNumber-1;this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(true);if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=true;// eslint-disable-next-line max-len
//this.pdfViewer.toolbarModule.annotationToolbarModule.showAnnotationToolbar(this.pdfViewer.toolbarModule.annotationItem);
}}else if(type==='stamp'){this.pdfViewer.select([pageCollections[i].randomId],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(type==='sticky'){this.pdfViewer.select([pageCollections[i].annotName],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else if(type==='ink'){this.pdfViewer.select([pageCollections[i].id],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}else{this.pdfViewer.select([pageCollections[i].id],currentSelector);this.pdfViewer.annotation.onAnnotationMouseDown();}if(type==='textMarkup'){if(pageCollections[i].rect||pageCollections[i].bounds){// eslint-disable-next-line max-len
var scrollValue=this.pdfViewerBase.pageSize[pageNumber-1].top*this.pdfViewerBase.getZoomFactor()+this.pdfViewer.annotationModule.getAnnotationTop(pageCollections[i])*this.pdfViewerBase.getZoomFactor();if(scrollValue){var scroll_1=(scrollValue-20).toString();// eslint-disable-next-line radix
this.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll_1);}}}else{var top_1=pageCollections[i].bounds.top;if(type==='ink'){top_1=pageCollections[i].bounds.y;}// eslint-disable-next-line max-len
var scrollValue=this.pdfViewerBase.pageSize[pageNumber-1].top*this.pdfViewerBase.getZoomFactor()+top_1*this.pdfViewerBase.getZoomFactor();var scroll_2=(scrollValue-20).toString();// eslint-disable-next-line radix
this.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll_2);}this.isCommentsSelected=true;}}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyTextProperty=function(text,previousValue,annotationName){// eslint-disable-next-line
var currentAnnotation;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}if(currentAnnotation){if(currentAnnotation.annotName!==annotationName){currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}if(annotationName&&currentAnnotation.annotName!==annotationName){for(var i=0;i<this.pdfViewer.annotations.length;i++){if(annotationName===this.pdfViewer.annotations[i].annotName){currentAnnotation=this.pdfViewer.annotations[i];break;}}}if(currentAnnotation){// eslint-disable-next-line
var commentsDiv=document.getElementById(currentAnnotation.annotName);if(commentsDiv){// eslint-disable-next-line
var pageNumber=void 0;if(commentsDiv.accessKey){// eslint-disable-next-line
pageNumber=parseInt(commentsDiv.accessKey);}else{pageNumber=this.pdfViewerBase.currentPageNumber;}var type=commentsDiv.getAttribute('name');var pageIndex=pageNumber-1;// eslint-disable-next-line
var pageAnnotations=void 0;var isMeasure=false;// eslint-disable-next-line max-len
if(currentAnnotation.shapeAnnotationType==='FreeText'||this.pdfViewer.enableShapeLabel&&(type==='shape'||type==='shape_measure')){var isTextAdded=false;if(annotationName){if(currentAnnotation.annotName!==annotationName){this.pdfViewer.annotation.modifyDynamicTextValue(text,annotationName);isTextAdded=true;}}if(!isTextAdded){if(currentAnnotation.shapeAnnotationType==='FreeText'){if(currentAnnotation.dynamicText!==text){this.pdfViewer.annotation.modifyDynamicTextValue(text,currentAnnotation.annotName);}currentAnnotation.dynamicText=text;}else{this.pdfViewer.annotation.modifyDynamicTextValue(text,currentAnnotation.annotName);currentAnnotation.labelContent=text;currentAnnotation.notes=text;}this.pdfViewer.nodePropertyChange(currentAnnotation,{});}}if(currentAnnotation.measureType&&currentAnnotation.measureType!==''){pageAnnotations=this.getAnnotations(pageIndex,null,'shape_measure');isMeasure=true;}else{pageAnnotations=this.getAnnotations(pageIndex,null,currentAnnotation.shapeAnnotationType);}if(pageAnnotations!==null&&currentAnnotation.shapeAnnotationType!=='FreeText'){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===currentAnnotation.annotName){// eslint-disable-next-line
var clonedObject=cloneObject(pageAnnotations[i]);if(text!==null){if(pageAnnotations[i].note!==text){// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,i,pageAnnotations[i],'Text Property Added','',clonedObject,pageAnnotations[i]);currentAnnotation=pageAnnotations[i];currentAnnotation.note=text;if(currentAnnotation.enableShapeLabel){currentAnnotation.labelContent=text;}// eslint-disable-next-line max-len
currentAnnotation.modifiedDate=this.getDateAndTime();if(!isMeasure){this.updateUndoRedoCollections(currentAnnotation,pageIndex);}else{this.updateUndoRedoCollections(currentAnnotation,pageIndex,'shape_measure');}if(!previousValue||previousValue===''){// eslint-disable-next-line max-len
this.pdfViewer.fireCommentAdd(currentAnnotation.annotName,currentAnnotation.note,currentAnnotation);}else{// eslint-disable-next-line max-len
this.pdfViewer.fireCommentEdit(currentAnnotation.annotName,currentAnnotation.note,currentAnnotation);}return currentAnnotation;}}}}}}}};/**
     * @param date
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.getDateAndTime=function(date){if(!date){date=new Date();}this.globalize=new sf.base.Internationalization();var dateOptions={format:this.pdfViewer.dateTimeFormat,type:'dateTime'};// eslint-disable-next-line
if(navigator.userAgent.includes("Firefox")){var newDate=new Date(date);if(!isNaN(newDate.getDate())){return this.globalize.formatDate(newDate,dateOptions);}else{var dateValue=this.parseDateString(date);return this.globalize.formatDate(new Date(dateValue),dateOptions);}}else{return this.globalize.formatDate(new Date(date),dateOptions);}};StickyNotesAnnotation.prototype.parseDateString=function(dateString){if(dateString){var dateParts=dateString.split(/[\s,]+/);var month=this.monthToNumber(dateParts[0]);var day=parseInt(dateParts[1],10);var year=new Date().getFullYear();var timeParts=dateParts[2].split(":");var hour=parseInt(timeParts[0],10);var minute=parseInt(timeParts[1],10);// Adjust the hour for AM/PM
if(dateParts[3]==="PM"&&hour!==12){hour+=12;}return new Date(year,month,day,hour,minute);}else{return new Date();}};StickyNotesAnnotation.prototype.monthToNumber=function(monthString){var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];return months.indexOf(monthString.substr(0,3));};// eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyCommentsProperty=function(text,annotName,parentElement,previousValue){// eslint-disable-next-line
var currentAnnotation;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}if(currentAnnotation){// eslint-disable-next-line
var commentsDiv=document.getElementById(currentAnnotation.annotName);// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);var pageIndex=pageNumber-1;// eslint-disable-next-line
var pageAnnotations=void 0;var isMeasure=false;var author=this.getAuthorName(currentAnnotation,commentsDiv);if(currentAnnotation.measureType&&currentAnnotation.measureType!==''){pageAnnotations=this.getAnnotations(pageIndex,null,'shape_measure');isMeasure=true;}else{pageAnnotations=this.getAnnotations(pageIndex,null,currentAnnotation.shapeAnnotationType);}if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===currentAnnotation.annotName){currentAnnotation=pageAnnotations[i];}}}// eslint-disable-next-line
var clonedObject=cloneObject(currentAnnotation);if(currentAnnotation.comments.length>0){var isComment=false;for(var j=0;j<currentAnnotation.comments.length;j++){if(currentAnnotation.comments[j].annotName===annotName){isComment=true;currentAnnotation.comments[j].note=text;// eslint-disable-next-line max-len
currentAnnotation.comments[j].modifiedDate=this.getDateAndTime();}}// eslint-disable-next-line max-len
var newArray={annotName:annotName,parentId:parentElement,subject:'Comments',comments:[],author:author,note:text,shapeAnnotationType:'',state:'',stateModel:'',modifiedDate:this.getDateAndTime(),review:{state:'',stateModel:'',modifiedDate:this.getDateAndTime(),author:author},isLock:false};if(!isComment){currentAnnotation.comments[currentAnnotation.comments.length]=newArray;}}else{// eslint-disable-next-line max-len
var newArray={annotName:annotName,parentId:parentElement,subject:'Comments',comments:[],author:author,note:text,shapeAnnotationType:'',state:'',stateModel:'',modifiedDate:this.getDateAndTime(),review:{state:'',stateModel:'',modifiedDate:this.getDateAndTime(),author:author},isLock:false};currentAnnotation.comments[currentAnnotation.comments.length]=newArray;}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,currentAnnotation,'Comments Property Added','',clonedObject,currentAnnotation);if(!isMeasure){this.updateUndoRedoCollections(currentAnnotation,pageIndex);}else{this.updateUndoRedoCollections(currentAnnotation,pageIndex,'shape_measure');}}if(previousValue!==undefined){this.pdfViewer.fireCommentEdit(annotName,text,currentAnnotation);}else{this.pdfViewer.fireCommentAdd(annotName,text,currentAnnotation);}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyStatusProperty=function(text,statusElement){// eslint-disable-next-line
this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");var currentAnnotation;if(this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}if(currentAnnotation){// eslint-disable-next-line
var commentsDiv=document.getElementById(currentAnnotation.annotName);// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);var pageIndex=pageNumber-1;// eslint-disable-next-line
var pageAnnotations=void 0;var isMeasure=false;var author=commentsDiv.getAttribute('author');if(currentAnnotation.measureType&&currentAnnotation.measureType!==''){pageAnnotations=this.getAnnotations(pageIndex,null,'shape_measure');isMeasure=true;}else{pageAnnotations=this.getAnnotations(pageIndex,null,currentAnnotation.shapeAnnotationType);}if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===currentAnnotation.annotName){currentAnnotation=pageAnnotations[i];}}}// eslint-disable-next-line
var clonedObject=cloneObject(currentAnnotation);if(statusElement.parentElement.firstElementChild.id===statusElement.id){// eslint-disable-next-line max-len
currentAnnotation.review={state:text,stateModel:'Review',author:author,modifiedDate:this.getDateAndTime(),annotId:statusElement.id};currentAnnotation.state=text;currentAnnotation.stateModel='Review';// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,currentAnnotation,'Status Property Added','',clonedObject,currentAnnotation);this.pdfViewer.fireCommentStatusChanged(statusElement.id,currentAnnotation.note,currentAnnotation,currentAnnotation.state);}else{for(var j=0;j<currentAnnotation.comments.length;j++){if(currentAnnotation.comments[j].annotName===statusElement.id){// eslint-disable-next-line
var clonedObj=cloneObject(currentAnnotation.comments[j]);currentAnnotation.comments[j].state=text;currentAnnotation.comments[j].stateModel='Review';// eslint-disable-next-line max-len
currentAnnotation.comments[j].review={state:text,stateModel:'Review',author:author,modifiedDate:this.getDateAndTime(),annotId:statusElement.id};// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,currentAnnotation,'Status Property Added','',clonedObj,currentAnnotation.comments[j]);this.pdfViewer.fireCommentStatusChanged(currentAnnotation.comments[j].annotName,currentAnnotation.comments[j].note,currentAnnotation,currentAnnotation.comments[j].state);}}}if(!isMeasure){this.updateUndoRedoCollections(currentAnnotation,pageIndex);}else{this.updateUndoRedoCollections(currentAnnotation,pageIndex,'shape_measure');}}};/**
     * @param commentsElement
     * @param replyElement
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.modifyCommentDeleteProperty=function(commentsElement,replyElement){// eslint-disable-next-line
var clonedObject;// eslint-disable-next-line
var clonedAnnotation;// eslint-disable-next-line
var currentAnnotation;// eslint-disable-next-line
var commentsParentElement=document.getElementById(commentsElement.id);this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");if(commentsParentElement){// eslint-disable-next-line
var pageNumber=parseInt(commentsParentElement.accessKey);var pageIndex=pageNumber-1;var annotType=commentsElement.getAttribute('name');// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageIndex,null,annotType);if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===commentsElement.id){currentAnnotation=pageAnnotations[i];}}}for(var i=1;i<=currentAnnotation.comments.length;i++){if(currentAnnotation.comments[i-1].annotName===replyElement.id){clonedAnnotation=cloneObject(currentAnnotation);var positionValue=i-1;currentAnnotation.comments[positionValue].position=i;clonedObject=cloneObject(currentAnnotation.comments[positionValue]);// eslint-disable-next-line max-len
this.pdfViewer.fireCommentDelete(currentAnnotation.comments[positionValue].annotName,currentAnnotation.comments[positionValue].note,currentAnnotation);currentAnnotation.comments.splice(positionValue,1);this.pdfViewer._dotnetInstance.invokeMethodAsync('RemoveReplyCollection',replyElement.id,pageIndex,positionValue);}}// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,clonedAnnotation,'Comments Reply Deleted','',clonedObject,currentAnnotation);this.updateUndoRedoCollections(currentAnnotation,pageIndex);}};/**
     * @param annotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateOpacityValue=function(annotation){// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(annotation.pageIndex,null,annotation.shapeAnnotationType);if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===annotation.annotName){pageAnnotations[i].opacity=annotation.opacity;this.updateUndoRedoCollections(pageAnnotations[i],annotation.pageIndex);}}}};/**
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.undoAction=function(annotation,isAction,undoAnnotation){if(isAction==='Text Property Added'){if(annotation){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(annotation.annotName);if(commentsMainDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsMainDiv.accessKey);var pageIndex=pageNumber-1;// eslint-disable-next-line
var clonedAnnotationObject=cloneObject(annotation);var value=undoAnnotation.note;annotation.note=value;if(commentsMainDiv.childElementCount===2){commentsMainDiv.lastChild.style.display='block';}this.updateUndoRedoCollections(annotation,pageIndex);return clonedAnnotationObject;}}}else if(isAction==='Comments Property Added'){if(annotation.comments.length>0){// eslint-disable-next-line
var commentsDiv=document.getElementById(annotation.annotName);var pageIndex=this.pdfViewerBase.currentPageNumber-1;if(commentsDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
var clonedAnnotationObject=cloneObject(annotation);// eslint-disable-next-line
var comment=annotation.comments[annotation.comments.length-1];// eslint-disable-next-line
var removeDiv=document.getElementById(comment.annotName);if(removeDiv){removeDiv.remove();}annotation=undoAnnotation;this.updateUndoRedoCollections(annotation,pageIndex);return clonedAnnotationObject;}}else if(isAction==='Status Property Added'){if(annotation){// eslint-disable-next-line
var commentsDiv=document.getElementById(annotation.annotName);var pageIndex=this.pdfViewerBase.currentPageNumber-1;if(commentsDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
var clonedAnnotationObject=cloneObject(annotation);if(annotation.annotName===undoAnnotation.annotName){annotation.review=undoAnnotation.review;annotation.state=undoAnnotation.state;annotation.stateModel=undoAnnotation.stateModel;this.pdfViewer.annotation.redoCommentsElement.push(annotation);}else{for(var j=0;j<annotation.comments.length;j++){if(annotation.comments[j].annotName===undoAnnotation.annotName){annotation.comments[j].state=undoAnnotation.state;annotation.comments[j].stateModel=undoAnnotation.stateModel;annotation.comments[j].review=undoAnnotation.review;this.pdfViewer.annotation.redoCommentsElement.push(annotation.comments[j]);break;}}}// eslint-disable-next-line
var activeDiv=document.getElementById(undoAnnotation.annotName);if(activeDiv.lastChild.id===this.pdfViewer.dataId+'status'+'_container'){activeDiv.lastChild.remove();}else{if(activeDiv.firstChild.lastChild.id===this.pdfViewer.dataId+'status'+'_container'){activeDiv.firstChild.lastChild.remove();}}this.updateUndoRedoCollections(annotation,pageIndex);return clonedAnnotationObject;}}else if(isAction==='Comments Reply Deleted'){// eslint-disable-next-line
var commentsDiv=document.getElementById(annotation.annotName);if(commentsDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);var pageIndex=pageNumber-1;this.pdfViewer.annotation.redoCommentsElement.push(undoAnnotation);this.updateUndoRedoCollections(annotation,pageIndex);return annotation;}}else if(isAction==='dynamicText Change'){if(annotation){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(annotation.annotName);if(commentsMainDiv){// eslint-disable-next-line
this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFreeText',undoAnnotation.annotName,undoAnnotation.dynamicText);return annotation;}}}};/**
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @param annotation
     * @param isAction
     * @param undoAnnotation
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.redoAction=function(annotation,isAction,undoAnnotation){if(isAction==='Text Property Added'){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(annotation.annotName);if(commentsMainDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsMainDiv.accessKey);var pageIndex=pageNumber-1;commentsMainDiv.lastChild.style.display='block';this.updateUndoRedoCollections(annotation,pageIndex);return annotation;}}else if(isAction==='Comments Property Added'){// eslint-disable-next-line
var comment=annotation.comments[annotation.comments.length-1];var commentsDiv=document.getElementById(annotation.annotName);if(commentsDiv){// eslint-disable-next-line
var pageNumber=parseInt(commentsDiv.accessKey);var pageIndex=pageNumber-1;this.updateUndoRedoCollections(annotation,pageIndex);return annotation;}}else if(isAction==='Status Property Added'){// eslint-disable-next-line
var poppedItem=this.pdfViewer.annotation.redoCommentsElement.pop();var pageIndex=this.pdfViewerBase.currentPageNumber-1;if(poppedItem){// eslint-disable-next-line max-len
var statusContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_container',className:'e-pv-status-container'});// eslint-disable-next-line max-len
var statusDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+'status'+'_div',className:'e-pv-status-div'});var statusSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'status'+'_icon'});statusDiv.appendChild(statusSpan);statusContainer.appendChild(statusDiv);// eslint-disable-next-line
var activeDiv=document.getElementById(annotation.annotName);if(activeDiv){// eslint-disable-next-line
var pageNumber=parseInt(activeDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
if(annotation.annotName===poppedItem.annotName){this.updateStatusContainer(annotation.state,statusSpan,statusDiv,statusContainer);for(var i=0;i<activeDiv.firstChild.children.length;i++){if(activeDiv.firstChild.children[i].id===this.pdfViewer.dataId+'status_container'){activeDiv.firstChild.children[i].parentElement.removeChild(activeDiv.firstChild.children[i]);}}activeDiv.firstChild.appendChild(statusContainer);}else{for(var i=0;i<annotation.comments.length;i++){if(annotation.comments[i].annotName===poppedItem.annotName){this.updateStatusContainer(annotation.comments[i].state,statusSpan,statusDiv,statusContainer);var statusElement=document.getElementById(poppedItem.annotName);for(var i_1=0;i_1<statusElement.children.length;i_1++){if(statusElement.children[i_1].id===this.pdfViewer.dataId+'status_container'){statusElement.children[i_1].parentElement.removeChild(statusElement.children[i_1]);}}if(statusElement){statusElement.appendChild(statusContainer);}}}}}this.updateUndoRedoCollections(annotation,pageIndex);return annotation;}else if(isAction==='Comments Reply Deleted'){var pageIndex=this.pdfViewerBase.currentPageNumber-1;// eslint-disable-next-line
var activeDiv=document.getElementById(annotation.annotName);if(activeDiv){// eslint-disable-next-line
var pageNumber=parseInt(activeDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
var poppedItem=this.pdfViewer.annotation.redoCommentsElement.pop();// eslint-disable-next-line
var clonedAnnotationObject=cloneObject(annotation);for(var i=0;i<annotation.comments.length;i++){if(annotation.comments[i].annotName===poppedItem.annotName){// eslint-disable-next-line
var replyElement=document.getElementById(poppedItem.annotName);annotation.comments.splice(i,1);replyElement.remove();}}this.updateUndoRedoCollections(annotation,pageIndex);return clonedAnnotationObject;}else if(isAction==='dynamicText Change'){if(annotation){// eslint-disable-next-line
var commentsMainDiv=document.getElementById(annotation.annotName);if(commentsMainDiv){// eslint-disable-next-line
this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFreeText',annotation.annotName,annotation.dynamicText);return annotation;}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateUndoRedoCollections=function(annotationBase,pageNumber,shapeType,action){var annotationType=!shapeType?annotationBase.shapeAnnotationType:shapeType;if(annotationBase.indent&&annotationBase.indent!==''){annotationType='shape_measure';}// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageNumber,null,annotationType);if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.annotName===pageAnnotations[i].annotName){pageAnnotations[i]=annotationBase;this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);if(action){pageAnnotations.splice(i,1);this.deleteStickyNotesAnnotations(pageAnnotations,pageNumber);}}}if(annotationType==='shape_measure'){this.manageAnnotations(pageAnnotations,pageNumber,'shape_measure');}else{this.manageAnnotations(pageAnnotations,pageNumber,annotationBase.shapeAnnotationType);}}};/**
     * @param pageIndex
     * @param type
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.addAnnotationComments=function(pageIndex,type){var pageNumber=pageIndex+1;// eslint-disable-next-line
var poppedItem=this.pdfViewer.annotation.undoCommentsElement.pop();if(poppedItem){//this.createCommentsContainer(poppedItem, pageNumber);
if(type=="freeText"||type=="FreeText"){this.addComments(type,pageNumber,poppedItem.subject,poppedItem.annotName,poppedItem.dynamicText,poppedItem.author,poppedItem.comments);}else{this.addComments(type,pageNumber,poppedItem.subject,poppedItem.annotName,poppedItem.note,poppedItem.author,poppedItem.comments);}this.updateUndoRedoCollections(poppedItem,pageIndex,type);}};/**
     * @param annotation
     * @param type
     * @param action
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.findPosition=function(annotation,type,action){var index;var pageIndex;// eslint-disable-next-line
var commentsDiv=document.getElementById(annotation.annotName);if(commentsDiv){// eslint-disable-next-line
if(annotation.pageNumber!==undefined){pageIndex=annotation.pageNumber;}else if(annotation.pageIndex!==undefined){pageIndex=annotation.pageIndex;}else{var pageNumber=parseInt(commentsDiv.accessKey);pageIndex=pageNumber-1;}// eslint-disable-next-line
var parentDiv=commentsDiv.parentElement;for(var i=0;i<parentDiv.childElementCount;i++){if(parentDiv.childNodes[i].id===annotation.annotName){index=i;}}if(type==='Stamp'||type==='Image'){type='stamp';}else if(type==='FreeText'){type='freetext';}else if(type==='StickyNotes'||type==='sticky'){type='sticky';}else if(type==='Ink'){type='ink';}// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageIndex,null,type);if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(pageAnnotations[i].annotName===annotation.annotName){// eslint-disable-next-line
var clonedObject=cloneObject(pageAnnotations[i]);pageAnnotations[i].position=index;this.pdfViewer.annotation.undoCommentsElement.push(pageAnnotations[i]);if(type==='sticky'){this.updateUndoRedoCollections(clonedObject,pageIndex,null,action);}}}}}};/**
     * @param pageNumber
     * @param annotationBase
     * @private
     */StickyNotesAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){if(annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null,'sticky');if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber,'sticky');}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations,type){// eslint-disable-next-line
var annotationCollection;if(type==='Stamp'||type==='stamp'||type==='Image'){type='stamp';}else if(type==='StickyNotes'||type==='sticky'){type='sticky';}else if(type==='textMarkup'){type='textMarkup';}else if(type==='shape'||type==='Line'||type==='Radius'||type==='Rectangle'||type==='Ellipse'||type==='Polygon'||type==='LineWidthArrowHead'||type==='Square'||type==='Circle'){type='shape';}else if(type==='FreeText'||type==='freetext'||type==='freeText'){type='freetext';}else if(type==='ink'||type==='Ink'){type='ink';}else{type='shape_measure';}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+type);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+type];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.manageAnnotations=function(pageAnnotations,pageNumber,type){if(type==='Stamp'||type==='stamp'){type='stamp';}else if(type==='Sticky'||type==='sticky'||type==='StickyNotes'){type='sticky';}else if(type==='textMarkup'){type='textMarkup';}else if(type==='shape'||type==='Line'||type==='Radius'||type==='Rectangle'||type==='Ellipse'||type==='Polygon'||type==='LineWidthArrowHead'||type==='Square'||type==='Circle'){type='shape';}else if(type==='FreeText'){type='freetext';}else if(type==='ink'||type==='Ink'){type='ink';}else{type='shape_measure';}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+type);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+type];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_'+type);}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+type]=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_'+type,annotationStringified);}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateStickyNotes=function(annotation,id){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sticky');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky'];}if(storeObject){// eslint-disable-next-line
var bounds=annotation.bounds;var annotObject=JSON.parse(storeObject);for(var k=0;k<annotObject.length;k++){// eslint-disable-next-line
var currentAnnot=annotObject[k];for(var j=0;j<currentAnnot.annotations.length;j++){if(annotObject[k].annotations[j].annotName===annotation.annotName){if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sticky');}var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,0);if(annotObject[pageIndex]){// eslint-disable-next-line max-len
annotObject[k].annotations[j].bounds={x:bounds.x,y:bounds.y,left:bounds.x,top:bounds.y,width:bounds.width,height:bounds.height,right:bounds.right,bottom:bounds.bottom};}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){// eslint-disable-next-line max-len
this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sticky',annotationStringified);}break;}}}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.saveStickyAnnotations=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sticky');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky'];}// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject&&!this.pdfViewer.annotationSettings.skipDownload){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};// eslint-disable-next-line
StickyNotesAnnotation.prototype.deleteStickyNotesAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_sticky');if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky'];}if(storeObject){var annotObject=JSON.parse(storeObject);if(!this.pdfViewerBase.isStorageExceed){window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_sticky');}var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);if(this.pdfViewerBase.isStorageExceed){this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_sticky']=annotationStringified;}else{window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_sticky',annotationStringified);}}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.addStickyNotesAnnotations=function(pageNumber,annotationBase){var pageAnnotations=this.getAnnotations(pageNumber,null,'sticky');if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageAnnotations(pageAnnotations,pageNumber,'sticky');};/**
     * @param newAnnotation
     * @param annotation
     * @param isCut
     * @param newAnnotation
     * @param annotation
     * @param isCut
     * @param newAnnotation
     * @param annotation
     * @param isCut
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateAnnotationCollection=function(newAnnotation,annotation,isCut){var type=this.findAnnotationType(annotation);// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(annotation.pageIndex,null,type);if(isCut){pageAnnotations=this.pdfViewer.annotationModule.removedAnnotationCollection;}if(pageAnnotations!==null){for(var i=0;i<pageAnnotations.length;i++){if(isCut&&!pageAnnotations[i].annotName){pageAnnotations[i].annotName=pageAnnotations[i].annotationId;}if(pageAnnotations[i].annotName===annotation.annotName){// eslint-disable-next-line
var updateAnnotation=cloneObject(pageAnnotations[i]);updateAnnotation.annotName=newAnnotation.annotName;if(type==='shape'||type==='shape_measure'||type==='freetext'||type==='ink'){updateAnnotation.id=newAnnotation.id;}if(type==='stamp'){updateAnnotation.randomId=newAnnotation.id;}if(type==='ink'){updateAnnotation.bounds.x=newAnnotation.bounds.x;updateAnnotation.bounds.y=newAnnotation.bounds.y;}else{updateAnnotation.bounds.left=newAnnotation.bounds.x;updateAnnotation.bounds.top=newAnnotation.bounds.y;updateAnnotation.vertexPoints=newAnnotation.vertexPoints;}updateAnnotation.note=updateAnnotation.note?updateAnnotation.note:'';if(type==='freetext'){updateAnnotation.note=updateAnnotation.note?updateAnnotation.note:updateAnnotation.notes?updateAnnotation.notes:updateAnnotation.dynamicText?updateAnnotation.dynamicText:'';}updateAnnotation.comments=[];if(newAnnotation.comments.length>0){updateAnnotation.comments=newAnnotation.comments;}// eslint-disable-next-line max-len
updateAnnotation.review={state:'',stateModel:'',modifiedDate:updateAnnotation.ModifiedDate,author:updateAnnotation.author};updateAnnotation.state='';updateAnnotation.stateModel='';updateAnnotation.pageNumber=newAnnotation.pageIndex;this.pdfViewer.annotationModule.storeAnnotations(newAnnotation.pageIndex,updateAnnotation,'_annotations_'+type);if(updateAnnotation.comments.length>0){this.addComments(type,updateAnnotation.pageNumber+1,updateAnnotation.shapeAnnotationType,updateAnnotation.annotName,updateAnnotation.note,updateAnnotation.author,updateAnnotation.comments);}else{this.addComments(type,updateAnnotation.pageNumber+1,updateAnnotation.shapeAnnotationType,updateAnnotation.annotName,updateAnnotation.note,updateAnnotation.author);}if(isCut){this.pdfViewer.annotationModule.removedAnnotationCollection=[];}break;}}}};StickyNotesAnnotation.prototype.findAnnotationType=function(annotation){var annotType;if(annotation.measureType!==''){annotType='shape_measure';}else{if(annotation.shapeAnnotationType==='StickyNotes'){annotType='sticky';}else if(annotation.shapeAnnotationType==='Stamp'||annotation.shapeAnnotationType==='Image'){annotType='stamp';}else if(annotation.shapeAnnotationType==='FreeText'){annotType='freetext';}else if(annotation.shapeAnnotationType==='Ink'){annotType='ink';}else{annotType='shape';}}return annotType;};StickyNotesAnnotation.prototype.setExistingAnnotationModifiedDate=function(date){var modifiedDateTime;if(date!==''){modifiedDateTime=this.setModifiedDate(date);}else{modifiedDateTime=this.setModifiedDate();}return modifiedDateTime;};StickyNotesAnnotation.prototype.updateModifiedTime=function(time,minutes){var modifiedTime;if(time>=12){if(time===12){modifiedTime=time+':'+minutes+' PM';}else{modifiedTime=time-12+':'+minutes+' PM';}}else{modifiedTime=time+':'+minutes+' AM';}return modifiedTime;};StickyNotesAnnotation.prototype.setModifiedDate=function(data){var dateTime;if(data){dateTime=this.getDateAndTime(data);}else{dateTime=this.getDateAndTime();}var date=new Date(dateTime);var modifiedTime;var modifiedDate=date.toString().split(' ').splice(1,2).join(' ');if(date.toLocaleTimeString().split(' ').length===2){// eslint-disable-next-line max-len
modifiedTime=date.toLocaleTimeString().split(' ')[0].split(':').splice(0,2).join(':')+' '+date.toLocaleTimeString().split(' ')[1];}else{// eslint-disable-next-line
var time=parseInt(date.toLocaleTimeString().split(':')[0]);var minutes=date.toLocaleTimeString().split(':')[1];modifiedTime=this.updateModifiedTime(time,minutes);}var modifiedDateTime=modifiedDate+', '+modifiedTime;return modifiedDateTime;};// eslint-disable-next-line
StickyNotesAnnotation.prototype.updateModifiedDate=function(titleContainer){if(titleContainer.id===this.pdfViewer.dataId+'_commenttype_icon'){titleContainer=titleContainer.nextSibling;}var author=titleContainer.textContent.split('-')[0];titleContainer.textContent=author+' - '+this.setModifiedDate();};/**
     * @param annotation
     * @param isBounds
     * @param isUndoRedoAction
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateAnnotationModifiedDate=function(annotation,isBounds,isUndoRedoAction){// eslint-disable-next-line
var titleContainer;if(annotation){// eslint-disable-next-line
var commentsContainer=document.getElementById(annotation.annotName);if(commentsContainer){if(!isBounds){titleContainer=commentsContainer.firstElementChild.firstElementChild.getElementsByClassName('e-pv-comment-title')[0];var author=titleContainer.textContent.split('-')[0];titleContainer.textContent=author+' - '+this.setModifiedDate();}else{var type=this.findAnnotationType(annotation);// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(annotation.pageIndex,null,type);if(pageAnnotations!=null&&annotation){for(var i=0;i<pageAnnotations.length;i++){if(annotation.annotName===pageAnnotations[i].annotName){// eslint-disable-next-line max-len
if(annotation.bounds.x!==pageAnnotations[i].bounds.left||annotation.bounds.y!==pageAnnotations[i].bounds.top||annotation.bounds.height!==pageAnnotations[i].bounds.height||annotation.bounds.width!==pageAnnotations[i].bounds.width){titleContainer=commentsContainer.firstElementChild.firstElementChild.getElementsByClassName('e-pv-comment-title')[0];var author=titleContainer.textContent.split('-')[0];titleContainer.textContent=author+' - '+this.setModifiedDate();}}if(pageAnnotations[i].shapeAnnotationType==='sticky'){this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],annotation.pageIndex);}}}}if(isUndoRedoAction){titleContainer=commentsContainer.firstElementChild.firstElementChild.getElementsByClassName('e-pv-comment-title')[0];if(annotation.modifiedDate!==undefined){var author=titleContainer.textContent.split('-')[0];titleContainer.textContent=author+' - '+this.setExistingAnnotationModifiedDate(annotation.modifiedDate);}}}}};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.saveImportedStickyNotesAnnotations=function(annotation,pageNumber){var annotationObject=null;if(!annotation.Author){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author;}// eslint-disable-next-line max-len
var isLock=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock;// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);annotationObject={// eslint-disable-next-line max-len
shapeAnnotationType:'sticky',type:'StickyNotes',author:annotation.Author,allowedInteractions:allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,opacity:annotation.Opacity,state:annotation.State,stateModel:annotation.StateModel,pathData:'',comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},pageNumber:pageNumber,// eslint-disable-next-line max-len
bounds:{x:annotation.Bounds.X,y:annotation.Bounds.Y,left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotName:annotation.AnnotName,color:annotation.color,annotationSelectorSettings:this.getSettings(annotation),customData:this.pdfViewer.annotation.getCustomData(annotation),annotationSettings:{isLock:isLock},isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_sticky');};/**
     * @param annotation
     * @param pageNumber
     * @param annotation
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.updateStickyNotesAnnotationCollections=function(annotation,pageNumber){// eslint-disable-next-line
var annotationObject=null;if(!annotation.Author){// eslint-disable-next-line max-len
annotation.Author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author;}// eslint-disable-next-line max-len
var isLock=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock;// eslint-disable-next-line
var allowedInteractions=annotation.AllowedInteraction?annotation.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);if(annotation.IsLock){isLock=annotation.isLock;}annotationObject={// eslint-disable-next-line max-len
shapeAnnotationType:'sticky',type:'StickyNotes',author:annotation.Author,allowedInteractions:allowedInteractions,modifiedDate:annotation.ModifiedDate,subject:annotation.Subject,note:annotation.Note,opacity:annotation.Opacity,state:annotation.State,stateModel:annotation.StateModel,pathData:'',comments:this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author),review:{state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author},// eslint-disable-next-line max-len
bounds:{x:annotation.Bounds.X,y:annotation.Bounds.Y,left:annotation.Bounds.X,top:annotation.Bounds.Y,width:annotation.Bounds.Width,height:annotation.Bounds.Height,right:annotation.Bounds.Right,bottom:annotation.Bounds.Bottom},annotationId:annotation.AnnotName,color:annotation.color,pageNumber:pageNumber,customData:this.pdfViewer.annotation.getCustomData(annotation),annotationSettings:{isLock:isLock},isPrint:annotation.IsPrint,isCommentLock:annotation.IsCommentLock};return annotationObject;};/**
     * @private
     */StickyNotesAnnotation.prototype.clear=function(){this.commentsCount=0;this.commentsreplyCount=0;this.isAccordionContainer=true;this.isEditableElement=false;this.isCreateContextMenu=false;this.isPageCommentsRendered=false;this.isCommentsRendered=false;this.isAnnotationRendered=false;if(this.commentMenuObj){this.commentMenuObj.destroy();}// eslint-disable-next-line
var accordionPages=document.querySelectorAll('.e-pv-accordion-page-container');if(accordionPages){for(var j=0;j<accordionPages.length;j++){// eslint-disable-next-line
accordionPages[j].remove();}}if(this.commentsRequestHandler){this.commentsRequestHandler.clear();}};/**
     * @private
     */StickyNotesAnnotation.prototype.getModuleName=function(){return'StickyNotesAnnotation';};/**
     * This method used to add annotations with using program.
     *
     * @param annotationObject - It describes type of annotation object
     * @param offset - It describes about the annotation bounds or location
     * @returns Object
     * @private
     */StickyNotesAnnotation.prototype.updateAddAnnotationDetails=function(annotationObject,offset){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:1,y:1},pageNumber:0};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:1,y:1};else offset=annotationObject.offset;//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();//Creating annotation settings
var annotationSelectorSettings=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings);var allowedInteractions=this.pdfViewer.stickyNotesSettings.allowedInteractions?this.pdfViewer.stickyNotesSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;//Creating Annotation objects with it's proper properties
var stickyNotesAnnotation=[];var stickyNotes={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'sticky',AnnotationFlags:null,AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,Author:annotationObject.author?annotationObject.author:'Guest',Bounds:{X:offset.x,Y:offset.y,Width:30,Height:30,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:30,IsEmpty:false,Width:30}},Color:{IsEmpty:false,B:51,Blue:0.2,C:0,G:255},Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,Icon:'Comment',IsCommentLock:false,IsLock:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,ModifiedDate:currentDateString,Note:"",Opacity:annotationObject.opacity?annotationObject.opacity:1,Reference:null,Size:{IsEmpty:true,Width:0,Height:0},State:"",StateModel:"",StrokeColor:null,SubType:null,Subject:'Sticky Note',Type:null};//Adding the annotation object to an array and return it
stickyNotesAnnotation[0]=stickyNotes;return{stickyNotesAnnotation:stickyNotesAnnotation};};/**
     * @private
    */StickyNotesAnnotation.prototype.getAnnotationType=function(type){var annotationType;if(type==='stamp'||type==='Stamp'){annotationType='stamp';}else if(type==='shape'||type==='Line'||type==='Radius'||type==='Rectangle'||type==='Ellipse'||type==='Polygon'||type==='LineWidthArrowHead'||type==='Square'||type==='Circle'){annotationType='shape';}else if(type==='textMarkup'){annotationType='textMarkup';}else if(type==='freeText'||type==='FreeText'){annotationType='freeText';}else if(type==='sticky'||type==='StickyNotes'){annotationType='sticky';}else if(type==='measure'||type==='shape_measure'){annotationType='measure';}else if(type==='ink'||type==='Ink'){annotationType='ink';}return annotationType;};/**
     * @private
     */StickyNotesAnnotation.prototype.addMouseDownOnCommentDiv=function(){var commentPanelContainer=document.querySelectorAll('.e-pv-comments-container');if(commentPanelContainer.length>0){this.mouseDownOnCommentDiv();return true;}return false;};/**
     * @private
     */StickyNotesAnnotation.prototype.keyboardClientBoundingRectMoreIcon=function(){var button=document.getElementById(this.pdfViewer.dataId+"_annotation_more_icon");var rect=button.getBoundingClientRect();return{left:rect.left,top:rect.top+rect.height,screenX:rect.x};};/**
     * @private
     */StickyNotesAnnotation.prototype.keyboardClientBoundingRectMoreOptions=function(){var dataId=this.pdfViewer.dataId;var button=document.querySelectorAll('[id="'+dataId+'_more-options"][style*="visibility: visible"]');if(button.length>0){var rect=button[0].getBoundingClientRect();return{left:rect.left,top:rect.top+rect.height,screenX:rect.x};}return null;};/**
    * @private
    */StickyNotesAnnotation.prototype.enableEditorMode=function(){var activeCommentsDiv=document.activeElement;var editorElement=activeCommentsDiv.querySelector(".e-editable-value-container");var event=new Event("dblclick",{bubbles:true,cancelable:true});var editableLine=activeCommentsDiv.querySelector(".e-editable-inline");if(editorElement||editableLine){this.pdfViewerBase.updateCommentPanel();if(editorElement){editorElement.dispatchEvent(event);}else if(editableLine){editableLine.style.display="block";}if(activeCommentsDiv.parentElement){this.pdfViewer.annotationModule.selectAnnotation(activeCommentsDiv.parentElement.id,true);}}};/**
     * @private
     */StickyNotesAnnotation.prototype.mouseDownOnCommentDiv=function(){// eslint-disable-next-line
var replyDiv=document.getElementsByClassName('e-editable-inline');for(var i=0;i<replyDiv.length;i++){if(!replyDiv[i].getAttribute("clickeventadded")){replyDiv[i].addEventListener('click',this.editReply.bind(this));replyDiv[i].setAttribute("clickeventadded",true);}}// eslint-disable-next-line
var commentDiv=document.getElementsByClassName('e-pv-comment-textbox');for(var i=0;i<commentDiv.length;i++){if(!commentDiv[i].getAttribute("clickeventadded")){commentDiv[i].addEventListener('click',this.editComment.bind(this));commentDiv[i].setAttribute("clickeventadded",true);}}// eslint-disable-next-line
var commentPanelContainer=document.querySelectorAll('.e-pv-comments-container');for(var i=0;i<commentPanelContainer.length;i++){if(!commentPanelContainer[i].getAttribute("clickeventadded")){commentPanelContainer[i].addEventListener('click',this.clickOnCommentsContainer.bind(this));commentPanelContainer[i].setAttribute("clickeventadded",true);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){commentPanelContainer[i].classList.add('e-pv-comments-border');}}}// eslint-disable-next-line
var commetTitleDiv=document.getElementsByClassName('e-pv-comment-title-container');for(var i=0;i<commetTitleDiv.length;i++){if(!commetTitleDiv[i].getAttribute("clickeventadded")){commetTitleDiv[i].addEventListener('click',this.onClickCommentTitle.bind(this));commetTitleDiv[i].setAttribute("clickeventadded",true);}}// eslint-disable-next-line
var ReplyTitleDiv=document.getElementsByClassName("e-pv-reply-title-container");for(var i=0;i<ReplyTitleDiv.length;i++){if(!ReplyTitleDiv[i].getAttribute("clickeventadded")){ReplyTitleDiv[i].addEventListener('click',this.onClickReplyTitle.bind(this));ReplyTitleDiv[i].setAttribute("clickeventadded",true);}}// eslint-disable-next-line
var commentsDiv=document.getElementsByClassName("e-pv-comments-div");for(var i=0;i<commentsDiv.length;i++){if(!commentsDiv[i].getAttribute("clickeventadded")){commentsDiv[i].addEventListener('click',this.onClickCommentsDiv.bind(this));commentsDiv[i].addEventListener('focus',this.onFocusCommentsDiv.bind(this));commentsDiv[i].addEventListener('blur',this.onBlurCommentsDiv.bind(this));commentsDiv[i].setAttribute("clickeventadded",true);}}// eslint-disable-next-line
var replyCommentsDiv=document.getElementsByClassName("e-pv-reply-div");for(var i=0;i<replyCommentsDiv.length;i++){if(!replyCommentsDiv[i].getAttribute("clickeventadded")){replyCommentsDiv[i].addEventListener('click',this.onClickCommentsDiv.bind(this));replyCommentsDiv[i].addEventListener('focus',this.onFocusCommentsDiv.bind(this));replyCommentsDiv[i].addEventListener('blur',this.onBlurCommentsDiv.bind(this));replyCommentsDiv[i].setAttribute("clickeventadded",true);}}};/**
    * @private
    */StickyNotesAnnotation.prototype.onClickCommentTitle=function(event){// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}event.currentTarget.children[2].style.visibility='visible';this.isMouseClickEvent=true;};/**
    * @private
    */StickyNotesAnnotation.prototype.onBlurCommentsDiv=function(event){if(this.previouslyFocusedElement){this.previouslyFocusedElement.classList.remove("e-focused");}};/**
    * @private
    */StickyNotesAnnotation.prototype.onClickCommentsDiv=function(event){var activeElement=document.activeElement;this.previouslyFocusedElement=activeElement;this.isMouseClickEvent=true;};/**
    * @private
    */StickyNotesAnnotation.prototype.onFocusCommentsDiv=function(event){if(!this.isMouseClickEvent){var activeElement=document.activeElement;this.previouslyFocusedElement=activeElement;var commentsDiv=document.getElementsByClassName("e-pv-comments-div");for(var i=0;i<commentsDiv.length;i++){commentsDiv[i].classList.remove("e-focused");}var visibleMoreOptionButtons=document.querySelectorAll("#"+this.pdfViewer.dataId+"_more-options");for(var i=0;i<visibleMoreOptionButtons.length;i++){visibleMoreOptionButtons[i].style.visibility="hidden";}event.currentTarget.classList.add("e-focused");var commentPanelContainer=document.querySelectorAll(".e-pv-comments-container");var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}for(var i=0;i<commentPanelContainer.length;i++){var inplaceEditorElement=commentPanelContainer[i].getElementsByClassName('e-editable-inline');if(commentPanelContainer[i].id!==event.currentTarget.parentElement.id){if(commentPanelContainer[i].lastElementChild.classList.contains('e-pv-comments-div')){if(inplaceEditorElement&&inplaceEditorElement[0]){inplaceEditorElement[0].style.display='none';}}}else{if(inplaceEditorElement&&inplaceEditorElement[0]){inplaceEditorElement[0].style.display='block';}}}var childElement=event.currentTarget.querySelector('.e-pv-more-options-button');if(childElement){childElement.style.visibility='visible';}this.pdfViewer._dotnetInstance.invokeMethodAsync('GetCommentId',event.currentTarget.parentElement.id);var currentAnnotation;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else if(this.pdfViewer.selectedItems.annotations[0]){currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}if(sf.base.isNullOrUndefined(currentAnnotation)||currentAnnotation.annotName!==event.currentTarget.parentElement.id){this.pdfViewer.annotationModule.selectAnnotation(event.currentTarget.parentElement.id,true);}}else{this.isMouseClickEvent=false;}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.onClickReplyTitle=function(event){// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}event.currentTarget.children[1].style.visibility='visible';this.pdfViewer._dotnetInstance.invokeMethodAsync('GetReplyCommentId',event.currentTarget.parentElement.id);event.preventDefault();this.isMouseClickEvent=true;};/**
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.editReply=function(event){// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}if(event.currentTarget.parentElement.children[0].children[1]){event.currentTarget.parentElement.children[0].children[1].style.visibility='visible';event.currentTarget.parentElement.parentElement.classList.add('e-pv-comments-border');}event.preventDefault();this.isMouseClickEvent=true;};/**
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.editComment=function(event){// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}if(event.currentTarget.parentElement.parentElement.children[0].children[2]){event.currentTarget.parentElement.parentElement.children[0].children[2].style.visibility='visible';}event.currentTarget.parentElement.parentElement.parentElement.classList.add('e-pv-comments-border');event.preventDefault();this.isMouseClickEvent=true;};StickyNotesAnnotation.prototype.clickOnCommentsContainer=function(event){// eslint-disable-next-line
var annotation=this.findAnnotationObject(event.currentTarget.id);var isLocked=this.checkAnnotationSettings(event.currentTarget.id);this.isMouseClickEvent=true;if(isLocked){if(this.pdfViewer.annotationModule.checkAllowedInteractions('Select',annotation)){isLocked=false;}}this.pdfViewerBase.updateCommentPanel();if(!isLocked){// eslint-disable-next-line
var commentPanelContainer=document.querySelectorAll(".e-pv-comments-container");var commentsDiv=document.getElementsByClassName("e-pv-comments-div");for(var i=0;i<commentsDiv.length;i++){commentsDiv[i].classList.remove("e-focused");}var replyCommentsDiv=document.getElementsByClassName("e-pv-reply-div");for(var i=0;i<replyCommentsDiv.length;i++){replyCommentsDiv[i].classList.remove("e-focused");}var currentTargetElement=event.target;var focusApplied=false;while(!focusApplied){var replyComment=currentTargetElement.classList.contains("e-pv-reply-div");var commentElement=currentTargetElement.classList.contains("e-pv-comments-div");if(replyComment||commentElement){currentTargetElement.classList.add("e-focused");var moreOptionElement=currentTargetElement.getElementsByClassName('e-pv-more-options-button');if(moreOptionElement&&moreOptionElement[0]){moreOptionElement[0].style.visibility='visible';}focusApplied=true;this.previouslyFocusedElement=currentTargetElement;}else{if(currentTargetElement.parentElement){currentTargetElement=currentTargetElement.parentElement;}else{focusApplied=true;}}}for(var i=0;i<commentPanelContainer.length;i++){if(commentPanelContainer[i].id!==event.currentTarget.id){if(commentPanelContainer[i].lastElementChild.classList.contains('e-pv-comments-leave')){if(commentPanelContainer[i].getElementsByClassName('e-editable-inline')[0]){commentPanelContainer[i].getElementsByClassName('e-editable-inline')[0].style.display='none';}}}else{if(commentPanelContainer[i].getElementsByClassName('e-editable-inline')[0]){commentPanelContainer[i].getElementsByClassName('e-editable-inline')[0].style.display='block';}if(event.target.getElementsByClassName('e-pv-more-options-button')[0]){event.target.getElementsByClassName('e-pv-more-options-button')[0].style.visibility='visible';}var moreOptionIcon=event.target.classList.contains('e-pv-more-options-button');if(!moreOptionIcon){moreOptionIcon=event.target.parentElement.classList.contains('e-pv-more-options-button');if(moreOptionIcon){event.target.parentElement.style.visibility='visible';}}else{event.target.style.visibility='visible';}this.pdfViewer._dotnetInstance.invokeMethodAsync('GetCommentId',event.currentTarget.id);}}// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}event.currentTarget.classList.add('e-pv-comments-border');this.pdfViewer.annotationModule.selectAnnotation(event.currentTarget.id,event.isTrusted);event.preventDefault();}};/**
     * @private
     */ // eslint-disable-next-line
StickyNotesAnnotation.prototype.addBorderForCommentsContainer=function(event){// eslint-disable-next-line
var commentPanelContainer=document.querySelectorAll(".e-pv-comments-container");for(var i=0;i<commentPanelContainer.length;i++){if(commentPanelContainer[i].id!==event.currentTarget.id){commentPanelContainer[i].lastElementChild.style.display='none';}else{commentPanelContainer[i].lastElementChild.style.display='block';}}// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}event.currentTarget.classList.add('e-pv-comments-border');};StickyNotesAnnotation.prototype.UpdateReplyContainerOnEdit=function(){// eslint-disable-next-line
var editableElement=document.querySelectorAll('.e-editable-inline');for(var j=0;j<editableElement.length;j++){editableElement[j].style.display='none';}};StickyNotesAnnotation.prototype.RemoveLastReply=function(id){// eslint-disable-next-line
var commentPanelContainer=document.querySelectorAll(".e-pv-comments-container");for(var i=0;i<commentPanelContainer.length;i++){if(id===commentPanelContainer[i].children[0].children[1].children[0].id){commentPanelContainer[i].lastElementChild.style.display='none';}}// eslint-disable-next-line
var commentsContainer=document.querySelectorAll('.e-pv-comments-border');if(commentsContainer){for(var j=0;j<commentsContainer.length;j++){commentsContainer[j].classList.remove('e-pv-comments-border');}}// eslint-disable-next-line
var x=document.querySelectorAll('#'+this.pdfViewer.dataId+'_more-options');for(var i=0;i<x.length;i++){x[i].style.visibility='hidden';}};// eslint-disable-next-line
StickyNotesAnnotation.prototype.UpdateCommentsCollectionInBlazor=function(args){// eslint-disable-next-line
var annotationCollection;var pageIndex=args.pageNumber;this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");var type=args.shapeAnnotationType;// eslint-disable-next-line
var currentAnnotation;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){currentAnnotation=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;}else{currentAnnotation=this.pdfViewer.selectedItems.annotations[0];}// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_'+type);if(this.pdfViewerBase.isStorageExceed){storeObject=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+'_annotations_'+type];}if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex-1);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}}if(currentAnnotation){for(var i=0;i<annotationCollection.length;i++){if(annotationCollection[i].annotName===args.annotName){annotationCollection[i].note=args.note;annotationCollection[i].annotName=args.annotName;annotationCollection[i].modifiedDate=this.getDateAndTime(args.modifiedDate);if(annotationCollection[i].modifiedDate==null){annotationCollection[i].modifiedDate=this.getDateAndTime();}var commentShow=document.querySelectorAll('.e-pv-new-comments-div');for(var i_2=0;i_2<commentShow.length;i_2++){commentShow[i_2].style.display=null;}for(var j=1;j<args.replyCollection.length;j++){// eslint-disable-next-line
var comment=args.replyCollection[j];comment.modifiedDate=this.getDateAndTime(args.replyCollection[j].modifiedDate);if(comment.modifiedDate==null){comment.modifiedDate=this.getDateAndTime();}// eslint-disable-next-line:max-line-length
var state=comment.stateModel;var newArray=void 0;if(state){newArray={annotName:comment.annotName,parentId:comment.parentElement,subject:'Comments',comments:[],author:comment.author,note:comment.note,shapeAnnotationType:'',state:state,stateModel:'Review',modifiedDate:comment.modifiedDate,review:{state:state,stateModel:'Review',modifiedDate:this.getDateAndTime(),author:comment.author},isLock:false};}else{newArray={annotName:comment.annotName,parentId:comment.parentElement,subject:'Comments',comments:[],author:comment.author,note:comment.note,shapeAnnotationType:'',state:'',stateModel:'',modifiedDate:comment.modifiedDate,review:{state:'',stateModel:'',modifiedDate:this.getDateAndTime(),author:comment.author},isLock:false};}if(args.replyCollection[j].note||args.replyCollection[j].note!==''){annotationCollection[i].comments[j-1]=newArray;currentAnnotation.comments[j-1]=newArray;}}var previousValue=currentAnnotation.note;currentAnnotation.annotName=annotationCollection[i].annotName;currentAnnotation.note=annotationCollection[i].note;currentAnnotation.modifiedDate=this.getDateAndTime(annotationCollection[i].modifiedDate);if(currentAnnotation.shapeAnnotationType==='FreeText'){this.modifyTextProperty(currentAnnotation.note,previousValue,currentAnnotation.annotName);}}// if (annotationCollection[i].dynamicText && annotationCollection[i].note) {
//     if (annotationCollection[i].dynamicText !== annotationCollection[i].note) {
//         annotationCollection[i].dynamicText = annotationCollection[i].note
//     }
// }
this.updateUndoRedoCollections(annotationCollection[i],pageIndex-1);}}};/**
     * @private
    */StickyNotesAnnotation.prototype.getAuthorName=function(annotation,commonDiv){var author;if(annotation){var type=annotation.shapeAnnotationType;var annotationType=this.getAnnotationType(type);author=this.pdfViewer.annotationModule.updateAnnotationAuthor(annotationType,type);}else{author=commonDiv.getAttribute('author');}return author;};return StickyNotesAnnotation;}();var InkAnnotation=/** @class */function(){function InkAnnotation(pdfViewer,pdfViewerBase){// eslint-disable-next-line
this.newObject=[];/**
         * @private
         */this.outputString='';/**
         * @private
         */ // eslint-disable-next-line
this.inkAnnotationindex=[];/**
         * @private
         */this.isAddAnnotationProgramatically=false;/**
         * @private
         */this.currentPageNumber='';this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     */InkAnnotation.prototype.drawInk=function(){this.pdfViewerBase.disableTextSelectionMode();this.pdfViewer.tool='Ink';};InkAnnotation.prototype.drawInkAnnotation=function(pageNumber){if(this.pdfViewerBase.isToolbarInkClicked){this.pdfViewerBase.isInkAdded=true;var pageIndex=!isNaN(pageNumber)?pageNumber:this.pdfViewerBase.currentPageNumber-1;if(this.outputString&&this.outputString!==''){var currentAnnot=this.addInk(pageIndex);this.pdfViewer.renderDrawing(undefined,pageIndex);this.pdfViewer.clearSelection(pageIndex);this.pdfViewer.select([currentAnnot.id],currentAnnot.annotationSelectorSettings);if(this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(true);}}else{this.outputString='';this.newObject=[];this.pdfViewerBase.isToolbarInkClicked=false;this.pdfViewer.tool='';}this.pdfViewerBase.isInkAdded=false;}};/**
     * @private
     */InkAnnotation.prototype.storePathData=function(){this.convertToPath(this.newObject);this.newObject=[];};/**
     * @param position
     * @param pageIndex
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.drawInkInCanvas=function(position,pageIndex){// eslint-disable-next-line
if(this.currentPageNumber!==''&&parseInt(this.currentPageNumber)!==pageIndex){// eslint-disable-next-line
this.drawInkAnnotation(parseInt(this.currentPageNumber));this.pdfViewerBase.isToolbarInkClicked=true;this.pdfViewer.tool='Ink';}var zoom=this.pdfViewerBase.getZoomFactor();var ratio=this.pdfViewerBase.getWindowDevicePixelRatio();// eslint-disable-next-line
var canvas=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+pageIndex);// eslint-disable-next-line
var context=canvas.getContext('2d');var thickness=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1;// eslint-disable-next-line max-len
var opacity=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1;// eslint-disable-next-line max-len
var strokeColor=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:'#ff0000';if(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&zoom<=0.7){context.setTransform(ratio,0,0,ratio,0,0);}context.beginPath();context.lineJoin='round';context.lineCap='round';context.moveTo(position.prevPosition.x,position.prevPosition.y);context.lineTo(position.currentPosition.x,position.currentPosition.y);context.lineWidth=thickness*zoom>1?thickness*zoom:thickness;context.strokeStyle=strokeColor;context.globalAlpha=opacity;context.stroke();// context.lineWidth = 2;
context.arc(position.prevPosition.x,position.prevPosition.y,2/2,0,Math.PI*2,true);context.closePath();this.pdfViewerBase.prevPosition=position.currentPosition;this.newObject.push(position.currentPosition.x,position.currentPosition.y);this.currentPageNumber=pageIndex.toString();};// eslint-disable-next-line
InkAnnotation.prototype.convertToPath=function(newObject){this.movePath(newObject[0],newObject[1]);this.linePath(newObject[0],newObject[1]);for(var n=2;n<newObject.length;n=n+2){this.linePath(newObject[n],newObject[n+1]);}};InkAnnotation.prototype.linePath=function(x,y){this.outputString+='L'+x+','+y+' ';};InkAnnotation.prototype.movePath=function(x,y){this.outputString+='M'+x+','+y+' ';};/**
     * @param pageNumber
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.addInk=function(pageNumber){// eslint-disable-next-line
var currentBounds=this.calculateInkSize();var zoomvalue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
var annot;if(this.pdfViewerBase.isToolbarInkClicked){var annotationName=this.pdfViewer.annotation.createGUID();var modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var pageIndex=!isNaN(pageNumber)?pageNumber:this.pdfViewerBase.currentPageNumber-1;var thickness=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1;// eslint-disable-next-line max-len
var opacity=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1;// eslint-disable-next-line max-len
var strokeColor=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:'#ff0000';// eslint-disable-next-line
var isLock=this.pdfViewer.inkAnnotationSettings.isLock?this.pdfViewer.inkAnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock;var author=this.pdfViewer.annotationSettings.author!=='Guest'?this.pdfViewer.annotationSettings.author:this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:'Guest';var customData=this.pdfViewer.inkAnnotationSettings.customData;var isPrint=this.pdfViewer.inkAnnotationSettings.isPrint;// eslint-disable-next-line
var allowedInteractions=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;// eslint-disable-next-line
var annotationSettings=this.pdfViewer.annotationSettings?this.pdfViewer.annotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(this.pdfViewer.inkAnnotationSettings);annot={// eslint-disable-next-line max-len
id:'ink'+this.pdfViewerBase.inkCount,bounds:{x:currentBounds.x,y:currentBounds.y,width:currentBounds.width,height:currentBounds.height},pageIndex:pageIndex,data:this.outputString,customData:customData,shapeAnnotationType:'Ink',type:'Ink',opacity:opacity,strokeColor:strokeColor,thickness:thickness,annotName:annotationName,comments:[],author:author,subject:'Ink',notes:'',review:{state:'',stateModel:'',modifiedDate:modifiedDate,author:author},annotationSelectorSettings:this.getSelector('Ink',''),modifiedDate:modifiedDate,annotationSettings:annotationSettings,isPrint:isPrint,allowedInteractions:allowedInteractions,isCommentLock:false,isLocked:isLock};var annotation=this.pdfViewer.add(annot);// eslint-disable-next-line
var bounds={x:annot.bounds.x,y:annot.bounds.y,left:annot.bounds.x,top:annot.bounds.y,width:annot.bounds.width,height:annot.bounds.height};// eslint-disable-next-line
var settings={opacity:annot.opacity,strokeColor:annot.strokeColor,thickness:annot.thickness,modifiedDate:annot.modifiedDate,width:annot.bounds.width,height:annot.bounds.height,data:this.outputString};this.pdfViewerBase.inkCount++;// eslint-disable-next-line max-len
this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments('ink',annot.pageIndex+1,annot.shapeAnnotationType,annotationName,'',author);annot.annotName=annotationName;// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(pageIndex,null,annotation,'Addition','',annotation,annotation);this.pdfViewer.annotationModule.storeAnnotations(pageIndex,annot,'_annotations_ink');this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'Ink',bounds,settings);if(this.pdfViewerBase.isInkAdded){this.outputString='';this.newObject=[];}this.pdfViewerBase.isToolbarInkClicked=false;this.pdfViewer.tool='';}return annot;};/**
     * @private
     */InkAnnotation.prototype.setAnnotationMode=function(){if(this.pdfViewerBase.isToolbarInkClicked){this.drawInkAnnotation();}else{this.pdfViewerBase.isToolbarInkClicked=true;this.drawInk();}};InkAnnotation.prototype.saveInkSignature=function(){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');// eslint-disable-next-line
var annotations=new Array();for(var j=0;j<this.pdfViewerBase.pageCount;j++){annotations[j]=[];}if(storeObject){var annotationCollection=JSON.parse(storeObject);for(var i=0;i<annotationCollection.length;i++){// eslint-disable-next-line
var newArray=[];var pageAnnotationObject=annotationCollection[i];if(pageAnnotationObject){for(var z=0;pageAnnotationObject.annotations.length>z;z++){this.pdfViewer.annotationModule.updateModifiedDate(pageAnnotationObject.annotations[z]);// eslint-disable-next-line max-len
var strokeColorString=pageAnnotationObject.annotations[z].strokeColor;pageAnnotationObject.annotations[z].strokeColor=JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(strokeColorString));pageAnnotationObject.annotations[z].bounds=JSON.stringify(this.pdfViewer.annotation.getInkBounds(pageAnnotationObject.annotations[z].bounds,pageAnnotationObject.pageIndex));// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(pageAnnotationObject.annotations[z].data);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);pageAnnotationObject.annotations[z].data=JSON.stringify(csData);}newArray=pageAnnotationObject.annotations;}annotations[pageAnnotationObject.pageIndex]=newArray;}}return JSON.stringify(annotations);};/**
     * @param pageNumber
     * @param annotationBase
     * @param pageNumber
     * @param annotationBase
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.addInCollection=function(pageNumber,annotationBase){if(annotationBase){// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations){pageAnnotations.push(annotationBase);}this.manageInkAnnotations(pageAnnotations,pageNumber);}};// eslint-disable-next-line
InkAnnotation.prototype.calculateInkSize=function(){var minimumX=-1;var minimumY=-1;var maximumX=-1;var maximumY=-1;// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(this.outputString);var zoomvalue=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
for(var k=0;k<collectionData.length;k++){// eslint-disable-next-line
var val=collectionData[k];if(minimumX===-1){// eslint-disable-next-line
minimumX=val['x'];// eslint-disable-next-line
maximumX=val['x'];// eslint-disable-next-line
minimumY=val['y'];// eslint-disable-next-line
maximumY=val['y'];}else{// eslint-disable-next-line
var point1=val['x'];// eslint-disable-next-line
var point2=val['y'];if(minimumX>=point1){minimumX=point1;}if(minimumY>=point2){minimumY=point2;}if(maximumX<=point1){maximumX=point1;}if(maximumY<=point2){maximumY=point2;}}}var newdifferenceX=maximumX-minimumX;var newdifferenceY=maximumY-minimumY;// eslint-disable-next-line max-len
return{x:minimumX/zoomvalue,y:minimumY/zoomvalue,width:newdifferenceX/zoomvalue,height:newdifferenceY/zoomvalue};};/**
     * @param annotationCollection
     * @param pageIndex
     * @param isImport
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.renderExistingInkSignature=function(annotationCollection,pageIndex,isImport){var annot;var isinkAnnotationAdded=false;if(!isImport){for(var p=0;p<this.inkAnnotationindex.length;p++){if(this.inkAnnotationindex[p]===pageIndex){isinkAnnotationAdded=true;break;}}}if(annotationCollection&&!isinkAnnotationAdded){if(annotationCollection.length>0&&this.inkAnnotationindex.indexOf(pageIndex)===-1){this.inkAnnotationindex.push(pageIndex);}for(var n=0;n<annotationCollection.length;n++){// eslint-disable-next-line
var currentAnnotation=annotationCollection[n];if(currentAnnotation){// eslint-disable-next-line
var data=currentAnnotation.PathData;if(isImport&&data){if(_typeof(data)==='object'&&data.length>1){data=sf.drawings.getPathString(data);}else{if(currentAnnotation.IsPathData||data.split('command').length<=1){data=data;}else{data=sf.drawings.getPathString(JSON.parse(data));}}}this.outputString=data;// eslint-disable-next-line
var calculateInkPosition=this.calculateInkSize();this.outputString='';var rectDiff=0;var rectDifference=1;// eslint-disable-next-line
var bounds=currentAnnotation.Bounds;if(calculateInkPosition){if(calculateInkPosition.height<1){rectDiff=bounds.Height?bounds.Height:bounds.height;rectDifference=bounds.Height?bounds.Height:bounds.height;}else if(calculateInkPosition.width<1){rectDiff=bounds.Width?bounds.Width:bounds.width;rectDifference=bounds.Width?bounds.Width:bounds.width;}}var currentLeft=!sf.base.isNullOrUndefined(bounds.X)?bounds.X+rectDiff/2:bounds.x+rectDiff/2;var currentTop=!sf.base.isNullOrUndefined(bounds.Y)?bounds.Y+rectDiff/2:bounds.y+rectDiff/2;var currentWidth=bounds.Width?bounds.Width-(rectDifference-1):bounds.width-(rectDifference-1);var currentHeight=bounds.Height?bounds.Height-(rectDifference-1):bounds.height-(rectDifference-1);var isLock=currentAnnotation.AnnotationSettings?currentAnnotation.AnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock;// eslint-disable-next-line
var selectorSettings=currentAnnotation.AnnotationSelectorSettings?currentAnnotation.AnnotationSelectorSettings:this.getSelector(currentAnnotation,'Ink');var customData=this.pdfViewer.annotation.getCustomData(currentAnnotation);var isPrint=true;if(currentAnnotation.AnnotationSettings){isPrint=currentAnnotation.AnnotationSettings.isPrint;}else{isPrint=this.pdfViewer.inkAnnotationSettings.isPrint;}if(currentAnnotation.IsLocked){isLock=currentAnnotation.IsLocked;}if(currentAnnotation.Subject==='Highlight'&&currentAnnotation.Opacity===1){currentAnnotation.Opacity=currentAnnotation.Opacity/2;}// eslint-disable-next-line max-len
currentAnnotation.allowedInteractions=currentAnnotation.AllowedInteractions?currentAnnotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);annot={// eslint-disable-next-line max-len
id:'ink'+this.pdfViewerBase.inkCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,shapeAnnotationType:'Ink',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,annotName:currentAnnotation.AnnotName,// eslint-disable-next-line max-len
comments:this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments,currentAnnotation,currentAnnotation.Author),author:currentAnnotation.Author,allowedInteractions:currentAnnotation.allowedInteractions,subject:currentAnnotation.Subject,modifiedDate:currentAnnotation.ModifiedDate,// eslint-disable-next-line max-len
review:{state:'',stateModel:'',modifiedDate:currentAnnotation.ModifiedDate,author:currentAnnotation.Author},notes:currentAnnotation.Note,annotationSettings:{isLock:isLock},annotationSelectorSettings:selectorSettings,customData:customData,isPrint:isPrint,isCommentLock:currentAnnotation.IsCommentLock};this.pdfViewer.add(annot);// eslint-disable-next-line
var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+currentAnnotation.pageIndex);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,annot.pageIndex);this.pdfViewer.annotationModule.storeAnnotations(annot.pageIndex,annot,'_annotations_ink');if(this.isAddAnnotationProgramatically){var settings={opacity:annot.opacity,strokeColor:annot.strokeColor,thickness:annot.thickness,modifiedDate:annot.modifiedDate,width:annot.bounds.width,height:annot.bounds.height,data:this.outputString};this.pdfViewer.fireAnnotationAdd(annot.pageIndex,annot.annotName,'Ink',bounds,settings);}this.pdfViewerBase.currentSignatureAnnot=null;this.pdfViewerBase.signatureCount++;this.pdfViewerBase.inkCount++;// eslint-disable-next-line max-len
if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable){// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export Annotations')],true);// eslint-disable-next-line max-len
this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant('Export XFDF')],true);}}}}};/**
     * @param pageNumber
     * @param annotations
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.storeInkSignatureData=function(pageNumber,annotations){// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(annotations.pageIndex,null,annotations,'Addition','',annotations,annotations);// eslint-disable-next-line
var annotation=null;var left=annotations.bounds.left?annotations.bounds.left:annotations.bounds.x;var top=annotations.bounds.top?annotations.bounds.top:annotations.bounds.y;if(annotations.wrapper&&annotations.wrapper.bounds){left=annotations.wrapper.bounds.left;top=annotations.wrapper.bounds.top;}annotation={// eslint-disable-next-line max-len
id:annotations.id,bounds:{x:left,y:top,width:annotations.bounds.width,height:annotations.bounds.height},// eslint-disable-next-line max-len
shapeAnnotationType:'Ink',opacity:annotations.opacity,thickness:annotations.thickness,strokeColor:annotations.strokeColor,pageIndex:annotations.pageIndex,data:annotations.data,annotName:annotations.annotName,// eslint-disable-next-line max-len
comments:annotations.comments,author:annotations.author,subject:annotations.subject,modifiedDate:annotations.modifiedDate,// eslint-disable-next-line max-len
review:{state:'',stateModel:'',modifiedDate:annotations.modifiedDate,author:annotations.author},notes:annotations.notes,annotationSelectorSettings:this.getSelector(annotations,'Ink'),isCommentLock:annotations.isCommentLock};// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');var index=0;if(!storeObject){var shapeAnnotation={pageIndex:pageNumber,annotations:[]};shapeAnnotation.annotations.push(annotation);index=shapeAnnotation.annotations.indexOf(annotation);var annotationCollection=[];annotationCollection.push(shapeAnnotation);var annotationStringified=JSON.stringify(annotationCollection);window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_ink',annotationStringified);}else{var annotObject=JSON.parse(storeObject);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_ink');var pageIndex=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[pageIndex]){annotObject[pageIndex].annotations.push(annotation);index=annotObject[pageIndex].annotations.indexOf(annotation);}else{var markupAnnotation={pageIndex:pageNumber,annotations:[]};markupAnnotation.annotations.push(annotation);index=markupAnnotation.annotations.indexOf(annotation);annotObject.push(markupAnnotation);}var annotationStringified=JSON.stringify(annotObject);window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_ink',annotationStringified);}};InkAnnotation.prototype.getSelector=function(type,subject){var selector=this.pdfViewer.annotationSelectorSettings;if(type==='Ink'&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){selector=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings;}return selector;};// eslint-disable-next-line
InkAnnotation.prototype.getAnnotations=function(pageIndex,shapeAnnotations){// eslint-disable-next-line
var annotationCollection;// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');if(storeObject){var annotObject=JSON.parse(storeObject);var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageIndex);if(annotObject[index]){annotationCollection=annotObject[index].annotations;}else{annotationCollection=shapeAnnotations;}}else{annotationCollection=shapeAnnotations;}return annotationCollection;};/**
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @param property
     * @param pageNumber
     * @param annotationBase
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.modifySignatureInkCollection=function(property,pageNumber,annotationBase){this.pdfViewerBase.updateDocumentEditedProperty(true);// eslint-disable-next-line
var currentAnnotObject=null;// eslint-disable-next-line
var pageAnnotations=this.getAnnotations(pageNumber,null);if(pageAnnotations!=null&&annotationBase){for(var i=0;i<pageAnnotations.length;i++){if(annotationBase.id===pageAnnotations[i].id){if(property==='bounds'){// eslint-disable-next-line max-len
pageAnnotations[i].bounds={x:annotationBase.wrapper.bounds.left,y:annotationBase.wrapper.bounds.top,width:annotationBase.bounds.width,height:annotationBase.bounds.height};}else if(property==='stroke'){pageAnnotations[i].strokeColor=annotationBase.wrapper.children[0].style.strokeColor;}else if(property==='opacity'){pageAnnotations[i].opacity=annotationBase.wrapper.children[0].style.opacity;}else if(property==='thickness'){pageAnnotations[i].thickness=annotationBase.wrapper.children[0].style.strokeWidth;}else if(property==='notes'){pageAnnotations[i].notes=annotationBase.notes;}else if(property==='delete'){currentAnnotObject=pageAnnotations.splice(i,1)[0];break;}pageAnnotations[i].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.annotationModule.storeAnnotationCollections(pageAnnotations[i],pageNumber);}}this.manageInkAnnotations(pageAnnotations,pageNumber);}return currentAnnotObject;};// eslint-disable-next-line
InkAnnotation.prototype.manageInkAnnotations=function(pageAnnotations,pageNumber){// eslint-disable-next-line
var storeObject=window.sessionStorage.getItem(this.pdfViewerBase.documentId+'_annotations_ink');if(storeObject){var annotObject=JSON.parse(storeObject);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_annotations_ink');var index=this.pdfViewer.annotationModule.getPageCollection(annotObject,pageNumber);if(annotObject[index]){annotObject[index].annotations=pageAnnotations;}var annotationStringified=JSON.stringify(annotObject);window.sessionStorage.setItem(this.pdfViewerBase.documentId+'_annotations_ink',annotationStringified);}};// To save the imported annotations while downloading or exporting for the page above 10 without a scroll (EJ2-63924)
InkAnnotation.prototype.saveImportedInkAnnotation=function(annotation,pageNumber){var annotationObject=null;var currentBounds=annotation.Bounds;var bounds={x:currentBounds.X,y:currentBounds.Y,width:currentBounds.Width,height:currentBounds.Height};var allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(annotation);var customData=this.pdfViewer.annotation.getCustomData(annotation);var comments=this.pdfViewer.annotationModule.getAnnotationComments(annotation.Comments,annotation,annotation.Author);var review={state:annotation.State,stateModel:annotation.StateModel,modifiedDate:annotation.ModifiedDate,author:annotation.Author};var annotationSettings=annotation.AnnotationSettings?annotation.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(annotation);var annotationSelectorSettings=this.getSettings(annotation);var data=annotation.PathData;if(_typeof(data)==='object'&&data.length>1){data=sf.drawings.getPathString(data);}else{if(annotation.IsPathData||data.split('command').length<=1){data=data;}else{data=sf.drawings.getPathString(JSON.parse(data));}}annotationObject={allowedInteractions:allowedInteractions,annotName:annotation.AnnotName,annotationSelectorSettings:annotationSelectorSettings,annotationSettings:annotationSettings,author:annotation.Author,bounds:bounds,customData:customData,comments:comments,data:data,id:"Ink",isCommentLock:annotation.IsCommentLock,isLocked:annotation.IsLocked,isPrint:annotation.IsPrint,modifiedDate:annotation.ModifiedDate,note:annotation.Note,opacity:annotation.Opacity,pageIndex:pageNumber,review:review,shapeAnnotationType:annotation.AnnotationType,strokeColor:annotation.StrokeColor,subject:annotation.Subject,thickness:annotation.Thickness};this.pdfViewer.annotationModule.storeAnnotations(pageNumber,annotationObject,'_annotations_ink');};// To get the annotation selector settings 
InkAnnotation.prototype.getSettings=function(annotation){var selector=this.pdfViewer.annotationSelectorSettings;if(annotation.AnnotationSelectorSettings){selector=annotation.AnnotationSelectorSettings;}else{selector=this.getSelector(annotation.ShapeAnnotationType,annotation.Subject);}return selector;};/**
     * @param currentAnnotation
     * @param pageIndex
     * @param isImport
     * @param currentAnnotation
     * @param pageIndex
     * @param isImport
     * @private
     */ // eslint-disable-next-line
InkAnnotation.prototype.updateInkCollections=function(currentAnnotation,pageIndex,isImport){// eslint-disable-next-line
var annot;// eslint-disable-next-line
if(currentAnnotation){// eslint-disable-next-line
var bounds=currentAnnotation.Bounds;var currentLeft=bounds.X;var currentTop=bounds.Y;var currentWidth=bounds.Width;var currentHeight=bounds.Height;var customData=currentAnnotation.customData;var isPrint=currentAnnotation.isPrint;// eslint-disable-next-line
var allowedInteractions=currentAnnotation.AllowedInteractions?currentAnnotation.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(currentAnnotation);// eslint-disable-next-line
var annotationSettings=currentAnnotation.AnnotationSettings?currentAnnotation.AnnotationSettings:this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;if(currentAnnotation.IsLocked){annotationSettings.isLock=currentAnnotation.IsLocked;}// eslint-disable-next-line
var data=currentAnnotation.PathData;if(isImport){data=sf.drawings.getPathString(JSON.parse(currentAnnotation.PathData));}annot={// eslint-disable-next-line max-len
id:'ink'+this.pdfViewerBase.signatureCount,bounds:{x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight},pageIndex:pageIndex,data:data,// eslint-disable-next-line max-len
shapeAnnotationType:'Ink',opacity:currentAnnotation.Opacity,strokeColor:currentAnnotation.StrokeColor,thickness:currentAnnotation.Thickness,annotationId:currentAnnotation.AnnotName,// eslint-disable-next-line max-len
customData:customData,comments:this.pdfViewer.annotationModule.getAnnotationComments(currentAnnotation.Comments,currentAnnotation,currentAnnotation.Author),author:currentAnnotation.Author,allowedInteractions:allowedInteractions,subject:currentAnnotation.Subject,modifiedDate:currentAnnotation.ModifiedDate,review:{state:'',stateModel:'',modifiedDate:currentAnnotation.ModifiedDate,author:currentAnnotation.Author},notes:currentAnnotation.Note,isPrint:isPrint,isCommentLock:currentAnnotation.IsCommentLock,annotationSettings:annotationSettings,isLocked:annotationSettings.isLock};return annot;}};/**
     * This method used to add annotations with using program.
     *
     * @param annotationObject - It describes type of annotation object
     * @param offset - It describes about the annotation bounds or location
     * @param pageNumber - It describes about the annotation page number
     * @returns Object
     * @private
     */InkAnnotation.prototype.updateAddAnnotationDetails=function(annotationObject,offset,pageNumber){//Creating new object if annotationObject is null
if(!annotationObject){annotationObject={offset:{x:10,y:10},pageNumber:0,width:undefined,height:undefined};offset=annotationObject.offset;}else if(!annotationObject.offset)offset={x:10,y:10};else offset=annotationObject.offset;//Creating the CurrentDate and Annotation name
var currentDateString=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();var annotationName=this.pdfViewer.annotation.createGUID();//Creating annotation settings
var annotationSelectorSettings=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings?this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var annotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings);var allowedInteractions=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;annotationSettings.isLock=annotationObject.isLock?annotationObject.isLock:false;annotationObject.width=annotationObject.width?annotationObject.width:150;annotationObject.height=annotationObject.height?annotationObject.height:60;var pathData=annotationObject.path?annotationObject.path:'';annotationObject.path=sf.drawings.getPathString(JSON.parse(pathData));//Creating Annotation objects with it's proper properties
var signatureInkAnnotation=[];var ink={AllowedInteractions:annotationObject.allowedInteractions?annotationObject.allowedInteractions:allowedInteractions,AnnotName:annotationName,AnnotType:'ink',AnnotationFlags:null,AnnotationSelectorSettings:annotationObject.annotationSelectorSettings?annotationObject.annotationSelectorSettings:annotationSelectorSettings,AnnotationSettings:annotationSettings,AnnotationType:'Ink',Author:annotationObject.author?annotationObject.author:'Guest',Bounds:{X:offset.x,Y:offset.y,Width:annotationObject.width,Height:annotationObject.height,Left:offset.x,Top:offset.y,Location:{X:offset.x,Y:offset.y},Size:{Height:annotationObject.height,IsEmpty:false,Width:annotationObject.width}},Comments:null,CreatedDate:currentDateString,CustomData:annotationObject.customData?annotationObject.customData:null,ExistingCustomData:null,IsCommentLock:false,IsLock:annotationObject.isLock?annotationObject.isLock:false,IsPrint:annotationObject.isPrint?annotationObject.isPrint:true,ModifiedDate:currentDateString,Note:'',Opacity:annotationObject.opacity?annotationObject.opacity:1,PathData:annotationObject.path,PageNumber:pageNumber,State:'',StateModel:'',StrokeColor:annotationObject.strokeColor?annotationObject.strokeColor:'rgba(255,0,0,1)',SubType:null,Subject:'Ink',Type:null,Thickness:annotationObject.thickness?annotationObject.thickness:1};//Adding the annotation object to an array and return it
signatureInkAnnotation[0]=ink;return{signatureInkAnnotation:signatureInkAnnotation};};return InkAnnotation;}();/**
 * export types
 */ /* eslint-disable */ /**
 * Magnification module
 */var Magnification=/** @class */function(){/**
     * @param pdfViewer
     * @param viewerBase
     * @private
     */function Magnification(pdfViewer,viewerBase){/**
         * @private
         */this.zoomFactor=1;/**
         * @private
         */this.previousZoomFactor=1;this.scrollWidth=25;this.zoomPercentages=[10,25,50,75,100,125,150,200,400];this.isNotPredefinedZoom=false;this.pinchStep=0;this.reRenderPageNumber=0;// eslint-disable-next-line
this.magnifyPageRerenderTimer=null;// eslint-disable-next-line
this.rerenderOnScrollTimer=null;// eslint-disable-next-line
this.rerenderInterval=null;this.touchCenterX=0;this.touchCenterY=0;this.mouseCenterX=0;this.mouseCenterY=0;this.pageRerenderCount=0;this.imageObjects=[];this.topValue=0;this.isTapToFitZoom=false;/**
         * @private
         */this.fitType=null;/**
         * @private
         */this.isPinchZoomed=false;/**
         * @private
         */this.isPagePinchZoomed=false;/**
         * @private
         */this.isRerenderCanvasCreated=false;/**
         * @private
         */this.isMagnified=false;/**
         * @private
         */this.isPagesZoomed=false;/**
         * @private
         */this.isPinchScrolled=false;/**
         * @private
         */this.isAutoZoom=false;/**
         * @private
         */this.isDoubleTapZoom=false;/**
         * @private
         */this.isFormFieldPageZoomed=false;this.isWebkitMobile=false;this.isFitToPageMode=true;this.pdfViewer=pdfViewer;this.pdfViewerBase=viewerBase;this.zoomLevel=2;// eslint-disable-next-line max-len
this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||navigator.userAgent.indexOf('Safari')!==-1;}/**
     * Zoom the PDF document to the given zoom value
     *
     * @param  {number} zoomValue - Specifies the Zoom Value for magnify the PDF document
     * @returns void
     */Magnification.prototype.zoomTo=function(zoomValue){var MaximumZoomPercentage=400;var MinmumZoomPercentage=10;if(zoomValue<MinmumZoomPercentage){zoomValue=MinmumZoomPercentage;}else if(zoomValue>MaximumZoomPercentage){zoomValue=MaximumZoomPercentage;}this.fitType=null;this.isNotPredefinedZoom=false;if(this.isAutoZoom&&this.isInitialLoading){this.pdfViewerBase.onWindowResize();}else{this.isAutoZoom=false;this.onZoomChanged(zoomValue);}this.isInitialLoading=false;};/**
     * Magnifies the page to the next value in the zoom drop down list.
     *
     * @returns void
     */Magnification.prototype.zoomIn=function(){if(this.fitType||this.isNotPredefinedZoom){this.zoomLevel=this.lowerZoomLevel;this.fitType=null;}this.isNotPredefinedZoom=false;if(this.zoomLevel>=8){this.zoomLevel=8;}else{this.zoomLevel++;}this.isAutoZoom=false;this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);};/**
     * Magnifies the page to the previous value in the zoom drop down list.
     *
     * @returns void
     */Magnification.prototype.zoomOut=function(){if(this.fitType||this.isNotPredefinedZoom){this.zoomLevel=this.higherZoomLevel;this.fitType=null;}this.isNotPredefinedZoom=false;if(this.zoomLevel<=0){this.zoomLevel=0;}else{this.zoomLevel--;}this.isAutoZoom=false;this.onZoomChanged(this.zoomPercentages[this.zoomLevel]);};/**
     * Scales the page to fit the page width to the width of the container in the control.
     *
     * @returns void
     */Magnification.prototype.fitToWidth=function(){this.isAutoZoom=false;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.isWebkitMobile){this.pdfViewerBase.viewerContainer.style.overflowY='auto';}else{this.pdfViewerBase.viewerContainer.style.overflowY='hidden';}}else{this.pdfViewerBase.viewerContainer.style.overflowX="hidden";this.pdfViewerBase.viewerContainer.style.overflowY='auto';}var zoomValue=this.calculateFitZoomFactor('fitToWidth');this.onZoomChanged(zoomValue);};/**
     * @private
     */Magnification.prototype.fitToAuto=function(){this.isAutoZoom=true;var zoomValue=this.calculateFitZoomFactor('fitToWidth');this.onZoomChanged(zoomValue);};/**
     * Scales the page to fit the page in the container in the control.
     *
     * @param  {number} zoomValue - Defines the Zoom Value for fit the page in the Container
     * @returns void
     */Magnification.prototype.fitToPage=function(){var zoomValue=this.calculateFitZoomFactor('fitToPage');if(zoomValue!==null){this.isAutoZoom=false;this.onZoomChanged(zoomValue);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.isWebkitMobile){this.pdfViewerBase.viewerContainer.style.overflowY='auto';}else{this.pdfViewerBase.viewerContainer.style.overflowY='hidden';}}else{this.pdfViewerBase.viewerContainer.style.overflowX="hidden";this.pdfViewerBase.viewerContainer.style.overflowY='auto';}if(this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1]){// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor;}}};Magnification.prototype.fitToHeight=function(){var viewerWidth=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;var pageWidth=this.pdfViewerBase.pageSize[0].width;var zoomValue=this.calculateFitZoomFactor("fitToHeight");if(zoomValue!==null){this.isAutoZoom=false;this.onZoomChanged(zoomValue);if(viewerWidth>pageWidth){this.pdfViewerBase.viewerContainer.style.overflowX="hidden";}else{this.pdfViewerBase.viewerContainer.style.overflowX="auto";}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.pdfViewerBase.isWebkitMobile){this.pdfViewerBase.viewerContainer.style.overflowY="auto";}else{this.pdfViewerBase.viewerContainer.style.overflowY="hidden";}}else{this.pdfViewerBase.viewerContainer.style.overflowY="auto";}if(this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1]){this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor;}}};/**
     * Returns zoom factor for the fit zooms.
     *
     * @param type
     */Magnification.prototype.calculateFitZoomFactor=function(type){var viewerWidth=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;var viewerHeight=this.pdfViewerBase.viewerContainer.getBoundingClientRect().height;if(viewerWidth===0&&viewerHeight===0){viewerWidth=parseFloat(this.pdfViewer.width.toString());viewerHeight=parseFloat(this.pdfViewer.height.toString());}if(isNaN(viewerHeight)||isNaN(viewerWidth)){return null;}this.fitType=type;this.pdfViewerBase.pageLeft=0;if(this.fitType==='fitToWidth'){var scaleX=viewerWidth/this.pdfViewerBase.highestWidth;if(this.isAutoZoom){this.pdfViewerBase.pageLeft=5;this.fitType=null;var scaleXForAuto=(viewerWidth-this.scrollWidth)/this.pdfViewerBase.highestWidth;scaleXForAuto=Math.min(1,scaleXForAuto);if(scaleXForAuto===1){this.zoomLevel=2;}return parseInt((scaleXForAuto*100).toString());}// eslint-disable-next-line radix
else{return parseInt((scaleX*100).toString());}}else if(this.fitType==="fitToHeight"){var scaleY=viewerHeight/this.pdfViewerBase.highestHeight;return parseInt((scaleY*100).toString());}else{this.isFitToPageMode=true;var scaleX=viewerWidth/this.pdfViewerBase.highestWidth;var scaleY=viewerHeight/this.pdfViewerBase.highestHeight;if(scaleY>scaleX){scaleY=scaleX;this.isFitToPageMode=false;}// eslint-disable-next-line radix
return parseInt((scaleY*100).toString());}};/**
     * Initiating cursor based zoom.
     * @private
     */Magnification.prototype.initiateMouseZoom=function(pointX,pointY,zoomValue){var pointInViewer=this.positionInViewer(pointX,pointY);this.mouseCenterX=pointInViewer.x;this.mouseCenterY=pointInViewer.y;this.zoomTo(zoomValue);};/**
     * Performs pinch in operation
     */Magnification.prototype.pinchIn=function(){this.fitType=null;var temporaryZoomFactor=this.zoomFactor-this.pinchStep;if(temporaryZoomFactor<4&&temporaryZoomFactor>2){temporaryZoomFactor=this.zoomFactor-this.pinchStep;}if(temporaryZoomFactor<=1.5){temporaryZoomFactor=this.zoomFactor-this.pinchStep/1.5;}if(temporaryZoomFactor<0.25){temporaryZoomFactor=0.25;}this.isPinchZoomed=true;this.onZoomChanged(temporaryZoomFactor*100);this.isTapToFitZoom=true;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.zoomFactor*100===50){var zoomValue=this.calculateFitZoomFactor('fitToWidth');this.fitType=null;if(zoomValue<=50){this.fitToWidth();}}};/**
     * Performs pinch out operation
     */Magnification.prototype.pinchOut=function(){this.fitType=null;var temporaryZoomFactor=this.zoomFactor+this.pinchStep;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(temporaryZoomFactor>4){temporaryZoomFactor=4;}}else{if(temporaryZoomFactor>2){temporaryZoomFactor=temporaryZoomFactor+this.pinchStep;}if(temporaryZoomFactor>4){temporaryZoomFactor=4;}}this.isTapToFitZoom=true;this.isPinchZoomed=true;this.onZoomChanged(temporaryZoomFactor*100);};/**
     * returns zoom level for the zoom factor.
     *
     * @param zoomFactor
     */Magnification.prototype.getZoomLevel=function(zoomFactor){var min=0;var max=this.zoomPercentages.length-1;while(min<=max&&!(min===0&&max===0)){var mid=Math.round((min+max)/2);if(this.zoomPercentages[mid]<=zoomFactor){min=mid+1;}else if(this.zoomPercentages[mid]>=zoomFactor){max=mid-1;}}this.higherZoomLevel=min;this.lowerZoomLevel=max;return max;};/**
     * @private
     */Magnification.prototype.checkZoomFactor=function(){return this.zoomPercentages.indexOf(this.zoomFactor*100)>-1;};/**
     * Executes when the zoom or pinch operation is performed
     *
     * @param zoomValue
     */Magnification.prototype.onZoomChanged=function(zoomValue){if(zoomValue){if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.closePopupMenu();}this.previousZoomFactor=this.zoomFactor;this.zoomLevel=this.getZoomLevel(zoomValue);this.zoomFactor=this.getZoomFactor(zoomValue);if(this.pdfViewerBase.viewerContainer){var viewerWidth=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;var scaleX=viewerWidth/this.pdfViewerBase.highestWidth;var maxZoom=scaleX*100;//add horizonatal scrollbars if the zoom value high
if(zoomValue>maxZoom){this.pdfViewerBase.viewerContainer.style.overflowX="auto";}else{this.pdfViewerBase.viewerContainer.style.overflowX="hidden";}}if(this.zoomFactor<=0.25){this.pdfViewerBase.isMinimumZoom=true;}else{this.pdfViewerBase.isMinimumZoom=false;}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.isWebkitMobile){this.pdfViewerBase.viewerContainer.style.overflowY='auto';}else{this.pdfViewerBase.viewerContainer.style.overflowY='hidden';}}else{this.pdfViewerBase.viewerContainer.style.overflowY='auto';}if(this.pdfViewerBase.pageCount>0){if(this.previousZoomFactor!==this.zoomFactor){if(!this.isPinchZoomed){this.magnifyPages();}else{if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
this.pdfViewerBase.mobilePageNoContainer.style.left=this.pdfViewer.element.clientWidth/2-parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width)/2+'px';}this.responsivePages();}}if(!this.isInitialLoading){if(this.previousZoomFactor!==this.zoomFactor){// eslint-disable-next-line
this.pdfViewer.zoomValue=parseInt((this.zoomFactor*100).toString());this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue);this.pdfViewer.fireZoomChange();}}}if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor);}if(!this.isInitialLoading){if(this.previousZoomFactor!==this.zoomFactor){this.pdfViewer.zoomValue=parseInt((this.zoomFactor*100).toString());this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue);this.pdfViewer.fireZoomChange();}}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.isPinchZoomed){// eslint-disable-next-line radix
var zoomPercentage=parseInt((this.zoomFactor*100).toString())+'%';var tooltipDiv=document.getElementById(this.pdfViewer.dataId+'_container_tooltip');var tooltipChild=tooltipDiv.firstElementChild;if(!this.pdfViewerBase.navigationPane.isTostCreated||tooltipChild){this.pdfViewerBase.navigationPane.createTooltipMobile(zoomPercentage);}}}};/**
     * @param clientX
     * @param clientY
     * @private
     */Magnification.prototype.setTouchPoints=function(clientX,clientY){var pointInViewer=this.positionInViewer(clientX,clientY);this.touchCenterX=pointInViewer.x;this.touchCenterY=pointInViewer.y;};/**
     * @param pointX1
     * @param pointY1
     * @param pointX2
     * @param pointY2
     * @param pointX1
     * @param pointY1
     * @param pointX2
     * @param pointY2
     * @param pointX1
     * @param pointY1
     * @param pointX2
     * @param pointY2
     * @param pointX1
     * @param pointY1
     * @param pointX2
     * @param pointY2
     * @private
     */Magnification.prototype.initiatePinchMove=function(pointX1,pointY1,pointX2,pointY2){this.isPinchScrolled=false;this.isMagnified=false;this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;var pointInViewer=this.positionInViewer((pointX1+pointX2)/2,(pointY1+pointY2)/2);this.touchCenterX=pointInViewer.x;this.touchCenterY=pointInViewer.y;this.zoomOverPages(pointX1,pointY1,pointX2,pointY2);};Magnification.prototype.magnifyPages=function(){this.clearRerenderTimer();if(!this.isPagesZoomed){this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;}if(!this.pdfViewerBase.documentLoaded&&!this.pdfViewerBase.isInitialPageMode){this.isPagesZoomed=true;}var scrollValue=this.pdfViewerBase.viewerContainer.scrollTop;if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(false,true);}if(!this.isInitialLoading){this.isMagnified=true;}this.updatePageLocation();this.resizeCanvas(this.reRenderPageNumber);this.calculateScrollValuesOnMouse(scrollValue);if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.resizeTouchElements();}// eslint-disable-next-line
var annotModule=this.pdfViewer.annotationModule;if(annotModule&&annotModule.textMarkupAnnotationModule){this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateCurrentResizerPosition();}if(this.pdfViewerBase.pageSize.length>0){// eslint-disable-next-line max-len
this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.getPageHeight(this.pdfViewerBase.pageSize.length-1)+'px';// eslint-disable-next-line
var proxy_1=this;this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];if(!this.pdfViewerBase.documentLoaded){this.magnifyPageRerenderTimer=setTimeout(function(){proxy_1.rerenderMagnifiedPages();},800);}}};Magnification.prototype.updatePageLocation=function(){this.topValue=0;for(var i=1;i<this.pdfViewerBase.pageSize.length;i++){this.topValue+=(this.pdfViewerBase.pageSize[i].height+this.pdfViewerBase.pageGap)*this.zoomFactor;}};Magnification.prototype.clearRerenderTimer=function(){clearTimeout(this.rerenderOnScrollTimer);clearTimeout(this.magnifyPageRerenderTimer);this.clearIntervalTimer();this.isPinchScrolled=false;};/**
     * @private
     */Magnification.prototype.clearIntervalTimer=function(){clearInterval(this.rerenderInterval);this.rerenderInterval=null;this.clearRendering();var oldCanvases=document.querySelectorAll('canvas[id*="'+this.pdfViewer.dataId+'_oldCanvas_"]');for(var i=0;i<oldCanvases.length;i++){// eslint-disable-next-line
var pageNumber=parseInt(oldCanvases[i].id.split('_oldCanvas_')[1]);var pageCanvas=this.pdfViewerBase.getElement('_pageCanvas_'+pageNumber);if(pageCanvas){oldCanvases[i].id=pageCanvas.id;pageCanvas.parentElement.removeChild(pageCanvas);}else{oldCanvases[i].id=this.pdfViewer.dataId+'_pageCanvas_'+pageNumber;}if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(i);}}this.isRerenderCanvasCreated=false;};/**
     * @param image
     * @private
     */Magnification.prototype.pushImageObjects=function(image){this.imageObjects.push(image);};Magnification.prototype.clearRendering=function(){if(this.imageObjects){for(var j=0;j<this.imageObjects.length;j++){if(this.imageObjects[j]){this.imageObjects[j].onload=null;}}this.imageObjects=[];}};Magnification.prototype.rerenderMagnifiedPages=function(){if((this.pdfViewerBase.isInitialLoaded||this.pdfViewerBase.isDocumentLoaded)&&!this.pdfViewerBase.isInitialPageMode){this.renderInSeparateThread(this.reRenderPageNumber);this.isPagesZoomed=false;}else if(this.pdfViewerBase.isInitialPageMode){this.pageRerenderCount=0;this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];this.isMagnified=false;this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);this.pdfViewerBase.isInitialPageMode=false;}};Magnification.prototype.renderInSeparateThread=function(pageNumber){var _this=this;this.designNewCanvas(pageNumber);this.pageRerenderCount=0;this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];this.isMagnified=false;this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);// eslint-disable-next-line
var proxy=this;this.rerenderInterval=setInterval(function(){_this.initiateRerender(proxy);},1);};Magnification.prototype.responsivePages=function(){this.isPagesZoomed=true;this.clearRerenderTimer();if(this.pdfViewer.textSelectionModule){this.pdfViewer.textSelectionModule.clearTextSelection();}if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.clearAllOccurrences();}var scrollValue=this.pdfViewerBase.viewerContainer.scrollTop;this.isAutoZoom=false;this.updatePageLocation();// eslint-disable-next-line max-len
this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.pageSize[this.pdfViewerBase.pageSize.length-1].height*this.zoomFactor+'px';this.resizeCanvas(this.pdfViewerBase.currentPageNumber);if(this.isPinchZoomed){this.calculateScrollValues(scrollValue);}this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];if(this.pdfViewer.formFieldsModule){var proxy_2=this;if(!this.pdfViewerBase.documentLoaded){this.magnifyPageRerenderTimer=setTimeout(function(){proxy_2.rerenderMagnifiedPages();},800);}}};Magnification.prototype.calculateScrollValues=function(scrollValue){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var currentPageCanvas=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);if(currentPageCanvas){var pointInViewer=void 0;var currentPageBounds=currentPageCanvas.getBoundingClientRect();if(this.pdfViewer.enableRtl&&!this.isDoubleTapZoom){pointInViewer=this.positionInViewer(currentPageBounds.right,currentPageBounds.top);}else{pointInViewer=this.positionInViewer(currentPageBounds.left,currentPageBounds.top);}var currentPageBoundsLeft=pointInViewer.x;var currentPageBoundsTop=pointInViewer.y;// update scroll top for the viewer container based on pinch zoom factor
var previousPageTop=currentPageBoundsTop*this.previousZoomFactor;var canvasPreviousY=scrollValue+this.touchCenterY;// eslint-disable-next-line max-len
var canvasCurrentY=currentPageBoundsTop*this.zoomFactor+(canvasPreviousY-previousPageTop<0?canvasPreviousY-previousPageTop:(canvasPreviousY-// eslint-disable-next-line max-len
previousPageTop)*(this.zoomFactor/this.previousZoomFactor));var pageGapValue=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);this.pdfViewerBase.viewerContainer.scrollTop=canvasCurrentY-this.touchCenterY+pageGapValue/this.pdfViewerBase.zoomInterval;// update scroll left for the viewer container based on pinch zoom factor
var previousWidthFactor=currentPageBounds.width*this.previousZoomFactor/currentPageBounds.width;var scaleCorrectionFactor=this.zoomFactor/previousWidthFactor-1;var scrollX_1=this.touchCenterX-currentPageBoundsLeft;this.pdfViewerBase.viewerContainer.scrollLeft+=scrollX_1*scaleCorrectionFactor;}};Magnification.prototype.calculateScrollValuesOnMouse=function(scrollValue){var pageIndex=this.pdfViewerBase.currentPageNumber-1;var currentPageCanvas=this.pdfViewerBase.getElement('_pageDiv_'+pageIndex);if(currentPageCanvas){var pointInViewer=void 0;var currentPageBounds=currentPageCanvas.getBoundingClientRect();if(this.pdfViewer.enableRtl){pointInViewer=this.positionInViewer(currentPageBounds.right,currentPageBounds.top);}else{pointInViewer=this.positionInViewer(currentPageBounds.left,currentPageBounds.top);}var currentPageBoundsLeft=pointInViewer.x;var currentPageBoundsTop=pointInViewer.y;// update scroll top for the viewer container based on mouse zoom factor
var previousPageTop=currentPageBoundsTop*this.previousZoomFactor;var canvasPreviousY=scrollValue+this.mouseCenterY;// eslint-disable-next-line max-len
var canvasCurrentY=currentPageBoundsTop*this.zoomFactor+(canvasPreviousY-previousPageTop<0?canvasPreviousY-previousPageTop:(canvasPreviousY-// eslint-disable-next-line max-len
previousPageTop)*(this.zoomFactor/this.previousZoomFactor));// eslint-disable-next-line max-len
var pageGapValue=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);if(this.pdfViewerBase.isTouchPad&&!this.pdfViewerBase.isMacSafari){pageGapValue=pageGapValue/this.pdfViewerBase.zoomInterval;}this.pdfViewerBase.viewerContainer.scrollTop=canvasCurrentY-this.mouseCenterY+pageGapValue;// update scroll left for the viewer container based on mouse zoom factor
var previousWidthFactor=currentPageBounds.width*this.previousZoomFactor/currentPageBounds.width;var scaleCorrectionFactor=this.zoomFactor/previousWidthFactor-1;var scrollX_2=this.mouseCenterX-currentPageBoundsLeft;this.pdfViewerBase.viewerContainer.scrollLeft+=scrollX_2*scaleCorrectionFactor;}};Magnification.prototype.rerenderOnScroll=function(){var _this=this;this.isPinchZoomed=false;if(this.isPinchScrolled){this.rerenderOnScrollTimer=null;this.isPinchScrolled=false;this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;this.pdfViewerBase.renderedPagesList=[];this.pdfViewerBase.pinchZoomStorage=[];var pageDivs=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_pageCanvas_"]');var viewPortWidth=816;for(var i=0;i<pageDivs.length;i++){// eslint-disable-next-line radix
var pageNumber=parseInt(pageDivs[i].id.split('_pageCanvas_')[1]);var pageWidth=this.pdfViewerBase.pageSize[pageNumber].width;if(viewPortWidth<pageWidth&&this.pdfViewer.tileRenderingSettings.enableTileRendering){if(this.pdfViewer.restrictZoomRequest){pageDivs[i].style.width=pageWidth*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line max-len
pageDivs[i].style.height=this.pdfViewerBase.pageSize[pageNumber].height*this.pdfViewerBase.getZoomFactor()+'px';}else{pageDivs[i].style.width=pageWidth*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line max-len
pageDivs[i].style.height=this.pdfViewerBase.pageSize[pageNumber].height*this.pdfViewerBase.getZoomFactor()+'px';}}}if(this.pdfViewerBase.textLayer){var textLayers=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(var i=0;i<textLayers.length;i++){textLayers[i].style.display='block';}}if(this.pdfViewerBase.isTextMarkupAnnotationModule()){// eslint-disable-next-line max-len
var annotationLayers=document.querySelectorAll('canvas[id*="'+this.pdfViewer.dataId+'_annotationCanvas_"]');for(var j=0;j<annotationLayers.length;j++){var pageNumber=annotationLayers[j].id.split('_annotationCanvas_')[1];// eslint-disable-next-line radix
this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(pageNumber));}}this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);this.isPagePinchZoomed=false;this.rerenderOnScrollTimer=setTimeout(function(){_this.pdfViewerBase.pageViewScrollChanged(_this.reRenderPageNumber);},300);}};/**
     * @private
     */Magnification.prototype.pinchMoveScroll=function(){var _this=this;if(this.isRerenderCanvasCreated){this.clearIntervalTimer();}if(this.isPagesZoomed||!this.isRerenderCanvasCreated&&this.isPagePinchZoomed){this.clearRendering();this.isPagesZoomed=false;clearTimeout(this.magnifyPageRerenderTimer);this.isPinchScrolled=true;this.isFormFieldPageZoomed=true;this.rerenderOnScrollTimer=setTimeout(function(){_this.rerenderOnScroll();},100);}};// eslint-disable-next-line
Magnification.prototype.initiateRerender=function(proxy){var isReRender=false;if(this.previousZoomFactor<0.4||this.pdfViewerBase.isMinimumZoom){isReRender=true;}// eslint-disable-next-line max-len
if((proxy.pageRerenderCount===proxy.pdfViewerBase.reRenderedCount||isReRender)&&proxy.pageRerenderCount!==0&&proxy.pdfViewerBase.reRenderedCount!==0){proxy.reRenderAfterPinch(this.reRenderPageNumber);proxy.isFormFieldPageZoomed=false;}};Magnification.prototype.reRenderAfterPinch=function(currentPageIndex){this.pageRerenderCount=0;var lowerPageValue=currentPageIndex-3;var higherPageValue=currentPageIndex+1;if(this.pdfViewerBase.isMinimumZoom){lowerPageValue=currentPageIndex-4;higherPageValue=currentPageIndex+4;}lowerPageValue=lowerPageValue>0?lowerPageValue:0;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;for(var i=lowerPageValue;i<=higherPageValue;i++){var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+i);var pageCanvas=this.pdfViewerBase.getElement('_pageCanvas_'+i);var oldCanvas=this.pdfViewerBase.getElement('_oldCanvas_'+i);if(oldCanvas){oldCanvas.parentNode.removeChild(oldCanvas);}if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(i);}if(pageDiv){pageDiv.style.visibility='visible';}}this.isRerenderCanvasCreated=false;this.isPagePinchZoomed=false;if(this.pdfViewerBase.reRenderedCount!==0){this.pdfViewerBase.reRenderedCount=0;this.pageRerenderCount=0;clearInterval(this.rerenderInterval);this.rerenderInterval=null;}this.imageObjects=[];};/**
     * @param pageNumber
     * @private
     */Magnification.prototype.rerenderAnnotations=function(pageNumber){// eslint-disable-next-line
var oldCanvasCollection=document.querySelectorAll('#'+this.pdfViewer.dataId+'_old_annotationCanvas_'+pageNumber);for(var i=0;i<oldCanvasCollection.length;i++){if(oldCanvasCollection[i]){oldCanvasCollection[i].parentElement.removeChild(oldCanvasCollection[i]);}}var newCanvas=this.pdfViewerBase.getElement('_annotationCanvas_'+pageNumber);if(newCanvas){newCanvas.style.display='block';}};Magnification.prototype.designNewCanvas=function(currentPageIndex){if(this.pdfViewerBase.textLayer){this.pdfViewerBase.textLayer.clearTextLayers();}var lowerPageValue=currentPageIndex-3;var higherPageValue=currentPageIndex+1;// jshint ignore:line
if(this.pdfViewerBase.isMinimumZoom){lowerPageValue=currentPageIndex-4;higherPageValue=currentPageIndex+4;}lowerPageValue=lowerPageValue>0?lowerPageValue:0;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;for(var i=lowerPageValue;i<=higherPageValue;i++){var canvas=this.pdfViewerBase.getElement('_pageCanvas_'+i);var width=this.pdfViewerBase.pageSize[i].width*this.zoomFactor;var height=this.pdfViewerBase.pageSize[i].height*this.zoomFactor;if(canvas&&!this.pdfViewer.restrictZoomRequest){// eslint-disable-next-line max-len
this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_'+i),width,height,i,'none');}else if(!this.pdfViewer.restrictZoomRequest){// eslint-disable-next-line max-len
this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement('_pageDiv_'+i),width,height,i,'none');}}this.isRerenderCanvasCreated=true;};/**
     * @private
     */Magnification.prototype.pageRerenderOnMouseWheel=function(){var _this=this;if(this.isRerenderCanvasCreated){this.clearIntervalTimer();clearTimeout(this.magnifyPageRerenderTimer);if(!this.isPinchScrolled){this.isPinchScrolled=true;this.rerenderOnScrollTimer=setTimeout(function(){_this.rerenderOnScroll();},100);}}};/**
     * @private
     */Magnification.prototype.renderCountIncrement=function(){if(this.isRerenderCanvasCreated){this.pageRerenderCount++;}};/**
     * @private
     */Magnification.prototype.rerenderCountIncrement=function(){if(this.pageRerenderCount>0){this.pdfViewerBase.reRenderedCount++;}};/**
     * @param pageNumber
     * @private
     */Magnification.prototype.resizeCanvas=function(pageNumber){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}var lowerPageValue=pageNumber-3;var higherPageValue=pageNumber+3;if(this.pdfViewerBase.isMinimumZoom){lowerPageValue=pageNumber-4;higherPageValue=pageNumber+4;}lowerPageValue=lowerPageValue>0?lowerPageValue:0;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;for(var i=lowerPageValue;i<=higherPageValue;i++){var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+i);var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+i);if(pageDiv){if(lowerPageValue<=i&&i<=higherPageValue){var isSelectionAvailable=false;if(this.pdfViewer.textSelectionModule){isSelectionAvailable=this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(i);}if(this.pdfViewerBase.pageSize[i]!=null){var width=this.pdfViewerBase.pageSize[i].width*this.zoomFactor;var height=this.pdfViewerBase.pageSize[i].height*this.zoomFactor;pageDiv.style.width=width+'px';pageDiv.style.height=height+'px';// eslint-disable-next-line max-len
pageDiv.style.top=this.pdfViewerBase.pageSize[i].top*this.zoomFactor+'px';if(this.pdfViewer.enableRtl){pageDiv.style.right=this.pdfViewerBase.updateLeftPosition(i)+'px';}else{pageDiv.style.left=this.pdfViewerBase.updateLeftPosition(i)+'px';}var canvas=this.pdfViewerBase.getElement('_pageCanvas_'+i);if(canvas){canvas.style.width=width+'px';canvas.style.height=height+'px';if(this.pdfViewer.annotation){this.pdfViewer.annotationModule.resizeAnnotations(width,height,i);}}var zoomFactor=this.pdfViewerBase.retrieveCurrentZoomFactor();var tileCount=this.pdfViewerBase.getTileCount(this.pdfViewerBase.pageSize[i].width);var noTileX=void 0;var noTileY=void 0;noTileX=noTileY=tileCount;var tileSettings=this.pdfViewer.tileRenderingSettings;if(tileSettings.enableTileRendering&&tileSettings.x>0&&tileSettings.y>0){if(1200<this.pdfViewerBase.pageSize[i].width||this.pdfViewerBase.getZoomFactor()>2){noTileX=tileSettings.x;noTileY=tileSettings.y;}}var tileRequestCount=noTileX*noTileY;if(tileRequestCount===1){var storedData=this.pdfViewerBase.getLinkInformation(i);if(storedData){storedData=storedData;var imageData=storedData['image'];if(imageData){canvas.src=imageData;canvas.style.display='block';var oldCanvases=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_tileimg_'+i+'_"]');var pageCanvas=this.pdfViewerBase.getElement('_pageDiv_'+i);for(var k=0;k<oldCanvases.length;k++){var tileImgId=oldCanvases[k].id.split('_');if(parseFloat(tileImgId[tileImgId.length-3])!=this.pdfViewerBase.getZoomFactor())pageCanvas.removeChild(oldCanvases[k]);}var oldPageDiv=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_oldCanvas"]');for(var j=0;j<oldPageDiv.length;j++){pageDiv.removeChild(oldPageDiv[j]);}}this.pdfViewerBase.isReRenderRequired=false;}else{this.pdfViewerBase.isReRenderRequired=true;}}else{var oldCanvases=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_tileimg_'+i+'_"]');for(var l=0;l<oldCanvases.length;l++){var tileImgId=oldCanvases[l].id.split('_');var tileX=parseFloat(tileImgId[tileImgId.length-2]);var tileY=parseFloat(tileImgId[tileImgId.length-1]);// eslint-disable-next-line
var tileData=JSON.parse(this.pdfViewerBase.getStoredTileImageDetails(i,tileX,tileY,zoomFactor));if(tileData&&tileData.zoomFactor){zoomFactor=tileData.zoomFactor;}if(parseFloat(tileImgId[tileImgId.length-4])===i){canvas.style.display='none';var node=oldCanvases[l];// Make sure it's really an Element
if(node.nodeType==Node.ELEMENT_NODE){var dataScaleFactor=1.5;if(!sf.base.isNullOrUndefined(tileData)){dataScaleFactor=!sf.base.isNullOrUndefined(tileData.scaleFactor)?tileData.scaleFactor:1.5;}var pageWidth=this.pdfViewerBase.pageSize[i].width;var serverImageWidth=pageWidth*zoomFactor*dataScaleFactor;var serverImageHeight=this.pdfViewerBase.pageSize[i].height*zoomFactor*dataScaleFactor;var tilewidth=serverImageWidth/noTileX;var tileHeight=serverImageHeight/noTileY;var originalWidth=tilewidth;var originalLeft=parseFloat(tileImgId[tileImgId.length-2])*tilewidth;var originalTop=parseFloat(tileImgId[tileImgId.length-1])*tileHeight;node.width=originalWidth*this.pdfViewerBase.getZoomFactor()/zoomFactor/dataScaleFactor;node.style.width=originalWidth*this.pdfViewerBase.getZoomFactor()/zoomFactor/dataScaleFactor+'px';node.style.left=originalLeft*this.pdfViewerBase.getZoomFactor()/zoomFactor/dataScaleFactor+'px';node.style.top=originalTop*this.pdfViewerBase.getZoomFactor()/zoomFactor/dataScaleFactor+'px';node.id=this.pdfViewer.dataId+'_tileimg_'+i+'_'+this.pdfViewerBase.getZoomFactor()+'_'+tileX+'_'+tileY;if(tileData){var imageData=tileData['image'];if(imageData){node.src=imageData;}this.pdfViewerBase.isReRenderRequired=false;}else{this.pdfViewerBase.isReRenderRequired=true;}}}}if(oldCanvases.length===0){this.pdfViewerBase.isReRenderRequired=true;}}if(textLayer){textLayer.style.width=width+'px';textLayer.style.height=height+'px';if(this.isPinchZoomed){textLayer.style.display='none';}else if(this.isMagnified){var lowerValue=pageNumber-2===0?0:pageNumber-2;// eslint-disable-next-line max-len
var higherValue=pageNumber===this.pdfViewerBase.pageCount?this.pdfViewerBase.pageCount-1:pageNumber+1;if(this.pdfViewer.textSelectionModule&&lowerValue<=i&&i<=higherValue&&(this.pdfViewer.textSelectionModule.isTextSelection&&isSelectionAvailable||this.pdfViewerBase.textLayer.getTextSearchStatus()||this.pdfViewerBase.isInitialPageMode)){this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(i);if(this.pdfViewer.textSelectionModule.isTextSelection&&isSelectionAvailable){this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);}}else{textLayer.style.display='none';}}else{textLayer.style.display='block';}this.pdfViewerBase.applyElementStyles(textLayer,i);}var adornerSvg=sf.drawings.getDiagramElement(this.pdfViewer.dataId+'_textLayer_'+i);if(adornerSvg){var adonerLayer=sf.drawings.getDiagramElement(this.pdfViewer.dataId+i+'_diagramAdorner_svg');if(adonerLayer){adonerLayer.style.width=width+'px';adonerLayer.style.height=height+'px';}var diagramAdornerLayer=sf.drawings.getDiagramElement(this.pdfViewer.dataId+i+'_diagramAdornerLayer');if(diagramAdornerLayer){diagramAdornerLayer.style.width=width+'px';diagramAdornerLayer.style.height=height+'px';}adornerSvg.style.width=width+'px';adornerSvg.style.height=height+'px';this.pdfViewer.renderSelector(i,this.pdfViewer.annotationSelectorSettings);this.pdfViewerBase.applyElementStyles(diagramAdornerLayer,i);}}}}}};Magnification.prototype.zoomOverPages=function(pointX1,pointY1,pointX2,pointY2){// eslint-disable-next-line
var currentDifference=Math.sqrt(Math.pow(pointX1-pointX2,2)+Math.pow(pointY1-pointY2,2));if(this.previousTouchDifference>-1){if(currentDifference>this.previousTouchDifference){this.pinchStep=this.getPinchStep(currentDifference,this.previousTouchDifference);this.pinchOut();}else if(currentDifference<this.previousTouchDifference){this.pinchStep=this.getPinchStep(this.previousTouchDifference,currentDifference);this.pinchIn();}}this.previousTouchDifference=currentDifference;};/**
     * @private
     */Magnification.prototype.pinchMoveEnd=function(){this.touchCenterX=0;this.touchCenterY=0;this.previousTouchDifference=-1;if(this.isPinchZoomed){this.isPinchScrolled=false;this.isPagePinchZoomed=true;this.pinchMoveScroll();}};/**
     * @param event
     * @private
     */ // eslint-disable-next-line
Magnification.prototype.fitPageScrollMouseWheel=function(event){if(this.fitType==='fitToPage'){this.isMagnified=false;event.preventDefault();if(event.deltaY>0){this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}else{this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}}};/**
     * @param event
     * @private
     */Magnification.prototype.magnifyBehaviorKeyDown=function(event){var isMac=navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?true:false;var isCommandKey=isMac?event.metaKey:false;switch(event.keyCode){case 37:// left arrow
{if(event.ctrlKey||isCommandKey){event.preventDefault();this.pdfViewerBase.updateScrollTop(0);}event.preventDefault();this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}break;case 38:// up arrow
case 33:// page up
{if(event.ctrlKey||isCommandKey){event.preventDefault();this.pdfViewerBase.updateScrollTop(0);}if(this.fitType==='fitToPage'&&!((event.ctrlKey||isCommandKey)&&event.shiftKey)){event.preventDefault();this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}}break;case 39:// right arrow
{if(event.ctrlKey||isCommandKey){event.preventDefault();this.pdfViewerBase.updateScrollTop(this.pdfViewerBase.pageCount-1);}event.preventDefault();this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}break;case 40:// down arrow
case 34:// page down
{if(event.ctrlKey||isCommandKey){event.preventDefault();this.pdfViewerBase.updateScrollTop(this.pdfViewerBase.pageCount-1);}if(this.fitType==='fitToPage'&&!((event.ctrlKey||isCommandKey)&&event.shiftKey)){event.preventDefault();this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1);}}break;case 187:// equal key
if(event.ctrlKey||isCommandKey){event.preventDefault();this.zoomIn();}break;case 189:// minus key
if(event.ctrlKey||isCommandKey){event.preventDefault();this.zoomOut();}break;case 48:// zero key
if((event.ctrlKey||isCommandKey)&&!event.shiftKey){event.preventDefault();this.fitToPage();}break;case 49:// one key
if((event.ctrlKey||isCommandKey)&&!event.shiftKey){event.preventDefault();this.zoomTo(100);}break;default:break;}};Magnification.prototype.upwardScrollFitPage=function(currentPageIndex){if(currentPageIndex>0){var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex-1));if(pageDiv&&pageDiv.style){pageDiv.style.visibility='visible';this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[currentPageIndex-1].top*this.zoomFactor;if(this.isFitToPageMode){var division=this.pdfViewerBase.getElement('_pageDiv_'+currentPageIndex);if(division&&division.style){division.style.visibility='hidden';}}}}};/**
     * @param currentPageIndex
     * @private
     */Magnification.prototype.updatePagesForFitPage=function(currentPageIndex){if(this.fitType==='fitToPage'){if(this.isFitToPageMode){if(currentPageIndex>0&&this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex-1))){this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex-1)).style.visibility='hidden';}// eslint-disable-next-line max-len
if(currentPageIndex<this.pdfViewerBase.pageCount-1&&this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex+1))){this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex+1)).style.visibility='hidden';}}}};/**
     * @private
     */Magnification.prototype.onDoubleTapMagnification=function(){if(this.pdfViewer.toolbarModule){this.pdfViewer.toolbarModule.showToolbar(true);}var scrollValue=this.pdfViewerBase.viewerContainer.scrollTop;if(!this.pdfViewer.selectedItems.annotations[0]){this.isDoubleTapZoom=true;if(!this.isTapToFitZoom){if(this.zoomFactor<2){this.zoomTo(200);}else{this.fitToWidth();}}else{this.fitToWidth();}this.calculateScrollValues(scrollValue);this.isTapToFitZoom=!this.isTapToFitZoom;this.isDoubleTapZoom=false;}else{// eslint-disable-next-line max-len
if(this.pdfViewer.selectedItems.annotations[0]&&this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){var elmtPosition={};elmtPosition.x=this.pdfViewer.selectedItems.annotations[0].bounds.x;elmtPosition.y=this.pdfViewer.selectedItems.annotations[0].bounds.y;// eslint-disable-next-line max-len
this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(elmtPosition,this.pdfViewer.selectedItems.annotations[0],null,true);}}};Magnification.prototype.downwardScrollFitPage=function(currentPageIndex){if(currentPageIndex!==this.pdfViewerBase.pageCount-1){var pageDiv=this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex+1));if(pageDiv&&pageDiv.style){pageDiv.style.visibility='visible';}this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[currentPageIndex+1].top*this.zoomFactor;if(this.isFitToPageMode){var division1=this.pdfViewerBase.getElement('_pageDiv_'+currentPageIndex);var division2=this.pdfViewerBase.getElement('_pageDiv_'+(currentPageIndex+2));if(currentPageIndex+1===this.pdfViewerBase.pageCount-1){if(division1&&division1.style){division1.style.visibility='hidden';}}else{if(division2&&division2.style){division2.style.visibility='hidden';}}}}};Magnification.prototype.getMagnifiedValue=function(value){return value/this.previousZoomFactor*this.zoomFactor;};/**
     * @private
     */Magnification.prototype.destroy=function(){this.imageObjects=undefined;};/**
     * returns zoom factor when the zoom percent is passed.
     *
     * @param zoomValue
     */Magnification.prototype.getZoomFactor=function(zoomValue){return zoomValue/100;};/**
     * @private
     */Magnification.prototype.getModuleName=function(){return'Magnification';};/**
    * Returns the pinch step value.
    * @param higherValue
    * @param lowerValue
    */Magnification.prototype.getPinchStep=function(higherValue,lowerValue){var defaultPinchStep=0.02;// Default pinch step value.
var higherPinchStep=1;// higher pinch step value.
var pinchstep=(higherValue-lowerValue)/100;if(pinchstep<defaultPinchStep){pinchstep=defaultPinchStep;}else if(pinchstep>higherPinchStep){pinchstep=0.1;// set the pinch step as 0.1 if the pinch reaches the higher pinch step value.
}return pinchstep;};/**
    * Returns Point value respect to Main container.
    * @param pointX
    * @param pointY
    */Magnification.prototype.positionInViewer=function(pointX,pointY){var mainRect=this.pdfViewerBase.mainContainer.getBoundingClientRect();return{x:pointX-mainRect.left,y:pointY-mainRect.top};};return Magnification;}();/**
 * export types
 */ /**
 * Navigation module
 */var Navigation=/** @class */function(){/**
     * @param viewer
     * @param viewerBase
     * @param viewer
     * @param viewerBase
     * @private
     */function Navigation(viewer,viewerBase){this.pdfViewer=viewer;this.pdfViewerBase=viewerBase;}/**
     * Navigate to Next page of the PDF document
     *
     * @returns void
     */Navigation.prototype.goToNextPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber;this.pageNumber++;if(this.pageNumber<=this.pdfViewerBase.pageCount){this.pdfViewerBase.updateScrollTop(this.pageNumber-1);}};/**
     * Navigate to Previous page of the PDF document
     *
     * @returns void
     */Navigation.prototype.goToPreviousPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber;this.pageNumber--;if(this.pageNumber>0){this.pdfViewerBase.updateScrollTop(this.pageNumber-1);}};/**
     * Navigate to given Page number
     * Note : In case if we have provided incorrect page number as argument it will retain the existing page
     *
     * @param  {number} pageNumber - Defines the page number to navigate
     * @returns void
     */Navigation.prototype.goToPage=function(pageNumber){if(pageNumber>0&&pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==pageNumber){this.pdfViewerBase.updateScrollTop(pageNumber-1);}this.pdfViewer.magnificationModule.resizeCanvas(pageNumber);var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber-1));if(textLayer){textLayer.style.display='block';}};/**
     * Navigate to First page of the PDF document
     *
     * @returns void
     */Navigation.prototype.goToFirstPage=function(){this.pageNumber=0;this.pdfViewerBase.updateScrollTop(this.pageNumber);};/**
     * Navigate to Last page of the PDF document
     *
     * @returns void
     */Navigation.prototype.goToLastPage=function(){this.pageNumber=this.pdfViewerBase.pageCount-1;this.pdfViewerBase.updateScrollTop(this.pageNumber);};/**
     * @private
     */Navigation.prototype.destroy=function(){this.pageNumber=0;};/**
     * @private
     */Navigation.prototype.getModuleName=function(){return'Navigation';};return Navigation;}();/**
 * export types
 */ /**
 * The `ThumbnailView` module is used to handle thumbnail view navigation of PDF viewer.
 */var ThumbnailView=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function ThumbnailView(pdfViewer,pdfViewerBase){var _this=this;this.thumbnailTopMargin=10;/**
         * @private
         */this.isThumbnailClicked=false;/**
         * @param event
         * @private
         */this.thumbnailClick=function(event){var proxy=_this;var pageNumber=proxy.getPageNumberFromID(event.srcElement.id);if(proxy.previousElement){proxy.previousElement.classList.remove('e-pv-thumbnail-selection');proxy.previousElement.classList.remove('e-pv-thumbnail-focus');proxy.previousElement.classList.add('e-pv-thumbnail-selection-ring');}if(event.srcElement.parentElement.id===proxy.pdfViewer.element.id+'_thumbnail_Selection_Ring_'+pageNumber){proxy.setSelectionStyle(event.srcElement.parentElement);proxy.previousElement=event.srcElement.parentElement;}else if(event.srcElement.id===proxy.pdfViewer.element.id+'_thumbnail_Selection_Ring_'+pageNumber){proxy.setSelectionStyle(event.srcElement);proxy.previousElement=event.srcElement;}proxy.pdfViewer.fireThumbnailClick(pageNumber+1);proxy.isThumbnailClicked=true;proxy.goToThumbnailPage(pageNumber+1);proxy.pdfViewerBase.focusViewerContainer();if(_this.pdfViewer.annotationModule&&_this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);_this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}};/**
         * @param event
         * @private
         */this.thumbnailMouseOver=function(event){var proxy=_this;var pageNumber=proxy.getPageNumberFromID(event.srcElement.id);if(event.srcElement.id===proxy.pdfViewer.element.id+'_thumbnail_Selection_Ring_'+pageNumber){proxy.setMouseOverStyle(event.srcElement);}else if(event.srcElement.id===proxy.pdfViewer.element.id+'_thumbnail_image_'+pageNumber){proxy.setMouseOverStyle(event.srcElement.parentElement);}};/**
         * @param event
         * @private
         */this.thumbnailMouseLeave=function(event){var proxy=_this;var pageNumber=proxy.getPageNumberFromID(event.srcElement.id);if(event.srcElement.parentElement.id===proxy.pdfViewer.element.id+'_thumbnail_view'){proxy.setMouseLeaveStyle(event.srcElement.children[0].children[0]);}else if(event.srcElement.parentElement.id===proxy.pdfViewer.element.id+'_thumbnail_'+pageNumber){proxy.setMouseLeaveStyle(event.srcElement.parentElement.children[0]);}};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     */ThumbnailView.prototype.createThumbnailContainer=function(){var proxy=this;// eslint-disable-next-line max-len
this.thumbnailView=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_thumbnail_view',className:'e-pv-thumbnail-view e-pv-thumbnail-row'});this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView);this.pdfViewerBase.navigationPane.sideBarContent.addEventListener('scroll',function(){proxy.renderViewPortThumbnailImage();});};/**
     * Open the thumbnail pane of the PdfViewer.
     *
     * @returns void
     */ThumbnailView.prototype.openThumbnailPane=function(){if(this.pdfViewerBase.navigationPane){this.pdfViewerBase.navigationPane.openThumbnailPane();}};/**
     * @private
     */ // eslint-disable-next-line
ThumbnailView.prototype.createRequestForThumbnails=function(){var proxy=this;for(var i=0;i<proxy.pdfViewer.pageCount;i++){proxy.renderThumbnailEmptyPage(i);}if(proxy.pdfViewer.isThumbnailViewOpen){proxy.pdfViewerBase.navigationPane.isThumbnailOpen=true;// eslint-disable-next-line max-len
proxy.pdfViewerBase.navigationPane.sideBarTitle.textContent=proxy.pdfViewer.localeObj.getConstant('Page Thumbnails');document.getElementById(proxy.pdfViewer.element.id+'_thumbnail_view').style.display='flex';var bookmarkContent=proxy.pdfViewer.element.querySelector('.e-pv-bookmark-view');if(bookmarkContent){bookmarkContent.style.display='none';}proxy.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme();proxy.pdfViewerBase.navigationPane.updateViewerContainerOnExpand();proxy.pdfViewerBase.navigationPane.isBookmarkOpen=false;}};/**
     * @private
     * @returns {void}
    */ThumbnailView.prototype.renderThumbnailEmptyPage=function(pageIndex){if(this.thumbnailView){// eslint-disable-next-line max-len
var pageLink=sf.base.createElement('a',{id:'page_'+pageIndex,attrs:{'aria-label':'Thumbnail of Page'+(pageIndex+1),'role':'link'},className:'e-pv-thumbnail-anchor-node'});// eslint-disable-next-line max-len
var thumbnail=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_thumbnail_'+pageIndex,className:'e-pv-thumbnail e-pv-thumbnail-column'});// eslint-disable-next-line max-len
this.thumbnailSelectionRing=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_thumbnail_Selection_Ring_'+pageIndex,className:'e-pv-thumbnail-selection-ring'});thumbnail.appendChild(this.thumbnailSelectionRing);// eslint-disable-next-line max-len
var thumbnailPageNumber=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_thumbnail_pagenumber_'+pageIndex,className:'e-pv-thumbnail-number'});thumbnailPageNumber.textContent=(pageIndex+1).toString();thumbnail.appendChild(thumbnailPageNumber);// eslint-disable-next-line max-len
this.thumbnailImage=sf.base.createElement('img',{id:this.pdfViewer.dataId+'_thumbnail_image_'+pageIndex,className:'e-pv-thumbnail-image',attrs:{'tabindex':'0'}});if(this.pdfViewerBase.pageSize[pageIndex]&&this.pdfViewerBase.pageSize[pageIndex].height<this.pdfViewerBase.pageSize[pageIndex].width){this.thumbnailImage.style.height='86px';this.thumbnailImage.style.width='126px';thumbnail.style.height='100px';thumbnail.style.width='140px';pageLink.style.left='-25px';pageLink.style.position='relative';thumbnailPageNumber.style.left='18px';thumbnailPageNumber.style.position='relative';}this.thumbnailImage.setAttribute("aria-label","thumbnailImage"+(pageIndex+1));this.thumbnailSelectionRing.appendChild(this.thumbnailImage);pageLink.appendChild(thumbnail);this.thumbnailView.appendChild(pageLink);this.wireUpEvents();if(pageIndex===0){this.setMouseFocusToFirstPage();}}this.pdfViewerBase.navigationPane.enableThumbnailButton();};/**
     * @private
     * @returns {void}
    */ThumbnailView.prototype.renderViewPortThumbnailImage=function(){var thumbnailImagePanelHeight=this.pdfViewerBase.navigationPane.sideBarContent.getBoundingClientRect().height;var thumbnailLinkElement=this.getThumbnailLinkElement(0);var rectValue=thumbnailLinkElement.getBoundingClientRect();var singleImageHeight=rectValue.height;var scrollPosition=this.pdfViewerBase.navigationPane.sideBarContent.scrollTop;var thumbnailPanelWidth=this.thumbnailView.getBoundingClientRect().width;var thumbnailPanelPadding=48;var singleImageWidth=rectValue.width;var imageInRow=parseInt(((thumbnailPanelWidth-thumbnailPanelPadding)/singleImageWidth).toString());imageInRow=imageInRow>0?imageInRow:1;var startPage=parseInt((scrollPosition*imageInRow/singleImageHeight).toString());startPage=startPage>imageInRow?startPage-imageInRow:startPage;for(var count=startPage;count<this.pdfViewer.pageCount;count++){var currentPageHeight=parseInt((count/imageInRow).toString())*singleImageHeight;if(currentPageHeight-scrollPosition-singleImageHeight<thumbnailImagePanelHeight){var currentPageImage=this.getThumbnailImageElement(count);if(currentPageImage.src===''){this.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:count,message:'renderThumbnail'});}}else{break;}}};/**
     * @private
     * @returns {void}
    */ThumbnailView.prototype.thumbnailOnmessage=function(event){if(event.data.message==='renderThumbnail'){var canvas=document.createElement('canvas');var _a=event.data,value=_a.value,width=_a.width,height=_a.height,pageIndex=_a.pageIndex;canvas.width=width;canvas.height=height;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(width,height);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var currentPageImage=this.getThumbnailImageElement(pageIndex);currentPageImage.src=imageUrl;}};/**
     * @param pageNumber
     * @private
     */ThumbnailView.prototype.gotoThumbnailImage=function(pageNumber){var shouldScroll=this.checkThumbnailScroll(pageNumber);if(this.thumbnailView){var thumbnailChild=this.thumbnailView.children[pageNumber];if(thumbnailChild){var thumbnailDiv=thumbnailChild.children[0];if(shouldScroll){var offsetTop=thumbnailDiv.offsetTop+thumbnailDiv.clientTop-this.thumbnailTopMargin;this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=offsetTop;}if(!this.isThumbnailClicked){if(this.previousElement){this.previousElement.classList.remove('e-pv-thumbnail-selection');this.previousElement.classList.remove('e-pv-thumbnail-focus');this.previousElement.classList.remove('e-pv-thumbnail-hover');this.previousElement.classList.add('e-pv-thumbnail-selection-ring');}this.setFocusStyle(thumbnailDiv,pageNumber);}this.previousElement=thumbnailDiv.children[0];}}};ThumbnailView.prototype.checkThumbnailScroll=function(pageNumber){var shouldScroll=false;if(this.thumbnailView){var visibleThumbs=this.getVisibleThumbs();var numVisibleThumbs=visibleThumbs.views.length;// if the thumbnail isn't currently visible, scroll it into view.
if(numVisibleThumbs>0){var visibleFirstPageID=this.getPageNumberFromID(visibleThumbs.first.id);// account for only one thumbnail being visible.
// eslint-disable-next-line max-len
var visibleLastPageID=numVisibleThumbs>1?this.getPageNumberFromID(visibleThumbs.last.id):visibleFirstPageID;if(pageNumber<=visibleFirstPageID||pageNumber>=visibleLastPageID){shouldScroll=true;}else{// eslint-disable-next-line
visibleThumbs.views.some(function(view){var pageID=view.id.split('_');var thumbPageNumber=pageID[pageID.length-1];// eslint-disable-next-line radix
if(parseInt(thumbPageNumber)!==pageNumber){return false;}shouldScroll=view.percent<100;return true;});}}}return shouldScroll;};ThumbnailView.prototype.getPageNumberFromID=function(pageId){var pageID=pageId.split('_');var pageNumber=pageID[pageID.length-1];// eslint-disable-next-line radix
return parseInt(pageNumber);};ThumbnailView.prototype.setFocusStyle=function(thumbnail,pageNumber){if(thumbnail.children[0].id===this.pdfViewer.dataId+'_thumbnail_Selection_Ring_'+pageNumber){this.setMouseFocusStyle(thumbnail.children[0]);}};ThumbnailView.prototype.wireUpEvents=function(){if(this.thumbnailSelectionRing){this.thumbnailSelectionRing.addEventListener('click',this.thumbnailClick);this.thumbnailSelectionRing.addEventListener('mouseover',this.thumbnailMouseOver);this.thumbnailSelectionRing.addEventListener('mouseleave',this.thumbnailMouseLeave);}};ThumbnailView.prototype.unwireUpEvents=function(){if(this.thumbnailSelectionRing&&this.thumbnailImage){this.thumbnailSelectionRing.removeEventListener('click',this.thumbnailClick);this.thumbnailSelectionRing.removeEventListener('mouseover',this.thumbnailMouseOver);this.thumbnailSelectionRing.removeEventListener('mouseleave',this.thumbnailMouseLeave);}};ThumbnailView.prototype.goToThumbnailPage=function(pageNumber){if(pageNumber>0&&pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==pageNumber){this.pdfViewerBase.updateScrollTop(pageNumber-1);}else{this.isThumbnailClicked=false;}};ThumbnailView.prototype.setSelectionStyle=function(thumbnailElement){thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');thumbnailElement.classList.remove('e-pv-thumbnail-hover');thumbnailElement.classList.remove('e-pv-thumbnail-focus');thumbnailElement.classList.add('e-pv-thumbnail-selection');};ThumbnailView.prototype.setMouseOverStyle=function(thumbnailElement){// eslint-disable-next-line max-len
if(!thumbnailElement.classList.contains('e-pv-thumbnail-selection')){thumbnailElement.classList.remove('e-pv-thumbnail-selection-ring');if(!thumbnailElement.classList.contains('e-pv-thumbnail-focus')){thumbnailElement.classList.add('e-pv-thumbnail-hover');}}};ThumbnailView.prototype.setMouseLeaveStyle=function(thumbnailElement){if(!thumbnailElement.classList.contains('e-pv-thumbnail-selection')){if(!thumbnailElement.classList.contains('e-pv-thumbnail-focus')){thumbnailElement.classList.add('e-pv-thumbnail-selection-ring');}thumbnailElement.classList.remove('e-pv-thumbnail-hover');}else{if(!thumbnailElement.classList.contains('e-pv-thumbnail-selection')){thumbnailElement.classList.remove('e-pv-thumbnail-selection');thumbnailElement.classList.add('e-pv-thumbnail-focus');}}};ThumbnailView.prototype.setMouseFocusStyle=function(thumbnailElement){thumbnailElement.classList.remove('e-pv-thumbnail-selection');thumbnailElement.classList.remove('e-pv-thumbnail-hover');thumbnailElement.classList.add('e-pv-thumbnail-focus');};ThumbnailView.prototype.setMouseFocusToFirstPage=function(){var thumbnailChild=this.thumbnailView.children[0];if(thumbnailChild){var thumbnailDiv=thumbnailChild.children[0].children[0];this.setMouseFocusStyle(thumbnailDiv);this.previousElement=thumbnailDiv;}};/**
     * @private
     */ThumbnailView.prototype.clear=function(){if(this.pdfViewerBase.navigationPane){if(this.pdfViewerBase.navigationPane.sideBarContentContainer){this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display='block';this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=0;this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display='none';}}if(this.thumbnailView){while(this.thumbnailView.hasChildNodes()){this.thumbnailView.removeChild(this.thumbnailView.lastChild);}}if(this.pdfViewerBase.navigationPane){this.pdfViewerBase.navigationPane.resetThumbnailView();}if(this.thumbnailRequestHandler){this.thumbnailRequestHandler.clear();}this.unwireUpEvents();};ThumbnailView.prototype.getVisibleThumbs=function(){return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent,this.thumbnailView.children);};ThumbnailView.prototype.getVisibleElements=function(scrollElement,thumbnailViewChildren){var top=scrollElement.scrollTop;var bottom=top+scrollElement.clientHeight;var left=scrollElement.scrollLeft;var right=left+scrollElement.clientWidth;/**
         * @param thumbnailViewChildrenElement
         */function isThumbnailElementBottomAfterViewTop(thumbnailViewChildrenElement){var elementBottom=thumbnailViewChildrenElement.offsetTop+thumbnailViewChildrenElement.clientTop+thumbnailViewChildrenElement.clientHeight;return elementBottom>top;}// eslint-disable-next-line
var visible=[];var thumbnailView;var element;var currentHeight;var viewHeight;var viewBottom;var hiddenHeight;var currentWidth;var viewWidth;var viewRight;var hiddenWidth;var percentVisible;var firstVisibleElementInd=thumbnailViewChildren.length===0?0:this.binarySearchFirstItem(thumbnailViewChildren,isThumbnailElementBottomAfterViewTop);if(thumbnailViewChildren.length>0){firstVisibleElementInd=this.backtrackBeforeAllVisibleElements(firstVisibleElementInd,thumbnailViewChildren,top);}var lastEdge=-1;for(var i=firstVisibleElementInd,ii=thumbnailViewChildren.length;i<ii;i++){thumbnailView=this.getThumbnailElement(i);element=thumbnailView;currentWidth=element.offsetLeft+element.clientLeft;currentHeight=element.offsetTop+element.clientTop;viewWidth=element.clientWidth;viewHeight=element.clientHeight;viewRight=currentWidth+viewWidth;viewBottom=currentHeight+viewHeight;if(lastEdge===-1){if(viewBottom>=bottom){lastEdge=viewBottom;}}else if(currentHeight>lastEdge){break;}if(viewBottom<=top||currentHeight>=bottom||viewRight<=left||currentWidth>=right){continue;}hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,viewBottom-bottom);hiddenWidth=Math.max(0,left-currentWidth)+Math.max(0,viewRight-right);// eslint-disable-next-line no-bitwise
percentVisible=(viewHeight-hiddenHeight)*(viewWidth-hiddenWidth)*100/viewHeight/viewWidth|0;visible.push({id:thumbnailView.id,x:currentWidth,y:currentHeight,view:thumbnailView,percent:percentVisible});}var first=visible[0];var last=visible[visible.length-1];return{first:first,last:last,views:visible};};// eslint-disable-next-line
ThumbnailView.prototype.binarySearchFirstItem=function(items,condition){var minIndex=0;var maxIndex=items.length-1;if(items.length===0||!condition(this.getThumbnailElement(maxIndex))){return items.length-1;}if(condition(this.getThumbnailElement(minIndex))){return minIndex;}while(minIndex<maxIndex){// eslint-disable-next-line no-bitwise
var currentIndex=minIndex+maxIndex>>1;if(condition(this.getThumbnailElement(currentIndex))){maxIndex=currentIndex;}else{minIndex=currentIndex+1;}}return minIndex;/* === maxIndex */};ThumbnailView.prototype.backtrackBeforeAllVisibleElements=function(index,views,top){if(index<2){return index;}var thumbnailElement=this.getThumbnailElement(index);var pageTop=thumbnailElement.offsetTop+thumbnailElement.clientTop;if(pageTop>=top){thumbnailElement=this.getThumbnailElement(index-1);pageTop=thumbnailElement.offsetTop+thumbnailElement.clientTop;}for(var i=index-2;i>=0;--i){thumbnailElement=this.getThumbnailElement(i);if(thumbnailElement.offsetTop+thumbnailElement.clientTop+thumbnailElement.clientHeight<=pageTop){break;}index=i;}return index;};/**
     * @private
     */ThumbnailView.prototype.getThumbnailElement=function(index){var thumbnailChild=this.thumbnailView.children[index];return thumbnailChild.children[0];};/**
     * @private
     */ThumbnailView.prototype.getThumbnailLinkElement=function(index){var thumbnailChild=this.thumbnailView.children[index];return thumbnailChild;};/**
     * @private
     */ThumbnailView.prototype.getThumbnailImageElement=function(index){var thumbnailChild=this.thumbnailView.children[index];return thumbnailChild.children[0].children[0].children[0];};/**
     * @private
     */ThumbnailView.prototype.destroy=function(){this.clear();};/**
     * @private
     */ThumbnailView.prototype.getModuleName=function(){return'ThumbnailView';};return ThumbnailView;}();/**
 * export types
 */ /* eslint-disable */ /**
 * Toolbar module
 */var Toolbar$1=/** @class */function(){/**
     * @param viewer
     * @param viewerBase
     * @param viewer
     * @param viewerBase
     * @private
     */function Toolbar$$1(viewer,viewerBase){var _this=this;this.isPageNavigationToolDisabled=false;this.isMagnificationToolDisabled=false;/**
         * @private
        */this.isSelectionToolDisabled=false;this.isScrollingToolDisabled=false;this.isOpenBtnVisible=true;this.isNavigationToolVisible=true;this.isMagnificationToolVisible=true;this.isSelectionBtnVisible=true;this.isScrollingBtnVisible=true;this.isDownloadBtnVisible=true;this.isPrintBtnVisible=true;this.isSearchBtnVisible=true;/**
         * @private
        */this.isTextSearchBoxDisplayed=false;this.isUndoRedoBtnsVisible=true;this.isAnnotationEditBtnVisible=true;this.isCommentBtnVisible=true;this.isSubmitbtnvisible=true;this.toolbarClickHandler=function(args){// eslint-disable-next-line max-len
if(!sf.base.Browser.isDevice||_this.pdfViewer.enableDesktopMode){if(args.originalEvent.target===_this.zoomDropdownItem.parentElement.childNodes[1]||args.originalEvent.target===_this.zoomDropdownItem.parentElement.childNodes[2]){args.cancel=true;}else if(args.originalEvent.target.id===_this.pdfViewer.dataId+'_openIcon'){var tooltipData=args.originalEvent.target.parentElement.dataset;if(tooltipData&&tooltipData.tooltipId){var tooltipElement=document.getElementById(tooltipData.tooltipId);if(tooltipElement){tooltipElement.style.display='none';}}}}_this.handleToolbarBtnClick(args);// eslint-disable-next-line
var targetElement=args.originalEvent.target;if(!sf.base.Browser.isDevice||_this.pdfViewer.enableDesktopMode){// eslint-disable-next-line max-len
if(!(args.originalEvent.target===_this.zoomDropdownItem.parentElement.childNodes[1]||args.originalEvent.target===_this.zoomDropdownItem.parentElement.childNodes[2]||args.originalEvent.target===_this.currentPageBoxElement||args.originalEvent.target===_this.textSearchItem.childNodes[0])){if(targetElement.parentElement.id!==_this.pdfViewer.dataId+'_toolbarContainer_nav'&&targetElement.id!==_this.pdfViewer.dataId+'_toolbarContainer_nav'){args.originalEvent.target.blur();_this.pdfViewerBase.focusViewerContainer();}}}else{args.originalEvent.target.blur();_this.pdfViewerBase.focusViewerContainer();}};// eslint-disable-next-line
this.loadDocument=function(args){// eslint-disable-next-line
var upoadedFiles=args.target.files;if(args.target.files[0]!==null){var uploadedFile=upoadedFiles[0];if(uploadedFile){_this.uploadedDocumentName=uploadedFile.name;var reader=new FileReader();reader.readAsDataURL(uploadedFile);// eslint-disable-next-line
reader.onload=function(e){var uploadedFileUrl=e.currentTarget.result;_this.pdfViewer.uploadedFile=uploadedFileUrl;_this.pdfViewerBase.clear(true);_this.pdfViewerBase.showLoadingIndicator(true);if(!_this.pdfViewerBase.isWebAssembly){_this.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",uploadedFileUrl,true);}else{_this.pdfViewer._dotnetInstance.invokeMethodAsync("ClientSideDocumentLoaded",true);}};}}};this.navigateToPage=function(args){if(args.which===13){// eslint-disable-next-line
var enteredValue=parseInt(_this.currentPageBoxElement.value);if(enteredValue!==null){if(enteredValue>0&&enteredValue<=_this.pdfViewerBase.pageCount){if(_this.pdfViewer.navigationModule){_this.pdfViewer.navigationModule.goToPage(enteredValue);}}else{_this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);}}else{_this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);}_this.currentPageBoxElement.blur();_this.pdfViewerBase.focusViewerContainer();}};this.textBoxFocusOut=function(){// eslint-disable-next-line
if(_this.currentPageBox.value===null||_this.currentPageBox.value>=_this.pdfViewerBase.pageCount||_this.currentPageBox.value!==_this.pdfViewerBase.currentPageNumber){_this.updateCurrentPage(_this.pdfViewerBase.currentPageNumber);}};this.pdfViewer=viewer;this.pdfViewerBase=viewerBase;}/**
     * @param width
     * @private
     */Toolbar$$1.prototype.intializeToolbar=function(width){var toolbarDiv;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){toolbarDiv=this.pdfViewer.element.querySelector('.e-pv-toolbar');this.toolbarElement=toolbarDiv;}// eslint-disable-next-line
var isIE=!!document.documentMode;if(isIE){this.pdfViewerBase.blazorUIAdaptor.totalPageElement.classList.add('e-pv-total-page-ms');}this.createFileElement(toolbarDiv);this.wireEvent();if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.initialEnableItems();this.pdfViewerBase.navigationPane.adjustPane();if(this.pdfViewer.enableToolbar){this.bindOpenIconEvent();}}if(document.getElementById(this.pdfViewer.dataId+'_handTool')){this.PanElement=document.getElementById(this.pdfViewer.dataId+'_handTool').children[0];this.PanElement.classList.add('e-pv-tbar-btn');var panSpanElement=this.PanElement.childNodes[0];panSpanElement.classList.remove('e-icons','e-btn-icon');}if(document.getElementById(this.pdfViewer.dataId+'_selectTool')){this.SelectToolElement=document.getElementById(this.pdfViewer.dataId+'_selectTool').children[0];this.SelectToolElement.classList.add('e-pv-tbar-btn');var selectSpanElement=this.SelectToolElement.childNodes[0];selectSpanElement.classList.remove('e-icons','e-btn-icon');}if(document.getElementById(this.pdfViewer.dataId+'_comment')){this.CommentElement=document.getElementById(this.pdfViewer.dataId+'_comment').children[0];this.CommentElement.classList.add('e-pv-tbar-btn');var commentSpanElement=this.CommentElement.childNodes[0];commentSpanElement.classList.remove('e-icons','e-btn-icon');}this.annotationToolbarModule=new AnnotationToolbar(this.pdfViewer,this.pdfViewerBase,this);if(this.pdfViewer.enableAnnotationToolbar){this.annotationToolbarModule.afterAnnotationToolbarCreationInBlazor();}return toolbarDiv;};Toolbar$$1.prototype.bindOpenIconEvent=function(){var openElement=document.getElementById(this.pdfViewer.dataId+'_open');openElement.children[0].classList.add('e-pv-tbar-btn');var openSpanElement=openElement.childNodes[0].childNodes[0];openSpanElement.classList.remove('e-icons','e-btn-icon');if(openElement){openElement.addEventListener('click',this.openFileDialogBox.bind(this));}};/**
     * Shows /hides the toolbar in the PdfViewer
     *
     * @param  {boolean} enableToolbar - If set true , its show the Toolbar
     * @returns void
     */Toolbar$$1.prototype.showToolbar=function(enableToolbar){var toolbar=this.toolbarElement;if(enableToolbar){if(toolbar){toolbar.style.display='block';}}else{this.pdfViewerBase.toolbarHeight=0;if(enableToolbar){if(sf.base.Browser.isDevice&&this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar){this.annotationToolbarModule.toolbarCreated=false;this.annotationToolbarModule.adjustMobileViewer();this.pdfViewer.toolbarModule.annotationToolbarModule.toolbar.element.style.display='none';}if(sf.base.Browser.isDevice&&this.annotationToolbarModule.propertyToolbar){this.annotationToolbarModule.propertyToolbar.element.style.display='none';}}toolbar.style.display='none';}};/**
     * Shows/hides the Navigation toolbar in the PdfViewer
     *
     * @param  {boolean} enableNavigationToolbar - If set true , its show the Navigation Toolbar
     * @returns void
     */Toolbar$$1.prototype.showNavigationToolbar=function(enableNavigationToolbar){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){var navigationToolbar=this.pdfViewerBase.navigationPane.sideBarToolbar;var navigationToolbarSplitter=this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;if(enableNavigationToolbar){navigationToolbar.style.display='block';navigationToolbarSplitter.style.display='block';if(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen){this.pdfViewerBase.navigationPane.clear();}}else{navigationToolbar.style.display='none';navigationToolbarSplitter.style.display='none';if(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen){this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();}}}};Toolbar$$1.prototype.updateMeasureAnnotation=function(){if(this.pdfViewerBase.tool&&this.pdfViewerBase.eventArgs){this.pdfViewerBase.getMouseEventArgs(this.pdfViewerBase.currentPosition,this.pdfViewerBase.eventArgs,this.pdfViewerBase.annotationEvent);this.pdfViewerBase.tool.mouseLeave(this.pdfViewerBase.eventArgs);}this.addInkAnnotation();this.pdfViewer.inkAnnotationSettings.opacity=1;this.pdfViewer.inkAnnotationSettings.thickness=1;this.pdfViewer.inkAnnotationSettings.strokeColor="#ff0000";};Toolbar$$1.prototype.newInkAnnotation=function(){this.addInkAnnotation();this.pdfViewer.inkAnnotationSettings.opacity=this.annotationToolbarModule.inkOpacityValue;this.pdfViewer.inkAnnotationSettings.thickness=this.annotationToolbarModule.inkThicknessValue;this.annotationToolbarModule.addInkAnnotation();};/**
     * Shows /hides the the toolbar items in the PdfViewer
     *
     * @param  {string[]} items - Defines the toolbar items in the toolbar
     * @param  {boolean} isVisible - If set true, then its show the toolbar Items
     * @returns void
     */Toolbar$$1.prototype.showToolbarItem=function(items,isVisible){for(var i=0;i<items.length;i++){switch(items[i]){case'OpenOption':this.showOpenOption(isVisible);break;case'PageNavigationTool':this.showPageNavigationTool(isVisible);break;case'MagnificationTool':this.showMagnificationTool(isVisible);break;case'SelectionTool':this.showSelectionTool(isVisible);break;case'PanTool':this.showScrollingTool(isVisible);break;case'DownloadOption':this.showDownloadOption(isVisible);break;case'PrintOption':this.showPrintOption(isVisible);break;case'SearchOption':this.showSearchOption(isVisible);break;case'UndoRedoTool':this.showUndoRedoTool(isVisible);break;case'AnnotationEditTool':this.showAnnotationEditTool(isVisible);break;case'CommentTool':this.showCommentOption(isVisible);break;case'SubmitForm':this.showSubmitForm(isVisible);break;}}this.applyHideToToolbar(true,1,1);this.applyHideToToolbar(true,8,8);this.applyHideToToolbar(true,12,12);this.applyHideToToolbar(true,15,15);this.showSeparator(items);};/**
     * Enables /disables the the toolbar items in the PdfViewer
     *
     * @param  {string[]} items - Defines the toolbar items in the toolbar
     * @param  {boolean} isEnable - If set true, then its Enable the toolbar Items
     * @returns void
     */Toolbar$$1.prototype.enableToolbarItem=function(items,isEnable){for(var i=0;i<items.length;i++){switch(items[i]){case'OpenOption':this.enableOpenOption(isEnable);break;case'PageNavigationTool':this.isPageNavigationToolDisabled=isEnable;this.enablePageNavigationTool(isEnable);break;case'MagnificationTool':this.isMagnificationToolDisabled=isEnable;this.enableMagnificationTool(isEnable);break;case'SelectionTool':this.isSelectionToolDisabled=isEnable;this.enableSelectionTool(isEnable);break;case'PanTool':this.isScrollingToolDisabled=isEnable;this.enableScrollingTool(isEnable);break;case'DownloadOption':this.enableDownloadOption(isEnable);break;case'PrintOption':this.enablePrintOption(isEnable);break;case'SearchOption':this.enableSearchOption(isEnable);break;case'UndoRedoTool':this.enableUndoRedoTool(isEnable);break;case'AnnotationEditTool':this.enableAnnotationEditTool(isEnable);break;case'CommentTool':this.enableCommentsTool(isEnable);break;}}};Toolbar$$1.prototype.showOpenOption=function(enableOpenOption){this.isOpenBtnVisible=enableOpenOption;this.applyHideToToolbar(enableOpenOption,0,0);};Toolbar$$1.prototype.showPageNavigationTool=function(enablePageNavigationTool){this.isNavigationToolVisible=enablePageNavigationTool;this.applyHideToToolbar(enablePageNavigationTool,2,7);};Toolbar$$1.prototype.showMagnificationTool=function(enableMagnificationTool){this.isMagnificationToolVisible=enableMagnificationTool;this.applyHideToToolbar(enableMagnificationTool,9,11);};Toolbar$$1.prototype.showSelectionTool=function(enableSelectionTool){this.isSelectionBtnVisible=enableSelectionTool;this.applyHideToToolbar(enableSelectionTool,13,13);};Toolbar$$1.prototype.showScrollingTool=function(enableScrollingTool){this.isScrollingBtnVisible=enableScrollingTool;this.applyHideToToolbar(enableScrollingTool,14,14);};Toolbar$$1.prototype.showDownloadOption=function(enableDownloadOption){this.isDownloadBtnVisible=enableDownloadOption;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.applyHideToToolbar(enableDownloadOption,26,26);}else{this.applyHideToToolbar(enableDownloadOption,5,5);}};Toolbar$$1.prototype.showPrintOption=function(enablePrintOption){this.isPrintBtnVisible=enablePrintOption;this.applyHideToToolbar(enablePrintOption,25,25);};Toolbar$$1.prototype.showSearchOption=function(enableSearchOption){this.isSearchBtnVisible=enableSearchOption;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.applyHideToToolbar(enableSearchOption,22,22);}else{this.applyHideToToolbar(enableSearchOption,5,5);}};Toolbar$$1.prototype.showUndoRedoTool=function(isEnable){this.isUndoRedoBtnsVisible=isEnable;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.applyHideToToolbar(isEnable,16,17);}else{this.applyHideToToolbar(isEnable,2,3);}};Toolbar$$1.prototype.showCommentOption=function(isEnable){if(!this.pdfViewer.enableStickyNotesAnnotation){this.isCommentBtnVisible=isEnable;this.applyHideToToolbar(this.pdfViewer.enableStickyNotesAnnotation,18,19);}else{this.isCommentBtnVisible=isEnable;this.applyHideToToolbar(isEnable,18,19);}};Toolbar$$1.prototype.showAnnotationEditTool=function(isEnable){this.isAnnotationEditBtnVisible=isEnable;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.applyHideToToolbar(isEnable,23,23);}else{this.applyHideToToolbar(isEnable,4,4);}};Toolbar$$1.prototype.showSubmitForm=function(isEnable){this.isSubmitbtnvisible=isEnable;this.applyHideToToolbar(isEnable,20,21);};Toolbar$$1.prototype.enableOpenOption=function(enableOpenOption){this.toolbar.enableItems(this.openDocumentItem.parentElement,enableOpenOption);};Toolbar$$1.prototype.enablePageNavigationTool=function(enablePageNavigationTool){this.toolbar.enableItems(this.firstPageItem.parentElement,enablePageNavigationTool);this.toolbar.enableItems(this.previousPageItem.parentElement,enablePageNavigationTool);this.toolbar.enableItems(this.nextPageItem.parentElement,enablePageNavigationTool);this.toolbar.enableItems(this.lastPageItem.parentElement,enablePageNavigationTool);this.currentPageBox.readonly=!enablePageNavigationTool;};Toolbar$$1.prototype.enableMagnificationTool=function(enableMagnificationTool){this.toolbar.enableItems(this.zoomInItem.parentElement,enableMagnificationTool);this.toolbar.enableItems(this.zoomOutItem.parentElement,enableMagnificationTool);this.zoomDropDown.readonly=!enableMagnificationTool;};Toolbar$$1.prototype.enableSelectionTool=function(enableSelectionTool){this.toolbar.enableItems(this.textSelectItem.parentElement,enableSelectionTool);};Toolbar$$1.prototype.enableScrollingTool=function(enableScrollingTool){this.toolbar.enableItems(this.panItem.parentElement,enableScrollingTool);};Toolbar$$1.prototype.enableDownloadOption=function(enableDownloadOption){this.toolbar.enableItems(this.downloadItem.parentElement,enableDownloadOption);};Toolbar$$1.prototype.enablePrintOption=function(enablePrintOption){this.toolbar.enableItems(this.printItem.parentElement,enablePrintOption);};Toolbar$$1.prototype.enableSearchOption=function(enableSearchOption){this.toolbar.enableItems(this.textSearchItem.parentElement,enableSearchOption);};Toolbar$$1.prototype.enableUndoRedoTool=function(isEnable){this.toolbar.enableItems(this.undoItem.parentElement,isEnable);this.toolbar.enableItems(this.redoItem.parentElement,isEnable);};Toolbar$$1.prototype.enableAnnotationEditTool=function(isEnable){this.toolbar.enableItems(this.annotationItem.parentElement,isEnable);};Toolbar$$1.prototype.enableCommentsTool=function(isEnable){if(this.pdfViewer.enableStickyNotesAnnotation){this.toolbar.enableItems(this.annotationItem.parentElement,isEnable);}};/**
     * @private
     */Toolbar$$1.prototype.resetToolbar=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.currentPageBox.min=0;this.currentPageBox.value=0;this.updateTotalPage();this.updateToolbarItems();if(this.annotationToolbarModule){if(this.annotationToolbarModule.propertyToolbar){this.annotationToolbarModule.propertyToolbar.destroy();}// eslint:disable-next-line
var commentsContainer=document.getElementById(this.pdfViewer.dataId+'_commentscontentcontainer');if(commentsContainer){commentsContainer.innerHTML='';}}}};/**
     * @private
     */Toolbar$$1.prototype.updateToolbarItems=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(this.toolbar){if(this.pdfViewerBase.pageCount===0){this.toolbar.enableItems(this.downloadItem.parentElement,false);this.toolbar.enableItems(this.printItem.parentElement,false);this.toolbar.enableItems(this.commentItem.parentElement,false);this.updateUndoRedoButtons();this.updateNavigationButtons();this.toolbar.enableItems(this.zoomInItem.parentElement,false);this.toolbar.enableItems(this.zoomOutItem.parentElement,false);if(this.pdfViewer.magnificationModule){this.zoomDropDown.readonly=true;}this.toolbar.enableItems(this.submitItem.parentElement,false);this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'),false);this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'),false);this.toolbar.enableItems(this.textSelectItem.parentElement,false);this.toolbar.enableItems(this.annotationItem.parentElement,false);this.toolbar.enableItems(this.panItem.parentElement,false);this.toolbar.enableItems(this.textSearchItem.parentElement,false);this.deSelectItem(this.annotationItem);if(this.annotationToolbarModule){this.annotationToolbarModule.resetToolbar();}}else if(this.pdfViewerBase.pageCount>0){this.toolbar.enableItems(this.downloadItem.parentElement,true);this.toolbar.enableItems(this.printItem.parentElement,true);this.toolbar.enableItems(this.pdfViewerBase.getElement('_currentPageInputContainer'),true);this.toolbar.enableItems(this.pdfViewerBase.getElement('_zoomDropDownContainer'),true);this.updateUndoRedoButtons();this.updateNavigationButtons();this.updateZoomButtons();if(this.pdfViewer.magnificationModule){this.zoomDropDown.readonly=false;}this.updateInteractionItems();// modify this condition if new annotation types are added.
if(this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation){this.toolbar.enableItems(this.annotationItem.parentElement,true);}if(this.pdfViewer.textSearchModule&&this.pdfViewer.enableTextSearch){this.toolbar.enableItems(this.textSearchItem.parentElement,true);}if(this.pdfViewer.annotationModule&&this.pdfViewer.enableStickyNotesAnnotation){this.toolbar.enableItems(this.commentItem.parentElement,true);}}if(this.pdfViewer.toolbarSettings.annotationToolbarItems){// eslint-disable-next-line max-len
if(this.pdfViewer.toolbarSettings.annotationToolbarItems.length===0||!this.pdfViewer.annotationModule||!this.pdfViewer.enableAnnotationToolbar){this.enableToolbarItem(['AnnotationEditTool'],false);}}if(!this.pdfViewer.enableDownload){this.enableDownloadOption(false);}if(!this.pdfViewer.enablePrint){this.enablePrintOption(false);}}}else{if(this.pdfViewerBase.pageCount===0){this.toolbar.enableItems(this.textSearchItem.parentElement,false);this.toolbar.enableItems(this.moreOptionItem.parentElement,false);this.toolbar.enableItems(this.annotationItem.parentElement,false);}else if(this.pdfViewerBase.pageCount>0){this.toolbar.enableItems(this.textSearchItem.parentElement,true);this.toolbar.enableItems(this.moreOptionItem.parentElement,true);if(this.pdfViewer.annotationModule&&this.pdfViewer.enableAnnotation){this.toolbar.enableItems(this.annotationItem.parentElement,true);}if(!this.pdfViewer.annotationModule||!this.pdfViewer.enableAnnotationToolbar){this.enableToolbarItem(['AnnotationEditTool'],false);}this.updateUndoRedoButtons();}}this.pdfViewer.viewerBase.blazorUIAdaptor.canUndoRedo();};/**
     * @private
     */Toolbar$$1.prototype.updateNavigationButtons=function(){if(this.pdfViewer.navigationModule&&!this.isPageNavigationToolDisabled){if(this.pdfViewerBase.pageCount===0||this.pdfViewerBase.currentPageNumber===1&&this.pdfViewerBase.pageCount===1){this.toolbar.enableItems(this.firstPageItem.parentElement,false);this.toolbar.enableItems(this.previousPageItem.parentElement,false);this.toolbar.enableItems(this.nextPageItem.parentElement,false);this.toolbar.enableItems(this.lastPageItem.parentElement,false);}else if(this.pdfViewerBase.currentPageNumber===1&&this.pdfViewerBase.pageCount>0){this.toolbar.enableItems(this.firstPageItem.parentElement,false);this.toolbar.enableItems(this.previousPageItem.parentElement,false);this.toolbar.enableItems(this.nextPageItem.parentElement,true);this.toolbar.enableItems(this.lastPageItem.parentElement,true);}else if(this.pdfViewerBase.currentPageNumber===this.pdfViewerBase.pageCount&&this.pdfViewerBase.pageCount>0){this.toolbar.enableItems(this.firstPageItem.parentElement,true);this.toolbar.enableItems(this.previousPageItem.parentElement,true);this.toolbar.enableItems(this.nextPageItem.parentElement,false);this.toolbar.enableItems(this.lastPageItem.parentElement,false);}else if(this.pdfViewerBase.currentPageNumber>1&&this.pdfViewerBase.currentPageNumber<this.pdfViewerBase.pageCount){this.toolbar.enableItems(this.firstPageItem.parentElement,true);this.toolbar.enableItems(this.previousPageItem.parentElement,true);this.toolbar.enableItems(this.nextPageItem.parentElement,true);this.toolbar.enableItems(this.lastPageItem.parentElement,true);}}else{this.toolbar.enableItems(this.firstPageItem.parentElement,false);this.toolbar.enableItems(this.previousPageItem.parentElement,false);this.toolbar.enableItems(this.nextPageItem.parentElement,false);this.toolbar.enableItems(this.lastPageItem.parentElement,false);this.currentPageBox.readonly=true;}};/**
     * @private
     */Toolbar$$1.prototype.updateZoomButtons=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.magnificationModule&&!this.isMagnificationToolDisabled&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){if(this.pdfViewer.magnificationModule.zoomFactor<=0.1){this.toolbar.enableItems(this.zoomInItem.parentElement,true);this.toolbar.enableItems(this.zoomOutItem.parentElement,false);}else if(this.pdfViewer.magnificationModule.zoomFactor>=4){this.toolbar.enableItems(this.zoomInItem.parentElement,false);this.toolbar.enableItems(this.zoomOutItem.parentElement,true);}else{this.toolbar.enableItems(this.zoomInItem.parentElement,true);this.toolbar.enableItems(this.zoomOutItem.parentElement,true);}}};/**
     * @private
     */Toolbar$$1.prototype.updateUndoRedoButtons=function(){if(this.pdfViewer.annotationModule){if(this.pdfViewerBase.pageCount>0){this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.actionCollection,'undo');this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.redoCollection,'redo');}else{//this.pdfViewer._dotnetInstance.invokeMethodAsync('DisableUndoRedoButton', null);
this.pdfViewerBase.blazorUIAdaptor.disableUndoRedoButton();}}else{//this.pdfViewer._dotnetInstance.invokeMethodAsync('DisableUndoRedoButton', null);
this.pdfViewerBase.blazorUIAdaptor.disableUndoRedoButton();}};// eslint-disable-next-line
Toolbar$$1.prototype.enableCollectionAvailableInBlazor=function(collection,item){if(collection.length>0){//this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateUndoRedoButton', item, true);
this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(item,true);}else{// this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateUndoRedoButton', item, false);
this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(item,false);}};/**
     * @param pageIndex
     * @private
     */Toolbar$$1.prototype.updateCurrentPage=function(pageIndex){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){//this.pdfViewer._dotnetInstance.invokeMethodAsync('OnPageChanged', pageIndex);
this.pdfViewerBase.blazorUIAdaptor.pageChanged(pageIndex);this.pdfViewerBase.currentPageNumber=pageIndex;this.pdfViewer.currentPageNumber=pageIndex;}else{this.pdfViewerBase.mobileSpanContainer.innerHTML=pageIndex.toString();this.pdfViewerBase.mobilecurrentPageContainer.innerHTML=pageIndex.toString();}};/**
     * @private
     */Toolbar$$1.prototype.updateTotalPage=function(){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(this.pdfViewerBase.pageCount>0){this.currentPageBox.min=1;}this.totalPageItem.textContent=this.pdfViewer.localeObj.getConstant('of')+this.pdfViewerBase.pageCount.toString();}};/**
     * @param event
     * @private
     */Toolbar$$1.prototype.openFileDialogBox=function(event){event.preventDefault();this.fileInputElement.click();};Toolbar$$1.prototype.createMoreOption=function(idString){var _this=this;this.moreOptionItem=document.getElementById(idString);var items=[{text:this.pdfViewer.localeObj.getConstant('Download'),id:this.pdfViewer.dataId+'_menu_download',iconCss:'e-icons e-pv-download-document-icon e-pv-icon'},{text:this.pdfViewer.localeObj.getConstant('Bookmarks'),id:this.pdfViewer.dataId+'_menu_bookmarks',iconCss:'e-icons e-pv-bookmark-icon e-pv-icon'}];this.moreDropDown=new sf.splitbuttons.DropDownButton({items:items,iconCss:'e-pv-more-icon e-pv-icon',cssClass:'e-caret-hide',open:function open(args){var dropdownButtonPosition=_this.moreDropDown.element.getBoundingClientRect();// eslint-disable-next-line max-len
if(!_this.pdfViewer.enableRtl){args.element.parentElement.style.left=dropdownButtonPosition.left+dropdownButtonPosition.width-args.element.parentElement.offsetWidth+'px';}},select:function select(args){switch(args.item.id){case _this.pdfViewer.dataId+'_menu_download':_this.pdfViewerBase.download();break;case _this.pdfViewer.dataId+'_menu_bookmarks':_this.showToolbar(false);_this.pdfViewerBase.navigationPane.createNavigationPaneMobile('bookmarks');break;default:break;}},beforeItemRender:function beforeItemRender(args){if(args.item.id===_this.pdfViewer.dataId+'_menu_bookmarks'){if(!_this.pdfViewer.bookmarkViewModule||!_this.pdfViewer.bookmarkViewModule.bookmarks){args.element.classList.add('e-disabled');}else{args.element.classList.remove('e-disabled');}}},close:function close(args){_this.moreOptionItem.blur();_this.pdfViewerBase.focusViewerContainer();}});this.moreDropDown.appendTo('#'+idString);};Toolbar$$1.prototype.createFileElement=function(toolbarElement){if(toolbarElement){this.fileInputElement=this.pdfViewer.element.querySelector('.e-pv-fileupload-element');if(toolbarElement){toolbarElement.appendChild(this.fileInputElement);}}};Toolbar$$1.prototype.wireEvent=function(){if(this.fileInputElement){this.fileInputElement.addEventListener('change',this.loadDocument);}};Toolbar$$1.prototype.unWireEvent=function(){if(this.fileInputElement){this.fileInputElement.removeEventListener('change',this.loadDocument);}};/**
     * @param viewerWidth
     * @private
     */Toolbar$$1.prototype.onToolbarResize=function(viewerWidth){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.navigationPane.toolbarResize();}else{this.toolbar.refreshOverflow();}};Toolbar$$1.prototype.toolbarOnMouseup=function(event){if(event.target===this.itemsContainer||event.target===this.toolbarElement){this.pdfViewerBase.focusViewerContainer();}};Toolbar$$1.prototype.applyHideToToolbar=function(show,startIndex,endIndex){var isHide=!show;for(var index=startIndex;index<=endIndex;index++){if(this.toolbar.items[index]){var className=this.toolbar.items[index].cssClass;if(className&&className!==''){// Querying the toolbar item
var element=this.toolbar.element.querySelector('.'+className);if(element){this.toolbar.hideItem(element,isHide);}}else{this.toolbar.hideItem(index,isHide);}}}};Toolbar$$1.prototype.handleOpenIconClick=function(args){this.fileInputElement.click();if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.focusViewerContainer();}};// eslint-disable-next-line
Toolbar$$1.prototype.handleToolbarBtnClick=function(args){this.addInkAnnotation();this.deSelectCommentAnnotation();switch(args.originalEvent.target.id){case this.pdfViewer.dataId+'_open':case this.pdfViewer.dataId+'_openIcon':case this.pdfViewer.dataId+'_openText':this.handleOpenIconClick(args);break;case this.pdfViewer.dataId+'_download':case this.pdfViewer.dataId+'_downloadIcon':case this.pdfViewer.dataId+'_downloadText':this.pdfViewerBase.download();break;case this.pdfViewer.dataId+'_print':case this.pdfViewer.dataId+'_printIcon':case this.pdfViewer.dataId+'_printText':if(this.pdfViewer.printModule){this.pdfViewer.firePrintStart();}break;case this.pdfViewer.dataId+'_undo':case this.pdfViewer.dataId+'_undoIcon':case this.pdfViewer.dataId+'_undoText':if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.undo();}break;case this.pdfViewer.dataId+'_redo':case this.pdfViewer.dataId+'_redoIcon':case this.pdfViewer.dataId+'_redoText':if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.redo();}break;case this.pdfViewer.dataId+'_firstPage':case this.pdfViewer.dataId+'_firstPageIcon':case this.pdfViewer.dataId+'_firstPageText':if(this.pdfViewer.navigationModule){this.pdfViewer.navigationModule.goToFirstPage();}break;case this.pdfViewer.dataId+'_previousPage':case this.pdfViewer.dataId+'_previousPageIcon':case this.pdfViewer.dataId+'_previousPageText':if(this.pdfViewer.navigationModule){this.pdfViewer.navigationModule.goToPreviousPage();}break;case this.pdfViewer.dataId+'_nextPage':case this.pdfViewer.dataId+'_nextPageIcon':case this.pdfViewer.dataId+'_nextPageText':if(this.pdfViewer.navigationModule){this.pdfViewer.navigationModule.goToNextPage();}break;case this.pdfViewer.dataId+'_lastPage':case this.pdfViewer.dataId+'_lastPageIcon':case this.pdfViewer.dataId+'_lastPageText':if(this.pdfViewer.navigationModule){this.pdfViewer.navigationModule.goToLastPage();}break;case this.pdfViewer.dataId+'_zoomIn':case this.pdfViewer.dataId+'_zoomInIcon':case this.pdfViewer.dataId+'_zoomInText':this.pdfViewer.magnificationModule.zoomIn();break;case this.pdfViewer.dataId+'_zoomOut':case this.pdfViewer.dataId+'_zoomOutIcon':case this.pdfViewer.dataId+'_zoomOutText':this.pdfViewer.magnificationModule.zoomOut();break;case this.pdfViewer.dataId+'_selectTool':case this.pdfViewer.dataId+'_selectToolIcon':case this.pdfViewer.dataId+'_selectToolText':if(!this.isSelectionToolDisabled){this.pdfViewerBase.initiateTextSelectMode();this.updateInteractionTools(true);}break;case this.pdfViewer.dataId+'_handTool':case this.pdfViewer.dataId+'_handToolIcon':case this.pdfViewer.dataId+'_handToolText':if(!(this.isScrollingToolDisabled||this.getStampMode())){this.pdfViewerBase.initiatePanning();this.updateInteractionTools(false);}break;case this.pdfViewer.dataId+'_search':case this.pdfViewer.dataId+'_searchIcon':case this.pdfViewer.dataId+'_searchText':this.textSearchButtonHandler();break;case this.pdfViewer.dataId+'_comment':case this.pdfViewer.dataId+'_commentIcon':this.pdfViewerBase.isAddComment=true;this.pdfViewerBase.isCommentIconAdded=true;this.pdfViewer.annotation.triggerAnnotationUnselectEvent();this.addComments(args.originalEvent.target);break;case this.pdfViewer.dataId+'_submitForm':case this.pdfViewer.dataId+'_submitFormSpan':this.pdfViewerBase.exportFormFields();break;}};Toolbar$$1.prototype.addInkAnnotation=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}if(this.annotationToolbarModule){this.pdfViewer.toolbar.annotationToolbarModule.deselectInkAnnotation();this.annotationToolbarModule.inkAnnotationSelected=false;}};Toolbar$$1.prototype.deSelectCommentAnnotation=function(){this.pdfViewer.toolbar.deSelectItem(this.CommentElement);this.pdfViewerBase.isCommentIconAdded=false;};/**
    * @private
    */ // eslint-disable-next-line
Toolbar$$1.prototype.addComments=function(targetElement){this.pdfViewerBase.isCommentIconAdded=true;this.pdfViewerBase.isAddComment=true;this.annotationToolbarModule.deselectAllItemsInBlazor();this.pdfViewer.annotation.triggerAnnotationUnselectEvent();var commentsButton=this.CommentElement;commentsButton.classList.add('e-pv-select');this.updateStampItems();document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+(this.pdfViewerBase.currentPageNumber-1)).addEventListener('mousedown',this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this));};Toolbar$$1.prototype.onZoomDropDownInput=function(event){if((event.which<48||event.which>57)&&event.which!==8&&event.which!==13){event.preventDefault();return false;}else{if(event.which===13){event.preventDefault();var value=this.zoomDropDown.element.value;this.zoomDropDownChange(value);}return true;}};Toolbar$$1.prototype.onZoomDropDownInputClick=function(){this.zoomDropDown.element.select();};Toolbar$$1.prototype.zoomPercentSelect=function(args){if(this.pdfViewerBase.pageCount>0){if(args.isInteracted){if(args.itemData){// eslint-disable-next-line @typescript-eslint/no-explicit-any
var zoomText=args.itemData.percent;this.zoomDropDownChange(zoomText);}}else{this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);}}};Toolbar$$1.prototype.zoomDropDownChange=function(zoomText){// eslint-disable-next-line max-len
if(zoomText!==this.pdfViewer.localeObj.getConstant('Fit Width')&&zoomText!==this.pdfViewer.localeObj.getConstant('Fit Page')&&zoomText!==this.pdfViewer.localeObj.getConstant('Automatic')){this.pdfViewer.magnificationModule.isAutoZoom=false;this.pdfViewer.magnificationModule.zoomTo(parseFloat(zoomText));this.updateZoomPercentage(this.pdfViewer.magnificationModule.zoomFactor);this.zoomDropDown.focusOut();}else if(zoomText===this.pdfViewer.localeObj.getConstant('Fit Width')){this.pdfViewer.magnificationModule.isAutoZoom=false;this.pdfViewer.magnificationModule.fitToWidth();this.zoomDropDown.focusOut();}else if(zoomText===this.pdfViewer.localeObj.getConstant('Fit Page')){this.pdfViewer.magnificationModule.fitToPage();this.zoomDropDown.focusOut();}else if(zoomText===this.pdfViewer.localeObj.getConstant('Fit Height')){this.pdfViewer.magnificationModule.fitToHeight();this.zoomDropDown.focusOut();}else if(zoomText===this.pdfViewer.localeObj.getConstant('Automatic')){this.pdfViewer.magnificationModule.isAutoZoom=true;this.pdfViewer.magnificationModule.fitToAuto();this.zoomDropDown.focusOut();}};/**
     * @param zoomFactor
     * @private
     */Toolbar$$1.prototype.updateZoomPercentage=function(zoomFactor){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){// eslint-disable-next-line radix
var currentPercent=parseInt((zoomFactor*100).toString())+'%';// eslint-disable-next-line
var blazorZoomDropDown=this.pdfViewerBase.getElement('_zoomDropDown');if(blazorZoomDropDown&&blazorZoomDropDown.children.length>0){blazorZoomDropDown.children[0].children[0].value=currentPercent;}}};Toolbar$$1.prototype.updateInteractionItems=function(){if(this.pdfViewer.textSelectionModule){if(this.pdfViewer.enableTextSelection){this.toolbar.enableItems(this.textSelectItem.parentElement,true);}else{this.toolbar.enableItems(this.textSelectItem.parentElement,false);}}else{this.toolbar.enableItems(this.textSelectItem.parentElement,false);}this.toolbar.enableItems(this.panItem.parentElement,true);if(this.pdfViewer.interactionMode==='TextSelection'&&this.pdfViewer.enableTextSelection){this.selectItem(this.textSelectItem);this.deSelectItem(this.panItem);}else{this.selectItem(this.panItem);this.deSelectItem(this.textSelectItem);this.pdfViewerBase.initiatePanning();}};/**
     * @private
     */Toolbar$$1.prototype.textSearchButtonHandler=function(iskeyboardClick){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(this.pdfViewer.textSearchModule&&this.pdfViewerBase.pageCount>0){this.isTextSearchBoxDisplayed=!this.isTextSearchBoxDisplayed;this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed);if(this.isTextSearchBoxDisplayed){// eslint-disable-next-line max-len
var searchInputElement=document.getElementById(this.pdfViewer.dataId+'_search_input');searchInputElement.select();searchInputElement.focus();}else{var searchItem=this.pdfViewerBase.getElement('_search');if(iskeyboardClick){searchItem.firstElementChild.focus();}else{searchItem.firstElementChild.blur();}}}}else{this.showToolbar(false);this.pdfViewerBase.navigationPane.createNavigationPaneMobile('search');}};/**
     * @private
     */Toolbar$$1.prototype.DisableInteractionTools=function(){this.deSelectItem(this.textSelectItem);this.deSelectItem(this.panItem);};/**
     * @param element
     * @private
     */Toolbar$$1.prototype.selectItem=function(element){if(element){element.classList.add('e-pv-select');}};/**
     * @param element
     * @private
     */Toolbar$$1.prototype.deSelectItem=function(element){if(element){element.classList.remove('e-pv-select');}};/**
     * @param isTextSelect
     * @private
     */Toolbar$$1.prototype.updateInteractionTools=function(isTextSelect){if(isTextSelect){this.selectItem(this.SelectToolElement);this.deSelectItem(this.PanElement);}else{this.selectItem(this.PanElement);this.deSelectItem(this.SelectToolElement);}};Toolbar$$1.prototype.initialEnableItems=function(){if(this.pdfViewer.enableToolbar){this.showToolbar(true);}else{this.showToolbar(false);}if(this.pdfViewer.enableNavigationToolbar){this.showNavigationToolbar(true);}else{this.showNavigationToolbar(false);}};Toolbar$$1.prototype.showSeparator=function(toolbarItems){// eslint-disable-next-line max-len
if(!this.isOpenBtnVisible||!this.isNavigationToolVisible&&!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible&&!this.isUndoRedoBtnsVisible){this.applyHideToToolbar(false,1,1);}if(!this.isNavigationToolVisible&&!this.isMagnificationToolVisible&&!this.isOpenBtnVisible||this.isOpenBtnVisible&&!this.isNavigationToolVisible||// eslint-disable-next-line max-len
!this.isOpenBtnVisible&&!this.isNavigationToolVisible||!this.isMagnificationToolVisible&&!this.isScrollingBtnVisible&&!this.isSelectionBtnVisible){this.applyHideToToolbar(false,8,8);}if(!this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||this.isMagnificationToolVisible&&!this.isSelectionBtnVisible&&!this.isScrollingBtnVisible||!this.isMagnificationToolVisible&&(this.isSelectionBtnVisible||this.isScrollingBtnVisible)){this.applyHideToToolbar(false,12,12);}if(!this.isMagnificationToolVisible&&!this.isNavigationToolVisible&&!this.isScrollingBtnVisible&&!this.isSelectionBtnVisible&&this.isUndoRedoBtnsVisible||!this.isUndoRedoBtnsVisible){this.applyHideToToolbar(false,15,15);}};Toolbar$$1.prototype.applyToolbarSettings=function(){var toolbarSettingsItems=this.pdfViewer.toolbarSettings.toolbarItems;if(toolbarSettingsItems){if(toolbarSettingsItems.indexOf('OpenOption')!==-1){this.showOpenOption(true);}else{this.showOpenOption(false);}if(toolbarSettingsItems.indexOf('PageNavigationTool')!==-1){this.showPageNavigationTool(true);}else{this.showPageNavigationTool(false);}if(toolbarSettingsItems.indexOf('MagnificationTool')!==-1){this.showMagnificationTool(true);}else{this.showMagnificationTool(false);}if(toolbarSettingsItems.indexOf('SelectionTool')!==-1){this.showSelectionTool(true);}else{this.showSelectionTool(false);}if(toolbarSettingsItems.indexOf('PanTool')!==-1){this.showScrollingTool(true);}else{this.showScrollingTool(false);}if(toolbarSettingsItems.indexOf('PrintOption')!==-1){this.showPrintOption(true);}else{this.showPrintOption(false);}if(toolbarSettingsItems.indexOf('DownloadOption')!==-1){this.showDownloadOption(true);}else{this.showDownloadOption(false);}if(toolbarSettingsItems.indexOf('SearchOption')!==-1){this.showSearchOption(true);}else{this.showSearchOption(false);}if(toolbarSettingsItems.indexOf('UndoRedoTool')!==-1){this.showUndoRedoTool(true);}else{this.showUndoRedoTool(false);}if(toolbarSettingsItems.indexOf('AnnotationEditTool')!==-1){this.showAnnotationEditTool(true);}else{this.showAnnotationEditTool(false);}if(toolbarSettingsItems.indexOf('CommentTool')!==-1){this.showCommentOption(true);}else{this.showCommentOption(false);}if(toolbarSettingsItems.indexOf('SubmitForm')!==-1){this.showSubmitForm(true);}else{this.showSubmitForm(false);}this.showSeparator(toolbarSettingsItems);}};Toolbar$$1.prototype.applyToolbarSettingsForMobile=function(){var toolbarSettingsItems=this.pdfViewer.toolbarSettings.toolbarItems;if(toolbarSettingsItems){if(toolbarSettingsItems.indexOf('OpenOption')!==-1){this.showOpenOption(true);}else{this.showOpenOption(false);}if(toolbarSettingsItems.indexOf('UndoRedoTool')!==-1){this.showUndoRedoTool(true);}else{this.showUndoRedoTool(false);}if(toolbarSettingsItems.indexOf('AnnotationEditTool')!==-1){this.showAnnotationEditTool(true);}else{this.showAnnotationEditTool(false);}if(toolbarSettingsItems.indexOf('SearchOption')!==-1){this.showSearchOption(true);}else{this.showSearchOption(false);}}};Toolbar$$1.prototype.getStampMode=function(){if(this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule){return this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode;}else{return false;}};// eslint-disable-next-line
Toolbar$$1.prototype.stampBeforeOpen=function(args){this.annotationToolbarModule.resetFreeTextAnnot();if(args.ParentItem.Text===''&&this.pdfViewer.customStampSettings.isAddToMenu&&args.Items.length>0){// eslint-disable-next-line
var currentElements=null;for(var i=0;i<args.Items.length;i++){if(args.Items[i].Text==='Custom Stamp'){args.Items[i].Items=[];currentElements=args.Items[i];break;}}// eslint-disable-next-line
var elements=this.pdfViewerBase.customStampCollection;// eslint-disable-next-line
var stampElements=this.pdfViewer.customStampSettings.customStamps;if(elements.length===0&&stampElements&&stampElements.length>0){for(var n=0;n<stampElements.length;n++){// eslint-disable-next-line max-len
elements.push({customStampName:stampElements[n].customStampName,customStampImageSource:stampElements[n].customStampImageSource});}}for(var m=0;m<elements.length;m++){if(currentElements!=null){currentElements.Items.push({text:elements[m].customStampName});}}}};// eslint-disable-next-line
Toolbar$$1.prototype.stampBeforeClose=function(args,showItemOnClick){// eslint-disable-next-line max-len
if(args.ParentItem&&args.ParentItem.Text!=='Custom Stamp'&&args.ParentItem.Text!=='Standard Business'&&args.ParentItem.Text!=='Dynamic'&&args.ParentItem.Text!=='Sign Here'||!args.ParentItem){showItemOnClick=true;}};/**
     * @private
     */ // eslint-disable-next-line
Toolbar$$1.prototype.updateStampItems=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot){if(this.pdfViewer.selectedItems.annotations[0]){this.pdfViewer.remove(this.pdfViewer.selectedItems.annotations[0]);this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1);this.pdfViewer.renderDrawing();this.pdfViewerBase.tool=null;}this.pdfViewerBase.isAlreadyAdded=false;this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot=false;}};// eslint-disable-next-line
Toolbar$$1.prototype.handleCustomStampClick=function(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var customStampElement_1=document.getElementById(this.pdfViewer.dataId+'_stampElement');var customStampValue=document.getElementById(this.pdfViewer.dataId+'_e-pv-custom-stamp');if(customStampElement_1!==null&&customStampValue!==null){var CustomStampClick=function CustomStampClick(){customStampElement_1.click();};customStampValue.addEventListener("click",CustomStampClick);}}};// eslint-disable-next-line
Toolbar$$1.prototype.stampSelect=function(args,stampParentID){this.pdfViewerBase.isAlreadyAdded=false;this.updateStampItems();if(args.Item.Text==='Custom Stamp'){this.annotationToolbarModule.checkStampAnnotations();this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;// eslint-disable-next-line
var stampImage=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_stampElement',attrs:{'type':'file'}});stampImage.setAttribute('accept','.jpg,.jpeg,.png');stampImage.style.position='absolute';stampImage.style.left='0px';stampImage.style.top='0px';stampImage.style.visibility='hidden';document.body.appendChild(stampImage);stampImage.click();stampImage.addEventListener('change',this.annotationToolbarModule.addStampImage);document.body.removeChild(stampImage);// eslint-disable-next-line max-len
}else if(stampParentID==='Custom Stamp'&&args.Item.Text!==''){// eslint-disable-next-line
var elements=this.pdfViewerBase.customStampCollection;for(var n=0;n<elements.length;n++){if(elements[n].customStampName===args.Item.Text){this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=args.Item.Text;this.annotationToolbarModule.checkStampAnnotations();this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;this.pdfViewerBase.stampAdded=true;this.pdfViewerBase.isAlreadyAdded=true;// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(elements[n].customStampImageSource);this.pdfViewerBase.stampAdded=false;}}// eslint-disable-next-line max-len
}else if(args.Item.Text!=='Dynamic'&&args.Item.Text!==''&&args.Item.Text!=='Standard Business'&&(stampParentID==='Sign Here'||args.Item.Text!=='Sign Here')){this.annotationToolbarModule.checkStampAnnotations();this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;this.pdfViewerBase.stampAdded=true;if(stampParentID==='Dynamic'){this.pdfViewerBase.isDynamicStamp=true;this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(args.Item.Text);}else{this.pdfViewerBase.isDynamicStamp=false;this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(args.Item.Text);}}};/**
     * @private
     */Toolbar$$1.prototype.getModuleName=function(){return'Toolbar';};// eslint-disable-next-line
Toolbar$$1.prototype.stampSelection=function(isResetFreetext,isStampSelect,args,stampParentID){if(isResetFreetext){this.annotationToolbarModule.resetFreeTextAnnot();}if(isStampSelect){this.stampSelect(args,stampParentID);}};// eslint-disable-next-line
Toolbar$$1.prototype.primaryToolbarClick=function(isAddInkAnnotation,isDeselectComment,isNavigationselect,navigationOption,isFocus,targetElement,isAnnotatioToolbarOpen,iskeyboardClickEvent){if(isAddInkAnnotation){this.addInkAnnotation();}if(isDeselectComment){this.deSelectCommentAnnotation();}if(isNavigationselect){switch(navigationOption){case"GoToNext":this.pdfViewer.navigationModule.goToNextPage();break;case"GoToPrevious":this.pdfViewer.navigationModule.goToPreviousPage();break;case"GoToFirst":this.pdfViewer.navigationModule.goToFirstPage();break;case"GoToLast":this.pdfViewer.navigationModule.goToLastPage();break;case"ZoomOut":this.pdfViewer.magnificationModule.zoomOut();break;case"ZoomIn":this.pdfViewer.magnificationModule.zoomIn();break;case"SelectTool":this.pdfViewerBase.initiateTextSelection();break;case"PanTool":this.pdfViewerBase.initiatePanning();break;case"Undo":this.pdfViewer.undo();break;case"Redo":this.pdfViewer.redo();break;case"SubmitForm":this.pdfViewer.exportFormFields(null);break;case"AddComments":this.addComments(targetElement);break;case"TextSearch":this.textSearchButtonHandler(iskeyboardClickEvent);break;case"EditAnnotation":this.pdfViewerBase.blazorUIAdaptor.showAnnotationToolbar(isAnnotatioToolbarOpen,iskeyboardClickEvent);break;case"PrintDocument":this.pdfViewer.firePrintStart();break;case"Download":this.pdfViewer.download();break;}}if(navigationOption=="AddComments"&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewer.annotationModule.ShowToastMessage('StickyNotes');}if(isFocus&&!iskeyboardClickEvent){this.pdfViewerBase.focusViewerContainer();}if(navigationOption==="EditAnnotation"&&iskeyboardClickEvent){var buttonElement=document.getElementById(this.pdfViewer.dataId+"_highLight");if(buttonElement&&buttonElement.children[0]){buttonElement.children[0].focus();}}};return Toolbar$$1;}();/* eslint-disable */ /**
 * @hidden
 */var AnnotationToolbar=/** @class */function(){function AnnotationToolbar(viewer,viewerBase,toolbar){var _this=this;this.toolbarBorderHeight=1;/**
         * @private
         */this.isToolbarHidden=false;/**
         * @private
         */this.isMobileAnnotEnabled=false;this.isHighlightEnabled=false;this.isUnderlineEnabled=false;this.isStrikethroughEnabled=false;this.isHighlightBtnVisible=true;this.isCommentBtnVisible=true;this.isUnderlineBtnVisible=true;this.isStrikethroughBtnVisible=true;this.isColorToolVisible=true;this.isOpacityToolVisible=true;this.isDeleteAnnotationToolVisible=true;this.isCurrentAnnotationOpacitySet=false;this.isStampBtnVisible=false;this.isShapeBtnVisible=false;this.isSignatureBtnVisible=false;this.isInkBtnVisible=false;this.isFontFamilyToolVisible=false;this.isFontSizeToolVisible=false;this.isFontAlignToolVisible=false;this.isFontColorToolVisible=false;this.isFontStylesToolVisible=false;this.isCommentPanelBtnVisible=false;this.isFreeTextBtnVisible=false;this.isCalibrateBtnVisible=false;this.isStrokeColorToolVisible=false;this.isThicknessToolVisible=false;this.stampMenu=[];this.stampParentID='';/**
         * @private
         */this.inkAnnotationSelected=false;/**
         * @private
         */this.openSignaturePopup=false;this.isSavedSignatureClicked=false;this.saveSignatureCount=0;this.saveInitialCount=0;/**
         * @private
         */this.isToolbarCreated=false;this.scrollerTimer=0;this.scrollInterval=null;this.inkThicknessValue=1;this.inkOpacityValue=100;// eslint-disable-next-line
this.addStampImage=function(args){// eslint-disable-next-line
var proxy=_this;// eslint-disable-next-line
var upoadedFiles=args.target.files;if(args.target.files[0]!==null){var uploadedFile=upoadedFiles[0];_this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=uploadedFile.name.split('.')[0];if(uploadedFile.type.split('/')[0]==='image'){var reader=new FileReader();// eslint-disable-next-line
reader.onload=function(e){var uploadedFileUrl=e.currentTarget.result;proxy.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=true;proxy.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=true;proxy.pdfViewerBase.stampAdded=true;_this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(uploadedFileUrl);proxy.pdfViewerBase.stampAdded=false;};reader.readAsDataURL(uploadedFile);}}args.target.value='';args.currentTarget.value='';};this.shapePopupOpened=function(){var element=document.getElementById('shapetool');element.focus();};this.calibratePopupOpened=function(){var element=document.getElementById('calibratetool');element.focus();};this.textAlignOpened=function(){var element=document.getElementById('textAligntool');if(element){element.setAttribute('tabindex','0');element.focus();}};this.fontStyleOpened=function(){var element=document.getElementById('textPropertytool');if(element){element.setAttribute('tabindex','0');element.focus();}};this.moreOptionFocus=function(){var element=document.getElementById(this.pdfViewer.dataId+"_annotation_more_icon");if(element){element.focus();}};this.pdfViewer=viewer;this.pdfViewerBase=viewerBase;this.primaryToolbar=toolbar;}/**
     * @private
     */AnnotationToolbar.prototype.adjustMobileViewer=function(){var toolbarHeight;if(this.toolbarElement){toolbarHeight=this.toolbarElement.clientHeight;}var isPrimaryTool=false;if(this.toolbarElement&&this.toolbarElement.children.length===0&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0){toolbarHeight=this.propertyToolbar.element.clientHeight;if(this.pdfViewer.toolbarModule.toolbarElement.style.display==='none'){this.pdfViewer.toolbarModule.toolbarElement.style.display='block';}}else if(this.freetextToolbarElement&&this.freetextToolbarElement.children.length>0){toolbarHeight=this.freetextToolbarElement.clientHeight;}else if(toolbarHeight===0&&this.pdfViewer.toolbarModule.toolbar){toolbarHeight=this.pdfViewer.toolbarModule.toolbarElement.clientHeight;isPrimaryTool=true;}else if(!toolbarHeight&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0){toolbarHeight=this.propertyToolbar.element.clientHeight;}if(this.pdfViewer.enableToolbar&&this.toolbarCreated){// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),toolbarHeight+toolbarHeight)+'px';}else{if(!isPrimaryTool){if(this.pdfViewerBase.viewerContainer.style.height.split('%').length>1){this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),-toolbarHeight)+'px';}else{this.pdfViewerBase.viewerContainer.style.height=this.resetViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),toolbarHeight)+'px';}}}};/**
     * @private
     */AnnotationToolbar.prototype.createCustomStampElement=function(){// eslint-disable-next-line
var stampImage=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_stampElement',attrs:{'type':'file'}});stampImage.setAttribute('accept','.jpg,.jpeg,.png');stampImage.style.position='absolute';stampImage.style.left='0px';stampImage.style.top='0px';stampImage.style.visibility='hidden';document.body.appendChild(stampImage);stampImage.addEventListener('change',this.addStampImage);};AnnotationToolbar.prototype.checkStampAnnotations=function(){// eslint-disable-next-line max-len
if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations){for(var i=0;i<this.pdfViewer.selectedItems.annotations.length;i++){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[i];// eslint-disable-next-line
if(annotation&&!annotation.annotName&&!annotation.author&&(annotation.shapeAnnotationType!=='Shape'||annotation.shapeAnnotationType!=='Image')){this.pdfViewer.remove(annotation);this.pdfViewer.annotation.renderAnnotations(annotation.pageIndex,null,null,null);this.pdfViewer.clearSelection(annotation.pageIndex);}}}};// eslint-disable-next-line
AnnotationToolbar.prototype.onFontColorChange=function(args){// eslint-disable-next-line
var currentColor=args;if(this.pdfViewer.selectedItems.annotations.length===1){this.pdfViewer.annotation.modifyFontColor(currentColor);}else{this.pdfViewer.freeTextSettings.fontColor=currentColor;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}this.fontColorElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');this.updateColorInIcon(this.fontColorElementInBlazor,currentColor);};// eslint-disable-next-line
AnnotationToolbar.prototype.onFontFamilyChange=function(args){var currentValue=args;if(this.pdfViewer.selectedItems.annotations.length===1&&currentValue){this.pdfViewer.annotation.modifyFontFamily(currentValue);}else{this.pdfViewer.freeTextSettings.fontFamily=currentValue;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}};// eslint-disable-next-line
AnnotationToolbar.prototype.onFontSizeChange=function(args){var currentValue=args;var fontSize=parseFloat(currentValue);if(this.pdfViewer.selectedItems.annotations.length===1&&currentValue){this.pdfViewer.annotation.modifyFontSize(fontSize);}else{this.pdfViewer.freeTextSettings.fontSize=fontSize;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}};// eslint-disable-next-line
AnnotationToolbar.prototype.onClickTextAlignment=function(args){var currentValue=args;if(this.pdfViewer.selectedItems.annotations.length===1&&currentValue){this.pdfViewer.annotation.modifyTextAlignment(currentValue);}else{this.pdfViewer.freeTextSettings.textAlignment=args.item.value;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}this.updateTextAlignInIcon(currentValue);};// eslint-disable-next-line
AnnotationToolbar.prototype.onClickTextProperties=function(args){var currentValue=args;if(this.pdfViewer.selectedItems.annotations.length===1&&currentValue){var fontInfo={isBold:undefined,isItalic:undefined,isStrikeout:undefined,isUnderline:undefined};if(currentValue==='bold'){fontInfo.isBold=!this.pdfViewer.selectedItems.annotations[0].font.isBold;}else if(currentValue==='italic'){fontInfo.isItalic=!this.pdfViewer.selectedItems.annotations[0].font.isItalic;}else if(currentValue==='underline'){fontInfo.isUnderline=!this.pdfViewer.selectedItems.annotations[0].font.isUnderline;}else if(currentValue==='strikeout'){fontInfo.isStrikeout=!this.pdfViewer.selectedItems.annotations[0].font.isStrikeout;}this.pdfViewer.annotation.modifyTextProperties(fontInfo,currentValue);}else{if(currentValue==='bold'){if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold){this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold=false;}else{this.pdfViewer.freeTextSettings.fontStyle=1;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}else if(currentValue==='italic'){if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic){this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic=false;}else{this.pdfViewer.freeTextSettings.fontStyle=2;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}else if(currentValue==='underline'){if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline){this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=false;}else{this.pdfViewer.freeTextSettings.fontStyle=4;this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=false;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}else if(currentValue==='strikeout'){if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough){this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=false;}else{this.pdfViewer.freeTextSettings.fontStyle=8;this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=false;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}}this.updateTextPropertySelection(currentValue);};// eslint-disable-next-line
AnnotationToolbar.prototype.opacityChange=function(args){this.pdfViewerBase.isOpacityChange=true;var opacityValue=1;if(args!==null&&args!==undefined){opacityValue=args;opacityValue=opacityValue/100;}if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,opacityValue);}else{switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case'Highlight':this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity=opacityValue;break;case'Underline':this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity=opacityValue;break;case'Strikethrough':this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity=opacityValue;break;}}}if(this.pdfViewer.selectedItems.annotations.length===1){// eslint-disable-next-line
var currentAnnotations=this.pdfViewer.selectedItems.annotations[0];// eslint-disable-next-line max-len
if(currentAnnotations!=null&&(currentAnnotations.shapeAnnotationType==='Stamp'||currentAnnotations.shapeAnnotationType==='Image')){var clonedObject=cloneObject(currentAnnotations);var redoClonedObject=cloneObject(currentAnnotations);redoClonedObject.opacity=opacityValue;this.pdfViewer.nodePropertyChange(currentAnnotations,{opacity:opacityValue});this.pdfViewer.annotation.triggerAnnotationPropChange(currentAnnotations,false,false,false,true);// eslint-disable-next-line max-len
this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex,null,this.pdfViewer.selectedItems.annotations[0],'stampOpacity','',clonedObject,redoClonedObject);// eslint-disable-next-line max-len
this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0],null,'opacity');}else{this.pdfViewer.annotation.modifyOpacity(opacityValue,true);}}else{if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity=opacityValue;break;case'Arrow':this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity=opacityValue;break;case'Rectangle':this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity=opacityValue;break;case'Circle':this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity=opacityValue;break;case'Polygon':this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity=opacityValue;break;}}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotation;var selectedItems=this.pdfViewer.selectedItems.annotations[0];if(annotationModule&&annotationModule.inkAnnotationModule&&selectedItems&&selectedItems.shapeAnnotationType==="Ink"){if(sf.base.Browser.isDevice){this.inkOpacityValue=opacityValue;}else{this.pdfViewer.inkAnnotationSettings.opacity=opacityValue;}}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.opacity=opacityValue;if(this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.opacity=opacityValue;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}}};AnnotationToolbar.prototype.calculateToolbarPosition=function(args){if(args.element&&args.element.parentElement){var leftValue=parseFloat(args.element.parentElement.style.left);var width=args.element.parentElement.offsetWidth;if(leftValue+width<this.pdfViewer.element.offsetWidth+10){args.element.parentElement.style.left=leftValue-width+'px';}}};// eslint-disable-next-line
AnnotationToolbar.prototype.thicknessChangeInBlazor=function(args){this.pdfViewerBase.isThicknessChange=true;if(this.pdfViewer.selectedItems.annotations.length===1){this.pdfViewer.annotation.modifyThickness(args);}else{this.ShapeThickness(args);}};// eslint-disable-next-line
AnnotationToolbar.prototype.ShapeThickness=function(args){if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.pdfViewer.annotation.shapeAnnotationModule.lineThickness=args;break;case'Arrow':this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness=args;break;case'Rectangle':this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness=args;break;case'Circle':this.pdfViewer.annotation.shapeAnnotationModule.circleThickness=args;break;case'Polygon':this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness=args;break;}// eslint-disable-next-line
var annotationModule_1=this.pdfViewer.annotation;if(annotationModule_1&&annotationModule_1.inkAnnotationModule){this.pdfViewer.inkAnnotationSettings.thickness=args.value;}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.thickness=args.value;}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.borderWidth=args.value;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotation;if(annotationModule&&annotationModule.inkAnnotationModule){if(sf.base.Browser.isDevice){this.inkThicknessValue=args;this.pdfViewer.inkAnnotationSettings.thickness=1;}else{this.pdfViewer.inkAnnotationSettings.thickness=args;}}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.thickness=args;}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.borderWidth=args;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}};// eslint-disable-next-line
AnnotationToolbar.prototype.onColorPickerChange=function(args){// eslint-disable-next-line
var currentColor=args;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(currentColor);}else{switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case'Highlight':this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=currentColor;break;case'Underline':this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=currentColor;break;case'Strikethrough':this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=currentColor;break;}}}if(this.pdfViewer.selectedItems.annotations.length===1){this.pdfViewer.annotation.modifyFillColor(currentColor);}else{if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor=currentColor;break;case'Arrow':this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor=currentColor;break;case'Rectangle':this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor=currentColor;break;case'Circle':this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor=currentColor;break;case'Polygon':this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor=currentColor;break;}}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.fillColor=currentColor;if(this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.fillColor=currentColor;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}}this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');this.updateColorInIcon(this.colorDropDownElementInBlazor,currentColor);};// eslint-disable-next-line
AnnotationToolbar.prototype.onStrokePickerChange=function(args){// eslint-disable-next-line
var currentColor=args;if(this.pdfViewer.selectedItems.annotations.length===1){this.pdfViewer.annotation.modifyStrokeColor(currentColor);}else{if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case'Line':this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor=currentColor;break;case'Arrow':this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor=currentColor;break;case'Rectangle':this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor=currentColor;break;case'Circle':this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor=currentColor;break;case'Polygon':this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor=currentColor;break;}}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotation;if(annotationModule&&annotationModule.inkAnnotationModule){this.pdfViewer.inkAnnotationSettings.strokeColor=currentColor;}if(this.pdfViewer.drawingObject){this.pdfViewer.drawingObject.strokeColor=currentColor;}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.shapeAnnotationType==='FreeText'){this.pdfViewer.freeTextSettings.borderColor=currentColor;this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties();}}this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');this.updateColorInIcon(this.strokeDropDownElementInBlazor,currentColor);};/**
     * @param element
     * @param color
     * @param element
     * @param color
     * @private
     */AnnotationToolbar.prototype.updateColorInIcon=function(element,color){if(element){element.children[0].style.borderBottomColor=color;}};/**
     * @param currentOption
     * @private
     */AnnotationToolbar.prototype.updateTextPropertySelection=function(currentOption){if(currentOption==='bold'){document.getElementById(this.pdfViewer.dataId+'_bold').classList.toggle('textprop-option-active');}else if(currentOption==='italic'){document.getElementById(this.pdfViewer.dataId+'_italic').classList.toggle('textprop-option-active');}else if(currentOption==='underline'){document.getElementById(this.pdfViewer.dataId+'_underline_textinput').classList.toggle('textprop-option-active');document.getElementById(this.pdfViewer.dataId+'_strikeout').classList.remove('textprop-option-active');}else if(currentOption==='strikeout'){document.getElementById(this.pdfViewer.dataId+'_strikeout').classList.toggle('textprop-option-active');document.getElementById(this.pdfViewer.dataId+'_underline_textinput').classList.remove('textprop-option-active');}};/**
     * @param family
     * @private
     */AnnotationToolbar.prototype.updateFontFamilyInIcon=function(family){this.fontFamily.value=family;};/**
     * @param align
     * @private
     */AnnotationToolbar.prototype.updateTextAlignInIcon=function(align){var className='e-btn-icon e-pv-left-align-icon e-pv-icon';var leftAlign=document.getElementById(this.pdfViewer.dataId+'_left_align');var rightAlign=document.getElementById(this.pdfViewer.dataId+'_right_align');var centerAlign=document.getElementById(this.pdfViewer.dataId+'_center_align');var justifyAlign=document.getElementById(this.pdfViewer.dataId+'_justify_align');if(align==='Left'){leftAlign.classList.add('textprop-option-active');}else if(align==='Right'){className='e-btn-icon e-pv-right-align-icon e-pv-icon';rightAlign.classList.add('textprop-option-active');}else if(align==='Center'){className='e-btn-icon e-pv-center-align-icon e-pv-icon';centerAlign.classList.add('textprop-option-active');}else if(align==='Justify'){className='e-btn-icon e-pv-justfiy-align-icon e-pv-icon';justifyAlign.classList.add('textprop-option-active');}document.getElementById(this.pdfViewer.dataId+'_annotation_textalign').children[0].className=className;};/**
     * @param size
     * @private
     */AnnotationToolbar.prototype.updateFontSizeInIcon=function(size){this.fontSize.value=size+'px';};AnnotationToolbar.prototype.addInkAnnotation=function(){this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewer.annotationModule.ShowToastMessage('Ink');}if(this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;if(currentPageNumber&&currentPageNumber!==''){// eslint-disable-next-line
this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));this.primaryToolbar.deSelectItem(this.InkAnnotationElement);this.pdfViewerBase.focusViewerContainer();}}if(!this.inkAnnotationSelected){this.deselectAllItemsInBlazor();this.drawInkAnnotation();}else{this.inkAnnotationSelected=false;}};/**
     * @private
     */AnnotationToolbar.prototype.deselectInkAnnotation=function(){this.primaryToolbar.deSelectItem(this.InkAnnotationElement);};AnnotationToolbar.prototype.drawInkAnnotation=function(){this.inkAnnotationSelected=true;this.primaryToolbar.selectItem(this.InkAnnotationElement);this.enableSignaturePropertiesTools(true);this.pdfViewerBase.isToolbarInkClicked=true;this.pdfViewer.annotationModule.inkAnnotationModule.drawInk();};AnnotationToolbar.prototype.resetFreeTextAnnot=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule){this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot=false;this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot=false;if(!sf.base.Browser.isDevice){this.primaryToolbar.deSelectItem(this.FreeTextElement);this.enableFreeTextAnnotationPropertiesTools(false);}}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;if(currentPageNumber&&currentPageNumber!==''){// eslint-disable-next-line
this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));this.primaryToolbar.deSelectItem(this.InkAnnotationElement);}}this.inkAnnotationSelected=false;};AnnotationToolbar.prototype.updateInkannotationItems=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule&&this.inkAnnotationSelected){// eslint-disable-next-line
var currentPageNumber=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;if(currentPageNumber&&currentPageNumber!==''){// eslint-disable-next-line
this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(currentPageNumber));this.pdfViewerBase.isToolbarInkClicked=true;this.pdfViewer.tool='Ink';this.pdfViewer.clearSelection(currentPageNumber);}}};AnnotationToolbar.prototype.updateFontFamily=function(){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.updateFontFamilyIcon('_bold',true):this.updateFontFamilyIcon('_bold',false);// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.updateFontFamilyIcon('_italic',true):this.updateFontFamilyIcon('_italic',false);if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline){this.updateFontFamilyIcon('_underline_textinput',true);this.updateFontFamilyIcon('_strikeout',false);}else{this.updateFontFamilyIcon('_underline_textinput',false);}if(this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough){this.updateFontFamilyIcon('_strikeout',true);this.updateFontFamilyIcon('_underline_textinput',false);}else{this.updateFontFamilyIcon('_strikeout',false);}};AnnotationToolbar.prototype.updateFontFamilyIcon=function(fontFamily,isActive){var fontFamilyElement=document.getElementById(this.pdfViewer.dataId+fontFamily);isActive?fontFamilyElement.classList.add('textprop-option-active'):fontFamilyElement.classList.remove('textprop-option-active');};// eslint-disable-next-line
AnnotationToolbar.prototype.enablePropertiesTool=function(annotationModule){this.isHighlightEnabled=false;this.isUnderlineEnabled=false;this.isStrikethroughEnabled=false;if(this.pdfViewerBase.isTextMarkupAnnotationModule()){annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;}this.primaryToolbar.deSelectItem(this.highlightItem);this.primaryToolbar.deSelectItem(this.underlineItem);this.primaryToolbar.deSelectItem(this.strikethroughItem);this.enableTextMarkupAnnotationPropertiesTools(true);// eslint-disable-next-line max-len
this.updateColorInIcon(this.colorDropDownElement,annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.color);this.selectAnnotationDeleteItem(true);};AnnotationToolbar.prototype.showSeparator=function(){if(!this.isHighlightBtnVisible&&!this.isUnderlineBtnVisible&&!this.isStrikethroughBtnVisible){this.applyHideToToolbar(false,3,3);}if(!this.isShapeBtnVisible){this.applyHideToToolbar(false,5,5);}if(!this.isCalibrateBtnVisible){this.applyHideToToolbar(false,7,7);}if(!this.isFreeTextBtnVisible){this.applyHideToToolbar(false,9,9);}if(!this.isStampBtnVisible){this.applyHideToToolbar(false,11,11);}if(!this.isSignatureBtnVisible){this.applyHideToToolbar(false,13,13);}if(!this.isInkBtnVisible){this.applyHideToToolbar(false,15,15);}// eslint-disable-next-line max-len
if(!this.isFontFamilyToolVisible&&!this.isFontSizeToolVisible&&!this.isFontColorToolVisible&&!this.isFontAlignToolVisible&&!this.isFontStylesToolVisible){this.applyHideToToolbar(false,21,21);}// eslint-disable-next-line max-len
if(!this.isColorToolVisible&&!this.isStrokeColorToolVisible&&!this.isThicknessToolVisible&&!this.isOpacityToolVisible||!this.isDeleteAnnotationToolVisible){this.applyHideToToolbar(false,26,26);}};AnnotationToolbar.prototype.applyHideToToolbar=function(show,startIndex,endIndex){var isHide=!show;for(var index=startIndex;index<=endIndex;index++){var toolbar_1=void 0;var propertyToolbarElement=this.propertyToolbar&&this.propertyToolbar.element?this.propertyToolbar.element:null;var toolbarElement=this.toolbar&&this.toolbar.element?this.toolbar.element:null;if(toolbarElement&&toolbarElement.children&&toolbarElement.children.length>0){toolbar_1=this.toolbar;}else if(sf.base.Browser.isDevice&&propertyToolbarElement&&propertyToolbarElement.children&&propertyToolbarElement.children.length>0){toolbar_1=this.propertyToolbar;}if(toolbar_1.items[index]){var className=toolbar_1.items[index].cssClass;if(className&&className!==''){// Querying the toolbar item
var element=toolbar_1.element.querySelector('.'+className);if(element){this.toolbar.hideItem(element,isHide);}}else{toolbar_1.hideItem(index,isHide);}}}};/**
     * @param isAdjust
     * @private
     */AnnotationToolbar.prototype.adjustViewer=function(isAdjust){var splitterElement;var toolbarContainer;var annotationToolbarHeight;splitterElement=this.pdfViewer.element.querySelector('.e-pv-sidebar-toolbar-splitter');toolbarContainer=this.pdfViewer.element.querySelector('.e-pv-toolbar');var annotationToolbarContainer=this.pdfViewer.element.querySelector('.e-pv-annotation-toolbar');annotationToolbarHeight=this.getToolbarHeight(annotationToolbarContainer);var toolbarHeight=this.getToolbarHeight(toolbarContainer);var sideBarToolbar=this.pdfViewerBase.navigationPane.sideBarToolbar;var sideBarContentContainer=this.pdfViewerBase.navigationPane.sideBarContentContainer;var commentsContainer=this.pdfViewerBase.navigationPane.commentPanelContainer;var commentPanelResizer=this.pdfViewerBase.navigationPane.commentPanelResizer;var newToolbarHeight='';if(isAdjust){if(this.pdfViewer.enableToolbar){sideBarToolbar.style.top=toolbarHeight+annotationToolbarHeight+'px';sideBarContentContainer.style.top=toolbarHeight+annotationToolbarHeight+'px';splitterElement.style.top=toolbarHeight+annotationToolbarHeight+'px';commentsContainer.style.top=toolbarHeight+annotationToolbarHeight+'px';commentPanelResizer.style.top=toolbarHeight+annotationToolbarHeight+'px';}else{sideBarToolbar.style.top=annotationToolbarHeight+'px';sideBarContentContainer.style.top=annotationToolbarHeight+'px';splitterElement.style.top=annotationToolbarHeight+'px';commentsContainer.style.top=annotationToolbarHeight+'px';commentPanelResizer.style.top=toolbarHeight+annotationToolbarHeight+'px';}if(!this.pdfViewer.enableToolbar){toolbarHeight=0;}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),annotationToolbarHeight+toolbarHeight)+'px';newToolbarHeight=this.getNavigationToolbarHeight(annotationToolbarHeight+toolbarHeight);sideBarToolbar.style.height=newToolbarHeight;splitterElement.style.height=newToolbarHeight;commentPanelResizer.style.height=newToolbarHeight;sideBarContentContainer.style.height=newToolbarHeight;}else{if(this.pdfViewer.enableToolbar){// eslint-disable-next-line max-len
sideBarToolbar.style.top=toolbarHeight+'px';sideBarContentContainer.style.top=toolbarHeight+'px';splitterElement.style.top=toolbarHeight+'px';commentsContainer.style.top=toolbarHeight+'px';commentPanelResizer.style.top=toolbarHeight+'px';}else{sideBarToolbar.style.top=1+'px';sideBarToolbar.style.height='100%';sideBarContentContainer.style.top=1+'px';sideBarContentContainer.style.height='100%';splitterElement.style.top=1+'px';splitterElement.style.height='100%';commentsContainer.style.top=1+'px';commentsContainer.style.height='100%';commentPanelResizer.style.top=1+'px';commentPanelResizer.style.height='100%';}if(!this.pdfViewer.enableToolbar){toolbarHeight=0;}// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),toolbarHeight)+'px';newToolbarHeight=this.getNavigationToolbarHeight(toolbarHeight);sideBarToolbar.style.height=newToolbarHeight;splitterElement.style.height=newToolbarHeight;commentPanelResizer.style.height=newToolbarHeight;sideBarContentContainer.style.height=newToolbarHeight;if(this.pdfViewerBase.viewerContainer.style.height==='0px'){// eslint-disable-next-line
this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(sideBarToolbar.style.top)+'px';}}};/**
    * @param isAdjust
    * @private
    */AnnotationToolbar.prototype.adjustMobileToolbar=function(isAdjust){var toolbarContainer;var annotationToolbarHeight;toolbarContainer=this.pdfViewer.element.querySelector('.e-pv-mobile-toolbar');var annotationToolbarContainer=this.pdfViewer.element.querySelector('.e-pv-mobile-annotation-toolbar');for(var i=0;i<annotationToolbarContainer.children.length;i++){if(annotationToolbarContainer.children[i].classList.contains('e-hscroll')){annotationToolbarContainer.children[i].classList.remove('e-hscroll');var scrollContent=document.getElementsByClassName('e-hscroll-content');if(scrollContent){scrollContent[0].style.display='inline-block';}}}annotationToolbarHeight=this.getToolbarHeight(annotationToolbarContainer);var toolbarHeight=this.getToolbarHeight(toolbarContainer);var sideBarToolbar=this.pdfViewerBase.navigationPane.sideBarToolbar;if(isAdjust){this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),annotationToolbarHeight+toolbarHeight)+'px';}else{// eslint-disable-next-line max-len
this.pdfViewerBase.viewerContainer.style.height=this.updateViewerHeight(this.getElementHeight(this.pdfViewerBase.viewerContainer),toolbarHeight)+'px';if(this.pdfViewerBase.viewerContainer.style.height==='0px'){// eslint-disable-next-line
this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height)-parseInt(sideBarToolbar.style.top)+'px';}}};AnnotationToolbar.prototype.removeScrollOption=function(){var _this=this;this.scrollInterval=setInterval(function(){_this.removeToolbarScroller();},100);};AnnotationToolbar.prototype.removeToolbarScroller=function(){var annotationToolbarContainer=this.pdfViewer.element.querySelector('.e-pv-mobile-annotation-toolbar');for(var i=0;i<annotationToolbarContainer.children.length;i++){if(annotationToolbarContainer.children[i].classList.contains('e-hscroll')){annotationToolbarContainer.children[i].classList.remove('e-hscroll');var scrollContent=document.getElementsByClassName('e-hscroll-content');if(scrollContent){scrollContent[0].style.display='inline-block';}}}this.scrollerTimer++;if(this.scrollerTimer>10){clearInterval(this.scrollInterval);this.scrollerTimer=0;}};AnnotationToolbar.prototype.getToolbarHeight=function(element){var toolbarHeight;if(element){toolbarHeight=element.getBoundingClientRect().height;if(toolbarHeight===0&&element===this.pdfViewerBase.getElement('_toolbarContainer')){// getComputedStyle gets the value from style and toolbar border height is added to it.
// eslint-disable-next-line
toolbarHeight=parseFloat(window.getComputedStyle(element)['height'])+this.toolbarBorderHeight;}}return toolbarHeight;};AnnotationToolbar.prototype.getNavigationToolbarHeight=function(toolbarHeight){var height=this.pdfViewer.element.getBoundingClientRect().height;return height!==0?height-toolbarHeight+'px':'';};/**
     * @private
     */AnnotationToolbar.prototype.deselectAllItemsInBlazor=function(){if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(true);}if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.primaryToolbar.deSelectItem(this.HighlightElement);this.primaryToolbar.deSelectItem(this.UnderlineElement);this.primaryToolbar.deSelectItem(this.StrikethroughElement);this.primaryToolbar.deSelectItem(this.FreeTextElement);this.primaryToolbar.deSelectItem(this.InkAnnotationElement);this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateTextMarkupButtons',false,false,false);}this.resetFreeTextAnnot();this.clearTextMarkupMode();this.clearShapeMode();this.clearMeasureMode();this.pdfViewer.tool='';if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.enableTextMarkupAnnotationPropertiesTools(false);this.enableFreeTextAnnotationPropertiesTools(false);this.updateColorInIcon(this.colorDropDownElementInBlazor,'#000000');this.updateColorInIcon(this.strokeDropDownElementInBlazor,'#000000');this.updateColorInIcon(this.fontColorElementInBlazor,'#000000');this.selectAnnotationDeleteItem(false);}if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=false;}};AnnotationToolbar.prototype.updateInteractionTools=function(){if(this.pdfViewer.enableTextSelection){this.pdfViewerBase.initiateTextSelectMode();if(!sf.base.Browser.isDevice){this.pdfViewer.toolbar.updateInteractionTools(true);}}else if(!sf.base.Browser.isDevice){this.pdfViewer.toolbar.updateInteractionTools(false);}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.selectAnnotationDeleteItem=function(isEnable,deleteIconCicked){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(isEnable){// eslint-disable-next-line
var annotation=this.pdfViewer.annotationModule.findCurrentAnnotation();if(annotation){// eslint-disable-next-line
if(annotation.annotationSettings&&annotation.annotationSettings.isLock){if(this.pdfViewer.annotationModule.checkAllowedInteractions('Delete',annotation)){this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);}else{this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(false);}}else if(this.pdfViewerBase.blazorUIAdaptor){this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);}}}else if(this.pdfViewerBase.blazorUIAdaptor){this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(isEnable);}if(deleteIconCicked&&!this.pdfViewer.annotationModule.isDeleteKeyboardClick){this.pdfViewerBase.focusViewerContainer();}}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableTextMarkupAnnotationPropertiesTools=function(isEnable){if(!sf.base.Browser.isDevice){// this.pdfViewer._dotnetInstance.invokeMethodAsync('AnnotationSelect', 'TextMarkup');
this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(isEnable);}};AnnotationToolbar.prototype.checkAnnotationPropertiesChange=function(){// eslint-disable-next-line
var annotation=this.pdfViewer.selectedItems.annotations[0];if(annotation&&annotation.annotationSettings){// eslint-disable-next-line
var isLock=annotation.annotationSettings.isLock;if(isLock){if(this.pdfViewer.annotationModule.checkAllowedInteractions('PropertyChange',annotation)){return true;}else{return false;}}}return true;};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableAnnotationPropertiesTools=function(isEnable){if(!sf.base.Browser.isDevice){var isPropertiesChanges=this.checkAnnotationPropertiesChange();if(!isEnable){isPropertiesChanges=true;}// this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableAnnotationPropertiesTools', isEnable, isPropertiesChanges);
this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(isEnable,isPropertiesChanges);}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableSignaturePropertiesTools=function(isEnable){if(!sf.base.Browser.isDevice){var isPropertiesChanges=this.checkAnnotationPropertiesChange();if(!isEnable){isPropertiesChanges=true;}//this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableSignaturePropertiesTools', isEnable, isPropertiesChanges);
this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(isEnable,isPropertiesChanges);}};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableStampAnnotationPropertiesTools=function(isEnable){var isPropertiesChanges=this.checkAnnotationPropertiesChange();if(!isEnable){isPropertiesChanges=true;}// this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableStampAnnotationPropertiesTools', isEnable, isPropertiesChanges);
this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(isEnable,isPropertiesChanges);};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableFreeTextAnnotationPropertiesTools=function(isEnable){var isPropertiesChanges=this.checkAnnotationPropertiesChange();if(!isEnable){isPropertiesChanges=true;}//this.pdfViewer._dotnetInstance.invokeMethodAsync('EnableFreeTextAnnotationPropertiesTools', isEnable, isPropertiesChanges);
this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(isEnable,isPropertiesChanges);};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableAnnotationAddTools=function(isEnable){if(this.toolbar&&!sf.base.Browser.isDevice){if(this.pdfViewer.enableTextMarkupAnnotation){this.toolbar.enableItems(this.highlightItem.parentElement,isEnable);this.toolbar.enableItems(this.underlineItem.parentElement,isEnable);this.toolbar.enableItems(this.strikethroughItem.parentElement,isEnable);}if(this.pdfViewer.enableShapeAnnotation){this.toolbar.enableItems(this.shapeElement.parentElement,isEnable);}if(this.pdfViewer.enableStampAnnotations){this.toolbar.enableItems(this.stampElement.parentElement,isEnable);}if(this.pdfViewer.enableMeasureAnnotation&&this.pdfViewerBase.isCalibrateAnnotationModule()){this.toolbar.enableItems(this.calibrateElement.parentElement,isEnable);}if(this.pdfViewer.enableFreeText){this.toolbar.enableItems(this.freeTextEditItem.parentElement,isEnable);}if(this.pdfViewer.enableHandwrittenSignature){this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,isEnable);}if(this.pdfViewer.enableInkAnnotation){this.toolbar.enableItems(this.inkAnnotationItem.parentElement,isEnable);}if(this.pdfViewer.enableCommentPanel){this.enableCommentPanelTool(isEnable);}}};/**
     * @private
     */AnnotationToolbar.prototype.isAnnotationButtonsEnabled=function(){var isButtonsEnabled=false;if(this.isHighlightEnabled||this.isUnderlineEnabled||this.isStrikethroughEnabled){isButtonsEnabled=true;}return isButtonsEnabled;};/**
     * @param isEnable
     * @private
     */AnnotationToolbar.prototype.enableCommentPanelTool=function(isEnable){if(this.toolbar){this.toolbar.enableItems(this.commentItem.parentElement,isEnable);}};AnnotationToolbar.prototype.updateToolbarItems=function(){if(this.pdfViewer.enableTextMarkupAnnotation){this.enableTextMarkupAddTools(true);}else{this.enableTextMarkupAddTools(false);}this.toolbar.enableItems(this.shapeElement.parentElement,this.pdfViewer.enableShapeAnnotation);this.toolbar.enableItems(this.stampElement.parentElement,this.pdfViewer.enableStampAnnotations);this.toolbar.enableItems(this.calibrateElement.parentElement,this.pdfViewer.enableMeasureAnnotation);this.toolbar.enableItems(this.freeTextEditItem.parentElement,this.pdfViewer.enableFreeText);this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,this.pdfViewer.enableHandwrittenSignature);this.toolbar.enableItems(this.inkAnnotationItem.parentElement,this.pdfViewer.enableInkAnnotation);};AnnotationToolbar.prototype.enableTextMarkupAddTools=function(isEnable){this.toolbar.enableItems(this.highlightItem.parentElement,isEnable);this.toolbar.enableItems(this.underlineItem.parentElement,isEnable);this.toolbar.enableItems(this.strikethroughItem.parentElement,isEnable);};/**
     * @private
     */ // for shapes added by drawing package
AnnotationToolbar.prototype.updateAnnnotationPropertyItems=function(){this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-color-container');this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-stroke-container');this.fontColorElementInBlazor=this.pdfViewer.element.querySelector('.e-pv-annotation-textcolor-container');if(this.pdfViewer.selectedItems.annotations.length===1){// eslint-disable-next-line max-len
this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,'fillColor'));this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,'strokeColor'));if(this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType==='FreeText'){// eslint-disable-next-line
this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,'fontColor'));//this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontFamilyInIcon', this.pdfViewer.selectedItems.annotations[0].fontFamily);
// eslint-disable-next-line max-len
this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily);// this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateFontSizeInIcon', this.pdfViewer.selectedItems.annotations[0].fontSize);
this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize);//this.pdfViewer.toolbar.annotationtoolbar.updateTextAlignInIcon(this.pdfViewer.selectedItems.annotations[0].textAlign);
}}else{this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,'#000000');this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,'#000000');this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,'#000000');}};AnnotationToolbar.prototype.getColorHexValue=function(colorString,type){if(colorString==='#ffffff00'){colorString='#ffffff';}if(colorString.toLowerCase()==='red'){colorString='#FF0000';}if(colorString!=='transparent'){return colorString;}else{if(type==='fontColor'||type==='strokeColor'){return'#000000';}else{return'#ffffff';}}};AnnotationToolbar.prototype.setColorInPicker=function(colorpick,colorString){if(colorpick){colorpick.setProperties({'value':colorString},true);}};/**
     * @private
     */AnnotationToolbar.prototype.resetToolbar=function(){this.adjustViewer(false);this.updateToolbarItems();// eslint-disable-next-line max-len
if((this.pdfViewer.isAnnotationToolbarOpen||this.pdfViewer.isAnnotationToolbarVisible)&&this.pdfViewer.enableAnnotationToolbar){this.toolbarElement.style.display='';this.isToolbarHidden=false;this.adjustViewer(true);this.enableAnnotationAddTools(false);this.pdfViewer.isAnnotationToolbarVisible=true;}else{this.toolbarElement.style.display='none';this.isToolbarHidden=true;this.pdfViewer.isAnnotationToolbarVisible=false;}};/**
     * @private
     */AnnotationToolbar.prototype.clearTextMarkupMode=function(){if(this.pdfViewerBase.isTextMarkupAnnotationModule()){this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=false;this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode='';}};/**
     * @private
     */AnnotationToolbar.prototype.clearShapeMode=function(){if(this.pdfViewerBase.isShapeAnnotationModule()){this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode='';}};/**
     * @private
     */AnnotationToolbar.prototype.clearMeasureMode=function(){if(this.pdfViewerBase.isCalibrateAnnotationModule()){this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode='';}};AnnotationToolbar.prototype.getElementHeight=function(element){try{return element.getBoundingClientRect().height;}catch(error){return 0;}};AnnotationToolbar.prototype.updateViewerHeight=function(viewerHeight,toolbarHeight){return this.getElementHeight(this.pdfViewer.element)-toolbarHeight;};AnnotationToolbar.prototype.resetViewerHeight=function(viewerHeight,toolbarHeight){return viewerHeight+toolbarHeight;};/**
     * @private
     */AnnotationToolbar.prototype.afterAnnotationToolbarCreationInBlazor=function(){this.HighlightElement=document.getElementById(this.pdfViewer.dataId+'_highLight').children[0];this.UnderlineElement=document.getElementById(this.pdfViewer.dataId+'_underline').children[0];this.StrikethroughElement=document.getElementById(this.pdfViewer.dataId+'_strikethrough').children[0];this.InkAnnotationElement=document.getElementById(this.pdfViewer.dataId+'_annotation_ink').children[0];this.InkAnnotationElement.classList.add('e-pv-tbar-btn');this.FreeTextElement=document.getElementById(this.pdfViewer.dataId+'_annotation_freeTextEdit').children[0];this.HighlightElement=this.addClassToToolbarInBlazor(this.HighlightElement,'e-pv-highlight','_highLight');this.UnderlineElement=this.addClassToToolbarInBlazor(this.UnderlineElement,'e-pv-underline','_underline');this.StrikethroughElement=this.addClassToToolbarInBlazor(this.StrikethroughElement,'e-pv-strikethrough','_strikethrough');};// eslint-disable-next-line
AnnotationToolbar.prototype.addClassToToolbarInBlazor=function(element,className,idString){element.classList.add(className);element.classList.add('e-pv-tbar-btn');if(element.childNodes.length>0){var spanElement=element.childNodes[0];if(spanElement&&spanElement.classList){spanElement.id=this.pdfViewer.dataId+idString+'Icon';spanElement.classList.remove('e-icons');spanElement.classList.remove('e-btn-icon');if(this.pdfViewer.enableRtl){spanElement.classList.add('e-right');}}}return element;};AnnotationToolbar.prototype.handleHighlightInBlazor=function(){if(this.HighlightElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.HighlightElement);}else if(!this.HighlightElement.classList.contains('e-pv-select')){this.primaryToolbar.selectItem(this.HighlightElement);}if(this.StrikethroughElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.StrikethroughElement);}if(this.UnderlineElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.UnderlineElement);}};AnnotationToolbar.prototype.handleUnderlineInBlazor=function(){if(this.UnderlineElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.UnderlineElement);}else if(!this.UnderlineElement.classList.contains('e-pv-select')){this.primaryToolbar.selectItem(this.UnderlineElement);}if(this.StrikethroughElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.StrikethroughElement);}if(this.HighlightElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.HighlightElement);}};AnnotationToolbar.prototype.handleStrikethroughInBlazor=function(){if(this.StrikethroughElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.StrikethroughElement);}else if(!this.StrikethroughElement.classList.contains('e-pv-select')){this.primaryToolbar.selectItem(this.StrikethroughElement);}if(this.HighlightElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.HighlightElement);}if(this.UnderlineElement.classList.contains('e-pv-select')){this.primaryToolbar.deSelectItem(this.UnderlineElement);}};AnnotationToolbar.prototype.AnnotationSliderOpened=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0]){if(this.pdfViewer.selectedItems.annotations[0].wrapper&&this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]){var opacity=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity*100;var thickness=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth;this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateAnnotationSlider',opacity,thickness);}}else if(this.pdfViewer.annotationModule.textMarkupAnnotationModule){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){var opacityValue=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity*100;this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateAnnotationOpacity',opacityValue);}}if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length==0&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation==null){this.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateAnnotationSlider',100,1);}var opacitylement=document.querySelector('.e-control.e-slider.e-lib.e-pv-annotation-opacity-slider');var thicknessElement=document.querySelector('.e-control.e-slider.e-lib.e-pv-annotation-thickness-slider');if(opacitylement){// Set tabindex to 0
opacitylement.setAttribute('tabindex','0');// Focus the element
opacitylement.focus();}if(thicknessElement){// Set tabindex to 0
thicknessElement.setAttribute('tabindex','0');// Focus the element
thicknessElement.focus();}if(sf.base.Browser.isDevice){var annotationSlider=document.getElementsByClassName('e-dropdown-popup')[0];var outerWidth_1=window.outerWidth;var sidebarWidth=document.getElementsByClassName('sidebar')[0];if(outerWidth_1<500){var additionalSpace=outerWidth_1-annotationSlider.clientWidth;annotationSlider.style.left=additionalSpace/2+'px';}else{var additionalSpace=outerWidth_1-sidebarWidth.offsetWidth;var leftSpace=(additionalSpace-annotationSlider.clientWidth)/2;annotationSlider.style.left=sidebarWidth.offsetWidth+leftSpace+5+'px';}}};AnnotationToolbar.prototype.DropDownOpened=function(colorElement){if(!sf.base.Browser.isDevice){if(colorElement&&colorElement[0].element){var colorElementBounds=colorElement[0].element.getBoundingClientRect();var sidebarElement=this.pdfViewerBase.navigationPane.sideBarToolbar;var sideBarElementWidth=sidebarElement?sidebarElement.getBoundingClientRect().width:0;if(colorElementBounds.left>this.pdfViewerBase.viewerContainer.clientWidth+colorElementBounds.width+sideBarElementWidth){colorElement[0].element.style.left=colorElementBounds.left-this.pdfViewerBase.viewerContainer.clientHeight/2+'px';}}}else{if(colorElement&&colorElement.element){var colorElementBounds=colorElement.element.getBoundingClientRect();if(colorElementBounds.left+colorElementBounds.width>window.outerWidth){colorElement.element.style.left=this.pdfViewerBase.viewerContainer.clientWidth/2-colorElementBounds.left+'px';}}}};AnnotationToolbar.prototype.annotatioToolbarClick=function(isResetFreeText,isHandleTextMarkup,isSetAnnotation,annotationType){if(isResetFreeText){this.resetFreeTextAnnot();}if(isHandleTextMarkup){if(annotationType==="Highlight"){this.handleHighlightInBlazor();}else if(annotationType==="Underline"){this.handleUnderlineInBlazor();}else if(annotationType==="Strikethrough"){this.handleStrikethroughInBlazor();}}if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&annotationType!='HandWrittenSignature'){this.pdfViewer.annotationModule.ShowToastMessage(annotationType);}if(!isSetAnnotation){this.pdfViewer.annotationModule.setAnnotationMode(annotationType);}else{this.clearTextMarkupMode();}};return AnnotationToolbar;}();/**
 * export types
 */ /**
 * BookmarkView module
 */var BookmarkView=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function BookmarkView(pdfViewer,pdfViewerBase){var _this=this;/**
         * @private
         */this.childNavigateCount=0;// eslint-disable-next-line
this.bookmarkClick=function(args){// eslint-disable-next-line
if(!args.event.target.classList.contains('e-icons')){var bookid=args.data.Id;_this.childNavigateCount=0;_this.pdfViewerBase.navigationPane.goBackToToolbar();// eslint-disable-next-line
var selectedItem=_this.bookmarkList.getSelectedItems();_this.navigateToBookmark(bookid,args.text,selectedItem.data.FileName);}else{_this.childNavigateCount++;}return false;};this.nodeClick=function(args){_this.setHeight(args.node);var bookid=Number(args.nodeData.id);// eslint-disable-next-line
var data=_this.treeObj.getTreeData(args.node);_this.navigateToBookmark(bookid,args.node.textContent,data[0].FileName);if(_this.pdfViewer.annotationModule&&_this.pdfViewer.annotationModule.inkAnnotationModule){// eslint-disable-next-line
var currentPageNumber=parseInt(_this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber);_this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(currentPageNumber);}return false;};this.bookmarkPanelBeforeOpen=function(args){if(_this.pdfViewer.enableBookmarkStyles){for(var k=0;k<_this.bookmarkStyles.length;k++){if(args.text.trim()===_this.bookmarkStyles[k].Text.trim()){// eslint-disable-next-line
var element=args.node.lastElementChild;if(element){// eslint-disable-next-line
var fontStyle=_this.bookmarkStyles[k].FontStyle.split(',');for(var n=0;n<fontStyle.length;n++){switch(fontStyle[n].trim()){case'Italic':element.style.fontStyle='italic';break;case'Bold':element.style.fontWeight='Bold';}}// eslint-disable-next-line
var currentElement=element.getElementsByClassName('e-pv-bookmark-title')[0];if(currentElement){currentElement.style.color=_this.bookmarkStyles[k].Color;}else{element.children[0].style.color=_this.bookmarkStyles[k].Color;}}break;}}}};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     */BookmarkView.prototype.createRequestForBookmarks=function(){var proxy=this;// eslint-disable-next-line max-len
var jsonObject={hashId:this.pdfViewerBase.hashId,action:'Bookmarks',elementId:this.pdfViewer.dataId,uniqueId:this.pdfViewerBase.documentId};if(this.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.pdfViewerBase.jsonDocumentId;}if(this.pdfViewer.enableBookmarkStyles){// eslint-disable-next-line
jsonObject.bookmarkStyles=this.pdfViewer.enableBookmarkStyles;}this.bookmarkRequestHandler=new AjaxHandler(this.pdfViewer);this.bookmarkRequestHandler.url=proxy.pdfViewer.serviceUrl+'/Bookmarks';this.bookmarkRequestHandler.responseType='json';this.bookmarkRequestHandler.send(jsonObject);// eslint-disable-next-line
this.bookmarkRequestHandler.onSuccess=function(result){if(proxy.pdfViewerBase.navigationPane){proxy.pdfViewerBase.navigationPane.disableBookmarkButton();}// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.pdfViewerBase.onControlError(500,data,'Bookmarks');data=null;}}if(data&&data.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess('Bookmarks',data);proxy.bookmarks={bookMark:data.Bookmarks};proxy.bookmarkStyles=data.Bookmarkstyles;proxy.bookmarksDestination={bookMarkDestination:data.BookmarksDestination};// eslint-disable-next-line
var bookmarkCollection={bookmarks:proxy.bookmarks,bookmarksDestination:proxy.bookmarksDestination};if(proxy.pdfViewer&&proxy.pdfViewer._dotnetInstance){proxy.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateBookmarkCollection',bookmarkCollection);}}}if(proxy.pdfViewerBase.navigationPane){if(proxy.bookmarks==null){proxy.pdfViewerBase.navigationPane.disableBookmarkButton();if(proxy.pdfViewer._dotnetInstance){proxy.pdfViewer._dotnetInstance.invokeMethodAsync('UpdateBookmarkCollection',null);}}else{proxy.isBookmarkViewDiv=false;if(proxy.pdfViewer.isBookmarkPanelOpen){proxy.pdfViewerBase.navigationPane.openBookmarkcontentInitially();}}}};// eslint-disable-next-line
this.bookmarkRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,'Bookmarks');};// eslint-disable-next-line
this.bookmarkRequestHandler.onError=function(result){proxy.pdfViewerBase.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,'Bookmarks');};};/**
     * @private
     */BookmarkView.prototype.renderBookmarkcontent=function(){var _this=this;if(!this.isBookmarkViewDiv){// eslint-disable-next-line max-len
this.bookmarkView=this.pdfViewer.element.querySelector('.e-pv-bookmark-view');this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);// eslint-disable-next-line max-len
var bookmarkIconView=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_bookmark_iconview',className:'e-pv-bookmark-icon-view'});// eslint-disable-next-line max-len
if(!this.pdfViewer.enableRtl){// eslint-disable-next-line max-len
var bookmarkIcon=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_bookmark_icon',className:'e-pv-bookmark-icon e-pv-icon'});bookmarkIconView.appendChild(bookmarkIcon);}else{// eslint-disable-next-line max-len
var bookmarkIcon=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_bookmark_icon',className:'e-pv-bookmark-icon e-pv-icon e-right'});bookmarkIconView.appendChild(bookmarkIcon);}// eslint-disable-next-line max-len
var bookmarkTitle=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_bookmark_Title',className:'e-pv-bookmark-title'});if(this.pdfViewer.enableRtl){bookmarkTitle.style.paddingRight=26+'px';}bookmarkTitle.innerText='${Title}';bookmarkIconView.appendChild(bookmarkTitle);// eslint-disable-next-line
var event_1=['mouseover','keydown'];for(var m=0;m<event_1.length;m++){this.bookmarkView.addEventListener(event_1[m],function(event){_this.setHeight(event.target);});}this.isBookmarkViewDiv=true;}this.bookmarkView.style.display='block';};/**
     * @private
     */BookmarkView.prototype.renderBookmarkContentMobile=function(){if(this.bookmarkView!=null){this.bookmarkView.remove();}this.bookmarkView=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_bookmark_view',className:'e-pv-bookmark-view'});this.pdfViewerBase.getElement('_bookmarks_container').appendChild(this.bookmarkView);this.bookmarkList=new sf.lists.ListView({dataSource:this.bookmarks.bookMark,fields:{id:'Id',text:'Title',child:'Child'},showHeader:false,select:this.bookmarkClick.bind(this)});this.bookmarkList.isStringTemplate=true;if(this.pdfViewer.enableRtl){this.bookmarkList.enableRtl=true;}this.bookmarkList.appendTo(this.bookmarkView);};// eslint-disable-next-line
BookmarkView.prototype.setHeight=function(element){if(this.treeObj){if(this.treeObj.fullRowSelect&&element.classList){if(element.classList.contains('e-treeview')){element=element.querySelector('.e-node-focus').querySelector('.e-fullrow');}else if(element.classList.contains('e-list-parent')){element=element.querySelector('.e-fullrow');}else if(element.classList.value!=='e-fullrow'){if(element.closest&&element.closest('.e-list-item')){element=element.closest('.e-list-item').querySelector('.e-fullrow');}else{if(element.classList.contains('e-list-item')){element=element.querySelector('.e-fullrow');}else if(element.classList.contains('e-icons')&&element.classList.contains('interaction')&&element.parentElement.parentElement.classList.contains('e-list-item')){element=element.parentElement.parentElement.querySelector('.e-fullrow');}}}if(element.nextElementSibling){element.style.height=element.nextElementSibling.offsetHeight+'px';}}}};/**
     * @private
     */BookmarkView.prototype.setBookmarkContentHeight=function(){if(this.treeObj){// eslint-disable-next-line
var element=this.treeObj.element;if(this.treeObj.fullRowSelect){if(element.classList.contains('e-treeview')){element=element.querySelector('.e-node-focus').querySelector('.e-fullrow');}if(element.nextElementSibling){element.style.height=element.nextElementSibling.offsetHeight+'px';}}}};BookmarkView.prototype.bindBookmarkListViewEvent=function(){var bookmarkLists=document.getElementsByClassName("e-pv-bookmark-view");if(bookmarkLists&&bookmarkLists[0]&&bookmarkLists[0].children.length>0&&bookmarkLists[0].children[1]){bookmarkLists[0].children[1].addEventListener('mousedown',this.bookmarkListClickEvent.bind(this));}};BookmarkView.prototype.bookmarkListClickEvent=function(args){var _this=this;if(args.target&&!args.target.classList.contains('e-icons')){if(args.target.parentElement.parentElement){var id_1=args.target.parentElement.parentElement.id.split('_')[1];if(this.pdfViewer&&this.pdfViewer._dotnetInstance){this.pdfViewer._dotnetInstance.invokeMethodAsync('BookmarkViewClosed',null);}this.closeBookmarkContainer();setTimeout(function(){_this.navigateToBookmark(id_1,args.target.innerHTML,_this.pdfViewer.fileName);},300);}}};BookmarkView.prototype.closeBookmarkContainer=function(){var bookmarkContainer=this.pdfViewerBase.getElement('_bookmarks_container');if(bookmarkContainer){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display='';}}};BookmarkView.prototype.navigateToBookmark=function(bookid,text,fileName){if(this.bookmarksDestination.bookMarkDestination[bookid]){var pageIndex=this.bookmarksDestination.bookMarkDestination[bookid].PageIndex;var Y=this.bookmarksDestination.bookMarkDestination[bookid].Y;if(pageIndex!==-1){this.goToBookmark(pageIndex,Y);}this.pdfViewer.fireBookmarkClick(pageIndex!==-1?pageIndex+1:pageIndex,Y,text,fileName);}};/**
     * Get Bookmarks of the PDF document being loaded in the ejPdfViewer control
     *
     * @returns any
     */ // eslint-disable-next-line
BookmarkView.prototype.getBookmarks=function(){if(this.bookmarks&&this.bookmarksDestination){// eslint-disable-next-line max-len
return{bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination};}};/**
     * Navigate To current Bookmark location of the PDF document being loaded in the ejPdfViewer control.
     *
     * @param  {number} pageIndex - Specifies the pageIndex for Navigate
     * @param  {number} y - Specifies the Y coordinates value of the Page
     * @returns void
     */BookmarkView.prototype.goToBookmark=function(pageIndex,y){var proxy=this;var destPage=this.pdfViewerBase.pageSize[pageIndex].height;var scrollValue;if(y===0){scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor();}else{// eslint-disable-next-line max-len
scrollValue=this.pdfViewerBase.pageSize[pageIndex].top*this.pdfViewerBase.getZoomFactor()+(destPage-y)*this.pdfViewerBase.getZoomFactor();}var scroll=scrollValue.toString();// eslint-disable-next-line radix
proxy.pdfViewerBase.viewerContainer.scrollTop=parseInt(scroll);if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.pdfViewerBase.mobileScrollerContainer.style.display='';this.pdfViewerBase.updateMobileScrollerPosition();}// Have commented the code since keyboard navigation does not require focusing the ViewerContainer
//proxy.pdfViewerBase.focusViewerContainer();
return false;};/**
     * @private
     */BookmarkView.prototype.clear=function(){if(this.pdfViewerBase.navigationPane){this.pdfViewerBase.navigationPane.disableBookmarkButton();this.pdfViewerBase.navigationPane.updateViewerContainerOnClose();}if(this.bookmarks){this.bookmarks.bookMark=[];this.bookmarks=null;}if(this.bookmarksDestination){this.bookmarksDestination.bookMarkDestination=[];}if(this.bookmarkRequestHandler){this.bookmarkRequestHandler.clear();}};/**
     * @private
     */BookmarkView.prototype.destroy=function(){this.clear();};/**
     * @private
     */BookmarkView.prototype.getModuleName=function(){return'BookmarkView';};return BookmarkView;}();/**
 * export types
 */ /* eslint-disable */ /**
 * The `TextSelection` module is used to handle the text selection of PDF viewer.
 */var TextSelection=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function TextSelection(pdfViewer,pdfViewerBase){var _this=this;/**
         * @private
         */this.isTextSelection=false;/**
         * @private
         */this.selectionStartPage=null;this.isBackwardPropagatedSelection=false;this.contextMenuHeight=144;this.backwardStart=0;/**
         * @private
         */this.selectionRangeArray=[];this.selectionAnchorTouch=null;this.selectionFocusTouch=null;// eslint-disable-next-line
this.scrollMoveTimer=0;this.isMouseLeaveSelection=false;this.isTouchSelection=false;this.previousScrollDifference=0;this.topStoreLeft=null;this.topStoreRight=null;this.isTextSearched=false;this.isSelectionStartTriggered=false;this.allTextContent="";this.onLeftTouchSelectElementTouchStart=function(event){_this.initiateSelectionByTouch();};this.onRightTouchSelectElementTouchStart=function(event){_this.initiateSelectionByTouch();};this.onLeftTouchSelectElementTouchEnd=function(event){_this.terminateSelectionByTouch(event);};this.onRightTouchSelectElementTouchEnd=function(event){_this.terminateSelectionByTouch(event);};this.onLeftTouchSelectElementTouchMove=function(event){var range;var nodeElement;event.preventDefault();event.target.style.zIndex='0';var rightElement=_this.dropDivElementRight;var isTouchedWithinViewerContainer=_this.isTouchedWithinContainer(event);if(rightElement&&isTouchedWithinViewerContainer){var dropBounds=rightElement.getBoundingClientRect();var xTouch=event.changedTouches[0].clientX;var yTouch=event.changedTouches[0].clientY;event.target.style.zIndex='1000';nodeElement=_this.getNodeElement(range,xTouch,yTouch,event,nodeElement);if(nodeElement){// eslint-disable-next-line max-len
var currentDifference=Math.sqrt((yTouch-dropBounds.top)*(yTouch-dropBounds.top)+(xTouch-dropBounds.left)*(xTouch-dropBounds.left));var isCloserMovement=_this.isCloserTouchScroll(currentDifference);var isTextSelected=false;if(yTouch<=dropBounds.top){_this.dropElementLeft.style.transform='rotate(0deg)';_this.dropElementRight.style.transform='rotate(-90deg)';isTextSelected=_this.selectTextByTouch(nodeElement.parentElement,xTouch,yTouch,false,'left',isCloserMovement);}else{_this.dropElementLeft.style.transform='rotate(-90deg)';_this.dropElementRight.style.transform='rotate(0deg)';isTextSelected=_this.selectTextByTouch(nodeElement.parentElement,xTouch,yTouch,true,'left',isCloserMovement);}if(isTextSelected){var elementClientRect=_this.dropDivElementLeft.getBoundingClientRect();var pageTopValue=_this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber-1].top;var topClientValue=_this.getClientValueTop(yTouch,_this.pdfViewerBase.currentPageNumber-1);// eslint-disable-next-line max-len
var currentPageLeft=_this.pdfViewerBase.getElement('_pageDiv_'+(_this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;var currentRangeLeft=xTouch-currentPageLeft;// eslint-disable-next-line max-len
_this.dropDivElementLeft.style.top=pageTopValue*_this.pdfViewerBase.getZoomFactor()+topClientValue+'px';_this.topStoreLeft={pageTop:pageTopValue,topClientValue:_this.getMagnifiedValue(topClientValue),pageNumber:_this.pdfViewerBase.currentPageNumber-1,left:_this.getMagnifiedValue(currentRangeLeft),isHeightNeeded:false};// eslint-disable-next-line max-len
_this.dropDivElementLeft.style.left=xTouch-_this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-elementClientRect.width/2+'px';_this.previousScrollDifference=currentDifference;}}}};// eslint-disable-next-line
this.onRightTouchSelectElementTouchMove=function(event){var range;var nodeElement;event.preventDefault();event.target.style.zIndex='0';var leftElement=_this.dropDivElementLeft;var isTouchedWithinViewerContainer=_this.isTouchedWithinContainer(event);if(leftElement&&isTouchedWithinViewerContainer){var dropPosition=leftElement.getBoundingClientRect();var touchX=event.changedTouches[0].clientX;var touchY=event.changedTouches[0].clientY;event.target.style.zIndex='1000';nodeElement=_this.getNodeElement(range,touchX,touchY,event,nodeElement);if(nodeElement){// eslint-disable-next-line max-len
var currentDifference=Math.sqrt((touchY-dropPosition.top)*(touchY-dropPosition.top)+(touchX-dropPosition.left)*(touchX-dropPosition.left));var isCloserMovement=_this.isCloserTouchScroll(currentDifference);var isTextSelected=false;if(touchY>=dropPosition.top){_this.dropElementRight.style.transform='rotate(-90deg)';_this.dropElementLeft.style.transform='rotate(0deg)';isTextSelected=_this.selectTextByTouch(nodeElement.parentElement,touchX,touchY,true,'right',isCloserMovement);}else{_this.dropElementRight.style.transform='rotate(0deg)';_this.dropElementLeft.style.transform='rotate(-90deg)';isTextSelected=_this.selectTextByTouch(nodeElement.parentElement,touchX,touchY,false,'right',isCloserMovement);}if(isTextSelected){var pageTopValue=_this.pdfViewerBase.pageSize[_this.pdfViewerBase.currentPageNumber-1].top;var topClientValue=_this.getClientValueTop(touchY,_this.pdfViewerBase.currentPageNumber-1);var elementClientRect=_this.dropDivElementRight.getBoundingClientRect();_this.dropDivElementRight.style.top=pageTopValue*_this.pdfViewerBase.getZoomFactor()+topClientValue+'px';// eslint-disable-next-line max-len
var currentPageLeft=_this.pdfViewerBase.getElement('_pageDiv_'+(_this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;var currentRangeLeft=touchX-currentPageLeft;// eslint-disable-next-line max-len
_this.topStoreRight={pageTop:pageTopValue,topClientValue:_this.getMagnifiedValue(topClientValue),pageNumber:_this.pdfViewerBase.currentPageNumber-1,left:_this.getMagnifiedValue(currentRangeLeft),isHeightNeeded:false};// eslint-disable-next-line max-len
_this.dropDivElementRight.style.left=touchX-_this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-elementClientRect.width/2+'px';_this.previousScrollDifference=currentDifference;}}}};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @param target
     * @param x
     * @param y
     * @param isExtended
     * @private
     */TextSelection.prototype.textSelectionOnMouseMove=function(target,x,y,isExtended){var targetElement=target;this.isTextSearched=true;if(targetElement.nodeType===targetElement.TEXT_NODE){if(!this.isSelectionStartTriggered&&!this.pdfViewerBase.getTextMarkupAnnotationMode()){this.pdfViewer.fireTextSelectionStart(this.pdfViewerBase.currentPageNumber);this.isSelectionStartTriggered=true;}this.isBackwardPropagatedSelection=false;var range=targetElement.ownerDocument.createRange();var selection=window.getSelection();if(selection.anchorNode!==null){var position=selection.anchorNode.compareDocumentPosition(selection.focusNode);if(!position&&selection.anchorOffset>selection.focusOffset||position===Node.DOCUMENT_POSITION_PRECEDING){this.isBackwardPropagatedSelection=true;}}range.selectNodeContents(targetElement);var currentPosition=0;var endPosition=range.endOffset;while(currentPosition<endPosition){range.setStart(targetElement,currentPosition);range.setEnd(targetElement,currentPosition+1);var rangeBounds=range.getBoundingClientRect();var rightBounds=rangeBounds.right;if(isExtended){// eslint-disable-next-line
rightBounds=parseInt(rangeBounds.right.toString());}// eslint-disable-next-line max-len
// eslint-disable-next-line
if(rangeBounds.left<=x&&rightBounds>=x&&parseInt(rangeBounds.top.toString())<=y&&rangeBounds.bottom>=y){if(selection.anchorNode!==null&&selection.anchorNode.parentNode.classList.contains('e-pv-text')){if(selection.anchorOffset>currentPosition){if(this.backwardStart!=0){range.setStart(selection.anchorNode,this.backwardStart);}else{range.setStart(selection.anchorNode,selection.anchorOffset+1);}}else{range.setStart(selection.anchorNode,selection.anchorOffset);}}selection.removeAllRanges();selection.addRange(range);if(!this.isTextSelection){this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1;}this.isTextSelection=true;// eslint-disable-next-line
var isIE=!!document.documentMode;if(!isIE){if(this.isBackwardPropagatedSelection||range.endOffset>currentPosition){if(this.backwardStart!=range.startOffset&&range.startOffset>=currentPosition){this.backwardStart=range.endOffset;}if(currentPosition===0&&range.endOffset!=1){selection.extend(targetElement,currentPosition);}else{selection.extend(targetElement,currentPosition+1);}}else if(isExtended){selection.extend(targetElement,currentPosition);}else{selection.extend(targetElement,currentPosition+1);}}range.detach();}currentPosition+=1;}// eslint-disable-next-line
var annotationModule=this.pdfViewer.annotationModule;// eslint-disable-next-line max-len
if(annotationModule&&annotationModule.textMarkupAnnotationModule&&annotationModule.textMarkupAnnotationModule.isEnableTextMarkupResizer(annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)){// eslint-disable-next-line
var leftDivElement=document.getElementById(this.pdfViewer.dataId+'_droplet_left');if(this.pdfViewerBase.isSelection&&selection&&selection.rangeCount>0){// eslint-disable-next-line
var currentrange=selection.getRangeAt(0);// eslint-disable-next-line
var rect=currentrange.getBoundingClientRect();var left=rect.left;var top_1=rect.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(left,top_1);this.pdfViewerBase.isSelection=false;}else if(leftDivElement&&leftDivElement.style.display==='none'){this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(x,y);}this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(x,y);}}else{for(var i=0;i<targetElement.childNodes.length;i++){if(targetElement.childNodes[i].nodeType===targetElement.TEXT_NODE){var range=this.getSelectionRange(i,targetElement);var rangeBounds=range.getBoundingClientRect();// eslint-disable-next-line max-len
// eslint-disable-next-line
if(rangeBounds.left<=x&&rangeBounds.right>=parseInt(x.toString())&&parseInt(rangeBounds.top.toString())<=y&&rangeBounds.bottom>=y){range.detach();this.textSelectionOnMouseMove(targetElement.childNodes[i],x,y,isExtended);}else{range.detach();}}}}};/**
     * @param target
     * @param x
     * @param y
     * @param isforward
     * @param target
     * @param x
     * @param y
     * @param isforward
     * @param target
     * @param x
     * @param y
     * @param isforward
     * @private
     */TextSelection.prototype.textSelectionOnDrag=function(target,x,y,isforward){var targetElement=target;this.isTextSearched=true;if(targetElement.nodeType===targetElement.TEXT_NODE){this.isBackwardPropagatedSelection=false;var range=targetElement.ownerDocument.createRange();var selection=window.getSelection();if(selection.anchorNode!==null){var position=selection.anchorNode.compareDocumentPosition(selection.focusNode);if(!position&&selection.anchorOffset>selection.focusOffset||position===Node.DOCUMENT_POSITION_PRECEDING){this.isBackwardPropagatedSelection=true;}}range.selectNodeContents(targetElement);var currentPosition=0;var endPosition=range.endOffset;while(currentPosition<endPosition){range.setStart(targetElement,currentPosition);range.setEnd(targetElement,currentPosition+1);var rangeBounds=range.getBoundingClientRect();// eslint-disable-next-line max-len
// eslint-disable-next-line
if(rangeBounds.left<=x&&rangeBounds.right>=x&&parseInt(rangeBounds.top.toString())<=y&&rangeBounds.bottom>=y){if(isforward){// eslint-disable-next-line max-len
if(selection.anchorNode!==null&&selection.anchorNode.parentNode.classList.contains('e-pv-text')){range.setStart(selection.anchorNode,selection.anchorOffset);}selection.removeAllRanges();selection.addRange(range);selection.extend(targetElement,currentPosition);}else if(selection.focusNode){range.setEnd(selection.focusNode,selection.focusOffset);selection.removeAllRanges();selection.addRange(range);}if(!this.isTextSelection){this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1;}this.isTextSelection=true;range.detach();return true;}currentPosition+=1;}if(this.pdfViewerBase.isSelection){// eslint-disable-next-line
var currentrange=selection.getRangeAt(0);// eslint-disable-next-line
var rect=currentrange.getBoundingClientRect();var left=rect.left;var top_2=rect.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(left,top_2);this.pdfViewerBase.isSelection=false;}this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(x,y);}else{for(var i=0;i<targetElement.childNodes.length;i++){if(targetElement.childNodes[i].nodeType===targetElement.TEXT_NODE){var range=this.getSelectionRange(i,targetElement);var rangeBounds=range.getBoundingClientRect();// eslint-disable-next-line max-len
// eslint-disable-next-line
if(rangeBounds.left<=x&&rangeBounds.right>=x&&parseInt(rangeBounds.top.toString())<=y&&rangeBounds.bottom>=y){range.detach();this.textSelectionOnDrag(targetElement.childNodes[i],x,y,isforward);}else{range.detach();}}}}return null;};/**
     * Select the target text region in the PDF document of the given bounds.
     *
     * @param  {number} pageNumbers - Specifies the page number
     * @param  {IRectangle[]} bounds -  Specifies the bounds of the texts.
     * @returns void
     */TextSelection.prototype.selectTextRegion=function(pageNumbers,bounds){// eslint-disable-next-line
var element=null;var pageNumber=pageNumbers-1;for(var k=0;k<bounds.length;k++){// eslint-disable-next-line
var bound=bounds[k];var x=(bound.left?bound.left:bound.Left)*this.pdfViewerBase.getZoomFactor();var y=(bound.top?bound.top:bound.Top)*this.pdfViewerBase.getZoomFactor();var width=(bound.width?bound.width:bound.Width)*this.pdfViewerBase.getZoomFactor();var height=bound.height?bound.height:bound.Height;// eslint-disable-next-line
var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageNumber);if(textLayer){// eslint-disable-next-line
var textDivs=textLayer.childNodes;for(var n=0;n<textDivs.length;n++){if(textDivs[n]){// eslint-disable-next-line
var rangebounds=textDivs[n].getBoundingClientRect();var top_3=this.getClientValueTop(rangebounds.top,pageNumber);// eslint-disable-next-line max-len
var currentLeft=rangebounds.left-this.pdfViewerBase.getElement('_pageDiv_'+pageNumber).getBoundingClientRect().left;var totalLeft=currentLeft+rangebounds.width;// eslint-disable-next-line
var textDiVLeft=parseInt(textDivs[n].style.left);// eslint-disable-next-line
var currentTop=parseInt(textDivs[n].style.top);var isLeftBounds=this.checkLeftBounds(currentLeft,textDiVLeft,totalLeft,x);var isTopBounds=this.checkTopBounds(top_3,currentTop,y);if(isLeftBounds&&isTopBounds){element=textDivs[n];break;}}}if(element!=null){// eslint-disable-next-line
var boundingRect=this.pdfViewerBase.getElement('_textLayer_'+pageNumber).getBoundingClientRect();this.textSelectionOnMouseMove(element,x+boundingRect.left,y+boundingRect.top,false);if(bounds.length-1===k){// eslint-disable-next-line max-len
this.textSelectionOnMouseMove(element,x+boundingRect.left+width,y+boundingRect.top,false);}}}}};/**
     * @param left
     * @param textDiVLeft
     * @param totalLeft
     * @param x
     * @private
     */TextSelection.prototype.checkLeftBounds=function(left,textDiVLeft,totalLeft,x){var isExists=false;// eslint-disable-next-line max-len
// eslint-disable-next-line
if(left===parseInt(x.toString())||parseInt(left.toString())===parseInt(x.toString())||left+1===parseInt(x.toString())||left-1===parseInt(x.toString())// eslint-disable-next-line
||textDiVLeft===parseInt(x.toString())||textDiVLeft===x||totalLeft>=x&&left<=x){isExists=true;}return isExists;};/**
     * @param top
     * @param currentTop
     * @param y
     * @param top
     * @param currentTop
     * @param y
     * @private
     */TextSelection.prototype.checkTopBounds=function(top,currentTop,y){var isExists=false;// eslint-disable-next-line max-len
// eslint-disable-next-line
if(top===parseInt(y.toString())||parseInt(top.toString())===parseInt(y.toString())||parseInt((top+1).toString())===parseInt(y.toString())||parseInt((top-1).toString())===parseInt(y.toString())// eslint-disable-next-line
||currentTop===parseInt(y.toString())||currentTop===y){isExists=true;}return isExists;};/**
     * @param event
     * @private
     */TextSelection.prototype.textSelectionOnMouseLeave=function(event){var _this=this;event.preventDefault();var viewerTop=this.pdfViewerBase.viewerContainer.offsetTop;if(this.pdfViewer.magnificationModule){if(this.pdfViewer.magnificationModule.fitType==='fitToPage'){return;}}if(event.clientY>viewerTop){this.scrollMoveTimer=setInterval(function(){_this.scrollForwardOnSelection();},500);}else{this.scrollMoveTimer=setInterval(function(){_this.scrollBackwardOnSelection();},500);}};TextSelection.prototype.scrollForwardOnSelection=function(){this.isMouseLeaveSelection=true;this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop+200;this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1);};TextSelection.prototype.scrollBackwardOnSelection=function(){this.isMouseLeaveSelection=true;this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop-200;this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1);};/**
     * @private
     */TextSelection.prototype.clear=function(){if(this.scrollMoveTimer){this.isMouseLeaveSelection=false;clearInterval(this.scrollMoveTimer);}};/**
     * @param element
     * @param x
     * @param y
     * @param isStoreSelection
     * @param element
     * @param x
     * @param y
     * @param isStoreSelection
     * @param element
     * @param x
     * @param y
     * @param isStoreSelection
     * @private
     */ // eslint-disable-next-line
TextSelection.prototype.selectAWord=function(element,x,y,isStoreSelection){if(element.nodeType===element.TEXT_NODE){var selection=window.getSelection();var range=element.ownerDocument.createRange();range.selectNodeContents(element);var currentPosition=0;var endPosition=range.endOffset;while(currentPosition<endPosition){range.setStart(element,currentPosition);range.setEnd(element,currentPosition+1);var rangeBounds=range.getBoundingClientRect();if(rangeBounds.left<=x&&rangeBounds.right>=x&&rangeBounds.top<=y&&rangeBounds.bottom>=y){var textContent=element.textContent;var indices=[];var startPosition=void 0;var endPos=void 0;for(var i=0;i<textContent.length;i++){if(textContent[i]===' '){indices.push(i);}}for(var j=0;j<indices.length;j++){if(currentPosition===indices[j]){startPosition=indices[j];endPos=indices[j];}if(indices[0]>currentPosition){startPosition=0;endPos=indices[j];break;}if(currentPosition>indices[j]&&currentPosition<indices[j+1]){startPosition=indices[j];endPos=indices[j+1];}else if(currentPosition>indices[j]){if(!indices[j+1]){startPosition=indices[j];}}}if(!endPos){endPos=textContent.length;}if(startPosition===0){range.setStart(element,startPosition);}else{range.setStart(element,startPosition+1);}range.setEnd(element,endPos);selection.removeAllRanges();selection.addRange(range);this.isTextSelection=true;// eslint-disable-next-line max-len
var startParent=sf.base.isNullOrUndefined(range.startContainer.parentElement)?range.startContainer.parentNode:range.startContainer.parentElement;// eslint-disable-next-line radix
this.selectionStartPage=parseInt(startParent.id.split('_text_')[1]);if(isStoreSelection){// eslint-disable-next-line max-len
this.selectionAnchorTouch={anchorNode:selection.anchorNode.parentElement.id,anchorOffset:selection.anchorOffset};this.selectionFocusTouch={focusNode:selection.focusNode.parentElement.id,focusOffset:selection.focusOffset};}if(!sf.base.Browser.isIE){range.detach();}break;}currentPosition+=1;}}else{for(var i=0;i<element.childNodes.length;i++){var range=this.getSelectionRange(i,element);var rangeBounds=range.getBoundingClientRect();if(rangeBounds.left<=x&&rangeBounds.right>=x&&rangeBounds.top<=y&&rangeBounds.bottom>=y){range.detach();this.selectAWord(element.childNodes[i],x,y,isStoreSelection);}else{range.detach();}}}};TextSelection.prototype.getSelectionRange=function(index,element){var range=element.childNodes[index].ownerDocument.createRange();range.selectNodeContents(element.childNodes[index]);return range;};/**
     * @param event
     * @private
     */TextSelection.prototype.selectEntireLine=function(event){var textIds=[];var targetElement=event.target;var targetRect=targetElement.getBoundingClientRect();// eslint-disable-next-line
var targetcentre=parseInt((targetRect.top+targetRect.height/2).toString());// eslint-disable-next-line radix
var pageNumber=parseInt(event.target.id.split('_text_')[1]);var textDivs=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_text_'+pageNumber+'"]');if(targetElement.classList.contains('e-pv-text')){this.pdfViewer.fireTextSelectionStart(pageNumber+1);for(var i=0;i<textDivs.length;i++){var rect=textDivs[i].getBoundingClientRect();// eslint-disable-next-line radix
var topValue=parseInt(rect.top.toString());// eslint-disable-next-line radix
var bottomValue=parseInt(rect.bottom.toString());if(topValue<=targetcentre&&bottomValue>targetcentre&&targetRect.bottom+10>bottomValue){var textId=textDivs[i].id;if(textId!==''){textIds.push(textId);}}}var selection=window.getSelection();selection.removeAllRanges();var range=document.createRange();var lengths=textIds.length-1;var d1=document.getElementById(textIds[0]);var d2=document.getElementById(textIds[lengths]);var childNodes=d2.childNodes.length;if(childNodes>0){range.setStart(d1.childNodes[0],0);range.setEnd(d2.childNodes[0],d2.textContent.length);}else{range.setStart(d1.childNodes[0],0);range.setEnd(d2,1);}// eslint-disable-next-line radix
this.selectionStartPage=parseInt(range.startContainer.parentElement.id.split('_text_')[1]);selection.addRange(range);this.isTextSelection=true;if(selection!=null&&this.pdfViewer.contextMenuSettings.contextMenuAction==='MouseUp'){this.calculateContextMenuPosition(event.clientY,event.clientY);}}};/**
     * @private
     */TextSelection.prototype.enableTextSelectionMode=function(){this.pdfViewerBase.isTextSelectionDisabled=false;this.pdfViewerBase.viewerContainer.classList.remove('e-disable-text-selection');this.pdfViewerBase.viewerContainer.classList.add('e-enable-text-selection');this.pdfViewerBase.viewerContainer.addEventListener('selectstart',function(){return true;});};TextSelection.prototype.clearTextSelection=function(){if(this.isTextSelection){this.pdfViewerBase.textLayer.clearDivSelection();if(window.getSelection){if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges();}}if(this.pdfViewer.linkAnnotationModule){var lowerPageIndex=this.pdfViewerBase.currentPageNumber-3;lowerPageIndex=lowerPageIndex<0?0:lowerPageIndex;var higherPageIndex=this.pdfViewer.currentPageNumber+1;// eslint-disable-next-line max-len
higherPageIndex=higherPageIndex<this.pdfViewerBase.pageCount-1?higherPageIndex:this.pdfViewerBase.pageCount-1;for(var i=lowerPageIndex;i<=higherPageIndex;i++){this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i,false);}}if(this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule){this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(true);}this.selectionRangeArray=[];this.isTextSelection=false;this.isTouchSelection=false;if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.searchAfterSelection();}this.pdfViewerBase.contextMenuModule.close();this.removeTouchElements();}};/**
     * @private
     */TextSelection.prototype.removeTouchElements=function(){if(this.dropDivElementLeft){this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft);this.dropDivElementLeft=null;this.dropElementLeft.style.transform='rotate(0deg)';}if(this.dropDivElementRight){this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight);this.dropDivElementRight=null;this.dropElementRight.style.transform='rotate(-90deg)';}};/**
     * @private
     */TextSelection.prototype.resizeTouchElements=function(){var viewerContainerLeft=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;if(this.dropDivElementLeft){var elementClientRect=this.dropDivElementLeft.getBoundingClientRect();var dropElementHeight=0;// eslint-disable-next-line max-len
var leftCurrentPagePosition=this.pdfViewerBase.getElement('_pageDiv_'+this.topStoreLeft.pageNumber).getBoundingClientRect();this.dropDivElementLeft.style.left=parseFloat(this.topStoreLeft.left.toString())*this.pdfViewerBase.getZoomFactor()+leftCurrentPagePosition.left-viewerContainerLeft-elementClientRect.width/2+'px';if(this.topStoreLeft.isHeightNeeded){dropElementHeight=elementClientRect.height/2*this.pdfViewerBase.getZoomFactor();}// eslint-disable-next-line max-len
this.dropDivElementLeft.style.top=parseFloat(this.topStoreLeft.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreLeft.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+dropElementHeight+'px';}if(this.dropDivElementRight){var elementClientRect=this.dropDivElementRight.getBoundingClientRect();var dropElementHeight=0;// eslint-disable-next-line max-len
var rightCurrentPagePosition=this.pdfViewerBase.getElement('_pageDiv_'+this.topStoreRight.pageNumber).getBoundingClientRect();this.dropDivElementRight.style.left=parseFloat(this.topStoreRight.left.toString())*this.pdfViewerBase.getZoomFactor()+rightCurrentPagePosition.left-viewerContainerLeft-elementClientRect.width/2+'px';if(this.topStoreRight.isHeightNeeded){dropElementHeight=elementClientRect.height/2*this.pdfViewerBase.getZoomFactor();}// eslint-disable-next-line max-len
this.dropDivElementRight.style.top=parseFloat(this.topStoreRight.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreRight.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+dropElementHeight+'px';}};/**
     * @param event
     * @private
     */TextSelection.prototype.textSelectionOnMouseup=function(event){this.clear();if(window.getSelection().anchorNode!==null){this.isMouseLeaveSelection=false;this.isSelectionStartTriggered=false;this.maintainSelectionOnZoom(true,false);this.fireTextSelectEnd();var isTextSearch=this.pdfViewerBase.textLayer.getTextSearchStatus();if(isTextSearch){this.pdfViewerBase.textLayer.clearDivSelection();// eslint-disable-next-line
var indexes=this.pdfViewer.textSearchModule.getIndexes();var lowerPageValue=parseFloat(indexes.lowerPageValue.toString());var higherPageValue=parseFloat(indexes.higherPageValue.toString());for(var i=lowerPageValue;i<higherPageValue;i++){this.applySelectionRangeOnScroll(i);}this.pdfViewer.textSearchModule.searchAfterSelection();}else{this.applySpanForSelection();}if(this.pdfViewer.linkAnnotationModule){this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber-1,false);}if(this.isTextSearched&&this.pdfViewer.contextMenuSettings.contextMenuAction==='MouseUp'){this.calculateContextMenuPosition(event.clientY,event.clientX);this.isTextSearched=false;}}else{this.pdfViewerBase.textLayer.clearDivSelection();if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.searchAfterSelection();}this.pdfViewerBase.contextMenuModule.close();this.removeTouchElements();}};/**
     * @private
     */TextSelection.prototype.fireTextSelectEnd=function(){if(this.selectionRangeArray.length!==0){var selectEndPageIndex=0;var selectedText='';// eslint-disable-next-line
var selectedBounds=[];for(var k=0;k<this.selectionRangeArray.length;k++){selectedText+=this.selectionRangeArray[k].textContent;for(var j=0;j<this.selectionRangeArray[k].rectangleBounds.length;j++){var currentBound=this.selectionRangeArray[k].rectangleBounds[j];// eslint-disable-next-line max-len
selectedBounds.push({left:currentBound.left,right:currentBound.right,top:currentBound.top,bottom:currentBound.bottom,width:currentBound.width,height:currentBound.height,pageIndex:this.selectionRangeArray[k].pageNumber+1});}if(this.selectionRangeArray[k].isBackward&&k===0){selectEndPageIndex=this.selectionRangeArray[k].pageNumber+1;}else if(!this.selectionRangeArray[k].isBackward&&k===this.selectionRangeArray.length-1){selectEndPageIndex=this.selectionRangeArray[k].pageNumber+1;}}this.pdfViewer.fireTextSelectionEnd(selectEndPageIndex,selectedText,selectedBounds);}};/**
     * @param isMaintainSelection
     * @param isStich
     * @param isMaintainSelection
     * @param isStich
     * @private
     */TextSelection.prototype.maintainSelectionOnZoom=function(isMaintainSelection,isStich){var selection=window.getSelection();if(selection.type==='Range'||!selection.type&&!selection.isCollapsed){var isBackward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(selection.anchorNode!==null){// eslint-disable-next-line radix
var anchorPageId=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);// eslint-disable-next-line radix
var focusPageId=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);if(this.isTouchSelection&&isNaN(focusPageId)){var focusElement=selection.focusNode;if(focusElement===this.pdfViewerBase.pageContainer){var lastChildNode=this.pdfViewerBase.pageContainer.lastChild;if(lastChildNode.classList.contains('e-pv-touch-select-drop')){// eslint-disable-next-line radix
focusPageId=parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);}else if(lastChildNode.classList.contains('e-pv-page-div')){// eslint-disable-next-line radix
focusPageId=parseInt(lastChildNode.id.split('_pageDiv_')[1]);}}}if(!isBackward){for(var i=anchorPageId;i<=focusPageId;i++){this.maintainSelectionOnScroll(i,isStich);}}else{for(var i=anchorPageId;i>=focusPageId;i--){this.maintainSelectionOnScroll(i,isStich);}}}if(!isMaintainSelection){selection.removeAllRanges();}}};/**
     * @param pageNumber
     * @private
     */TextSelection.prototype.isSelectionAvailableOnScroll=function(pageNumber){var isSelectionAvailable=false;var ranges=this.selectionRangeArray;for(var i=0;i<ranges.length;i++){if(ranges[i]!==null){if(pageNumber===ranges[i].pageNumber){isSelectionAvailable=true;if(this.isTouchSelection&&!this.pdfViewerBase.getMagnified()){isSelectionAvailable=false;}break;}}}return isSelectionAvailable;};/**
     * @param pageNumber
     * @private
     */TextSelection.prototype.applySelectionRangeOnScroll=function(pageNumber){if(this.isMouseLeaveSelection){this.applySelectionMouseScroll(pageNumber);}else{this.applySelectionRange(pageNumber);}};// eslint-disable-next-line
TextSelection.prototype.getSelectionRangeFromArray=function(pageNumber){var isSelectionAvailable=false;var selectionRange=null;var ranges=this.selectionRangeArray;for(var i=0;i<ranges.length;i++){if(ranges[i]!==null){if(pageNumber===ranges[i].pageNumber){selectionRange=ranges[i];isSelectionAvailable=true;break;}}}return{isSelectionAvailable:isSelectionAvailable,selectionRange:selectionRange};};TextSelection.prototype.applySelectionRange=function(pageNumber){var selectionObject=this.getSelectionRangeFromArray(pageNumber);var isSelectionAvailable=selectionObject.isSelectionAvailable;var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageNumber);if(textLayer){if(isSelectionAvailable&&textLayer.childNodes.length!==0){var selectionRange=selectionObject.selectionRange;var anchorOffsetDiv=void 0;var focusOffsetDiv=void 0;var anchorOffset=void 0;var focusOffset=void 0;if(selectionRange.isBackward){// eslint-disable-next-line radix
var startId=parseInt(selectionRange.endNode.split('_text_')[1].split('_')[1]);// eslint-disable-next-line radix
var endId=parseInt(selectionRange.startNode.split('_text_')[1].split('_')[1]);if(startId<endId){anchorOffsetDiv=startId;anchorOffset=selectionRange.endOffset;focusOffset=selectionRange.startOffset;focusOffsetDiv=endId;}else{anchorOffsetDiv=endId;anchorOffset=selectionRange.endOffset;focusOffsetDiv=startId;focusOffset=selectionRange.startOffset;}}else{// eslint-disable-next-line radix
anchorOffsetDiv=parseInt(selectionRange.startNode.split('text_')[1].split('_')[1]);// eslint-disable-next-line radix
focusOffsetDiv=parseInt(selectionRange.endNode.split('text_')[1].split('_')[1]);anchorOffset=selectionRange.startOffset;focusOffset=selectionRange.endOffset;}window.getSelection().removeAllRanges();// eslint-disable-next-line max-len
this.pdfViewerBase.textLayer.applySpanForSelection(pageNumber,pageNumber,anchorOffsetDiv,focusOffsetDiv,anchorOffset,focusOffset);if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.searchAfterSelection();}}}};TextSelection.prototype.applySelectionMouseScroll=function(pageNumber){var selectionObject=this.getSelectionRangeFromArray(pageNumber);var isSelectionAvailable=selectionObject.isSelectionAvailable;if(isSelectionAvailable){var selectionRange=selectionObject.selectionRange;var selection=window.getSelection();var anchorNode=document.getElementById(selectionRange.startNode).childNodes[0];var focusNode=document.getElementById(selectionRange.endNode).childNodes[0];var range=document.createRange();if(selection.anchorNode===null){if(!selectionRange.isBackward){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(anchorNode,selectionRange.startOffset);}}else{// eslint-disable-next-line
var anchorPageIndex=isNaN(parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]))?parseInt(selection.anchorNode.id.split('_pageDiv_')[1]):parseInt(selection.anchorNode.parentElement.id.split('_text_')[1]);if(isNaN(anchorPageIndex)){// eslint-disable-next-line radix
anchorPageIndex=parseInt(selection.anchorNode.id.split('_text_')[1]);}// eslint-disable-next-line
var focusPageIndex=isNaN(parseInt(selection.focusNode.parentElement.id.split('_text_')[1]))?parseInt(selection.focusNode.id.split('_pageDiv_')[1]):parseInt(selection.focusNode.parentElement.id.split('_text_')[1]);// eslint-disable-next-line radix
var currentAnchorIndex=parseInt(selectionRange.startNode.split('_text_')[1]);if(anchorPageIndex===focusPageIndex&&anchorPageIndex===currentAnchorIndex){if(!selectionRange.isBackward){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(anchorNode,selectionRange.startOffset);}}else if(!isNaN(anchorPageIndex)){if(!isNaN(anchorPageIndex)&&!selectionRange.isBackward){// eslint-disable-next-line max-len
if(anchorPageIndex<currentAnchorIndex&&currentAnchorIndex<focusPageIndex&&anchorPageIndex!==focusPageIndex){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else if(anchorPageIndex<currentAnchorIndex){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(selection.focusNode,selection.focusOffset);}}else{var isBackward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);// eslint-disable-next-line max-len
if(anchorPageIndex>currentAnchorIndex&&currentAnchorIndex>focusPageIndex&&anchorPageIndex!==focusPageIndex){if(!isBackward){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else{selection.extend(selection.focusNode,selection.focusOffset);}// eslint-disable-next-line max-len
}else if(anchorPageIndex<currentAnchorIndex&&currentAnchorIndex<focusPageIndex&&anchorPageIndex!==focusPageIndex){if(!isBackward){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else{selection.extend(selection.focusNode,selection.focusOffset);}}else if(anchorPageIndex<currentAnchorIndex){if(!isBackward){if(currentAnchorIndex!==this.selectionRangeArray[0].pageNumber){range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(anchorNode,selectionRange.startOffset);}}else{if(currentAnchorIndex!==this.selectionRangeArray[0].pageNumber){this.extendCurrentSelection(focusNode.parentElement,selectionRange.endOffset,selection,range);}else{this.extendCurrentSelection(anchorNode.parentElement,selectionRange.startOffset,selection,range);}}}else if(anchorPageIndex===currentAnchorIndex){if(currentAnchorIndex===focusPageIndex){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(anchorNode,selectionRange.startOffset);selection.removeAllRanges();selection.addRange(range);range=document.createRange();selection.extend(focusNode,selectionRange.endOffset);}else{if(isBackward){this.extendCurrentSelection(focusNode.parentElement,selectionRange.endOffset,selection,range);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(selection.focusNode,selection.focusOffset);}}}else if(focusPageIndex===currentAnchorIndex){if(isBackward){selection.extend(selection.focusNode,selection.focusOffset);}else{range.setStart(selection.anchorNode,selection.anchorOffset);range.setEnd(selection.focusNode,selection.focusOffset);}}else if(anchorPageIndex>currentAnchorIndex){// eslint-disable-next-line radix
var currentAnchorOffset=parseInt(selectionRange.startNode.split('_'+currentAnchorIndex+'_')[1]);// eslint-disable-next-line radix
var currentFocusOffset=parseInt(selectionRange.endNode.split('_'+currentAnchorIndex+'_')[1]);if(isBackward){if(currentAnchorIndex!==this.selectionRangeArray[0].pageNumber){if(currentAnchorOffset<currentFocusOffset){this.extendCurrentSelection(anchorNode.parentElement,selectionRange.startOffset,selection,range);}else{range.setStart(focusNode.parentElement,selectionRange.endOffset);range.setEnd(selection.anchorNode,selection.anchorOffset);}}else{this.extendCurrentSelection(focusNode.parentElement,selectionRange.endOffset,selection,range);}}else{if(currentAnchorOffset<currentFocusOffset){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(selection.focusNode,selection.focusOffset);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(selection.focusNode,selection.focusOffset);}}}}}else if(isNaN(anchorPageIndex)){if(!selectionRange.isBackward){range.setStart(anchorNode,selectionRange.startOffset);range.setEnd(focusNode,selectionRange.endOffset);}else{range.setStart(focusNode,selectionRange.endOffset);range.setEnd(anchorNode,selectionRange.startOffset);}}}if(range.toString()!==''){selection.removeAllRanges();selection.addRange(range);}}};/**
     * @param pageNumber
     * @param isStich
     * @param pageNumber
     * @param isStich
     * @private
     */TextSelection.prototype.maintainSelectionOnScroll=function(pageNumber,isStich){var isSelectionAvailable=this.isSelectionAvailableOnScroll(pageNumber);if(this.isTextSelection&&!isSelectionAvailable){this.maintainSelection(pageNumber,isStich);}};/**
     * @param pageNumber
     * @param isStich
     * @private
     */TextSelection.prototype.maintainSelection=function(pageNumber,isStich){var selection=window.getSelection();if(this.isTextSelection&&(selection.type==='Range'||!selection.type&&!selection.isCollapsed)){// eslint-disable-next-line
var anchorPageId=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);// eslint-disable-next-line
var focusPageId=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);if(isNaN(focusPageId)&&selection.anchorNode!==null){var backward_1=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(!backward_1){// eslint-disable-next-line radix
var lastChildNode=this.pdfViewerBase.pageContainer.lastChild;if(lastChildNode.classList.contains('e-pv-touch-select-drop')){// eslint-disable-next-line radix
focusPageId=parseInt(lastChildNode.previousSibling.previousSibling.id.split('_pageDiv_')[1]);}else{// eslint-disable-next-line radix
focusPageId=parseInt(lastChildNode.id.split('_pageDiv_')[1]);}}else{// eslint-disable-next-line radix
focusPageId=parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split('_pageDiv_')[1]);}}var backward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(this.isTouchSelection&&pageNumber>focusPageId&&pageNumber>anchorPageId){return;}if(anchorPageId===focusPageId){var selectionObject=null;var selectionBounds=this.getSelectionBounds(selection.getRangeAt(0),pageNumber);var selectionRectBounds=this.getSelectionRectangleBounds(selection.getRangeAt(0),pageNumber);// eslint-disable-next-line max-len
var anchorOffsetValue=this.getNodeElementFromNode(selection.anchorNode).childNodes.length===1?selection.anchorOffset:this.getCorrectOffset(selection.anchorNode,selection.anchorOffset);var focusOffsetValue=this.getNodeElementFromNode(selection.focusNode).childNodes.length===1?selection.focusOffset:this.getCorrectOffset(selection.focusNode,selection.focusOffset);selectionObject={isBackward:backward,startNode:this.getNodeElementFromNode(selection.anchorNode).id,startOffset:anchorOffsetValue,endNode:this.getNodeElementFromNode(selection.focusNode).id,// eslint-disable-next-line max-len
endOffset:focusOffsetValue,textContent:this.allTextContent,pageNumber:pageNumber,bound:selectionBounds,rectangleBounds:selectionRectBounds};this.pushSelectionRangeObject(selectionObject,pageNumber);}else{var selectionObject=this.createRangeObjectOnScroll(pageNumber,anchorPageId,focusPageId);if(selectionObject){this.pushSelectionRangeObject(selectionObject,pageNumber);if(isStich){this.stichSelection(backward,selection,pageNumber);}}}}};TextSelection.prototype.getCorrectOffset=function(node,offset){var offsetValue=0;var parentElement=this.getNodeElementFromNode(node);for(var i=0;i<parentElement.childNodes.length;i++){if(parentElement.childNodes[i]===node){offsetValue=offsetValue+offset;break;}else{offsetValue=offsetValue+parentElement.childNodes[i].textContent.length;}}return offsetValue;};TextSelection.prototype.pushSelectionRangeObject=function(selectionObject,pageNumber){if(this.isTouchSelection){var currentObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return obj.pageNumber===pageNumber;});if(currentObject.length>0){var currentObjectIndex=this.selectionRangeArray.indexOf(currentObject[0]);this.selectionRangeArray.splice(currentObjectIndex,1,selectionObject);return;}}var nextPageObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return obj.pageNumber===pageNumber+1;});if(nextPageObject.length===0){if(this.isTouchSelection&&this.selectionRangeArray.length!==0){var prevPageObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return obj.pageNumber===pageNumber-1;});if(prevPageObject.length!==0){var prevIndex=this.selectionRangeArray.indexOf(prevPageObject[0]);this.selectionRangeArray.splice(prevIndex+1,0,selectionObject);}else{var firstObject=this.selectionRangeArray[0];if(pageNumber<firstObject.pageNumber){this.selectionRangeArray.splice(0,0,selectionObject);}else{this.selectionRangeArray.push(selectionObject);}}}else{this.selectionRangeArray.push(selectionObject);}}else{var index=this.selectionRangeArray.indexOf(nextPageObject[0]);this.selectionRangeArray.splice(index,0,selectionObject);}};TextSelection.prototype.extendCurrentSelection=function(element,offset,selection,range){var currentFocusOffset=selection.focusOffset;var currentFocusElement=selection.focusNode.parentElement.id;// eslint-disable-next-line
var focusPageId=isNaN(parseInt(currentFocusElement.split('_text_')[1]))?parseInt(selection.focusNode.id.split('_pageDiv_')[1]):parseInt(currentFocusElement.split('_text_')[1]);// eslint-disable-next-line radix
if(isNaN(parseInt(currentFocusElement.split('_text_')[1]))){// eslint-disable-next-line
currentFocusElement=this.pdfViewerBase.getElement('_textLayer_'+(focusPageId+1)).firstChild.id;}range.setStart(element.childNodes[0],offset);range.setEnd(element.childNodes[0],offset);selection.removeAllRanges();selection.addRange(range);selection.extend(document.getElementById(currentFocusElement).childNodes[0],currentFocusOffset);};TextSelection.prototype.stichSelection=function(backward,selection,pageNumber){var range=document.createRange();var nextPageElement;if(backward){nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber-1));if(nextPageElement){var lastElement=nextPageElement.lastChild;if(lastElement){this.extendCurrentSelection(lastElement,this.getTextLastLength(lastElement),selection,range);}else{nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber-2));lastElement=nextPageElement.lastChild;this.extendCurrentSelection(lastElement,this.getTextLastLength(lastElement),selection,range);}}else{nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber+1));var lastElement=nextPageElement.firstChild;this.extendCurrentSelection(lastElement,0,selection,range);}}else{nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber+1));if(nextPageElement){var firstElement=nextPageElement.firstChild;if(!firstElement){nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(pageNumber+2));firstElement=nextPageElement.firstChild;range.setStart(firstElement.childNodes[0],0);}else{range.setStart(firstElement.childNodes[0],0);}range.setEnd(selection.focusNode,selection.focusOffset);selection.removeAllRanges();selection.addRange(range);}}};/**
     * @param currentPageNumber
     * @private
     */TextSelection.prototype.textSelectionOnMouseWheel=function(currentPageNumber){this.isMouseLeaveSelection=true;this.stichSelectionOnScroll(currentPageNumber);};/**
     * @param currentPageNumber
     * @private
     */TextSelection.prototype.stichSelectionOnScroll=function(currentPageNumber){var selection=window.getSelection();if(this.isTextSelection){// eslint-disable-next-line radix
var anchorPageId=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);// eslint-disable-next-line radix
var focusPageId=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);var nextPageElement=void 0;if(anchorPageId!==currentPageNumber&&focusPageId!==currentPageNumber){var backward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);if(!backward){nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(currentPageNumber-1));if(nextPageElement){var lastElement=nextPageElement.lastChild;if(lastElement){if(lastElement.childNodes[0]){this.extendSelectionStich(lastElement.childNodes[0],this.getTextLastLength(lastElement),selection);}else{this.extendSelectionStich(lastElement,this.getTextLastLength(lastElement),selection);}}else{nextPageElement=this.pdfViewerBase.getElement('_textLayer_'+currentPageNumber);var lastElement_1=nextPageElement.firstChild;this.extendSelectionStich(lastElement_1.childNodes[0],0,selection);}}}else{nextPageElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+(currentPageNumber-1));if(nextPageElement){var lastElement=nextPageElement.firstChild;if(lastElement){this.extendSelectionStich(lastElement.childNodes[0],0,selection);}}}}this.maintainSelectionArray();}};TextSelection.prototype.extendSelectionStich=function(node,offset,selection){if(selection.extend){selection.extend(node,offset);}};/**
     * @param pageNumber
     * @param anchorPageId
     * @param focusPageId
     * @param pageNumber
     * @param anchorPageId
     * @param focusPageId
     * @private
     */TextSelection.prototype.createRangeObjectOnScroll=function(pageNumber,anchorPageId,focusPageId){var selectionObject=null;var selection=window.getSelection();if(selection.anchorNode!==null){var backward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);var firstElement=void 0;var lastElement=void 0;var startOffset=void 0;var endOffset=void 0;var element=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageNumber);if(element.childNodes){if(!backward){if(pageNumber===anchorPageId){firstElement=this.getNodeElementFromNode(selection.anchorNode);// eslint-disable-next-line max-len
lastElement=element.lastChild;startOffset=this.getCorrectOffset(selection.anchorNode,selection.anchorOffset);endOffset=this.getTextLastLength(lastElement);}else if(pageNumber>anchorPageId&&pageNumber<focusPageId){// eslint-disable-next-line max-len
firstElement=element.firstChild;// eslint-disable-next-line max-len
lastElement=element.lastChild;startOffset=0;endOffset=this.getTextLastLength(lastElement);}else if(pageNumber===focusPageId){// eslint-disable-next-line max-len
firstElement=element.firstChild;var pageNumberIndex=this.getNodeElementFromNode(selection.focusNode).id.indexOf(focusPageId.toString());if(pageNumberIndex!==-1){lastElement=this.getNodeElementFromNode(selection.focusNode);endOffset=this.getCorrectOffset(selection.focusNode,selection.focusOffset);}else{// eslint-disable-next-line max-len
lastElement=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+focusPageId).lastChild;endOffset=this.getTextLastLength(lastElement);}startOffset=0;}}else{if(pageNumber===anchorPageId){firstElement=this.getNodeElementFromNode(selection.anchorNode);// eslint-disable-next-line max-len
lastElement=element.firstChild;startOffset=this.getCorrectOffset(selection.anchorNode,selection.anchorOffset);endOffset=0;}else if(pageNumber<anchorPageId&&pageNumber>focusPageId){// eslint-disable-next-line max-len
firstElement=element.firstChild;// eslint-disable-next-line max-len
lastElement=element.lastChild;startOffset=0;endOffset=this.getTextLastLength(lastElement);}else if(pageNumber===focusPageId){firstElement=this.getNodeElementFromNode(selection.focusNode);// eslint-disable-next-line max-len
lastElement=element.lastChild;startOffset=this.getCorrectOffset(selection.focusNode,selection.focusOffset);endOffset=this.getTextLastLength(lastElement);}}if(firstElement&&lastElement){// eslint-disable-next-line max-len
var selectionRangeObject=this.getSelectionRangeObject(firstElement.id,startOffset,lastElement.id,endOffset,pageNumber);var selectionString=selectionRangeObject.toString();var selectionBound=this.getSelectionBounds(selectionRangeObject,pageNumber);var selectionRectBounds=this.getSelectionRectangleBounds(selectionRangeObject,pageNumber);// eslint-disable-next-line max-len
return selectionObject={isBackward:backward,startNode:firstElement.id,startOffset:startOffset,endNode:lastElement.id,endOffset:endOffset,textContent:this.allTextContent,pageNumber:pageNumber,bound:selectionBound,rectangleBounds:selectionRectBounds};}else{return null;}}}return null;};TextSelection.prototype.getSelectionRangeObject=function(startNode,startOffset,endNode,endOffset,pageNumber){var startElement=document.getElementById(startNode);var endElement=document.getElementById(endNode);if(startElement.childNodes[0]){startElement=startElement.childNodes[0];}if(endElement.childNodes[0]){endElement=endElement.childNodes[0];}// eslint-disable-next-line radix
var currentAnchorOffset=parseInt(startNode.split('_'+pageNumber+'_')[1]);// eslint-disable-next-line radix
var currentFocusOffset=parseInt(endNode.split('_'+pageNumber+'_')[1]);var range=document.createRange();if(currentAnchorOffset<=currentFocusOffset){range.setStart(startElement,startOffset);range.setEnd(endElement,endOffset);}else{range.setStart(endElement,endOffset);range.setEnd(startElement,startOffset);}return range;};TextSelection.prototype.getSelectionBounds=function(range,pageNumber){var startElement=this.getNodeElementFromNode(range.startContainer);var endElement=this.getNodeElementFromNode(range.endContainer);var bounds=null;if(startElement!==endElement){var newStartRange=document.createRange();// eslint-disable-next-line max-len
var startRange=this.createRangeForSelection(range.startContainer,range.endContainer,range.startOffset,range.endOffset,newStartRange);bounds=this.normalizeBounds(startRange.getBoundingClientRect(),pageNumber);}else{bounds=this.normalizeBounds(range.getBoundingClientRect(),pageNumber);}return bounds;};TextSelection.prototype.getSelectionRectangleBounds=function(range,pageNumber){var selectionBounds=[];var startElement=this.getNodeElementFromNode(range.startContainer);var endElement=this.getNodeElementFromNode(range.endContainer);var bounds=null;var selectionTexts=[];this.allTextContent="";if(startElement!==endElement){var startOffset=0;var endOffset=0;var currentId=0;var anchorPageId=this.pdfViewerBase.textLayer.getPageIndex(range.startContainer);var anchorTextId=this.pdfViewerBase.textLayer.getTextIndex(range.startContainer,anchorPageId);var focusPageId=this.pdfViewerBase.textLayer.getPageIndex(range.endContainer);var focusTextId=this.pdfViewerBase.textLayer.getTextIndex(range.endContainer,focusPageId);var textDivs=this.pdfViewerBase.getElement('_textLayer_'+focusPageId).childNodes;if(pageNumber===anchorPageId){currentId=anchorTextId;}else{currentId=0;}for(var j=currentId;j<textDivs.length;j++){var textElement=textDivs[j];if(j===anchorTextId){startOffset=range.startOffset;}else{startOffset=0;}if(j===focusTextId){endOffset=range.endOffset;}else{endOffset=textElement.textContent.length;}if(startOffset!==0||endOffset!==0){var newRange=document.createRange();for(var k=0;k<textElement.childNodes.length;k++){var node=textElement.childNodes[k];newRange.setStart(node,startOffset);newRange.setEnd(node,endOffset);}var boundingRect=this.normalizeBounds(newRange.getBoundingClientRect(),pageNumber);var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var textRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);if(textElement&&textElement.style.transform!==''){if(textElement.style.transform.startsWith('rotate(90deg)')){textRotate=90;}else if(textElement.style.transform.startsWith('rotate(180deg)')){textRotate=180;}else if(textElement.style.transform.startsWith('rotate(-90deg)')||textElement.style.transform.startsWith('rotate(270deg)')){textRotate=270;}else{textRotate=0;}}boundingRect.rotation=textRotate;selectionBounds.push(boundingRect);var textselection=newRange.toString();selectionTexts.push(textselection);newRange.detach();if(j===focusTextId){break;}}}for(var i=0;i<selectionTexts.length;i++){var text=selectionTexts[i];if(text.slice(text.length-2)!=='\r\n'||i===selectionTexts.length-1){this.allTextContent+=text;}else{this.allTextContent+=text;}}}else{bounds=this.normalizeBounds(range.getBoundingClientRect(),pageNumber);this.allTextContent=range.toString();var pageDetails=this.pdfViewerBase.pageSize[pageNumber];var textRotate=0;var pageRotation=this.getAngle(pageDetails.rotation);if(startElement&&startElement.style.transform!==''){if(startElement.style.transform.startsWith('rotate(90deg)')){textRotate=90;}else if(startElement.style.transform.startsWith('rotate(180deg)')){textRotate=180;}else if(startElement.style.transform.startsWith('rotate(-90deg)')||startElement.style.transform.startsWith('rotate(270deg)')){textRotate=270;}else{textRotate=0;}}bounds.rotation=textRotate;selectionBounds.push(bounds);}return selectionBounds;};TextSelection.prototype.getAngle=function(rotation){var angle=0;if(rotation){switch(rotation){case 0:angle=0;break;case 1:angle=90;break;case 2:angle=180;break;case 3:angle=270;break;}}return angle;};TextSelection.prototype.getTextId=function(elementId){var index=elementId.lastIndexOf('_');var divId=elementId.substring(index+1,elementId.length);// eslint-disable-next-line radix
return parseInt(divId);};TextSelection.prototype.normalizeBounds=function(bound,pageNumber){var newBounds=null;var currentPageElement=this.pdfViewerBase.getElement('_pageDiv_'+pageNumber);if(this.pdfViewerBase.isMixedSizeDocument){var currentTextElement=this.pdfViewerBase.getElement('_textLayer_'+pageNumber);if(currentTextElement){currentPageElement=currentTextElement;}}var currentPageRect=currentPageElement.getBoundingClientRect();newBounds={x:this.getMagnifiedValue(bound.left-currentPageRect.left),y:this.getMagnifiedValue(bound.top-currentPageRect.top),bottom:this.getMagnifiedValue(bound.bottom-currentPageRect.top),height:this.getMagnifiedValue(bound.height),left:this.getMagnifiedValue(bound.left-currentPageRect.left),top:this.getMagnifiedValue(bound.top-currentPageRect.top),right:this.getMagnifiedValue(bound.right-currentPageRect.left),width:this.getMagnifiedValue(bound.width)};return newBounds;};TextSelection.prototype.getMagnifiedValue=function(value){return value/this.pdfViewerBase.getZoomFactor();};/**
     * @param pageNumber
     * @private
     */TextSelection.prototype.getCurrentSelectionBounds=function(pageNumber){var bound=null;var ranges=this.selectionRangeArray;for(var i=0;i<ranges.length;i++){if(ranges[i]!==null){if(pageNumber===ranges[i].pageNumber){bound=ranges[i].bound;}}}return bound;};TextSelection.prototype.createRangeForSelection=function(start,end,startOffset,endOffset,range){range.setStart(start,startOffset);range.setEnd(end,endOffset);return range;};TextSelection.prototype.maintainSelectionArray=function(){var _this=this;if(this.selectionRangeArray.length!==0){var selection=window.getSelection();var isBackward=this.pdfViewerBase.textLayer.isBackWardSelection(selection);// eslint-disable-next-line
var anchorPage=isNaN(parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]))?parseInt(selection.anchorNode.id.split('_pageDiv_')[1]):parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);if(isNaN(anchorPage)){// eslint-disable-next-line radix
anchorPage=parseInt(selection.anchorNode.id.split('_text_')[1]);}// eslint-disable-next-line
var focusPage_1=isNaN(parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]))?parseInt(selection.focusNode.id.split('_pageDiv_')[1]):parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);if(isNaN(focusPage_1)){// eslint-disable-next-line
focusPage_1=isNaN(parseInt(selection.focusNode.id.split('_text_')[1]))?parseInt(selection.focusNode.id.split('_textLayer_')[1]):parseInt(selection.focusNode.id.split('_text_')[1]);}var arrayObject=[];if(!isBackward){arrayObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return!(_this.selectionStartPage<=obj.pageNumber&&obj.pageNumber<focusPage_1);});}else{arrayObject=this.selectionRangeArray.filter(// eslint-disable-next-line
function(obj){return!(focusPage_1<obj.pageNumber&&obj.pageNumber<=_this.selectionStartPage);});}if(arrayObject.length>0){for(var i=0;i<arrayObject.length;i++){var indexInArray=this.selectionRangeArray.indexOf(arrayObject[i]);if(indexInArray!==-1){this.selectionRangeArray.splice(indexInArray,1);}}if(this.selectionRangeArray.length===1){// eslint-disable-next-line max-len
if(this.selectionRangeArray[0].pageNumber===anchorPage||this.selectionRangeArray[0].pageNumber===focusPage_1){arrayObject=[];}}}}};/**
     * @private
     */TextSelection.prototype.applySpanForSelection=function(){var selection=window.getSelection();// eslint-disable-next-line max-len
if(selection.anchorNode===selection.focusNode&&selection.anchorOffset===selection.focusOffset&&!selection.isCollapsed){selection.removeAllRanges();}// eslint-disable-next-line max-len
if(selection.anchorNode!==null&&this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(selection.anchorNode))){var isBackWardSelection=this.pdfViewerBase.textLayer.isBackWardSelection(selection);var anchorPageId=void 0;var focusPageId=void 0;var anchorOffsetDiv=void 0;var focusOffsetDiv=void 0;var anchorOffset=void 0;var focusOffset=void 0;if(isBackWardSelection){// eslint-disable-next-line radix
anchorPageId=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1]);// eslint-disable-next-line radix
focusPageId=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1]);// eslint-disable-next-line radix
anchorOffsetDiv=parseInt(this.getNodeElementFromNode(selection.focusNode).id.split('_text_')[1].split('_')[1]);// eslint-disable-next-line radix
focusOffsetDiv=parseInt(this.getNodeElementFromNode(selection.anchorNode).id.split('_text_')[1].split('_')[1]);anchorOffset=selection.focusOffset;focusOffset=selection.anchorOffset;}else{var anchorElement=this.getNodeElementFromNode(selection.anchorNode);var focusElement=this.getNodeElementFromNode(selection.focusNode);// eslint-disable-next-line
anchorPageId=anchorElement.id.indexOf('text_')!==-1?parseInt(anchorElement.id.split('text_')[1]):parseInt(anchorElement.id.split('_textLayer_')[1]);// eslint-disable-next-line
focusPageId=focusElement.id.indexOf('text_')!==-1?parseInt(focusElement.id.split('text_')[1]):parseInt(focusElement.id.split('_textLayer_')[1]);var isFocusChanged=false;if(this.isTouchSelection){if(selection.focusNode===this.pdfViewerBase.pageContainer){var lastChildNode=this.pdfViewerBase.pageContainer.lastChild;if(lastChildNode.classList.contains('e-pv-touch-select-drop')){var lastPageDiv=lastChildNode.previousSibling.previousSibling;// eslint-disable-next-line radix
focusPageId=parseInt(lastPageDiv.id.split('_pageDiv_')[1]);focusElement=this.pdfViewerBase.getElement('_textLayer_'+focusPageId).lastChild;isFocusChanged=true;}else if(lastChildNode.classList.contains('e-pv-page-div')){var lastPageDiv=lastChildNode;// eslint-disable-next-line radix
focusPageId=parseInt(lastPageDiv.id.split('_pageDiv_')[1]);focusElement=this.pdfViewerBase.getElement('_textLayer_'+focusPageId).lastChild;isFocusChanged=true;}}}if(anchorElement.classList.contains('e-pv-maintaincontent')){anchorElement=this.getNodeElementFromNode(anchorElement);// eslint-disable-next-line radix
anchorPageId=parseInt(anchorElement.id.split('text_')[1]);}if(focusElement.classList.contains('e-pv-maintaincontent')){focusElement=this.getNodeElementFromNode(focusElement);// eslint-disable-next-line radix
focusPageId=parseInt(focusElement.id.split('text_')[1]);}if(anchorPageId===focusPageId){if(anchorElement.contains(focusElement)){anchorElement=focusElement;}if(focusElement.contains(anchorElement)){focusElement=anchorElement;}}// eslint-disable-next-line radix
anchorOffsetDiv=anchorElement.id.split('text_')[1]?parseInt(anchorElement.id.split('text_')[1].split('_')[1]):null;// eslint-disable-next-line radix
focusOffsetDiv=focusElement.id.split('text_')[1]?parseInt(focusElement.id.split('text_')[1].split('_')[1]):null;anchorOffsetDiv=isNaN(anchorOffsetDiv)?focusOffsetDiv:anchorOffsetDiv;focusOffsetDiv=isNaN(focusOffsetDiv)?anchorOffsetDiv:focusOffsetDiv;anchorOffset=selection.anchorOffset;focusOffset=!isFocusChanged?selection.focusOffset:focusElement.textContent.length;}selection.removeAllRanges();this.pdfViewerBase.textLayer.clearDivSelection();// eslint-disable-next-line max-len
this.pdfViewerBase.textLayer.applySpanForSelection(anchorPageId,focusPageId,anchorOffsetDiv,focusOffsetDiv,anchorOffset,focusOffset);if(this.pdfViewer.textSearchModule){this.pdfViewer.textSearchModule.searchAfterSelection();}}};/**
     * @param event
     * @param x
     * @param y
     * @private
     */TextSelection.prototype.initiateTouchSelection=function(event,x,y){if(this.pdfViewerBase.isShapeBasedAnnotationsEnabled()){if(this.pdfViewer.selectedItems.annotations.length>0){this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex);}}// eslint-disable-next-line
var element=event.target;var belowElements=document.elementsFromPoint(event.touches[0].clientX,event.touches[0].clientY);if(belowElements.length!==0){if(belowElements[0].classList.contains('e-pv-hyperlink')&&belowElements[1].classList.contains('e-pv-text')){element=belowElements[1];}}var pageNumber=parseFloat(element.id.split('_')[2]);this.pdfViewer.fireTextSelectionStart(pageNumber+1);this.selectAWord(element,x,y,true);this.createTouchSelectElement(event);this.maintainSelectionOnZoom(true,false);this.fireTextSelectEnd();this.applySpanForSelection();};// eslint-disable-next-line
TextSelection.prototype.selectTextByTouch=function(element,x,y,isForwardSelection,target,isCloserMovement){var isTextSelected=false;if(element.nodeType===element.TEXT_NODE){var rangeObject=element.ownerDocument.createRange();var selection=window.getSelection();rangeObject.selectNodeContents(element);var currentPosition=0;var endPosition=rangeObject.endOffset;while(currentPosition<endPosition){rangeObject.setStart(element,currentPosition);rangeObject.setEnd(element,currentPosition+1);var rangeBounds=rangeObject.getBoundingClientRect();if(rangeBounds.left<=x&&rangeBounds.right>=x&&rangeBounds.top<=y&&rangeBounds.bottom>=y){if(selection.anchorNode!=null){if(isForwardSelection){rangeObject.setStart(selection.anchorNode,selection.anchorOffset);}// eslint-disable-next-line max-len
rangeObject=this.setTouchSelectionStartPosition(selection,rangeObject,isForwardSelection,target,element,currentPosition,isCloserMovement);if(isForwardSelection){selection.extend(element,currentPosition);}isTextSelected=true;}rangeObject.detach();return isTextSelected;}currentPosition+=1;}}else{for(var i=0;i<element.childNodes.length;i++){var range=element.childNodes[i].ownerDocument.createRange();range.selectNodeContents(element.childNodes[i]);var rangeBounds=range.getBoundingClientRect();if(rangeBounds.left<=x&&rangeBounds.right>=x&&rangeBounds.top<=y&&rangeBounds.bottom>=y){range.detach();return this.selectTextByTouch(element.childNodes[i],x,y,isForwardSelection,target,isCloserMovement);}else{range.detach();}}}return isTextSelected;};// eslint-disable-next-line
TextSelection.prototype.setTouchSelectionStartPosition=function(selection,range,isForwardSelection,target,element,currentPosition,isCloserMovement){if(isForwardSelection){if(target==='left'){// eslint-disable-next-line
var startNode=this.getTouchFocusElement(selection,true);range.setStart(startNode.focusNode,startNode.focusOffset);range.setEnd(element,currentPosition);this.selectionAnchorTouch={anchorNode:range.endContainer.parentElement.id,anchorOffset:range.endOffset};}else if(target==='right'){// eslint-disable-next-line
var startNode=this.getTouchAnchorElement(selection,false);range.setStart(startNode.anchorNode,startNode.anchorOffset);range.setEnd(element,currentPosition);this.selectionFocusTouch={focusNode:range.endContainer.parentElement.id,focusOffset:range.endOffset};}}else{if(target==='left'){if(!isCloserMovement){// eslint-disable-next-line
var startNode=this.getTouchFocusElement(selection,false);range.setStart(element,currentPosition);// eslint-disable-next-line radix
range.setEnd(startNode.focusNode,startNode.focusOffset);if(range.toString()===''){range.setStart(element,currentPosition);range.setEnd(selection.focusNode,selection.focusOffset);}this.selectionAnchorTouch={anchorNode:range.startContainer.parentElement.id,anchorOffset:range.startOffset};}else{range.setStart(element,currentPosition);range.setEnd(selection.focusNode,selection.focusOffset);this.selectionAnchorTouch={anchorNode:range.startContainer.parentElement.id,anchorOffset:range.startOffset};}}else if(target==='right'){// eslint-disable-next-line
var startNode=this.getTouchAnchorElement(selection,true);range.setStart(element,currentPosition);range.setEnd(startNode.anchorNode,startNode.anchorOffset);if(range.toString()===''){range.setStart(startNode.anchorNode,startNode.anchorOffset);range.setEnd(element,currentPosition);}this.selectionFocusTouch={focusNode:range.startContainer.parentElement.id,focusOffset:range.startOffset};}}selection.removeAllRanges();selection.addRange(range);return range;};TextSelection.prototype.getTouchAnchorElement=function(selection,isCurrentFocus){var element=document.getElementById(this.selectionAnchorTouch.anchorNode.toString());var startNode=null;var offset=0;if(element){startNode=element.childNodes[0];// eslint-disable-next-line radix
offset=parseInt(this.selectionAnchorTouch.anchorOffset.toString());}else{if(isCurrentFocus){startNode=selection.focusNode;offset=selection.focusOffset;}else{startNode=selection.anchorNode;offset=selection.anchorOffset;}}return{anchorNode:startNode,anchorOffset:offset};};TextSelection.prototype.getTouchFocusElement=function(selection,isCurrentAnchor){var element=document.getElementById(this.selectionFocusTouch.focusNode.toString());var startNode=null;var offset=0;if(element){startNode=element.childNodes[0];// eslint-disable-next-line radix
offset=parseInt(this.selectionFocusTouch.focusOffset.toString());}else{if(isCurrentAnchor){startNode=selection.anchorNode;offset=selection.anchorOffset;}else{startNode=selection.focusNode;offset=selection.focusOffset;}}return{focusNode:startNode,focusOffset:offset};};TextSelection.prototype.createTouchSelectElement=function(event){this.isTouchSelection=true;var selection=window.getSelection();if(selection.type==='Range'){// eslint-disable-next-line max-len
this.dropDivElementLeft=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_touchSelect_droplet_left',className:'e-pv-touch-select-drop'});// eslint-disable-next-line max-len
this.dropDivElementRight=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_touchSelect_droplet_right',className:'e-pv-touch-select-drop'});this.dropElementLeft=sf.base.createElement('div',{className:'e-pv-touch-ellipse'});this.dropElementLeft.style.transform='rotate(0deg)';this.dropDivElementLeft.appendChild(this.dropElementLeft);this.dropElementRight=sf.base.createElement('div',{className:'e-pv-touch-ellipse'});this.dropElementRight.style.transform='rotate(-90deg)';this.dropElementRight.style.margin='0 9px 0 0';this.dropDivElementRight.appendChild(this.dropElementRight);this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft);this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);var range=selection.getRangeAt(0);var rangePosition=range.getBoundingClientRect();var dropElementRect=this.dropDivElementLeft.getBoundingClientRect();// eslint-disable-next-line max-len
var pageTopValue=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top;var viewerLeftPosition=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;var topClientValue=this.getClientValueTop(rangePosition.top,this.pdfViewerBase.currentPageNumber-1);// eslint-disable-next-line max-len
var topPositionValue=topClientValue+pageTopValue*this.pdfViewerBase.getZoomFactor()+dropElementRect.height/2*this.pdfViewerBase.getZoomFactor()+'px';this.dropDivElementLeft.style.top=topPositionValue;this.dropDivElementLeft.style.left=rangePosition.left-(viewerLeftPosition+dropElementRect.width)+'px';this.dropDivElementRight.style.top=topPositionValue;// eslint-disable-next-line max-len
this.dropDivElementRight.style.left=rangePosition.left+rangePosition.width-viewerLeftPosition+'px';var currentPageLeft=this.pdfViewerBase.getElement('_pageDiv_'+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left;var currentRangeLeft=rangePosition.left-currentPageLeft;// eslint-disable-next-line max-len
this.topStoreLeft={pageTop:pageTopValue,topClientValue:this.getMagnifiedValue(topClientValue),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(currentRangeLeft),isHeightNeeded:true};// eslint-disable-next-line max-len
this.topStoreRight={pageTop:pageTopValue,topClientValue:this.getMagnifiedValue(topClientValue),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(currentRangeLeft+rangePosition.width),isHeightNeeded:true};this.dropDivElementLeft.addEventListener('touchstart',this.onLeftTouchSelectElementTouchStart);this.dropDivElementLeft.addEventListener('touchmove',this.onLeftTouchSelectElementTouchMove);this.dropDivElementLeft.addEventListener('touchend',this.onLeftTouchSelectElementTouchEnd);this.dropDivElementRight.addEventListener('touchstart',this.onRightTouchSelectElementTouchStart);this.dropDivElementRight.addEventListener('touchmove',this.onRightTouchSelectElementTouchMove);this.dropDivElementRight.addEventListener('touchend',this.onRightTouchSelectElementTouchEnd);// eslint-disable-next-line max-len
if(!sf.base.Browser.isDevice&&this.pdfViewer.enableDesktopMode){this.pdfViewerBase.contextMenuModule.open(event.touches[0].clientX,event.touches[0].clientY,this.pdfViewerBase.viewerContainer);}}};/**
     * @param top
     * @param left
     * @private
     */ // eslint-disable-next-line
TextSelection.prototype.calculateContextMenuPosition=function(top,left){var _this=this;var topMargin=10;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){// eslint-disable-next-line
var contextTop=top-this.contextMenuHeight;if(contextTop<this.pdfViewerBase.toolbarHeight){top=top+this.contextMenuHeight;}else{top=contextTop;}if(top+this.contextMenuHeight>window.innerHeight){top=top-this.contextMenuHeight;}}if(this.pdfViewer.contextMenuSettings.contextMenuAction==='MouseUp'){left=left-50;}var proxy=this;setTimeout(function(){var leftValue=35;var selectedContent=document.getElementsByClassName("e-pv-maintaincontent")[0].getBoundingClientRect();if(selectedContent){if(selectedContent.bottom+proxy.contextMenuHeight+proxy.pdfViewerBase.toolbarHeight>window.innerHeight){top=selectedContent.top-(proxy.contextMenuHeight+proxy.pdfViewerBase.toolbarHeight-topMargin);}else{top=selectedContent.bottom+proxy.pdfViewerBase.toolbarHeight-topMargin;}left=selectedContent.left-leftValue;var toolbarModule=_this.pdfViewer.toolbarModule?_this.pdfViewer.toolbarModule.annotationToolbarModule:'null';if(!toolbarModule||!toolbarModule.textMarkupToolbarElement||toolbarModule.textMarkupToolbarElement.children.length===0){// eslint-disable-next-line max-len
proxy.pdfViewerBase.contextMenuModule.open(top,left,proxy.pdfViewerBase.viewerContainer);}}});};/**
     * @private
     */TextSelection.prototype.initiateSelectionByTouch=function(){this.pdfViewerBase.textLayer.clearDivSelection();this.pdfViewerBase.contextMenuModule.close();var lowerPageIndex=this.pdfViewerBase.currentPageNumber-3;lowerPageIndex=lowerPageIndex<0?0:lowerPageIndex;var higherPageIndex=this.pdfViewer.currentPageNumber+1;// eslint-disable-next-line max-len
higherPageIndex=higherPageIndex<this.pdfViewerBase.pageCount-1?higherPageIndex:this.pdfViewerBase.pageCount-1;for(var i=lowerPageIndex;i<=higherPageIndex;i++){var textLayer=this.pdfViewerBase.getElement('_textLayer_'+i);if(textLayer){if(textLayer.childNodes!==null){this.applySelectionMouseScroll(i);}}}if(this.selectionRangeArray.length>0){this.pdfViewer.fireTextSelectionStart(this.selectionRangeArray[0].pageNumber+1);}};// eslint-disable-next-line
TextSelection.prototype.terminateSelectionByTouch=function(event){var topMargin=10;this.maintainSelectionOnZoom(true,false);this.applySpanForSelection();if(this.pdfViewerBase.getTextMarkupAnnotationMode()){// eslint-disable-next-line max-len
this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);}else{this.fireTextSelectEnd();var top_4=event.changedTouches[0].clientY+event.currentTarget.clientHeight;var spanBounds=this.getSpanBounds();if(spanBounds){if(spanBounds.bottom+this.contextMenuHeight+this.pdfViewerBase.toolbarHeight>window.innerHeight){top_4=spanBounds.top-(this.contextMenuHeight+this.pdfViewerBase.toolbarHeight);}else{top_4=spanBounds.bottom+this.pdfViewerBase.toolbarHeight-topMargin;}this.pdfViewerBase.contextMenuModule.open(top_4,(spanBounds.right-spanBounds.left)/2,this.pdfViewerBase.viewerContainer);}}};TextSelection.prototype.getSpanBounds=function(){var spanWidth=[];var spanRight=[];var spanLeft=[];var spanHeight=0;var selectedContent=document.getElementsByClassName("e-pv-maintaincontent");if(selectedContent.length>0){for(var i=0;i<selectedContent.length;i++){var spanElement=selectedContent[i].getBoundingClientRect();spanHeight=spanHeight+spanElement.height;spanWidth.push(spanElement.width);spanRight.push(spanElement.right);spanLeft.push(spanElement.left);}// eslint-disable-next-line max-len
return{top:selectedContent[0].getBoundingClientRect().top,bottom:selectedContent[selectedContent.length-1].getBoundingClientRect().bottom,left:Math.min.apply(null,spanLeft),right:Math.max.apply(null,spanRight),width:Math.max.apply(null,spanWidth),height:spanHeight};}};TextSelection.prototype.getNodeElement=function(range,touchX,touchY,event,nodeElement){if(document.caretRangeFromPoint){range=document.caretRangeFromPoint(touchX,touchY);nodeElement=this.onTouchElementScroll(range,nodeElement,touchY,event);// eslint-disable-next-line
}else if(document.caretPositionFromPoint){// eslint-disable-next-line
var start=document.caretPositionFromPoint(touchX,touchY);// eslint-disable-next-line
var end=document.caretPositionFromPoint(touchX,touchY);range=document.createRange();range.setStart(start.offsetNode,start.offset);range.setEnd(end.offsetNode,end.offset);nodeElement=this.onTouchElementScroll(range,nodeElement,touchY,event);}return nodeElement;};TextSelection.prototype.isTouchedWithinContainer=function(event){var elements=document.elementsFromPoint(event.touches[0].clientX,event.touches[0].clientY);var isTouchedWithinContainer=false;if(elements.length!==0){isTouchedWithinContainer=true;}return isTouchedWithinContainer;};TextSelection.prototype.onTouchElementScroll=function(range,nodeElement,touchY,event){var viewerScrollTop=this.pdfViewerBase.viewerContainer.scrollTop;if(range!=null){nodeElement=range.startContainer;var isScrollBar=this.isScrolledOnScrollBar(event);if(!this.pdfViewerBase.viewerContainer.contains(nodeElement.parentElement)||isScrollBar){if(touchY<this.pdfViewerBase.viewerContainer.clientHeight){this.pdfViewerBase.viewerContainer.scrollTop=viewerScrollTop-30;}else{this.pdfViewerBase.viewerContainer.scrollTop=viewerScrollTop+30;}}}else{if(touchY<this.pdfViewerBase.viewerContainer.clientHeight){this.pdfViewerBase.viewerContainer.scrollTop=viewerScrollTop-30;}else{this.pdfViewerBase.viewerContainer.scrollTop=viewerScrollTop+30;}}return nodeElement;};TextSelection.prototype.isCloserTouchScroll=function(currentDifference){var isForwardMovement=false;if(this.previousScrollDifference>currentDifference){isForwardMovement=true;}return isForwardMovement;};TextSelection.prototype.getClientValueTop=function(clientValue,pageNumber){if(this.pdfViewerBase.getElement('_pageDiv_'+pageNumber)){// eslint-disable-next-line max-len
return clientValue-this.pdfViewerBase.getElement('_pageDiv_'+pageNumber).getBoundingClientRect().top;}else{return clientValue;}};TextSelection.prototype.isScrolledOnScrollBar=function(event){var isScrollBar=false;// eslint-disable-next-line max-len
if(event.touches&&this.pdfViewerBase.viewerContainer.clientHeight+this.pdfViewerBase.viewerContainer.offsetTop<event.touches[0].clientY&&event.touches[0].clientY<this.pdfViewerBase.viewerContainer.offsetHeight+this.pdfViewerBase.viewerContainer.offsetTop){isScrollBar=true;}return isScrollBar;};TextSelection.prototype.getTextLastLength=function(element){if(element){return element.textContent.length;}else{return 0;}};TextSelection.prototype.getNodeElementFromNode=function(node){if(node.parentElement){return node.parentElement;}else{return node.parentNode;}};/**
     * Copy the selected text in the PDF Document.
     *
     * @returns void
     */TextSelection.prototype.copyText=function(){var selectionText='';this.maintainSelectionOnZoom(true,false);if(this.selectionRangeArray.length>0){for(var i=0;i<this.selectionRangeArray.length;i++){selectionText+=this.selectionRangeArray[i].textContent;}}if(selectionText.length>0){if(this.pdfViewer.annotation){this.pdfViewer.annotation.isShapeCopied=false;}var textArea=document.createElement('textarea');textArea.contentEditable='true';textArea.textContent=selectionText;// eslint-disable-next-line max-len
if(this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule){this.pdfViewer.annotation.freeTextAnnotationModule.selectedText=selectionText;}textArea.style.position='fixed';document.body.appendChild(textArea);textArea.select();try{document.execCommand('copy');}catch(ex){console.warn('Copy to clipboard failed.',ex);}finally{if(textArea){document.body.removeChild(textArea);}}}};/**
     * @private
     */TextSelection.prototype.destroy=function(){this.clear();};/**
     * @private
     */TextSelection.prototype.getModuleName=function(){return'TextSelection';};return TextSelection;}();/**
 * export types
 */ /* eslint-disable */ /**
 * TextSearch module
 */var TextSearch=/** @class */function(){/**
     * @param pdfViewer
     * @param pdfViewerBase
     * @param pdfViewer
     * @param pdfViewerBase
     * @private
     */function TextSearch(pdfViewer,pdfViewerBase){var _this=this;/**
         * @private
         */this.isTextSearch=false;/**
         * @private
         */this.searchCount=0;this.searchIndex=0;this.currentSearchIndex=0;this.startIndex=null;this.searchPageIndex=null;this.searchString=null;this.isMatchCase=false;/**
         * @private
         */this.searchRequestHandler=null;// eslint-disable-next-line
this.textContents=new Array();// eslint-disable-next-line
this.searchMatches=new Array();// eslint-disable-next-line
this.searchCollection=new Array();this.searchedPages=[];this.isPrevSearch=false;// eslint-disable-next-line
this.tempElementStorage=new Array();/**
         * @private
         */this.isMessagePopupOpened=false;/**
         * @private
         */this.isTextRetrieved=false;this.isTextSearched=false;this.isTextSearchEventTriggered=false;this.isSearchText=false;// eslint-disable-next-line
this.checkBoxOnChange=function(event){if(event.currentTarget&&event.currentTarget.checked){_this.isMatchCase=true;}else{_this.isMatchCase=false;}if(_this.isTextSearch){_this.resetVariables();_this.clearAllOccurrences();var inputString=_this.searchInput.value;_this.searchIndex=0;_this.textSearch(inputString);}};this.searchKeypressHandler=function(event){_this.enableNextButton(true);_this.enablePrevButton(true);if(event.which===13){_this.initiateTextSearch(_this.searchInput);_this.updateSearchInputIcon(false);}else{_this.resetVariables();}};this.searchClickHandler=function(event){_this.searchButtonClick(_this.searchBtn,_this.searchInput);};this.nextButtonOnClick=function(event){_this.nextSearch();};this.prevButtonOnClick=function(event){_this.prevSearch();};this.pdfViewer=pdfViewer;this.pdfViewerBase=pdfViewerBase;}/**
     * @private
     */TextSearch.prototype.createTextSearchBox=function(){var _this=this;// eslint-disable-next-line max-len
this.searchBox=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_search_box',className:'e-pv-search-bar'});var toolbarElement=document.getElementById('toolbarContainer');if(toolbarElement){this.searchBox.style.top=toolbarElement.clientHeight+'px';}var searchElementsContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_search_box_elements',className:'e-pv-search-bar-elements'});// eslint-disable-next-line max-len
var searchInputContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_search_input_container',className:'e-input-group e-pv-search-input'});this.searchInput=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_search_input',className:'e-input'});this.searchInput.type='text';this.searchInput.setAttribute("aria-label","Search Text. Enter the test to search.");var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Findindocument');promise.then(function(value){_this.searchInput.placeholder=value;});// eslint-disable-next-line max-len
this.searchBtn=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_search_box-icon',className:'e-input-group-icon e-input-search-group-icon e-pv-search-icon'});searchInputContainer.appendChild(this.searchInput);searchInputContainer.appendChild(this.searchBtn);searchElementsContainer.appendChild(searchInputContainer);if(this.pdfViewer.enableRtl){this.prevSearchBtn=this.createSearchBoxButtons('prev_occurrence','e-pv-next-search');}else{this.prevSearchBtn=this.createSearchBoxButtons('prev_occurrence','e-pv-prev-search');}this.prevSearchBtn.setAttribute('aria-label','Previous Search');searchElementsContainer.appendChild(this.prevSearchBtn);if(this.pdfViewer.enableRtl){this.nextSearchBtn=this.createSearchBoxButtons('next_occurrence','e-pv-prev-search');}else{this.nextSearchBtn=this.createSearchBoxButtons('next_occurrence','e-pv-next-search');}this.nextSearchBtn.setAttribute('aria-label','Next Search');searchElementsContainer.appendChild(this.nextSearchBtn);// eslint-disable-next-line max-len
var matchCaseContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_match_case_container',className:'e-pv-match-case-container'});var matchCaseInput=sf.base.createElement('input',{id:this.pdfViewer.dataId+'_match_case'});matchCaseInput.type='checkbox';matchCaseInput.setAttribute("aria-label","Case Sensitive Search.");matchCaseInput.style.height='17px';matchCaseInput.style.width='17px';matchCaseInput.addEventListener('change',this.checkBoxOnChange.bind(this));matchCaseContainer.appendChild(matchCaseInput);this.searchBox.appendChild(searchElementsContainer);this.searchBox.appendChild(matchCaseContainer);this.pdfViewerBase.mainContainer.appendChild(this.searchBox);// eslint-disable-next-line max-len
var matchCaseText=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_search_box_text',styles:'position: absolute; padding-top: 3px; padding-left: 8px; padding-right: 8px; font-size: 13px'});var promiselocale=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Matchcase');promiselocale.then(function(value){matchCaseText.textContent=value;});matchCaseContainer.appendChild(matchCaseText);var waitingPopup=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_textSearchLoadingIndicator'});searchInputContainer.appendChild(waitingPopup);waitingPopup.style.position='absolute';waitingPopup.style.top='15px';waitingPopup.style.left=searchInputContainer.clientWidth-46+'px';createSpinner({target:waitingPopup,cssClass:'e-spin-center'});this.setLoaderProperties(waitingPopup);this.showSearchBox(false);if(this.pdfViewer.enableRtl){this.searchBox.classList.add('e-rtl');this.searchBox.style.left='88.3px';}else{this.searchBox.classList.remove('e-rtl');this.searchBox.style.right='88.3px';}this.searchInput.addEventListener('focus',function(){_this.searchInput.parentElement.classList.add('e-input-focus');});this.searchInput.addEventListener('blur',function(){_this.searchInput.parentElement.classList.remove('e-input-focus');});this.searchInput.addEventListener('keydown',this.searchKeypressHandler.bind(this));this.searchBtn.addEventListener('click',this.searchClickHandler.bind(this));this.nextSearchBtn.addEventListener('click',this.nextButtonOnClick.bind(this));this.prevSearchBtn.addEventListener('click',this.prevButtonOnClick.bind(this));};TextSearch.prototype.setLoaderProperties=function(element){var spinnerElement=element.firstChild.firstChild.firstChild;if(spinnerElement){spinnerElement.style.height='18px';spinnerElement.style.width='18px';spinnerElement.style.transformOrigin='9px 9px 9px';}};TextSearch.prototype.showLoadingIndicator=function(isShow){var waitingPopup=document.getElementById(this.pdfViewer.dataId+'_textSearchLoadingIndicator');if(waitingPopup){if(isShow){showSpinner(waitingPopup);}else{hideSpinner(waitingPopup);}}};/**
     * @private
     */TextSearch.prototype.textSearchBoxOnResize=function(){if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableToolbar){var secondaryToolbar=this.pdfViewerBase.getElement('_toolbarContainer_popup');if(secondaryToolbar){if(secondaryToolbar.contains(this.pdfViewerBase.getElement('_search').parentElement)){this.searchBox.style.right='0px';}}}else{// eslint-disable-next-line max-len
if(this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft<this.searchBox.offsetLeft+this.searchBox.clientWidth){this.searchBox.style.right='0px';// eslint-disable-next-line
this.searchBox.style.width=parseInt(this.searchBox.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+'px';// eslint-disable-next-line
this.searchInput.style.width=parseInt(this.searchInput.style.width)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+'px';}else{this.searchBox.style.right='88.3px';this.searchBox.style.width='';this.searchInput.style.width='';}}};/**
     * @param isShow
     * @private
     */TextSearch.prototype.showSearchBox=function(isShow){if(isShow){this.searchBox.style.display='block';}else{this.searchBox.style.display='none';this.searchInput.value='';}this.onTextSearchClose();};/**
     * @private
     */TextSearch.prototype.searchAfterSelection=function(){if(this.isTextSearch){this.initSearch(this.searchPageIndex,true);this.highlightOthers();}};TextSearch.prototype.initiateTextSearch=function(searchElement){var inputString=searchElement.value;if(inputString&&inputString.length>0&&inputString[inputString.length-1]===' '){inputString=inputString.slice(0,inputString.length-1);}this.initiateSearch(inputString);};/**
     * @param inputString
     * @private
     */TextSearch.prototype.initiateSearch=function(inputString){if(inputString!==this.searchString){this.isTextSearch=false;this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1;}this.clearAllOccurrences();if(inputString!==''){// eslint-disable-next-line
if(this.searchMatches.length>0){this.searchPageIndex=this.pdfViewer.currentPageNumber-1;}if(this.searchMatches[this.searchPageIndex]&&inputString===this.searchString){if(this.searchMatches[this.searchPageIndex].length===0){this.initSearch(this.searchPageIndex,false);}else{this.nextSearch();}}else{this.resetVariables();this.searchIndex=0;this.textSearch(inputString);}}};TextSearch.prototype.textSearch=function(inputString){if(inputString!==''||inputString){this.searchString=inputString;this.isTextSearch=true;this.isSearchText=true;this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1;this.searchCount=0;this.isTextSearchEventTriggered=false;this.showLoadingIndicator(true);this.pdfViewer.fireTextSearchStart(inputString,this.isMatchCase);if(this.pdfViewer.isExtractText){if(this.isTextRetrieved){for(var i=0;i<this.pdfViewerBase.pageCount;i++){this.initSearch(i,false,true);}}else{this.isTextSearched=true;for(var i=0;i<this.documentTextCollection.length;i++){this.initSearch(i,false,true);}}}this.initSearch(this.searchPageIndex,false);this.highlightOthers();}};TextSearch.prototype.nextSearch=function(){this.isPrevSearch=false;this.isTextSearch=true;this.isSearchText=false;if(this.searchString){this.clearAllOccurrences();this.searchIndex=this.searchIndex+1;if(this.searchMatches.length>0){this.searchPageIndex=this.pdfViewer.currentPageNumber-1;}if(this.searchMatches[this.searchPageIndex]){// eslint-disable-next-line max-len
if(this.searchIndex>=this.searchMatches[this.searchPageIndex].length){this.searchIndex=0;this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0;if(this.pdfViewerBase.pageCount>1){this.initSearch(this.searchPageIndex,false);}else{this.initSearch(this.searchPageIndex,true);if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.pdfViewerBase.updateScrollTop(this.searchPageIndex);}this.showLoadingIndicator(true);}else{this.highlightSearchedTexts(this.searchPageIndex,false,undefined);this.showLoadingIndicator(false);}this.highlightOthers(true);}else{this.initiateTextSearch(this.searchInput);}}else{this.initiateTextSearch(this.searchInput);}};TextSearch.prototype.prevSearch=function(){this.isPrevSearch=true;this.isTextSearch=true;this.isSearchText=false;if(this.searchString){this.clearAllOccurrences();this.searchIndex=this.searchIndex-1;if(this.searchIndex<0){this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;this.initSearch(this.searchPageIndex,false);this.showLoadingIndicator(true);}else{this.highlightSearchedTexts(this.searchPageIndex,false,undefined);this.showLoadingIndicator(false);}this.highlightOthers(true);}else{this.searchIndex=this.searchIndex-1;this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;var inputString=this.searchInput.value;this.textSearch(inputString);}};TextSearch.prototype.initSearch=function(pageIndex,isSinglePageSearch,isCount){// eslint-disable-next-line
var storedData=this.pdfViewerBase.getLinkInformation(pageIndex,true);var pageText=null;var textContents=null;// eslint-disable-next-line
var characterBounds=null;if(isCount){if(this.documentTextCollection.length!==0){// eslint-disable-next-line
var documentIndex=this.documentTextCollection[pageIndex][pageIndex];var pageTextData=documentIndex.pageText?documentIndex.pageText:documentIndex.PageText;if(this.documentTextCollection[pageIndex]&&documentIndex){// eslint-disable-next-line max-len
this.getSearchTextContent(pageIndex,this.searchString,pageTextData,textContents,isSinglePageSearch,this.documentTextCollection[pageIndex]);}}}else{if(storedData){// eslint-disable-next-line
pageText=storedData['pageText'];// eslint-disable-next-line
textContents=storedData['textContent'];characterBounds=this.pdfViewerBase.textLayer.characterBound[pageIndex];this.textContents[pageIndex]=textContents;this.getPossibleMatches(pageIndex,this.searchString,pageText,textContents,isSinglePageSearch,characterBounds);}else{if(!isSinglePageSearch){this.createRequestForSearch(pageIndex);}}}if(this.pdfViewerBase.pageCount===(this.searchMatches&&this.searchMatches.length)){if(!this.isTextSearchEventTriggered){this.isTextSearchEventTriggered=true;this.pdfViewer.fireTextSearchComplete(this.searchString,this.isMatchCase);}}};// eslint-disable-next-line
TextSearch.prototype.getPossibleMatches=function(pageIndex,searchString,pageString,textContents,isSinglePageSearch,characterBounds){var arrayReturns;if(this.searchMatches&&!this.searchMatches[pageIndex]){var pageText=pageString;var searchText=searchString;var multiSearch=pageText.replace(/(\s\r\n)/gm,' ').replace(/(\r\n)/gm," ");var Multiline=pageString.replace(/(\s\r\n)/gm,'  ').replace(/(\r\n)/gm," ");var specialCharcterSearch=multiSearch.replace(/[^a-zA-z0-9" "]/g,"");var queryLength=searchString.length;if(!this.isMatchCase){searchText=searchString.toLowerCase();pageText=pageString.toLowerCase();multiSearch=multiSearch.toLowerCase();Multiline=Multiline.toLowerCase();specialCharcterSearch=specialCharcterSearch.toLowerCase();}var matches=[];var matchedArray=[];var matchIndex=-queryLength;var newIndex=-queryLength;var multiSearchIndex=-queryLength;var MultilineIndex=-queryLength;var specialcharcterIndex=-queryLength;while(matchIndex!==0){if(searchText===''||searchText===' '||!searchText){break;}matchIndex=pageText.indexOf(searchText,matchIndex+queryLength);if(searchText.indexOf(' ')!==-1){var newString=searchString.replace(' ','\r\n');newIndex=pageText.indexOf(newString,newIndex+queryLength);newIndex=-1;if(!(newIndex<=-1)){if(newIndex<matchIndex){matches.push(newIndex);}}}if(matchIndex<=-1&&newIndex<=-1){break;}if(!(matchIndex<=-1)){matches.push(matchIndex);}if(newIndex>matchIndex&&!(newIndex<=-1)){matches.push(newIndex);}}if(matches.length==0){multiSearchIndex=multiSearch.indexOf(searchText,multiSearchIndex+queryLength);MultilineIndex=Multiline.indexOf(searchText,MultilineIndex+queryLength);specialcharcterIndex=specialCharcterSearch.indexOf(searchText,specialcharcterIndex+queryLength);if(multiSearchIndex!==-1){arrayReturns=this.correctLinetext(searchString,matchIndex,pageText);matchIndex=-arrayReturns[0].length;for(var i=0;i<arrayReturns.length;i++){matchIndex=pageText.indexOf(arrayReturns[i].trim(),matchIndex+(arrayReturns[i-1]===undefined||null?arrayReturns[0].length:arrayReturns[i-1].length));matchedArray.push(matchIndex);if(matchedArray.length>1){if(matchedArray[1]-(matchedArray[0]+arrayReturns[0].length)<=3){matches.push(matchedArray);this.searchMatches[pageIndex]=matches;}else{i=-1;matchIndex=matchedArray[0]+arrayReturns[0].length;matchedArray.splice(0,matchedArray.length);}}}}else if(specialcharcterIndex!==-1){arrayReturns=this.correctLinetext(searchString,matchIndex,pageText);matchIndex=-arrayReturns[0].length;for(var i=0;i<arrayReturns.length;i++){matchIndex=pageText.indexOf(arrayReturns[i].trim(),matchIndex+(arrayReturns[i-1]===undefined||null?arrayReturns[0].length:arrayReturns[i-1].length));if(matchIndex>0){matchedArray.push(matchIndex);}if(matchedArray.length>1){if(matchedArray[1]-(matchedArray[0]+arrayReturns[0].length)<=3){matches.push(matchedArray);this.searchMatches[pageIndex]=matches;}else{i=-1;matchIndex=matchedArray[0]+arrayReturns[0].length;matchedArray.splice(0,matchedArray.length);}}}}else if(MultilineIndex!==-1){arrayReturns=this.correctLinetext(searchString,matchIndex,pageText);matchIndex=-arrayReturns[0].length;for(var i=0;i<arrayReturns.length;i++){matchIndex=pageText.indexOf(arrayReturns[i].trim(),matchIndex+(arrayReturns[i-1]===undefined||null?arrayReturns[0].length:arrayReturns[i-1].length));matchedArray.push(matchIndex);if(matchedArray.length>1){if(matchedArray[1]-(matchedArray[0]+arrayReturns[0].length)<=3){matches.push(matchedArray);this.searchMatches[pageIndex]=matches;}else{i=-1;matchIndex=matchedArray[0]+arrayReturns[0].length;matchedArray.splice(0,matchedArray.length);}}}}if(matches.length>1){matches.splice(1,matches.length);}}if(this.searchMatches&&matches.length>0){this.searchMatches[pageIndex]=matches;}}if(!isSinglePageSearch){if(this.searchedPages.indexOf(pageIndex)===-1){this.searchedPages.push(pageIndex);this.startIndex=this.searchedPages[0];}this.updateSearchInputIcon(false);}if(this.searchMatches&&this.searchMatches[pageIndex]&&this.searchMatches[pageIndex].length!==0){if(!isSinglePageSearch){if(this.isPrevSearch){this.searchIndex=this.searchMatches[pageIndex].length-1;}if(this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex){// eslint-disable-next-line max-len
if(this.searchMatches.length>0&&(this.searchIndex===0||this.searchIndex===-1)&&this.searchPageIndex===this.currentSearchIndex){if(!this.isMessagePopupOpened&&!this.isSearchText){this.onMessageBoxOpen();}this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1);this.searchedPages=[this.searchPageIndex];}else if(this.isPrevSearch&&this.searchMatches&&this.searchMatches.length>0&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex-1===this.searchPageIndex){if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.searchedPages=[this.startIndex];}this.pdfViewerBase.updateScrollTop(this.searchPageIndex);}else if(this.searchMatches&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex===this.searchPageIndex&&this.pdfViewerBase.pageCount>1){if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.searchedPages=[this.startIndex];}}this.highlightSearchedTexts(pageIndex,isSinglePageSearch,arrayReturns);}else{if(!isSinglePageSearch){if(this.isPrevSearch){this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;}else{this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0;}if(this.searchedPages.indexOf(this.searchPageIndex)===-1&&this.searchedPages.length!==this.pdfViewerBase.pageCount){this.showLoadingIndicator(true);this.initSearch(this.searchPageIndex,false);}else{var searchPageIndex=this.getSearchPage(pageIndex);// eslint-disable-next-line max-len
if(this.searchMatches&&sf.base.isNullOrUndefined(this.searchMatches[this.searchPageIndex])&&this.searchedPages.length===this.pdfViewerBase.pageCount){// eslint-disable-next-line max-len
if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.pdfViewerBase.updateScrollTop(this.startIndex);// eslint-disable-next-line max-len
}else if(this.searchMatches&&this.searchMatches.length>0&&(this.searchIndex===0||this.searchIndex===-1)&&searchPageIndex===this.currentSearchIndex){if(this.isPrevSearch){// eslint-disable-next-line max-len
if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.searchPageIndex=searchPageIndex;this.searchedPages=[searchPageIndex];this.searchIndex=-1;}else{if(!this.isMessagePopupOpened&&this.pdfViewerBase.currentPageNumber!==1&&!this.isSearchText){this.onMessageBoxOpen();}this.searchPageIndex=searchPageIndex;this.searchedPages=[searchPageIndex];this.searchIndex=0;}this.highlightSearchedTexts(this.searchPageIndex,isSinglePageSearch,undefined);}else if(this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount){if(!this.isMessagePopupOpened){this.onMessageBoxOpen();}this.searchPageIndex=this.startIndex;this.searchedPages=[this.searchPageIndex];this.searchIndex=0;this.pdfViewerBase.updateScrollTop(this.startIndex);this.highlightSearchedTexts(this.searchPageIndex,isSinglePageSearch,undefined);}}}}};TextSearch.prototype.correctLinetext=function(searchString,matchIndex,pageText){var indiuvalLineArray=[];var searchArray=searchString.toLowerCase().split(/[" "]+/);matchIndex=0;var linestring="";for(var i=0;i<searchArray.length;i++){var searchArrayText=linestring+searchArray[i];matchIndex=pageText.indexOf(searchArrayText,matchIndex);if(matchIndex!==-1){linestring+=searchArray[i]+" ";if(i==searchArray.length-1){indiuvalLineArray.push(linestring);}}else{indiuvalLineArray.push(linestring);linestring=searchArray[i]+" ";if(i==searchArray.length-1){indiuvalLineArray.push(linestring);}}}return indiuvalLineArray;};// eslint-disable-next-line
TextSearch.prototype.getSearchTextContent=function(pageIndex,searchString,pageString,textContents,isSinglePageSearch,characterBounds){var pageText=pageString;var searchText=searchString;var queryLength=searchString.length;if(!this.isMatchCase){searchText=searchString.toLowerCase();pageText=pageString.toLowerCase();}var matches=[];var matchIndex=-queryLength;var newIndex=-queryLength;while(matchIndex!==0){if(searchText===''||searchText===' '||!searchText){break;}matchIndex=pageText.indexOf(searchText,matchIndex+queryLength);if(searchText.indexOf(' ')!==-1){var newString=searchString.replace(' ','\r\n');newIndex=pageText.indexOf(newString,newIndex+queryLength);if(!(newIndex<=-1)){if(newIndex<matchIndex){matches.push(newIndex);}}}if(matchIndex<=-1&&newIndex<=-1){break;}if(!(matchIndex<=-1)){matches.push(matchIndex);}if(newIndex>matchIndex&&!(newIndex<=-1)){matches.push(newIndex);}}if(matches.length!==0){this.searchCount=this.searchCount+matches.length;}this.searchMatches[pageIndex]=matches;};TextSearch.prototype.getSearchPage=function(pageIndex){var pageNumber=null;if(this.isPrevSearch){for(var i=pageIndex;i>=0;i--){if(i!==pageIndex&&this.searchMatches[i]){pageNumber=i;break;}}if(!pageNumber){for(var j=this.pdfViewerBase.pageCount-1;j>pageIndex;j--){if(this.searchMatches[j]){pageNumber=j;break;}}}}else{for(var i=pageIndex;i<this.pdfViewerBase.pageCount;i++){if(i!==pageIndex&&this.searchMatches[i]){pageNumber=i;break;}}if(!pageNumber){if(pageIndex===0){pageNumber=pageIndex;}else{for(var j=0;j<pageIndex;j++){if(this.searchMatches[j]){pageNumber=j;break;}}}}}return pageNumber;};TextSearch.prototype.highlightSearchedTexts=function(pageIndex,isSinglePageSearch,ArrayReturns){// eslint-disable-next-line
var matches=this.searchMatches[pageIndex];var scrollPoint={y:-100,x:-100};var className;var searchingText=this.searchString;// eslint-disable-next-line
var characterBounds=this.pdfViewerBase.textLayer.characterBound[pageIndex];if(isSinglePageSearch&&this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex){if(this.searchMatches.length>0){if(pageIndex===this.getSearchPage(this.pdfViewerBase.currentPageNumber-1)){}}}if(characterBounds){for(var i=0;i<matches.length;i++){if(matches[i].length!==undefined&&ArrayReturns!==undefined){if(i===this.searchIndex&&pageIndex===this.searchPageIndex){for(var j=0;j<ArrayReturns.length;j++){className='e-pv-search-text-highlight';this.searchString=ArrayReturns[j].trim();this.addDivForSearch(i,pageIndex,characterBounds,this.searchString.length,className,j);}}else{for(var j=0;j<ArrayReturns.length;j++){className='e-pv-search-text-highlightother';this.searchString=ArrayReturns[j].trim();this.addDivForSearch(i,pageIndex,characterBounds,this.searchString.length,className,j);}}}else if(i===this.searchIndex&&pageIndex===this.searchPageIndex){className='e-pv-search-text-highlight';}else{className='e-pv-search-text-highlightother';}if(matches[i].length==undefined){this.addDivForSearch(i,pageIndex,characterBounds,this.searchString.length,className,undefined);}}this.searchString=searchingText;if(pageIndex===this.searchPageIndex&&!isSinglePageSearch){var element=this.pdfViewerBase.getElement('_searchtext_'+pageIndex+'_'+this.searchIndex);if(element){var targetScrollElement=this.getScrollElement(element);this.scrollToSearchStr(targetScrollElement,scrollPoint);}else{this.pdfViewerBase.updateScrollTop(pageIndex);var element_1=this.pdfViewerBase.getElement('_searchtext_'+pageIndex+'_'+this.searchIndex);if(element_1){var targetScrollElement=this.getScrollElement(element_1);this.scrollToSearchStr(targetScrollElement,scrollPoint);}}}}};// eslint-disable-next-line
TextSearch.prototype.addDivForSearch=function(index,pageIndex,characterBounds,queryLength,className,nestedIndex){var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageIndex);if(sf.base.isNullOrUndefined(textLayer)&&className==='e-pv-search-text-highlight'){if(this.pdfViewer.navigation){this.pdfViewer.navigation.goToPage(pageIndex+1);}}var count;if(this.searchMatches[pageIndex][index].length!==undefined){count=this.searchMatches[pageIndex][index][nestedIndex];}else{count=this.searchMatches[pageIndex][index];}var initial=count;var divCount=0;if(count>0){while(count<initial+queryLength){count=this.addDivElement(count,characterBounds,queryLength,className,index,pageIndex,initial,divCount,nestedIndex);divCount++;}}if(className==='e-pv-search-text-highlight'){this.showLoadingIndicator(false);}};// eslint-disable-next-line
TextSearch.prototype.addDivElement=function(count,characterBounds,queryLength,className,index,pageIndex,initial,divCount,nestedIndex){var height=0;var width=0;var top=0;var left=0;var isRTL=false;if(characterBounds[count]){left=characterBounds[count].X;top=characterBounds[count].Y;}var v=0;if(count-initial!==0){v=count-initial;queryLength+=1;}for(v=v;v<queryLength;v++){if(characterBounds[count]){// eslint-disable-next-line
var charBound=characterBounds[count];if(left>charBound.X){isRTL=true;}top=top<charBound.Y?top:charBound.Y;var topDifference=top<charBound.Y?charBound.Y-top:top-charBound.Y;height=height>topDifference+charBound.Height?height:topDifference+charBound.Height;count++;}}var isContinuation=false;if(!isRTL){if(initial+queryLength!==count){isContinuation=true;if(characterBounds[count-1]){width=characterBounds[count-1].X-left;}}else{isContinuation=false;// eslint-disable-next-line
var storedData=this.pdfViewerBase.getLinkInformation(pageIndex,true);var pageText=null;if(storedData){pageText=storedData['pageText'];}else if(this.pdfViewer.isExtractText&&this.documentTextCollection.length!==0){// eslint-disable-next-line
var documentIndex=this.documentTextCollection[pageIndex][pageIndex];pageText=documentIndex.pageText?documentIndex.pageText:documentIndex.PageText;}if(characterBounds[count]){if(pageText&&(pageText[count]===''||pageText[count]===' '||pageText[count]==='\r'||pageText[count]==='\n')&&characterBounds[count].Width===0){width=characterBounds[count-1].X-left+characterBounds[count-1].Width;}else{width=characterBounds[count].X-left;}}else{if(characterBounds[count-1]){width=characterBounds[count-1].X-left;}}}}else{var charBound=characterBounds[initial+queryLength-1];left=charBound.X;width=characterBounds[initial].X-characterBounds[initial+queryLength-1].X;top=top<charBound.Y?top:charBound.Y;var topDifference=top<charBound.Y?charBound.Y-top:top-charBound.Y;height=height>topDifference+charBound.Height?height:topDifference+charBound.Height;//some RTL character calculated width is zero and width difference value calculated from Y possition difference in the same line.
var widthDifference=characterBounds[initial-1].Y-characterBounds[initial].Y;for(var j=initial+queryLength-1;j>=initial;j--){charBound=characterBounds[j];if(charBound.Width===0){widthDifference=charBound.Y-characterBounds[j-1].Y;}}width=width+widthDifference;}this.createSearchTextDiv(index,pageIndex,height,width,top,left,className,isContinuation,divCount,nestedIndex);return count;};// eslint-disable-next-line
TextSearch.prototype.createSearchTextDiv=function(index,pageIndex,height,width,top,left,className,isContinuation,divCount,nestedIndex){var idString='_searchtext_'+pageIndex+'_'+index;if(isContinuation){idString+='_'+divCount;}if(nestedIndex!==undefined&&this.pdfViewerBase.getElement(idString)){var textDiv=sf.base.createElement('div',{id:this.pdfViewer.element.id+idString+"_"+nestedIndex});// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];this.calculateBounds(textDiv,height,width,top,left,pageDetails);textDiv.classList.add(className);if(className==='e-pv-search-text-highlight'){// eslint-disable-next-line max-len
textDiv.style.backgroundColor=this.pdfViewer.textSearchColorSettings.searchHighlightColor===''?'#fdd835':this.pdfViewer.textSearchColorSettings.searchHighlightColor;var bounds={left:left,top:top,width:width,height:height};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,bounds,pageIndex+1);}else if(className==='e-pv-search-text-highlightother'){// eslint-disable-next-line max-len
textDiv.style.backgroundColor=this.pdfViewer.textSearchColorSettings.searchColor===''?'#8b4c12':this.pdfViewer.textSearchColorSettings.searchColor;}var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageIndex);if(textLayer){textLayer.appendChild(textDiv);}}if(!this.pdfViewerBase.getElement(idString)){var textDiv=sf.base.createElement('div',{id:this.pdfViewer.dataId+idString});// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];this.calculateBounds(textDiv,height,width,top,left,pageDetails);textDiv.classList.add(className);if(className==='e-pv-search-text-highlight'){// eslint-disable-next-line max-len
textDiv.style.backgroundColor=this.pdfViewer.textSearchColorSettings.searchHighlightColor===''?'#fdd835':this.pdfViewer.textSearchColorSettings.searchHighlightColor;var bounds={left:left,top:top,width:width,height:height};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,bounds,pageIndex+1);}else if(className==='e-pv-search-text-highlightother'){// eslint-disable-next-line max-len
textDiv.style.backgroundColor=this.pdfViewer.textSearchColorSettings.searchColor===''?'#8b4c12':this.pdfViewer.textSearchColorSettings.searchColor;}var textLayer=this.pdfViewerBase.getElement('_textLayer_'+pageIndex);if(textLayer){textLayer.appendChild(textDiv);}}};// eslint-disable-next-line
TextSearch.prototype.calculateBounds=function(textDiv,height,width,top,left,pageDetails){if(pageDetails.rotation===0||pageDetails.rotation===2){textDiv.style.height=Math.ceil(height)*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.width=width*this.pdfViewerBase.getZoomFactor()+'px';if(pageDetails.rotation===2){textDiv.style.top=(pageDetails.height-top-height)*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.left=Math.ceil(pageDetails.width-left-width)*this.pdfViewerBase.getZoomFactor()+'px';}else{textDiv.style.top=top*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.left=left*this.pdfViewerBase.getZoomFactor()+'px';}}else if(pageDetails.rotation===1){textDiv.style.height=width*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.width=height*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.top=left*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.left=(pageDetails.height-top-height)*this.pdfViewerBase.getZoomFactor()+'px';}else if(pageDetails.rotation===3){textDiv.style.height=width*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.width=height*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.left=(pageDetails.width-pageDetails.height+top)*this.pdfViewerBase.getZoomFactor()+'px';textDiv.style.top=(pageDetails.height-left-width)*this.pdfViewerBase.getZoomFactor()+'px';}};TextSearch.prototype.isClassAvailable=function(){var isClass=false;for(var j=0;j<this.tempElementStorage.length;j++){if(this.tempElementStorage[j].classString){// eslint-disable-next-line max-len
if(this.tempElementStorage[j].classString==='e-pv-search-text-highlight'||this.tempElementStorage[j].classString==='e-pv-search-text-highlightother'){isClass=true;break;}}}return isClass;};TextSearch.prototype.getScrollElement=function(element){var targetElement=element;if(element.childNodes.length>0){for(var i=0;i<element.childNodes.length;i++){if(element.childNodes[i].classList){if(element.childNodes[i].classList.contains('e-pv-search-text-highlight')){targetElement=element.childNodes[i];}}}}return targetElement;};// eslint-disable-next-line
TextSearch.prototype.scrollToSearchStr=function(element,scrollPoint){var parent=element.offsetParent;var offsetY=element.offsetTop+element.clientTop;var offsetX=element.offsetLeft+element.clientLeft;while(parent.id!==this.pdfViewerBase.viewerContainer.id){offsetY+=parent.offsetTop;offsetX+=parent.offsetLeft;parent=parent.offsetParent;}if(scrollPoint){offsetY+=scrollPoint.y;offsetX+=scrollPoint.x;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){parent.scrollLeft=offsetX;}else{if(this.pdfViewerBase.getZoomFactor()>1.5){parent.scrollLeft=offsetX;}}}parent.scrollTop=offsetY;this.pdfViewerBase.updateMobileScrollerPosition();};/**
     * @param pageIndex
     * @private
     */TextSearch.prototype.resizeSearchElements=function(pageIndex){var searchDivs=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_searchtext_'+pageIndex+'"]');for(var i=0;i<searchDivs.length;i++){var textDiv=searchDivs[i];var previousZoomFactor=1;if(this.pdfViewer.magnificationModule){previousZoomFactor=this.pdfViewer.magnificationModule.previousZoomFactor;}// eslint-disable-next-line max-len
var outputdata=pageIndex+'_'+previousZoomFactor+'_'+this.pdfViewerBase.getZoomFactor();if(textDiv.getAttribute('name')!==outputdata){// eslint-disable-next-line
textDiv.style.width=parseFloat(textDiv.style.width)/previousZoomFactor*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line
textDiv.style.height=parseFloat(textDiv.style.height)/previousZoomFactor*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line
textDiv.style.top=parseFloat(textDiv.style.top)/previousZoomFactor*this.pdfViewerBase.getZoomFactor()+'px';// eslint-disable-next-line
textDiv.style.left=parseFloat(textDiv.style.left)/previousZoomFactor*this.pdfViewerBase.getZoomFactor()+'px';textDiv.setAttribute('name',outputdata);}}};/**
     * @param pageNumber
     * @private
     */TextSearch.prototype.highlightOtherOccurrences=function(pageNumber){this.initSearch(pageNumber,true);};TextSearch.prototype.highlightOthers=function(isSearched){var indexes=this.getIndexes();var lowerPageValue=parseFloat(indexes.lowerPageValue.toString());var higherPageValue=parseFloat(indexes.higherPageValue.toString());for(var i=lowerPageValue;i<=higherPageValue;i++){this.highlightOtherOccurrences(i);}if(isSearched){this.showLoadingIndicator(false);}};/**
     * @private
     */TextSearch.prototype.clearAllOccurrences=function(){var searchTextDivs=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_searchtext_"]');for(var i=0;i<searchTextDivs.length;i++){searchTextDivs[i].parentElement.removeChild(searchTextDivs[i]);}};/**
     * @private
     */ // eslint-disable-next-line
TextSearch.prototype.getIndexes=function(){var lowerPageValue=this.pdfViewerBase.currentPageNumber-3;lowerPageValue=lowerPageValue>0?lowerPageValue:0;var higherPageValue=this.pdfViewerBase.currentPageNumber+1;higherPageValue=higherPageValue<this.pdfViewerBase.pageCount?higherPageValue:this.pdfViewerBase.pageCount-1;return{lowerPageValue:lowerPageValue,higherPageValue:higherPageValue};};TextSearch.prototype.applyTextSelection=function(){if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isTextSelectionDisabled){var indexes=this.getIndexes();var lowerPageValue=parseFloat(indexes.lowerPageValue.toString());var higherPageValue=parseFloat(indexes.higherPageValue.toString());for(var i=lowerPageValue;i<=higherPageValue;i++){this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i);}}};/**
     * @private
     */TextSearch.prototype.resetTextSearch=function(){this.resetVariables();this.onTextSearchClose();this.searchPageIndex=null;this.searchIndex=0;this.updateSearchInputIcon(true);this.enableNextButton(false);this.enablePrevButton(false);this.documentTextCollection=[];this.isTextRetrieved=false;this.isTextSearched=false;this.isSearchText=false;if(this.searchRequestHandler){this.searchRequestHandler.clear();}};TextSearch.prototype.onTextSearchClose=function(){this.isPrevSearch=false;this.isTextSearch=false;if(this.pdfViewerBase.pageCount>0){this.clearAllOccurrences();this.searchString="";}};TextSearch.prototype.createRequestForSearch=function(pageIndex){var proxy=this;var viewPortWidth=816;var viewPortHeight=this.pdfViewer.element.clientHeight;var pageWidth=this.pdfViewerBase.pageSize[pageIndex].width;var pageHeight=this.pdfViewerBase.pageSize[pageIndex].height;var tileCount=this.pdfViewerBase.getTileCount(pageWidth);var noTileX=viewPortWidth>=pageWidth?1:tileCount;var noTileY=viewPortWidth>=pageWidth?1:tileCount;var isTileRendering=false;var tileSettings=this.pdfViewer.tileRenderingSettings;if(tileSettings.enableTileRendering&&tileSettings.x>0&&tileSettings.y>0){noTileX=viewPortWidth>=pageWidth?1:tileSettings.x;noTileY=viewPortWidth>=pageWidth?1:tileSettings.y;}if(noTileX>1&&noTileY>1){isTileRendering=true;}var _loop_1=function _loop_1(x){var _loop_2=function _loop_2(y){var jsonObject=void 0;// eslint-disable-next-line max-len
jsonObject={xCoordinate:x,yCoordinate:y,pageNumber:pageIndex,viewPortWidth:viewPortWidth,viewPortHeight:viewPortHeight,documentId:proxy.pdfViewerBase.getDocumentId(),hashId:proxy.pdfViewerBase.hashId,zoomFactor:proxy.pdfViewerBase.getZoomFactor(),tilecount:tileCount,action:'Search',elementId:proxy.pdfViewer.element.id,uniqueId:proxy.pdfViewerBase.documentId,tileXCount:noTileX,tileYCount:noTileY};if(this_1.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this_1.pdfViewerBase.jsonDocumentId;}var zoomFactor=this_1.pdfViewerBase.retrieveCurrentZoomFactor();this_1.searchRequestHandler=new AjaxHandler(this_1.pdfViewer);this_1.searchRequestHandler.url=this_1.pdfViewer.serviceUrl+'/'+this_1.pdfViewer.serverActionSettings.renderPages;this_1.searchRequestHandler.responseType='json';var hyperlinkId=this_1.pdfViewerBase.documentId+'_'+pageIndex+'_hyperlinkAndLinkAnnotation';if(sf.base.isNullOrUndefined(this_1.pdfViewerBase.hyperlinkAndLinkAnnotation)||sf.base.isNullOrUndefined(this_1.pdfViewerBase.hyperlinkAndLinkAnnotation[hyperlinkId])){this_1.searchRequestHandler.send(jsonObject);}// eslint-disable-next-line
this_1.searchRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.pdfViewerBase.onControlError(500,data,this.pdfViewer.serverActionSettings.renderPages);data=null;}}if(data){if(data.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,data);var pageNumber=data.pageNumber!==undefined?data.pageNumber:pageIndex;var storeObject={hyperlinks:data['hyperlinks'],hyperlinkBounds:data['hyperlinkBounds'],linkAnnotation:data['linkAnnotation'],linkPage:data['linkPage'],annotationLocation:data['annotationLocation'],width:data['width'],rotation:data['rotation'],scaleFactor:data['scaleFactor'],uniqueId:data['uniqueId'],zoomFactor:data['zoomFactor'],hyperLinkBorderWidth:data["hyperLinkBorderWidth"],hyperLinkBorderColor:data["hyperLinkBorderColor"],textWebLinkBorderWidth:data["textWebLinkBorderWidth"],textWebLinkBorderColor:data["textWebLinkBorderColor"]};if(proxy.pdfViewerBase.pageSize[pageNumber]){// eslint-disable-next-line
proxy.pdfViewerBase.pageSize[pageNumber].rotation=parseFloat(data['rotation']);}proxy.pdfViewerBase.hyperlinkAndLinkAnnotation[proxy.pdfViewerBase.documentId+'_'+pageNumber+'_hyperlinkAndLinkAnnotation']=JSON.stringify(storeObject);}}}};// eslint-disable-next-line
this_1.searchRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,this.pdfViewer.serverActionSettings.renderPages);};// eslint-disable-next-line
this_1.searchRequestHandler.onError=function(result){proxy.pdfViewerBase.openNotificationPopup();// eslint-disable-next-line max-len
proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,this.pdfViewer.serverActionSettings.renderPages);};var textDetailsId=this_1.pdfViewerBase.documentId+'_'+pageIndex+'_textDetails';var isTextNeed=this_1.pdfViewerBase.pageTextDetails?this_1.pdfViewerBase.pageTextDetails[textDetailsId]?false:true:true;if(viewPortWidth>=pageWidth||!this_1.pdfViewer.tileRenderingSettings.enableTileRendering){this_1.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'renderPage',zoomFactor:proxy.pdfViewer.magnificationModule.zoomFactor,isTextNeed:isTextNeed});}else{this_1.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'renderImageAsTile',zoomFactor:zoomFactor,tileX:x,tileY:y,tileXCount:noTileX,tileYCount:noTileY,isTextNeed:isTextNeed});}this_1.pdfViewerBase.pdfViewerRunner.onmessage=function(event){switch(event.data.message){case'imageRendered':if(event.data.message==='imageRendered'){var canvas=document.createElement('canvas');var data=event.data;var value=data.value;var width=data.width;var height=data.height;var pageIndex_1=data.pageIndex;canvas.width=width;canvas.height=height;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(width,height);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var textBounds=data.textBounds;var textContent=data.textContent;var pageText=data.pageText;var rotation=data.rotation;var characterBounds=data.characterBounds;var pdfiumData={image:imageUrl,pageNumber:pageIndex_1,uniqueId:proxy.pdfViewerBase.documentId,pageWidth:width,zoomFactor:zoomFactor};if(isTextNeed){pdfiumData.textBounds=textBounds;pdfiumData.textContent=textContent;pdfiumData.rotation=rotation;pdfiumData.pageText=pageText;proxy.pdfViewerBase.storeTextDetails(pageIndex_1,textBounds,textContent,pageText,rotation,characterBounds);}if(pdfiumData&&pdfiumData.image&&pdfiumData.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages,pdfiumData);var pageNumber=pdfiumData.pageNumber!==undefined?pdfiumData.pageNumber:pageIndex_1;var blobObj=proxy.pdfViewerBase.createBlobUrl(pdfiumData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={image:blobUrl,width:pdfiumData.pageWidth,uniqueId:pdfiumData.uniqueId,zoomFactor:pdfiumData.zoomFactor};proxy.pdfViewerBase.storeImageData(pageNumber,storeObject);if(!isTileRendering){proxy.initSearch(pageIndex_1,false);if(proxy.pdfViewerBase.renderedPagesList.indexOf(event.data.pageIndex)!==-1){proxy.pdfViewerBase.CommonOnMessage(event);}}else{if(x===noTileX-1&&y===noTileY-1){proxy.initSearch(pageIndex_1,false);}}}}break;case'renderTileImage':if(event.data.message==='renderTileImage'){var canvas=document.createElement('canvas');var _a=event.data,value=_a.value,w=_a.w,h=_a.h,noTileX_1=_a.noTileX,noTileY_1=_a.noTileY,x_1=_a.x,y_1=_a.y,pageIndex_2=_a.pageIndex;canvas.setAttribute('height',h);canvas.setAttribute('width',w);canvas.width=w;canvas.height=h;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(w,h);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var tileWidth=w;var tileHeight=h;var textBounds=event.data.textBounds;var textContent=event.data.textContent;var pageText=event.data.pageText;var rotation=event.data.rotation;var characterBounds=event.data.characterBounds;var tileData={image:imageUrl,noTileX:noTileX_1,noTileY:noTileY_1,pageNumber:pageIndex_2,tileX:x_1,tileY:y_1,uniqueId:proxy.pdfViewerBase.documentId,pageWidth:pageWidth,width:tileWidth,transformationMatrix:{Values:[1,0,0,1,tileWidth*x_1,tileHeight*y_1,0,0,0]},zoomFactor:proxy.pdfViewerBase.retrieveCurrentZoomFactor()};if(tileData&&tileData.image&&tileData.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(proxy.pdfViewer.serverActionSettings.renderPages,tileData);var pageNumber=tileData.pageNumber!==undefined?tileData.pageNumber:pageIndex_2;if(x_1==0&&y_1==0){var blobObj=proxy.pdfViewerBase.createBlobUrl(tileData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:tileData.pageWidth,uniqueId:tileData.uniqueId,tileX:tileData.tileX,tileY:tileData.tileY,zoomFactor:tileData.zoomFactor};if(isTextNeed){tileData.textBounds=textBounds;tileData.textContent=textContent;tileData.rotation=rotation;tileData.pageText=pageText;proxy.pdfViewerBase.storeTextDetails(pageIndex_2,textBounds,textContent,pageText,rotation,characterBounds);}else{var textDetails=JSON.parse(proxy.pdfViewerBase.pageTextDetails[textDetailsId]);tileData.textBounds=textDetails.textBounds;tileData.textContent=textDetails.textContent;tileData.rotation=textDetails.rotation;tileData.pageText=textDetails.pageText;}proxy.pdfViewerBase.storeImageData(pageNumber,storeObject,tileData.tileX,tileData.tileY);}else{var blobObj=proxy.pdfViewerBase.createBlobUrl(tileData.image.split('base64,')[1],'image/png');var Url=URL||webkitURL;var blobUrl=Url.createObjectURL(blobObj);var storeObject={// eslint-disable-next-line
image:blobUrl,width:tileData.pageWidth,uniqueId:tileData.uniqueId,tileX:tileData.tileX,tileY:tileData.tileY,zoomFactor:tileData.zoomFactor};proxy.pdfViewerBase.storeImageData(pageNumber,storeObject,tileData.tileX,tileData.tileY);}if(x_1===noTileX_1-1&&y_1===noTileY_1-1){proxy.initSearch(pageIndex_2,false);}}}break;case"renderThumbnail":proxy.pdfViewerBase.CommonOnMessage(event);break;default:console.log('Unknown message type:',event.data.message);}};};for(var y=0;y<noTileY;y++){_loop_2(y);}};var this_1=this;for(var x=0;x<noTileX;x++){_loop_1(x);}};/**
     * @private
     */TextSearch.prototype.getPDFDocumentTexts=function(){var startIndex=0;var endIndex=50;var pageCount=this.pdfViewerBase.pageCount;if(endIndex>=pageCount){endIndex=pageCount;}this.createRequestForGetPdfTexts(startIndex,endIndex);};/**
     * @param startIndex
     * @param endIndex
     * @private
     */TextSearch.prototype.createRequestForGetPdfTexts=function(startIndex,endIndex){var proxy=this;var jsonObject;// eslint-disable-next-line max-len
jsonObject={pageStartIndex:startIndex,pageEndIndex:endIndex,documentId:proxy.pdfViewerBase.getDocumentId(),hashId:proxy.pdfViewerBase.hashId,action:'RenderPdfTexts',elementId:proxy.pdfViewer.element.id,uniqueId:proxy.pdfViewerBase.documentId};if(this.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.pdfViewerBase.jsonDocumentId;}this.searchRequestHandler=new AjaxHandler(this.pdfViewer);this.searchRequestHandler.url=this.pdfViewer.serviceUrl+'/'+this.pdfViewer.serverActionSettings.renderTexts;this.searchRequestHandler.responseType='json';this.searchRequestHandler.send(jsonObject);// eslint-disable-next-line
this.searchRequestHandler.onSuccess=function(result){// eslint-disable-next-line
var data=result.data;if(data){if(_typeof(data)!=='object'){try{data=JSON.parse(data);}catch(error){proxy.pdfViewerBase.onControlError(500,data,this.pdfViewer.serverActionSettings.renderTexts);data=null;}}if(data){if(data.documentTextCollection&&data.uniqueId===proxy.pdfViewerBase.documentId){proxy.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderTexts,data);if(proxy.documentTextCollection.length>0){proxy.documentTextCollection=data.documentTextCollection.concat(proxy.documentTextCollection);proxy.documentTextCollection=proxy.orderPdfTextCollections(proxy.documentTextCollection);}else{proxy.documentTextCollection=data.documentTextCollection;}var pageCount=proxy.pdfViewerBase.pageCount;if(endIndex!==pageCount){startIndex=endIndex;endIndex=endIndex+50;if(endIndex>=pageCount){endIndex=pageCount;}proxy.createRequestForGetPdfTexts(startIndex,endIndex);}else{proxy.isTextRetrieved=true;proxy.pdfViewer.fireTextExtractionCompleted(proxy.documentTextCollection);if(proxy.isTextSearched&&proxy.searchString.length>0){proxy.textSearch(proxy.searchString);proxy.isTextSearched=false;}}}}}};// eslint-disable-next-line
this.searchRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,this.pdfViewer.serverActionSettings.renderTexts);};// eslint-disable-next-line
this.searchRequestHandler.onError=function(result){proxy.pdfViewerBase.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,this.pdfViewer.serverActionSettings.renderTexts);};};// eslint-disable-next-line
TextSearch.prototype.orderPdfTextCollections=function(oldCollection){// eslint-disable-next-line
var annotationCollectionList=[];for(var i=0;i<oldCollection.length;i++){if(annotationCollectionList.length===0){annotationCollectionList.push(oldCollection[i]);}else{// eslint-disable-next-line
if(parseInt(Object.keys(oldCollection[i])[0])>parseInt(Object.keys(annotationCollectionList[annotationCollectionList.length-1])[0])){annotationCollectionList.push(oldCollection[i]);}else{for(var j=0;j<annotationCollectionList.length;j++){// eslint-disable-next-line
if(parseInt(Object.keys(oldCollection[i])[0])<parseInt(Object.keys(annotationCollectionList[j])[0])){annotationCollectionList.splice(j,0,oldCollection[i]);break;}}}}}return annotationCollectionList;};TextSearch.prototype.createSearchBoxButtons=function(id,className){// eslint-disable-next-line max-len
var button=sf.base.createElement('button',{id:this.pdfViewer.dataId+'_'+id,className:'e-btn e-icon-btn e-pv-search-btn '+className});button.setAttribute('type','button');// eslint-disable-next-line max-len
var iconSpan=sf.base.createElement('span',{id:this.pdfViewer.dataId+'_'+id+'Icon',className:'e-pv-icon-search '+className+'-icon'});button.disabled=true;button.appendChild(iconSpan);return button;};TextSearch.prototype.enablePrevButton=function(isEnable){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(isEnable){this.prevSearchBtn.removeAttribute('disabled');}else{if(this.prevSearchBtn){this.prevSearchBtn.disabled=true;}}}};TextSearch.prototype.enableNextButton=function(isEnable){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(isEnable){this.nextSearchBtn.removeAttribute('disabled');}else{if(this.nextSearchBtn){this.nextSearchBtn.disabled=true;}}}};/**
     * @private
     */TextSearch.prototype.resetVariables=function(){this.searchedPages=[];// eslint-disable-next-line
this.searchMatches=new Array();};/**
     * @param element
     * @param inputElement
     * @private
     */TextSearch.prototype.searchButtonClick=function(element,inputElement){this.isMessagePopupOpened=false;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var searchElement=this.pdfViewerBase.getElement('_search_box-icon');element=searchElement.children[0].children[0];inputElement=this.pdfViewerBase.getElement('_search_input');}if(element.classList.contains('e-pv-search-icon')){this.initiateTextSearch(inputElement);}else if(element.classList.contains('e-pv-search-close')){this.showLoadingIndicator(false);inputElement.value='';this.resetTextSearch();inputElement.focus();}};TextSearch.prototype.updateSearchInputIcon=function(isEnable){if(this.searchBtn&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.searchBtn=this.pdfViewerBase.getElement('_search_box-icon').children[0].children[0];}if(this.searchBtn){if(isEnable){this.searchBtn.classList.remove('e-pv-search-close');this.searchBtn.classList.add('e-pv-search-icon');}else{this.searchBtn.classList.remove('e-pv-search-icon');this.searchBtn.classList.add('e-pv-search-close');}}};TextSearch.prototype.onMessageBoxOpen=function(){var _this=this;this.showLoadingIndicator(false);this.pdfViewerBase.getElement('_search_input').blur();if(this.pdfViewerBase.isMouseDown&&this.pdfViewerBase.action==='Ink'){this.pdfViewerBase.isMouseDown=false;}this.isMessagePopupOpened=true;if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_Nomatches');promise.then(function(value){_this.pdfViewerBase.textLayer.createNotificationPopup(value);});}else{var promise=this.pdfViewer._dotnetInstance.invokeMethodAsync('GetLocaleText','PdfViewer_NoTextFound');promise.then(function(value){_this.pdfViewerBase.navigationPane.createTooltipMobile(value,true);});}};/**
     * Searches the target text in the PDF document and highlights the occurrences in the pages
     *
     * @param  {string} searchText - Specifies the searchText content
     * @param  {boolean} isMatchCase - If set true , its highlights the MatchCase content
     * @returns void
     */TextSearch.prototype.searchText=function(searchText,isMatchCase){if(searchText&&searchText.length>0&&searchText[searchText.length-1]===' '){searchText=searchText.slice(0,searchText.length-1);}this.searchString=searchText;this.isMatchCase=isMatchCase;if(this.isTextSearch){this.resetVariables();this.clearAllOccurrences();}this.searchIndex=0;this.textSearch(searchText);};/**
     * Searches the next occurrence of the searched text from the current occurrence of the PdfViewer.
     *
     * @returns void
     */TextSearch.prototype.searchNext=function(){this.nextSearch();};/**
     * Searches the previous occurrence of the searched text from the current occurrence of the PdfViewer.
     *
     * @returns void
     */TextSearch.prototype.searchPrevious=function(){this.prevSearch();};/**
     * Cancels the text search of the PdfViewer.
     *
     * @returns void
     */TextSearch.prototype.cancelTextSearch=function(){this.resetTextSearch();};/**
     * @private
     */TextSearch.prototype.destroy=function(){this.searchMatches=undefined;};/**
     * @private
     */TextSearch.prototype.getModuleName=function(){return'TextSearch';};return TextSearch;}();/**
 * export types
 */ /**
 * Print module
 */var Print=/** @class */function(){/**
     * @param viewer
     * @param base
     * @private
     */function Print(viewer,base){var _this_1=this;this.printHeight=1056;this.printWidth=816;this.firefoxPrintHeight=1123;this.firefoxPrintWidth=794;this.closePrintWindow=function(){if(_this_1.printWindow&&!_this_1.printWindow.closed){_this_1.printWindow.close();}};this.pdfViewer=viewer;this.pdfViewerBase=base;}/**
     * Print the PDF document being loaded in the ejPdfViewer control.
     *
     * @returns void
     */Print.prototype.print=function(){if(this.pdfViewerBase.pageCount>0){// eslint-disable-next-line max-len
this.printViewerContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_print_viewer_container',className:'e-pv-print-viewer-container'});if(this.pdfViewer.printMode==='Default'){this.pdfViewerBase.showPrintLoadingIndicator(true);this.iframe=document.createElement('iframe');this.iframe.className='iframeprint';this.iframe.id='iframePrint';this.iframe.style.position='fixed';this.iframe.style.top='-100000000px';document.body.appendChild(this.iframe);this.frameDoc=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument;this.frameDoc.document.open();}else{this.printWindow=window.open('','print','height='+window.outerHeight+',width='+window.outerWidth+',tabbar=no');this.printWindow.moveTo(0,0);this.printWindow.resizeTo(screen.availWidth,screen.availHeight);this.createPrintLoadingIndicator(this.printWindow.document.body);}window.customStampCollection=new Map();var annotationIndex_1=0;var annotationCollection=this.pdfViewer.annotationCollection;var isCustomStampPresent=false;var customStampCount_1=0;var annotationCount_1=0;var _this_2=this;if(!this.pdfViewer.annotationSettings.skipPrint){if(annotationCollection&&annotationCollection.length>0){annotationCount_1=this.pdfViewer.annotationCollection.length;for(annotationIndex_1=0;annotationIndex_1<annotationCollection.length;annotationIndex_1++){if(annotationCollection[annotationIndex_1].stampAnnotationType&&annotationCollection[annotationIndex_1].stampAnnotationType=="image"){if(annotationCollection[annotationIndex_1].stampAnnotationPath){var customStampImage=new Image();customStampImage.src=annotationCollection[annotationIndex_1].stampAnnotationPath;customStampCount_1++;isCustomStampPresent=true;window.customStampCollection.set(annotationCollection[annotationIndex_1].annotationId,customStampImage);customStampImage.onload=function(){customStampCount_1--;if(customStampCount_1==0&&annotationIndex_1==annotationCount_1){_this_2.callPrintAction();}};}else{var annotationCollections=this.pdfViewerBase.documentAnnotationCollections;var stampCollections=annotationCollections[annotationCollection[annotationIndex_1].pageNumber].stampAnnotations;if(stampCollections&&stampCollections.length>0){for(var stampPageIndex=0;stampPageIndex<stampCollections.length;stampPageIndex++){if(stampCollections[stampPageIndex].Apperarance&&stampCollections[stampPageIndex].Apperarance['2']&&stampCollections[stampPageIndex].Apperarance['2'].imagedata){var customStampImage=new Image();customStampImage.src=stampCollections[stampPageIndex].Apperarance['2'].imagedata;customStampCount_1++;isCustomStampPresent=true;window.customStampCollection.set(stampCollections[stampPageIndex].AnnotName,customStampImage);customStampImage.onload=function(){customStampCount_1--;if(customStampCount_1==0&&annotationIndex_1==annotationCount_1){_this_2.callPrintAction();}};}}}}}}if(!isCustomStampPresent&&annotationIndex_1==annotationCount_1){this.callPrintAction();}}else if(!isCustomStampPresent&&annotationIndex_1==annotationCount_1){this.callPrintAction();}}else if(!isCustomStampPresent&&annotationIndex_1==annotationCount_1){this.callPrintAction();}}};Print.prototype.callPrintAction=function(){var _this_1=this;setTimeout(function(){for(var pageIndex=0;pageIndex<_this_1.pdfViewerBase.pageCount;pageIndex++){var pageWidth=_this_1.pdfViewerBase.pageSize[pageIndex].width;var pageHeight=_this_1.pdfViewerBase.pageSize[pageIndex].height;_this_1.pdfViewer.printModule.createRequestForPrint(pageIndex,pageWidth,pageHeight,_this_1.pdfViewerBase.pageCount,_this_1.pdfViewer.printScaleFactor);}_this_1.pdfViewer.firePrintEnd(_this_1.pdfViewer.downloadFileName);},100);};Print.prototype.createRequestForPrint=function(pageIndex,pageWidth,pageHeight,pageCount,printScaleFactor){var proxy=this;// tslint: disable-next-line:max-line-length
// set default zoomFactor value.
// BLAZ-25661 - We have use the window.devicePixelRatio to default printDevicePixelRatio as 2 for improve the print quality of image.
var printDevicePixelRatio=2;var jsonObject={pageNumber:pageIndex,documentId:this.pdfViewerBase.documentId,hashId:this.pdfViewerBase.hashId,zoomFactor:printDevicePixelRatio,action:'PrintImages',elementId:this.pdfViewer.dataId,uniqueId:this.pdfViewerBase.documentId};if(this.pdfViewerBase.jsonDocumentId){// eslint-disable-next-line
jsonObject.documentId=this.pdfViewerBase.jsonDocumentId;}proxy.pdfViewerBase.createFormfieldsJsonData();proxy.printRequestHandler=new AjaxHandler(proxy.pdfViewer);proxy.printRequestHandler.url=proxy.pdfViewer.serviceUrl+'/'+proxy.pdfViewer.serverActionSettings.print;proxy.printRequestHandler.responseType=null;proxy.printRequestHandler.mode=false;if(this.pdfViewerBase.validateForm&&this.pdfViewer.enableFormFieldsValidation){this.pdfViewer.fireValidatedFailed(proxy.pdfViewer.serverActionSettings.download);this.pdfViewerBase.validateForm=false;this.pdfViewerBase.showPrintLoadingIndicator(false);}else{this.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:pageIndex,message:'printImage',printScaleFactor:printScaleFactor>=1?printScaleFactor:1,printDevicePixelRatio:printDevicePixelRatio});}// eslint-disable-next-line
this.printRequestHandler.onFailure=function(result){proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.print);};// eslint-disable-next-line
this.printRequestHandler.onError=function(result){proxy.pdfViewerBase.openNotificationPopup();proxy.pdfViewer.fireAjaxRequestFailed(result.status,result.statusText,proxy.pdfViewer.serverActionSettings.print);};};Print.prototype.printOnmessage=function(event){var canvas=document.createElement('canvas');var _a=event.data,value=_a.value,width=_a.width,height=_a.height,pageIndex=_a.pageIndex,pageWidth=_a.pageWidth,pageHeight=_a.pageHeight,printDevicePixelRatio=_a.printDevicePixelRatio;canvas.width=width;canvas.height=height;var canvasContext=canvas.getContext('2d');var imageData=canvasContext.createImageData(width,height);imageData.data.set(value);canvasContext.putImageData(imageData,0,0);var imageUrl=canvas.toDataURL();var data={image:imageUrl,pageNumber:pageIndex,uniqueId:this.pdfViewerBase.documentId,pageWidth:width};this.printSuccess(data,pageWidth,pageHeight,pageIndex,printDevicePixelRatio);};Print.prototype.printSuccess=function(result,pageWidth,pageHeight,pageIndex,printDevicePixelRatio){var _this_1=this;this.pdfViewerBase.isPrint=true;// eslint-disable-next-line
var printImage=result;if(printImage){if(_typeof(printImage)!=='object'){try{printImage=JSON.parse(printImage);if(_typeof(printImage)!=='object'){this.pdfViewerBase.onControlError(500,printImage,this.pdfViewer.serverActionSettings.print);printImage=null;}}catch(error){this.pdfViewerBase.onControlError(500,printImage,this.pdfViewer.serverActionSettings.print);printImage=null;}}}if(printImage&&printImage.uniqueId===this.pdfViewerBase.documentId){this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.print,printImage);var annotationSource_1='';if(!this.pdfViewer.annotationSettings.skipPrint){// eslint-disable-next-line
var annotationCollections=this.pdfViewerBase.documentAnnotationCollections;if(annotationCollections&&annotationCollections[printImage.pageNumber]&&this.pdfViewerBase.isTextMarkupAnnotationModule()){// eslint-disable-next-line
var printCollection=annotationCollections[printImage.pageNumber];if(this.pdfViewerBase.isImportAction){var textMarkupAnnotation=printCollection.textMarkupAnnotation;var shapeAnnotation=printCollection.shapeAnnotation;var measureShapeAnnotation=printCollection.measureShapeAnnotation;var stampAnnotation=printCollection.stampAnnotations;// eslint-disable-next-line
var stickyNoteAnnotation=printCollection.stickyNotesAnnotation;// eslint-disable-next-line max-len
annotationSource_1=this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(textMarkupAnnotation,printImage.pageNumber,stampAnnotation,shapeAnnotation,measureShapeAnnotation,stickyNoteAnnotation);}else{// eslint-disable-next-line max-len
annotationSource_1=this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(printCollection.textMarkupAnnotation,printImage.pageNumber,printCollection.stampAnnotations,printCollection.shapeAnnotation,printCollection.measureShapeAnnotation,printCollection.stickyNoteAnnotation);}}if(this.pdfViewerBase.isAnnotationCollectionRemoved){// eslint-disable-next-line max-len
annotationSource_1=this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(null,printImage.pageNumber,null,null,null,null);}}var currentPageNumber_1=printImage.pageNumber;// eslint-disable-next-line max-len
this.printCanvas=sf.base.createElement('canvas',{id:this.pdfViewer.element.id+'_printCanvas_'+pageIndex,className:'e-pv-print-canvas'});this.printCanvas.style.width=pageWidth+'px';this.printCanvas.style.height=pageHeight+'px';var printScaleValue=1.5;//An A0 piece of paper measures 33.1 × 46.8 inches, with 46.8 inches being the greater dimension. The pixel value of 46.8 inches is 4493px. If the document size is too large, we may not be able to display the image. Therefore, we should consider the maximum size of A0 paper if the page size is greater than 4493 pixels.
if(navigator.userAgent.indexOf('Firefox')!==-1){this.printHeight=this.firefoxPrintHeight;this.printWidth=this.firefoxPrintWidth;}this.printCanvas.height=this.printHeight*printScaleValue*printDevicePixelRatio;this.printCanvas.width=this.printWidth*printScaleValue*printDevicePixelRatio;var context_1=this.printCanvas.getContext('2d');var pageImage_1=new Image();var annotationImage_1=new Image();pageImage_1.onload=function(){if(pageHeight>pageWidth||!_this_1.pdfViewer.enablePrintRotation){context_1.drawImage(pageImage_1,0,0,_this_1.printCanvas.width,_this_1.printCanvas.height);if(annotationSource_1){context_1.drawImage(annotationImage_1,0,0,_this_1.printCanvas.width,_this_1.printCanvas.height);}}else{// translate to center canvas
context_1.translate(_this_1.printCanvas.width*0.5,_this_1.printCanvas.height*0.5);// rotate the canvas to - 90 degree
context_1.rotate(-0.5*Math.PI);// un translate the canvas back to origin
context_1.translate(-_this_1.printCanvas.height*0.5,-_this_1.printCanvas.width*0.5);// draw the image
context_1.drawImage(pageImage_1,0,0,_this_1.printCanvas.height,_this_1.printCanvas.width);if(annotationSource_1){context_1.drawImage(annotationImage_1,0,0,_this_1.printCanvas.height,_this_1.printCanvas.width);}}if(currentPageNumber_1===_this_1.pdfViewerBase.pageCount-1){_this_1.printWindowOpen();}_this_1.pdfViewer.renderDrawing(null,currentPageNumber_1);};pageImage_1.src=printImage.image;annotationImage_1.src=annotationSource_1;this.printViewerContainer.appendChild(this.printCanvas);this.pdfViewerBase.isPrint=false;}};// eslint-disable-next-line
Print.prototype.renderFieldsForPrint=function(pageIndex,heightRatio,widthRatio){// eslint-disable-next-line
var data=null;if(this.pdfViewer.formFieldsModule){data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');}var targetField;if(this.pdfViewer.printMode==='Default'){targetField=this.frameDoc.document.getElementById('fields_'+pageIndex);}else{targetField=this.printWindow.document.getElementById('fields_'+pageIndex);}if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){// eslint-disable-next-line
var currentData=formFieldsData[i];// eslint-disable-next-line
if(parseFloat(currentData['PageIndex'])===pageIndex){// eslint-disable-next-line
var field=this.pdfViewer.formFieldsModule.createFormFields(currentData,pageIndex,i,targetField);// eslint-disable-next-line
var inputField=field.currentField;inputField=inputField&&inputField.inputField?inputField.inputField:inputField;if(inputField){// eslint-disable-next-line
var bounds=currentData['LineBounds'];// eslint-disable-next-line
var font=currentData['Font'];this.applyPosition(inputField,bounds,font,heightRatio,widthRatio);inputField.InsertSpaces=currentData.InsertSpaces;if(inputField.InsertSpaces){// eslint-disable-next-line
var font_1=parseInt(inputField.style.width)/inputField.maxLength-parseFloat(inputField.style.fontSize)/2-0.6;inputField.style.letterSpacing=''+font_1+'px';inputField.style.fontFamily='monospace';}// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails.width>pageDetails.height&&this.pdfViewer.enablePrintRotation){inputField.style.transform='rotate(-90deg)';var previousLeft=parseFloat(inputField.style.left);var currentWidthPosition=parseFloat(inputField.style.width)/2;var currentHeightPosition=parseFloat(inputField.style.height)/2;var currentTop=parseFloat(inputField.style.top);var currentHeight=parseFloat(inputField.style.height);inputField.style.left=currentHeightPosition-currentWidthPosition+currentTop+'px';inputField.style.top=pageDetails.width/widthRatio-currentHeight/heightRatio-(currentWidthPosition/heightRatio-currentHeightPosition/heightRatio+previousLeft)+'px';}if(currentData['Name']==='Textbox'||currentData['Name']==='Password'||currentData['Name']==='DropDown'||currentData['Name']==='ListBox'){inputField.style.backgroundColor='white';}else{inputField.style.backgroundColor='transparent';}if(!currentData.IsSignatureField){inputField.style.borderColor='transparent';}targetField.appendChild(inputField);}}}}};/**
     * @param inputField
     * @param bounds
     * @param font
     * @param heightRatio
     * @param widthRatio
     * @param inputField
     * @param bounds
     * @param font
     * @param heightRatio
     * @param widthRatio
     * @private
     */ // eslint-disable-next-line
Print.prototype.applyPosition=function(inputField,bounds,font,heightRatio,widthRatio,isFormDesignerField,zoomValue){if(bounds){var left=isFormDesignerField?bounds.X/zoomValue/widthRatio:this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.X)/widthRatio;var top_1=isFormDesignerField?bounds.Y/zoomValue/heightRatio:this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Y)/heightRatio;var width=isFormDesignerField?bounds.Width/zoomValue/widthRatio:this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Width)/widthRatio;var height=isFormDesignerField?bounds.Height/zoomValue/heightRatio:this.pdfViewer.formFieldsModule.ConvertPointToPixel(bounds.Height)/heightRatio;var fontHeight=0;if(font!==null&&font.Height){inputField.style.fontFamily=font.Name;if(font.Italic){inputField.style.fontStyle='italic';}if(font.Bold){inputField.style.fontWeight='Bold';}fontHeight=this.pdfViewerBase.ConvertPointToPixel(font.Size);}if(sf.base.Browser.isIE){top_1=top_1-1;}if(inputField.type==="text"){height=height-6;width=width-7;}inputField=inputField&&inputField.inputField?inputField.inputField:inputField;this.pdfViewerBase.setStyleToTextDiv(inputField,left,top_1,fontHeight,width,height,true);}};Print.prototype.printWindowOpen=function(){var _this_1=this;var browserUserAgent=navigator.userAgent;// eslint-disable-next-line
var printDocument;if(this.pdfViewer.printMode==='Default'){printDocument=this.frameDoc.document;}else{printDocument=this.printWindow.document;}for(var i=0;i<this.printViewerContainer.children.length;i++){var printFileName=this.pdfViewer.fileName;if(i===0){if(browserUserAgent.indexOf('Chrome')!==-1||browserUserAgent.indexOf('Safari')!==-1||browserUserAgent.indexOf('Firefox')!==-1){printDocument.write('<!DOCTYPE html>');printDocument.write('<html moznomarginboxes mozdisallowselectionprint><head><title>'+printFileName+'</title><style>html, body { height: 100%; width:100% }'+' img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; }'+' img { width:auto; width:auto; box-sizing: border-box; }br, button { display: none; }'+' div{ page-break-inside: avoid; }} @page{margin:0mm;  size:'+this.printWidth.toString()+'px '+this.printHeight.toString()+'px; }</style></head><body><center class="loader">');}else{printDocument.write('<!DOCTYPE html>');printDocument.write('<html><head><title>'+printFileName+'</title>'+'<style>html, body { height: 100%; } img { height: 100%; width: 100%; }@media print { body { margin: 0cm; }'+'img { width:auto; width:auto; box-sizing: border-box; }br, button { display: none; } '+'div{ page-break-inside: avoid; }} @page{margin:0mm;  size:'+this.printWidth.toString()+'px '+this.printHeight.toString()+'px; }</style></head><body><center>');}}// eslint-disable-next-line max-len
var canvasUrl=this.printViewerContainer.children[i].toDataURL();printDocument.write('<div style="margin:0mm;width:'+this.printWidth.toString()+'px;height:'+this.printHeight.toString()+'px;position:relative"><img src="'+canvasUrl+'" id="'+'image_'+i+'" /><div id="'+'fields_'+i+'" style="margin:0px;top:0px;left:0px;position:absolute;width:'+this.printWidth.toString()+'px;height:'+this.printHeight.toString()+'px;z-index:2"></div></div>');if(this.pdfViewer.formFieldsModule){var pageWidth=this.pdfViewerBase.pageSize[i].width;var pageHeight=this.pdfViewerBase.pageSize[i].height;var heightRatio;var widthRatio;if(pageHeight<pageWidth&&this.pdfViewer.enablePrintRotation){heightRatio=pageHeight/this.printWidth;widthRatio=pageWidth/this.printHeight;}else{heightRatio=pageHeight/this.printHeight;widthRatio=pageWidth/this.printWidth;}this.renderFieldsForPrint(i,heightRatio,widthRatio);}}if(this.printWindow){window.addEventListener('beforeunload',this.closePrintWindow);}if(sf.base.Browser.isIE||sf.base.Browser.info.name==='edge'||sf.base.Browser.isDevice||/Mobile/.test(navigator.userAgent)&&this.pdfViewer.enableDesktopMode){try{if(this.pdfViewer.printMode==='Default'){this.pdfViewerBase.showPrintLoadingIndicator(false);this.iframe.contentWindow.document.execCommand('print',false,null);}else{this.printWindow.document.execCommand('print',false,null);}}catch(e){if(this.pdfViewer.printMode==='Default'){this.pdfViewerBase.showPrintLoadingIndicator(false);this.iframe.contentWindow.print();}else{this.printWindow.print();}}}else{setTimeout(function(){if(_this_1.pdfViewer.printMode==='Default'){_this_1.pdfViewerBase.showPrintLoadingIndicator(false);_this_1.iframe.contentWindow.print();_this_1.iframe.contentWindow.focus();document.body.removeChild(_this_1.iframe);}else{if(_this_1.printWindow){_this_1.printWindow.print();_this_1.printWindow.focus();_this_1.printWindow.close();}}},200);}};// eslint-disable-next-line
Print.prototype.createPrintLoadingIndicator=function(element){// eslint-disable-next-line
var printWindowContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printWindowcontainer'});printWindowContainer.style.height='100%';printWindowContainer.style.width='100%';printWindowContainer.style.position='absolute';printWindowContainer.style.zIndex=2000;printWindowContainer.style.left=0;printWindowContainer.style.top=0;printWindowContainer.style.overflow='auto';printWindowContainer.style.backgroundColor='rgba(0, 0, 0, 0.3)';element.appendChild(printWindowContainer);var printWaitingPopup=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printLoadingContainer'});printWaitingPopup.style.position='absolute';printWaitingPopup.style.width='50px';printWaitingPopup.style.height='50px';printWaitingPopup.style.left='46%';printWaitingPopup.style.top='45%';printWindowContainer.style.zIndex=3000;printWindowContainer.appendChild(printWaitingPopup);// eslint-disable-next-line
var printImageContainer=new Image();// eslint-disable-next-line
printImageContainer.src='data:image/gif;base64,R0lGODlhNgA3APMAAP///wAAAHh4eBwcHA4ODtjY2FRUVNzc3MTExEhISIqKigAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAANgA3AAAEzBDISau9OOvNu/9gKI5kaZ4lkhBEgqCnws6EApMITb93uOqsRC8EpA1Bxdnx8wMKl51ckXcsGFiGAkamsy0LA9pAe1EFqRbBYCAYXXUGk4DWJhZN4dlAlMSLRW80cSVzM3UgB3ksAwcnamwkB28GjVCWl5iZmpucnZ4cj4eWoRqFLKJHpgSoFIoEe5ausBeyl7UYqqw9uaVrukOkn8LDxMXGx8ibwY6+JLxydCO3JdMg1dJ/Is+E0SPLcs3Jnt/F28XXw+jC5uXh4u89EQAh+QQJCgAAACwAAAAANgA3AAAEzhDISau9OOvNu/9gKI5kaZ5oqhYGQRiFWhaD6w6xLLa2a+iiXg8YEtqIIF7vh/QcarbB4YJIuBKIpuTAM0wtCqNiJBgMBCaE0ZUFCXpoknWdCEFvpfURdCcM8noEIW82cSNzRnWDZoYjamttWhphQmOSHFVXkZecnZ6foKFujJdlZxqELo1AqQSrFH1/TbEZtLM9shetrzK7qKSSpryixMXGx8jJyifCKc1kcMzRIrYl1Xy4J9cfvibdIs/MwMue4cffxtvE6qLoxubk8ScRACH5BAkKAAAALAAAAAA2ADcAAATOEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwyZKxhqhgJJeSQVdraBNFSsVUVPHsEAzJrEtnJNSELXRN2bKcwjw19f0QG7PjA7B2EGfn+FhoeIiYoSCAk1CQiLFQpoChlUQwhuBJEWcXkpjm4JF3w9P5tvFqZsLKkEF58/omiksXiZm52SlGKWkhONj7vAxcbHyMkTmCjMcDygRNAjrCfVaqcm11zTJrIjzt64yojhxd/G28XqwOjG5uTxJhEAIfkECQoAAAAsAAAAADYANwAABM0QyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/i8qmCoGQoacT8FZ4AXbFopfTwEBhhnQ4w2j0GRkgQYiEOLPI6ZUkgHZwd6EweLBqSlq6ytricICTUJCKwKkgojgiMIlwS1VEYlspcJIZAkvjXHlcnKIZokxJLG0KAlvZfAebeMuUi7FbGz2z/Rq8jozavn7Nev8CsRACH5BAkKAAAALAAAAAA2ADcAAATLEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwzJNCmPzheUyJuKijVrZ2cTlrg1LwjcO5HFyeoJeyM9U++mfE6v2+/4PD6O5F/YWiqAGWdIhRiHP4kWg0ONGH4/kXqUlZaXmJlMBQY1BgVuUicFZ6AhjyOdPAQGQF0mqzauYbCxBFdqJao8rVeiGQgJNQkIFwdnB0MKsQrGqgbJPwi2BMV5wrYJetQ129x62LHaedO21nnLq82VwcPnIhEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/g8Po7kX9haKoAZZ0iFGIc/iRaDQ40Yfj+RepSVlpeYAAgJNQkIlgo8NQqUCKI2nzNSIpynBAkzaiCuNl9BIbQ1tl0hraewbrIfpq6pbqsioaKkFwUGNQYFSJudxhUFZ9KUz6IGlbTfrpXcPN6UB2cHlgfcBuqZKBEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7yJEopZA4CsKPDUKfxIIgjZ+P3EWe4gECYtqFo82P2cXlTWXQReOiJE5bFqHj4qiUhmBgoSFho59rrKztLVMBQY1BgWzBWe8UUsiuYIGTpMglSaYIcpfnSHEPMYzyB8HZwdrqSMHxAbath2MsqO0zLLorua05OLvJxEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhfohELYHQuGBDgIJXU0Q5CKqtOXsdP0otITHjfTtiW2lnE37StXUwFNaSScXaGZvm4r0jU1RWV1hhTIWJiouMjVcFBjUGBY4WBWw1A5RDT3sTkVQGnGYYaUOYPaVip3MXoDyiP3k3GAeoAwdRnRoHoAa5lcHCw8TFxscduyjKIrOeRKRAbSe3I9Um1yHOJ9sjzCbfyInhwt3E2cPo5dHF5OLvJREAOwAAAAAAAAAAAA==';printImageContainer.style.width='50px';printImageContainer.style.height='50px';printWaitingPopup.appendChild(printImageContainer);var printLabelContainer=sf.base.createElement('div',{id:this.pdfViewer.dataId+'_printLabelContainer'});printLabelContainer.style.position='absolute';printLabelContainer.textContent='Loading ...';printLabelContainer.style.fontWeight='Bold';printLabelContainer.style.left='46%';printLabelContainer.style.top='54.5%';printLabelContainer.style.zIndex='3000';printWindowContainer.appendChild(printLabelContainer);};/**
     * @private
     */Print.prototype.destroy=function(){this.printViewerContainer=undefined;this.frameDoc=undefined;if(this.printWindow){window.removeEventListener('beforeunload',this.closePrintWindow);}this.printWindow=undefined;};/**
     * @private
     */Print.prototype.getModuleName=function(){return'Print';};return Print;}();/**
 * export types
 */ /**
 * The `FormFields` module is to render formfields in the PDF document.
 *
 */var FormFields=/** @class */function(){/**
     * @param viewer
     * @param base
     * @param viewer
     * @param base
     * @private
     */function FormFields(viewer,base){// eslint-disable-next-line
this.maintainTabIndex={};// eslint-disable-next-line
this.maintanMinTabindex={};this.isSignatureField=false;this.isKeyDownCheck=false;/**
         * @private
         */ // eslint-disable-next-line
this.readOnlyCollection=[];this.isSignatureRendered=false;/**
         * @private
         */ // eslint-disable-next-line
this.signatureFieldCollection=[];this.selectedIndex=[];this.pdfViewer=viewer;this.pdfViewerBase=base;}/**
     * @param pageIndex
     * @private
     */FormFields.prototype.renderFormFields=function(pageIndex){this.maxTabIndex=0;this.minTabIndex=-1;// eslint-disable-next-line
this.data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(this.data){// eslint-disable-next-line
this.formFieldsData=JSON.parse(this.data);var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);var canvasElement=document.getElementById(this.pdfViewer.dataId+'_pageCanvas_'+pageIndex);var count=void 0;if(this.formFieldsData!==null&&canvasElement!==null&&textLayer!==null){var flag=false;for(var i=0;i<this.formFieldsData.length;i++){var formField=this.formFieldsData[i];if(!flag&&sf.base.isNullOrUndefined(formField.ActualFieldName)&&formField.PageIndex===pageIndex){count=parseInt(formField.FieldName.split('_')[1]);flag=true;}}for(var i=0;i<this.formFieldsData.length;i++){// eslint-disable-next-line
var currentData=this.formFieldsData[i];if(currentData.FieldName!==''){if(currentData.IsInitialField){currentData.Name='InitialField';}// eslint-disable-next-line
var font=currentData['Font'];// eslint-disable-next-line
if(parseFloat(currentData['PageIndex'])==pageIndex){// eslint-disable-next-line
var field=this.createFormFields(currentData,pageIndex,i,null,count);var inputField=field.currentField;var signCount=field.count;if(inputField){var indicatorSpanIndex=void 0;var inputFieldOfSignature=inputField.inputField;if(inputFieldOfSignature){indicatorSpanIndex=inputField.index;inputField=inputFieldOfSignature;}// eslint-disable-next-line
var divElement=this.createParentElement(currentData,pageIndex);// eslint-disable-next-line
var bounds=currentData['LineBounds'];// eslint-disable-next-line
var font_1=currentData['Font'];// eslint-disable-next-line
var isFieldRotated=false;var rotateAngle=0;if(currentData['Rotation']===0){isFieldRotated=true;rotateAngle=this.getAngle(pageIndex);if(divElement){divElement.style.transform='rotate('+rotateAngle+'deg)';}else{inputField.style.transform='rotate('+rotateAngle+'deg)';}}else{if(divElement){divElement.style.transform='rotate('+rotateAngle+'deg)';}else{inputField.style.transform='rotate('+rotateAngle+'deg)';}}if(!currentData.InsertSpaces){this.applyPosition(inputField,bounds,font_1,pageIndex,0,isFieldRotated,false);}else{this.applyPosition(inputField,bounds,font_1,pageIndex,0,isFieldRotated);}inputField.InsertSpaces=currentData.InsertSpaces;if(inputField.InsertSpaces){var zoomFactor=this.pdfViewerBase.getZoomFactor();// eslint-disable-next-line
var font_2=parseInt(inputField.style.width)/inputField.maxLength-parseFloat(inputField.style.fontSize)/2-0.6*zoomFactor;// eslint-disable-next-line
inputField.style.letterSpacing=''+font_2+'px';inputField.style.fontFamily='monospace';inputField.style.paddingLeft=font_2/2+'px';}// eslint-disable-next-line
currentData['uniqueID']=this.pdfViewer.dataId+'input_'+pageIndex+'_'+i;for(var j=0;j<this.pdfViewer.formFieldCollections.length;j++){if((inputField.type==='text'||inputField.type==='password'||inputField.type==='textarea')&&currentData.Name!=='SignatureField'){if(currentData['uniqueID']===this.pdfViewer.formFieldCollections[j].id){this.pdfViewer.formFieldCollections[j].value=currentData['Text'];}}}if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){if(currentData.Name==='DropDown'){inputField.style.appearance='none';inputField.style.background='url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0Ljk1IDEwIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9LmNscy0ye2ZpbGw6IzQ0NDt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPmFycm93czwvdGl0bGU+PHJlY3QgY2xhc3M9ImNscy0xIiB3aWR0aD0iNC45NSIgaGVpZ2h0PSIxMCIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxLjQxIDQuNjcgMi40OCAzLjE4IDMuNTQgNC42NyAxLjQxIDQuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iMy41NCA1LjMzIDIuNDggNi44MiAxLjQxIDUuMzMgMy41NCA1LjMzIi8+PC9zdmc+) no-repeat 100% 50%';}}this.applyCommonProperties(inputField,pageIndex,i,currentData,isFieldRotated);this.checkIsReadonly(currentData,inputField);this.applyTabIndex(currentData,inputField,pageIndex);this.checkIsRequiredField(currentData,inputField);this.applyDefaultColor(inputField);this.updateFormFieldsCollection(currentData);if(inputField.style.backgroundColor!='transparent'&&divElement){divElement.style.background='white';}// eslint-disable-next-line
if(currentData['Rotation']===0){var rotationAngle=this.getAngle(pageIndex);if(divElement){divElement.style.transform='rotate('+rotationAngle+'deg)';}else{inputField.style.transform='rotate('+rotationAngle+'deg)';}}if(divElement){divElement.appendChild(inputField);textLayer.appendChild(divElement);}else{inputField.style.position='absolute';var indicatorSpanElement=document.getElementById('signIcon'+pageIndex+'_'+indicatorSpanIndex);if(indicatorSpanElement){indicatorSpanElement.style.left=inputField.style.left;indicatorSpanElement.style.top=inputField.style.top;}textLayer.appendChild(inputField);}inputField.addEventListener('focus',this.focusFormFields.bind(this));inputField.addEventListener('blur',this.blurFormFields.bind(this));inputField.addEventListener('click',this.updateFormFields.bind(this));inputField.addEventListener('change',this.changeFormFields.bind(this));inputField.addEventListener('keydown',this.updateFormFieldsValue.bind(this));inputField.addEventListener('keyup',this.updateSameFieldsValue.bind(this));count=signCount;}}}}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_formfields');this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,'_formfields');}}};FormFields.prototype.trim=function(str){return str.replace(/^\s+|\s+$/gm,'');};FormFields.prototype.rgbaToHex=function(rgba){var inParts=rgba.substring(rgba.indexOf("(")).split(",");var r=parseInt(this.trim(inParts[0].substring(1)),10);var g=parseInt(this.trim(inParts[1]),10);var b=parseInt(this.trim(inParts[2]),10);var a=parseFloat(parseFloat(this.trim(inParts[3].substring(0,inParts[3].length-1))).toFixed(2));var outParts=[r.toString(16),g.toString(16),b.toString(16),Math.round(a*255).toString(16).substring(0,2)];// Pad single-digit output values
outParts.forEach(function(part,i){if(part.length===1){outParts[i]='0'+part;}});return'#'+outParts.join('');};FormFields.prototype.getListValues=function(currentData){var listItem=currentData['TextList'];var options=[];for(var i=0;i<listItem.length;i++){if(listItem[i]===currentData['SelectedValue'])this.selectedIndex.push(i);options.push({itemName:listItem[i],itemValue:listItem[i]});}if(this.getFormFieldType(currentData)==='ListBox'){this.selectedIndex=currentData['SelectedList'];}return options;};// eslint-disable-next-line
FormFields.prototype.createParentElement=function(data,pageIndex){// eslint-disable-next-line
var divElement;// eslint-disable-next-line
if(data['Name']==='Textbox'||data['Name']==='Password'||data['Name']==='DropDown'||data['Name']==='ListBox'){divElement=document.createElement('div');divElement.style.background='white';if(data.InsertSpaces||data.IsTransparent){divElement.style.background='transparent';}// eslint-disable-next-line
var bounds=data['LineBounds'];// eslint-disable-next-line
var font=data['Font'];// eslint-disable-next-line
divElement.style.position='absolute';// eslint-disable-next-line
var isFieldRotated=false;if(data['Rotation']===0){isFieldRotated=true;}var insertSpacesValue=data.InsertSpaces;this.applyPosition(divElement,bounds,font,pageIndex,0,isFieldRotated,true,insertSpacesValue);}return divElement;};/**
     * @private
     */FormFields.prototype.getAngle=function(pageIndex){// eslint-disable-next-line
var angle=0;// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails.rotation){switch(pageDetails.rotation){case 0:angle=0;break;case 1:angle=90;break;case 2:angle=180;break;case 3:angle=270;break;}}return angle;};FormFields.prototype.nextField=function(){this.signatureFieldNavigate(true);};FormFields.prototype.previousField=function(){this.signatureFieldNavigate(false);};FormFields.prototype.signatureFieldNavigate=function(nextSign){var isNextSignField=nextSign;// eslint-disable-next-line
var signatureFields=this.signatureFieldCollection;if(signatureFields.length===0){signatureFields=this.getSignField();}// eslint-disable-next-line
var currentField;if(this.currentTarget){for(var i=0;i<signatureFields.length;i++){currentField=signatureFields[i];if(this.currentTarget.id===currentField.uniqueID){this.currentTarget=document.getElementById(currentField.uniqueID);this.getSignatureIndex(i,signatureFields.length,isNextSignField);break;}}}else{if(nextSign){currentField=signatureFields[0];if(currentField.uniqueID){this.currentTarget=document.getElementById(currentField.uniqueID);this.getSignatureIndex(0,signatureFields.length,isNextSignField,true);}}}};FormFields.prototype.getSignatureIndex=function(currentSignatureIndex,signatureCount,isNextSign,isFirstNavigate){var signatureIndex=currentSignatureIndex;if(!isFirstNavigate){if(isNextSign){signatureIndex++;}else{signatureIndex--;}}if(signatureCount===1){this.renderSignatureField(0);}else{if(signatureIndex<signatureCount&&signatureIndex>=0){this.renderSignatureField(signatureIndex);}else{if(isNextSign){if(signatureIndex>=signatureCount){this.renderSignatureField(0);}}else{if(signatureIndex<=0){this.renderSignatureField(signatureCount-1);}}}}};FormFields.prototype.renderSignatureField=function(currentSignIndex){var curSignIndex=currentSignIndex;// eslint-disable-next-line
var signatureFields=this.signatureFieldCollection;// eslint-disable-next-line
var currentField;if(curSignIndex<signatureFields.length){for(var i=0;i<signatureFields.length;i++){var curSignIndexId=signatureFields[curSignIndex].uniqueID;var signatureFieldData=signatureFields[i];if(curSignIndexId===signatureFieldData.uniqueID){var pageIndex=signatureFieldData.PageIndex>=0?signatureFieldData.PageIndex:signatureFieldData.pageNumber;var isRender=this.pdfViewer.annotationModule.findRenderPageList(pageIndex);if(!isRender){this.pdfViewer.navigation.goToPage(pageIndex);}this.currentTarget=document.getElementById(signatureFieldData.uniqueID);currentField=signatureFieldData;break;}}if(this.currentTarget===null){var pageIndex=currentField.PageIndex>=0?currentField.PageIndex:currentField.pageNumber;this.pdfViewer.navigation.goToPage(pageIndex);this.currentTarget=document.getElementById(currentField.uniqueID);}if(this.currentTarget){if(this.currentTarget.className==='e-pdfviewer-signatureformfields-signature'){document.getElementById(this.currentTarget.id).focus();this.pdfViewer.select([this.currentTarget.id],null);}else if(this.currentTarget.className==='e-pdfviewer-signatureformfields'){document.getElementById(this.currentTarget.id).focus();}}}};/**
     * @private
     */FormFields.prototype.setFocus=function(id){if(!id){if(this.currentTarget){document.getElementById(this.currentTarget.id).focus();}}else{this.removeFocus();var signatureElement=document.getElementById(id);signatureElement.classList.add('e-pv-signature-focus');var caretColor="caretColor";signatureElement.style[caretColor]='transparent';}};/**
     * @private
     */FormFields.prototype.removeFocus=function(){if(this.signatureFieldCollection){// eslint-disable-next-line
var signatureFields=this.signatureFieldCollection;if(signatureFields.length===0){signatureFields=this.getSignField();}for(var i=0;i<this.signatureFieldCollection.length;i++){var signatureFieldId=this.signatureFieldCollection[i].uniqueID;var signatureElement=document.getElementById(signatureFieldId);if(signatureElement){signatureElement.classList.remove('e-pv-signature-focus');}}}};// eslint-disable-next-line
FormFields.prototype.getSignField=function(){this.signatureFieldCollection=this.getFormFieldSignField();return this.signatureFieldCollection;};FormFields.prototype.getFormFieldSignField=function(){// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');// eslint-disable-next-line
var currentData;if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){currentData=formFieldsData[i];if(currentData.Name==='SignatureField'){// eslint-disable-next-line
currentData['uniqueID']=this.pdfViewer.dataId+'input_'+currentData.PageIndex+'_'+i;this.signatureFieldCollection.push(formFieldsData[i]);}}}return this.signatureFieldCollection;};/**
     * @private
     */FormFields.prototype.formFieldCollections=function(){// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);for(var i=0;i<formFieldsData.length;i++){// eslint-disable-next-line
var currentData=formFieldsData[i];// eslint-disable-next-line
var type=currentData['Name'];if(currentData.Name!=='ink'){// eslint-disable-next-line
var formFieldCollection={name:this.retriveFieldName(currentData),id:this.pdfViewer.dataId+'input_'+parseFloat(currentData['PageIndex'])+'_'+i,isReadOnly:false,type:type,value:this.retriveCurrentValue(currentData),fontName:'',isRequired:currentData.IsRequired};if(formFieldCollection.type!=="SignatureText"){this.pdfViewer.formFieldCollections.push(formFieldCollection);}}}}};FormFields.prototype.updateFormFieldsCollection=function(formField){var type=formField['Name'];var formFieldValue;if(formField.Value!=null){formFieldValue=formField.Value;}else{formFieldValue=formField.Text;}var formFieldCollection={name:this.retriveFieldName(formField),id:formField.uniqueID,isReadOnly:formField.IsReadonly,isRequired:formField.IsRequired,isSelected:type==='CheckBox'?false:formField.Selected,isChecked:type==='RadioButton'?false:formField.Selected,type:type,value:type==='ListBox'||type==='DropDown'?formField.SelectedValue:formFieldValue,fontName:formField.FontFamily?formField.FontFamily:''};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function(el){return el.id===formFieldCollection.id;})]=formFieldCollection;};// eslint-disable-next-line
FormFields.prototype.updateFormFieldValues=function(formFields){this.readOnlyCollection.push(formFields.id);if(formFields){// eslint-disable-next-line
var currentElement=document.getElementById(formFields.id);if(currentElement){if(formFields.isReadOnly){currentElement.disabled=true;currentElement.style.backgroundColor='';currentElement.style.cursor='default';}else{if(currentElement.style.backgroundColor===''){currentElement.style.backgroundColor='rgba(0, 20, 200, 0.2)';}currentElement.disabled=false;currentElement.style.cursor='';}}this.updateDataInSession(currentElement);}};/**
     * @param currentData
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.retriveFieldName=function(currentData){// eslint-disable-next-line
var currentField;// eslint-disable-next-line
switch(currentData['Name']){case'Textbox':case'Password':case'SignatureField':currentField=currentData.FieldName;break;case'RadioButton':case'CheckBox':currentField=currentData.GroupName;break;case'DropDown':case'ListBox':currentField=currentData.Text?currentData.Text:currentData.FieldName;break;}return currentField;};// eslint-disable-next-line
FormFields.prototype.retriveCurrentValue=function(currentData){// eslint-disable-next-line
var currentField;// eslint-disable-next-line
switch(currentData['Name']){case'Textbox':case'Password':currentField=currentData.Text;break;case'SignatureField':currentField=currentData.Value;break;case'RadioButton':case'CheckBox':currentField=currentData.Selected;break;case'DropDown':currentField=currentData.SelectedValue;break;case'ListBox':currentField=currentData.SelectedList;break;}return currentField;};// eslint-disable-next-line
FormFields.prototype.getSignatureBounds=function(LineBounds,bounds,pageIndex){// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];// eslint-disable-next-line
var bound=0;switch(pageDetails.rotation){case 0:bound=bounds;break;case 1:bound={x:bounds.x+LineBounds.Width+bounds.width/3.5,y:pageDetails.width-LineBounds.X+bounds.height/4};break;case 2:bound={x:pageDetails.width-bounds.x-bounds.width,y:pageDetails.height-bounds.y-bounds.height};break;case 3:bound={x:bounds.y-bounds.width/2+bounds.height,y:bounds.x+bounds.width/3};break;}return bound;};/**
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.downloadFormFieldsData=function(){// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);// eslint-disable-next-line
var datas={};var fieldDatas=[];for(var i=0;i<formFieldsData.length;i++){for(var j=i+1;j<formFieldsData.length;j++){if(formFieldsData[i].FieldName==formFieldsData[j].FieldName){formFieldsData[i].flagSet=true;formFieldsData[j].flagSet=true;}}}for(var m=0;m<formFieldsData.length;m++){// eslint-disable-next-line
var currentData=formFieldsData[m];var isRequired=currentData.IsRequired;if(currentData.Name==='Textbox'||currentData.Name==='Password'||currentData.Multiline){if(isRequired&&(currentData.Text===''||currentData.Text===null)){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.FieldName]=currentData.Text;}else{delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];}fieldDatas={fieldValue:currentData.Text,isReadOnly:currentData.IsReadonly};datas[currentData.FieldName]=fieldDatas;}else if(currentData.Name==='RadioButton'){if(isRequired&&currentData.Selected===false){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.GroupName]=currentData.Value;}else{delete this.pdfViewerBase.nonFillableFields[currentData.GroupName];}if(currentData.Value&&currentData.Selected){fieldDatas={fieldValue:currentData.Value,isReadOnly:currentData.IsReadonly};datas[currentData.GroupName]=fieldDatas;}else if(datas[currentData.GroupName]===undefined||datas[currentData.GroupName]===null){fieldDatas={fieldValue:currentData.Selected,isReadOnly:currentData.IsReadonly};datas[currentData.GroupName]=fieldDatas;}}else if(currentData.Name==='CheckBox'){if(isRequired&&currentData.Selected===false){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.GroupName]=currentData.Selected;}else{delete this.pdfViewerBase.nonFillableFields[currentData.GroupName];}if(currentData.CheckboxIndex&&currentData.Selected){fieldDatas={fieldValue:currentData.CheckboxIndex,isReadOnly:currentData.IsReadonly};datas[currentData.GroupName]=fieldDatas;}else if(datas[currentData.GroupName]===undefined||datas[currentData.GroupName]===null){fieldDatas={fieldValue:currentData.Selected,isReadOnly:currentData.IsReadonly};datas[currentData.GroupName]=fieldDatas;}}else if(currentData.Name==='DropDown'){if(isRequired&&currentData.SelectedValue===''){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.FieldName]=currentData.SelectedValue;}else{delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];}fieldDatas={fieldValue:currentData.SelectedValue,isReadOnly:currentData.IsReadonly};datas[currentData.FieldName]=fieldDatas;}else if(currentData.Name==='ListBox'){// eslint-disable-next-line
var childItems=currentData['TextList'];var childItemsText=[];for(var m_1=0;m_1<currentData.SelectedList.length;m_1++){// eslint-disable-next-line
var currentElement=currentData.SelectedList[m_1];childItemsText.push(childItems[currentElement]);}fieldDatas={fieldValue:JSON.stringify(childItemsText),isReadOnly:currentData.IsReadonly};datas[currentData.Text]=fieldDatas;}else if(currentData.Name==='SignatureField'){// eslint-disable-next-line
var csData=void 0;if(currentData.Value===null||currentData.Value===''){this.addSignaturePath(currentData);}if(currentData.Value&&currentData.Value!==''){csData=currentData.Value;var fontFamily=currentData.fontFamily?currentData.fontFamily:currentData.FontFamily;if(fontFamily){if(currentData.flagSet){datas[currentData.FieldName+'fontName'+'_'+m]=fontFamily;datas[currentData.FieldName+'fontSize'+'_'+m]=currentData.fontSize?currentData.fontSize:currentData.FontSize;}else{datas[currentData.FieldName+'fontName']=fontFamily;datas[currentData.FieldName+'fontSize']=currentData.fontSize?currentData.fontSize:currentData.FontSize;}}else if(currentData.Value.split('base64,')[1]){if(currentData.flagSet){datas[currentData.FieldName+'ImageData'+'_'+m]=true;}else{datas[currentData.FieldName+'ImageData']=true;}}else{// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(currentData.Value);csData=sf.drawings.splitArrayCollection(collectionData);}}if(isRequired&&currentData.Value===null||currentData.Value===''){this.pdfViewerBase.validateForm=true;this.pdfViewerBase.nonFillableFields[currentData.FieldName]=JSON.stringify(csData);}else{delete this.pdfViewerBase.nonFillableFields[currentData.FieldName];}datas[currentData.FieldName]=JSON.stringify(csData);if(currentData.Bounds){// eslint-disable-next-line
var bounds=this.getSignatureBounds(currentData.LineBounds,currentData.Bounds,currentData.PageIndex);currentData.Bounds.x=bounds.x;currentData.Bounds.y=bounds.y;if(currentData.flagSet){datas[currentData.FieldName+'bounds'+'_'+m]=JSON.stringify(currentData.Bounds);}else{datas[currentData.FieldName+'bounds']=JSON.stringify(currentData.Bounds);}}else{// eslint-disable-next-line
var lineBounds=currentData.LineBounds;// eslint-disable-next-line
var bounds={x:this.ConvertPointToPixel(lineBounds.X),y:this.ConvertPointToPixel(lineBounds.Y),width:this.ConvertPointToPixel(lineBounds.Width),height:this.ConvertPointToPixel(lineBounds.Height)};datas[currentData.FieldName+'bounds']=JSON.stringify(bounds);}if(currentData.flagSet){datas[currentData.FieldName+'isReadOnly'+'_'+m]=currentData.IsReadonly;}else{datas[currentData.FieldName+'isReadOnly']=currentData.IsReadonly;}}}return JSON.stringify(datas);}};FormFields.prototype.focusFormFields=function(event){// eslint-disable-next-line
var currentTarget=event.target;// eslint-disable-next-line
if(currentTarget&&currentTarget.className!=='e-pdfviewer-signatureformfields'&&currentTarget.className!=='e-pdfviewer-signatureformfields e-pv-signature-focus'){// eslint-disable-next-line
var backgroundcolor=currentTarget.style.backgroundColor;// eslint-disable-next-line
var currentIndex=backgroundcolor.lastIndexOf(',');// eslint-disable-next-line
var currentColor=backgroundcolor.slice(0,currentIndex+1)+0+')';currentTarget.style.backgroundColor=currentColor;currentTarget.style.boxShadow="0 0 5px "+(currentTarget.style.borderColor==='transparent'?'#000000':currentTarget.style.borderColor);this.removeFocus();}else if(currentTarget){// eslint-disable-next-line
if(currentTarget.className==='e-pdfviewer-signatureformfields'||currentTarget.className==='e-pdfviewer-signatureformfields-signature'||currentTarget.className==='e-pdfviewer-signatureformfields e-pv-signature-focus'||currentTarget.className==='e-pdfviewer-signatureformfields-signature  e-pv-signature-focus'){this.setFocus(currentTarget.id);}}};FormFields.prototype.blurFormFields=function(event){// eslint-disable-next-line
var currentTarget=event.target;if(currentTarget.InsertSpaces&&this.isKeyDownCheck){// eslint-disable-next-line
var font=parseInt(currentTarget.style.width)-parseInt(currentTarget.style.height)/2;currentTarget.style.width=''+font+'px';this.isKeyDownCheck=false;}if(currentTarget.type==='checkbox'){this.pdfViewer.fireFocusOutFormField(currentTarget.name,currentTarget.checked);}else{this.pdfViewer.fireFocusOutFormField(currentTarget.name,currentTarget.value);}// eslint-disable-next-line
var backgroundcolor=currentTarget.style.backgroundColor;// eslint-disable-next-line
var currentIndex=backgroundcolor.lastIndexOf(',');// eslint-disable-next-line
var currentColor=backgroundcolor.slice(0,currentIndex+1)+0.2+')';currentTarget.style.backgroundColor=currentColor;currentTarget.style.boxShadow='none';};FormFields.prototype.updateFormFields=function(event){// eslint-disable-next-line
var currentTarget=event.target;if(currentTarget.className==='e-pdfviewer-ListBox'){currentTarget=currentTarget.parentElement;this.updateDataInSession(currentTarget);}else if(currentTarget.className==='e-pdfviewer-signatureformfields'){this.currentTarget=currentTarget;}else if(currentTarget.className==='e-pv-buttonItem'||currentTarget.type==='button'){this.pdfViewer.fireButtonFieldClickEvent(currentTarget.value,currentTarget.name,currentTarget.id);}for(var m=0;m<this.pdfViewer.formFieldCollections.length;m++){if(currentTarget.id===this.pdfViewer.formFieldCollections[m].id){this.pdfViewer.fireFormFieldClickEvent('formFieldClicked',this.pdfViewer.formFieldCollections[m]);// eslint-disable-next-line
if(currentTarget.className==='e-pdfviewer-signatureformfields'||currentTarget.className==='e-pdfviewer-signatureformfields-signature'||currentTarget.className==='e-pdfviewer-signatureformfields e-pv-signature-focus'||currentTarget.className==='e-pdfviewer-signatureformfields-signature  e-pv-signature-focus'){this.setFocus(currentTarget.id);}}}};/**
     * @param signatureType
     * @param value
     * @param target
     * @param fontname
     * @param signatureType
     * @param value
     * @param target
     * @param fontname
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.drawSignature=function(signatureType,value,target,fontname){var annot;// eslint-disable-next-line
var proxy=this;var bounds;var targetBounds;var parentElementBounds;var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');var formFieldsData=JSON.parse(data);var targetName=this.currentTarget?this.currentTarget.name:target.name?target.name:target.offsetParent.name;var _loop_1=function _loop_1(){var fieldName=formFieldsData[i].FieldName;if(fieldName===targetName&&!sf.base.isNullOrUndefined(formFieldsData[i].ActualFieldName)){target=document.getElementById(formFieldsData[i].uniqueID);var currentField_1=target;var elementId=currentField_1.offsetParent.offsetParent.id.split("_")[0];var signatureField_1=this_1.pdfViewer.nameTable[elementId];if(target&&target.offsetParent&&signatureField_1){targetBounds=target.getBoundingClientRect();parentElementBounds=target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();this_1.pdfViewerBase.drawSignatureWithTool=true;if(target.nextSibling&&target.nextSibling.id.indexOf("initial")!==-1){this_1.pdfViewer.isInitialFieldToolbarSelection=true;}}var currentValue_1=value?value:this_1.pdfViewerBase.signatureModule.outputString;var currentFont=fontname?fontname:this_1.pdfViewerBase.signatureModule.fontName;var zoomvalue=this_1.pdfViewerBase.getZoomFactor();var currentWidth=this_1.pdfViewerBase.drawSignatureWithTool?targetBounds.width/zoomvalue:parseFloat(currentField_1.style.width)/zoomvalue;var currentHeight=this_1.pdfViewerBase.drawSignatureWithTool?targetBounds.height/zoomvalue:parseFloat(currentField_1.style.height)/zoomvalue;var currentLeft=this_1.pdfViewerBase.drawSignatureWithTool?(targetBounds.left-parentElementBounds.left)/zoomvalue:parseFloat(currentField_1.style.left)/zoomvalue;var currentTop=this_1.pdfViewerBase.drawSignatureWithTool?(targetBounds.top-parentElementBounds.top)/zoomvalue:parseFloat(currentField_1.style.top)/zoomvalue;var currentPage_1=this_1.pdfViewerBase.drawSignatureWithTool?this_1.pdfViewerBase.getActivePage():parseFloat(currentField_1.id.split('_')[1]);var currentIndex=this_1.pdfViewerBase.drawSignatureWithTool?target.nextElementSibling?parseFloat(target.nextElementSibling.id.split('_')[1]):parseFloat(currentField_1.id.split('_')[2]):parseFloat(currentField_1.id.split('_')[2]);var signString_1=this_1.pdfViewerBase.signatureModule.saveImageString;var signatureFontFamily_1;var signatureFontSize_1;var rotateAngle_1=this_1.getAngle(currentPage_1);if(signatureType==='Type'){if(!currentFont){currentFont='Helvetica';}// eslint-disable-next-line
bounds=this_1.getSignBounds(currentIndex,rotateAngle_1,currentPage_1,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight);if(!this_1.pdfViewer.signatureFitMode||this_1.pdfViewer.signatureFitMode==='Default'){bounds=this_1.getDefaultBoundsforSign(bounds);}annot={// eslint-disable-next-line max-len
id:currentField_1.id,bounds:{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height},pageIndex:currentPage_1,data:currentValue_1,modifiedDate:'',shapeAnnotationType:'SignatureText',opacity:1,rotateAngle:this_1.rotateAngle,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''},fontFamily:currentFont,fontSize:bounds.height/1.35};if(annot.shapeAnnotationType==='SignatureText'){var textWidth=this_1.getTextWidth(annot.data,annot.fontSize,annot.fontFamily);var widthRatio=1;if(textWidth>bounds.width)widthRatio=bounds.width/textWidth;annot.fontSize=this_1.getFontSize(Math.floor(annot.fontSize*widthRatio));}signString_1=annot.data;signatureFontFamily_1=annot.fontFamily;signatureFontSize_1=annot.fontSize;}else if(signatureType==='Image'){// eslint-disable-next-line
bounds=this_1.getSignBounds(currentIndex,rotateAngle_1,currentPage_1,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight);var image_1=new Image();var currentTarget_1=target;image_1.src=currentValue_1;image_1.onload=function(){proxy.imageOnLoad(bounds,image_1,currentValue_1,currentPage_1,rotateAngle_1,currentField_1,signatureField_1,signString_1,signatureFontFamily_1,signatureFontSize_1,currentTarget_1);};}else{if(currentValue_1.indexOf('base64')!==-1){// eslint-disable-next-line
bounds=this_1.getSignBounds(currentIndex,rotateAngle_1,currentPage_1,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight);if(!this_1.pdfViewer.signatureFitMode||this_1.pdfViewer.signatureFitMode==='Default'){bounds=this_1.getDefaultBoundsforSign(bounds);}annot={// eslint-disable-next-line max-len
id:currentField_1.id,bounds:{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height},pageIndex:currentPage_1,data:currentValue_1,modifiedDate:'',shapeAnnotationType:'SignatureImage',opacity:1,rotateAngle:this_1.rotateAngle,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};signString_1=annot.data;}else{// eslint-disable-next-line
if(!this_1.pdfViewer.signatureFitMode||this_1.pdfViewer.signatureFitMode==='Default'){// eslint-disable-next-line
var signatureBounds=this_1.updateSignatureAspectRatio(currentValue_1,false,currentField_1);// eslint-disable-next-line
bounds=this_1.getSignBounds(currentIndex,rotateAngle_1,currentPage_1,zoomvalue,currentLeft,currentTop,signatureBounds.width,signatureBounds.height,true);bounds.x=bounds.x+signatureBounds.left;bounds.y=bounds.y+signatureBounds.top;}else{bounds=this_1.getSignBounds(currentIndex,rotateAngle_1,currentPage_1,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight);}annot={// eslint-disable-next-line max-len
id:currentField_1.id,bounds:{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height},pageIndex:currentPage_1,data:currentValue_1,modifiedDate:'',shapeAnnotationType:'Path',opacity:1,rotateAngle:this_1.rotateAngle,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};}}if(this_1.pdfViewerBase.drawSignatureWithTool&&signatureField_1){annot.id=signatureField_1.id+"_content";var obj=this_1.pdfViewer.add(annot);signatureField_1.wrapper.children.push(obj.wrapper);}else{this_1.pdfViewer.add(annot);}if(annot&&annot.shapeAnnotationType==='Path'&&currentValue_1!==''){this_1.pdfViewerBase.currentSignatureAnnot=annot;// eslint-disable-next-line
var position={currentHeight:currentHeight,currentWidth:currentWidth,currentLeft:currentLeft,currentTop:currentTop};this_1.pdfViewerBase.signatureModule.addSignatureCollection(bounds,position);signString_1=this_1.pdfViewerBase.signatureModule.saveImageString;this_1.pdfViewerBase.currentSignatureAnnot=null;}// eslint-disable-next-line
var canvass=document.getElementById(this_1.pdfViewer.dataId+'_annotationCanvas_'+currentPage_1);// eslint-disable-next-line
this_1.pdfViewer.renderDrawing(canvass,currentPage_1);this_1.pdfViewerBase.signatureModule.showSignatureDialog(false);if(currentField_1.className==='e-pdfviewer-signatureformfields e-pv-signature-focus'){currentField_1.className='e-pdfviewer-signatureformfields-signature e-pv-signature-focus';}else{currentField_1.className='e-pdfviewer-signatureformfields-signature';}this_1.updateDataInSession(currentField_1,annot.data,annot.bounds,signatureFontFamily_1,signatureFontSize_1);currentField_1.style.pointerEvents='none';this_1.pdfViewerBase.signatureModule.hideSignaturePanel();if(this_1.pdfViewer.annotation){this_1.pdfViewer.annotation.addAction(annot.pageIndex,null,annot,'FormField Value Change','',annot,annot);}// eslint-disable-next-line
this_1.pdfViewer.fireSignatureAdd(annot.pageIndex,annot.id,'HandWrittenSignature',annot.bounds,annot.opacity,null,null,signString_1);this_1.pdfViewer.fireFocusOutFormField(currentField_1.name,currentValue_1);this_1.pdfViewerBase.drawSignatureWithTool=false;this_1.pdfViewer.isInitialFieldToolbarSelection=false;}};var this_1=this;for(var i=0;i<formFieldsData.length;i++){_loop_1();}};FormFields.prototype.imageOnLoad=function(bounds,image,currentValue,currentPage,rotateAngle,currentField,signatureField,signString,signatureFontFamily,signatureFontSize,target){if(target&&target.offsetParent&&signatureField){this.pdfViewerBase.drawSignatureWithTool=true;if(target.nextSibling&&target.nextSibling.id.indexOf("initial")!==-1){this.pdfViewer.isInitialFieldToolbarSelection=true;}}var annot;if(!this.pdfViewer.signatureFitMode||this.pdfViewer.signatureFitMode==='Default'){{var padding=Math.min(bounds.height/10,bounds.width/10);var maxHeight=bounds.height-padding;var maxWidth=bounds.width-padding;var imageWidth=image.width;var imageHeight=image.height;var beforeWidth=bounds.width;var beforeHeight=bounds.height;var ratio=Math.min(maxWidth/imageWidth,maxHeight/imageHeight);bounds.width=imageWidth*ratio;bounds.height=imageHeight*ratio;bounds.x=bounds.x+(beforeWidth-bounds.width)/2;bounds.y=bounds.y+(beforeHeight-bounds.height)/2;}annot={// eslint-disable-next-line max-len
id:currentField.id,bounds:{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height},pageIndex:currentPage,data:currentValue,modifiedDate:'',shapeAnnotationType:'SignatureImage',opacity:1,rotateAngle:rotateAngle,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};signString=annot.data;if(this.pdfViewerBase.drawSignatureWithTool&&signatureField){annot.id=signatureField.id+"_content";var obj=this.pdfViewer.add(annot);signatureField.wrapper.children.push(obj.wrapper);}else{this.pdfViewer.add(annot);}var canvass=document.getElementById(this.pdfViewer.element.id+'_annotationCanvas_'+currentPage);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,currentPage);this.pdfViewerBase.signatureModule.showSignatureDialog(false);if(currentField.className==='e-pdfviewer-signatureformfields e-pv-signature-focus'){currentField.className='e-pdfviewer-signatureformfields-signature e-pv-signature-focus';}else{currentField.className='e-pdfviewer-signatureformfields-signature';}this.updateDataInSession(currentField,annot.data,annot.bounds,signatureFontFamily,signatureFontSize);currentField.style.pointerEvents='none';if(this.pdfViewer.annotation){this.pdfViewer.annotation.addAction(annot.pageIndex,null,annot,'FormField Value Change','',annot,annot);}// eslint-disable-next-line
if(annot.shapeAnnotationType==="SignatureImage"){this.pdfViewer.fireSignatureAdd(annot.pageIndex,annot.id,annot.shapeAnnotationType,annot.bounds,annot.opacity,null,null,signString);}this.pdfViewer.fireFocusOutFormField(currentField.name,currentValue);}this.pdfViewerBase.signatureModule.hideSignaturePanel();this.pdfViewerBase.drawSignatureWithTool=false;this.pdfViewer.isInitialFieldToolbarSelection=false;};/**
     * @private
     */FormFields.prototype.getDefaultBoundsforSign=function(bounds){return{x:bounds.x+4,y:bounds.y+4,width:bounds.width-8,height:bounds.height-8};};// eslint-disable-next-line
FormFields.prototype.getSignBounds=function(currentIndex,rotateAngle,currentPage,zoomvalue,currentLeft,currentTop,currentWidth,currentHeight,isDraw){// eslint-disable-next-line
var bounds;var signatureId=this.pdfViewer.isInitialFieldToolbarSelection?'initialIcon':'signIcon';var signIcon=document.getElementById(signatureId+currentPage+'_'+currentIndex);var signLeft=parseFloat(signIcon.style.left)*zoomvalue;var difference=currentLeft*zoomvalue-signLeft/zoomvalue;if(rotateAngle===90||rotateAngle===270){this.rotateAngle=0;if(isDraw){return bounds={x:currentLeft-difference/zoomvalue-zoomvalue,y:currentTop+difference/zoomvalue+zoomvalue,width:currentWidth,height:currentHeight};}else{return bounds={x:currentLeft-difference/zoomvalue-zoomvalue,y:currentTop+difference/zoomvalue+zoomvalue,width:currentHeight,height:currentWidth};}}else{this.rotateAngle=0;return bounds={x:currentLeft,y:currentTop,width:currentWidth,height:currentHeight};}};// eslint-disable-next-line
FormFields.prototype.updateSameFieldsValue=function(event){if(this.formFieldsData){for(var i=0;i<this.formFieldsData.length;i++){// eslint-disable-next-line
var currentField=this.formFieldsData[i];if(event.target.name===currentField.FieldName&&event.target.id!==currentField.uniqueID){// eslint-disable-next-line
var currentTarget=document.getElementById(this.formFieldsData[i].uniqueID);if(currentTarget){currentTarget.value=event.target.value;}else{currentField.Text=event.target.value;this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,'_formfields');}}}}};FormFields.prototype.updateFormFieldsValue=function(event){// eslint-disable-next-line
var currentTarget=event.target;var fieldIndex;var nextFields;if(currentTarget.InsertSpaces&&!this.isKeyDownCheck){// eslint-disable-next-line
var font=parseInt(currentTarget.style.width)+parseInt(currentTarget.style.height)/2;currentTarget.style.width=''+font+'px';this.isKeyDownCheck=true;}if(event.which===9&&currentTarget&&(currentTarget.className==='e-pdfviewer-formFields'||currentTarget.className==='e-pdfviewer-signatureformfields e-pv-signature-focus'||currentTarget.className==='e-pdfviewer-signatureformfields-signature')){// eslint-disable-next-line
var id=currentTarget.id.split('input_')[1].split('_')[0];// eslint-disable-next-line
var textLayer=document.getElementById(this.pdfViewer.element.id+'_textLayer_'+parseInt(id));// eslint-disable-next-line
var currentFields=textLayer.getElementsByClassName('e-pdfviewer-formFields');var istabindexed=true;fieldIndex=this.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===currentTarget.id;});if(!event.shiftKey&&event.key==="Tab"){if(fieldIndex+1<this.pdfViewer.formFieldCollections.length){nextFields=this.pdfViewer.formFieldCollections[fieldIndex+1];}else{return;}}this.pdfViewer.focusFormField(nextFields);istabindexed=true;event.preventDefault();var tabindex=currentTarget.tabIndex+1;while(!istabindexed){for(var l=0;l<currentFields.length;l++){istabindexed=false;if(currentFields[l].tabIndex===tabindex){currentFields[l].focus();istabindexed=true;event.preventDefault();break;}}if(this.maintainTabIndex[id]===tabindex){istabindexed=true;}tabindex=tabindex+1;}}if(event.shiftKey&&event.key==="Tab"){var fieldIndex_1=this.pdfViewer.formFieldCollections.findIndex(function(field){return field.id===currentTarget.id;});var nextField=fieldIndex_1>0?this.pdfViewer.formFieldCollections[fieldIndex_1-1]:this.pdfViewerBase.previousShiftTabElement;if(nextField&&nextField===this.pdfViewerBase.previousShiftTabElement){var currentField=document.getElementById(nextField.id);if(currentField){currentField.focus();}}else if(!nextField){nextField=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.length-1];this.pdfViewer.focusFormField(nextField);}else{this.pdfViewer.focusFormField(nextField);}event.preventDefault();}if(event.currentTarget.classList.contains('e-pdfviewer-signatureformfields')||event.currentTarget.classList.contains('e-pdfviewer-signatureformfields-signature')){if(event.key==='Enter'){// eslint-disable-next-line
var currentTarget_2=event.target;this.currentTarget=currentTarget_2;for(var m=0;m<this.pdfViewer.formFieldCollections.length;m++){if(currentTarget_2.id===this.pdfViewer.formFieldCollections[m].id){this.setFocus(currentTarget_2.id);this.pdfViewer.fireFormFieldClickEvent('formFieldClicked',this.pdfViewer.formFieldCollections[m]);}}}else{event.preventDefault();}}};FormFields.prototype.changeFormFields=function(event){// eslint-disable-next-line
var currentTarget=event.target;this.updateDataInSession(currentTarget);};FormFields.prototype.calculateSignatureBounds=function(signatureCavasWidth,signatureCavasHeight,newdifferenceX,newdifferenceY,isSignature,currentField){var ratioX=newdifferenceX/signatureCavasWidth;var ratioY=newdifferenceY/signatureCavasHeight;var zoomvalue=this.pdfViewerBase.getZoomFactor();var currentWidth=0;var currentHeight=0;var isSignatureStretched=false;var isHeightStretched=false;var leftDifference=0;var topDifference=0;if(isSignature){currentWidth=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:150;currentHeight=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100;}else{var fieldWidth=currentField.style.width==='100%'?currentField.clientWidth:parseFloat(currentField.style.width);var fieldHeight=currentField.style.height==='100%'?currentField.clientHeight:parseFloat(currentField.style.height);var fieldWidthRatio=fieldWidth/fieldHeight;var fieldHeightRatio=fieldHeight/fieldWidth;var canvasWidthRatio=signatureCavasWidth/signatureCavasHeight;var canvasHeightRatio=signatureCavasHeight/signatureCavasWidth;if(fieldWidthRatio>canvasWidthRatio||fieldHeightRatio>canvasWidthRatio||Math.abs(fieldWidthRatio-fieldHeightRatio)<=1){var ratioDifference=0;if(fieldHeightRatio>canvasWidthRatio||Math.abs(fieldWidthRatio-fieldHeightRatio)<=1){isHeightStretched=true;ratioDifference=fieldHeightRatio/canvasHeightRatio;}else{isSignatureStretched=true;ratioDifference=fieldWidthRatio/canvasWidthRatio;}if(currentField.style.transform==='rotate(90deg)'||currentField.style.transform==='rotate(270deg)'){// eslint-disable-next-line
currentWidth=fieldHeight/zoomvalue;// eslint-disable-next-line
currentHeight=fieldWidth/zoomvalue;}else{if(isSignatureStretched){// eslint-disable-next-line
leftDifference=fieldWidth/zoomvalue;// eslint-disable-next-line
currentWidth=fieldWidth/ratioDifference/zoomvalue;// eslint-disable-next-line
currentHeight=fieldHeight/zoomvalue;}if(isHeightStretched){// eslint-disable-next-line
topDifference=fieldHeight/zoomvalue;// eslint-disable-next-line
currentWidth=fieldWidth/zoomvalue;// eslint-disable-next-line
currentHeight=fieldHeight/ratioDifference/zoomvalue;}}}else{if(currentField.style.transform==='rotate(90deg)'||currentField.style.transform==='rotate(270deg)'){// eslint-disable-next-line
currentWidth=fieldHeight/zoomvalue;// eslint-disable-next-line
currentHeight=fieldWidth/zoomvalue;}else{// eslint-disable-next-line
currentWidth=fieldWidth/zoomvalue;// eslint-disable-next-line
currentHeight=fieldHeight/zoomvalue;}}}var currentLeftDiff=(signatureCavasWidth-newdifferenceX)/2;var currentTopDiff=(signatureCavasHeight-newdifferenceY)/2;if(isSignatureStretched){currentLeftDiff=currentLeftDiff/signatureCavasWidth*leftDifference;var leftValueDiff=(leftDifference*ratioX-currentWidth*ratioX)/2;currentLeftDiff=currentLeftDiff+leftValueDiff;currentTopDiff=currentTopDiff/signatureCavasHeight*currentHeight;}else if(isHeightStretched){currentLeftDiff=currentLeftDiff/signatureCavasWidth*currentWidth;currentTopDiff=currentTopDiff/signatureCavasHeight*topDifference;var topValueDiff=(topDifference*ratioY-currentHeight*ratioY)/2;currentTopDiff=currentTopDiff+topValueDiff;}else{currentLeftDiff=currentLeftDiff/signatureCavasWidth*currentWidth;currentTopDiff=currentTopDiff/signatureCavasHeight*currentHeight;}currentWidth=currentWidth*ratioX;currentHeight=currentHeight*ratioY;return{currentLeftDiff:currentLeftDiff,currentTopDiff:currentTopDiff,currentWidth:currentWidth,currentHeight:currentHeight};};/**
     * @param data
     * @param isSignature
     * @param currentField
     * @param data
     * @param isSignature
     * @param currentField
     * @param data
     * @param isSignature
     * @param currentField
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.updateSignatureAspectRatio=function(data,isSignature,currentField){// eslint-disable-next-line
var collectionData=sf.drawings.processPathData(data);// eslint-disable-next-line
var csData=sf.drawings.splitArrayCollection(collectionData);var minimumX=-1;var minimumY=-1;var maximumX=-1;var maximumY=-1;var signatureCanvas=document.getElementById(this.pdfViewer.dataId+'_signatureCanvas_');var signatureCavasWidth=0;var signatureCavasHeight=0;for(var m=0;m<csData.length;m++){// eslint-disable-next-line
var val=csData[m];if(minimumX===-1){// eslint-disable-next-line
minimumX=parseFloat(val['x'].toString());// eslint-disable-next-line
maximumX=parseFloat(val['x'].toString());// eslint-disable-next-line
minimumY=parseFloat(val['y'].toString());// eslint-disable-next-line
maximumY=parseFloat(val['y'].toString());}else{// eslint-disable-next-line
var point1=parseFloat(val['x'].toString());// eslint-disable-next-line
var point2=parseFloat(val['y'].toString());if(minimumX>=point1){minimumX=point1;}if(minimumY>=point2){minimumY=point2;}if(maximumX<=point1){maximumX=point1;}if(maximumY<=point2){maximumY=point2;}}}signatureCavasWidth=signatureCanvas?signatureCanvas.clientWidth:650;signatureCavasHeight=signatureCanvas?signatureCanvas.clientHeight:300;var newdifferenceX=maximumX-minimumX;var newdifferenceY=maximumY-minimumY;var signBounds=this.calculateSignatureBounds(signatureCavasWidth,signatureCavasHeight,newdifferenceX,newdifferenceY,isSignature,currentField);if(isSignature){var zoomvalue=this.pdfViewerBase.getZoomFactor();var pageIndex=this.pdfViewerBase.currentPageNumber-1;var pageDiv=document.getElementById(this.pdfViewer.dataId+'_pageDiv_'+pageIndex);var currentLeft=(parseFloat(pageDiv.style.width)/2-signBounds.currentWidth/2)/zoomvalue;// eslint-disable-next-line max-len
var currentTop=(parseFloat(pageDiv.style.height)/2-signBounds.currentHeight/2)/zoomvalue;return{x:currentLeft,y:currentTop,width:signBounds.currentWidth,height:signBounds.currentHeight};}else{return{left:signBounds.currentLeftDiff,top:signBounds.currentTopDiff,width:signBounds.currentWidth,height:signBounds.currentHeight};}};/**
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @param target
     * @param signaturePath
     * @param signatureBounds
     * @param signatureFontFamily
     * @param signatureFontSize
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.updateDataInSession=function(target,signaturePath,signatureBounds,signatureFontFamily,signatureFontSize){this.pdfViewerBase.updateDocumentEditedProperty(true);this.pdfViewerBase.fireDocumentEditedEvent("FormFieldUpdated");// eslint-disable-next-line
var filterFields=[];var fieldsByName=" ";var filterFieldName=[];var filterArrayLength=0;var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var FormFieldsData=JSON.parse(data);if(target&&target.type!=='checkbox'&&target.type!=='radio'){filterFields=FormFieldsData.filter(function(item){return item.uniqueID===target.id;});if(filterFields.length>0){fieldsByName=filterFields[0].FieldName;filterFieldName=FormFieldsData.filter(function(item){return item.FieldName===fieldsByName;});filterArrayLength=filterFieldName.length;}}for(var m=0;m<FormFieldsData.length;m++){// eslint-disable-next-line
var currentData=FormFieldsData[m];if(currentData.ActualFieldName===target.name){currentData.selectedIndex=target.selectedIndex;}if(target.classList&&target.classList.contains('e-pdfviewer-signatureformfields-signature')?currentData.uniqueID===target.id:currentData.uniqueID===target.id||fieldsByName===currentData.FieldName){if(target&&target.type==='text'||target.type==='password'||target.type==='textarea'||target.classList&&target.classList.contains('e-pdfviewer-signatureformfields-signature')){var signField=target;if(signField.classList.contains('e-pdfviewer-signatureformfields')||signField.classList.contains('e-pdfviewer-signatureformfields-signature')){if(signaturePath){currentData.Value=signaturePath;}if(signatureBounds){currentData.Bounds=signatureBounds;}if(signatureFontFamily){currentData.FontFamily=signatureFontFamily;currentData.FontSize=signatureFontSize;}}else{currentData.Text=target.value;currentData.Value=target.value;}}else if(target.type==='radio'){if(target.checked){for(var l=0;l<FormFieldsData.length;l++){// eslint-disable-next-line
var currentType=FormFieldsData[l];if(FormFieldsData[l].GroupName===target.name){FormFieldsData[l].Selected=false;this.updateFormFieldsCollection(FormFieldsData[l]);}}if(target.value==currentData.Value){currentData.Selected=true;this.updateFormFieldsCollection(currentData);break;}else{currentData.Selected=false;}}}else if(target.type==='checkbox'){for(var l=0;l<FormFieldsData.length;l++){// eslint-disable-next-line
var currentFormField=FormFieldsData[l];if(currentFormField.GroupName===target.name){if(currentData.CheckBoxGroupName===currentFormField.CheckBoxGroupName){if(target.checked){currentFormField.Selected=true;}else{currentFormField.Selected=false;}}else{currentFormField.Selected=false;}// eslint-disable-next-line
var currentTarget=document.getElementById(currentFormField.uniqueID);if(currentTarget){if(currentData.GroupName===target.name&&currentData.uniqueID!==currentTarget.id&&currentData.CheckBoxGroupName===currentFormField.CheckBoxGroupName){if(target.checked){currentData.Selected=true;currentTarget.checked=true;}else{currentData.Selected=false;currentTarget.checked=false;}}else if(currentData.GroupName===target.name&&currentData.uniqueID!==currentTarget.id){currentData.Selected=false;currentTarget.checked=false;}}}}if(target.checked){currentData.Selected=true;}else{currentData.Selected=false;}}else if(target.type==='select-one'&&target.size===0){// eslint-disable-next-line
var currentValue=target.options[target.selectedIndex].textContent;// eslint-disable-next-line
var childrens=target.children;for(var k=0;k<childrens.length;k++){if(childrens[k].textContent===currentValue){currentData.SelectedValue=currentValue;}}}else if(target.type==='select-multiple'||target.size>0){// eslint-disable-next-line
var currentValue=target.selectedOptions;currentData.SelectedList=[];for(var z=0;z<currentValue.length;z++){// eslint-disable-next-line
var childrens=target.children;for(var k=0;k<childrens.length;k++){if(childrens[k]===currentValue[z]){currentData.SelectedList.push(k);}}}}if(target.disabled){currentData.IsReadonly=true;}this.updateFormFieldsCollection(currentData);filterArrayLength--;if(filterArrayLength==0)break;}else if(target&&target.getAttribute('list')!=null&&target.type==='text'&&currentData.uniqueID===target.list.id){currentData.SelectedValue=target.value;}this.updateFormFieldsCollection(currentData);}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+'_formfields');this.formFieldsData=FormFieldsData;this.pdfViewerBase.setItemInSessionStorage(FormFieldsData,'_formfields');}};// eslint-disable-next-line
FormFields.prototype.applyCommonProperties=function(inputdiv,pageIndex,index,currentData,isFieldRotated){// eslint-disable-next-line
var inputField=document.getElementById(this.pdfViewer.dataId+'input_'+pageIndex+'_'+index);if(inputField){var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);if((inputdiv.type==='select-one'||inputdiv.type==='text'||inputdiv.type==='textarea')&&inputField.parentElement!==textLayer){inputField.parentElement.remove();}inputField.remove();}// eslint-disable-next-line
var signIcon=document.getElementById('signIcon'+pageIndex+'_'+pageIndex);var left=parseFloat(inputdiv.style.left);var top=parseInt(inputdiv.style.top);var width=parseFloat(inputdiv.style.width);var height=parseFloat(inputdiv.style.height);var signIconWidth;var signIconHeght;var hightDifference;var widthDifference;var zoomvalue=this.pdfViewerBase.getZoomFactor();if(signIcon&&!isFieldRotated){signIconWidth=parseFloat(signIcon.style.width);signIconHeght=parseFloat(signIcon.style.height);if(signIcon.style.transform=='rotate(90deg)'){signIcon.style.transform='rotate(0deg)';hightDifference=height/2;widthDifference=signIconWidth*zoomvalue;signIcon.style.left=left-(hightDifference-signIconWidth*zoomvalue)+widthDifference/2+'px';}if(signIcon.style.transform=='rotate(180deg)'){signIcon.style.transform='rotate(0deg)';signIcon.style.left=left+'px';signIcon.style.top=top+'px';}if(signIcon.style.transform=='rotate(270deg)'){signIcon.style.transform='rotate(0deg)';hightDifference=height/2;widthDifference=signIconWidth*zoomvalue;signIcon.style.left=left-(hightDifference-widthDifference)+widthDifference/2+'px';signIcon.style.top=top+(width+signIconHeght*zoomvalue)+signIconHeght*zoomvalue/2+'px';}}if(currentData.IsSignatureField&&this.isSignatureField){inputdiv.className='e-pdfviewer-signatureformfields-signature';inputdiv.style.pointerEvents='none';}else if(currentData.IsSignatureField){if(currentData.Value){inputdiv.className='e-pdfviewer-signatureformfields-signature';inputdiv.style.pointerEvents='none';}else{inputdiv.className='e-pdfviewer-signatureformfields';}}else if(currentData.Name!=='Button'){inputdiv.className='e-pdfviewer-formFields';}inputdiv.id=this.pdfViewer.dataId+'input_'+pageIndex+'_'+index;inputdiv.style.zIndex=1000;};/**
     * @param currentData
     * @param pageIndex
     * @param index
     * @param printContainer
     * @param currentData
     * @param pageIndex
     * @param index
     * @param printContainer
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.createFormFields=function(currentData,pageIndex,index,printContainer,count){// eslint-disable-next-line
var currentField;// eslint-disable-next-line
switch(currentData['Name']){case'Textbox':currentField=this.createTextBoxField(currentData,pageIndex,'text');break;case'Password':currentField=this.createTextBoxField(currentData,pageIndex,'password');break;case'RadioButton':currentField=this.createRadioBoxField(currentData,pageIndex,'radio');break;case'CheckBox':currentField=this.createRadioBoxField(currentData,pageIndex,'checkbox',printContainer);break;case'DropDown':currentField=this.createDropDownField(currentData,pageIndex,index,printContainer);break;case'ListBox':currentField=this.createListBoxField(currentData,pageIndex);break;case'SignatureField':currentField=this.createSignatureField(currentData,pageIndex,index,printContainer,count);var isFieldRotated=false;if(currentData.Rotation===0){isFieldRotated=true;}if(currentData.Value&&currentData.Value!==''){this.renderExistingAnnnot(currentData,index,printContainer,isFieldRotated);this.isSignatureRendered=true;count++;}break;case'Button':currentField=this.createButtonField(currentData,pageIndex);break;case'ink':case'SignatureText':case'SignatureImage':if(currentData.Value&&currentData.Value!==''&&!this.isSignatureRendered){this.renderExistingAnnnot(currentData,index,printContainer);}break;}return{currentField:currentField,count:count};};FormFields.prototype.getFormFieldType=function(currentData){// eslint-disable-next-line
var currentField;// eslint-disable-next-line
switch(currentData['Name']){case'Textbox':currentField='Textbox';break;case'Password':currentField='Password';break;case'RadioButton':currentField='RadioButton';break;case'CheckBox':currentField='CheckBox';break;case'DropDown':currentField='DropDown';break;case'ListBox':currentField='ListBox';break;case'SignatureField':currentField='SignatureField';if(currentData.IsInitialField){currentField='InitialField';}break;case'InitialField':currentField='InitialField';break;}return currentField;};// eslint-disable-next-line
FormFields.prototype.createButtonField=function(data,pageIndex){// eslint-disable-next-line
var inputField=document.createElement('input');if(data.Value){inputField.type='image';inputField.src=data.Value;}else{inputField.type='button';}inputField.className='e-pv-buttonItem';if(data.Text!==''){inputField.value=data.Text;}else{inputField.value='';}inputField.name=data.FieldName;return inputField;};// eslint-disable-next-line
FormFields.prototype.createTextBoxField=function(data,pageIndex,type){// eslint-disable-next-line
var inputField;if(data.Visible===1){return;}if(data.Multiline){inputField=document.createElement('textarea');inputField.style.resize='none';}else{inputField=document.createElement('input');inputField.type=type;}if(data.MaxLength>0){inputField.maxLength=data.MaxLength;}this.addAlignmentPropety(data,inputField);if(data.Text!==''){inputField.value=data.Text;}else{inputField.value='';}if(!this.pdfViewer.enableAutoComplete){inputField.autocomplete='off';}inputField.name=data.FieldName;return inputField;};// eslint-disable-next-line
FormFields.prototype.checkIsReadonly=function(data,inputField){var isReadonly=false;for(var n=0;n<this.readOnlyCollection.length;n++){if(inputField.id===this.readOnlyCollection[n]){isReadonly=true;break;}}if(data.IsReadonly||!this.pdfViewer.enableFormFields||isReadonly){inputField.disabled=true;inputField.style.cursor='default';inputField.style.backgroundColor='transparent';}else{// eslint-disable-next-line
var borderColor=data.BackColor;inputField.style.backgroundColor='rgba('+borderColor.R+','+borderColor.G+','+borderColor.B+','+0.2+')';// eslint-disable-next-line
var fontColor=data.FontColor;inputField.style.color='rgba('+fontColor.R+','+fontColor.G+','+fontColor.B+','+1+')';}};/**
     * @param isReadonly
     * @private
     */ // eslint-disable-next-line max-len
FormFields.prototype.formFieldsReadOnly=function(isReadonly){// eslint-disable-next-line
var formFields=document.getElementsByClassName('e-pdfviewer-formFields');this.makeformFieldsReadonly(formFields,isReadonly);// eslint-disable-next-line
var signatureFields=document.getElementsByClassName('e-pdfviewer-signatureformfields');this.makeformFieldsReadonly(signatureFields,isReadonly);};// eslint-disable-next-line
FormFields.prototype.makeformFieldsReadonly=function(formFields,isReadonly){for(var i=0;i<formFields.length;i++){if(formFields[i]){// eslint-disable-next-line
var inputField=formFields[i];if(!isReadonly){inputField.disabled=true;inputField.style.cursor='default';}else{// eslint-disable-next-line
inputField.disabled=false;}}}};// eslint-disable-next-line
FormFields.prototype.applyTabIndex=function(data,inputField,pageIndex){inputField.tabIndex=data.TabIndex;this.maxTabIndex=Math.max(this.maxTabIndex,inputField.tabIndex);if(this.minTabIndex===-1){this.minTabIndex=inputField.tabIndex;}this.minTabIndex=Math.min(this.minTabIndex,inputField.tabIndex);this.maintainTabIndex[pageIndex.toString()]=this.maxTabIndex;this.maintanMinTabindex[pageIndex.toString()]=this.minTabIndex;};// eslint-disable-next-line
FormFields.prototype.checkIsRequiredField=function(data,inputField){if(data.IsRequired){inputField.required=true;inputField.style.border='1px solid red';}else{// eslint-disable-next-line
var borderColor=data.BorderColor;inputField.style.border=data.BorderWidth+'px';inputField.style.borderColor='rgba('+borderColor.R+','+borderColor.G+','+borderColor.B+','+1+')';}if(inputField.type!=='checkbox'&&inputField.type!=='radio'){var borderStyle=data.BorderStyle;this.addBorderStylePropety(borderStyle,inputField);}};// eslint-disable-next-line
FormFields.prototype.applyDefaultColor=function(inputField){// eslint-disable-next-line max-len
if(inputField.type!=='button'&&(inputField.style.backgroundColor==='rgba(255, 255, 255, 0.2)'||inputField.style.backgroundColor==='rgba(0, 0, 0, 0.2)')){inputField.style.backgroundColor='rgba(0, 20, 200, 0.2)';}if(inputField.style.color==='rgba(255, 255, 255, 0.2)'){inputField.style.color='black';}};// eslint-disable-next-line
FormFields.prototype.addAlignmentPropety=function(data,inputField){// eslint-disable-next-line
var alignment=data.Alignment;switch(alignment){case 0:inputField.style.textAlign='left';break;case 1:inputField.style.textAlign='center';break;case 2:inputField.style.textAlign='right';break;case 3:inputField.style.textAlign='justify';break;}};// eslint-disable-next-line
FormFields.prototype.addBorderStylePropety=function(borderStyle,inputField){// eslint-disable-next-line
switch(borderStyle){case 0:inputField.style.borderStyle='solid';break;case 1:inputField.style.borderStyle='dashed';break;case 2:inputField.style.borderStyle='outset';break;case 3:inputField.style.borderStyle='inset';break;case 4:inputField.style.borderStyle='outset';break;case 5:inputField.style.borderStyle='dotted';break;case 6:inputField.style.borderStyle='inset';break;}};// eslint-disable-next-line
FormFields.prototype.createRadioBoxField=function(data,pageIndex,type,printContainer){// eslint-disable-next-line
var inputField=document.createElement('input');inputField.type=type;if(data.Selected){inputField.checked=true;inputField.setAttribute('checked',true);}inputField.name=data.GroupName;inputField.value=data.Value;return inputField;};// eslint-disable-next-line
FormFields.prototype.createDropDownField=function(data,pageIndex,index,printContainer){// eslint-disable-next-line
var inputField=document.createElement('select');// eslint-disable-next-line
var childItems=data['TextList'];if(data.Selected&&!printContainer){// eslint-disable-next-line
var previousField=document.getElementById('editableDropdown'+pageIndex+'_'+index);if(previousField){previousField.remove();}// eslint-disable-next-line
var inputFields=document.createElement('input');inputFields.id='editableDropdown'+pageIndex+'_'+index;inputFields.setAttribute('list',this.pdfViewer.dataId+'input_'+pageIndex+'_'+index);// eslint-disable-next-line
var bounds=data['LineBounds'];// eslint-disable-next-line
var font=data['Font'];inputFields.style.position='absolute';inputFields.style.border='0px';// eslint-disable-next-line
this.applyPosition(inputFields,bounds,font,pageIndex,data['Rotation']);inputFields.style.backgroundColor='rgba(0, 20, 200, 0.2)';inputFields.className='e-pdfviewer-formFields';inputFields.value=data.SelectedValue;if(printContainer){printContainer.appendChild(inputFields);}else{var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);textLayer.appendChild(inputFields);}inputFields.addEventListener('focus',this.focusFormFields.bind(this));inputFields.addEventListener('blur',this.blurFormFields.bind(this));inputFields.addEventListener('click',this.updateFormFields.bind(this));inputFields.addEventListener('change',this.changeFormFields.bind(this));inputFields.addEventListener('keydown',this.updateFormFieldsValue.bind(this));inputField=document.createElement('DATALIST');}for(var j=0;j<childItems.length;j++){// eslint-disable-next-line
var option=document.createElement('option');option.className='e-dropdownSelect';if(data.SelectedValue===childItems[j]||data.selectedIndex===j){option.selected=true;}else{option.selected=false;}if(inputField.nodeName==='DATALIST'){option.value=childItems[j];}option.innerHTML=childItems[j];inputField.appendChild(option);}inputField.name=data.FieldName;return inputField;};// eslint-disable-next-line
FormFields.prototype.createListBoxField=function(data,pageIndex){// eslint-disable-next-line
var inputField=document.createElement('select');// eslint-disable-next-line
var childItems=data['TextList'];if(data.MultiSelect){inputField.multiple=true;}else{inputField.multiple=false;inputField.size=childItems.length;}for(var j=0;j<childItems.length;j++){// eslint-disable-next-line
var option=document.createElement('option');option.className='e-pdfviewer-ListBox';for(var k=0;k<data.SelectedList.length;k++){if(data.SelectedList[k]===j){option.selected=true;}}option.innerHTML=childItems[j];inputField.appendChild(option);}inputField.name=data.Text;return inputField;};// eslint-disable-next-line
FormFields.prototype.createSignatureField=function(data,pageIndex,index,printContainer,count){// eslint-disable-next-line
var inputField=document.createElement('div');inputField.name=data.FieldName;if(data.Visible===1){inputField.style.visibility='hidden';}// eslint-disable-next-line
var previousField=document.getElementById('signIcon'+pageIndex+'_'+index);if(previousField&&!printContainer){previousField.remove();}this.pdfViewerBase.isInitialField=data.IsInitialField;var signIndicator=this.pdfViewerBase.isInitialField?"Initial":"Sign";//check whether the width for sign indicator has default value or not and then set the default width value for initial field.
var signatureFieldIndicatorWidth=20;// eslint-disable-next-line
var span=document.createElement('span');var textLayer=document.getElementById(this.pdfViewer.dataId+'_textLayer_'+pageIndex);// eslint-disable-next-line
var bounds=data['LineBounds'];// eslint-disable-next-line
var font=data['Font'];var left=this.ConvertPointToPixel(bounds.X);var top=this.ConvertPointToPixel(bounds.Y);var height=10;// eslint-disable-next-line max-len
var width=signatureFieldIndicatorWidth>bounds.Width/2?bounds.Width/2:signatureFieldIndicatorWidth;var fontSize=10;span.style.position='absolute';span.id='signIcon'+pageIndex+'_'+index;var zoomvalue=this.pdfViewerBase.getZoomFactor();var rotation=0;// eslint-disable-next-line
var annotBounds={left:left,top:top,width:width,height:height};// eslint-disable-next-line
var fieldBounds=this.getBounds(annotBounds,pageIndex);span.style.transform='rotate('+rotation+'deg)';span.style.left=fieldBounds.left*zoomvalue+'px';span.style.top=fieldBounds.top*zoomvalue+'px';if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){span.style.height=5+'px';span.style.width=10+'px';span.style.fontSize='3px';}else{span.style.height=height*zoomvalue+'px';span.style.width=width*zoomvalue+'px';span.style.fontSize=fontSize*zoomvalue-1+'px';}span.style.padding='2px';span.style.textAlign='center';span.style.boxSizing='content-box';// eslint-disable-next-line
span.innerHTML=signIndicator;span.style.color='black';// eslint-disable-next-line
span.style.backgroundColor='orange';span.style.opacity=1;if(data.Visible===1){span.style.visibility='hidden';}textLayer.appendChild(span);this.addSignaturePath(data,count);return{inputField:inputField,index:index};};// eslint-disable-next-line
FormFields.prototype.addSignaturePath=function(signData,count){this.isSignatureField=false;// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var formFieldsData=JSON.parse(data);for(var m=0;m<formFieldsData.length;m++){// eslint-disable-next-line
var currentData=formFieldsData[m];// eslint-disable-next-line max-len
if((currentData.Name==='ink'||currentData.Name==='SignatureField'||currentData.Name==='SignatureImage'||currentData.Name==='SignatureText')&&currentData.FieldName===signData.ActualFieldName+'_'+count&&currentData.Value&&currentData.Value!==''){signData.Value=currentData.Value;signData.FontFamily=currentData.FontFamily;signData.FontSize=currentData.FontSize;this.isSignatureField=true;if(!signData.Bounds){signData.Bounds=currentData.LineBounds;}break;}}}return this.isSignatureField;};// eslint-disable-next-line
FormFields.prototype.getBounds=function(bound,pageIndex,rotation,isFieldRotated){// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];// eslint-disable-next-line
var bounds;if(rotation>0){bounds=this.getBoundsPosition(rotation,bound,pageDetails);}else{bounds=this.getBoundsPosition(pageDetails.rotation,bound,pageDetails,isFieldRotated);}return bounds;};// eslint-disable-next-line
FormFields.prototype.getBoundsPosition=function(rotation,bound,pageDetails,isFieldRotated){// eslint-disable-next-line
var bounds;if(!isFieldRotated){switch(rotation){case 90:// eslint-disable-next-line
bounds={left:pageDetails.width-bound.top-bound.height,top:bound.left,width:bound.height,height:bound.width};break;case 180:// eslint-disable-next-line
bounds={left:pageDetails.width-bound.left-bound.width,top:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};break;case 270:// eslint-disable-next-line
bounds={left:bound.top,top:pageDetails.height-bound.left-bound.width,width:bound.height,height:bound.width};break;case 0:bounds=bound;break;case 1:// eslint-disable-next-line
bounds={left:pageDetails.width-bound.top-bound.height,top:bound.left,width:bound.height,height:bound.width};break;case 2:// eslint-disable-next-line
bounds={left:pageDetails.width-bound.left-bound.width,top:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};break;case 3:// eslint-disable-next-line
bounds={left:bound.top,top:pageDetails.height-bound.left-bound.width,width:bound.height,height:bound.width};break;}if(!bounds){bounds=bound;}}else{switch(rotation){case 0:bounds=bound;break;case 1:bounds={left:pageDetails.width-bound.top-bound.height-(bound.width/2-bound.height/2),top:bound.left+(bound.width/2-bound.height/2),width:bound.width,height:bound.height};break;case 2:bounds={left:pageDetails.width-bound.left-bound.width,top:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};break;case 3:bounds={left:bound.top-(bound.width/2-bound.height/2),top:pageDetails.height-bound.left-bound.width+(bound.width/2-bound.height/2),width:bound.width,height:bound.height};break;}if(!bounds){bounds=bound;}}return bounds;};// eslint-disable-next-line
FormFields.prototype.applyPosition=function(inputField,bounds,font,pageIndex,rotation,isFieldRotated,isParentDiv,insertSpaceValue){if(bounds){var left=this.ConvertPointToPixel(bounds.X);var top_1=this.ConvertPointToPixel(bounds.Y);var width=this.ConvertPointToPixel(bounds.Width);var height=this.ConvertPointToPixel(bounds.Height);var fontHeight=0;// eslint-disable-next-line
var fieldBounds={left:left,top:top_1-0.2,width:width,height:height+0.2};// eslint-disable-next-line
var annotBounds=this.getBounds(fieldBounds,pageIndex,rotation,isFieldRotated);if(font!==null&&font.Height){inputField.style.fontFamily=font.Name;if(font.Italic){inputField.style.fontStyle='italic';}if(font.Bold){inputField.style.fontWeight='Bold';}fontHeight=this.ConvertPointToPixel(font.Size);}if(isParentDiv===undefined){inputField.style.padding='0px 2px 2px 2px';}this.pdfViewerBase.setStyleToTextDiv(inputField,annotBounds.left,annotBounds.top,fontHeight,annotBounds.width,annotBounds.height,false,isParentDiv,insertSpaceValue);}};// eslint-disable-next-line
FormFields.prototype.renderExistingAnnnot=function(data,index,printContainer,isFieldRotated){if(!printContainer){// eslint-disable-next-line
var bounds=void 0;if(data.Bounds&&data.Name!=='ink'){bounds=data.Bounds;}else{bounds=data.LineBounds;}var currentLeft=void 0;var currentTop=void 0;var currentWidth=void 0;var currentHeight=void 0;if(bounds.x||bounds.y||bounds.width||bounds.height){currentLeft=bounds.x;currentTop=bounds.y;currentWidth=bounds.width;currentHeight=bounds.height;}else{currentLeft=this.ConvertPointToPixel(bounds.X);currentTop=this.ConvertPointToPixel(bounds.Y);currentWidth=this.ConvertPointToPixel(bounds.Width);currentHeight=this.ConvertPointToPixel(bounds.Height);}// eslint-disable-next-line
var currentPage=parseFloat(data['PageIndex']);// eslint-disable-next-line
var bound={left:currentLeft,top:currentTop,width:currentWidth,height:currentHeight};// eslint-disable-next-line
var newBounds=this.updateSignatureBounds(bound,currentPage,isFieldRotated);var annot=void 0;var fontFamily=data.FontFamily?data.FontFamily:data.fontFamily;// eslint-disable-next-line
if(this.pdfViewerBase.isSignatureImageData(data.Value)){annot={// eslint-disable-next-line max-len
id:this.pdfViewer.dataId+'input_'+currentPage+'_'+index,bounds:newBounds,pageIndex:currentPage,data:data.Value,modifiedDate:'',shapeAnnotationType:'SignatureImage',opacity:1,rotateAngle:isFieldRotated?this.getAngle(currentPage):0,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};}else if(this.pdfViewerBase.isSignaturePathData(data.Value)){var bound_1=newBounds;var tempBounds={left:newBounds.x,top:newBounds.y,width:newBounds.width,height:newBounds.height};bound_1=this.updateSignatureBounds(tempBounds,currentPage,true);annot={// eslint-disable-next-line max-len
id:this.pdfViewer.dataId+'input_'+currentPage+'_'+index,bounds:bound_1,pageIndex:currentPage,data:data.Value,modifiedDate:'',shapeAnnotationType:'Path',opacity:1,rotateAngle:0,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''}};}else{annot={// eslint-disable-next-line max-len
id:this.pdfViewer.dataId+'input_'+currentPage+'_'+index,bounds:newBounds,pageIndex:currentPage,data:data.Value,modifiedDate:'',shapeAnnotationType:'SignatureText',opacity:1,rotateAngle:isFieldRotated?this.getAngle(currentPage):0,annotName:'SignatureField',comments:[],review:{state:'',stateModel:'',modifiedDate:'',author:''},fontFamily:data.FontFamily,fontSize:data.FontSize};annot.fontFamily=fontFamily==="TimesRoman"?"Times New Roman":fontFamily;annot.fontSize=data.FontSize?data.FontSize:data.fontSize;}if((data.Name==='SignatureField'||data.Name==='InitialField')&&!sf.base.isNullOrUndefined(data.id)){var elementId=data.id;var signatureFieldElement=document.getElementById(elementId+'_content_html_element');var signatureField=this.pdfViewer.nameTable[elementId];annot.id=signatureField.id+"_content";var obj=this.pdfViewer.add(annot);signatureField.wrapper.children.push(obj.wrapper);if(!sf.base.isNullOrUndefined(signatureFieldElement)&&this.isSignatureField){var inputField=signatureFieldElement.children[0].children[0];inputField.style.pointerEvents='none';inputField.className='e-pdfviewer-signatureformfields-signature';inputField.parentElement.style.pointerEvents='none';}}else{this.pdfViewer.add(annot);}data.Bounds=annot.bounds;// eslint-disable-next-line
var canvass=document.getElementById(this.pdfViewer.dataId+'_annotationCanvas_'+currentPage);// eslint-disable-next-line
this.pdfViewer.renderDrawing(canvass,currentPage);}};// eslint-disable-next-line
FormFields.prototype.updateSignatureBounds=function(bound,pageIndex,isFieldRotated){// eslint-disable-next-line
var pageDetails=this.pdfViewerBase.pageSize[pageIndex];if(pageDetails){if(!isFieldRotated){if(pageDetails.rotation===1){// eslint-disable-next-line max-len
return{x:pageDetails.width-bound.top-bound.height,y:bound.left,width:bound.height,height:bound.width};}else if(pageDetails.rotation===2){// eslint-disable-next-line max-len
return{x:pageDetails.width-bound.left-bound.width,y:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};}else if(pageDetails.rotation===3){// eslint-disable-next-line max-len
return{x:bound.top,y:pageDetails.height-bound.left-bound.width,width:bound.height,height:bound.width};}else{// eslint-disable-next-line max-len
return{x:bound.left,y:bound.top,width:bound.width,height:bound.height};}}else{if(pageDetails.rotation===1){return{x:pageDetails.width-bound.top-bound.height-(bound.width/2-bound.height/2),y:bound.left+(bound.width/2-bound.height/2),width:bound.width,height:bound.height};}else if(pageDetails.rotation===2){// eslint-disable-next-line max-len
return{x:pageDetails.width-bound.left-bound.width,y:pageDetails.height-bound.top-bound.height,width:bound.width,height:bound.height};}else if(pageDetails.rotation===3){return{x:bound.top-(bound.width/2-bound.height/2),y:pageDetails.height-bound.left-bound.width+(bound.width/2-bound.height/2),width:bound.width,height:bound.height};}else{return{x:bound.left,y:bound.top,width:bound.width,height:bound.height};}}}else{return{x:bound.left,y:bound.top,width:bound.width,height:bound.height};}};FormFields.prototype.resetFormFields=function(){var formFieldData=this.pdfViewer.formFieldCollections;for(var i=0;i<formFieldData.length;i++){var currentData=formFieldData[i];this.currentTarget=document.getElementById(currentData.id);if(currentData.type==='Textbox'){this.currentTarget.value=currentData.value;}else if(currentData.type==='RadioButton'){this.currentTarget.checked=currentData.value;if(currentData.value){this.updateDataInSession(this.currentTarget);}}else if(currentData.type==='DropDown'){this.currentTarget.value=currentData.value;}else if(currentData.type==='CheckBox'){this.currentTarget.checked=currentData.value;}else if(currentData.type==='SignatureField'){// eslint-disable-next-line
var annotation=this.pdfViewer.nameTable[currentData.id];if(annotation){if(this.currentTarget&&this.currentTarget.className==='e-pdfviewer-signatureformfields-signature'){this.currentTarget.className='e-pdfviewer-signatureformfields';this.currentTarget.style.pointerEvents='';this.updateDataInSession(this.currentTarget,'');}this.pdfViewer.remove(annotation);this.pdfViewer.renderDrawing();}}if(currentData.type!=='RadioButton'&&currentData.type!=='SignatureField'){this.updateDataInSession(this.currentTarget);}}};/**
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.clearFormFieldStorage=function(){// eslint-disable-next-line
var sessionSize=Math.round(JSON.stringify(window.sessionStorage).length/1024);var maxSessionSize=4500;if(sessionSize>maxSessionSize){var storageLength=window.sessionStorage.length;// eslint-disable-next-line
var annotationList=[];for(var i=0;i<storageLength;i++){if(window.sessionStorage.key(i)&&window.sessionStorage.key(i).split('_')[3]){if(window.sessionStorage.key(i).split('_')[3]==='annotations'){// eslint-disable-next-line max-len
this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i));annotationList.push(window.sessionStorage.key(i));}}}if(annotationList){for(var i=0;i<annotationList.length;i++){window.sessionStorage.removeItem(annotationList[i]);}}}};// eslint-disable-next-line
FormFields.prototype.clearFormFields=function(formField){// eslint-disable-next-line
var data=this.pdfViewerBase.getItemFromSessionStorage('_formfields');if(data){// eslint-disable-next-line
var formFieldsData=void 0;if(formField){formFieldsData=[formField];}else{formFieldsData=JSON.parse(data);}var isFirstRadio=true;for(var m=0;m<formFieldsData.length;m++){// eslint-disable-next-line
var currentData=formFieldsData[m];if(formField){currentData.uniqueID=formField.id;currentData.Name=formField.type;}// eslint-disable-next-line
this.currentTarget=document.getElementById(currentData.uniqueID);if(currentData.Name==='Textbox'){this.currentTarget.value='';}else if(currentData.Name==='RadioButton'){if(isFirstRadio){this.currentTarget.checked=true;this.updateDataInSession(this.currentTarget);isFirstRadio=false;}}else if(currentData.Name==='DropDown'){this.currentTarget.value=currentData.TextList[0];}else if(currentData.Name==='CheckBox'){this.currentTarget.checked=false;}else if(currentData.Name==='SignatureField'){// eslint-disable-next-line
var annotation=this.pdfViewer.nameTable[currentData.uniqueID];if(annotation){if(this.currentTarget&&this.currentTarget.className==='e-pdfviewer-signatureformfields-signature'){this.currentTarget.className='e-pdfviewer-signatureformfields';this.currentTarget.style.pointerEvents='';this.currentTarget.parentElement.style.pointerEvents='';this.updateDataInSession(this.currentTarget,'');if(formField){formField.value='';formField.signatureType=[formField.signatureType];formField.signatureType[0]='';}}this.pdfViewer.remove(annotation);this.pdfViewer.renderDrawing();}}if(currentData.Name!=='SignatureField'&&currentData.Name!=='ink'&&currentData.Name!=='RadioButton'){this.updateDataInSession(this.currentTarget);}}}};/**
     * @param number
     * @private
     */ // eslint-disable-next-line
FormFields.prototype.ConvertPointToPixel=function(number){return number*(96/72);};/**
     * @private
     */FormFields.prototype.destroy=function(){this.currentTarget=null;this.readOnlyCollection=[];if(this.pdfViewerBase&&this.pdfViewerBase.signatureModule)this.pdfViewerBase.signatureModule.destroy();};/**
     * @private
     */FormFields.prototype.getModuleName=function(){return'FormFields';};/**
     * @private
     * Get the text wdith
     * @param text
     * @param font
     * @param fontFamily
    */FormFields.prototype.getTextWidth=function(text,font,fontFamily){var canvas=document.createElement('canvas');var context=canvas.getContext('2d');var fontName;if(font){fontName=font+'px'+' '+fontFamily;}context.font=fontName||getComputedStyle(document.body).font;return context.measureText(text).width;};/**
     * @private
     * @param {number} fontSize - Font size.
     * @returns {number} - Returns the font size.
    */FormFields.prototype.getFontSize=function(fontSize){return fontSize;};return FormFields;}();/**
 * export types
 */function PdfiumRunner(){var moduleString="Module";var pageLoaded=false;var moduleLoaded=false;var FPDF={};var pdfiumWindow=pdfiumWindow||{};var doc;var testArray=[];var PDFiumModule=typeof pdfiumWindow[moduleString]!=='undefined'?pdfiumWindow[moduleString]:{};var F32=Float32Array;var F64=Float64Array;var H=function H(t,s,d){return function(f){var _a=pdfiumWindow.heap(t,s),m=_a[0],a=_a.slice(1);var v=f.apply(void 0,a.map(function(x){return x.p;}));if(!v){m.free();return d;}var r=a.map(function(x){return x.v;});m.free();return r;};};Object.assign(FPDF,{LCD_TEXT:0x02,NO_NATIVETEXT:0x04,GRAYSCALE:0x08,DEBUG_INFO:0x80,NO_CATCH:0x100,RENDER_LIMITEDIMAGECACHE:0x200,RENDER_FORCEHALFTONE:0x400,PRINTING:0x800,REVERSE_BYTE_ORDER:0x10,Bitmap_Gray:1,Bitmap_BGR:2,Bitmap_BGRx:3,Bitmap_BGRA:4,LAST_ERROR:{SUCCESS:0,UNKNOWN:1,FILE:2,FORMAT:3,PASSWORD:4,SECURITY:5,PAGE:6}});function initializeFPDF(){FPDF.Init=PDFiumModule.cwrap('FPDF_InitLibrary');FPDF.RenderPageBitmap=PDFiumModule.cwrap('FPDF_RenderPageBitmap','',['number','number','number','number','number','number','number','number']);FPDF.Bitmap_FillRect=PDFiumModule.cwrap('FPDFBitmap_FillRect','',['number','number','number','number','number','number']);FPDF.Bitmap_CreateEx=PDFiumModule.cwrap('FPDFBitmap_CreateEx','number',['number','number','number','number','number']);FPDF.Bitmap_Destroy=PDFiumModule.cwrap('FPDFBitmap_Destroy','',['number']);FPDF.LoadPage=PDFiumModule.cwrap('FPDF_LoadPage','number',['number','number']);FPDF.ClosePage=PDFiumModule.cwrap('FPDF_ClosePage','',['number']);FPDF.LoadMemDocument=PDFiumModule.cwrap('FPDF_LoadMemDocument','number',['number','number','string']);FPDF.GetPageSizeByIndex=PDFiumModule.cwrap('FPDF_GetPageSizeByIndex','number',['number','number','number','number']);FPDF.GetLastError=PDFiumModule.cwrap('FPDF_GetLastError','number');FPDF.GetPageCount=PDFiumModule.cwrap('FPDF_GetPageCount','number',['number']);FPDF.CloseDocument=PDFiumModule.cwrap('FPDF_CloseDocument','',['number']);FPDF.DestroyLibrary=PDFiumModule.cwrap('FPDF_DestroyLibrary');FPDF.LoadTextPage=PDFiumModule.cwrap('FPDFText_LoadPage','number',['number']);FPDF.CloseTextPage=PDFiumModule.cwrap('FPDFText_ClosePage','',['number']);FPDF.TextCountChars=PDFiumModule.cwrap('FPDFText_CountChars','number',['number']);FPDF.GetUnicodeChar=PDFiumModule.cwrap('FPDFText_GetUnicode','number',['number']);FPDF.GetCharBox=PDFiumModule.cwrap('FPDFText_GetCharBox','number',['number','number','number','number','number']);FPDF.GetPageRotation=PDFiumModule.cwrap('FPDFPage_GetRotation','number',['number']);FPDF.GetCharAngle=PDFiumModule.cwrap('FPDFText_GetCharAngle','number',['number']);FPDF.GetCropBox=PDFiumModule.cwrap('FPDFPage_GetCropBox','number',['number','number','number','number']);pdfiumWindow.heap=function(J,s){var E;switch(J){case Int8Array:E=PDFiumModule.HEAP8;break;case Int16Array:E=PDFiumModule.HEAP16;break;case Int32Array:E=PDFiumModule.HEAP32;break;case Uint8Array:E=PDFiumModule.HEAPU8;break;case Uint16Array:E=PDFiumModule.HEAPU16;break;case Uint32Array:E=PDFiumModule.HEAPU32;break;case Float32Array:E=PDFiumModule.HEAPF32;break;case Float64Array:E=PDFiumModule.HEAPF64;break;}var Z=J.BYTES_PER_ELEMENT;var m=PDFiumModule.asm.malloc(s*Z);var a=Array(1+s);a[0]={s:s,J:J,Z:Z,E:E,m:m,free:function free(){return PDFiumModule.asm.free(m);}};var _loop_1=function _loop_1(i){a[i+1]={p:m+i*Z,get v(){return E[m/Z+i];}};};for(var i=0;i<s;i++){_loop_1(i);}return a;};}function checkIfEverythingWasLoaded(){pageLoaded=true;if(pageLoaded||moduleLoaded){startApp();}}PDFiumModule.onRuntimeInitialized=function(){moduleLoaded=true;checkIfEverythingWasLoaded();};function startApp(){initializeFPDF();if(pdfiumWindow.loaded){pdfiumWindow.loaded();}}pdfiumWindow.onload=function(){pageLoaded=true;checkIfEverythingWasLoaded();};pdfiumWindow.loaded=function(){ctx.postMessage({message:'loaded'});};var ctx=self;ctx.onmessage=function(event){if(event.data.message==='initialLoading'){importScripts(event.data.url+'/pdfium.js');PDFiumModule.url=event.data.url;PDFiumModule.onRuntimeInitialized=function(){moduleLoaded=true;checkIfEverythingWasLoaded();};this['PDFiumModule'](PDFiumModule);}else if(event.data.message==='LoadPageCollection'){pdfiumWindow.fileByteArray=event.data.uploadedFile;var fileSize=pdfiumWindow.fileByteArray.length;FPDF.Init();var wasmBuffer=PDFiumModule.asm.malloc(fileSize);PDFiumModule.HEAPU8.set(pdfiumWindow.fileByteArray,wasmBuffer);doc=new Doc({wasm:FPDF.LoadMemDocument(wasmBuffer,fileSize,event.data.password),wasmBuffer:wasmBuffer});testArray=testArray?testArray:[];testArray.push(doc.processor.wasmData.wasm);var pages=FPDF.GetPageCount(doc.processor.wasmData.wasm);doc.setPages(pages);doc.createAllPages();ctx.postMessage({message:'PageLoaded',pageIndex:event.data.pageIndex,pageSizes:doc.pageSizes});}else if(event.data.message==='renderPage'){var firstPage=doc.getPage(event.data.pageIndex);var ImageData_1=event.data;var data=firstPage.render(null,ImageData_1.zoomFactor,ImageData_1.isTextNeed,null,null,ImageData_1.textDetailsId);ctx.postMessage(data);}else if(event.data.message==='renderThumbnail'){var firstPage=doc.getPage(event.data.pageIndex);var data=firstPage.render("thumbnail",null,false,null,null);ctx.postMessage(data);}else if(event.data.message==='printImage'){var firstPage=doc.getPage(event.data.pageIndex);var data=firstPage.render("print",null,false,event.data.printScaleFactor,event.data.printDevicePixelRatio);ctx.postMessage(data);}else if(event.data.message==='renderImageAsTile'){var values=event.data;var firstPage=doc.getPage(event.data.pageIndex);var data=firstPage.renderTileImage(values.tileX,values.tileY,values.tileXCount,values.tileYCount,values.zoomFactor,event.data.isTextNeed,event.data.textDetailsId);ctx.postMessage(data);}else if(event.data.message==='unloadFPDF'){if(doc){if(testArray.includes(doc.processor.wasmData.wasm)){PDFiumModule.asm.free(doc.processor.wasmData.wasmBuffer);FPDF.CloseDocument(doc.processor.wasmData.wasm);FPDF.DestroyLibrary();var index=testArray.indexOf(doc.processor.wasmData.wasm);if(index>-1){testArray.splice(index,1);}}}}};var Page=/** @class */function(){function Page(index,processor){this.index=index;this.src=null;this.processor=processor;}Page.prototype.render=function(message,zoomFactor,isTextNeed,printScaleFactor,printDevicePixelRatio,textDetailsId){return this.processor.render(this.index,message,zoomFactor,isTextNeed,printScaleFactor,printDevicePixelRatio,textDetailsId);};Page.prototype.renderTileImage=function(x,y,tileX,tileY,zoomFactor,isTextNeed,textDetailsId){return this.processor.renderTileImage(this.index,x,y,tileX,tileY,zoomFactor,isTextNeed,textDetailsId);};return Page;}();var RectAngle=/** @class */function(){function RectAngle(X,Y,Width,Height,Text,Rotation){this.X=X;this.Y=Y;this.Width=Width;this.Height=Height;this.Bottom=this.Y+this.Height;this.Right=this.X+this.Width;this.Top=this.Y;this.Left=this.X;this.Rotation=Rotation;this.Text=Text;}return RectAngle;}();var Processor=/** @class */function(){function Processor(wasmData){this.TextBounds=[];this.TextContent=[];this.CharacterBounds=[];this.PageText="";this.wasmData=wasmData;}Processor.prototype.getPageSize=function(i){var _this=this;if(i===void 0){i=0;}return H(F64,2,[-1,-1])(function(w,h){return FPDF.GetPageSizeByIndex(_this.wasmData.wasm,i,w,h);}).map(function(v){if(isNaN(v)){return _this.getPageSize(i);}return parseInt((v*(96/72)).toString());});};Processor.prototype.getCharBounds=function(pagePointer,i){if(i===void 0){i=0;}return H(F64,4,[-1,-1,-1,-1])(function(left,right,bottom,top){return FPDF.GetCharBox(pagePointer,i,left,right,bottom,top);});};Processor.prototype.getCropBox=function(pagePointer){return H(F32,4,[0,0,0,0])(function(x,bottom,right,y){return FPDF.GetCropBox(pagePointer,x,bottom,right,y);});};Processor.prototype.getRender=function(i,w,h,isTextNeed){if(i===void 0){i=0;}var flag=FPDF.REVERSE_BYTE_ORDER;var heap=PDFiumModule.asm.malloc(w*h*4);PDFiumModule.HEAPU8.fill(0,heap,heap+w*h*4);var bmap=FPDF.Bitmap_CreateEx(w,h,FPDF.Bitmap_BGRA,heap,w*4);var page=FPDF.LoadPage(this.wasmData.wasm,i);FPDF.Bitmap_FillRect(bmap,0,0,w,h,0xFFFFFFFF);FPDF.RenderPageBitmap(bmap,page,0,0,w,h,0,flag);FPDF.Bitmap_Destroy(bmap);this.textExtraction(page,i,isTextNeed);FPDF.ClosePage(page);return heap;};Processor.prototype.textExtraction=function(pagePointer,pageIndex,isTextNeed){var _a;if(isTextNeed){var _b=this.getPageSize(pageIndex),pageWidth=_b[0],pageHeight=_b[1];var textPage=FPDF.LoadTextPage(pagePointer,pageIndex);var pageRotation=FPDF.GetPageRotation(pagePointer);var totalCharacterCount=FPDF.TextCountChars(textPage);this.TextBounds=[];this.TextContent=[];this.CharacterBounds=[];var pageText="";var minTop=0;var maxBottom=0;var minLeft=0;var maxRight=0;var top_1=[];var bottom=[];var left=[];var right=[];var wordBounds=[];var word="";var wordMinLeft=0;var wordMaxRight=0;var wordMinTop=0;var wordMaxBottom=0;var wordRotation=0;var wordStart=true;var isZeroWidthSpace=false;var isPreviousSpace=false;var startNewLine=false;var maximumSpaceForNewLine=11;var _c=this.getCropBox(pagePointer),cropX=_c[0],cropBottom=_c[1],cropRight=_c[2],cropY=_c[3];for(var charCount=0;charCount<=totalCharacterCount;charCount++){var result=FPDF.GetUnicodeChar(textPage,charCount);var rotationRadian=FPDF.GetCharAngle(textPage,charCount);var character=String.fromCharCode(result);var _d=this.getCharBounds(textPage,charCount),charLeft=_d[0],charRight=_d[1],charBottom=_d[2],charTop=_d[3];var X=this.pointerToPixelConverter(charLeft)-this.pointerToPixelConverter(cropX);var Y=pageHeight+this.pointerToPixelConverter(cropBottom)-this.pointerToPixelConverter(charTop);var Width=this.pointerToPixelConverter(charRight-charLeft);var Height=this.pointerToPixelConverter(charTop-charBottom);var rotationAngle=parseInt((rotationRadian*180/Math.PI).toString());if(charCount<totalCharacterCount){pageText+=character;var currentCharacterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);this.CharacterBounds.push(currentCharacterBounds);}if(pageRotation==1||pageRotation==3){Y=pageWidth+this.pointerToPixelConverter(cropBottom)-this.pointerToPixelConverter(charTop);}switch(character){case"\0":minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds);this.textBoundsCalculation(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight);wordBounds=[];wordStart=true;isPreviousSpace=false;word="";top_1=[];left=[];bottom=[];right=[];minTop=0;maxBottom=0;minLeft=0;maxRight=0;break;case"\r":if(charCount<totalCharacterCount){var characterBounds=new RectAngle(X,Y,Width,Height,"\r\n",rotationAngle);top_1.push(characterBounds.Top);bottom.push(characterBounds.Bottom);left.push(characterBounds.Left);right.push(characterBounds.Right);minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds_1=void 0;if(wordStart==false){newWordBounds_1=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_1);}wordBounds.push(characterBounds);this.textBoundsCalculation(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight);wordBounds=[];wordStart=true;isPreviousSpace=false;word="";top_1=[];left=[];bottom=[];right=[];minTop=0;maxBottom=0;minLeft=0;maxRight=0;pageText+='\n';rotationRadian=FPDF.GetCharAngle(textPage,charCount);_a=this.getCharBounds(textPage,charCount),charLeft=_a[0],charRight=_a[1],charBottom=_a[2],charTop=_a[3];X=this.pointerToPixelConverter(charLeft);Y=pageHeight-this.pointerToPixelConverter(charTop);Width=this.pointerToPixelConverter(charRight-charLeft);Height=this.pointerToPixelConverter(charTop-charBottom);rotationAngle=parseInt((rotationRadian*180/Math.PI).toString());var currentCharacterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);this.CharacterBounds.push(currentCharacterBounds);charCount++;}break;case"\x02":case"\uFFFE":{var characterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);top_1.push(characterBounds.Top);bottom.push(characterBounds.Bottom);left.push(characterBounds.Left);right.push(characterBounds.Right);minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds_2=void 0;if(wordStart==false){newWordBounds_2=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_2);}if(character=="\x02"){wordBounds.push(characterBounds);}this.textBoundsCalculation(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight);wordBounds=[];wordStart=true;isPreviousSpace=false;word="";top_1=[];left=[];bottom=[];right=[];minTop=0;maxBottom=0;minLeft=0;maxRight=0;}break;default:if(Width==0||Height==0){isZeroWidthSpace=true;minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds_3=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_3);var characterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);wordMinTop=characterBounds.Top;wordMaxBottom=characterBounds.Bottom;wordMinLeft=characterBounds.Left;wordMaxRight=characterBounds.Right;word=character;wordRotation=wordBounds[wordBounds.length-1].Rotation;newWordBounds_3=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_3);wordMinTop=0;wordMaxBottom=0;wordMinLeft=0;wordMaxRight=0;word="";wordRotation=0;wordStart=true;isPreviousSpace=true;}else{if(wordStart==true){wordMinTop=Y;wordMaxBottom=Y+Height;wordMinLeft=X;wordMaxRight=X+Width;}var characterBounds=new RectAngle(X,Y,Width,Height,character,rotationAngle);if(character!=" "){if(isPreviousSpace&&wordBounds.length>0&&rotationAngle==wordBounds[0].Rotation){if((rotationAngle==180||rotationAngle==0)&&Math.abs(characterBounds.Y-wordBounds[0].Y)>maximumSpaceForNewLine){startNewLine=true;}if((rotationAngle==270||rotationAngle==90)&&Math.abs(characterBounds.X-wordBounds[0].X)>maximumSpaceForNewLine){startNewLine=true;}}if(isZeroWidthSpace&&wordBounds.length>=1&&wordBounds[wordBounds.length-1].Rotation!=characterBounds.Rotation||startNewLine){isZeroWidthSpace=false;startNewLine=false;minTop=Math.min.apply(Math,top_1);maxBottom=Math.max.apply(Math,bottom);minLeft=Math.min.apply(Math,left);maxRight=Math.max.apply(Math,right);var newWordBounds_4=void 0;if(wordStart==false){newWordBounds_4=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_4);}this.textBoundsCalculation(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight);wordBounds=[];wordStart=true;word="";top_1=[];left=[];bottom=[];right=[];minTop=0;maxBottom=0;minLeft=0;maxRight=0;}top_1.push(characterBounds.Top);bottom.push(characterBounds.Bottom);left.push(characterBounds.Left);right.push(characterBounds.Right);wordMinTop=Math.min(wordMinTop,characterBounds.Top);wordMaxBottom=Math.max(wordMaxBottom,characterBounds.Bottom);wordMinLeft=Math.min(wordMinLeft,characterBounds.Left);wordMaxRight=Math.max(wordMaxRight,characterBounds.Right);word+=character;wordRotation=characterBounds.Rotation;wordStart=false;isPreviousSpace=false;}else{var newWordBounds_5=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_5);wordMinTop=characterBounds.Top;wordMaxBottom=characterBounds.Bottom;wordMinLeft=characterBounds.Left;wordMaxRight=characterBounds.Right;word=character;wordRotation=characterBounds.Rotation;newWordBounds_5=new RectAngle(wordMinLeft,wordMinTop,wordMaxRight-wordMinLeft,wordMaxBottom-wordMinTop,word,wordRotation);wordBounds.push(newWordBounds_5);wordMinTop=0;wordMaxBottom=0;wordMinLeft=0;wordMaxRight=0;word="";wordRotation=0;wordStart=true;isPreviousSpace=true;}}break;}}FPDF.CloseTextPage(textPage);this.Rotation=pageRotation;this.PageText=pageText;}};Processor.prototype.pointerToPixelConverter=function(pointerValue){return pointerValue*(96/72);};Processor.prototype.textBoundsCalculation=function(wordBounds,minTop,maxBottom,maxRight,minLeft,pageRotation,pageWidth,pageHeight){var newWordBounds;var hasInBetweenRotation=false;var inBetweenRotatedText="";var maximumSpaceBetweenWords=30;var sentence=wordBounds.reduce(function(word,rect){return word+rect.Text;},'');var isRTLText=this.checkIsRtlText(sentence);for(var count=0;count<wordBounds.length;count++){var textRotation=wordBounds[count].Rotation;if(textRotation==0||textRotation==180){if(hasInBetweenRotation){this.TextBounds.push(newWordBounds);this.TextContent.push(inBetweenRotatedText);inBetweenRotatedText="";}hasInBetweenRotation=false;if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(wordBounds[count].Left,minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count].Left,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-wordBounds[count].Left,pageHeight-minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-wordBounds[count].Left,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}}else if(textRotation==90||textRotation==270){if(hasInBetweenRotation){this.TextBounds.push(newWordBounds);this.TextContent.push(inBetweenRotatedText);inBetweenRotatedText="";}hasInBetweenRotation=false;if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(minLeft,wordBounds[count].Top,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-wordBounds[count].Top,minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-wordBounds[count].Top,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count].Top,pageHeight-minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}}else if(!hasInBetweenRotation){hasInBetweenRotation=true;inBetweenRotatedText+=wordBounds[count].Text;if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(wordBounds[count].Left,minTop,maxRight-minLeft,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count].Left,maxRight-minLeft,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-wordBounds[count].Left,pageHeight-minTop,maxRight-minLeft,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-wordBounds[count].Left,maxRight-minLeft,maxBottom-minTop,wordBounds[count].Text,textRotation);}}else{inBetweenRotatedText+=wordBounds[count].Text;}if(!hasInBetweenRotation&&wordBounds[count].Text===" "&&count!==0&&count+1<=wordBounds.length){if(!isRTLText){if(count+1!=wordBounds.length){var spaceWidth=0;switch(textRotation){case 0:spaceWidth=wordBounds[count+1].Left-(wordBounds[count-1].Left+wordBounds[count-1].Width);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(wordBounds[count-1].Left+wordBounds[count-1].Width,minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count-1].Left+wordBounds[count-1].Width,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Left+wordBounds[count-1].Width),pageHeight-minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-(wordBounds[count-1].Left+wordBounds[count-1].Width),spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}break;case 90:spaceWidth=wordBounds[count+1].Top-(wordBounds[count-1].Top+wordBounds[count-1].Height);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(minLeft,wordBounds[count-1].Top+wordBounds[count-1].Height,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Top+wordBounds[count-1].Height),minLeft,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-(wordBounds[count-1].Top+wordBounds[count-1].Height),maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count-1].Top+wordBounds[count-1].Height,pageHeight-minLeft,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}break;case 180:spaceWidth=wordBounds[count-1].Left-(wordBounds[count+1].Left+wordBounds[count+1].Width);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(wordBounds[count+1].Left+wordBounds[count+1].Width,minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count+1].Left+wordBounds[count+1].Width,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-(wordBounds[count+1].Left+wordBounds[count+1].Width),pageHeight-minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-(wordBounds[count+1].Left+wordBounds[count+1].Width),spaceWidth,maxBottom-minTop,wordBounds[count].Text,textRotation);}break;case 270:spaceWidth=wordBounds[count-1].Top-(wordBounds[count+1].Top+wordBounds[count+1].Height);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(minLeft,wordBounds[count+1].Top+wordBounds[count+1].Height,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-(wordBounds[count+1].Top+wordBounds[count+1].Height),minLeft,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-(wordBounds[count+1].Top+wordBounds[count+1].Height),maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count+1].Top+wordBounds[count+1].Height,pageHeight-minLeft,maxRight-minLeft,spaceWidth,wordBounds[count].Text,textRotation);}break;}}else{switch(textRotation){case 90:if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(minLeft,wordBounds[count-1].Top+wordBounds[count-1].Height,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Top+wordBounds[count-1].Height),minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-(wordBounds[count-1].Top+wordBounds[count-1].Height),maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count-1].Top+wordBounds[count-1].Height,pageHeight-minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}break;case 270:if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(minLeft,wordBounds[count-1].Top-wordBounds[count].Height,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Top-wordBounds[count].Height),minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-minLeft,pageHeight-wordBounds[count-1].Top-wordBounds[count].Height,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(wordBounds[count-1].Top-wordBounds[count].Height,pageHeight-minLeft,maxRight-minLeft,wordBounds[count].Height,wordBounds[count].Text,textRotation);}break;case 180:if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(wordBounds[count-1].Left-wordBounds[count].Width,minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count-1].Left-wordBounds[count].Width,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Left-wordBounds[count].Width),pageHeight-minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-(wordBounds[count-1].Left-wordBounds[count].Width),wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}break;case 0:if(pageRotation==0||pageRotation==4){newWordBounds=new RectAngle(wordBounds[count-1].Left+wordBounds[count-1].Width,minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==1){newWordBounds=new RectAngle(pageWidth-minTop,wordBounds[count-1].Left+wordBounds[count-1].Width,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==2){newWordBounds=new RectAngle(pageWidth-(wordBounds[count-1].Left+wordBounds[count-1].Width),pageHeight-minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}else if(pageRotation==3){newWordBounds=new RectAngle(minTop,pageHeight-(wordBounds[count-1].Left+wordBounds[count-1].Width),wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,textRotation);}break;}}}else if(isRTLText&&count+1!=wordBounds.length){var spaceWidth=wordBounds[count-1].Left-(wordBounds[count+1].Left+wordBounds[count+1].Width);if(maximumSpaceBetweenWords<spaceWidth||spaceWidth<0){spaceWidth=0;}newWordBounds=new RectAngle(wordBounds[count+1].Left+wordBounds[count+1].Width,minTop,spaceWidth,maxBottom-minTop,wordBounds[count].Text,wordBounds[count].Rotation);}else if(isRTLText){newWordBounds=new RectAngle(wordBounds[count-1].Left-wordBounds[count].Width,minTop,wordBounds[count].Width,maxBottom-minTop,wordBounds[count].Text,wordBounds[count].Rotation);}}if(!hasInBetweenRotation){this.TextBounds.push(newWordBounds);this.TextContent.push(wordBounds[count].Text);}}if(hasInBetweenRotation){this.TextBounds.push(newWordBounds);this.TextContent.push(inBetweenRotatedText);}};Processor.prototype.checkIsRtlText=function(text){// eslint-disable-next-line max-len
var ltrChars="A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF"+"\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF";var rtlChars="\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC";// eslint-disable-next-line
var rtlDirCheck=new RegExp('^[^'+ltrChars+']*['+rtlChars+']');return rtlDirCheck.test(text);};Processor.prototype.getPageRender=function(n,w,h,isTextNeed){if(n===void 0){n=0;}var pageRenderPtr=this.getRender(n,w,h,isTextNeed);var pageRenderData=[];pageRenderData=PDFiumModule.HEAPU8.slice(pageRenderPtr,pageRenderPtr+w*h*4);PDFiumModule.asm.free(pageRenderPtr);return pageRenderData;};Processor.prototype.render=function(n,message,zoomFactor,isTextNeed,printScaleFactor,printDevicePixelRatio,textDetailsId){if(n===void 0){n=0;}var _a=this.getPageSize(n),w=_a[0],h=_a[1];if(message==='thumbnail'){var newWidth_1=Math.round(99.7*1.5);var newHeight_1=Math.round(141*1.5);var data=this.getPageRender(n,newWidth_1,newHeight_1,false);return{value:data,width:newWidth_1,height:newHeight_1,pageIndex:n,message:'renderThumbnail'};}else if(message==='print'){//An A0 piece of paper measures 33.1 × 46.8 inches, with 46.8 inches being the greater dimension. The pixel value of 46.8 inches is 4493px. If the document size is too large, we may not be able to display the image. Therefore, we should consider the maximum size of A0 paper if the page size is greater than 4493 pixels.
var maxPageSize=4493;var scaleFactor=1.5;var whichIsBigger=w>h?'Width':'Height';var maxWidth=w;var maxHeight=h;if(whichIsBigger==='Width'){maxWidth=w>maxPageSize?maxPageSize:w;if(maxWidth===maxPageSize){maxHeight=h/(w/maxPageSize);}}else{maxHeight=h>maxPageSize?maxPageSize:h;if(maxHeight===maxPageSize){maxWidth=w/(h/maxPageSize);}}var newWidth_2=Math.round(maxWidth*printScaleFactor*scaleFactor);var newHeight_2=Math.round(maxHeight*printScaleFactor*scaleFactor);var data=this.getPageRender(n,newWidth_2,newHeight_2,false);return{value:data,width:newWidth_2,height:newHeight_2,pageIndex:n,pageWidth:w,pageHeight:h,message:'printImage',printDevicePixelRatio:printDevicePixelRatio};}else{var newWidth=Math.round(w*1.5*zoomFactor);var newHeight=Math.round(h*1.5*zoomFactor);while(newWidth*newHeight*4*2>=2147483648){zoomFactor=zoomFactor-0.1;newWidth=Math.round(Math.round(w*1.3333)*zoomFactor);newHeight=Math.round(Math.round(h*1.3333)*zoomFactor);}var data=this.getPageRender(n,newWidth,newHeight,isTextNeed);return{value:data,width:newWidth,height:newHeight,pageIndex:n,message:'imageRendered',textBounds:this.TextBounds,textContent:this.TextContent,rotation:this.Rotation,pageText:this.PageText,characterBounds:this.CharacterBounds,zoomFactor:zoomFactor,isTextNeed:isTextNeed,textDetailsId:textDetailsId};}};Processor.prototype.renderTileImage=function(n,tileX,tileY,xCount,yCount,zoomFactor,isTextNeed,textDetailsId){if(n===void 0){n=0;}var _a=this.getPageSize(n),w=_a[0],h=_a[1];var newWidth=Math.round(w*1.5*zoomFactor);var newHeight=Math.round(h*1.5*zoomFactor);var w1=Math.round(newWidth/xCount);var h1=Math.round(newHeight/yCount);var flag=FPDF.REVERSE_BYTE_ORDER;var heap=PDFiumModule.asm.malloc(w1*h1*4);PDFiumModule.HEAPU8.fill(0,heap,heap+w1*h1*4);var bmap=FPDF.Bitmap_CreateEx(w1,h1,4,heap,w1*4);var page=FPDF.LoadPage(this.wasmData.wasm,n);FPDF.Bitmap_FillRect(bmap,0,0,w1,h1,0xFFFFFFFF);FPDF.RenderPageBitmap(bmap,page,-tileX*w1,-tileY*h1,newWidth,newHeight,0,flag);FPDF.Bitmap_Destroy(bmap);this.textExtraction(page,n,isTextNeed);FPDF.ClosePage(page);var pageRenderPtr=heap;var data=[];data=PDFiumModule.HEAPU8.slice(pageRenderPtr,pageRenderPtr+w1*h1*4);PDFiumModule.asm.free(pageRenderPtr);if(tileX===0&&tileY===0){return{value:data,w:w1,h:h1,noTileX:xCount,noTileY:yCount,x:tileX,y:tileY,pageIndex:n,message:'renderTileImage',textBounds:this.TextBounds,textContent:this.TextContent,rotation:this.Rotation,pageText:this.PageText,characterBounds:this.CharacterBounds,textDetailsId:textDetailsId,isTextNeed:isTextNeed};}else{return{value:data,w:w1,h:h1,noTileX:xCount,noTileY:yCount,x:tileX,y:tileY,pageIndex:n,message:'renderTileImage',textDetailsId:textDetailsId,isTextNeed:isTextNeed};}};Processor.prototype.getLastError=function(){var lastError=FPDF.GetLastError();switch(lastError){case FPDF.LAST_ERROR.SUCCESS:return"success";case FPDF.LAST_ERROR.UNKNOWN:return"unknown error";case FPDF.LAST_ERROR.FILE:return"file not found or could not be opened";case FPDF.LAST_ERROR.FORMAT:return"file not in PDF format or corrupted";case FPDF.LAST_ERROR.PASSWORD:return"password required or incorrect password";case FPDF.LAST_ERROR.SECURITY:return"unsupported security scheme";case FPDF.LAST_ERROR.PAGE:return"page not found or content error";default:return"unknown error";}};return Processor;}();var SizeF=/** @class */function(){function SizeF(Width,Height){this.Width=Width;this.Height=Height;this.IsEmpty=Width==0?Height==0?true:false:false;}return SizeF;}();var Doc=/** @class */function(){function Doc(wasmData){this.pages=[];this.pageSizes={};this.processor=new Processor(wasmData);}Doc.prototype.setPages=function(pagesCount){this.pages=Array(pagesCount).fill(null);};Doc.prototype.createAllPages=function(){for(var i=0;i<this.pages.length;i++){this.pages[i]=new Page(i,this.processor);var currentPageSize=this.processor.getPageSize(i);this.pageSizes[i]=new SizeF(currentPageSize[0],currentPageSize[1]);}};Doc.prototype.getPage=function(index){var page=this.pages[index];if(!page){page=new Page(index);this.pages[index]=page;}return page;};return Doc;}();}/**
 * export types
 */ /**
 * PdfViewer component exported items
 */ /**
 * export PDF viewer modules
 */var __awaiter=undefined&&undefined.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator=undefined&&undefined.__generator||function(thisArg,body){var _={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};var Viewer={elementRef:null,dotnetRef:null,initialize:function initialize(dataId,element,options,dotnetRef,culture,isWebAssembly){if(culture===void 0){culture=null;}sf.base.enableBlazorMode();var pdfViewer=new PdfViewer(dataId,element,dotnetRef,options,isWebAssembly);AjaxHandler.prototype.send=this.viewerRequestHandler.bind(this);pdfViewer.preRender();pdfViewer.cultureValue=culture;pdfViewer.render();if(element){if(element.className==="e-blazor-hidden e-pv-mobile-view"){element.className="e-control e-pdfviewer e-lib e-pv-mobile-view";}else{element.className="e-control e-pdfviewer e-lib";}}this.elementRef=element;this.dotnetRef=dotnetRef;},updateOptions:function updateOptions(dataId,options,isLoad){var instance=window.sfBlazor.getCompInstance(dataId);if(options.selectedItems.annotations.length===0){if(instance.blazorAction&PdfViewerBlazorAction.AnnotationAdding){delete options.selectedItems;}}if(!sf.base.isNullOrUndefined(instance)&&!sf.base.isNullOrUndefined(instance.element)){instance.setOptions(options,instance.options,isLoad);instance.options=options;}instance.blazorAction&=~PdfViewerBlazorAction.AnnotationAdding;},updateCustomstamp:function updateCustomstamp(dataId,options){var instance=window.sfBlazor.getCompInstance(dataId);if(options.customStamps){instance.renderCustomerStamp(options.customStamps[0]);}},invokeMethod:function invokeMethod(dataId,methodName,moduleName,args){return __awaiter(this,void 0,void 0,function(){var returnValue,instance,comp,e_1;return __generator(this,function(_a){switch(_a.label){case 0:_a.trys.push([0,4,,5]);returnValue=null;instance=window.sfBlazor.getCompInstance(dataId);comp=instance;if(!comp)return[3/*break*/,3];if(moduleName===null){returnValue=comp[methodName].apply(comp,args);}else{comp=instance;comp=this.getChildModule(comp,moduleName);returnValue=comp[methodName].apply(comp,args);}if(returnValue&&_typeof(returnValue)==="object"&&!(returnValue instanceof Promise)){returnValue=this.cleanStringify(returnValue);}if(!(methodName=='saveAsBlob'&&returnValue instanceof Promise))return[3/*break*/,2];return[4/*yield*/,this.promiseHandler(returnValue)];case 1:returnValue=_a.sent();_a.label=2;case 2:return[2/*return*/,returnValue];case 3:return[3/*break*/,5];case 4:e_1=_a.sent();return[2/*return*/,this.throwError(e_1,comp)];case 5:return[2/*return*/,{}];}});});},promiseHandler:function promiseHandler(returnValue){return __awaiter(this,void 0,void 0,function(){var object;return __generator(this,function(_a){switch(_a.label){case 0:object=this;if(!(returnValue instanceof Promise))return[3/*break*/,2];return[4/*yield*/,returnValue.then(function(data){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return[4/*yield*/,object.docEditFileReader(data).then(function(dataUrl){returnValue=JSON.stringify({"data":dataUrl.substr(dataUrl.indexOf(',')+1)});})];case 1:_a.sent();return[2/*return*/];}});});})];case 1:_a.sent();_a.label=2;case 2:return[2/*return*/,returnValue];}});});},docEditFileReader:function docEditFileReader(file){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2/*return*/,new Promise(function(resolve,reject){var fileReader=new FileReader();fileReader.onload=function(){resolve(fileReader.result);};fileReader.readAsDataURL(file);})];});});},getMethodCall:function getMethodCall(dataId,moduleName,methodName){try{var instance=window.sfBlazor.getCompInstance(dataId);if(!sf.base.isNullOrUndefined(instance)&&!sf.base.isNullOrUndefined(instance.element)){var comp=instance;}if(comp){if(moduleName==null||moduleName=="null"){return comp[methodName];}else{comp=this.getChildModule(comp,moduleName);return comp[methodName];}}}catch(e){this.throwError(e,comp);}},setMethodCall:function setMethodCall(dataId,moduleName,methodName,args){try{var instance=window.sfBlazor.getCompInstance(dataId);if(!sf.base.isNullOrUndefined(instance)&&!sf.base.isNullOrUndefined(instance.element)){var comp=instance;}if(comp){comp=this.getChildModule(comp,moduleName);comp[methodName]=args[0];}}catch(e){this.throwError(e,comp);}},cleanStringify:function cleanStringify(object){try{return JSON.stringify(object);}catch(e){console.log(e);return'';}},getChildModule:function getChildModule(comp,moduleName){try{var path=moduleName.split(',');for(var i=0;i<path.length;i++){comp=comp[path[i]];}return comp;}catch(e){}return comp;},viewerRequestHandler:function viewerRequestHandler(jsonObject){return __awaiter(this,void 0,void 0,function(){var result,element,instance,_a;return __generator(this,function(_b){switch(_b.label){case 0:element=document.getElementById(jsonObject.elementId);instance=window.sfBlazor.getCompInstance(jsonObject.elementId);this.dotnetRef=instance._dotnetInstance;this.elementRef=element;if(!instance)return[3/*break*/,31];_a=jsonObject.action;switch(_a){case'Load':return[3/*break*/,1];case'Unload':return[3/*break*/,3];case"RenderPdfPages":return[3/*break*/,5];case"VirtualLoad":return[3/*break*/,7];case"Download":return[3/*break*/,9];case"PrintImages":return[3/*break*/,11];case"Search":return[3/*break*/,13];case"Bookmarks":return[3/*break*/,15];case"RenderThumbnailImages":return[3/*break*/,17];case"RenderAnnotationComments":return[3/*break*/,19];case"RenderPdfTexts":return[3/*break*/,21];case"ImportAnnotations":return[3/*break*/,23];case"ExportAnnotations":return[3/*break*/,25];case"ExportFormFields":return[3/*break*/,27];case"ImportFormFields":return[3/*break*/,29];}return[3/*break*/,31];case 1:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 2:result=_b.sent();instance.viewerBase.loadRequestHandler.successHandler(result);return[3/*break*/,31];case 3:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 4:result=_b.sent();instance.viewerBase.unloadRequestHandler.successHandler(result);return[3/*break*/,31];case 5:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 6:result=_b.sent();instance.viewerBase.pageRequestHandler.successHandler(result);return[3/*break*/,31];case 7:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 8:result=_b.sent();instance.viewerBase.virtualLoadRequestHandler.successHandler(result);return[3/*break*/,31];case 9:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 10:result=_b.sent();instance.viewerBase.dowonloadRequestHandler.successHandler(result);return[3/*break*/,31];case 11:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 12:result=_b.sent();instance.printModule.printRequestHandler.successHandler(result);return[3/*break*/,31];case 13:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 14:result=_b.sent();instance.textSearchModule.searchRequestHandler.successHandler(result);return[3/*break*/,31];case 15:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 16:result=_b.sent();instance.bookmarkViewModule.bookmarkRequestHandler.successHandler(result);return[3/*break*/,31];case 17:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 18:result=_b.sent();instance.thumbnailViewModule.thumbnailRequestHandler.successHandler(result);return[3/*break*/,31];case 19:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 20:result=_b.sent();instance.annotationModule.stickyNotesAnnotationModule.commentsRequestHandler.successHandler(result);return[3/*break*/,31];case 21:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 22:result=_b.sent();instance.textSearchModule.searchRequestHandler.successHandler(result);return[3/*break*/,31];case 23:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 24:result=_b.sent();instance.viewerBase.importAnnotationRequestHandler.successHandler(result);return[3/*break*/,31];case 25:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 26:result=_b.sent();instance.viewerBase.exportAnnotationRequestHandler.successHandler(result);return[3/*break*/,31];case 27:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 28:result=_b.sent();instance.viewerBase.exportFormFieldsRequestHandler.successHandler(result);return[3/*break*/,31];case 29:return[4/*yield*/,this.dotnetRef.invokeMethodAsync('GetPDFInfo',jsonObject)];case 30:result=_b.sent();instance.viewerBase.importFormFieldsRequestHandler.successHandler(result);return[3/*break*/,31];case 31:return[2/*return*/];}});});}};return Viewer;}();

/***/ }),

/***/ "./modules/sf-slider.js":
/*!******************************!*\
  !*** ./modules/sf-slider.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.Slider = function () {
  'use strict';

  var SLIDERTRACK = 'e-slider-track';
  var SLIDERINPUT = 'e-slider-input';
  var HANDLEFOCUSED = 'e-handle-focused';
  var HANDLEACTIVE = 'e-handle-active';
  var SLIDERTABHANDLE = 'e-tab-handle';
  var HORIZONTAL = 'Horizontal';
  var RANGE = 'e-range';
  var DEFAULTSLIDER = 'Default';
  var MINRANGESLIDER = 'MinRange';
  var RANGESLIDER = 'Range';
  var TICK = 'e-tick';
  var LARGE = 'e-large';
  var TICKVALUE = 'e-tick-value';
  var FIRSTBUTTON = 'e-first-button';
  var SECONDBUTTON = 'e-second-button';
  var SLIDERLASTTICK = 'e-last-tick';
  var VISIBILITY = 'visibility';
  var SfSlider = /** @class */function () {
    // tslint:disable-next-line:no-any
    function SfSlider(dataId, element, dotnetRef, props) {
      this.activeHandle = 1;
      this.initialRendering = true;
      this.isClicked = false;
      this.isSliderMove = false;
      this.isDragRange = false;
      this.isTabPressed = false;
      this.isKeyPressed = false;
      this.transition = {
        handle: 'left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), ' + 'top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)',
        rangeBar: 'all .4s cubic-bezier(.25, .8, .25, 1)',
        scaleTransform: 'transform .4s cubic-bezier(.25, .8, .25, 1)'
      };
      this.isDestroyed = false;
      this.element = element;
      this.dataId = dataId;
      window.sfBlazor.setCompInstance(this);
      this.dotNetRef = dotnetRef;
      this.options = props;
      this.initialRendering = true;
      if (this.options.Value === null) {
        this.options.Value = this.options.Type !== RANGESLIDER ? this.options.Min : [this.options.Min, this.options.Max];
      }
      if (this.options.CustomValues) {
        this.options.Min = 0;
        this.options.Max = props.CustomValues.length - 1;
      }
    }
    SfSlider.prototype.initialize = function () {
      this.sliderContainer = this.element.parentElement;
      this.sliderTrack = this.element.querySelector('.' + SLIDERTRACK);
      this.hiddenInput = this.element.parentElement.querySelector('.' + SLIDERINPUT);
      this.setElementWidth(this.options.Width);
      if (this.element.getBoundingClientRect().height === 0 && this.options.Orientation === 'Vertical') {
        this.element.style.height = this.element.parentElement.getBoundingClientRect().height + 'px';
      }
      this.setHandler();
      this.setZindex();
      if (!sf.base.isNullOrUndefined(this.options.Limits)) {
        this.setLimitBarPosition();
      }
      this.isMaterial = this.getTheme(this.sliderContainer) === 'material';
      this.isMaterial3 = this.getTheme(this.sliderContainer) === 'Material3';
      if (sf.base.isNullOrUndefined(this.materialHandle) && (this.isMaterial || this.isMaterial3) && this.options.Tooltip !== null && this.options.Type !== RANGESLIDER) {
        this.materialHandle = document.createElement('div');
        this.materialHandle.className = 'e-handle e-material-handle';
        var handleCheck = this.element.querySelector('.e-material-handle');
        if (!sf.base.isNullOrUndefined(handleCheck)) {
          this.element.removeChild(handleCheck);
        }
        this.element.appendChild(this.materialHandle);
      }
      this.setValue(false);
      this.updateColorRangeBarPos();
      if (this.initialRendering && this.options.Enabled && !this.options.ReadOnly) {
        this.wireEvents();
      }
      return this.getTheme(this.sliderContainer);
    };
    SfSlider.prototype.rangeBarMousedown = function (event) {
      var _a, _b;
      if (event.type === 'mousedown') {
        event.preventDefault();
      }
      this.changedEventValue = this.options.Value;
      if (this.options.Type === 'Range' && event.target === this.rangeBar) {
        var xPostion = void 0;
        var yPostion = void 0;
        if (event.type === 'mousedown') {
          _a = [event.clientX, event.clientY], xPostion = _a[0], yPostion = _a[1];
        } else if (event.type === 'touchstart') {
          _b = [event.changedTouches[0].clientX, event.changedTouches[0].clientY], xPostion = _b[0], yPostion = _b[1];
        }
        if (this.options.Orientation === 'Horizontal') {
          this.firstPartRemain = xPostion - this.rangeBar.getBoundingClientRect().left;
          this.secondPartRemain = this.rangeBar.getBoundingClientRect().right - xPostion;
        } else {
          this.firstPartRemain = yPostion - this.rangeBar.getBoundingClientRect().top;
          this.secondPartRemain = this.rangeBar.getBoundingClientRect().bottom - yPostion;
        }
        this.minDiff = this.handleVal2 - this.handleVal1;
        var focusedElement = this.element.querySelector('.' + SLIDERTABHANDLE);
        if (focusedElement) {
          focusedElement.classList.remove(SLIDERTABHANDLE);
        }
        sf.base.EventHandler.add(document, 'mousemove touchmove', this.dragRangeBarMove, this);
        sf.base.EventHandler.add(document, 'mouseup touchend', this.dragRangeBarUp, this);
      }
    };
    SfSlider.prototype.dragRangeBarUp = function (event) {
      this.triggerChangeEvent(this.changedEventValue, event, true);
      sf.base.EventHandler.remove(document, 'mousemove touchmove', this.dragRangeBarMove);
      sf.base.EventHandler.remove(document, 'mouseup touchend', this.dragRangeBarUp);
      this.isDragRange = true;
    };
    SfSlider.prototype.triggerChangeEvent = function (changeEventValue, event, isRangeBar) {
      if (this.options.Events !== null) {
        var isTrigger = event.type === 'touchend' || event.currentTarget === document;
        // tslint:disable-next-line:no-any
        if (this.options.Events.onChange.hasDelegate && isTrigger && !this.options.IsImmediateValue && this.isValueChange(changeEventValue)) {
          this.invokeEvent(changeEventValue, false);
        }
        if (isTrigger || isRangeBar) {
          // tslint:disable-next-line:no-any
          if (this.options.Events.valueChange.hasDelegate && this.isValueChange(changeEventValue)) {
            this.invokeEvent(changeEventValue, true);
            this.changedEventValue = this.options.Value;
          }
        }
      }
    };
    SfSlider.prototype.invokeEvent = function (changeEventValue, isChange) {
      this.dotNetRef.invokeMethodAsync('TriggerEvent', {
        PreviousValue: changeEventValue,
        Value: this.options.Value,
        isValueChanged: isChange
      });
    };
    SfSlider.prototype.handleValueAdjust = function (handleValue, assignValue, handleNumber) {
      if (handleNumber === 1) {
        this.handleVal1 = assignValue;
        this.handleVal2 = this.handleVal1 + this.minDiff;
      } else if (handleNumber === 2) {
        this.handleVal2 = assignValue;
        this.handleVal1 = this.handleVal2 - this.minDiff;
      }
      this.handlePos1 = this.checkHandlePosition(this.handleVal1);
      this.handlePos2 = this.checkHandlePosition(this.handleVal2);
    };
    SfSlider.prototype.getLimitValueAndPosition = function (currentValue, minValue, maxValue, limitBar) {
      if (sf.base.isNullOrUndefined(minValue)) {
        minValue = this.options.Min;
        if (sf.base.isNullOrUndefined(currentValue) && limitBar) {
          currentValue = minValue;
        }
      }
      if (sf.base.isNullOrUndefined(maxValue)) {
        maxValue = this.options.Max;
        if (sf.base.isNullOrUndefined(currentValue) && limitBar) {
          currentValue = maxValue;
        }
      }
      if (currentValue < minValue) {
        currentValue = minValue;
      }
      if (currentValue > maxValue) {
        currentValue = maxValue;
      }
      return [currentValue, this.checkHandlePosition(currentValue)];
    };
    SfSlider.prototype.dragRangeBarMove = function (event) {
      var _a, _b;
      if (event.type !== 'touchmove') {
        event.preventDefault();
      }
      this.isDragRange = true;
      var pos;
      this.rangeBar.style.transition = 'none';
      this.firstHandle.style.transition = 'none';
      this.secondHandle.style.transition = 'none';
      var xPostion;
      var yPostion;
      if (event.type === 'mousemove') {
        _a = [event.clientX, event.clientY], xPostion = _a[0], yPostion = _a[1];
      } else {
        _b = [event.changedTouches[0].clientX, event.changedTouches[0].clientY], xPostion = _b[0], yPostion = _b[1];
      }
      if (event.type === 'mousemove') {
        pos = {
          x: event.clientX,
          y: event.clientY
        };
      } else if (event.type === 'touchmove' || event.type === 'touchstart') {
        pos = {
          x: event.changedTouches[0].clientX,
          y: event.changedTouches[0].clientY
        };
      }
      // tslint:disable-next-line:no-any
      var limits = this.options.Limits;
      if (sf.base.isNullOrUndefined(limits) || !(limits.enabled && limits.startHandleFixed) && !(limits.enabled && limits.endHandleFixed)) {
        if (!this.options.EnableRtl) {
          pos = {
            x: xPostion - this.firstPartRemain,
            y: yPostion + this.secondPartRemain
          };
        } else {
          pos = {
            x: xPostion + this.secondPartRemain,
            y: yPostion + this.secondPartRemain
          };
        }
        if (this.options.Min > this.options.Max) {
          this.handlePos2 = this.xyToPosition(pos);
          this.handleVal2 = this.positionToValue(this.handlePos2);
        } else {
          this.handlePos1 = this.xyToPosition(pos);
          this.handleVal1 = this.positionToValue(this.handlePos1);
        }
        if (!this.options.EnableRtl) {
          pos = {
            x: xPostion + this.secondPartRemain,
            y: yPostion - this.firstPartRemain
          };
        } else {
          pos = {
            x: xPostion - this.firstPartRemain,
            y: yPostion - this.firstPartRemain
          };
        }
        if (this.options.Min > this.options.Max) {
          this.handlePos1 = this.xyToPosition(pos);
          this.handleVal1 = this.positionToValue(this.handlePos1);
        } else {
          this.handlePos2 = this.xyToPosition(pos);
          this.handleVal2 = this.positionToValue(this.handlePos2);
        }
        if (!sf.base.isNullOrUndefined(this.options.Limits) && this.options.Limits.enabled) {
          var value = this.getLimitValueAndPosition(this.handleVal1, limits.minStart, limits.minEnd);
          this.handleVal1 = value[0];
          this.handlePos1 = value[1];
          if (this.handleVal1 === limits.minEnd) {
            this.handleValueAdjust(this.handleVal1, limits.minEnd, 1);
          }
          if (this.handleVal1 === limits.minStart) {
            this.handleValueAdjust(this.handleVal1, limits.minStart, 1);
          }
          value = this.getLimitValueAndPosition(this.handleVal2, limits.maxStart, limits.maxEnd);
          this.handleVal2 = value[0];
          this.handlePos2 = value[1];
          if (this.handleVal2 === limits.maxStart) {
            this.handleValueAdjust(this.handleVal2, limits.maxStart, 2);
          }
          if (this.handleVal2 === limits.maxEnd) {
            this.handleValueAdjust(this.handleVal2, limits.maxEnd, 2);
          }
        }
        if (this.handleVal2 === (this.options.Min > this.options.Max ? this.options.Min : this.options.Max)) {
          this.handleValueAdjust(this.handleVal2, this.options.Min > this.options.Max ? this.options.Min : this.options.Max, 2);
        }
        if (this.handleVal1 === (this.options.Min > this.options.Max ? this.options.Max : this.options.Min)) {
          this.handleValueAdjust(this.handleVal1, this.options.Min > this.options.Max ? this.options.Max : this.options.Min, 1);
        }
      }
      var previousVal = this.options.IsImmediateValue ? this.previousHandleVal : this.changedEventValue ? this.changedEventValue : this.previousHandleVal;
      this.setHandlePosition(event);
      this.updateValue();
      if (this.options.Type !== DEFAULTSLIDER) {
        this.rangeBar.style.transition = this.transition.rangeBar;
        this.setRangeBarPosition();
      }
      // tslint:disable-next-line:no-any
      if (this.options.Events !== null && this.options.Events.onChange.hasDelegate && this.isValueChange(previousVal) && this.options.IsImmediateValue) {
        this.invokeEvent(previousVal, false);
      }
    };
    SfSlider.prototype.wireEvents = function () {
      sf.base.EventHandler.add(this.element, 'click', this.clickHandler, this);
      sf.base.EventHandler.add(this.element, 'keydown', this.keyDown, this);
      sf.base.EventHandler.add(this.element, 'keyup', this.keyUp, this);
      sf.base.EventHandler.add(this.element, 'focusout', this.focusOut, this);
      if (this.options.Type === 'Range') {
        sf.base.EventHandler.add(this.rangeBar, 'mousedown touchstart', this.rangeBarMousedown, this);
      }
      this.onResize = this.reposition.bind(this);
      window.addEventListener('resize', this.onResize);
      this.wireFirstHandleEventArgs();
      if (this.options.Type === 'Range') {
        this.wireSecondHandleEventArgs();
      }
    };
    SfSlider.prototype.wireFirstHandleEventArgs = function () {
      sf.base.EventHandler.add(this.firstHandle, 'mousedown touchstart', this.handleFocus, this);
      sf.base.EventHandler.add(this.firstHandle, 'mouseup touchend', this.sliderBarUp, this);
    };
    SfSlider.prototype.wireSecondHandleEventArgs = function () {
      sf.base.EventHandler.add(this.secondHandle, 'mousedown touchstart', this.handleFocus, this);
      sf.base.EventHandler.add(this.secondHandle, 'mouseup touchend', this.sliderBarUp, this);
    };
    SfSlider.prototype.unWireEvents = function () {
      sf.base.EventHandler.remove(this.element, 'click', this.clickHandler);
      sf.base.EventHandler.remove(this.element, 'keydown', this.keyDown);
      sf.base.EventHandler.remove(this.element, 'keyup', this.keyUp);
      sf.base.EventHandler.remove(this.element, 'focusout', this.focusOut);
      if (this.options.Type === 'Range') {
        sf.base.EventHandler.remove(this.rangeBar, 'mousedown touchstart', this.rangeBarMousedown);
      }
      window.removeEventListener('resize', this.onResize);
      this.unWireFirstHandleEventArgs();
      if (this.options.Type === 'Range') {
        this.unWireSecondHandleEventArgs();
      }
    };
    SfSlider.prototype.unWireFirstHandleEventArgs = function () {
      sf.base.EventHandler.remove(this.firstHandle, 'mousedown touchstart', this.handleFocus);
      sf.base.EventHandler.remove(this.firstHandle, 'mouseup touchend', this.sliderBarUp);
    };
    SfSlider.prototype.unWireSecondHandleEventArgs = function () {
      sf.base.EventHandler.remove(this.secondHandle, 'mousedown touchstart', this.handleFocus);
      sf.base.EventHandler.remove(this.secondHandle, 'mouseup touchend', this.sliderBarUp);
    };
    SfSlider.prototype.isValueChange = function (changeEventValue) {
      var isChange = false;
      if (this.options.Type === RANGESLIDER) {
        isChange = changeEventValue[0] !== this.options.Value[0] || changeEventValue[1] !== this.options.Value[1];
      } else {
        isChange = changeEventValue !== this.options.Value;
      }
      return isChange;
    };
    SfSlider.prototype.focusOut = function () {
      var _this = this;
      setTimeout(function () {
        if (!_this.isDestroyed) {
          if (_this.options.Tooltip !== null && _this.options.Tooltip.isVisible) {
            if (_this.options.Type !== RANGESLIDER && !sf.base.isNullOrUndefined(_this.materialHandle)) {
              _this.materialHandle.style.transform = 'scale(1)';
            }
            _this.dotNetRef.invokeMethodAsync('CloseTooltip');
          }
          if (_this.isTabPressed) {
            _this.handleFocusOut();
          }
        }
      }, 10);
    };
    SfSlider.prototype.reposition = function () {
      this.initialRendering = false;
      this.initialize();
    };
    SfSlider.prototype.handleValueUpdate = function () {
      var hVal;
      if (this.options.Type === RANGESLIDER) {
        hVal = this.activeHandle === 1 ? this.handleVal1 : this.handleVal2;
      } else {
        hVal = this.handleVal1;
      }
      return hVal;
    };
    SfSlider.prototype.keyDown = function (event) {
      switch (event.keyCode) {
        case 37:
        case 38:
        case 39:
        case 40:
        case 33:
        case 34:
        case 36:
        case 35:
          event.preventDefault();
          event.stopImmediatePropagation();
          this.buttonClick(event);
          break;
      }
    };
    SfSlider.prototype.buttonClick = function (args) {
      var value;
      var previousValue = this.options.Value;
      var enabledRTL = this.options.EnableRtl && this.options.Orientation === HORIZONTAL;
      var hVal = this.handleValueUpdate();
      if (this.options.Limits) {
        if (this.activeHandle === 1 && this.options.Limits.startHandleFixed || this.activeHandle === 2 && this.options.Limits.endHandleFixed) {
          return;
        }
      }
      if (args.keyCode === 40 || args.keyCode === 37 || args.currentTarget.classList.contains(FIRSTBUTTON)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.options.Step.toString()), true) : value = this.add(hVal, parseFloat(this.options.Step.toString()), false);
      } else if (args.keyCode === 38 || args.keyCode === 39 || args.currentTarget.classList.contains(SECONDBUTTON)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.options.Step.toString()), false) : value = this.add(hVal, parseFloat(this.options.Step.toString()), true);
      } else if (args.keyCode === 33 || args.currentTarget.classList.contains(FIRSTBUTTON)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.options.Ticks.largeStep.toString()), false) : value = this.add(hVal, parseFloat(this.options.Ticks.largeStep.toString()), true);
      } else if (args.keyCode === 34 || args.currentTarget.classList.contains(SECONDBUTTON)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.options.Ticks.largeStep.toString()), true) : value = this.add(hVal, parseFloat(this.options.Ticks.largeStep.toString()), false);
      } else if (args.keyCode === 36) {
        value = parseFloat(this.options.Min.toString());
      } else if (args.keyCode === 35) {
        value = parseFloat(this.options.Max.toString());
      }
      this.options.Value = this.options.Type !== RANGESLIDER ? value : this.activeHandle === 1 ? [value, this.options.Value[1]] : [this.options.Value[0], value];
      if (this.options.Type === RANGESLIDER) {
        if (this.options.Value[0] > this.options.Value[1] && this.activeHandle === 1) {
          this.options.Value[0] = this.options.Value[1];
        } else if (this.options.Value[1] < this.options.Value[0]) {
          this.options.Value[1] = this.options.Value[0];
        }
      }
      if (args.type === "keydown" && this.options.Type !== DEFAULTSLIDER) {
        this.isKeyPressed = true;
      }
      this.setValue();
      this.invokeEvent(previousValue, false);
      this.isKeyPressed = false;
    };
    SfSlider.prototype.handleFocusOut = function () {
      if (this.firstHandle.classList.contains(HANDLEFOCUSED)) {
        this.firstHandle.classList.remove(HANDLEFOCUSED);
      }
      if (this.firstHandle.classList.contains(HANDLEACTIVE)) {
        this.firstHandle.classList.remove(HANDLEACTIVE);
      }
      if (this.firstHandle.classList.contains(SLIDERTABHANDLE)) {
        this.firstHandle.classList.remove(SLIDERTABHANDLE);
      }
      if (this.options.Type === 'Range') {
        if (this.secondHandle.classList.contains(HANDLEFOCUSED)) {
          this.secondHandle.classList.remove(HANDLEFOCUSED);
        }
        if (this.secondHandle.classList.contains(HANDLEACTIVE)) {
          this.secondHandle.classList.remove(HANDLEACTIVE);
        }
        if (this.secondHandle.classList.contains(SLIDERTABHANDLE)) {
          this.secondHandle.classList.remove(SLIDERTABHANDLE);
        }
      }
      if (this.isTabPressed) {
        this.isTabPressed = false;
        var focusedElement = sf.base.select('.' + SLIDERTABHANDLE, this.element);
        if (focusedElement) {
          sf.base.removeClass([focusedElement], SLIDERTABHANDLE);
        }
      }
    };
    SfSlider.prototype.keyUp = function (event) {
      var target = event.target;
      if (event.keyCode === 9 && target.classList.contains("e-handle")) {
        this.isTabPressed = true;
        if (!target.classList.contains(SLIDERTABHANDLE)) {
          var sliderTabHandle = sf.base.select('.' + SLIDERTABHANDLE, this.element);
          if (sliderTabHandle) {
            sf.base.removeClass([sliderTabHandle], SLIDERTABHANDLE);
          }
          sf.base.addClass([target], SLIDERTABHANDLE);
          if (this.options.Type === 'Range') {
            var previousEle = target.previousElementSibling;
            if (previousEle && previousEle.classList) {
              this.activeHandle = previousEle.classList.contains("e-handle") ? 2 : 1;
            } else {
              this.activeHandle = 1;
            }
          }
        }
        this.changedEventValue = this.previousHandleVal;
        if (target === this.firstHandle) {
          sf.base.addClass([this.firstHandle], [HANDLEFOCUSED, HANDLEACTIVE, SLIDERTABHANDLE]);
        } else {
          sf.base.addClass([this.secondHandle], [HANDLEFOCUSED, HANDLEACTIVE, SLIDERTABHANDLE]);
        }
      }
    };
    SfSlider.prototype.handleFocus = function (e) {
      this.element.focus();
      this.getHandlePosition(e);
      this.changedEventValue = this.previousHandleVal;
      this.sliderBarClick();
      if (e.currentTarget === this.firstHandle) {
        this.firstHandle.classList.add(HANDLEFOCUSED);
        this.firstHandle.classList.add(HANDLEACTIVE);
        this.firstHandle.classList.add(SLIDERTABHANDLE);
      } else {
        this.secondHandle.classList.add(HANDLEFOCUSED);
        this.secondHandle.classList.add(HANDLEACTIVE);
        this.secondHandle.classList.add(SLIDERTABHANDLE);
      }
      sf.base.EventHandler.add(document, 'mousemove touchmove', this.sliderBarMove, this);
      sf.base.EventHandler.add(document, 'mouseup touchend', this.sliderBarUp, this);
    };
    SfSlider.prototype.sliderBarMove = function (eventargs) {
      if (eventargs.type === 'touchmove' && eventargs.target.parentElement === this.element || eventargs.type === 'mousemove') {
        if (eventargs.type !== 'touchmove') {
          eventargs.preventDefault();
        }
        this.isSliderMove = true;
        var pos = void 0;
        if (eventargs.type === 'mousemove') {
          pos = {
            x: eventargs.clientX,
            y: eventargs.clientY
          };
        } else if (eventargs.type === 'touchmove' || eventargs.type === 'touchstart') {
          pos = {
            x: eventargs.changedTouches[0].clientX,
            y: eventargs.changedTouches[0].clientY
          };
        }
        this.handlePos = this.xyToPosition(pos);
        this.handleVal = this.positionToValue(this.handlePos);
        this.handlePos = this.checkHandlePosition(this.handleVal);
        this.firstHandle.style.transition = this.transition.scaleTransform;
        if (this.options.Type === RANGESLIDER) {
          this.secondHandle.style.transition = this.transition.scaleTransform;
        }
        if (this.rangeBar) {
          this.rangeBar.style.transition = 'none';
        }
        if (this.options.Type === RANGESLIDER) {
          if (this.previousHandleVal.indexOf(this.handleVal) === -1) {
            if (this.activeHandle === 1 && this.handleVal <= this.handleVal2 || this.activeHandle === 2 && this.handleVal >= this.handleVal1) {
              // tslint:disable-next-line:no-any
              if (this.options.Events != null && this.options.Events.onChange.hasDelegate && this.options.IsImmediateValue) {
                this.callChangeEvent(false);
              } else {
                this.sliderBarClick();
              }
            }
          }
        } else if (this.previousHandleVal !== this.handleVal) {
          // tslint:disable-next-line:no-any
          if (this.options.Events !== null && this.options.Events.onChange.hasDelegate && this.options.IsImmediateValue) {
            this.callChangeEvent(false);
          } else {
            this.sliderBarClick();
          }
        }
      }
    };
    SfSlider.prototype.callChangeEvent = function (isValueChanged) {
      var previousVal = this.options.IsImmediateValue ? this.previousHandleVal : this.changedEventValue ? this.changedEventValue : this.previousHandleVal;
      this.sliderBarClick();
      if (this.isValueChange(previousVal)) {
        this.invokeEvent(previousVal, isValueChanged);
      }
    };
    SfSlider.prototype.updateHandleAttributes = function (attributeName, value) {
      if (attributeName === 'aria-valuenow') {
        if (this.options.Type === RANGESLIDER) {
          this.firstHandle.setAttribute(attributeName, value[0]);
          this.secondHandle.setAttribute(attributeName, value[1]);
        } else {
          this.firstHandle.setAttribute(attributeName, value[0]);
        }
      } else {
        this.firstHandle.setAttribute(attributeName, value[0]);
        if (this.options.Type === RANGESLIDER) {
          this.secondHandle.setAttribute(attributeName, value[0]);
        }
      }
    };
    SfSlider.prototype.getTheme = function (container) {
      var theme = window.getComputedStyle(container, ':after').getPropertyValue('content');
      return theme.replace(/['"]+/g, '');
    };
    SfSlider.prototype.setZindex = function () {
      var zIndex = 6;
      if (!sf.base.isNullOrUndefined(this.options.Ticks) && this.options.Ticks.placement !== 'None') {
        this.element.getElementsByTagName('ul')[0].style.zIndex = zIndex + -7 + '';
        this.element.style.zIndex = zIndex + 2 + '';
      }
      if ((this.getTheme(this.sliderContainer) === 'material' || this.getTheme(this.sliderContainer) === 'Material3') && !sf.base.isNullOrUndefined(this.options.Ticks) && this.options.Ticks.placement === 'Both') {
        this.element.style.zIndex = zIndex + 2 + '';
      }
      this.firstHandle.style.zIndex = zIndex + 3 + '';
      if (this.options.Type === 'Range') {
        this.secondHandle.style.zIndex = zIndex + 4 + '';
      }
    };
    SfSlider.prototype.sliderBarUp = function (event) {
      this.handleFocusOut();
      sf.base.EventHandler.remove(document, 'mousemove touchmove', this.sliderBarMove);
      sf.base.EventHandler.remove(document, 'mouseup touchend', this.sliderBarUp);
      this.isSliderMove = false;
      this.transitionNode();
      this.triggerChangeEvent(this.changedEventValue, event, false);
    };
    SfSlider.prototype.transitionNode = function () {
      this.firstHandle.style.transition = 'none';
      if (this.options.Type === RANGESLIDER) {
        this.secondHandle.style.transition = 'none';
      }
      if (this.rangeBar) {
        this.rangeBar.style.transition = 'none';
      }
    };
    SfSlider.prototype.clickHandler = function (eventargs) {
      if (this.isDragRange) {
        this.isDragRange = false;
        return;
      }
      eventargs.preventDefault();
      var changedEventVal = this.changedEventValue;
      this.getHandlePosition(eventargs);
      // tslint:disable-next-line:no-any
      if (this.options.Events != null && this.options.Events.onChange.hasDelegate ||
      // tslint:disable-next-line:no-any 
      this.options.Events != null && this.options.Events.valueChange.hasDelegate) {
        this.isClicked = true;
        this.sliderBarClick();
        // tslint:disable-next-line:no-any
        if (this.options.Events.onChange.hasDelegate) {
          this.callChangeEvent(false);
        }
        changedEventVal = this.isSliderMove ? this.previousHandleVal : this.changedEventValue ? this.changedEventValue : this.previousHandleVal;
        this.triggerChangeEvent(changedEventVal, eventargs, true);
      } else {
        this.sliderBarClick();
      }
      // To get the value changed event in blazor image editor compoennt slider.
      // tslint:disable-next-line:no-any
      if (this.hiddenInput && this.hiddenInput.name && this.hiddenInput.name.includes('imageEditor') && this.changedEventValue !== this.previousHandleVal) {
        var inputEvent = new Event('custom-changed', {
          bubbles: true,
          cancelable: true
        });
        this.hiddenInput.dispatchEvent(inputEvent);
      }
      if (this.isClicked) {
        this.previousHandleVal = this.options.Value;
      }
      this.changedEventValue = this.previousHandleVal;
      this.isClicked = false;
    };
    SfSlider.prototype.updateNewHandleValue = function (handleVal, handlePos, limitValue) {
      if (limitValue[0] || limitValue[1]) {
        if (handleVal < limitValue[0]) {
          handleVal = limitValue[0];
          handlePos = this.checkHandlePosition(handleVal);
        } else if (handleVal > limitValue[1]) {
          handleVal = limitValue[1];
          handlePos = this.checkHandlePosition(handleVal);
        }
      }
      return [handleVal, handlePos];
    };
    SfSlider.prototype.sliderBarClick = function () {
      if (this.options.Type !== RANGESLIDER || this.activeHandle === 1 && this.handleVal1 <= this.handleVal2 || this.activeHandle === 2 && this.handleVal1 <= this.handleVal2) {
        this.firstHandle.style.transition = this.transition.handle;
        if (this.options.Type === RANGESLIDER) {
          this.secondHandle.style.transition = this.transition.handle;
        }
        if (this.rangeBar) {
          this.rangeBar.style.transition = this.transition.rangeBar;
        }
        if (this.options.Limits) {
          var limitValue = void 0;
          if (this.activeHandle === 1 && !this.options.Limits.startHandleFixed) {
            limitValue = [this.options.Limits.minStart, this.options.Limits.minEnd];
            var valAndPos = this.updateNewHandleValue(this.handleVal, this.handlePos, limitValue);
            this.updateHandleValue(this.firstHandle, valAndPos[0], valAndPos[1], true);
            if ((this.isMaterial || this.isMaterial3) && !sf.base.isNullOrUndefined(this.materialHandle) && this.options.Type !== RANGESLIDER) {
              this.updateHandleValue(this.materialHandle, valAndPos[0], valAndPos[1], this.activeHandle === 1);
            }
          } else if (this.activeHandle === 2 && !this.options.Limits.endHandleFixed) {
            limitValue = [this.options.Limits.maxStart, this.options.Limits.maxEnd];
            var valAndPos = this.updateNewHandleValue(this.handleVal, this.handlePos, limitValue);
            this.updateHandleValue(this.secondHandle, valAndPos[0], valAndPos[1]);
          }
        } else {
          var currentActiveHandle = this.activeHandle === 1 ? this.firstHandle : this.secondHandle;
          this.updateHandleValue(currentActiveHandle, this.handleVal, this.handlePos, this.activeHandle === 1);
          if ((this.isMaterial || this.isMaterial3) && !sf.base.isNullOrUndefined(this.materialHandle) && this.options.Type !== RANGESLIDER) {
            this.updateHandleValue(this.materialHandle, this.handleVal, this.handlePos, this.activeHandle === 1);
          }
        }
        if (this.options.Type !== DEFAULTSLIDER) {
          this.setRangeBarPosition();
        }
        this.updateValue();
      }
    };
    SfSlider.prototype.updateHandleValue = function (handle, handleVal, handlePos, isFirstHandle) {
      if (isFirstHandle === void 0) {
        isFirstHandle = false;
      }
      this.applyHandlePosition(handle, handlePos);
      if (isFirstHandle) {
        this.handleVal1 = handleVal;
        this.handlePos1 = handlePos;
      } else {
        this.handleVal2 = handleVal;
        this.handlePos2 = handlePos;
      }
      this.updateAriaValue();
    };
    SfSlider.prototype.updateAriaValue = function () {
      if (this.options.Type !== RANGESLIDER) {
        if (this.options.CustomValues) {
          this.updateHandleAttributes('aria-valuenow', [this.options.CustomValues[this.handleVal1].toString()]);
        } else {
          this.updateHandleAttributes('aria-valuenow', [this.handleVal1.toString()]);
        }
      } else {
        if (this.options.CustomValues) {
          this.updateHandleAttributes('aria-valuenow', [this.options.CustomValues[this.handleVal1].toString(), this.options.CustomValues[this.handleVal2].toString()]);
        } else {
          this.updateHandleAttributes('aria-valuenow', [this.handleVal1.toString(), this.handleVal2.toString()]);
        }
      }
    };
    SfSlider.prototype.positionToValue = function (pos) {
      var val;
      var diff = parseFloat(sf.base.formatUnit(this.options.Max)) - parseFloat(sf.base.formatUnit(this.options.Min));
      if (this.options.Orientation === HORIZONTAL) {
        val = pos / this.element.getBoundingClientRect().width * diff;
      } else {
        val = pos / this.element.getBoundingClientRect().height * diff;
      }
      var total = this.add(val, parseFloat(this.options.Min.toString()), true);
      return total;
    };
    SfSlider.prototype.add = function (a, b, addition) {
      var precision;
      var x = Math.pow(10, precision || 3);
      var val;
      if (addition) {
        val = (Math.round(a * x) + Math.round(b * x)) / x;
      } else {
        val = (Math.round(a * x) - Math.round(b * x)) / x;
      }
      return val;
    };
    SfSlider.prototype.setElementWidth = function (width) {
      if (!sf.base.isNullOrUndefined(width)) {
        if (typeof width === 'number') {
          this.sliderContainer.style.width = sf.base.formatUnit(width);
        } else if (typeof width === 'string') {
          this.sliderContainer.style.width = width.match(/px|%|em/) ? width : sf.base.formatUnit(width);
        }
      }
    };
    SfSlider.prototype.xyToPosition = function (position) {
      var pos;
      var elementAttr = this.element.getBoundingClientRect();
      if (this.options.Min === this.options.Max) {
        return 100;
      }
      if (this.options.Orientation === HORIZONTAL) {
        var left = position.x - elementAttr.left;
        var num = this.element.offsetWidth / 100;
        this.posvalue = left / num;
      } else {
        var top_1 = position.y - elementAttr.top;
        var num = this.element.offsetHeight / 100;
        this.posvalue = 100 - top_1 / num;
      }
      var val = this.stepValueCalculation(this.posvalue);
      if (val < 0) {
        val = 0;
      } else if (val > 100) {
        val = 100;
      }
      if (this.options.EnableRtl && this.options.Orientation === HORIZONTAL) {
        val = 100 - val;
      }
      if (this.options.Orientation === HORIZONTAL) {
        pos = elementAttr.width * (val / 100);
      } else {
        pos = elementAttr.height * (val / 100);
      }
      return pos;
    };
    SfSlider.prototype.stepValueCalculation = function (value) {
      if (this.options.Step === 0) {
        this.options.Step = 1;
      }
      var percentStep = parseFloat(sf.base.formatUnit(this.options.Step)) / ((parseFloat(sf.base.formatUnit(this.options.Max)) - parseFloat(sf.base.formatUnit(this.options.Min))) / 100);
      var remain = value % Math.abs(percentStep);
      if (remain !== 0) {
        if (percentStep / 2 > remain) {
          value -= remain;
        } else {
          value += Math.abs(percentStep) - remain;
        }
      }
      return value;
    };
    SfSlider.prototype.setLimitBarPosition = function () {
      var _a, _b;
      var attrVal;
      this.limitBar1 = this.element.querySelector('.e-limits');
      this.limitBar2 = this.element.querySelector('.e-limit-second');
      if (this.options.Limits.minStart !== null || this.options.Limits.minEnd !== null) {
        if (this.options.Orientation === HORIZONTAL) {
          if (!this.options.EnableRtl) {
            this.limitBar1.style.left = this.checkHandlePosition(this.options.Limits.minStart) + 'px';
          } else {
            this.limitBar1.style.left = this.checkHandlePosition(this.options.Max - this.options.Limits.minEnd) + 'px';
          }
          attrVal = 'width';
        } else {
          this.limitBar1.style.bottom = this.checkHandlePosition(this.options.Min > this.options.Max ? this.options.Limits.minEnd : this.options.Limits.minStart) + 'px';
          attrVal = 'height';
        }
        var minvalues = this.options.Limits.minEnd = this.options.Limits.minEnd != null ? this.options.Limits.minEnd : this.options.Max;
        sf.base.setStyleAttribute(this.limitBar1, (_a = {}, _a[attrVal] = this.options.Min > this.options.Max ? this.checkHandlePosition(this.options.Limits.minStart) - this.checkHandlePosition(minvalues) + 'px' : this.checkHandlePosition(minvalues) - this.checkHandlePosition(this.options.Limits.minStart) + 'px', _a));
      }
      if (this.options.Type === RANGESLIDER) {
        if (this.options.Limits.maxStart !== null || this.options.Limits.maxEnd !== null) {
          if (this.options.Orientation === HORIZONTAL) {
            this.limitBar2.style.left = this.checkHandlePosition(this.options.Limits.maxStart) + 'px';
          } else {
            this.limitBar2.style.bottom = this.checkHandlePosition(this.options.Min > this.options.Max ? this.options.Limits.maxEnd : this.options.Limits.maxStart) + 'px';
          }
          var maxvalues = this.options.Limits.maxEnd = this.options.Limits.maxEnd != null ? this.options.Limits.maxEnd : this.options.Max;
          sf.base.setStyleAttribute(this.limitBar2, (_b = {}, _b[attrVal] = this.options.Min > this.options.Max ? this.checkHandlePosition(this.options.Limits.maxStart) - this.checkHandlePosition(maxvalues) + 'px' : this.checkHandlePosition(maxvalues) - this.checkHandlePosition(this.options.Limits.maxStart) + 'px', _b));
        }
      }
    };
    SfSlider.prototype.setHandler = function () {
      this.createFirstHandle();
      this.createSecondHandle();
    };
    SfSlider.prototype.createSecondHandle = function () {
      this.secondHandle = this.element.querySelector('.e-handle-second');
    };
    SfSlider.prototype.createFirstHandle = function () {
      this.firstHandle = this.element.querySelector('.e-handle-first');
    };
    SfSlider.prototype.setValue = function (makeServerCall) {
      if (makeServerCall === void 0) {
        makeServerCall = true;
      }
      var firstHandleValue = this.options.Type !== RANGESLIDER ? this.options.Value : this.options.Value[0];
      this.handleVal1 = sf.base.isNullOrUndefined(this.options.Value) ? this.checkHandleValue(parseFloat(this.options.Min.toString())) : this.checkHandleValue(parseFloat(firstHandleValue.toString()));
      this.handlePos1 = this.checkHandlePosition(this.handleVal1);
      if (this.options.Limits != null) {
        var valAndPos = this.updateNewHandleValue(this.handleVal1, this.handlePos1, [this.options.Limits.minStart, this.options.Limits.minEnd]);
        this.handleVal1 = valAndPos[0];
        this.handlePos1 = valAndPos[1];
      }
      if (this.options.Type === RANGESLIDER) {
        this.handleVal2 = sf.base.isNullOrUndefined(this.options.Value) ? this.checkHandleValue(parseFloat(this.options.Max.toString())) : this.checkHandleValue(parseFloat(this.options.Value[1].toString()));
        this.handlePos2 = this.checkHandlePosition(this.handleVal2);
        if (this.options.Limits != null) {
          var valAndPos = this.updateNewHandleValue(this.handleVal2, this.handlePos2, [this.options.Limits.maxStart, this.options.Limits.maxEnd]);
          this.handleVal2 = valAndPos[0];
          this.handlePos2 = valAndPos[1];
        }
      }
      this.setHandlePosition(null);
      if (this.options.Type !== DEFAULTSLIDER) {
        this.setRangeBarPosition();
      }
      if (this.options.Ticks !== null && this.options.Ticks.placement !== 'None') {
        this.setTickValuePosition();
      }
      this.updateValue(makeServerCall);
    };
    SfSlider.prototype.updateColorRangeBarPos = function () {
      if (this.options.ColorRange != null) {
        var trackInfo = this.sliderTrack.children;
        for (var i = 0; i < this.options.ColorRange.length; i++) {
          if (this.options.Orientation === HORIZONTAL) {
            if (!this.options.EnableRtl) {
              trackInfo[i].style.left = !this.options.EnableRtl ? this.checkHandlePosition(this.options.ColorRange[i].start) + 'px' : this.checkHandlePosition(this.options.Max - this.options.ColorRange[i].end) + 'px';
            }
            trackInfo[i].style.width = this.checkHandlePosition(this.options.ColorRange[i].end) - this.checkHandlePosition(this.options.ColorRange[i].start) + 'px';
          } else {
            trackInfo[i].style.bottom = this.checkHandlePosition(this.options.ColorRange[i].start) + 'px';
            trackInfo[i].style.height = this.checkHandlePosition(this.options.ColorRange[i].end) - this.checkHandlePosition(this.options.ColorRange[i].start) + 'px';
          }
          trackInfo[i].style.removeProperty('display');
        }
      }
    };
    SfSlider.prototype.setTickValuePosition = function () {
      this.firstChild = this.element.querySelector('ul').children[0];
      var firstElementDetails = this.firstChild.getBoundingClientRect();
      var firstChild;
      var otherChild;
      var smallStep = this.options.Ticks.smallStep;
      var count = Math.abs(parseFloat(sf.base.formatUnit(this.options.Max)) - parseFloat(sf.base.formatUnit(this.options.Min))) / smallStep;
      if (this.firstChild.children.length > 0) {
        firstChild = this.firstChild.children[0].getBoundingClientRect();
      }
      var tickElements = [this.element.querySelectorAll('.' + TICK + '.' + LARGE + ' .' + TICKVALUE)];
      var other;
      if (this.options.Ticks.placement === 'Both') {
        other = [].slice.call(tickElements[0], 2);
      } else {
        other = [].slice.call(tickElements[0], 1);
      }
      var tickWidth = this.options.Orientation !== HORIZONTAL ? firstElementDetails.height * 2 : firstElementDetails.width * 2;
      for (var i = 0; i < this.firstChild.children.length; i++) {
        if (this.options.Orientation === HORIZONTAL) {
          if (!this.options.EnableRtl) {
            this.firstChild.children[i].style.left = -(firstChild.width / 2) + 'px';
          } else {
            this.firstChild.children[i].style.left = (tickWidth - this.firstChild.children[i].getBoundingClientRect().width) / 2 + 'px';
          }
        } else {
          this.firstChild.children[i].style.top = -(firstChild.width / 2) + 'px';
        }
      }
      for (var i = 0; i < other.length; i++) {
        otherChild = other[i].getBoundingClientRect();
        if (this.options.Orientation === HORIZONTAL) {
          sf.base.setStyleAttribute(other[i], {
            left: (tickWidth - otherChild.width) / 2 + 'px'
          });
          if (this.options.EnableRtl && other[i].parentElement.classList.contains('e-last-tick')) {
            sf.base.setStyleAttribute(other[i], {
              left: -(otherChild.width / 2) + 'px'
            });
          }
        } else {
          sf.base.setStyleAttribute(other[i], {
            top: (tickWidth - otherChild.height) / 2 + 'px'
          });
        }
      }
      if (count === 0) {
        this.firstChild.classList.remove(SLIDERLASTTICK);
      }
      // tslint:disable-next-line:no-any
      var args;
      if (this.firstChild != null) {
        if (this.options.Orientation === HORIZONTAL) {
          args = {
            firstTickPostion: this.firstChild.children[0].style.left
          };
        } else {
          args = {
            firstTickPostion: -(firstChild.height / 2) + 'px'
          };
        }
      }
      if (other[0] != null) {
        if (this.options.Orientation === HORIZONTAL) {
          args = {
            otherTicksPosition: other[0].style.left
          };
        } else {
          args = {
            otherTicksPosition: (tickWidth - otherChild.height) / 2 + 'px'
          };
        }
      }
      if (this.firstChild != null && other[0] != null) {
        if (this.options.Orientation === HORIZONTAL) {
          args = {
            firstTickPostion: this.firstChild.children[0].style.left,
            otherTicksPosition: other[0].style.left
          };
        } else {
          args = {
            firstTickPostion: -(firstChild.height / 2) + 'px',
            otherTicksPosition: (tickWidth - otherChild.height) / 2 + 'px'
          };
        }
      }
      this.element.querySelector('ul').style.removeProperty(VISIBILITY);
    };
    SfSlider.prototype.setRangeBarPosition = function () {
      this.rangeBar = this.element.querySelector('.' + RANGE);
      if (this.options.Orientation === HORIZONTAL) {
        if (this.options.Type === MINRANGESLIDER) {
          this.options.EnableRtl ? this.rangeBar.style.right = '0px' : this.rangeBar.style.left = '0px';
          sf.base.setStyleAttribute(this.rangeBar, {
            'width': sf.base.isNullOrUndefined(this.handlePos1) ? 0 : this.handlePos1 + 'px'
          });
        } else {
          this.options.EnableRtl ? this.rangeBar.style.right = this.handlePos1 + 'px' : this.rangeBar.style.left = this.handlePos1 + 'px';
          sf.base.setStyleAttribute(this.rangeBar, {
            'width': this.handlePos2 - this.handlePos1 + 'px'
          });
        }
      } else {
        if (this.options.Type === MINRANGESLIDER) {
          var elementAttr = this.element.getBoundingClientRect();
          this.rangeBar.style.bottom = this.options.Min > this.options.Max ? this.handlePos1 + 'px' : '0px';
          sf.base.setStyleAttribute(this.rangeBar, {
            'height': sf.base.isNullOrUndefined(this.handlePos1) ? 0 : this.options.Min > this.options.Max ? elementAttr.height - this.handlePos1 + 'px' : this.handlePos1 + 'px'
          });
        } else {
          this.rangeBar.style.bottom = this.options.Min > this.options.Max ? this.handlePos2 + 'px' : this.handlePos1 + 'px';
          sf.base.setStyleAttribute(this.rangeBar, {
            'height': this.options.Min > this.options.Max ? this.handlePos1 - this.handlePos2 + 'px' : this.handlePos2 - this.handlePos1 + 'px'
          });
        }
      }
    };
    SfSlider.prototype.setHandlePosition = function (event) {
      this.updateHandleAttributes('aria-valuemin', [this.options.Min.toString()]);
      this.updateHandleAttributes('aria-valuemax', [this.options.Max.toString()]);
      var pos = [this.handlePos1, this.handlePos2];
      this.updateHandlePosition(this.firstHandle, pos[0]);
      if ((this.isMaterial || this.isMaterial3) && this.options.Type !== RANGESLIDER && !sf.base.isNullOrUndefined(this.materialHandle)) {
        this.updateHandlePosition(this.materialHandle, pos[0]);
      }
      if (this.options.Type === RANGESLIDER) {
        this.updateHandlePosition(this.secondHandle, pos[1]);
      }
      this.updateAriaValue();
    };
    SfSlider.prototype.getHandlePosition = function (eventargs) {
      if (eventargs.type === 'mousedown' || eventargs.type === 'mouseup') {
        eventargs.preventDefault();
      }
      var pos;
      if (eventargs.type === 'mousedown' || eventargs.type === 'mouseup' || eventargs.type === 'click') {
        pos = {
          x: eventargs.clientX,
          y: eventargs.clientY
        };
      } else if (eventargs.type === 'touchend' || eventargs.type === 'touchstart') {
        pos = {
          x: eventargs.changedTouches[0].clientX,
          y: eventargs.changedTouches[0].clientY
        };
      }
      this.handlePos = this.xyToPosition(pos);
      this.handleVal = this.positionToValue(this.handlePos);
      if (this.handleVal2 < this.handleVal) {
        this.activeHandle = 2;
      } else if (this.handleVal1 > this.handleVal) {
        this.activeHandle = 1;
      } else {
        var diff1 = this.handleVal > this.handleVal1 ? this.handleVal - this.handleVal1 : this.handleVal1 - this.handleVal;
        var diff2 = this.handleVal > this.handleVal2 ? this.handleVal - this.handleVal2 : this.handleVal2 - this.handleVal;
        this.activeHandle = diff1 > diff2 ? 2 : 1;
      }
    };
    SfSlider.prototype.updateHandlePosition = function (handle, pos) {
      this.applyHandlePosition(handle, pos);
      handle.style.removeProperty(VISIBILITY);
    };
    SfSlider.prototype.applyHandlePosition = function (handle, pos) {
      if (this.options.Orientation === HORIZONTAL) {
        if (this.options.EnableRtl) {
          handle.style.right = pos + 'px';
        } else {
          handle.style.left = pos + 'px';
        }
      } else {
        handle.style.bottom = pos + 'px';
      }
      if (!this.isKeyPressed) {
        handle.style.transition = this.transition.handle;
      } else if (this.isClicked) {
        handle.style.transition = "none";
      }
    };
    SfSlider.prototype.checkHandleValue = function (value) {
      if (this.options.Min === this.options.Max) {
        return parseFloat(sf.base.formatUnit(this.options.Max));
      }
      var handle = this.handleStartEnd();
      if (value < handle.start) {
        value = handle.start;
      } else if (value > handle.end) {
        value = handle.end;
      }
      return value;
    };
    SfSlider.prototype.checkHandlePosition = function (value) {
      var pos;
      var elementAttr = this.element.getBoundingClientRect();
      value = 100 * (value - parseFloat(sf.base.formatUnit(this.options.Min))) / (parseFloat(sf.base.formatUnit(this.options.Max)) - parseFloat(sf.base.formatUnit(this.options.Min)));
      if (this.options.Orientation === HORIZONTAL) {
        pos = elementAttr.width * (value / 100);
      } else {
        pos = elementAttr.height * (value / 100);
      }
      if (parseFloat(sf.base.formatUnit(this.options.Max)) === parseFloat(sf.base.formatUnit(this.options.Min))) {
        if (this.options.Orientation === HORIZONTAL) {
          pos = elementAttr.width;
        } else {
          pos = elementAttr.height;
        }
      }
      return pos;
    };
    SfSlider.prototype.handleStartEnd = function () {
      if (this.options.Min > this.options.Max) {
        return {
          start: this.options.Max,
          end: this.options.Min
        };
      } else {
        return {
          start: this.options.Min,
          end: this.options.Max
        };
      }
    };
    SfSlider.prototype.updateValue = function (makeServerCall) {
      var _this = this;
      if (makeServerCall === void 0) {
        makeServerCall = true;
      }
      if (this.options.Type === RANGESLIDER) {
        this.options.Value = [this.handleVal1, this.handleVal2];
      } else {
        this.options.Value = this.handleVal1;
      }
      if (!this.isClicked) {
        this.previousHandleVal = this.options.Value;
      }
      if (makeServerCall) {
        if (this.options.Tooltip !== null) {
          setTimeout(function () {
            _this.dotNetRef.invokeMethodAsync('UpdateValue', _this.options.Value, _this.activeHandle);
          }, 300);
        } else {
          if ((this.isMaterial || this.isMaterial3) && this.options.Tooltip !== null && !sf.base.isNullOrUndefined(this.materialHandle) && this.options.Type !== RANGESLIDER) {
            this.materialHandle.style.transform = 'scale(0)';
          }
          this.dotNetRef.invokeMethodAsync('UpdateValue', this.options.Value, this.activeHandle);
        }
        //To resolve the flicker issue in blazor image editor compoennt slider.
        // tslint:disable-next-line:no-any
        if (this.hiddenInput && this.hiddenInput.name && this.hiddenInput.name.includes('imageEditor')) {
          this.hiddenInput.value = this.options.Value;
          var inputEvent = new Event('custom-change', {
            bubbles: true,
            cancelable: true
          });
          this.hiddenInput.dispatchEvent(inputEvent);
        }
      }
    };
    SfSlider.prototype.updateLimitData = function (limits) {
      this.options.Value = this.tempValue;
      this.options.Limits = limits;
      this.setLimitBarPosition();
      this.setValue();
    };
    // tslint:disable-next-line:no-any
    SfSlider.prototype.updateTicksData = function (ticks) {
      this.options.Ticks = ticks;
      this.setTickValuePosition();
    };
    SfSlider.prototype.updateSliderValue = function (value) {
      var previousValue = this.options.Value;
      this.options.Value = value;
      this.setValue();
      this.invokeEvent(previousValue, false);
    };
    SfSlider.prototype.updateStepValue = function (value) {
      this.options.Step = value;
    };
    SfSlider.prototype.destroy = function () {
      this.element.style.display = 'none';
      this.unWireEvents();
      this.element = null;
      this.isDestroyed = true;
    };
    SfSlider.prototype.updateTooltipPosition = function (id) {
      var tooltipContent = document.getElementById(id);
      if (!sf.base.isNullOrUndefined(tooltipContent) && this.options.Type !== RANGESLIDER && sf.base.isNullOrUndefined(this.options.Tooltip.format)) {
        tooltipContent.style.transform = this.options.Orientation == HORIZONTAL ? this.options.Tooltip.placement === 'Before' ? 'rotate(45deg)' : 'rotate(225deg)' : this.options.Tooltip.placement === 'Before' ? 'rotate(-45deg)' : 'rotate(-225deg)';
      }
    };
    // tslint:disable-next-line:no-any
    SfSlider.prototype.propertyChanges = function (properties) {
      if (properties.Enabled !== undefined) {
        this.options.Enabled = properties.Enabled;
      }
      if (properties.ShowButtons !== undefined) {
        this.setValue(false);
        this.updateColorRangeBarPos();
      }
      if (properties.ReadOnly !== undefined) {
        this.options.ReadOnly = properties.ReadOnly;
      }
      if (properties.Value !== undefined) {
        this.options.Value = properties.Value;
        this.tempValue = this.options.Value;
        this.setValue(false);
      }
      if (properties.Max !== undefined) {
        this.options.Max = properties.Max;
      }
      if (properties.Step !== undefined) {
        this.options.Step = properties.Step;
      }
      if (properties.Min !== undefined) {
        this.options.Min = properties.Min;
      }
      if (properties.IsImmediateValue !== undefined) {
        this.options.IsImmediateValue = properties.IsImmediateValue;
      }
      if (this.options.Enabled && !this.options.ReadOnly) {
        this.unWireEvents();
        if (sf.base.isNullOrUndefined(properties.Max)) {
          this.wireEvents();
        }
      } else {
        this.unWireEvents();
      }
    };
    return SfSlider;
  }();
  // tslint:disable
  var Slider = {
    initialize: function initialize(dataId, element, dotnetRef, props) {
      if (element) {
        new SfSlider(dataId, element, dotnetRef, props);
      }
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (element && !sf.base.isNullOrUndefined(instance)) {
        return instance.initialize();
      } else {
        return null;
      }
    },
    updateLimitData: function updateLimitData(dataId, limits) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateLimitData(limits);
      }
    },
    updateTicksData: function updateTicksData(dataId, ticks) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateTicksData(ticks);
      }
    },
    updateSliderValue: function updateSliderValue(dataId, value) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateSliderValue(value);
      }
    },
    updateSTepValue: function updateSTepValue(dataId, value) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateStepValue(value);
      }
    },
    updatedProperties: function updatedProperties(dataId, properties) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.propertyChanges(properties);
      }
    },
    destroy: function destroy(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.destroy();
      }
    },
    reposition: function reposition(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.reposition();
      }
    },
    updateTooltipPosition: function updateTooltipPosition(dataId, id) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateTooltipPosition(id);
      }
    }
  };
  return Slider;
}();

/***/ }),

/***/ "./modules/sf-textbox.js":
/*!*******************************!*\
  !*** ./modules/sf-textbox.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.TextBox = function () {
  'use strict';

  /**
   * Blazor texbox interop handler
   */
  var BLUR = 'blur';
  var MOUSE_DOWN = 'mousedown';
  var MOUSE_UP = 'mouseup';
  var INPUT_GROUP = 'e-input-group-icon';
  var DISABLED = 'e-disabled';
  var RIPPLE_BTN = 'e-input-btn-ripple';
  var SfTextBox = /** @class */function () {
    function SfTextBox(element, dotnetRef, containerEle) {
      this.element = element;
      this.container = containerEle;
      this.element.blazor_input_instance = this;
      this.dotNetRef = dotnetRef;
      this.isDestroyed = false;
    }
    SfTextBox.prototype.initialize = function () {
      sf.base.EventHandler.add(this.element, BLUR, this.blurHandler, this);
      var buttons = this.container ? this.container.querySelectorAll('.' + INPUT_GROUP) : null;
      if (buttons && buttons.length > 0) {
        for (var index = 0; index < buttons.length; index++) {
          sf.base.EventHandler.add(buttons[index], MOUSE_DOWN, this.onMouseDownRipple, this);
          sf.base.EventHandler.add(buttons[index], MOUSE_UP, this.onMouseUpRipple, this);
        }
      }
    };
    SfTextBox.prototype.calculateWidth = function () {
      var label = document.getElementsByClassName('e-float-text');
      if (label !== null) {
        for (var i = 0; i < label.length; i++) {
          if (this.container.classList.contains('e-outline') && this.container.classList.contains('e-prepend') && label[i].classList.contains('e-label-top')) {
            var left = this.container.clientWidth - this.element.clientWidth;
            label[i].style.left = -left.toString() + 'px';
            label[i].style.width = 'auto';
          } else {
            label[i].style.left = '0px';
          }
        }
      }
    };
    SfTextBox.prototype.onMouseDownRipple = function (args) {
      var button = args ? args.currentTarget : null;
      if (button && !this.container.classList.contains(DISABLED) && !this.container.querySelector('input').readOnly) {
        button.classList.add(RIPPLE_BTN);
      }
    };
    SfTextBox.prototype.onMouseUpRipple = function (args) {
      var button = args ? args.currentTarget : null;
      if (button) {
        setTimeout(function () {
          button.classList.remove(RIPPLE_BTN);
        }, 500);
      }
    };
    SfTextBox.prototype.blurHandler = function () {
      if (!this.isDestroyed) {
        // tslint:disable
        this.dotNetRef.invokeMethodAsync('BlurHandler')["catch"](function () {});
      } else {
        sf.base.EventHandler.remove(this.element, BLUR, this.blurHandler);
      }
    };
    SfTextBox.prototype.destroy = function () {
      sf.base.EventHandler.remove(this.element, BLUR, this.blurHandler);
    };
    return SfTextBox;
  }();
  // tslint:disable
  var TextBox = {
    initialize: function initialize(element, dotnetRef, containerEle) {
      if (element) {
        var instance = new SfTextBox(element, dotnetRef, containerEle);
        if (element && element.blazor_input_instance) {
          element.blazor_input_instance.initialize();
          if (!sf.base.isNullOrUndefined(sf.base.closest(element, "fieldset")) && sf.base.closest(element, "fieldset").disabled) {
            var enabled = false;
            instance.dotNetRef.invokeMethodAsync('UpdateFieldSetStatus', enabled);
          }
        }
      }
    },
    calculateWidth: function calculateWidth(element, dotnetRef, containerEle) {
      if (element) {
        new SfTextBox(element, dotnetRef, containerEle);
      }
      if (element && element.blazor_input_instance) {
        element.blazor_input_instance.calculateWidth();
      }
    },
    focusIn: function focusIn(element) {
      element.focus();
    },
    focusOut: function focusOut(element) {
      element.blur();
    },
    destroyInput: function destroyInput(element) {
      if (element && element.blazor_input_instance) {
        element.blazor_input_instance.isDestroyed = true;
        element.blazor_input_instance.destroy();
      }
    }
  };
  return TextBox;
}();

/***/ }),

/***/ "./modules/sf-toast.js":
/*!*****************************!*\
  !*** ./modules/sf-toast.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.Toast = function () {
  'use strict';

  var CLOSE_EVENT = 'CloseEvent';
  var OPEN_EVENT = 'OpenEvent';
  var ON_CLOSE_EVENT = 'OnCloseEvent';
  var DESTROY_TIMER = 'DestroyTimer';
  var MOUSEOVER_EVENT = 'MouseoverEvent';
  var CLOSEBTN = 'e-toast-close-icon';
  var ROOT = 'e-toast';
  var TOAST_BLAZOR_HIDDEN = 'e-blazor-toast-hidden';
  var PROGRESS = 'e-toast-progress';
  var HUN_PERCENT = '100%';
  var DEFAULT_WIDTH = '300px';
  var FULL_WIDTH = 'e-toast-full-width';
  var STRING = 'string';
  var RELATIVE = 'relative';
  var BODY = 'BODY';
  var RIGHT = 'Right';
  var LEFT = 'Left';
  var ELEMENT = 'element';
  var ALL = 'All';
  var ENTER_KEY = 13;
  var SPACE_KEY = 32;
  var TOAST_PRE = 'e-toast';
  var TOAST_CONTAINER = 'e-toast-container';
  var KEYDOWN = 'keydown';
  var FIXED = 'fixed';
  var ABSOLUTE = 'absolute';
  var MOUSE_OVER = 'mouseover';
  var MOUSE_LEAVE = 'mouseleave';
  var TOAST_ID = 'toast_';
  var MIN_SCREEN_WIDTH = 768;
  var TOAST_REF_ELEMENT = 'e-toast-ref-element';
  var SfToast = /** @class */function () {
    function SfToast(options) {
      this.progressObj = [];
      window.sfBlazor = window.sfBlazor;
      this.progressObj = [];
      this.updateContext(options);
      if (window.sfBlazor) {
        if (sf.base.isNullOrUndefined(window.sfBlazor.instances)) {
          window.sfBlazor.instances = [];
        }
        window.sfBlazor.instances[this.dataId] = this;
      }
    }
    SfToast.prototype.initialize = function () {
      this.isDevice = sf.base.Browser.isDevice;
      if (this.width === DEFAULT_WIDTH) {
        this.width = this.isDevice && screen.width < MIN_SCREEN_WIDTH ? HUN_PERCENT : DEFAULT_WIDTH;
        this.toastContainer.classList.add(FULL_WIDTH);
      }
      if (this.isDevice && screen.width < MIN_SCREEN_WIDTH) {
        new sf.base.Touch(this.element, {
          swipe: this.swipeHandler.bind(this)
        });
      }
    };
    SfToast.prototype.show = function (options) {
      if (sf.base.isNullOrUndefined(this.refElement)) {
        this.refElement = sf.base.createElement('div', {
          className: TOAST_REF_ELEMENT
        });
        this.toastContainer = this.element.parentElement;
        var parentEle = this.toastContainer.parentElement;
        parentEle.insertBefore(this.refElement, this.element.parentElement);
      }
      this.setAnimation(options);
      var target = _typeof(this.target) === STRING ? document.querySelector(this.target) : document.body;
      options.rootElement.style.zIndex = sf.popups.getZindexPartial(options.rootElement) + '';
      if (sf.base.isNullOrUndefined(target)) {
        return;
      }
      if (target.tagName === BODY) {
        this.toastContainer.style.position = FIXED;
      } else {
        this.toastContainer.style.position = ABSOLUTE;
        target.style.position = RELATIVE;
      }
      target.appendChild(this.toastContainer);
      this.appendToast(options.element);
      var id = parseInt(options.element.id.split(TOAST_ID)[1], 10);
      this.progressObj[id] = {
        hideEstimatedTimeOfArrival: null,
        intervalId: null,
        maxHideTime: null,
        element: null,
        timeOutId: null,
        progressEle: null
      };
      this.progressObj[id].element = options.element;
      if (this.extendedTimeout > 0 && this.timeOut > 0) {
        sf.base.EventHandler.add(options.element, MOUSE_OVER, this.toastHoverAction.bind(this, id));
        sf.base.EventHandler.add(options.element, MOUSE_LEAVE, this.delayedToastProgress.bind(this, id));
      }
      if (options.showProgressBar) {
        this.progressObj[id].progressEle = options.element.querySelector('.' + PROGRESS);
      }
      sf.base.EventHandler.add(options.element, KEYDOWN, this.keyDownHandler, this);
    };
    SfToast.prototype.getDomObject = function (value, element) {
      if (element != null) {
        // eslint-disable-next-line
        return window.sfBlazor.getDomObject(value, element);
      } else {
        return null;
      }
    };
    SfToast.prototype.swipeHandler = function (e) {
      var toastEle = sf.base.closest(e.originalEvent.target, '.' + TOAST_PRE + ':not(.' + TOAST_CONTAINER + ')');
      var animation = this.hideAnimation.effect;
      if (!sf.base.isNullOrUndefined(toastEle)) {
        if (e.swipeDirection === RIGHT) {
          this.hideAnimation.effect = 'SlideRightOut';
          this.hide('swipe', toastEle);
        } else if (e.swipeDirection === LEFT) {
          this.hideAnimation.effect = 'SlideLeftOut';
          this.hide('swipe', toastEle);
        }
        this.hideAnimation.effect = animation;
      }
    };
    SfToast.prototype.delayedToastProgress = function (id) {
      var progress = this.progressObj[id];
      var toastEle = progress.element;
      progress.timeOutId = window.setTimeout(this.destroyToast.bind(this, toastEle), this.extendedTimeout);
      progress.maxHideTime = parseFloat(this.extendedTimeout + '');
      progress.hideEstimatedTimeOfArrival = new Date().getTime() + progress.maxHideTime;
      if (!sf.base.isNullOrUndefined(toastEle.querySelector('.' + PROGRESS))) {
        progress.intervalId = setInterval(this.updateProgressBar.bind(this, progress), 10);
      }
    };
    SfToast.prototype.toastHoverAction = function (id) {
      this.dotNetRef.invokeMethodAsync('ClearTimeout', id);
      clearTimeout(this.progressObj[id].timeOutId);
      clearInterval(this.progressObj[id].intervalId);
      this.progressObj[id].hideEstimatedTimeOfArrival = 0;
      var toastEle = this.progressObj[id].element;
      if (!sf.base.isNullOrUndefined(toastEle.querySelector('.' + PROGRESS))) {
        this.progressObj[id].progressEle.style.width = '0%';
      }
      this.dotNetRef.invokeMethodAsync(MOUSEOVER_EVENT, id);
    };
    SfToast.prototype.updateProgressBar = function (progressObj) {
      var percentage = (progressObj.hideEstimatedTimeOfArrival - new Date().getTime()) / progressObj.maxHideTime * 100;
      percentage = this.progressDirection === 'LTR' ? 100 - percentage : percentage;
      progressObj.progressEle.style.width = percentage + '%';
    };
    SfToast.prototype.appendToast = function (toastElement) {
      if (this.newestOnTop && this.toastContainer.childElementCount !== 0) {
        this.toastContainer.insertBefore(toastElement, this.toastContainer.children[0]);
      }
      sf.base.removeClass([toastElement], TOAST_BLAZOR_HIDDEN);
    };
    SfToast.prototype.setAnimation = function (toastObj) {
      var _this = this;
      var proxy = this;
      var showAnimate = this.showAnimation;
      var animate = {
        duration: showAnimate.duration,
        name: showAnimate.effect,
        timingFunction: showAnimate.easing
      };
      animate.begin = function () {
        toastObj.element.style.display = '';
      };
      animate.end = function () {
        if (!sf.base.isNullOrUndefined(document.querySelector('#' + proxy.element.id))) {
          proxy.dotNetRef.invokeMethodAsync(OPEN_EVENT, toastObj.index, _this.getDomObject(ELEMENT, toastObj.element));
        }
      };
      new sf.base.Animation(animate).animate(toastObj.element);
    };
    SfToast.prototype.hide = function (interactionType, element) {
      if (sf.base.isNullOrUndefined(this.toastContainer) || this.toastContainer.childElementCount === 0) {
        return;
      }
      if (_typeof(element) === STRING && element === ALL) {
        for (var i = 0; i < this.toastContainer.childElementCount; i++) {
          this.destroyToast(this.toastContainer.children[i], interactionType);
        }
        return;
      } else if (_typeof(element) === STRING && element !== ALL) {
        var ele = this.toastContainer.querySelector('#toast_' + element);
        if (ele) {
          this.destroyToast(ele, interactionType);
          this.dotNetRef.invokeMethodAsync(DESTROY_TIMER, parseInt(element, 10));
        }
      }
      if (sf.base.isNullOrUndefined(element)) {
        element = this.newestOnTop ? this.toastContainer.lastElementChild : this.toastContainer.firstElementChild;
      }
      this.destroyToast(element, interactionType);
      var id = parseInt(element.id.split('toast_')[1], 10);
      this.dotNetRef.invokeMethodAsync(DESTROY_TIMER, id);
    };
    SfToast.prototype.destroyToast = function (element, interactionType) {
      if (this.toastContainer.attributes.length === 0) {
        return;
      }
      var id = parseInt(element.id.split('toast_')[1], 10);
      this.dotNetRef.invokeMethodAsync(ON_CLOSE_EVENT, id, interactionType);
    };
    SfToast.prototype.hideAnimationToast = function (element, index) {
      var proxy = this;
      var hideAnimate = this.hideAnimation;
      var animate = {
        duration: hideAnimate.duration,
        name: hideAnimate.effect,
        timingFunction: hideAnimate.easing
      };
      animate.end = function () {
        sf.base.detach(element);
        proxy.dotNetRef.invokeMethodAsync(CLOSE_EVENT, index);
      };
      new sf.base.Animation({}).animate(element, animate);
    };
    SfToast.prototype.destroy = function () {
      if (!sf.base.isNullOrUndefined(this.toastContainer)) {
        while (this.toastContainer.attributes.length > 0) {
          this.toastContainer.removeAttribute(this.toastContainer.attributes[0].name);
        }
      }
      var splitNodes = this.toastContainer.children;
      for (var i = splitNodes.length - 1; i >= 0; i--) {
        sf.base.detach(splitNodes[i]);
      }
      if (!sf.base.isNullOrUndefined(this.refElement) && !sf.base.isNullOrUndefined(this.refElement.parentElement)) {
        this.refElement.parentElement.insertBefore(this.toastContainer, this.refElement);
        sf.base.detach(this.refElement);
        this.refElement = undefined;
      }
      this.toastContainer = null;
      this.element = null;
      window.sfBlazor.instances[this.dataId] = null;
    };
    SfToast.prototype.keyDownHandler = function (e) {
      if (e.target.classList.contains(CLOSEBTN) && (e.keyCode === ENTER_KEY || e.keyCode === SPACE_KEY)) {
        var target = e.target;
        var toastEle = sf.base.closest(target, '.' + ROOT);
        this.destroyToast(toastEle, 'key');
      }
    };
    SfToast.prototype.updateContext = function (toastObj) {
      sf.base.extend(this, this, toastObj);
    };
    return SfToast;
  }();
  // eslint-disable-next-line
  var Toast = {
    initialize: function initialize(options) {
      if (options.dataId) {
        new SfToast(options);
        window.sfBlazor.instances[options.dataId].initialize();
      }
    },
    show: function show(toastObj) {
      if (toastObj.rootElement) {
        window.sfBlazor.instances[toastObj.dataId].updateContext(toastObj);
        window.sfBlazor.instances[toastObj.dataId].show(toastObj);
      }
    },
    hideAnimationToast: function hideAnimationToast(dataId, index) {
      if (dataId) {
        var element = window.sfBlazor.instances[dataId].rootElement;
        window.sfBlazor.instances[dataId].hideAnimationToast(element.querySelector('#toast_' + index), index);
      }
    },
    hide: function hide(dataId, toastElement, toastObj, interactionType) {
      if (dataId) {
        window.sfBlazor.instances[dataId].updateContext(toastObj);
        window.sfBlazor.instances[dataId].hide(interactionType, toastElement);
      }
    },
    appendToast: function appendToast(dataId, toastElement) {
      if (dataId) {
        window.sfBlazor.instances[dataId].appendToast(toastElement);
      }
    },
    destroy: function destroy(dataId) {
      if (dataId) {
        window.sfBlazor.instances[dataId].destroy();
      }
    }
  };
  return Toast;
}();

/***/ }),

/***/ "./modules/sf-toolbar.js":
/*!*******************************!*\
  !*** ./modules/sf-toolbar.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.Toolbar = function () {
  'use strict';

  var CLS_TOOLBAR = 'e-toolbar';
  var CLS_VERTICAL = 'e-vertical';
  var CLS_ITEMS = 'e-toolbar-items';
  var BZ_ITEMS = 'e-blazor-toolbar-items';
  var CLS_ITEM = 'e-toolbar-item';
  var CLS_RTL = 'e-rtl';
  var CLS_SEPARATOR = 'e-separator';
  var CLS_SPACER = 'e-spacer';
  var CLS_POPUPICON = 'e-popup-up-icon';
  var CLS_POPUPDOWN = 'e-popup-down-icon';
  var CLS_POPUPOPEN = 'e-popup-open';
  var CLS_TEMPLATE = 'e-template';
  var CLS_DISABLE = 'e-overlay';
  var CLS_POPUPTEXT = 'e-toolbar-text';
  var CLS_TBARTEXT = 'e-popup-text';
  var CLS_TBAROVERFLOW = 'e-overflow-show';
  var CLS_POPOVERFLOW = 'e-overflow-hide';
  var CLS_TBARNAV = 'e-hor-nav';
  var CLS_TBARSCRLNAV = 'e-scroll-nav';
  var CLS_TBARRIGHT = 'e-toolbar-right';
  var CLS_TBARLEFT = 'e-toolbar-left';
  var CLS_TBARCENTER = 'e-toolbar-center';
  var CLS_TBARPOS = 'e-tbar-pos';
  var CLS_HSCROLLCNT = 'e-hscroll-content';
  var CLS_VSCROLLCNT = 'e-vscroll-content';
  var CLS_POPUPNAV = 'e-hor-nav';
  var CLS_POPUPCLASS = 'e-toolbar-pop';
  var CLS_POPUP = 'e-toolbar-popup';
  var CLS_TBARBTNTEXT = 'e-tbar-btn-text';
  var CLS_TBARNAVACT = 'e-nav-active';
  var CLS_TBARIGNORE = 'e-ignore';
  var CLS_POPPRI = 'e-popup-alone';
  var CLS_HIDDEN = 'e-hidden';
  var CLS_MULTIROW = 'e-toolbar-multirow';
  var CLS_MULTIROWPOS = 'e-multirow-pos';
  var CLS_MULTIROW_SEPARATOR = 'e-multirow-separator';
  var CLS_EXTENDABLE_SEPARATOR = 'e-extended-separator';
  var CLS_EXTEANDABLE_TOOLBAR = 'e-extended-toolbar';
  var CLS_EXTENDABLECLASS = 'e-toolbar-extended';
  var CLS_EXTENDPOPUP = 'e-expended-nav';
  var CLS_EXTENDEDPOPOPEN = 'e-tbar-extended';
  var TAB = 9;
  var DOWNARROW = 40;
  var UPARROW = 38;
  var END = 35;
  var HOME = 36;
  var NonFocusableSelectorClass = '.' + CLS_ITEM + ':not(.' + CLS_DISABLE + ' ):not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_SPACER + ' ):not(.' + CLS_HIDDEN + ' )';
  var SfToolbar = /** @class */function () {
    function SfToolbar(dataId, element, options, dotnetRef) {
      this.resizeContext = this.resize.bind(this);
      this.orientationChangeContext = this.orientationChange.bind(this);
      window.sfBlazor = window.sfBlazor;
      this.keyConfigs = {
        moveLeft: 'leftarrow',
        moveRight: 'rightarrow',
        moveUp: 'uparrow',
        moveDown: 'downarrow',
        popupOpen: 'enter',
        popupClose: 'escape',
        tab: 'tab',
        home: 'home',
        end: 'end'
      };
      this.element = element;
      this.dotNetRef = dotnetRef;
      this.options = options;
      this.dataId = dataId;
      window.sfBlazor.setCompInstance(this);
    }
    SfToolbar.prototype.destroy = function () {
      this.unwireEvents();
      this.clearProperty();
      this.popObj = null;
      this.tbarAlign = null;
    };
    SfToolbar.prototype.wireEvents = function () {
      sf.base.EventHandler.add(this.element, 'click', this.clickHandler, this);
      window.addEventListener('resize', this.resizeContext);
      window.addEventListener('orientationchange', this.orientationChangeContext);
      if (this.options.allowKeyboard) {
        this.wireKeyboardEvent();
      }
    };
    SfToolbar.prototype.wireKeyboardEvent = function () {
      this.keyModule = new sf.base.KeyboardEvents(this.element, {
        keyAction: this.keyActionHandler.bind(this),
        keyConfigs: this.keyConfigs
      });
      sf.base.EventHandler.add(this.element, 'keydown', this.docKeyDown, this);
      this.updateTabIndex('0');
    };
    SfToolbar.prototype.updateTabIndex = function (tabIndex) {
      var ele = this.element.querySelector(NonFocusableSelectorClass);
      if (!sf.base.isNullOrUndefined(ele) && !sf.base.isNullOrUndefined(ele.firstElementChild)) {
        var dataTabIndex = ele.firstElementChild.getAttribute('data-tabindex');
        if (dataTabIndex && dataTabIndex === '-1' && ele.firstElementChild.tagName !== 'INPUT') {
          ele.firstElementChild.setAttribute('tabindex', tabIndex);
        } else if (ele.classList.contains(CLS_TEMPLATE)) {
          var firstChild = ele.firstElementChild;
          if (!sf.base.isNullOrUndefined(firstChild)) {
            firstChild.setAttribute('tabindex', sf.base.isNullOrUndefined(firstChild.getAttribute("tabIndex")) ? '-1' : this.getDataTabindex(firstChild));
            firstChild.setAttribute('data-tabindex', sf.base.isNullOrUndefined(firstChild.getAttribute("tabIndex")) ? '-1' : this.getDataTabindex(firstChild));
          }
        }
      }
    };
    SfToolbar.prototype.unwireKeyboardEvent = function () {
      if (this.keyModule) {
        sf.base.EventHandler.remove(this.element, 'keydown', this.docKeyDown);
        this.keyModule.destroy();
        this.keyModule = null;
      }
    };
    SfToolbar.prototype.docKeyDown = function (e) {
      if (e.target.tagName === 'INPUT') {
        return;
      }
      var popCheck = !sf.base.isNullOrUndefined(this.popObj) && sf.base.isVisible(this.popObj.element) && this.options.overflowMode !== 'Extended';
      if (e.keyCode === TAB && e.target.classList.contains('e-hor-nav') === true && popCheck) {
        this.popObj.hide({
          name: 'FadeOut',
          duration: 100
        });
      }
      var keyCheck = e.keyCode === DOWNARROW || e.keyCode === UPARROW || e.keyCode === END || e.keyCode === HOME;
      if (keyCheck) {
        e.preventDefault();
      }
    };
    SfToolbar.prototype.unwireEvents = function () {
      sf.base.EventHandler.remove(this.element, 'click', this.clickHandler);
      this.destroyScroll();
      this.unwireKeyboardEvent();
      window.removeEventListener('resize', this.resizeContext);
      window.removeEventListener('orientationchange', this.orientationChangeContext);
      sf.base.EventHandler.remove(document, 'scroll', this.docEvent);
      sf.base.EventHandler.remove(document, 'click', this.docEvent);
    };
    SfToolbar.prototype.clearProperty = function () {
      this.tbarEle = [];
      this.tbarAlgEle = {
        lefts: [],
        centers: [],
        rights: []
      };
    };
    SfToolbar.prototype.docEvent = function (e) {
      var popEle = sf.base.closest(e.target, '.e-popup');
      if (this.popObj && sf.base.isVisible(this.popObj.element) && !popEle && this.options.overflowMode === 'Popup') {
        this.popObj.hide({
          name: 'FadeOut',
          duration: 100
        });
      }
    };
    SfToolbar.prototype.destroyScroll = function () {
      if (this.scrollModule) {
        if (this.tbarAlign) {
          sf.base.addClass([this.scrollModule.element], CLS_TBARPOS);
        }
        this.scrollModule.destroy();
        this.scrollModule = null;
      }
    };
    SfToolbar.prototype.destroyMode = function () {
      if (this.scrollModule) {
        this.scrollPosition = this.scrollModule.scrollEle[this.scrollModule.element.classList.contains('e-hscroll') ? 'scrollLeft' : 'scrollTop'];
        sf.base.removeClass([this.scrollModule.element], CLS_RTL);
        this.destroyScroll();
      }
      sf.base.removeClass([this.element], CLS_EXTENDEDPOPOPEN);
      sf.base.removeClass([this.element], CLS_EXTEANDABLE_TOOLBAR);
      var tempEle = this.element.querySelector('.e-toolbar-multirow');
      if (tempEle) {
        sf.base.removeClass([tempEle], CLS_MULTIROW);
      }
      if (this.popObj) {
        this.popupRefresh(this.popObj.element, true);
      }
    };
    SfToolbar.prototype.elementFocus = function (ele) {
      var fChild = ele.firstElementChild;
      if (fChild) {
        fChild.focus();
        this.activeEleSwitch(ele);
      } else {
        ele.focus();
      }
    };
    SfToolbar.prototype.clstElement = function (tbrNavChk, trgt) {
      var clst;
      if (tbrNavChk && this.popObj && sf.base.isVisible(this.popObj.element)) {
        clst = this.popObj.element.querySelector('.' + CLS_ITEM);
      } else if (this.element === trgt || tbrNavChk) {
        clst = this.element.querySelector(NonFocusableSelectorClass);
      } else {
        clst = sf.base.closest(trgt, '.' + CLS_ITEM);
      }
      return clst;
    };
    SfToolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {
      var popObj = this.popObj;
      var rootEle = this.element;
      var popAnimate = {
        name: 'FadeOut',
        duration: 100
      };
      var ele;
      var nodes;
      var value;
      switch (e.action) {
        case 'moveRight':
          if (this.options.isVertical) {
            return;
          }
          if (rootEle === trgt) {
            this.elementFocus(clst);
          } else if (!navChk) {
            this.eleFocus(clst, 'next');
          }
          break;
        case 'moveLeft':
          if (this.options.isVertical) {
            return;
          }
          if (!navChk) {
            this.eleFocus(clst, 'previous');
          }
          break;
        case 'home':
        case 'end':
          if (clst) {
            var popupCheck = sf.base.closest(clst, '.e-popup');
            var extendedPopup = this.element.querySelector('.' + CLS_EXTENDABLECLASS);
            if (this.options.overflowMode === 'Extended' && extendedPopup && extendedPopup.classList.contains('e-popup-open')) {
              popupCheck = e.action === 'end' ? extendedPopup : null;
            }
            if (popupCheck) {
              if (sf.base.isVisible(this.popObj.element)) {
                nodes = [].slice.call(popupCheck.children);
                if (e.action === 'home') {
                  ele = nodes[0];
                } else {
                  ele = nodes[nodes.length - 1];
                }
              }
            } else {
              nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_SPACER + ' )');
              if (e.action === 'home') {
                ele = nodes[0];
              } else {
                ele = nodes[nodes.length - 1];
              }
            }
            if (ele) {
              this.elementFocus(ele);
            }
          }
          break;
        case 'moveUp':
        case 'moveDown':
          value = e.action === 'moveUp' ? 'previous' : 'next';
          if (!this.options.isVertical) {
            if (popObj && sf.base.closest(trgt, '.e-popup')) {
              var popEle = popObj.element;
              var popFrstEle = popEle.firstElementChild;
              if (value === 'previous' && popFrstEle === clst || value === 'next' && popEle.lastElementChild === clst) {
                return;
              } else {
                this.eleFocus(clst, value);
              }
            } else if (e.action === 'moveDown' && popObj && sf.base.isVisible(popObj.element)) {
              this.elementFocus(clst);
            }
          } else {
            if (e.action === 'moveUp') {
              this.eleFocus(clst, 'previous');
            } else {
              this.eleFocus(clst, 'next');
            }
          }
          break;
        case 'tab':
          if (!scrollChk && !navChk) {
            var ele_1 = clst.firstElementChild;
            if (rootEle === trgt) {
              if (this.activeEle) {
                this.activeEle.focus();
              } else {
                this.activeEleRemove(ele_1);
                ele_1.focus();
              }
            }
          }
          break;
        case 'popupClose':
          if (popObj && this.options.overflowMode !== 'Extended') {
            popObj.hide(popAnimate);
          }
          break;
        case 'popupOpen':
          if (!navChk) {
            return;
          }
          if (popObj && !sf.base.isVisible(popObj.element)) {
            popObj.element.style.top = rootEle.offsetHeight + 'px';
            popObj.show({
              name: 'FadeIn',
              duration: 100
            });
          } else {
            popObj.hide(popAnimate);
          }
          break;
      }
    };
    SfToolbar.prototype.keyActionHandler = function (e) {
      var trgt = e.target;
      if (trgt.tagName === 'INPUT' || trgt.tagName === 'TEXTAREA' || this.element.classList.contains(CLS_DISABLE)) {
        return;
      }
      e.preventDefault();
      var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);
      var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);
      var clst = this.clstElement(tbrNavChk, trgt);
      if (clst || tbarScrollChk) {
        this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);
      }
    };
    SfToolbar.prototype.eleContains = function (el) {
      var isInputEle = el.classList.contains('e-template') ? !sf.base.isNullOrUndefined(el.querySelector('.e-input')) ? true : false : false;
      return el.classList.contains(CLS_SEPARATOR) || this.nonFocusableElements(el) || el.classList.contains(CLS_DISABLE) || el.getAttribute('disabled') || el.classList.contains(CLS_HIDDEN) || !sf.base.isVisible(el) || isInputEle;
    };
    SfToolbar.prototype.eleFocus = function (closest$$1, pos) {
      var sib = Object(closest$$1)[pos + 'ElementSibling'];
      if (sib) {
        var skipEle = this.eleContains(sib);
        if (skipEle) {
          this.eleFocus(sib, pos);
          return;
        }
        this.elementFocus(sib);
      } else if (this.tbarAlign) {
        var elem = Object(closest$$1.parentElement)[pos + 'ElementSibling'];
        if (!sf.base.isNullOrUndefined(elem) && elem.children.length === 0) {
          elem = Object(elem)[pos + 'ElementSibling'];
        }
        if (!sf.base.isNullOrUndefined(elem) && elem.children.length > 0) {
          if (pos === 'next') {
            var el = elem.querySelector('.' + CLS_ITEM);
            if (this.eleContains(el)) {
              this.eleFocus(el, pos);
            } else {
              el.firstElementChild.focus();
              this.activeEleSwitch(el);
            }
          } else {
            var el = elem.lastElementChild;
            if (this.eleContains(el)) {
              this.eleFocus(el, pos);
            } else {
              this.elementFocus(el);
            }
          }
        }
      }
    };
    SfToolbar.prototype.clickHandler = function (e) {
      if (this.element.classList.contains('e-drag-action')) {
        return;
      }
      var clst = sf.base.closest(e.target, '.' + CLS_ITEM);
      if (!sf.base.isNullOrUndefined(clst) && !clst.classList.contains(CLS_DISABLE) && !sf.base.isNullOrUndefined(clst.firstElementChild) && clst.firstElementChild.getAttribute('aria-disabled') !== 'true') {
        return;
      }
      var trgt = e.target;
      var clsList = trgt.classList;
      var ele = this.element;
      var popupNav = sf.base.closest(trgt, '.' + CLS_TBARNAV);
      var trgParentDataIndex;
      var item;
      if (!popupNav) {
        popupNav = trgt;
      }
      if (!ele.children[0].classList.contains('e-hscroll') && !ele.children[0].classList.contains('e-vscroll') && clsList.contains(CLS_TBARNAV)) {
        clsList = trgt.querySelector('.e-icons').classList;
      }
      if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {
        this.popupClickHandler(ele, popupNav, CLS_RTL);
      }
      if (sf.base.isNullOrUndefined(clst) && !popupNav.classList.contains(CLS_TBARNAV)) {
        return;
      }
      if (!sf.base.isNullOrUndefined(clst)) {
        trgParentDataIndex = parseInt(clst.getAttribute('data-index'), 10);
        item = {
          id: clst.id
        };
      }
      var eventArgs = {
        altKey: e.altKey,
        button: e.button,
        buttons: e.buttons,
        clientX: e.clientX,
        clientY: e.clientY,
        ctrlKey: e.ctrlKey,
        detail: e.detail,
        metaKey: e.metaKey,
        offsetX: e.offsetX,
        offsetY: e.offsetY,
        screenX: e.screenX,
        screenY: e.screenY,
        shiftKey: e.shiftKey,
        type: e.type
      };
      this.dotNetRef.invokeMethodAsync('TriggerClickEvent', eventArgs, trgParentDataIndex, item);
    };
    SfToolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {
      var popObj = this.popObj;
      if (sf.base.isVisible(popObj.element)) {
        popupNav.classList.remove(CLS_TBARNAVACT);
        popObj.hide({
          name: 'FadeOut',
          duration: 100
        });
      } else {
        if (ele.classList.contains(CLS_RTL) || this.options.isVerticalLeft) {
          if (ele.classList.contains(CLS_RTL)) {
            popObj.enableRtl = true;
          }
          popObj.position = {
            X: 'left',
            Y: 'top'
          };
        }
        if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL) && !this.options.isVerticalLeft) {
          popObj.enableRtl = false;
          popObj.position = {
            X: 'right',
            Y: 'top'
          };
        }
        popObj.dataBind();
        popObj.refreshPosition();
        popObj.element.style.top = this.getElementOffsetY() + 'px';
        if (this.options.overflowMode === 'Extended') {
          popObj.element.style.left = '0px';
          popObj.element.style.minHeight = '0px';
        }
        popupNav.classList.add(CLS_TBARNAVACT);
        popObj.show({
          name: 'FadeIn',
          duration: 100
        });
      }
    };
    SfToolbar.prototype.render = function () {
      this.scrollModule = null;
      this.popObj = null;
      this.isExtendedOpen = false;
      this.popupPriCount = 0;
      var width = sf.base.formatUnit(this.options.width);
      var height = sf.base.formatUnit(this.options.height);
      if (this.element) {
        if (sf.base.Browser.info.name !== 'msie' || this.options.height !== 'auto') {
          sf.base.setStyleAttribute(this.element, {
            'height': height
          });
        }
        sf.base.setStyleAttribute(this.element, {
          'width': width
        });
        this.renderControl();
        this.wireEvents();
      }
    };
    SfToolbar.prototype.renderControl = function () {
      this.tbarAlgEle = {
        lefts: [],
        centers: [],
        rights: []
      };
      this.renderItems();
      this.renderLayout();
    };
    SfToolbar.prototype.renderLayout = function () {
      this.renderOverflowMode();
      if (this.tbarAlign) {
        this.itemPositioning();
      }
      if (this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element)) {
        this.popupRefresh(this.popObj.element, false);
      }
      this.separator();
    };
    SfToolbar.prototype.itemsAlign = function (items, itemEleDom, firstRender) {
      var innerItem;
      var innerPos;
      if (!this.tbarEle) {
        this.tbarEle = [];
      }
      for (var i = 0; i < items.length; i++) {
        var itemEleBlaDom = this.element.querySelector('.' + BZ_ITEMS);
        if (firstRender) {
          innerItem = itemEleDom.querySelector('.' + CLS_ITEM + '[id="' + items[i].id + '"]');
        } else {
          innerItem = itemEleBlaDom.querySelector('.' + CLS_ITEM + '[id="' + items[i].id + '"]');
        }
        if (!innerItem) {
          continue;
        }
        if (items[i].overflow !== 'Show' && items[i].showAlwaysInPopup && !innerItem.classList.contains(CLS_SEPARATOR)) {
          this.popupPriCount++;
        }
        if (items[i].htmlAttributes) {
          this.setAttr(items[i].htmlAttributes, innerItem);
        }
        if (items[i].type === 'Button') {
          sf.base.EventHandler.remove(innerItem, 'click', this.itemClick);
          sf.base.EventHandler.add(innerItem, 'click', this.itemClick, this);
        }
        if (this.tbarEle.indexOf(innerItem) === -1) {
          this.tbarEle.push(innerItem);
        }
        if (this.options.overflowMode === 'MultiRow' && firstRender) {
          continue;
        }
        if (!this.tbarAlign) {
          this.tbarItemAlign(items[i], itemEleDom, i);
        }
        innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());
        if (innerPos) {
          if (!(items[i].showAlwaysInPopup && items[i].overflow !== 'Show')) {
            this.tbarAlgEle[(items[i].align + 's').toLowerCase()].push(innerItem);
          }
          innerPos.appendChild(innerItem);
        } else if (!firstRender) {
          itemEleDom.appendChild(innerItem);
        }
      }
    };
    SfToolbar.prototype.serverItemsRefresh = function (firstRender) {
      var ele = this.element;
      var wrapBlaEleDom = ele.querySelector('.' + BZ_ITEMS);
      var itemEleDom = ele.querySelector('.' + CLS_ITEMS);
      if (itemEleDom && itemEleDom.children.length > 0 || wrapBlaEleDom.children.length > 0) {
        if (!itemEleDom && ele && ele.classList.contains(CLS_TOOLBAR) && ele.firstElementChild) {
          itemEleDom = sf.base.createElement('div', {
            className: CLS_ITEMS
          });
          ele.insertBefore(itemEleDom, ele.firstElementChild);
        }
        this.itemsAlign(this.options.items, itemEleDom, firstRender);
        this.renderLayout();
        this.refreshOverflow();
      }
    };
    SfToolbar.prototype.resetServerItems = function (firstRender) {
      if (firstRender) {
        return;
      }
      var wrapBlaEleDom = this.element.querySelector('.' + BZ_ITEMS);
      var itemEles = [].slice.call(sf.base.selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, this.element));
      sf.base.append(itemEles, wrapBlaEleDom);
      this.clearProperty();
    };
    SfToolbar.prototype.changeOrientation = function () {
      if (!this.options.isVertical) {
        this.element.classList.remove(CLS_VERTICAL);
        this.element.setAttribute('aria-orientation', 'horizontal');
        if (this.options.height === 'auto' || this.options.height === '100%') {
          this.element.style.height = this.options.height;
        }
      } else {
        this.element.classList.add(CLS_VERTICAL);
        this.element.setAttribute('aria-orientation', 'vertical');
        sf.base.setStyleAttribute(this.element, {
          'height': sf.base.formatUnit(this.options.height),
          'width': sf.base.formatUnit(this.options.width)
        });
      }
      this.destroyMode();
      this.refreshOverflow();
    };
    SfToolbar.prototype.initScroll = function (element, innerItems) {
      if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {
        if (this.tbarAlign) {
          this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');
        }
        if (this.options.isVertical) {
          // eslint-disable-next-line max-len
          this.scrollModule = new sf.navigations.VScroll({
            scrollStep: this.options.scrollStep,
            enableRtl: this.options.enableRtl
          }, innerItems[0]);
        } else {
          // eslint-disable-next-line max-len
          this.scrollModule = new sf.navigations.HScroll({
            scrollStep: this.options.scrollStep,
            enableRtl: this.options.enableRtl
          }, innerItems[0]);
        }
        if (this.scrollPosition) {
          this.scrollModule.scrollEle[this.scrollModule.element.classList.contains('e-hscroll') ? 'scrollLeft' : 'scrollTop'] = this.scrollPosition;
          this.scrollPosition = null;
        }
        sf.base.removeClass([this.scrollModule.element], CLS_TBARPOS);
        sf.base.setStyleAttribute(this.element, {
          overflow: 'hidden'
        });
      }
    };
    SfToolbar.prototype.itemWidthCal = function (items) {
      var _this = this;
      var width = 0;
      var style;
      [].slice.call(sf.base.selectAll('.' + CLS_ITEM, items)).forEach(function (el) {
        if (sf.base.isVisible(el)) {
          style = window.getComputedStyle(el);
          width += _this.options.isVertical ? el.offsetHeight : el.offsetWidth;
          width += parseFloat(_this.options.isVertical ? style.marginTop : style.marginRight);
          width += parseFloat(_this.options.isVertical ? style.marginBottom : style.marginLeft);
        }
      });
      return width;
    };
    SfToolbar.prototype.getScrollCntEle = function (innerItem) {
      var trgClass = this.options.isVertical ? '.e-vscroll-content' : '.e-hscroll-content';
      return innerItem.querySelector(trgClass);
    };
    SfToolbar.prototype.checkOverflow = function (element, innerItem) {
      if (sf.base.isNullOrUndefined(element) || sf.base.isNullOrUndefined(innerItem) || !sf.base.isVisible(element)) {
        return false;
      }
      var eleWidth = this.options.isVertical ? element.offsetHeight : element.offsetWidth;
      var itemWidth = this.options.isVertical ? innerItem.offsetHeight : innerItem.offsetWidth;
      if (this.tbarAlign || this.scrollModule || eleWidth === itemWidth) {
        itemWidth = this.itemWidthCal(this.scrollModule ? this.getScrollCntEle(innerItem) : innerItem);
      }
      var popNav = element.querySelector('.' + CLS_TBARNAV);
      var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);
      var navEleWidth = 0;
      if (popNav) {
        navEleWidth = this.options.isVertical ? popNav.offsetHeight : popNav.offsetWidth;
      } else if (scrollNav) {
        navEleWidth = this.options.isVertical ? scrollNav.offsetHeight * 2 : scrollNav.offsetWidth * 2;
      }
      if (itemWidth > eleWidth - navEleWidth) {
        return true;
      } else {
        return false;
      }
    };
    SfToolbar.prototype.refreshOverflow = function () {
      this.resize();
    };
    SfToolbar.prototype.toolbarAlign = function (innerItems) {
      if (this.tbarAlign) {
        sf.base.addClass([innerItems], CLS_TBARPOS);
        this.itemPositioning();
      }
    };
    SfToolbar.prototype.renderOverflowMode = function () {
      var ele = this.element;
      var innerItems = ele.querySelector('.' + CLS_ITEMS);
      var priorityCheck = this.popupPriCount > 0;
      if (ele && ele.children.length > 0) {
        this.offsetWid = ele.offsetWidth;
        sf.base.removeClass([this.element], 'e-toolpop');
        if (sf.base.Browser.info.name === 'msie' && this.options.height === 'auto') {
          ele.style.height = '';
        }
        switch (this.options.overflowMode) {
          case 'Scrollable':
            if (sf.base.isNullOrUndefined(this.scrollModule)) {
              this.initScroll(ele, [].slice.call(ele.getElementsByClassName(CLS_ITEMS)));
            }
            break;
          case 'Popup':
            sf.base.addClass([this.element], 'e-toolpop');
            if (this.tbarAlign) {
              this.removePositioning();
            }
            if (this.checkOverflow(ele, innerItems) || priorityCheck) {
              this.setOverflowAttributes(ele);
            }
            this.toolbarAlign(innerItems);
            break;
          case 'MultiRow':
            sf.base.addClass([innerItems], CLS_MULTIROW);
            if (this.checkOverflow(ele, innerItems) && this.tbarAlign) {
              this.removePositioning();
              sf.base.addClass([innerItems], CLS_MULTIROWPOS);
            }
            if (ele.style.overflow === 'hidden') {
              ele.style.overflow = '';
            }
            if (sf.base.Browser.info.name === 'msie' || ele.style.height !== 'auto') {
              ele.style.height = 'auto';
            }
            break;
          case 'Extended':
            sf.base.addClass([this.element], CLS_EXTEANDABLE_TOOLBAR);
            if (this.checkOverflow(ele, innerItems) || priorityCheck) {
              if (this.tbarAlign) {
                this.removePositioning();
              }
              this.setOverflowAttributes(ele);
            }
            this.toolbarAlign(innerItems);
        }
      }
    };
    SfToolbar.prototype.setOverflowAttributes = function (ele) {
      this.createPopupEle(ele, [].slice.call(sf.base.selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));
      var ariaAttr = {
        'tabindex': '0',
        'role': 'button',
        'aria-haspopup': 'true',
        'aria-label': 'overflow'
      };
      sf.base.attributes(this.element.querySelector('.' + CLS_TBARNAV), ariaAttr);
    };
    SfToolbar.prototype.separator = function () {
      var element = this.element;
      var eleItem = [].slice.call(element.querySelectorAll('.' + CLS_SEPARATOR));
      var multiVar = element.querySelector('.' + CLS_MULTIROW_SEPARATOR);
      var extendVar = element.querySelector('.' + CLS_EXTENDABLE_SEPARATOR);
      var eleInlineItem = this.options.overflowMode === 'MultiRow' ? multiVar : extendVar;
      if (eleInlineItem !== null) {
        if (this.options.overflowMode === 'MultiRow') {
          eleInlineItem.classList.remove(CLS_MULTIROW_SEPARATOR);
        } else if (this.options.overflowMode === 'Extended') {
          eleInlineItem.classList.remove(CLS_EXTENDABLE_SEPARATOR);
        }
      }
      for (var i = 0; i <= eleItem.length - 1; i++) {
        if (eleItem[i].offsetLeft < 30 && eleItem[i].offsetLeft !== 0) {
          if (this.options.overflowMode === 'MultiRow') {
            eleItem[i].classList.add(CLS_MULTIROW_SEPARATOR);
          } else if (this.options.overflowMode === 'Extended') {
            eleItem[i].classList.add(CLS_EXTENDABLE_SEPARATOR);
          }
        }
      }
    };
    SfToolbar.prototype.createPopupEle = function (ele, innerEle) {
      var innerNav = ele.querySelector('.' + CLS_TBARNAV);
      var vertical = this.options.isVertical;
      if (!innerNav) {
        this.createPopupIcon(ele);
      }
      innerNav = ele.querySelector('.' + CLS_TBARNAV);
      var innerNavDom = vertical ? innerNav.offsetHeight : innerNav.offsetWidth;
      var eleWidth = (vertical ? ele.offsetHeight : ele.offsetWidth) - innerNavDom;
      this.element.classList.remove('e-rtl');
      sf.base.setStyleAttribute(this.element, {
        direction: 'initial'
      });
      this.checkPriority(ele, innerEle, eleWidth, true);
      if (this.options.enableRtl) {
        this.element.classList.add('e-rtl');
      }
      this.element.style.removeProperty('direction');
      this.createPopup();
    };
    SfToolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight, sepHeight) {
      var element = this.element;
      var nodes = sf.base.selectAll('.' + CLS_TBAROVERFLOW, ele);
      var nodeIndex = 0;
      var poppedEle = [].slice.call(sf.base.selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));
      var nodePri = 0;
      poppedEle.forEach(function (el, index) {
        nodes = sf.base.selectAll('.' + CLS_TBAROVERFLOW, ele);
        if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {
          if (tbarObj.tbResize && nodes.length > index) {
            ele.insertBefore(el, nodes[index]);
            ++nodePri;
          } else {
            ele.insertBefore(el, ele.children[nodes.length]);
            ++nodePri;
          }
        } else if (el.classList.contains(CLS_TBAROVERFLOW)) {
          ele.insertBefore(el, ele.firstChild);
          ++nodePri;
        } else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {
          ele.insertBefore(el, ele.firstChild);
          ++nodePri;
        } else if (el.classList.contains(CLS_POPOVERFLOW)) {
          popupPri.push(el);
        } else if (tbarObj.tbResize) {
          ele.insertBefore(el, ele.children[nodeIndex + nodePri]);
          ++nodeIndex;
        } else {
          ele.appendChild(el);
        }
        if (tbarObj.nonFocusableElements(el)) {
          sf.base.setStyleAttribute(el, {
            display: '',
            height: sepHeight + 'px'
          });
        } else {
          sf.base.setStyleAttribute(el, {
            display: '',
            height: eleHeight + 'px'
          });
        }
      });
      popupPri.forEach(function (el) {
        ele.appendChild(el);
      });
      var tbarEle = sf.base.selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));
      for (var i = tbarEle.length - 1; i >= 0; i--) {
        var tbarElement = tbarEle[i];
        if (this.nonFocusableElements(tbarElement) && this.options.overflowMode !== 'Extended') {
          sf.base.setStyleAttribute(tbarElement, {
            display: 'none'
          });
        } else {
          break;
        }
      }
    };
    SfToolbar.prototype.createPopup = function () {
      var element = this.element;
      var sepHeight;
      var sepItem;
      if (this.options.overflowMode === 'Extended') {
        sepItem = element.querySelector('.' + CLS_SEPARATOR + ':not(.' + CLS_POPUP + ')');
        sepHeight = element.style.height === 'auto' || element.style.height === '' ? null : sepItem && sepItem.offsetHeight;
      }
      // eslint-disable-next-line max-len
      var eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_SPACER + '):not(.' + CLS_POPUP + '):not(.' + CLS_HIDDEN + ')');
      var eleHeight = element.style.height === 'auto' || element.style.height === '' ? null : eleItem && eleItem.offsetHeight;
      var ele;
      var popupPri = [];
      if (element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS)) {
        ele = element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS);
      } else {
        var extendEle = sf.base.createElement('div', {
          id: element.id + '_popup',
          className: CLS_POPUPCLASS + ' ' + CLS_EXTENDABLECLASS
        });
        var popupEle = sf.base.createElement('div', {
          id: element.id + '_popup',
          className: CLS_POPUPCLASS
        });
        ele = this.options.overflowMode === 'Extended' ? extendEle : popupEle;
      }
      this.pushingPoppedEle(this, popupPri, ele, eleHeight, sepHeight);
      this.popupInit(element, ele);
    };
    SfToolbar.prototype.getElementOffsetY = function () {
      return this.options.overflowMode === 'Extended' && window.getComputedStyle(this.element).getPropertyValue('box-sizing') === 'border-box' ? this.element.clientHeight : this.element.offsetHeight;
    };
    SfToolbar.prototype.popupInit = function (element, ele) {
      if (!this.popObj) {
        element.appendChild(ele);
        sf.base.setStyleAttribute(this.element, {
          overflow: ''
        });
        var eleStyles = window.getComputedStyle(this.element);
        var popup = new sf.popups.Popup(null, {
          relateTo: this.element,
          offsetY: this.options.isVertical ? 0 : this.getElementOffsetY(),
          enableRtl: this.options.enableRtl,
          open: this.popupOpen.bind(this),
          close: this.popupClose.bind(this),
          collision: {
            Y: this.options.enableCollision ? 'flip' : 'none'
          },
          position: this.options.enableRtl ? {
            X: 'left',
            Y: 'top'
          } : {
            X: 'right',
            Y: 'top'
          }
        });
        if (this.options.overflowMode === 'Extended') {
          popup.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;
          popup.offsetX = 0;
        }
        popup.appendTo(ele);
        sf.base.EventHandler.add(document, 'scroll', this.docEvent.bind(this));
        sf.base.EventHandler.add(document, 'click ', this.docEvent.bind(this));
        popup.element.style.maxHeight = popup.element.offsetHeight + 'px';
        if (this.options.isVertical) {
          popup.element.style.visibility = 'hidden';
        }
        if (this.isExtendedOpen) {
          var popupNav = this.element.querySelector('.' + CLS_TBARNAV);
          popupNav.classList.add(CLS_TBARNAVACT);
          sf.base.classList(popupNav.firstElementChild, [CLS_POPUPICON], [CLS_POPUPDOWN]);
          this.element.querySelector('.' + CLS_EXTENDABLECLASS).classList.add(CLS_POPUPOPEN);
        } else {
          popup.hide();
        }
        this.popObj = popup;
      } else {
        var popupEle = this.popObj.element;
        if (this.options.overflowMode === 'Extended') {
          var eleStyle = window.getComputedStyle(this.element);
          this.popObj.width = parseFloat(eleStyle.width) + parseFloat(eleStyle.borderRightWidth) * 2;
          this.popObj.offsetX = 0;
          this.popObj.dataBind();
        }
        sf.base.setStyleAttribute(popupEle, {
          maxHeight: '',
          display: 'block'
        });
        sf.base.setStyleAttribute(popupEle, {
          maxHeight: popupEle.offsetHeight + 'px',
          display: ''
        });
      }
    };
    SfToolbar.prototype.tbarPopupHandler = function (isOpen) {
      if (this.options.overflowMode === 'Extended') {
        if (isOpen) {
          sf.base.addClass([this.element], CLS_EXTENDEDPOPOPEN);
        } else {
          sf.base.removeClass([this.element], CLS_EXTENDEDPOPOPEN);
        }
      }
    };
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    SfToolbar.prototype.popupOpen = function (e) {
      var popObj = this.popObj;
      if (!this.options.isVertical) {
        popObj.offsetY = this.getElementOffsetY();
        popObj.dataBind();
      }
      var popupEle = this.popObj.element;
      var toolEle = this.popObj.element.parentElement;
      var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);
      popupNav.setAttribute('aria-expanded', 'true');
      sf.base.setStyleAttribute(popObj.element, {
        height: 'auto',
        maxHeight: ''
      });
      popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';
      if (this.options.overflowMode === 'Extended') {
        popObj.element.style.left = '';
        popObj.element.style.minHeight = '';
      }
      var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + sf.popups.calculatePosition(toolEle).top;
      var popIcon = popupNav.firstElementChild;
      popupNav.classList.add(CLS_TBARNAVACT);
      sf.base.classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);
      this.tbarPopupHandler(true);
      var scrollVal = sf.base.isNullOrUndefined(window.scrollY) ? 0 : window.scrollY;
      // eslint-disable-next-line max-len
      if ((this.options.overflowMode !== 'Extended' || this.options.enableCollision) && !this.options.isVertical && window.innerHeight + scrollVal < popupElePos && this.element.offsetTop < popupEle.offsetHeight) {
        var overflowHeight = popupEle.offsetHeight - (popupElePos - window.innerHeight - scrollVal + 5);
        popObj.height = overflowHeight + 'px';
        for (var i = 0; i <= popupEle.childElementCount; i++) {
          var ele = popupEle.children[i];
          if (ele.offsetTop + ele.offsetHeight > overflowHeight) {
            overflowHeight = ele.offsetTop;
            break;
          }
        }
        sf.base.setStyleAttribute(popObj.element, {
          maxHeight: overflowHeight + 'px'
        });
      } else if (this.options.isVertical) {
        var tbEleData = this.element.getBoundingClientRect();
        sf.base.setStyleAttribute(popObj.element, {
          maxHeight: tbEleData.top + this.element.offsetHeight + 'px',
          bottom: 0,
          visibility: ''
        });
      }
      if (popObj) {
        var popupOffset = popupEle.getBoundingClientRect();
        if (popupOffset.right > document.documentElement.clientWidth && popupOffset.width > toolEle.getBoundingClientRect().width) {
          popObj.collision = {
            Y: 'none'
          };
          popObj.dataBind();
        }
        popObj.refreshPosition();
      }
    };
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    SfToolbar.prototype.popupClose = function (e) {
      var element = this.element;
      var popupNav = element.querySelector('.' + CLS_TBARNAV);
      popupNav.setAttribute('aria-expanded', 'false');
      var popIcon = popupNav.firstElementChild;
      popupNav.classList.remove(CLS_TBARNAVACT);
      sf.base.classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);
      this.tbarPopupHandler(false);
    };
    SfToolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {
      var popPriority = this.popupPriCount > 0;
      var len = inEle.length;
      var eleWid = eleWidth;
      var eleOffset;
      var checkoffset;
      var sepCheck = 0;
      var itemCount = 0;
      var itemPopCount = 0;
      // eslint-disable-next-line @typescript-eslint/ban-types
      var checkClass = function checkClass(ele, val) {
        var rVal = false;
        val.forEach(function (cls) {
          if (ele.classList.contains(cls)) {
            rVal = true;
          }
        });
        return rVal;
      };
      for (var i = len - 1; i >= 0; i--) {
        var mrgn = void 0;
        var compuStyle = window.getComputedStyle(inEle[i]);
        if (this.options.isVertical) {
          mrgn = parseFloat(compuStyle.marginTop);
          mrgn += parseFloat(compuStyle.marginBottom);
        } else {
          mrgn = parseFloat(compuStyle.marginRight);
          mrgn += parseFloat(compuStyle.marginLeft);
        }
        var fstEleCheck = inEle[i] === this.tbarEle[0];
        if (fstEleCheck) {
          this.tbarEleMrgn = mrgn;
        }
        eleOffset = this.options.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth;
        var eleWid_1 = fstEleCheck ? eleOffset + mrgn : eleOffset;
        if (checkClass(inEle[i], [CLS_POPPRI]) && popPriority) {
          inEle[i].classList.add(CLS_POPUP);
          if (this.options.isVertical) {
            sf.base.setStyleAttribute(inEle[i], {
              display: 'none',
              minHeight: eleWid_1 + 'px'
            });
          } else {
            sf.base.setStyleAttribute(inEle[i], {
              display: 'none',
              minWidth: eleWid_1 + 'px'
            });
          }
          itemPopCount++;
        }
        if (this.options.isVertical) {
          checkoffset = inEle[i].offsetTop + inEle[i].offsetHeight + mrgn > eleWidth;
        } else {
          checkoffset = inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn > eleWidth;
        }
        var toolbarItems = ele.querySelector('.' + CLS_ITEMS);
        var checkWidth = ele.querySelector('.' + CLS_SPACER) ? toolbarItems.offsetWidth < this.getItemsWidth(toolbarItems) : checkoffset;
        if (checkWidth) {
          if (this.nonFocusableElements(inEle[i])) {
            if (this.options.overflowMode === 'Extended') {
              if (itemCount === itemPopCount) {
                var sepEle = inEle[i];
                if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE]) || checkClass(sepEle, [CLS_SPACER, CLS_TBARIGNORE])) {
                  inEle[i].classList.add(CLS_POPUP);
                  itemPopCount++;
                }
              }
              itemCount++;
            } else if (this.options.overflowMode === 'Popup') {
              if (sepCheck > 0 && itemCount === itemPopCount) {
                var sepEle = inEle[i + itemCount + (sepCheck - 1)];
                if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE]) || checkClass(sepEle, [CLS_SPACER, CLS_TBARIGNORE]) || checkClass(sepEle, [CLS_SPACER, CLS_TBARIGNORE])) {
                  sf.base.setStyleAttribute(sepEle, {
                    display: 'none'
                  });
                }
              }
              sepCheck++;
              itemCount = 0;
              itemPopCount = 0;
            }
          } else {
            itemCount++;
          }
          if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {
            eleWidth -= (this.options.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + mrgn;
          } else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE]) && !checkClass(inEle[i], [CLS_SPACER, CLS_TBARIGNORE])) {
            inEle[i].classList.add(CLS_POPUP);
            if (this.options.isVertical) {
              sf.base.setStyleAttribute(inEle[i], {
                display: 'none',
                minHeight: eleWid_1 + 'px'
              });
            } else {
              sf.base.setStyleAttribute(inEle[i], {
                display: 'none',
                minWidth: eleWid_1 + 'px'
              });
            }
            itemPopCount++;
          } else {
            eleWidth -= (this.options.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + mrgn;
          }
        }
      }
      if (pre) {
        var popedEle = sf.base.selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);
        this.checkPriority(ele, popedEle, eleWid, false);
      }
    };
    SfToolbar.prototype.createPopupIcon = function (element) {
      var id = element.id.concat('_nav');
      var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);
      className = this.options.overflowMode === 'Extended' ? className + ' ' + CLS_EXTENDPOPUP : className;
      var nav = sf.base.createElement('div', {
        id: id,
        className: className
      });
      if (sf.base.Browser.info.name === 'msie' || sf.base.Browser.info.name === 'edge') {
        nav.classList.add('e-ie-align');
      }
      var navItem = sf.base.createElement('div', {
        className: CLS_POPUPDOWN + ' e-icons'
      });
      nav.appendChild(navItem);
      nav.setAttribute('tabindex', '0');
      nav.setAttribute('role', 'button');
      element.appendChild(nav);
      element.classList.add('e-pop-mode');
    };
    SfToolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {
      var ignoreCount = ig;
      var popEle = this.popObj.element;
      var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_SPACER + '):not(.' + CLS_TBAROVERFLOW + ')';
      var priEleCnt = sf.base.selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;
      // eslint-disable-next-line @typescript-eslint/ban-types
      var checkClass = function checkClass(ele, val) {
        return ele.classList.contains(val);
      };
      if (sf.base.selectAll(query, inEle).length === 0) {
        var eleSep = inEle.children[indx - (indx - sepPri) - 1];
        var ignoreCheck = !sf.base.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_TBARIGNORE);
        if (!sf.base.isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && checkClass(eleSep, CLS_SPACER) && !sf.base.isVisible(eleSep) || ignoreCheck) {
          var sepDisplay = 'none';
          eleSep.style.display = 'inherit';
          var eleSepWidth = eleSep.offsetWidth + parseFloat(window.getComputedStyle(eleSep).marginRight) * 2;
          var prevSep = eleSep.previousElementSibling;
          if (elWid + eleSepWidth < wid || des) {
            inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);
            if (!sf.base.isNullOrUndefined(prevSep)) {
              prevSep.style.display = '';
            }
          } else {
            if (this.nonFocusableElements(prevSep)) {
              prevSep.style.display = sepDisplay;
            }
          }
          eleSep.style.display = '';
        } else {
          inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);
        }
      } else {
        inEle.insertBefore(el, inEle.children[indx + ignoreCount - priEleCnt]);
      }
    };
    SfToolbar.prototype.popupRefresh = function (popupEle, destroy) {
      var _this = this;
      var ele = this.element;
      var isVer = this.options.isVertical;
      var popNav = ele.querySelector('.' + CLS_TBARNAV);
      var innerEle = ele.querySelector('.' + CLS_ITEMS);
      if (sf.base.isNullOrUndefined(popNav) || sf.base.isNullOrUndefined(innerEle)) {
        return;
      }
      innerEle.removeAttribute('style');
      popupEle.style.display = 'block';
      var dimension;
      if (isVer) {
        dimension = ele.offsetHeight - (popNav.offsetHeight + innerEle.offsetHeight);
      } else {
        dimension = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);
      }
      var popupEleWidth = 0;
      [].slice.call(popupEle.children).forEach(function (el) {
        popupEleWidth += _this.popupEleWidth(el);
        sf.base.setStyleAttribute(el, {
          'position': ''
        });
      });
      if (dimension + (isVer ? popNav.offsetHeight : popNav.offsetWidth) > popupEleWidth && this.popupPriCount === 0) {
        destroy = true;
      }
      this.popupEleRefresh(dimension, popupEle, destroy);
      popupEle.style.display = '';
      if (popupEle.children.length === 0 && popNav && this.popObj) {
        sf.base.detach(popNav);
        popNav = null;
        this.popObj.destroy();
        sf.base.detach(this.popObj.element);
        this.popObj = null;
        this.element.classList.remove('e-pop-mode');
      }
    };
    SfToolbar.prototype.ignoreEleFetch = function (index, innerEle) {
      var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));
      var ignoreInx = [];
      var count = 0;
      if (ignoreEle.length > 0) {
        ignoreEle.forEach(function (ele) {
          ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));
        });
      } else {
        return 0;
      }
      ignoreInx.forEach(function (val) {
        if (val <= index) {
          count++;
        }
      });
      return count;
    };
    SfToolbar.prototype.checkPopupRefresh = function (root, popEle) {
      popEle.style.display = 'block';
      var elWid = this.popupEleWidth(popEle.firstElementChild);
      popEle.firstElementChild.style.removeProperty('Position');
      var tbarWidth = root.offsetWidth - root.querySelector('.' + CLS_TBARNAV).offsetWidth;
      var tbarItemsWid = root.querySelector('.' + CLS_ITEMS).offsetWidth;
      popEle.style.removeProperty('display');
      if (tbarWidth > elWid + tbarItemsWid) {
        return true;
      }
      return false;
    };
    SfToolbar.prototype.popupEleWidth = function (el) {
      el.style.position = 'absolute';
      var elWidth = this.options.isVertical ? el.offsetHeight : el.offsetWidth;
      var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);
      if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {
        var btn = el.children[0];
        if (!sf.base.isNullOrUndefined(btnText) && el.classList.contains(CLS_TBARTEXT)) {
          btnText.style.display = 'none';
        } else if (!sf.base.isNullOrUndefined(btnText) && el.classList.contains(CLS_POPUPTEXT)) {
          btnText.style.display = 'block';
        }
        btn.style.minWidth = '0%';
        elWidth = parseFloat(!this.options.isVertical ? el.style.minWidth : el.style.minHeight);
        btn.style.minWidth = '';
        btn.style.minHeight = '';
        if (!sf.base.isNullOrUndefined(btnText)) {
          btnText.style.display = '';
        }
      }
      return elWidth;
    };
    SfToolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {
      var _this = this;
      var popPriority = this.popupPriCount > 0;
      var eleSplice = this.tbarEle;
      var priEleCnt;
      var index;
      var innerEle = this.element.querySelector('.' + CLS_ITEMS);
      var ignoreCount = 0;
      var _loop_1 = function _loop_1(el) {
        if (el.classList.contains(CLS_POPPRI) && popPriority && !destroy) {
          return "continue";
        }
        var elWidth = this_1.popupEleWidth(el);
        if (el === this_1.tbarEle[0]) {
          elWidth += this_1.tbarEleMrgn;
        }
        el.style.position = '';
        if (elWidth < width || destroy) {
          sf.base.setStyleAttribute(el, {
            minWidth: '',
            height: '',
            minHeight: ''
          });
          if (!el.classList.contains(CLS_POPOVERFLOW)) {
            el.classList.remove(CLS_POPUP);
          }
          index = this_1.tbarEle.indexOf(el);
          if (this_1.tbarAlign) {
            var pos = this_1.options.items[index].align;
            index = this_1.tbarAlgEle[(pos + 's').toLowerCase()].indexOf(el);
            eleSplice = this_1.tbarAlgEle[(pos + 's').toLowerCase()];
            innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos.toLowerCase());
          }
          var sepBeforePri_1 = 0;
          if (this_1.options.overflowMode !== 'Extended') {
            eleSplice.slice(0, index).forEach(function (el) {
              if (!sf.base.isNullOrUndefined(el.classList) && (el.classList.contains(CLS_TBAROVERFLOW) || _this.nonFocusableElements(el))) {
                if (_this.nonFocusableElements(el)) {
                  el.style.display = '';
                  width -= el.offsetWidth;
                }
                sepBeforePri_1++;
              }
            });
          }
          ignoreCount = this_1.ignoreEleFetch(index, innerEle);
          if (el.classList.contains(CLS_TBAROVERFLOW)) {
            this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);
            width -= el.offsetWidth;
          } else if (index === 0) {
            innerEle.insertBefore(el, innerEle.firstChild);
            width -= el.offsetWidth;
          } else {
            priEleCnt = sf.base.selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;
            innerEle.insertBefore(el, innerEle.children[index + ignoreCount - priEleCnt]);
            width -= el.offsetWidth;
          }
          el.style.height = '';
        } else {
          return "break";
        }
      };
      var this_1 = this;
      for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {
        var el = _a[_i];
        var state_1 = _loop_1(el);
        if (state_1 === "break") break;
      }
      var checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS)[0]);
      if (checkOverflow && !destroy) {
        this.renderOverflowMode();
      }
    };
    SfToolbar.prototype.removePositioning = function () {
      var item = this.element.querySelector('.' + CLS_ITEMS);
      if (sf.base.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {
        return;
      }
      sf.base.removeClass([item], CLS_TBARPOS);
      var innerItem = [].slice.call(item.children);
      innerItem[1].removeAttribute('style');
      innerItem[2].removeAttribute('style');
    };
    SfToolbar.prototype.refreshPositioning = function () {
      var item = this.element.querySelector('.' + CLS_ITEMS);
      sf.base.addClass([item], CLS_TBARPOS);
      this.itemPositioning();
    };
    SfToolbar.prototype.itemPositioning = function () {
      var item = this.element.querySelector('.' + CLS_ITEMS);
      var margin;
      if (sf.base.isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {
        return;
      }
      var popupNav = this.element.querySelector('.' + CLS_TBARNAV);
      var innerItem;
      if (this.scrollModule) {
        var trgClass = this.options.isVertical ? CLS_VSCROLLCNT : CLS_HSCROLLCNT;
        innerItem = [].slice.call(item.querySelector('.' + trgClass).children);
      } else {
        innerItem = [].slice.call(item.children);
      }
      if (this.options.isVertical) {
        margin = innerItem[0].offsetHeight + innerItem[2].offsetHeight;
      } else {
        margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;
      }
      var tbarWid = this.options.isVertical ? this.element.offsetHeight : this.element.offsetWidth;
      if (popupNav) {
        tbarWid -= this.options.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth;
        var popWid = (this.options.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth) + 'px';
        innerItem[2].removeAttribute('style');
        if (this.options.isVertical) {
          if (this.options.enableRtl) {
            innerItem[2].style.top = popWid;
          } else {
            innerItem[2].style.bottom = popWid;
          }
        } else {
          if (this.options.enableRtl) {
            innerItem[2].style.left = popWid;
          } else {
            innerItem[2].style.right = popWid;
          }
        }
      }
      if (tbarWid <= margin) {
        return;
      }
      // eslint-disable-next-line max-len
      var value = (tbarWid - margin - (!this.options.isVertical ? innerItem[1].offsetWidth : innerItem[1].offsetHeight)) / 2;
      innerItem[1].removeAttribute('style');
      var mrgn = (!this.options.isVertical ? innerItem[0].offsetWidth : innerItem[0].offsetHeight) + value + 'px';
      if (this.options.isVertical) {
        if (this.options.enableRtl) {
          innerItem[1].style.marginBottom = mrgn;
        } else {
          innerItem[1].style.marginTop = mrgn;
        }
      } else {
        if (this.options.enableRtl) {
          innerItem[1].style.marginRight = mrgn;
        } else {
          innerItem[1].style.marginLeft = mrgn;
        }
      }
    };
    SfToolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {
      var _this = this;
      if (item.showAlwaysInPopup && item.overflow !== 'Show') {
        return;
      }
      var alignDiv = [];
      alignDiv.push(sf.base.createElement('div', {
        className: CLS_TBARLEFT
      }));
      alignDiv.push(sf.base.createElement('div', {
        className: CLS_TBARCENTER
      }));
      alignDiv.push(sf.base.createElement('div', {
        className: CLS_TBARRIGHT
      }));
      if (pos === 0 && item.align !== 'Left') {
        alignDiv.forEach(function (ele) {
          itemEle.appendChild(ele);
        });
        this.tbarAlign = true;
        sf.base.addClass([itemEle], CLS_TBARPOS);
      } else if (item.align !== 'Left') {
        var alignEle = [].slice.call(itemEle.children);
        var leftAlign_1 = alignDiv[0];
        [].slice.call(alignEle).forEach(function (el) {
          _this.tbarAlgEle.lefts.push(el);
          leftAlign_1.appendChild(el);
        });
        itemEle.appendChild(leftAlign_1);
        itemEle.appendChild(alignDiv[1]);
        itemEle.appendChild(alignDiv[2]);
        this.tbarAlign = true;
        sf.base.addClass([itemEle], CLS_TBARPOS);
      }
    };
    SfToolbar.prototype.renderItems = function () {
      var ele = this.element;
      var items = this.options.items;
      if (ele && items.length > 0) {
        var itemEleDom = ele.querySelector('.' + CLS_ITEMS);
        this.itemsAlign(items, itemEleDom, true);
      }
    };
    SfToolbar.prototype.setAttr = function (attr, element) {
      var key = Object.keys(attr);
      var keyVal;
      for (var i = 0; i < key.length; i++) {
        keyVal = key[i];
        if (keyVal === 'class') {
          sf.base.addClass([element], attr[keyVal]);
        } else {
          element.setAttribute(keyVal, attr[keyVal]);
        }
      }
    };
    SfToolbar.prototype.getDataTabindex = function (ele) {
      return sf.base.isNullOrUndefined(ele.getAttribute('data-tabindex')) ? '-1' : ele.getAttribute('data-tabindex');
    };
    SfToolbar.prototype.itemClick = function (e) {
      this.activeEleSwitch(e.currentTarget);
    };
    SfToolbar.prototype.activeEleSwitch = function (ele) {
      this.activeEleRemove(ele.firstElementChild);
      this.activeEle.focus();
    };
    SfToolbar.prototype.activeEleRemove = function (curEle) {
      if (!sf.base.isNullOrUndefined(this.activeEle)) {
        this.activeEle.setAttribute('tabindex', this.getDataTabindex(this.activeEle));
      }
      this.activeEle = curEle;
      if (this.getDataTabindex(this.activeEle) === '-1') {
        if (sf.base.isNullOrUndefined(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {
          this.updateTabIndex('-1');
          curEle.removeAttribute('tabindex');
        } else {
          var tabIndex = parseInt(this.getDataTabindex(this.activeEle)) + 1;
          this.activeEle.setAttribute('tabindex', tabIndex.toString());
        }
      }
    };
    SfToolbar.prototype.resize = function () {
      var ele = this.element;
      this.tbResize = true;
      if (this.tbarAlign) {
        this.itemPositioning();
      }
      if (this.popObj && this.options.overflowMode === 'Popup') {
        this.popObj.hide();
      }
      var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);
      if (!checkOverflow) {
        this.destroyScroll();
        var multirowele = ele.querySelector('.' + CLS_ITEMS);
        if (!sf.base.isNullOrUndefined(multirowele)) {
          sf.base.removeClass([multirowele], CLS_MULTIROWPOS);
          if (this.tbarAlign) {
            sf.base.addClass([multirowele], CLS_TBARPOS);
          }
        }
      }
      if (checkOverflow && this.scrollModule && this.offsetWid === ele.offsetWidth) {
        return;
      }
      if (this.offsetWid > ele.offsetWidth || checkOverflow) {
        this.renderOverflowMode();
      }
      if (this.popObj) {
        if (this.options.overflowMode === 'Extended') {
          var eleStyles = window.getComputedStyle(this.element);
          this.popObj.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;
        }
        if (this.tbarAlign) {
          this.removePositioning();
        }
        this.popupRefresh(this.popObj.element, false);
        if (this.tbarAlign) {
          this.refreshPositioning();
        }
      }
      this.offsetWid = ele.offsetWidth;
      this.tbResize = false;
      this.separator();
    };
    SfToolbar.prototype.orientationChange = function () {
      var _this = this;
      setTimeout(function () {
        _this.resize();
      }, 500);
    };
    SfToolbar.prototype.extendedOpen = function () {
      var sib = this.element.querySelector('.' + CLS_EXTENDABLECLASS);
      if (this.options.overflowMode === 'Extended' && sib) {
        this.isExtendedOpen = sib.classList.contains(CLS_POPUPOPEN);
      }
    };
    SfToolbar.prototype.updateHideEleTabIndex = function (ele, isHidden, eleIndex, innerItems) {
      var nextEle = innerItems[++eleIndex];
      while (nextEle) {
        var skipEle = this.eleContains(nextEle);
        if (!skipEle) {
          var dataTabIndex = nextEle.firstElementChild.getAttribute('data-tabindex');
          if (!isHidden && dataTabIndex === '-1') {
            nextEle.firstElementChild.setAttribute('tabindex', '0');
          } else if (dataTabIndex !== nextEle.firstElementChild.getAttribute('tabindex')) {
            nextEle.firstElementChild.setAttribute('tabindex', dataTabIndex);
          }
          break;
        }
        nextEle = innerItems[++eleIndex];
      }
    };
    SfToolbar.prototype.disable = function (value) {
      var rootEle = this.element;
      if (value) {
        rootEle.classList.add(CLS_DISABLE);
      } else {
        rootEle.classList.remove(CLS_DISABLE);
      }
      if (this.activeEle) {
        this.activeEle.setAttribute('tabindex', this.activeEle.getAttribute('data-tabindex'));
      }
      if (this.scrollModule) {
        this.scrollModule.disable(value);
      }
      if (this.popObj) {
        if (sf.base.isVisible(this.popObj.element) && this.options.overflowMode !== 'Extended') {
          this.popObj.hide();
        }
        rootEle.querySelector('#' + rootEle.id + '_nav').setAttribute('tabindex', !value ? '0' : '-1');
      }
    };
    SfToolbar.prototype.setCssClass = function (cssClass) {
      this.extendedOpen();
      if (this.options.cssClass) {
        sf.base.removeClass([this.element], this.options.cssClass.split(' '));
      }
      if (cssClass) {
        sf.base.addClass([this.element], cssClass.split(' '));
      }
      this.options.cssClass = cssClass;
    };
    SfToolbar.prototype.nonFocusableElements = function (element) {
      return element.classList.contains(CLS_SEPARATOR) || element.classList.contains(CLS_SPACER);
    };
    SfToolbar.prototype.getItemsWidth = function (element) {
      var width = Array.from(element.children).reduce(function (total, child) {
        return total + child.offsetWidth;
      }, 0);
      return width;
    };
    return SfToolbar;
  }();
  // tslint:disable
  var Toolbar = {
    initialize: function initialize(dataId, element, options, dotnetRef) {
      if (options.scrollStep === 0) {
        options.scrollStep = null;
      }
      var instance = new SfToolbar(dataId, element, options, dotnetRef);
      var isSpacer = instance.element.querySelector('.' + CLS_ITEMS).querySelector('.' + CLS_SPACER);
      if (isSpacer == null) {
        instance.element.classList.remove("e-spacer-toolbar");
      }
      instance.render();
    },
    hidePopup: function hidePopup(dataId, targetIndex) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element) && !sf.base.isNullOrUndefined(instance.popObj)) {
        var element = instance.element.querySelector('.' + CLS_ITEM + '[data-index="' + targetIndex + '"]');
        if (!sf.base.isNullOrUndefined(element) && !sf.base.isNullOrUndefined(sf.base.closest(element, '.' + CLS_POPUPCLASS))) {
          instance.popObj.hide({
            name: 'FadeOut',
            duration: 100
          });
        }
      }
    },
    setCssClass: function setCssClass(dataId, cssClass) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.setCssClass(cssClass);
      }
    },
    setWidth: function setWidth(dataId, width) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.options.width = width;
        instance.extendedOpen();
        var wid = instance.element.offsetWidth;
        sf.base.setStyleAttribute(instance.element, {
          'width': sf.base.formatUnit(width)
        });
        instance.renderOverflowMode();
        if (instance.popObj && wid < instance.element.offsetWidth) {
          instance.popupRefresh(instance.popObj.element, false);
        }
      }
    },
    setHeight: function setHeight(dataId, height) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.options.height = height;
        instance.extendedOpen();
        sf.base.setStyleAttribute(instance.element, {
          'height': sf.base.formatUnit(height)
        });
      }
    },
    setOverflowMode: function setOverflowMode(dataId, overflowMode) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.options.overflowMode = overflowMode;
        instance.extendedOpen();
        instance.destroyMode();
        instance.renderOverflowMode();
        if (instance.options.enableRtl) {
          sf.base.addClass([instance.element], CLS_RTL);
        }
        instance.refreshOverflow();
      }
    },
    setEnableRTL: function setEnableRTL(dataId, enableRtl) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.options.enableRtl = enableRtl;
        instance.extendedOpen();
        if (enableRtl) {
          sf.base.addClass([instance.element], CLS_RTL);
        } else {
          sf.base.removeClass([instance.element], CLS_RTL);
        }
        if (!sf.base.isNullOrUndefined(instance.scrollModule)) {
          if (enableRtl) {
            sf.base.addClass([instance.scrollModule.element], CLS_RTL);
          } else {
            sf.base.removeClass([instance.scrollModule.element], CLS_RTL);
          }
        }
        if (!sf.base.isNullOrUndefined(instance.popObj)) {
          if (enableRtl) {
            sf.base.addClass([instance.popObj.element], CLS_RTL);
          } else {
            sf.base.removeClass([instance.popObj.element], CLS_RTL);
          }
        }
        if (instance.tbarAlign) {
          instance.itemPositioning();
        }
      }
    },
    setScrollStep: function setScrollStep(dataId, scrollStep) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.options.scrollStep = scrollStep;
        instance.extendedOpen();
        if (instance.scrollModule) {
          instance.scrollModule.scrollStep = scrollStep;
        }
      }
    },
    setEnableCollision: function setEnableCollision(dataId, enableCollision) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.options.enableCollision = enableCollision;
        instance.extendedOpen();
        if (instance.popObj) {
          instance.popObj.collision = {
            Y: enableCollision ? 'flip' : 'none'
          };
        }
      }
    },
    setAllowKeyboard: function setAllowKeyboard(dataId, allowKeyboard) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.options.allowKeyboard = allowKeyboard;
        instance.extendedOpen();
        instance.unwireKeyboardEvent();
        if (allowKeyboard) {
          instance.wireKeyboardEvent();
        }
      }
    },
    serverItemsRerender: function serverItemsRerender(dataId, items, firstRender) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        var docActive = document.activeElement;
        instance.options.items = items;
        instance.extendedOpen();
        instance.destroyMode();
        instance.resetServerItems(firstRender);
        instance.serverItemsRefresh(firstRender);
        if (document.activeElement != docActive) {
          docActive.focus();
        }
      }
    },
    hideItem: function hideItem(dataId, items, eleIndex) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.options.items = items;
        var innerItems = [].slice.call(sf.base.selectAll('.' + CLS_ITEM, this.element));
        var ele = innerItems[parseInt(eleIndex.toString(), 10)];
        if (ele) {
          if (!items[eleIndex].visible) {
            if (!this.nonFocusableElements(ele)) {
              if (sf.base.isNullOrUndefined(ele.firstElementChild.getAttribute('tabindex')) || ele.firstElementChild.getAttribute('tabindex') !== '-1') {
                instance.updateHideEleTabIndex(ele, items[eleIndex].visible, eleIndex, innerItems);
              }
            }
          } else {
            if (!this.nonFocusableElements(ele)) {
              instance.updateHideEleTabIndex(ele, items[eleIndex].visible, eleIndex, innerItems);
            }
          }
        }
        instance.refreshOverflow();
      }
    },
    disable: function disable(dataId, value) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.disable(value);
      }
    },
    refreshOverflow: function refreshOverflow(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.refreshOverflow();
      }
    },
    destroy: function destroy(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.destroy();
      }
    },
    refresh: function refresh(dataId, options) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (options.scrollStep === 0) {
        options.scrollStep = null;
      }
      if (!sf.base.isNullOrUndefined(instance) && !sf.base.isNullOrUndefined(instance.element)) {
        instance.options = options;
        instance.destroyMode();
        instance.resetServerItems(false);
        instance.serverItemsRefresh(false);
      }
    }
  };
  return Toolbar;
}();

/***/ }),

/***/ "./modules/sf-tooltip.js":
/*!*******************************!*\
  !*** ./modules/sf-tooltip.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.Tooltip = function () {
  'use strict';

  var __assign = undefined && undefined.__assign || function () {
    __assign = Object.assign || function (t) {
      for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }
      return t;
    };
    return __assign.apply(this, arguments);
  };
  var TAP_HOLD_THRESHOLD = 500;
  var SHOW_POINTER_TIP_GAP = 0;
  var HIDE_POINTER_TIP_GAP = 8;
  var MOUSE_TRAIL_GAP = 2;
  var POINTER_ADJUST = 2;
  var ROOT = 'e-tooltip';
  var ELEMENT_HIDDEN = 'e-blazor-hidden';
  var TOOLTIP_WRAP = 'e-tooltip-wrap';
  var ARROW_TIP = 'e-arrow-tip';
  var ARROW_TIP_OUTER = 'e-arrow-tip-outer';
  var ARROW_TIP_INNER = 'e-arrow-tip-inner';
  var TIP_BOTTOM = 'e-tip-bottom';
  var TIP_TOP = 'e-tip-top';
  var TIP_LEFT = 'e-tip-left';
  var TIP_RIGHT = 'e-tip-right';
  var POPUP_ROOT = 'e-popup';
  var POPUP_OPEN = 'e-popup-open';
  var POPUP_CLOSE = 'e-popup-close';
  var POPUP_LIB = 'e-lib';
  var HIDDEN = 'e-hidden';
  var BIGGER = 'e-bigger';
  var RIGHT = 'Right';
  var BOTTOM = 'Bottom';
  var TOP = 'Top';
  var LEFT = 'Left';
  var CENTER = 'Center';
  var END = 'End';
  var START = 'Start';
  var TOP_LEFT = 'TopLeft';
  var TOP_RIGHT = 'TopRight';
  var BOTTOM_LEFT = 'BottomLeft';
  var BOTTOM_CENTER = 'BottomCenter';
  var BOTTOM_RIGHT = 'BottomRight';
  var LEFT_TOP = 'LeftTop';
  var LEFT_CENTER = 'LeftCenter';
  var LEFT_BOTTOM = 'LeftBottom';
  var RIGHT_TOP = 'RightTop';
  var RIGHT_CENTER = 'RightCenter';
  var RIGHT_BOTTOM = 'RightBottom';
  var PLACEHOLDER = '_content_placeholder';
  var CONTENT = '_content';
  var TIP_CONTENT = 'e-tip-content';
  var POPUP_CONTAINER = 'e-tooltip-popup-container';
  var ARIA_DESCRIBEDBY = 'aria-describedby';
  var TARGET = 'target';
  var NONE = 'None';
  var ENABLE = 'Enable';
  var DISABLE = 'Disable';
  var SfTooltip = /** @class */function () {
    function SfTooltip(dataId, element, ref, properties, eventList) {
      this.popupObj = null;
      this.tipClass = TIP_BOTTOM;
      this.tooltipPositionX = 'Center';
      this.tooltipPositionY = 'Top';
      this.isContinuousOpen = false;
      this.isRestrictUpdate = false;
      this.showTimer = 0;
      this.hideTimer = 0;
      this.contentTargetValue = null;
      this.contentEvent = null;
      this.contentAnimation = null;
      this.beforeCloseAnimation = null;
      this.isPopupHidden = true;
      this.isMultiTarget = false;
      this.mouseAction = false;
      this.mouseMoveEvent = null;
      this.mouseMoveTarget = null;
      this.containerElement = null;
      this.isBodyContainer = true;
      this.element = element;
      this.dataId = dataId;
      this.properties = properties;
      this.dotnetRef = ref;
      if (!sf.base.isNullOrUndefined(this.element)) {
        this.ctrlId = this.element.id;
        window.sfBlazor.setCompInstance(this);
        this.eventList = eventList;
      }
    }
    SfTooltip.prototype.getTriggerList = function (trigger) {
      if (trigger === 'Auto') {
        trigger = sf.base.Browser.isDevice ? 'Hover' : 'Hover Focus';
      }
      return trigger.split(' ');
    };
    SfTooltip.prototype.formatPosition = function () {
      var _a, _b;
      if (this.properties.position.indexOf('Top') === 0 || this.properties.position.indexOf('Bottom') === 0) {
        _a = this.properties.position.split(/(?=[A-Z])/), this.tooltipPositionY = _a[0], this.tooltipPositionX = _a[1];
      } else {
        _b = this.properties.position.split(/(?=[A-Z])/), this.tooltipPositionX = _b[0], this.tooltipPositionY = _b[1];
      }
    };
    SfTooltip.prototype.getTargetList = function (target) {
      if (!target || target === '') {
        return [this.element];
      }
      var targetElements = [].slice.call(sf.base.selectAll(target, this.element));
      return targetElements.length > 0 ? targetElements : [].slice.call(sf.base.selectAll(target, document));
    };
    SfTooltip.prototype.wireEvents = function (trigger) {
      var _this = this;
      var triggerList = this.getTriggerList(trigger);
      var targetList = this.getTargetList(this.properties.target);
      triggerList.forEach(function (opensOn) {
        if (opensOn === 'Custom') {
          return;
        }
        targetList.forEach(function (target) {
          switch (opensOn) {
            case 'Focus':
              sf.base.EventHandler.add(target, 'focus', _this.targetHover, _this);
              break;
            case 'Click':
              sf.base.EventHandler.add(target, sf.base.Browser.touchStartEvent, _this.targetClick, _this);
              break;
            case 'Hover':
              if (sf.base.Browser.isDevice) {
                _this.touchModule = new sf.base.Touch(target, {
                  tapHoldThreshold: TAP_HOLD_THRESHOLD,
                  tapHold: _this.tapHoldHandler.bind(_this)
                });
                sf.base.EventHandler.add(target, sf.base.Browser.touchEndEvent, _this.touchEndHandler, _this);
              } else {
                sf.base.EventHandler.add(target, 'mouseover', _this.targetHover, _this);
                if (!_this.properties.isSticky) {
                  sf.base.EventHandler.add(target, 'mouseleave', _this.onMouseOut, _this);
                }
              }
              break;
          }
        });
      });
      sf.base.EventHandler.add(document, 'touchend', this.touchEnd, this);
      sf.base.EventHandler.add(document, 'scroll wheel', this.scrollHandler.bind(this), {
        passive: true
      });
      sf.base.EventHandler.add(document, 'keydown', this.keyDown, this);
      window.addEventListener('resize', this.onWindowResize.bind(this));
    };
    SfTooltip.prototype.onWindowResize = function () {
      if (!this.isHidden()) {
        this.reposition(this.findTarget());
      }
    };
    SfTooltip.prototype.wireMouseEvents = function (e, target) {
      if (this.tooltipEle) {
        if (!this.properties.isSticky) {
          if (e.type === 'focus') {
            sf.base.EventHandler.add(target, 'blur', this.onMouseOut, this);
          }
          if (this.properties.closeDelay) {
            sf.base.EventHandler.add(this.tooltipEle, 'mouseenter', this.tooltipHover, this);
            sf.base.EventHandler.add(this.tooltipEle, 'mouseleave', this.tooltipMouseOut, this);
          }
        }
        if (this.properties.mouseTrail) {
          sf.base.EventHandler.add(target, 'mousemove touchstart mouseenter', this.onMouseMove, this);
        }
      }
    };
    SfTooltip.prototype.unWireEvents = function (trigger) {
      var _this = this;
      var triggerList = this.getTriggerList(trigger);
      var targetList = this.getTargetList(this.properties.target);
      triggerList.forEach(function (opensOn) {
        if (opensOn === 'Custom') {
          return;
        }
        targetList.forEach(function (target) {
          switch (opensOn) {
            case 'Focus':
              sf.base.EventHandler.remove(target, 'focus', _this.targetHover);
              break;
            case 'Click':
              sf.base.EventHandler.remove(target, sf.base.Browser.touchStartEvent, _this.targetClick);
              break;
            case 'Hover':
              if (sf.base.Browser.isDevice) {
                if (_this.touchModule) {
                  _this.touchModule.destroy();
                }
                sf.base.EventHandler.remove(target, sf.base.Browser.touchEndEvent, _this.touchEndHandler);
              } else {
                sf.base.EventHandler.remove(target, 'mouseover', _this.targetHover);
                if (!_this.properties.isSticky) {
                  sf.base.EventHandler.remove(target, 'mouseleave', _this.onMouseOut);
                }
              }
              break;
          }
        });
      });
      sf.base.EventHandler.remove(document, 'touchend', this.touchEnd);
      sf.base.EventHandler.remove(document, 'scroll wheel', this.scrollHandler);
      sf.base.EventHandler.remove(document, 'keydown', this.keyDown);
      window.removeEventListener('resize', this.onWindowResize.bind(this));
    };
    SfTooltip.prototype.unWireMouseEvents = function (target) {
      var _this = this;
      if (!this.properties.isSticky) {
        var triggerList = this.getTriggerList(this.properties.opensOn);
        triggerList.forEach(function (opensOn) {
          if (opensOn === 'Focus') {
            sf.base.EventHandler.remove(target, 'blur', _this.onMouseOut);
          }
        });
        if (this.properties.closeDelay) {
          sf.base.EventHandler.remove(target, 'mouseenter', this.tooltipHover);
          sf.base.EventHandler.remove(target, 'mouseleave', this.tooltipMouseOut);
        }
      }
      if (this.properties.mouseTrail) {
        sf.base.EventHandler.remove(target, 'mousemove touchstart mouseenter', this.onMouseMove);
      }
    };
    SfTooltip.prototype.findTarget = function () {
      return sf.base.select('[data-tooltip-id= "' + this.ctrlId + '_content"]', document);
    };
    SfTooltip.prototype.addDescribedBy = function (target, id) {
      var describedby = (sf.base.getAttributeOrDefault(target, ARIA_DESCRIBEDBY, null) || '').split(/\s+/);
      if (describedby.indexOf(id) < 0) {
        describedby.push(id);
      }
      sf.base.attributes(target, {
        'aria-describedby': describedby.join(' ').trim(),
        'data-tooltip-id': id
      });
    };
    SfTooltip.prototype.removeDescribedBy = function (target) {
      var id = sf.base.getAttributeOrDefault(target, 'data-tooltip-id', null);
      var describedby = (sf.base.getAttributeOrDefault(target, ARIA_DESCRIBEDBY, null) || '').split(/\s+/);
      var index = describedby.indexOf(id);
      if (index !== -1) {
        describedby.splice(index, 1);
      }
      target.removeAttribute('data-tooltip-id');
      var orgDescribedby = describedby.join(' ').trim();
      orgDescribedby ? sf.base.attributes(target, {
        'aria-describedby': orgDescribedby
      }) : target.removeAttribute(ARIA_DESCRIBEDBY);
    };
    SfTooltip.prototype.clear = function () {
      if (this.isPopupHidden) {
        if (this.popupObj) {
          this.popupObj.destroy();
        }
        if (this.tooltipEle) {
          sf.base.removeClass([this.tooltipEle], POPUP_CLOSE);
          sf.base.addClass([this.tooltipEle], POPUP_OPEN);
          this.tooltipEle.style.display = 'none';
          var contentElement = document.getElementById(this.ctrlId + PLACEHOLDER);
          if (contentElement) {
            contentElement.appendChild(this.tooltipEle);
          }
          if (document.body.contains(this.element)) {
            // tslint:disable-next-line:no-any
            this.dotnetRef.invokeMethodAsync('CreateTooltip', false)["catch"](function () {});
          }
        }
        this.tooltipEle = null;
        this.popupObj = null;
      }
    };
    SfTooltip.prototype.tapHoldHandler = function (evt) {
      this.targetHover(evt.originalEvent);
    };
    SfTooltip.prototype.touchEndHandler = function () {
      if (!this.properties.isSticky) {
        this.hideTooltip(this.properties.animation.close);
      }
    };
    SfTooltip.prototype.targetClick = function (e) {
      var target = this.properties.target ? sf.base.closest(e.target, this.properties.target) : this.element;
      if (target) {
        if (sf.base.getAttributeOrDefault(target, 'data-tooltip-id', null) === null) {
          this.targetHover(e);
        } else if (!this.properties.isSticky) {
          this.hideTooltip(this.properties.animation.close, e, target);
        }
      }
    };
    SfTooltip.prototype.restoreElement = function (target) {
      this.unWireMouseEvents(target);
      if (!sf.base.isNullOrUndefined(sf.base.getAttributeOrDefault(target, 'data-content', null))) {
        target.removeAttribute('data-content');
      }
      this.removeDescribedBy(target);
    };
    SfTooltip.prototype.checkForOpen = function (opensOn, element, e) {
      if (sf.base.isNullOrUndefined(element) || sf.base.isNullOrUndefined(e)) {
        return false;
      }
      var target = this.properties.target ? sf.base.closest(e.target, this.properties.target) : this.element;
      if (sf.base.isNullOrUndefined(target)) {
        return false;
      }
      var isOpenable = true;
      if (opensOn === 'Hover') {
        isOpenable = sf.base.matches(target, ':hover');
      } else if (opensOn === 'Auto') {
        isOpenable = sf.base.matches(target, ':hover') || sf.base.matches(target, ':focus');
      } else if (opensOn === 'Focus') {
        isOpenable = sf.base.matches(target, ':focus');
      } else if (opensOn === 'Click' || opensOn === 'Custom') {
        if (sf.base.getAttributeOrDefault(target, 'data-tooltip-id', null) === null) {
          isOpenable = true;
        } else {
          isOpenable = false;
        }
      }
      return isOpenable;
    };
    SfTooltip.prototype.targetHover = function (e) {
      var _this = this;
      if (!this.checkForOpen(this.properties.opensOn, this.element, e)) {
        return;
      }
      var target = this.properties.target ? sf.base.closest(e.target, this.properties.target) : this.element;
      var title = target.getAttribute('title');
      target.title = '';
      if (title !== '') {
        sf.base.attributes(target, {
          'sf-tooltip': title
        });
      }
      if (sf.base.isNullOrUndefined(target) || sf.base.getAttributeOrDefault(target, 'data-tooltip-id', null) !== null) {
        return;
      }
      this.isMultiTarget = this.getTargetList(this.properties.target).length > 1;
      if (this.properties.target && this.isMultiTarget && e && !sf.base.isNullOrUndefined(e.target) && !sf.base.isNullOrUndefined(e.relatedTarget)) {
        var currTarget = sf.base.closest(e.target, this.properties.target);
        var relatedTarget = sf.base.closest(e.relatedTarget, this.properties.target);
        if (currTarget == relatedTarget) {
          return;
        }
      }
      var targetList = [].slice.call(sf.base.selectAll('[data-tooltip-id= "' + this.ctrlId + '_content"]', document));
      targetList.forEach(function (target) {
        _this.restoreElement(target);
      });
      this.mouseAction = false;
      this.showTooltip(target, this.properties.animation.open, e);
    };
    SfTooltip.prototype.isHidden = function () {
      return this.tooltipEle ? !this.tooltipEle.classList.contains(POPUP_OPEN) : true;
    };
    SfTooltip.prototype.mouseMoveBeforeOpen = function (e) {
      this.mouseMoveEvent = e;
    };
    SfTooltip.prototype.mouseMoveBeforeRemove = function () {
      if (this.mouseMoveTarget) {
        sf.base.EventHandler.remove(this.mouseMoveTarget, "mousemove touchstart", this.mouseMoveBeforeOpen);
      }
    };
    SfTooltip.prototype.showTooltip = function (target, showAnimation, e) {
      var _this = this;
      this.mouseAction = false;
      this.clear();
      clearTimeout(this.showTimer);
      clearTimeout(this.hideTimer);
      if (this.properties.mouseTrail && this.properties.openDelay) {
        this.mouseMoveBeforeRemove();
        this.mouseMoveTarget = target;
        sf.base.EventHandler.add(this.mouseMoveTarget, "mousemove touchstart", this.mouseMoveBeforeOpen, this);
      }
      var show = function show() {
        _this.isContinuousOpen = !sf.base.isNullOrUndefined(_this.tooltipEle);
        _this.tooltipEventArgs = {
          type: e ? e.type.toString() : null,
          cancel: false,
          target: _this.getDomObject(TARGET, target),
          event: e ? e : null,
          hasText: _this.hasText(),
          element: _this.getDomObject('tooltipElement', _this.tooltipEle),
          isInteracted: !sf.base.isNullOrUndefined(e),
          name: 'beforeRender',
          left: e ? _this.getXYValue(e, 'x') : null,
          top: e ? _this.getXYValue(e, 'y') : null
        };
        _this.contentTargetValue = target;
        _this.contentEvent = e;
        _this.contentAnimation = showAnimation;
        _this.isRestrictUpdate = _this.eventList.beforeRender && !_this.isHidden();
        _this.eventList.beforeRender ? _this.triggerEvent('TriggerBeforeRenderEvent', _this.tooltipEventArgs) : _this.beforeRenderCallBack(false);
      };
      this.showTimer = setTimeout(show, this.properties.openDelay);
    };
    SfTooltip.prototype.triggerEvent = function (eventName, args) {
      if (document.body.contains(this.element)) {
        // tslint:disable-next-line:no-any
        this.dotnetRef.invokeMethodAsync(eventName, args)["catch"](function () {});
      }
    };
    SfTooltip.prototype.beforeRenderCallBack = function (cancel) {
      if (cancel) {
        this.isPopupHidden = true;
        this.clear();
        this.mouseMoveBeforeRemove();
      } else {
        this.isPopupHidden = false;
        if (sf.base.isNullOrUndefined(this.tooltipEle)) {
          if (document.body.contains(this.element)) {
            // tslint:disable-next-line:no-any
            this.dotnetRef.invokeMethodAsync('CreateTooltip', true)["catch"](function () {});
          }
        } else if (this.isContinuousOpen && !this.isRestrictUpdate) {
          this.contentUpdated();
        } else {
          this.isRestrictUpdate = false;
        }
      }
    };
    SfTooltip.prototype.checkCollision = function (target, x, y) {
      var elePos = {
        left: x,
        top: y,
        position: this.properties.position,
        horizontal: this.tooltipPositionX,
        vertical: this.tooltipPositionY
      };
      var affectedPos = sf.popups.isCollide(this.tooltipEle, this.checkCollideTarget(), x, y);
      if (affectedPos.length > 0) {
        elePos.horizontal = affectedPos.indexOf('left') >= 0 ? RIGHT : affectedPos.indexOf('right') >= 0 ? LEFT : this.tooltipPositionX;
        elePos.vertical = affectedPos.indexOf('top') >= 0 ? BOTTOM : affectedPos.indexOf('bottom') >= 0 ? TOP : this.tooltipPositionY;
      }
      return elePos;
    };
    SfTooltip.prototype.checkCollideTarget = function () {
      return !this.properties.windowCollision && this.properties.target ? this.element : null;
    };
    SfTooltip.prototype.calculateElementPosition = function (pos, offsetPos) {
      return [this.isBodyContainer ? pos.left + offsetPos.left : pos.left - this.containerElement.offsetLeft + offsetPos.left + window.pageXOffset + this.containerElement.scrollLeft, this.isBodyContainer ? pos.top + offsetPos.top : pos.top - this.containerElement.offsetTop + offsetPos.top + window.pageYOffset + this.containerElement.scrollTop];
    };
    SfTooltip.prototype.getScalingFactor = function (target) {
      if (!target) {
        return {
          x: 1,
          y: 1
        };
      }
      var scalingFactors = {
        x: 1,
        y: 1
      };
      var elementsWithTransform = target.closest('[style*="transform: scale"]');
      if (elementsWithTransform && elementsWithTransform != this.tooltipEle && elementsWithTransform.contains(this.tooltipEle)) {
        var computedStyle = window.getComputedStyle(elementsWithTransform);
        var transformValue = computedStyle.getPropertyValue("transform");
        var matrixValues = transformValue.match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);
        scalingFactors.x = matrixValues[0];
        scalingFactors.y = matrixValues[3];
      }
      return scalingFactors;
    };
    SfTooltip.prototype.collisionFlipFit = function (target, x, y) {
      var elePos = this.checkCollision(target, x, y);
      var newPos = elePos.position;
      if (this.tooltipPositionY !== elePos.vertical) {
        newPos = this.properties.position.indexOf(BOTTOM) === 0 || this.properties.position.indexOf('Top') === 0 ? elePos.vertical + this.tooltipPositionX : this.tooltipPositionX + elePos.vertical;
      }
      if (this.tooltipPositionX !== elePos.horizontal) {
        if (newPos.indexOf(LEFT) === 0) {
          elePos.vertical = newPos === LEFT_TOP || newPos === LEFT_CENTER ? TOP : BOTTOM;
          newPos = elePos.vertical + LEFT;
        }
        if (newPos.indexOf(RIGHT) === 0) {
          elePos.vertical = newPos === RIGHT_TOP || newPos === RIGHT_CENTER ? TOP : BOTTOM;
          newPos = elePos.vertical + RIGHT;
        }
        elePos.horizontal = this.tooltipPositionX;
      }
      this.tooltipEventArgs = {
        type: null,
        cancel: false,
        target: this.getDomObject(TARGET, target),
        event: null,
        isInteracted: false,
        hasText: this.hasText(),
        element: this.getDomObject('tooltipElement', this.tooltipEle),
        collidedPosition: newPos,
        name: 'beforeCollision',
        left: null,
        top: null
      };
      this.isRestrictUpdate = this.eventList.beforeCollision && !this.isHidden();
      if (this.eventList.beforeCollision) {
        this.triggerEvent('TriggerBeforeCollisionEvent', this.tooltipEventArgs);
      }
      var vertical = elePos.vertical,
        horizontal = elePos.horizontal,
        position = elePos.position;
      if (position !== newPos) {
        var pos = sf.popups.calculatePosition(target, horizontal, vertical, !this.isBodyContainer, this.isBodyContainer ? null : this.containerElement.getBoundingClientRect());
        this.adjustArrow(target, newPos, horizontal, vertical);
        var scalingFactors = this.getScalingFactor(target);
        var offsetPos = this.calculateTooltipOffset(newPos, scalingFactors.x, scalingFactors.y);
        offsetPos.top -= this.getOffSetPosition('TopBottom', newPos, this.properties.offsetY);
        offsetPos.left -= this.getOffSetPosition('RightLeft', newPos, this.properties.offsetX);
        elePos.position = newPos;
        var _a = this.calculateElementPosition(pos, offsetPos),
          left_1 = _a[0],
          top_1 = _a[1];
        elePos.left = left_1;
        elePos.top = top_1;
      } else {
        this.adjustArrow(target, newPos, horizontal, vertical);
      }
      var eleOffset = {
        left: elePos.left,
        top: elePos.top
      };
      var left = sf.popups.fit(this.tooltipEle, this.checkCollideTarget(), {
        X: true,
        Y: false
      }, eleOffset).left;
      sf.base.setStyleAttribute(this.tooltipEle, {
        'display': 'block'
      });
      if (this.properties.showTipPointer && (newPos.indexOf('Bottom') === 0 || newPos.indexOf('Top') === 0)) {
        var arrowEle = sf.base.select('.' + ARROW_TIP, this.tooltipEle);
        var arrowLeft = parseInt(arrowEle.style.left, 10) - (left - elePos.left);
        if (arrowLeft < 0) {
          arrowLeft = 0;
        } else if (arrowLeft + arrowEle.offsetWidth > this.tooltipEle.clientWidth) {
          arrowLeft = this.tooltipEle.clientWidth - arrowEle.offsetWidth;
        }
        sf.base.setStyleAttribute(arrowEle, {
          'left': arrowLeft.toString() + 'px'
        });
      }
      sf.base.setStyleAttribute(this.tooltipEle, {
        'display': ''
      });
      eleOffset.left = left;
      if (window.scrollX && this.properties.position == BOTTOM_RIGHT) {
        eleOffset.left = this.element.getBoundingClientRect().left + window.scrollX - this.element.offsetWidth;
      }
      return eleOffset;
    };
    SfTooltip.prototype.getOffSetPosition = function (positionString, newPos, offsetType) {
      return positionString.indexOf(this.properties.position.split(/(?=[A-Z])/)[0]) !== -1 && positionString.indexOf(newPos.split(/(?=[A-Z])/)[0]) !== -1 ? 2 * offsetType : 0;
    };
    SfTooltip.prototype.hideTooltip = function (hideAnimation, e, targetElement) {
      var _this = this;
      clearTimeout(this.hideTimer);
      clearTimeout(this.showTimer);
      var hide = function hide() {
        if (_this.checkForOpen(_this.properties.opensOn, _this.element, e)) {
          return;
        }
        if (_this.properties.closeDelay && _this.tooltipEle && _this.isTooltipOpen) {
          return;
        }
        var target;
        if (e) {
          target = _this.properties.target ? targetElement || e.target : _this.element;
        } else {
          target = sf.base.select('[data-tooltip-id= "' + _this.ctrlId + '_content"]', document);
        }
        _this.tooltipEventArgs = {
          type: e ? e.type.toString() : null,
          cancel: false,
          target: _this.getDomObject(TARGET, target),
          event: e ? e : null,
          element: _this.getDomObject('tooltipElement', _this.tooltipEle),
          hasText: _this.hasText(),
          isInteracted: !sf.base.isNullOrUndefined(e),
          name: 'beforeClose',
          collidedPosition: null,
          left: e ? _this.getXYValue(e, 'x') : null,
          top: e ? _this.getXYValue(e, 'y') : null
        };
        _this.beforeCloseTarget = target;
        _this.beforeCloseAnimation = hideAnimation;
        _this.isRestrictUpdate = _this.eventList.beforeClose && !_this.isHidden();
        _this.eventList.beforeClose ? _this.triggerEvent('TriggerBeforeCloseEvent', _this.tooltipEventArgs) : _this.beforeCloseCallBack(false);
      };
      !sf.base.isNullOrUndefined(this.tooltipEle) && this.properties.closeDelay <= 0 ? hide() : this.hideTimer = setTimeout(hide, this.properties.closeDelay);
    };
    SfTooltip.prototype.beforeCloseCallBack = function (cancel) {
      if (!cancel) {
        var proxy_1 = this;
        proxy_1.mouseMoveBeforeRemove();
        var hide = function hide() {
          if (!proxy_1.isMultiTarget) {
            proxy_1.popupHide(proxy_1.beforeCloseAnimation, proxy_1.beforeCloseTarget);
          }
        };
        if (this.popupObj) {
          this.popupHide(this.beforeCloseAnimation, this.beforeCloseTarget);
        } else {
          setTimeout(hide, 200);
        }
      } else {
        this.isPopupHidden = false;
      }
    };
    SfTooltip.prototype.popupHide = function (hideAnimation, target) {
      if (target) {
        this.restoreElement(target);
      }
      this.isPopupHidden = true;
      var closeAnimation = {
        name: hideAnimation.effect === NONE && sf.base.animationMode === ENABLE ? 'FadeOut' : hideAnimation.effect,
        duration: hideAnimation.duration,
        delay: hideAnimation.delay,
        timingFunction: 'easeIn'
      };
      if (hideAnimation.effect === NONE && sf.base.animationMode !== ENABLE || sf.base.animationMode === DISABLE) {
        closeAnimation = undefined;
      }
      if (this.popupObj) {
        this.popupObj.hide(closeAnimation);
      }
    };
    SfTooltip.prototype.calculateTooltipOffset = function (position, xScalingFactor, yScalingFactor) {
      if (xScalingFactor === void 0) {
        xScalingFactor = 1;
      }
      if (yScalingFactor === void 0) {
        yScalingFactor = 1;
      }
      var tooltipEleRect = this.tooltipEle.getBoundingClientRect();
      var arrowEle = sf.base.select('.' + ARROW_TIP, this.tooltipEle);
      var arrowEleRect = arrowEle ? arrowEle.getBoundingClientRect() : null;
      var tipWidth = arrowEle ? arrowEleRect.width : 0;
      var tipHeight = arrowEle ? arrowEleRect.height : 0;
      var tipAdjust = this.properties.showTipPointer ? SHOW_POINTER_TIP_GAP : HIDE_POINTER_TIP_GAP;
      var pos = {
        top: 0,
        left: 0
      };
      var tipHeightAdjust = tipHeight / 2 + POINTER_ADJUST + (tooltipEleRect.height - this.tooltipEle.clientHeight * yScalingFactor);
      var tipWidthAdjust = tipWidth / 2 + POINTER_ADJUST + (tooltipEleRect.width - this.tooltipEle.clientWidth * xScalingFactor);
      if (this.properties.mouseTrail) {
        tipAdjust += MOUSE_TRAIL_GAP;
      }
      switch (position) {
        case RIGHT_TOP:
          pos.left += tipWidth + tipAdjust;
          pos.top -= tooltipEleRect.height - tipHeightAdjust;
          break;
        case RIGHT_CENTER:
          pos.left += tipWidth + tipAdjust;
          pos.top -= tooltipEleRect.height / 2;
          break;
        case RIGHT_BOTTOM:
          pos.left += tipWidth + tipAdjust;
          pos.top -= tipHeightAdjust;
          break;
        case BOTTOM_RIGHT:
          pos.top += tipHeight + tipAdjust;
          pos.left -= tipWidthAdjust;
          break;
        case BOTTOM_CENTER:
          pos.top += tipHeight + tipAdjust;
          pos.left -= tooltipEleRect.width / 2;
          break;
        case BOTTOM_LEFT:
          pos.top += tipHeight + tipAdjust;
          pos.left -= tooltipEleRect.width - tipWidthAdjust;
          break;
        case LEFT_BOTTOM:
          pos.left -= tipWidth + tooltipEleRect.width + tipAdjust;
          pos.top -= tipHeightAdjust;
          break;
        case LEFT_CENTER:
          pos.left -= tipWidth + tooltipEleRect.width + tipAdjust;
          pos.top -= tooltipEleRect.height / 2;
          break;
        case LEFT_TOP:
          pos.left -= tipWidth + tooltipEleRect.width + tipAdjust;
          pos.top -= tooltipEleRect.height - tipHeightAdjust;
          break;
        case TOP_LEFT:
          pos.top -= tooltipEleRect.height + tipHeight + tipAdjust;
          pos.left -= tooltipEleRect.width - tipWidthAdjust;
          break;
        case TOP_RIGHT:
          pos.top -= tooltipEleRect.height + tipHeight + tipAdjust;
          pos.left -= tipWidthAdjust;
          break;
        default:
          pos.top -= tooltipEleRect.height + tipHeight + tipAdjust;
          pos.left -= tooltipEleRect.width / 2;
          break;
      }
      pos.left += this.properties.offsetX;
      pos.top += this.properties.offsetY;
      return pos;
    };
    SfTooltip.prototype.setTipClass = function (position) {
      if (position.indexOf(RIGHT) === 0) {
        this.tipClass = TIP_LEFT;
      } else if (position.indexOf(BOTTOM) === 0) {
        this.tipClass = TIP_TOP;
      } else if (position.indexOf(LEFT) === 0) {
        this.tipClass = TIP_RIGHT;
      } else {
        this.tipClass = TIP_BOTTOM;
      }
    };
    SfTooltip.prototype.updateTipPosition = function (position) {
      var selEle = sf.base.selectAll('.' + ARROW_TIP + ',.' + ARROW_TIP_OUTER + ',.' + ARROW_TIP_INNER, this.tooltipEle);
      var removeList = [TIP_BOTTOM, TIP_TOP, TIP_LEFT, TIP_RIGHT];
      sf.base.removeClass(selEle, removeList);
      this.setTipClass(position);
      sf.base.addClass(selEle, this.tipClass);
    };
    SfTooltip.prototype.adjustArrow = function (target, position, tooltipPositionX, tooltipPositionY) {
      if (this.properties.showTipPointer === false) {
        return;
      }
      this.updateTipPosition(position);
      sf.base.setStyleAttribute(this.tooltipEle, {
        'display': 'block'
      });
      var tooltipWidth = this.tooltipEle.clientWidth;
      var tooltipHeight = this.tooltipEle.clientHeight;
      var arrowEle = sf.base.select('.' + ARROW_TIP, this.tooltipEle);
      var arrowInnerELe = sf.base.select('.' + ARROW_TIP_INNER, this.tooltipEle);
      var tipWidth = arrowEle.offsetWidth;
      var tipHeight = arrowEle.offsetHeight;
      var leftValue;
      var topValue;
      sf.base.setStyleAttribute(this.tooltipEle, {
        'display': ''
      });
      var isEndPosition = this.properties.tipPointerPosition === END;
      var isStartPosition = this.properties.tipPointerPosition === START;
      if (this.tipClass === TIP_BOTTOM || this.tipClass === TIP_TOP) {
        topValue = this.tipClass === TIP_BOTTOM ? '99.9%' : -(tipHeight - 1) + 'px';
        sf.base.setStyleAttribute(arrowInnerELe, {
          'top': "-" + (this.tipClass === TIP_BOTTOM ? tipHeight - 2 : tipHeight - 6) + "px"
        });
        if (target) {
          var tipPosExclude = tooltipPositionX !== 'Center' || tooltipWidth > target.offsetWidth || this.properties.mouseTrail;
          if (tipPosExclude && tooltipPositionX === 'Left' || !tipPosExclude && isEndPosition) {
            leftValue = tooltipWidth - tipWidth - POINTER_ADJUST + 'px';
          } else if (tipPosExclude && tooltipPositionX === 'Right' || !tipPosExclude && isStartPosition) {
            leftValue = POINTER_ADJUST + 'px';
          } else if (tipPosExclude && (isEndPosition || isStartPosition)) {
            leftValue = isEndPosition ? target.offsetWidth + (this.tooltipEle.offsetWidth - target.offsetWidth) / 2 - tipWidth / 2 - POINTER_ADJUST + 'px' : (this.tooltipEle.offsetWidth - target.offsetWidth) / 2 - tipWidth / 2 + POINTER_ADJUST + 'px';
          } else {
            leftValue = tooltipWidth / 2 - tipWidth / 2 + 'px';
          }
        }
      } else {
        leftValue = this.tipClass === TIP_RIGHT ? '99.9%' : -(tipWidth - 1) + 'px';
        sf.base.setStyleAttribute(arrowInnerELe, {
          'left': (this.tipClass === TIP_RIGHT ? -(tipWidth - 2) : -(tipWidth - 2)) + "px"
        });
        var tipPosExclude = tooltipPositionY !== CENTER || tooltipHeight > target.offsetHeight || this.properties.mouseTrail;
        if (tipPosExclude && tooltipPositionY === TOP || !tipPosExclude && isEndPosition) {
          topValue = tooltipHeight - tipHeight - POINTER_ADJUST + 'px';
        } else if (tipPosExclude && tooltipPositionY === BOTTOM || !tipPosExclude && isStartPosition) {
          topValue = POINTER_ADJUST + 'px';
        } else {
          topValue = tooltipHeight / 2 - tipHeight / 2 + 'px';
        }
      }
      if (window.scrollX && this.properties.position === BOTTOM_RIGHT) {
        leftValue = this.element.offsetLeft + 'px';
      }
      sf.base.setStyleAttribute(arrowEle, {
        'top': topValue,
        'left': leftValue
      });
    };
    SfTooltip.prototype.tooltipHover = function () {
      if (this.tooltipEle) {
        this.isTooltipOpen = true;
      }
    };
    SfTooltip.prototype.tooltipMouseOut = function (e) {
      this.isTooltipOpen = false;
      this.hideTooltip(this.properties.animation.close, e, this.findTarget());
    };
    SfTooltip.prototype.onMouseOut = function (e) {
      var enteredElement = e.relatedTarget;
      this.mouseAction = true;
      if (enteredElement && !this.properties.mouseTrail) {
        var checkForTooltipElement = sf.base.closest(enteredElement, "." + TOOLTIP_WRAP + "." + POPUP_LIB + "." + POPUP_ROOT);
        if (checkForTooltipElement) {
          sf.base.EventHandler.add(checkForTooltipElement, 'mouseleave', this.tooltipElementMouseOut, this);
        } else {
          this.hideTooltip(this.properties.animation.close, e, this.findTarget());
          if (this.properties.closeDelay === 0) {
            this.clear();
          }
        }
      } else {
        this.hideTooltip(this.properties.animation.close, e, this.findTarget());
        this.clear();
      }
    };
    SfTooltip.prototype.tooltipElementMouseOut = function (e) {
      this.hideTooltip(this.properties.animation.close, e, this.findTarget());
      sf.base.EventHandler.remove(this.element, 'mouseleave', this.tooltipElementMouseOut);
      this.clear();
    };
    SfTooltip.prototype.onMouseMove = function (event) {
      if (!this.tooltipEle) {
        return;
      }
      var eventPageX = 0;
      var eventPageY = 0;
      if (event.type.indexOf('touch') > -1) {
        event.preventDefault();
        eventPageX = event.touches[0].pageX;
        eventPageY = event.touches[0].pageY;
      } else {
        eventPageX = event.pageX;
        eventPageY = event.pageY;
      }
      sf.base.Animation.stop(this.tooltipEle);
      sf.base.removeClass([this.tooltipEle], POPUP_CLOSE);
      sf.base.addClass([this.tooltipEle], POPUP_OPEN);
      this.adjustArrow(event.target, this.properties.position, this.tooltipPositionX, this.tooltipPositionY);
      var scalingFactors = this.getScalingFactor(event.target);
      var pos = this.calculateTooltipOffset(this.properties.position, scalingFactors.x, scalingFactors.y);
      var x = eventPageX + pos.left + this.properties.offsetX;
      var y = eventPageY + pos.top + this.properties.offsetY;
      var elePos = this.checkCollision(event.target, x, y);
      if (this.tooltipPositionX !== elePos.horizontal || this.tooltipPositionY !== elePos.vertical) {
        var newPos = this.properties.position.indexOf(BOTTOM) === 0 || this.properties.position.indexOf(TOP) === 0 ? elePos.vertical + elePos.horizontal : elePos.horizontal + elePos.vertical;
        elePos.position = newPos;
        this.adjustArrow(event.target, elePos.position, elePos.horizontal, elePos.vertical);
        var colPos = this.calculateTooltipOffset(elePos.position, scalingFactors.x, scalingFactors.y);
        elePos.left = eventPageX + colPos.left - this.properties.offsetX;
        elePos.top = eventPageY + colPos.top - this.properties.offsetY;
      }
      sf.base.setStyleAttribute(this.tooltipEle, {
        'left': elePos.left + 'px',
        'top': elePos.top + 'px'
      });
    };
    SfTooltip.prototype.keyDown = function (event) {
      if (this.tooltipEle && event.keyCode === 27) {
        this.hideTooltip(this.properties.animation.close);
      }
    };
    SfTooltip.prototype.touchEnd = function (e) {
      if (this.tooltipEle && sf.base.closest(e.target, '.' + ROOT) === null && !this.properties.isSticky) {
        this.hideTooltip(this.properties.animation.close);
      }
    };
    SfTooltip.prototype.scrollHandler = function (e) {
      if (this.tooltipEle && !this.properties.isSticky) {
        if (!sf.base.closest(e.target, "." + TOOLTIP_WRAP + "." + POPUP_LIB + "." + POPUP_ROOT)) {
          this.hideTooltip(this.properties.animation.close);
        }
      }
    };
    SfTooltip.prototype.renderContent = function (target) {
      var title = sf.base.getAttributeOrDefault(target, 'sf-tooltip', null);
      var dataTitle = sf.base.getAttributeOrDefault(target, 'data-title', null);
      if (!sf.base.isNullOrUndefined(title) && target) {
        sf.base.attributes(target, {
          'data-content': title
        });
        this.isMultiTarget = true;
      } else if (!sf.base.isNullOrUndefined(dataTitle) && target) {
        sf.base.attributes(target, {
          'data-content': dataTitle
        });
        this.isMultiTarget = true;
      }
      if (!this.properties.content) {
        var tooltipContent = sf.base.select('.' + TIP_CONTENT, this.tooltipEle);
        tooltipContent.innerText = target.getAttribute('data-content');
      }
    };
    SfTooltip.prototype.setHeightWidth = function (widthValue, heightValue, target) {
      if (this.tooltipEle) {
        sf.base.setStyleAttribute(this.tooltipEle, {
          'height': heightValue,
          'width': widthValue
        });
      }
      if (target && this.tooltipEle.style.width !== 'auto') {
        this.tooltipEle.style.maxWidth = widthValue;
      }
    };
    SfTooltip.prototype.appendContainer = function () {
      if (typeof this.properties.container == 'string') {
        if (this.properties.container === 'body') {
          this.containerElement = document.body;
        } else {
          this.isBodyContainer = false;
          this.containerElement = sf.base.select(this.properties.container, document);
          sf.base.addClass([this.containerElement], POPUP_CONTAINER);
        }
      }
      this.containerElement.appendChild(this.tooltipEle);
    };
    SfTooltip.prototype.updateTarget = function () {
      if (this.contentTargetValue) {
        if (sf.base.Browser.isDevice) {
          sf.base.addClass([this.tooltipEle], BIGGER);
        }
        this.appendContainer();
        sf.base.removeClass([this.tooltipEle], HIDDEN);
        this.addDescribedBy(this.contentTargetValue, this.ctrlId + CONTENT);
        this.renderContent(this.contentTargetValue);
        sf.base.addClass([this.tooltipEle], POPUP_OPEN);
        this.renderPopup(this.contentTargetValue);
        var pos = this.properties.position;
        this.adjustArrow(this.contentTargetValue, pos, this.tooltipPositionX, this.tooltipPositionY);
        sf.base.Animation.stop(this.tooltipEle);
        this.reposition(this.contentTargetValue);
        this.afterContentRender();
      }
    };
    SfTooltip.prototype.contentUpdated = function () {
      if (!this.tooltipEle) {
        this.ctrlId = this.element.id;
        this.tooltipEle = sf.base.select('#' + this.ctrlId + CONTENT, document);
        if (this.tooltipEle) {
          this.setHeightWidth(sf.base.formatUnit(this.properties.width), sf.base.formatUnit(this.properties.height), this.contentTargetValue);
          this.updateTarget();
        }
      } else {
        if (!this.isContinuousOpen || this.isRestrictUpdate) {
          return;
        }
        this.updateTarget();
      }
    };
    SfTooltip.prototype.afterContentRender = function () {
      sf.base.removeClass([this.tooltipEle], POPUP_OPEN);
      sf.base.addClass([this.tooltipEle], POPUP_CLOSE);
      this.tooltipEventArgs = {
        type: this.contentEvent ? this.contentEvent.type.toString() : null,
        isInteracted: !sf.base.isNullOrUndefined(this.contentEvent),
        hasText: this.hasText(),
        target: this.getDomObject(TARGET, this.contentTargetValue),
        name: 'beforeOpen',
        cancel: false,
        event: this.contentEvent ? this.contentEvent : null,
        element: this.getDomObject('tooltipElement', this.tooltipEle),
        left: this.contentEvent ? this.getXYValue(this.contentEvent, 'x') : null,
        top: this.contentEvent ? this.getXYValue(this.contentEvent, 'y') : null
      };
      this.isRestrictUpdate = this.eventList.beforeOpen && !this.isHidden();
      this.eventList.beforeOpen ? this.triggerEvent('TriggerBeforeOpenEvent', this.tooltipEventArgs) : this.beforeOpenCallBack(false);
    };
    SfTooltip.prototype.beforeOpenCallBack = function (cancel) {
      if (cancel) {
        this.isPopupHidden = true;
        if (this.contentTargetValue) {
          this.popupHide(this.properties.animation.close, this.contentTargetValue);
        }
        this.mouseMoveBeforeRemove();
      } else {
        if (sf.base.isNullOrUndefined(this.contentAnimation)) {
          return;
        }
        var openAnimation = {
          name: this.contentAnimation.effect === NONE && sf.base.animationMode === ENABLE ? 'FadeIn' : this.contentAnimation.effect,
          duration: this.contentAnimation.duration,
          delay: this.contentAnimation.delay,
          timingFunction: 'easeOut'
        };
        if (this.contentAnimation.effect === NONE && sf.base.animationMode !== ENABLE || sf.base.animationMode === DISABLE) {
          openAnimation = undefined;
        }
        if (this.popupObj) {
          this.popupObj.show(openAnimation, this.contentTargetValue);
          if (this.properties.openDelay && this.properties.mouseTrail && this.mouseMoveEvent) {
            this.onMouseMove(this.mouseMoveEvent);
          }
        }
      }
      if (this.contentEvent) {
        this.wireMouseEvents(this.contentEvent, this.contentTargetValue);
      }
      this.contentTargetValue = this.contentEvent = this.contentAnimation = null;
    };
    SfTooltip.prototype.reposition = function (target) {
      if (target === null || !this.tooltipEle) {
        return;
      }
      var elePos = this.getTooltipPosition(target);
      if (this.popupObj) {
        this.popupObj.position = {
          X: elePos.left,
          Y: elePos.top
        };
        this.popupObj.dataBind();
      }
    };
    SfTooltip.prototype.renderPopup = function (target) {
      var elePos = this.properties.mouseTrail ? {
        top: 0,
        left: 0
      } : this.getTooltipPosition(target);
      this.tooltipEle.classList.remove(POPUP_LIB);
      this.popupObj = new sf.popups.Popup(this.tooltipEle, {
        height: this.properties.height,
        width: this.properties.width,
        position: {
          X: elePos.left,
          Y: elePos.top
        },
        enableRtl: this.properties.enableRtl,
        open: this.openPopupHandler.bind(this),
        close: this.closePopupHandler.bind(this)
      });
    };
    SfTooltip.prototype.openPopupHandler = function () {
      if (this.tooltipEle && this.tooltipEle.classList.contains(POPUP_CLOSE) && this.isMultiTarget) {
        sf.base.removeClass([this.tooltipEle], POPUP_CLOSE);
        sf.base.addClass([this.tooltipEle], POPUP_OPEN);
      }
      if (!this.properties.mouseTrail) {
        this.reposition(this.contentTargetValue ? this.contentTargetValue : this.findTarget());
      }
      this.tooltipEventArgs.name = 'Opened';
      this.isRestrictUpdate = this.eventList.opened && !this.isHidden();
      if (this.eventList.opened) {
        this.triggerEvent('TriggerOpenedEvent', this.tooltipEventArgs);
      }
      if (this.mouseAction && !sf.base.isNullOrUndefined(this.tooltipEle)) {
        this.hideTooltip(this.properties.animation.close);
      }
    };
    SfTooltip.prototype.closePopupHandler = function () {
      this.clear();
      this.tooltipEventArgs.name = 'Closed';
      this.isRestrictUpdate = this.eventList.closed && !this.isHidden();
      if (this.eventList.closed) {
        this.triggerEvent('TriggerClosedEvent', this.tooltipEventArgs);
      }
    };
    SfTooltip.prototype.getTooltipPosition = function (target) {
      sf.base.setStyleAttribute(this.tooltipEle, {
        'display': 'block'
      });
      this.formatPosition();
      var pos = sf.popups.calculatePosition(target, this.tooltipPositionX, this.tooltipPositionY, !this.isBodyContainer, this.isBodyContainer ? null : this.containerElement.getBoundingClientRect());
      var scalingFactors = this.getScalingFactor(target);
      var offsetPos = this.calculateTooltipOffset(this.properties.position, scalingFactors.x, scalingFactors.y);
      var collisionPosition = this.calculateElementPosition(pos, offsetPos);
      var elePos = this.collisionFlipFit(target, collisionPosition[0], collisionPosition[1]);
      elePos.left = elePos.left / scalingFactors.x;
      elePos.top = elePos.top / scalingFactors.y;
      sf.base.setStyleAttribute(this.tooltipEle, {
        'display': ''
      });
      return elePos;
    };
    SfTooltip.prototype.getDomObject = function (value, element) {
      // eslint-disable-next-line
      return element ? window.sfBlazor.getDomObject(value, element) : null;
    };
    SfTooltip.prototype.hasText = function () {
      return this.tooltipEle ? this.tooltipEle.innerText.trim() === '' ? false : true : false;
    };
    SfTooltip.prototype.getXYValue = function (e, direction) {
      var touchList = e.changedTouches;
      var value;
      if (direction === 'x') {
        value = touchList ? touchList[0].clientX : e.clientX;
      } else {
        value = touchList ? touchList[0].clientY : e.clientY;
      }
      if (!value && e.type === 'focus' && e.target) {
        var rect = e.target.getBoundingClientRect();
        value = rect ? direction === 'x' ? rect.left : rect.top : null;
      }
      return Math.ceil(value);
    };
    SfTooltip.prototype.destroy = function () {
      if (this.tooltipEle) {
        var placeholder = sf.base.select('#' + this.ctrlId + PLACEHOLDER, document);
        if (placeholder) {
          placeholder.appendChild(this.tooltipEle);
        }
      }
      if (this.popupObj) {
        this.popupObj.destroy();
      }
      sf.base.removeClass([this.element], ROOT);
      this.unWireEvents(this.properties.opensOn);
      this.unWireMouseEvents(this.element);
      this.tooltipEle = null;
      this.popupObj = null;
    };
    return SfTooltip;
  }();
  // eslint-disable-next-line
  var Tooltip = {
    wireEvents: function wireEvents(dataId, element, dotnetRef, properties, eventList) {
      new SfTooltip(dataId, element, dotnetRef, properties, eventList);
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (element && !sf.base.isNullOrUndefined(instance)) {
        instance.formatPosition();
        instance.wireEvents(properties.opensOn);
        sf.base.removeClass([element], [ELEMENT_HIDDEN]);
      }
    },
    contentUpdated: function contentUpdated(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.contentUpdated();
      }
    },
    beforeRenderCallBack: function beforeRenderCallBack(dataId, cancel) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.beforeRenderCallBack(cancel);
      }
    },
    beforeOpenCallBack: function beforeOpenCallBack(dataId, cancel) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.beforeOpenCallBack(cancel);
      }
    },
    beforeCloseCallBack: function beforeCloseCallBack(dataId, cancel) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.beforeCloseCallBack(cancel);
      }
    },
    showTooltip: function showTooltip(dataId, target, animation, targetProp) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (sf.base.isNullOrUndefined(instance)) {
        return;
      }
      if (targetProp !== null && targetProp !== '') {
        var isInlineTarget = sf.base.select(targetProp, instance.element);
        var docTarget = sf.base.select(targetProp, document);
        if (isInlineTarget) {
          target = isInlineTarget;
        } else if (docTarget) {
          target = docTarget;
        }
      }
      if (target && target.offsetWidth == 0) {
        return;
      }
      instance.showTooltip(target, animation, null);
    },
    hideTooltip: function hideTooltip(dataId, animation) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.hideTooltip(animation);
      }
    },
    destroy: function destroy(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.destroy();
      }
    },
    refresh: function refresh(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (sf.base.isNullOrUndefined(instance)) {
        return;
      }
      if (!instance.isPopupHidden) {
        instance.hideTooltip(instance.properties.animation.close);
      }
      instance.unWireEvents(instance.properties.opensOn);
      instance.wireEvents(instance.properties.opensOn);
    },
    refreshPosition: function refreshPosition(dataId, targetEle, targetProp) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (sf.base.isNullOrUndefined(instance)) {
        return;
      }
      if (targetEle === null) {
        targetEle = targetProp !== null && targetProp !== '' ? sf.base.select(targetProp, instance.element) : instance.element;
      }
      instance.reposition(targetEle);
    },
    updateProperties: function updateProperties(dataId, props) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (sf.base.isNullOrUndefined(instance)) {
        return;
      }
      instance.isRestrictUpdate = true;
      if (props.target || props.opensOn || props.isSticky) {
        instance.unWireEvents(instance.properties.opensOn);
      }
      instance.properties = __assign({}, instance.properties, props);
      if (props.target || props.opensOn || props.isSticky) {
        instance.wireEvents(instance.properties.opensOn);
        instance.formatPosition();
      } else {
        var target = instance.findTarget();
        if (props.container) {
          if (!sf.base.isNullOrUndefined(this.containerElement)) {
            sf.base.removeClass([this.containerElement], POPUP_CONTAINER);
          }
          if (instance.tooltipEle && target) {
            instance.appendContainer();
          }
        }
        if (props.height || props.width) {
          instance.setHeightWidth(sf.base.formatUnit(props.width), sf.base.formatUnit(props.height), target);
        }
        if (props.position) {
          instance.formatPosition();
        }
        if (instance.tooltipEle && target) {
          if (props.position && instance.properties.showTipPointer) {
            var arrowInnerELe = sf.base.select('.' + ARROW_TIP_INNER, instance.tooltipEle);
            var arrowEle = sf.base.select('.' + ARROW_TIP, instance.tooltipEle);
            sf.base.removeClass([arrowEle], [instance.tipClass]);
            instance.setTipClass(props.position);
            sf.base.addClass([arrowEle], [instance.tipClass]);
            sf.base.setStyleAttribute(arrowInnerELe, {
              'top': null,
              'left': null
            });
          }
          instance.reposition(target);
        }
        instance.isRestrictUpdate = false;
      }
    }
  };
  return Tooltip;
}();

/***/ }),

/***/ "./modules/sf-treeview.js":
/*!********************************!*\
  !*** ./modules/sf-treeview.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
window.sfBlazor = window.sfBlazor || {};
window.sfBlazor.TreeView = function () {
  'use strict';

  var LISTITEM = 'e-list-item';
  var LISTWRAP = 'e-text-wrap';
  var PARENTITEM = 'e-list-parent';
  var HOVER = 'e-hover';
  var COLLAPSIBLE = 'e-icon-collapsible';
  var EXPANDABLE = 'e-icon-expandable';
  var MOUSEOVER = 'mouseover';
  var CLICK = 'Click';
  var DBLCLICK = 'DoubleClick';
  var FOCUSING = 'focusin';
  var BLUR = 'focusout';
  var MOUSEDOWN = 'mousedown';
  var MOUSEUP = 'mouseup';
  var MOUSEOUT = 'mouseout';
  var EXPANDONNONE = 'None';
  var EXPANDONAUTO = 'DoubleClick';
  var ICON = 'e-icons';
  var CHECK = 'e-check';
  var BLOCK = 'block';
  var HIDDEN = 'hidden';
  var NONE = 'none';
  var EMPTY = '';
  var DISPLAYNONE = 'e-display-none';
  var ACTIVE = 'e-active';
  var CONTROL = 'e-control';
  var ROOT = 'e-treeview';
  var FOCUS = 'e-node-focus';
  var PROCESS = 'e-process';
  var CHECKBOXFRAME = 'e-frame';
  var CHECKBOXWRAP = 'e-checkbox-wrapper';
  var CHECKBOXRIPPLE = 'e-ripple-container';
  var EDITING = 'e-editing';
  var INPUT = 'e-input';
  var INPUTGROUP = 'e-input-group';
  var DISABLED = 'e-disabled';
  var TEXTWRAP = 'e-text-content';
  var FULLROW = 'e-fullrow';
  var DRAGITEM = 'e-drag-item';
  var DROPPABLE = 'e-droppable';
  var DRAGGING = 'e-dragging';
  var SIBLING = 'e-sibling';
  var DROPIN = 'e-drop-in';
  var DROPNEXT = 'e-drop-next';
  var DROPOUT = 'e-drop-out';
  var NODROP = 'e-no-drop';
  var RTL = 'e-rtl';
  var DROPCOUNT = 'e-drop-count';
  var ITEM_ANIMATION_ACTIVE = 'e-animation-active';
  var ALLOWDRAGANDDROP = 'allowDragAndDrop';
  var ALLOWEDITING = 'allowEditing';
  var SHOWCHECKBOX = 'showCheckBox';
  var ALLOWTEXTWRAP = 'allowTextWrap';
  var SETDISABLED = 'disabled';
  var DRAGAREA = 'dragArea';
  var CSSCLASS = 'cssClass';
  var ANIMATION = 'animation';
  var EXPANDONTYPE = 'expandOnType';
  var ENABLERTL = 'enableRtl';
  var DISABLE = 'e-disable';
  var RIPPLE = 'e-ripple';
  var RIPPLEELMENT = 'e-ripple-element';
  var FULLROWSELECT = 'fullRowSelect';
  var FULLROWWRAP = 'e-fullrow-wrap';
  var INTERACTION = 'e-interaction';
  var SfTreeView = /** @class */function () {
    function SfTreeView(dataId, element, options, dotnetRef) {
      this.isHelperElement = true;
      this.mouseDownStatus = false;
      this.mouseUpStatus = false;
      this.preventExpand = false;
      this.keyBoardAction = false;
      this.isNodeRendered = false;
      this.isEdited = false;
      this.startTime = 0;
      this.endTime = 0;
      this.isKeyUp = false;
      this.timer = 0;
      this.isParentMouseDown = false;
      this.isAnimationCompleted = true;
      this.element = element;
      this.dataId = dataId;
      this.dotNetRef = dotnetRef;
      this.options = options;
      window.sfBlazor.setCompInstance(this);
    }
    SfTreeView.prototype.render = function () {
      this.dragStartAction = false;
      this.listBaseOption = {
        expandCollapse: true,
        showIcon: true,
        expandIconClass: EXPANDABLE,
        expandIconPosition: 'Left'
      };
      this.keyConfigs = {
        escape: 'escape',
        end: 'end',
        enter: 'enter',
        f2: 'f2',
        home: 'home',
        moveDown: 'downarrow',
        moveLeft: 'leftarrow',
        moveRight: 'rightarrow',
        moveUp: 'uparrow',
        ctrlDown: 'ctrl+downarrow',
        ctrlUp: 'ctrl+uparrow',
        ctrlEnter: 'ctrl+enter',
        ctrlHome: 'ctrl+home',
        ctrlEnd: 'ctrl+end',
        ctrlA: 'ctrl+A',
        shiftDown: 'shift+downarrow',
        shiftUp: 'shift+uparrow',
        shiftEnter: 'shift+enter',
        shiftHome: 'shift+home',
        shiftEnd: 'shift+end',
        csDown: 'ctrl+shift+downarrow',
        csUp: 'ctrl+shift+uparrow',
        csEnter: 'ctrl+shift+enter',
        csHome: 'ctrl+shift+home',
        csEnd: 'ctrl+shift+end',
        space: 'space',
        shiftSpace: 'shift+space',
        ctrlSpace: 'ctrl+space'
      };
      this.animationObj = new sf.base.Animation({});
      var liElements = this.element.querySelectorAll('li');
      if (liElements.length > 0 && !sf.base.Browser.isDevice) {
        liElements[0].setAttribute("tabindex", "0");
      }
      this.setDisabledMode(this.options.disabled);
      this.setMultiSelect(this.options.allowMultiSelection);
      if (this.options.hasTemplate) {
        this.element.classList.add(INTERACTION);
      }
    };
    SfTreeView.prototype.setDisabledMode = function (isEnabled) {
      this.setDragAndDrop(this.options.allowDragAndDrop);
      this.wireEditingEvents(this.options.allowEditing);
      this.checkAllDisabled(isEnabled);
      if (isEnabled) {
        this.unWireEvents();
      } else {
        this.wireEvents();
      }
    };
    SfTreeView.prototype.checkAllDisabled = function (isDisabled) {
      isDisabled ? this.element.classList.add(DISABLED) : this.element.classList.remove(DISABLED);
    };
    SfTreeView.prototype.updateWrap = function (ulEle) {
      var _this_1 = this;
      if (!this.options.fullRowSelect) {
        return;
      }
      var liEle = sf.base.selectAll('li', ulEle ? ulEle : this.element);
      liEle.forEach(function (li) {
        var element = sf.base.select('.' + FULLROW, li);
        if (element && element.nextElementSibling) {
          element.style.height = _this_1.options.allowTextWrap ? element.nextElementSibling.offsetHeight + 'px' : '';
        }
      });
    };
    SfTreeView.prototype.setTextWrap = function () {
      if (this.options.allowTextWrap && !this.element.classList.contains(LISTWRAP)) {
        sf.base.addClass([this.element], LISTWRAP);
      } else if (!this.options.allowTextWrap && this.element.classList.contains(LISTWRAP)) {
        sf.base.removeClass([this.element], LISTWRAP);
      }
      this.updateWrap();
    };
    SfTreeView.prototype.mouseDownHandler = function (e) {
      this.mouseDownStatus = true;
      if (e.shiftKey || e.ctrlKey) {
        e.preventDefault();
      }
      if (e.ctrlKey && this.options.allowMultiSelection) {
        sf.base.EventHandler.add(this.element, 'contextmenu', this.preventContextMenu, this);
      }
    };
    SfTreeView.prototype.mouseupHandler = function () {
      this.mouseUpStatus = true;
    };
    SfTreeView.prototype.onMouseLeave = function (e) {
      this.removeHover();
    };
    SfTreeView.prototype.unWireEvents = function () {
      this.wireExpandOnEvent(false);
      if (this.options.allowTextWrap) {
        var parentElement = this.getParentElement(this.element);
        if (parentElement.nodeName != "BODY") {
          sf.base.EventHandler.remove(parentElement, 'mousedown mouseup mousemove', this.resizeHandler);
        }
      }
      sf.base.EventHandler.remove(this.element, MOUSEDOWN, this.mouseDownHandler);
      sf.base.EventHandler.remove(this.element, 'click', this.clickHandler);
      sf.base.EventHandler.remove(this.element, FOCUSING, this.focusIn);
      sf.base.EventHandler.remove(this.element, BLUR, this.focusOut);
      sf.base.EventHandler.remove(this.element, MOUSEOVER, this.onMouseOver);
      sf.base.EventHandler.remove(this.element, MOUSEOUT, this.onMouseLeave);
      sf.base.EventHandler.remove(this.element, 'contextmenu', this.contextLongPress);
      if (sf.base.Browser.isDevice) {
        sf.base.EventHandler.remove(this.element, 'touchstart', this.touchStart);
        sf.base.EventHandler.remove(this.element, 'touchend', this.touchEnd);
      }
      if (!this.options.disabled && this.keyboardModule) {
        this.keyboardModule.destroy();
      }
    };
    SfTreeView.prototype.keyboardActionHandler = function (e) {
      this.isKeyUp = true;
      this.keyAction = e;
      var target = e.target;
      var focusedNode = this.getFocusedNode();
      if (target && (target.classList.contains(INPUT) || target.nodeName == 'INPUT' || target.nodeName == 'TEXTAREA')) {
        var inpEle = target;
        if (e.action === 'enter') {
          inpEle.blur();
          focusedNode.focus();
          sf.base.addClass([focusedNode], FOCUS);
        } else if (e.action === 'escape') {
          inpEle.value = this.oldText;
          inpEle.blur();
          focusedNode.focus();
          sf.base.addClass([focusedNode], FOCUS);
        }
        return;
      }
      e.preventDefault();
      var eventArgs = {
        cancel: false,
        event: e
      };
      var id = focusedNode.getAttribute('data-uid');
      this.dotNetRef.invokeMethodAsync('TriggerKeyboardEvent', eventArgs, id, e.action, e.key);
    };
    SfTreeView.prototype.setMultiSelect = function (isEnabled) {
      this.options.allowMultiSelection = isEnabled;
      this.element.toggleAttribute('aria-multiselectable', isEnabled);
    };
    SfTreeView.prototype.setCssClass = function (cssClass) {
      if (this.options.cssClass) {
        sf.base.removeClass([this.element], this.options.cssClass.split(' '));
      }
      if (cssClass) {
        sf.base.addClass([this.element], cssClass.split(' '));
      }
      this.options.cssClass = cssClass;
    };
    SfTreeView.prototype.wireEditingEvents = function (toBind) {
      var _this_1 = this;
      if (toBind && !this.options.disabled) {
        // eslint-disable-next-line
        var proxy_1 = this;
        this.touchEditObj = new sf.base.Touch(this.element, {
          tap: function tap(e) {
            if (_this_1.isDoubleTapped(e) && e.tapCount === 2) {
              e.originalEvent.preventDefault();
              proxy_1.editingHandler(e.originalEvent);
            }
          }
        });
      } else if (this.touchEditObj) {
        this.touchEditObj.destroy();
      }
    };
    SfTreeView.prototype.setDragAndDrop = function (toBind) {
      if (toBind && !this.options.disabled) {
        this.initializeDrag();
      } else {
        this.destroyDrag();
      }
    };
    SfTreeView.prototype.setDragArea = function (dragArea) {
      if (this.options.allowDragAndDrop) {
        this.dragObj.dragArea = dragArea;
      }
    };
    SfTreeView.prototype.destroyDrag = function () {
      if (this.dragObj && this.dropObj) {
        this.dragObj.destroy();
        this.dropObj.destroy();
      }
    };
    SfTreeView.prototype.scrollUp = function (scrollParent) {
      var node = sf.base.select(".e-fullrow", this.element);
      scrollParent.scrollBy(0, -(node.offsetHeight / 2));
    };
    SfTreeView.prototype.scrollDown = function (scrollParent) {
      var node = sf.base.select(".e-fullrow", this.element);
      scrollParent.scrollBy(0, node.offsetHeight / 2);
    };
    SfTreeView.prototype.clearTimer = function () {
      window.clearInterval(this.timer);
    };
    SfTreeView.prototype.initializeDrag = function () {
      var _this_1 = this;
      var virtualEle;
      this.dragObj = new sf.base.Draggable(this.element, {
        enableTailMode: true,
        dragArea: this.options.dropArea,
        distance: 5,
        dragTarget: '.' + TEXTWRAP,
        helper: function helper(e) {
          _this_1.dragTarget = e.sender.target;
          var dragRoot = sf.base.closest(_this_1.dragTarget, '.' + ROOT);
          var dragWrap = sf.base.closest(_this_1.dragTarget, '.' + TEXTWRAP);
          _this_1.dragLi = sf.base.closest(_this_1.dragTarget, '.' + LISTITEM);
          if (_this_1.options.fullRowSelect && !dragWrap && _this_1.dragTarget.classList.contains(FULLROW)) {
            dragWrap = _this_1.dragTarget.nextElementSibling;
          }
          if (!_this_1.dragTarget || !e.element.isSameNode(dragRoot) || !dragWrap || _this_1.dragTarget.classList.contains(ROOT) || _this_1.dragTarget.classList.contains(PARENTITEM) || _this_1.dragTarget.classList.contains(LISTITEM) || _this_1.dragLi.classList.contains(DISABLE)) {
            return false;
          }
          var cloneEle = dragWrap.cloneNode(true);
          if (sf.base.isNullOrUndefined(sf.base.select('div.' + ICON, cloneEle))) {
            var icon = sf.base.createElement('div', {
              className: ICON + ' ' + EXPANDABLE
            });
            cloneEle.insertBefore(icon, cloneEle.children[0]);
          }
          var cssClass = DRAGITEM + ' ' + ROOT + ' ' + _this_1.options.cssClass + ' ' + (_this_1.options.enableRtl ? RTL : EMPTY);
          virtualEle = sf.base.createElement('div', {
            className: cssClass
          });
          virtualEle.appendChild(cloneEle);
          var selectedLI = _this_1.element.querySelectorAll('.' + ACTIVE);
          var length = selectedLI.length;
          if (length > 1 && _this_1.options.allowMultiSelection && _this_1.dragLi.classList.contains(ACTIVE)) {
            var cNode = sf.base.createElement('span', {
              className: DROPCOUNT,
              innerHTML: EMPTY + length
            });
            virtualEle.appendChild(cNode);
          }
          document.body.appendChild(virtualEle);
          document.body.style.cursor = EMPTY;
          _this_1.dragData = _this_1.getNodeData(_this_1.dragLi);
          _this_1.virtualEle = virtualEle;
          return virtualEle;
        },
        drag: function drag(e) {
          _this_1.clearTimer();
          if (_this_1.mouseUpStatus) {
            sf.base.detach(virtualEle);
            sf.base.removeClass([_this_1.element], DRAGGING);
            _this_1.removeVirtualEle();
            document.body.style.cursor = EMPTY;
            return;
          }
          _this_1.dragObj.setProperties({
            cursorAt: {
              top: !sf.base.isNullOrUndefined(e.event.targetTouches) || sf.base.Browser.isDevice ? 60 : -20
            }
          });
          _this_1.dragAction(e, virtualEle);
          var scrollParent = _this_1.getScrollParent(e.target);
          var elementData;
          if (!sf.base.isNullOrUndefined(scrollParent)) {
            elementData = scrollParent.getBoundingClientRect();
            _this_1.virtualEle.style.position = 'fixed';
            if (e.event.y <= elementData.top + 30 || elementData.top < 0 && e.event.y <= 30) {
              var _this_2 = _this_1;
              _this_1.timer = window.setInterval(function () {
                _this_2.scrollUp(scrollParent);
              }, 200);
            }
            if (e.event.y >= (elementData.top < 0 ? scrollParent.clientHeight - 60 : elementData.top + scrollParent.clientHeight - 60)) {
              var _this_3 = _this_1;
              _this_1.timer = window.setInterval(function () {
                _this_3.scrollDown(scrollParent);
              }, 200);
            }
          }
        },
        dragStart: function dragStart(e) {
          if (sf.base.isNullOrUndefined(e.target)) return;
          sf.base.addClass([_this_1.element], DRAGGING);
          var listItem = sf.base.closest(e.target, '.' + LISTITEM);
          var level;
          if (listItem) {
            level = parseInt(listItem.getAttribute('aria-level'), 10);
            sf.base.EventHandler.add(listItem, MOUSEUP, _this_1.mouseupHandler, _this_1);
          }
          var eventArgs = _this_1.getDragEvent(e.event, _this_1, null, e.target, null, virtualEle, level);
          if (eventArgs.draggedNode.classList.contains(EDITING)) {
            _this_1.dragObj.intDestroy(e.event);
            _this_1.dragCancelAction(virtualEle);
          } else {
            _this_1.dragStartEventArgs = e;
            var left = _this_1.getXYValue(e.event, 'X');
            var top_1 = _this_1.getXYValue(e.event, 'Y');
            virtualEle.style.display = NONE;
            _this_1.dotNetRef.invokeMethodAsync('TriggerDragStartEvent', _this_1.updateObjectValues(eventArgs), left, top_1);
          }
        },
        dragStop: function dragStop(e) {
          if (sf.base.isNullOrUndefined(e.target)) return;
          _this_1.clearTimer();
          sf.base.removeClass([_this_1.element], DRAGGING);
          var hoveredNode = sf.base.select('.' + HOVER, _this_1.element);
          var sibEleOffsetTop;
          //If the target is SIBLING it will change the target
          if (e.target.classList.contains(SIBLING)) {
            e.target = !sf.base.isNullOrUndefined(hoveredNode) ? hoveredNode : sf.base.closest(e.target, '.' + LISTITEM);
          }
          _this_1.sibEle = sf.base.select('.' + SIBLING);
          if (_this_1.sibEle) {
            sibEleOffsetTop = _this_1.sibEle.offsetTop;
          }
          _this_1.removeVirtualEle();
          var dropTarget = e.target;
          var preventTargetExpand = false;
          _this_1.dropRoot = sf.base.closest(dropTarget, '.' + DROPPABLE);
          _this_1.isHelperElement = true;
          if (!dropTarget || !_this_1.dropRoot) {
            if (e.helper && e.helper.parentNode) {
              sf.base.remove(e.helper);
            }
            document.body.style.cursor = EMPTY;
            _this_1.isHelperElement = false;
          }
          var listItem = sf.base.closest(dropTarget, '.' + LISTITEM);
          var level;
          var liItem = listItem;
          if (liItem) {
            _this_1.isUp = liItem.offsetTop > sibEleOffsetTop ? true : false;
          }
          if (sf.base.isNullOrUndefined(_this_1.sibEle)) {
            _this_1.isUp = true;
          }
          if (listItem) {
            level = parseInt(listItem.getAttribute('aria-level'), 10);
            sf.base.EventHandler.remove(listItem, MOUSEUP, _this_1.mouseupHandler);
            _this_1.mouseUpStatus = false;
          }
          var dropEle = dropTarget;
          var eventArgs = _this_1.getDragEvent(e.event, _this_1, dropTarget, dropEle, null, e.helper, level);
          _this_1.dragStopEventArgs = e;
          eventArgs.preventTargetExpand = preventTargetExpand;
          var left = _this_1.getXYValue(e.event, 'X');
          var top = _this_1.getXYValue(e.event, 'Y');
          if (sf.base.isNullOrUndefined(eventArgs.dropIndicator)) {
            eventArgs.dropIndicator = NODROP;
            document.body.style.cursor = 'not-allowed';
          }
          _this_1.dotNetRef.invokeMethodAsync('TriggerDragStopEvent', _this_1.updateObjectValues(eventArgs), left, top);
        }
      });
      this.dropObj = new sf.base.Droppable(this.element, {
        out: function out(e) {
          if (!sf.base.isNullOrUndefined(e && e.target) && !e.target.classList.contains(SIBLING)) {
            document.body.style.cursor = 'not-allowed';
          }
        },
        over: function over(e) {
          document.body.style.cursor = EMPTY;
        }
      });
    };
    SfTreeView.prototype.updateObjectValues = function (evtArgs) {
      /* tslint:disable:no-string-literal */
      evtArgs['clonedNode'] = null;
      evtArgs['draggedNode'] = null;
      evtArgs['draggedParentNode'] = null;
      evtArgs['dropTarget'] = null;
      evtArgs['droppedNode'] = null;
      evtArgs['target'] = null;
      /* tslint:enable:no-string-literal */
      return evtArgs;
    };
    SfTreeView.prototype.dragNodeStop = function (eventArgs) {
      this.dragParent = eventArgs.draggedParentNode;
      this.preventExpand = eventArgs.preventTargetExpand;
      if (eventArgs.cancel || eventArgs.dropIndicator == NODROP) {
        if (this.dragStopEventArgs.helper.parentNode) {
          sf.base.remove(this.dragStopEventArgs.helper);
        }
        document.body.style.cursor = '';
        this.isHelperElement = false;
      }
      this.dragStartAction = false;
      if (this.isHelperElement) {
        this.dropAction(this.dragStopEventArgs);
      }
    };
    SfTreeView.prototype.dragStartActionContinue = function (cancel) {
      if (cancel) {
        this.dragObj.intDestroy(this.dragStartEventArgs.event);
        this.dragCancelAction(this.virtualEle);
      } else {
        this.virtualEle.style.display = BLOCK;
        this.dragStartAction = true;
        this.dragStartEventArgs.bindEvents(sf.base.getElement(this.dragStartEventArgs.dragElement));
      }
    };
    SfTreeView.prototype.getId = function (ele) {
      if (sf.base.isNullOrUndefined(ele)) {
        return null;
      } else if (typeof ele === 'string') {
        return ele;
      } else if (_typeof(ele) === 'object') {
        return sf.base.getElement(ele).getAttribute('data-uid');
      } else {
        return null;
      }
    };
    // eslint-disable-next-line
    SfTreeView.prototype.getOffsetValue = function (e, direction) {
      var value;
      var classList = e.target.classList;
      if (sf.base.Browser.info.name === 'mozilla' && !sf.base.isNullOrUndefined(classList)) {
        var rect = e.target.getBoundingClientRect();
        value = Math.ceil(direction === 'Y' ? e.event.clientY - rect.top : e.event.clientX - rect.left);
      } else {
        value = direction === 'Y' ? e.event.offsetY : e.event.offsetX;
      }
      return value;
    };
    // eslint-disable-next-line
    SfTreeView.prototype.dropAction = function (e) {
      var offsetY = this.getOffsetValue(e, 'Y');
      var dropTarget = e.target;
      var dragObj;
      var level;
      var drop = false;
      dragObj = window.sfBlazor.getCompInstance(this.dataId);
      if (dragObj && dragObj.dragTarget) {
        var dragTarget = dragObj.dragTarget;
        var dragLi = sf.base.closest(dragTarget, '.' + LISTITEM);
        var dropLi = sf.base.closest(dropTarget, '.' + LISTITEM);
        if (dropLi == null && dropTarget.classList.contains(ROOT)) {
          dropLi = dropTarget.firstElementChild;
        }
        sf.base.remove(e.helper);
        if (dropTarget && !dropTarget.closest('.' + ROOT + '.' + DROPPABLE)) {
          return;
        }
        document.body.style.cursor = EMPTY;
        if (!dropLi || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {
          return;
        }
        if (dragObj.options.allowMultiSelection && dragLi.classList.contains(ACTIVE)) {
          var sNodes = sf.base.selectAll('.' + ACTIVE, dragObj.element);
          if (e.target.offsetHeight <= 33 && offsetY > e.target.offsetHeight - 10 && offsetY > 6) {
            for (var i = sNodes.length - 1; i >= 0; i--) {
              if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {
                continue;
              }
              this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj, offsetY);
            }
          } else {
            for (var i = 0; i < sNodes.length; i++) {
              if (dropLi.isSameNode(sNodes[i]) || this.isDescendant(sNodes[i], dropLi)) {
                continue;
              }
              this.appendNode(dropTarget, sNodes[i], dropLi, e, dragObj, offsetY);
            }
          }
        } else {
          this.appendNode(dropTarget, dragLi, dropLi, e, dragObj, offsetY);
        }
        level = parseInt(dragLi.getAttribute('aria-level'), 10);
        drop = true;
      }
      var element = e.element;
      var eventArgs = this.getDragEvent(e.event, dragObj, dropTarget, e.target, element, null, level, drop);
      var left = this.getXYValue(e.event, 'X');
      var top = this.getXYValue(e.event, 'Y');
      this.dotNetRef.invokeMethodAsync('TriggerNodeDropped', this.updateObjectValues(eventArgs), left, top);
    };
    SfTreeView.prototype.isDoubleTapped = function (e) {
      var target = e.originalEvent.target;
      var secondTap;
      if (target && e.tapCount) {
        if (e.tapCount === 1) {
          this.firstTap = sf.base.closest(target, '.' + LISTITEM);
        } else if (e.tapCount === 2) {
          secondTap = sf.base.closest(target, '.' + LISTITEM);
        }
      }
      return this.firstTap === secondTap;
    };
    SfTreeView.prototype.isDescendant = function (parent, child) {
      var node = child.parentNode;
      while (!sf.base.isNullOrUndefined(node)) {
        if (node === parent) {
          return true;
        }
        node = node.parentNode;
      }
      return false;
    };
    SfTreeView.prototype.appendNode = function (dropTarget, dragLi, dropLi, e, dragObj, offsetY) {
      var checkContainer = sf.base.closest(dropTarget, '.' + CHECKBOXWRAP);
      var collapse = sf.base.closest(e.target, '.' + COLLAPSIBLE);
      var expand = sf.base.closest(e.target, '.' + EXPANDABLE);
      var offsetX = this.getOffsetValue(e, 'X');
      if (!dragLi.classList.contains(DISABLE) && !checkContainer && (expand && offsetY < 5 || collapse && offsetX < 3 || expand && offsetY > 19 || collapse && offsetX > 19 || !expand && !collapse)) {
        if (dropTarget.nodeName === 'LI') {
          this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);
        } else if (dropTarget.firstElementChild && dropTarget.classList.contains(ROOT)) {
          if (dropTarget.firstElementChild.nodeName === 'UL') {
            this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);
          }
        } else if (dropTarget.classList.contains(COLLAPSIBLE) || dropTarget.classList.contains(EXPANDABLE)) {
          this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);
        } else {
          this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY);
        }
      } else {
        this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY, true);
      }
    };
    SfTreeView.prototype.dropAsSiblingNode = function (dragLi, dropLi, e, dragObj) {
      var dropUl = sf.base.closest(dropLi, '.' + PARENTITEM);
      var dragParentUl = sf.base.closest(dragLi, '.' + PARENTITEM);
      var dragParentLi = sf.base.closest(dragParentUl, '.' + LISTITEM);
      var dropParentLi = sf.base.closest(dropUl, '.' + LISTITEM);
      var dropParentLiId = null;
      var dragParentLiId = null;
      var pre;
      // eslint-disable-next-line
      var offsetX = this.getOffsetValue(e, 'X');
      // eslint-disable-next-line
      var offsetY = this.getOffsetValue(e, 'Y');
      if (e.target.offsetHeight > 0 && offsetY > e.target.offsetHeight - 2) {
        pre = false;
      } else if (offsetY < 2) {
        pre = true;
      } else if (e.target.classList.contains(EXPANDABLE) || e.target.classList.contains(COLLAPSIBLE)) {
        if (offsetY < 5 || offsetX < 3) {
          pre = true;
        } else if (offsetY > 15 || offsetX > 17) {
          pre = false;
        }
      }
      var originalTarget = e.event.target;
      if (originalTarget.classList.contains(SIBLING) && this.isUp) {
        pre = true;
      }
      if (dropParentLi) {
        dropParentLiId = dropParentLi.getAttribute('data-uid');
      }
      if (dragParentLi) {
        dragParentLiId = dragParentLi.getAttribute('data-uid');
      }
      var outerDrag = this.isExternalDrop(dragLi);
      var targetControl = this.dropRoot ? window.sfBlazor.getCompInstance(this.dataId) : null;
      var droppedInstance = outerDrag ? targetControl : this;
      var eventArgs = this.getDropArgs(dragLi, dropLi, dragParentLiId, dragObj, dropParentLiId, pre);
      droppedInstance.dotNetRef.invokeMethodAsync('DropNodeAsSibling', eventArgs);
      this.updateAriaLevel(dragLi);
    };
    SfTreeView.prototype.updateAriaLevel = function (dragLi) {
      var level = this.parents(dragLi, '.' + PARENTITEM).length;
      dragLi.setAttribute('aria-level', EMPTY + level);
      this.updateChildAriaLevel(sf.base.select('.' + PARENTITEM, dragLi), level + 1);
    };
    SfTreeView.prototype.updateChildAriaLevel = function (element, level) {
      if (!sf.base.isNullOrUndefined(element)) {
        var cNodes = element.querySelectorAll('li');
        for (var _i = 0, cNodes_1 = cNodes; _i < cNodes_1.length; _i++) {
          var liEle = cNodes_1[_i];
          liEle.setAttribute('aria-level', String(level));
          this.updateChildAriaLevel(sf.base.select('.' + PARENTITEM, liEle), level + 1);
        }
      }
    };
    SfTreeView.prototype.dropAsChildNode = function (dragLi, dropLi, dragObj, index, e, pos, isCheck) {
      var dragParentUl = sf.base.closest(dragLi, '.' + PARENTITEM);
      var dragParentLi = sf.base.closest(dragParentUl, '.' + LISTITEM);
      var dropParentUl = sf.base.closest(dropLi, '.' + PARENTITEM);
      var dropParentLi = sf.base.closest(dropParentUl, '.' + LISTITEM);
      var dropParentLiId = null;
      var dragParentLiId = null;
      if (dropParentLi) {
        dropParentLiId = dropParentLi.getAttribute('data-uid');
      }
      if (dragParentLi) {
        dragParentLiId = dragParentLi.getAttribute('data-uid');
      }
      var outerDrag = this.isExternalDrop(dragLi);
      var srcControl = sf.base.closest(dragLi, '.' + ROOT) ? window.sfBlazor.getCompInstance(this.dataId) : this.element ? window.sfBlazor.getCompInstance(this.dataId) : null;
      var targetControl = this.dropRoot ? window.sfBlazor.getCompInstance(this.dropRoot.getAttribute('data-id')) : null;
      var droppedInstance = outerDrag ? targetControl : this;
      var eventArgs;
      if (e && pos < 7 && !isCheck) {
        eventArgs = this.getDropArgs(dragLi, dropLi, dragParentLiId, srcControl, dropParentLiId, true);
        droppedInstance.dotNetRef.invokeMethodAsync('DropNodeAsSibling', eventArgs);
      } else if (e && e.target.offsetHeight > 0 && pos > e.target.offsetHeight - 10 && !isCheck) {
        eventArgs = this.getDropArgs(dragLi, dropLi, dragParentLiId, srcControl, dropParentLiId, false);
        droppedInstance.dotNetRef.invokeMethodAsync('DropNodeAsSibling', eventArgs);
      } else {
        eventArgs = this.getDropArgs(dragLi, dropLi, dragParentLiId, srcControl);
        droppedInstance.dotNetRef.invokeMethodAsync('DropNodeAsChild', eventArgs);
      }
      this.updateAriaLevel(dragLi);
    };
    SfTreeView.prototype.isExternalDrop = function (dragLi) {
      var isExternalDrop = false;
      var srcElement = sf.base.closest(dragLi, '.' + ROOT) ? sf.base.closest(dragLi, '.' + ROOT) : this.element;
      var targetElement = this.dropRoot;
      if (srcElement != null && targetElement != null && !srcElement.isSameNode(targetElement)) {
        isExternalDrop = true;
      }
      return isExternalDrop;
    };
    SfTreeView.prototype.getDropArgs = function (dragLi, dropLi, dragParentLiId, treeObj, dropParentLi, pre) {
      return {
        dragLi: dragLi.getAttribute('data-uid'),
        dropLi: dropLi.getAttribute('data-uid'),
        dragParentLi: dragParentLiId,
        dropParentLi: dropParentLi,
        pre: pre,
        srcTree: treeObj.dotNetRef,
        isExternalDrag: this.isExternalDrop(dragLi)
      };
    };
    SfTreeView.prototype.dragCancelAction = function (virtualEle) {
      sf.base.detach(virtualEle);
      sf.base.removeClass([this.element], DRAGGING);
      this.dragStartAction = false;
    };
    SfTreeView.prototype.removeVirtualEle = function () {
      var sibEle = sf.base.select('.' + SIBLING);
      if (sibEle) {
        sf.base.detach(sibEle);
      }
    };
    SfTreeView.prototype.dragAction = function (e, virtualEle) {
      if (sf.base.isNullOrUndefined(e.target)) return;
      var dropRoot = sf.base.closest(e.target, '.' + DROPPABLE);
      var dropWrap = sf.base.closest(e.target, '.' + TEXTWRAP);
      var icon = sf.base.select('div.' + ICON, virtualEle);
      var offsetX = this.getOffsetValue(e, 'X');
      var offsetY = this.getOffsetValue(e, 'Y');
      sf.base.removeClass([icon], [DROPIN, DROPNEXT, DROPOUT, NODROP]);
      this.removeVirtualEle();
      document.body.style.cursor = EMPTY;
      var classList = e.target.classList;
      if (this.options.fullRowSelect && !dropWrap && !sf.base.isNullOrUndefined(classList) && classList.contains(FULLROW)) {
        dropWrap = e.target.nextElementSibling;
      }
      if (dropRoot) {
        var dropLi = sf.base.closest(e.target, '.' + LISTITEM);
        var checkContainer = sf.base.closest(e.target, '.' + CHECKBOXWRAP);
        var collapse = sf.base.closest(e.target, '.' + COLLAPSIBLE);
        var expand = sf.base.closest(e.target, '.' + EXPANDABLE);
        if (!dropRoot.classList.contains(ROOT) || dropWrap && !dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi)) {
          if (dropLi && e && !expand && !collapse && offsetY < 7 && !checkContainer || expand && offsetY < 5 || collapse && offsetX < 3) {
            sf.base.addClass([icon], DROPNEXT);
            var element = sf.base.createElement('div', {
              className: SIBLING
            });
            var index = this.options.fullRowSelect ? 1 : 0;
            dropLi.insertBefore(element, dropLi.children[index]);
          } else if (dropLi && e && !expand && !collapse && e.target.offsetHeight > 0 && offsetY > e.target.offsetHeight - 10 && !checkContainer || expand && offsetY > 19 || collapse && offsetX > 19) {
            sf.base.addClass([icon], DROPNEXT);
            var element = sf.base.createElement('div', {
              className: SIBLING
            });
            var index = this.options.fullRowSelect ? 2 : 1;
            dropLi.insertBefore(element, dropLi.children[index]);
          } else {
            sf.base.addClass([icon], DROPIN);
          }
        } else if (e.target.nodeName === 'LI' && !dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi)) {
          sf.base.addClass([icon], DROPNEXT);
          this.renderVirtualEle(e);
        } else if (e.target.classList.contains(SIBLING)) {
          sf.base.addClass([icon], DROPNEXT);
        } else if (e.target.classList.contains(DROPPABLE)) {
          sf.base.addClass([icon], DROPIN);
        } else {
          sf.base.addClass([icon], DROPOUT);
        }
      } else {
        sf.base.addClass([icon], NODROP);
        document.body.style.cursor = 'not-allowed';
      }
      var listItem = sf.base.closest(e.target, LISTITEM);
      var level;
      if (listItem) {
        level = parseInt(listItem.getAttribute('aria-level'), 10);
      }
      var eventArgs = this.getDragEvent(e.event, this, e.target, e.target, null, virtualEle, level);
      if (eventArgs.dropIndicator) {
        sf.base.removeClass([icon], eventArgs.dropIndicator);
      }
      this.iconElement = icon;
      this.draggingEventArgs = eventArgs;
      var left = this.getXYValue(e.event, 'X');
      var top = this.getXYValue(e.event, 'Y');
      this.dotNetRef.invokeMethodAsync('TriggerNodeDraggingEvent', this.updateObjectValues(eventArgs), left, top);
    };
    SfTreeView.prototype.nodeDragging = function (eventArgs) {
      if (this.draggingEventArgs.dropIndicator) {
        sf.base.addClass([this.iconElement], this.draggingEventArgs.dropIndicator);
      }
    };
    SfTreeView.prototype.renderVirtualEle = function (e) {
      // eslint-disable-next-line
      var offsetY = this.getOffsetValue(e, 'Y');
      var previous;
      if (offsetY > e.target.offsetHeight - 2) {
        previous = false;
      } else if (offsetY < 2) {
        previous = true;
      }
      var element = sf.base.createElement('div', {
        className: SIBLING
      });
      var index = this.options.fullRowSelect ? previous ? 1 : 2 : previous ? 0 : 1;
      this.dropTargetElement = e.target.children[index];
      e.target.insertBefore(element, e.target.children[index]);
    };
    SfTreeView.prototype.parents = function (element, selector) {
      var matched = [];
      var node = element.parentNode;
      while (!sf.base.isNullOrUndefined(node)) {
        if (sf.base.matches(node, selector)) {
          matched.push(node);
        }
        node = node.parentNode;
      }
      return matched;
    };
    SfTreeView.prototype.getDragEvent = function (event, obj, dropTarget, target, dragNode, cloneEle, level, drop) {
      var dropLi = dropTarget ? sf.base.closest(dropTarget, '.' + LISTITEM) : null;
      // eslint-disable-next-line
      var dropData = dropLi ? this.getNodeData(dropLi) : null;
      var draggedNode = obj ? obj.dragLi : dragNode;
      // eslint-disable-next-line
      var draggedNodeData = obj ? obj.dragData : null;
      var newParent = dropTarget ? this.parents(dropTarget, '.' + LISTITEM) : null;
      var dragLiParent = obj.dragLi.parentElement;
      var dragParent = obj.dragLi ? sf.base.closest(dragLiParent, '.' + LISTITEM) : null;
      var targetParent = null;
      var indexValue = null;
      var iconCss = [DROPNEXT, DROPIN, DROPOUT, NODROP];
      var iconClass = null;
      var node = drop ? draggedNode : dropLi;
      var index = node ? sf.base.closest(node, '.e-list-parent') : null;
      var i = 0;
      dragParent = obj.dragLi && dragParent === null ? sf.base.closest(dragLiParent, '.' + ROOT) : dragParent;
      dragParent = drop ? this.dragParent : dragParent;
      if (cloneEle) {
        while (i < 4) {
          if (sf.base.select('.' + ICON, cloneEle).classList.contains(iconCss[i])) {
            iconClass = iconCss[i];
            break;
          }
          i++;
        }
      }
      if (index) {
        var dragIndex = void 0;
        var treeNodes = obj.element.querySelectorAll('.' + dropLi.classList[1]);
        for (var i_1 = 0; i_1 < treeNodes.length; i_1++) {
          if (treeNodes[i_1] === dropLi) {
            indexValue = i_1;
          }
          if (treeNodes[i_1] === draggedNode) {
            dragIndex = i_1;
          }
          if (!sf.base.isNullOrUndefined(dragIndex) && !sf.base.isNullOrUndefined(indexValue)) {
            break;
          }
        }
        if (!sf.base.isNullOrUndefined(this.sibEle)) {
          if (draggedNode.classList[1] === dropLi.classList[1]) {
            indexValue = this.isUp ? indexValue - 1 : indexValue;
          } else {
            if (indexValue === treeNodes.length - 1) {
              indexValue = !this.isUp ? treeNodes.length : indexValue;
            } else {
              indexValue = this.isUp ? indexValue : indexValue + 1;
            }
          }
          if (dragIndex > indexValue) {
            indexValue += 1;
          }
        } else {
          if (dragIndex > indexValue) {
            indexValue += 1;
          }
          //For drop the node to different level
          if (draggedNode.classList[1] !== dropLi.classList[1]) {
            indexValue = indexValue !== 0 ? indexValue === treeNodes.length - 1 ? treeNodes.length : indexValue + 1 : 0;
          } else if (event.offsetY <= 5 && indexValue != 0) {
            indexValue -= 1;
          }
          if (iconClass === DROPIN) {
            indexValue = 0;
            if (dropLi.classList.contains('e-has-child')) {
              var level_1 = parseInt(dropLi.getAttribute('aria-level')) + 1;
              var nodeArray = dropLi.querySelectorAll('[aria-level="' + level_1 + '"]');
              var tempArray = Array.from(nodeArray);
              indexValue = tempArray.findIndex(function (data) {
                return data == draggedNode;
              }) === -1 ? nodeArray.length : nodeArray.length - 1;
            }
          }
        }
        if (iconClass == null || iconClass == NODROP) {
          indexValue = null;
        }
      }
      if (dropTarget) {
        if (newParent.length === 0) {
          targetParent = null;
        } else if (dropTarget.classList.contains(LISTITEM)) {
          targetParent = newParent[0];
        } else {
          targetParent = newParent[1];
        }
      }
      if (dropLi === draggedNode) {
        targetParent = dropLi;
      }
      if (dropTarget && target.offsetHeight <= 33 && event.offsetY < target.offsetHeight - 10 && event.offsetY > 6) {
        targetParent = dropLi;
        if (!drop) {
          level = ++level;
          var parent_1 = targetParent ? sf.base.select('.e-list-parent', targetParent) : null;
          indexValue = parent_1 ? parent_1.children.length : 0;
        }
      }
      return {
        cancel: false,
        clonedNode: cloneEle,
        event: event,
        draggedNode: draggedNode,
        draggedNodeData: draggedNodeData,
        droppedNode: dropLi,
        droppedNodeData: dropData,
        dropIndex: indexValue,
        dropLevel: level,
        draggedParentNode: dragParent,
        dropTarget: targetParent,
        dropIndicator: iconClass,
        target: target
      };
    };
    SfTreeView.prototype.editingHandler = function (e) {
      var target = e.target;
      if (!target || target.classList.contains(ROOT) || target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) || target.classList.contains(ICON) || target.classList.contains(INPUT) || target.classList.contains(INPUTGROUP)) {
        return;
      } else {
        this.createTextbox(sf.base.closest(target, '.' + LISTITEM), e);
      }
    };
    SfTreeView.prototype.createTextbox = function (liEle, e) {
      this.editEventArgs = this.getEditEvent(liEle, null, null);
      sf.base.addClass([liEle], EDITING);
      this.isEdited = true;
      this.dotNetRef.invokeMethodAsync('TriggerNodeEditingEvent', this.editEventArgs);
    };
    SfTreeView.prototype.getEditEvent = function (liEle, newText, inputEle) {
      // eslint-disable-next-line
      var data = this.getNodeData(liEle);
      return {
        newText: newText,
        nodeData: data,
        oldText: this.oldText,
        innerHtml: inputEle
      };
    };
    SfTreeView.prototype.focusIn = function () {
      if (document.activeElement.nodeName == 'INPUT' || document.activeElement.nodeName == 'TEXTAREA') {
        var inputElement = document.activeElement;
        this.updateOldText(inputElement.value);
      }
      if (!this.mouseDownStatus) {
        sf.base.addClass([this.getFocusedNode()], FOCUS);
      }
      this.mouseDownStatus = false;
    };
    SfTreeView.prototype.focusOut = function () {
      this.removeHover();
      sf.base.removeClass([this.getFocusedNode()], FOCUS);
    };
    SfTreeView.prototype.touchStart = function (e) {
      this.startTime = e.timeStamp;
    };
    SfTreeView.prototype.touchEnd = function (e) {
      this.endTime = e.timeStamp;
      var touchDifference = this.endTime - this.startTime;
      if (touchDifference > 500 && !this.dragStartAction) {
        var target = e.target;
        var li = sf.base.closest(target, '.' + LISTITEM);
        e.preventDefault();
        this.toggleSelect(li, e, true);
      }
    };
    SfTreeView.prototype.getParentElement = function (element) {
      var parentEle = element.parentElement;
      if (window.getComputedStyle(parentEle).resize != "none") {
        return parentEle;
      } else if (parentEle.nodeName != "BODY") {
        parentEle = this.getParentElement(parentEle);
      }
      return parentEle;
    };
    SfTreeView.prototype.resizeHandler = function (e) {
      switch (e.type) {
        case "mousedown":
          this.isParentMouseDown = true;
          break;
        case "mouseup":
          this.isParentMouseDown = false;
          break;
        case "mousemove":
          if (this.isParentMouseDown) {
            this.updateWrap();
          }
          break;
      }
    };
    SfTreeView.prototype.wireEvents = function () {
      if (!this.options.disabled) {
        this.setExpandOnType();
        if (this.options.allowTextWrap) {
          var parentElement = this.getParentElement(this.element);
          if (parentElement.nodeName != "BODY") {
            sf.base.EventHandler.add(parentElement, 'mousedown mouseup mousemove', this.resizeHandler, this);
          }
        }
        sf.base.EventHandler.add(this.element, MOUSEDOWN, this.mouseDownHandler, this);
        sf.base.EventHandler.add(this.element, 'click', this.clickHandler, this);
        sf.base.EventHandler.add(this.element, MOUSEOVER, this.onMouseOver, this);
        sf.base.EventHandler.add(this.element, FOCUSING, this.focusIn, this);
        sf.base.EventHandler.add(this.element, BLUR, this.focusOut, this);
        sf.base.EventHandler.add(this.element, MOUSEOUT, this.onMouseLeave, this);
        sf.base.EventHandler.add(this.element, 'contextmenu', this.contextLongPress, this);
        if (sf.base.Browser.isDevice) {
          sf.base.EventHandler.add(this.element, 'touchstart', this.touchStart, this);
          sf.base.EventHandler.add(this.element, 'touchend', this.touchEnd, this);
        }
        if (this.options.showCheckBox) {
          var frame = sf.base.select('.' + CHECKBOXFRAME, this.element);
          if (!sf.base.isNullOrUndefined(frame)) {
            sf.base.EventHandler.add(frame, 'mousedown', this.frameMouseHandler, this);
            sf.base.EventHandler.add(frame, 'mouseup', this.frameMouseHandler, this);
          }
        }
        if (this.options.expandOnType !== EXPANDONNONE) {
          this.wireExpandOnEvent(true);
        }
        this.keyboardModule = new sf.base.KeyboardEvents(this.element, {
          keyAction: this.keyboardActionHandler.bind(this),
          keyConfigs: this.keyConfigs,
          eventName: 'keydown'
        });
      }
    };
    SfTreeView.prototype.frameMouseHandler = function (e) {
      var rippleSpan = sf.base.select('.' + CHECKBOXRIPPLE, e.target.parentElement);
      this.rippleMouseHandler(e, rippleSpan);
    };
    SfTreeView.prototype.rippleMouseHandler = function (e, rippleSpan) {
      if (rippleSpan) {
        var event_1 = document.createEvent('MouseEvents');
        event_1.initEvent(e.type, false, true);
        rippleSpan.dispatchEvent(event_1);
      }
    };
    SfTreeView.prototype.setExpandOnType = function () {
      var expandOnType = this.options.expandOnType;
      this.options.expandOnType = expandOnType === EXPANDONAUTO ? sf.base.Browser.isDevice ? CLICK : DBLCLICK : expandOnType;
    };
    SfTreeView.prototype.expandHandler = function (e) {
      var target = e.originalEvent.target;
      if (!target || target.classList.contains(INPUT) || target.classList.contains(ROOT) || target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) || target.classList.contains(ICON) || this.options.showCheckBox && sf.base.closest(target, '.' + CHECKBOXWRAP)) {
        return;
      } else {
        this.expandCollapseAction(sf.base.closest(target, '.' + LISTITEM), e);
      }
    };
    SfTreeView.prototype.expandCollapseAction = function (currLi, e) {
      var icon = sf.base.select('div.' + ICON, currLi);
      if (!icon || icon.classList.contains(PROCESS)) {
        return;
      } else {
        if (icon.classList.contains(EXPANDABLE)) {
          this.expandAction(currLi, e);
        } else if (icon.classList.contains(COLLAPSIBLE)) {
          this.tapEvent = e;
          this.expandArgs = this.getExpandEvent(currLi, e);
          this.dotNetRef.invokeMethodAsync('NodeCollapsingEventCallback', this.expandArgs, false);
        }
      }
    };
    SfTreeView.prototype.animateHeight = function (args, start, end) {
      var remaining = (args.duration - args.timeStamp) / args.duration;
      var currentHeight = (end - start) * remaining + start;
      args.element.parentElement.style.height = currentHeight + 'px';
    };
    SfTreeView.prototype.expandAction = function (currLi, e) {
      this.expandArgs = this.getExpandEvent(currLi, e);
      if (this.options.allowTextWrap) {
        var ul = sf.base.select('.' + PARENTITEM, currLi);
        this.isNodeRendered = ul ? true : false;
      }
      if (currLi && currLi.classList.contains(PROCESS)) {
        sf.base.removeClass([currLi], PROCESS);
      }
      this.dotNetRef.invokeMethodAsync('TriggerNodeExpandingEvent', this.expandArgs);
    };
    SfTreeView.prototype.collapseAction = function (currLi, e, fromClickHandler, cancel) {
      if (sf.base.isNullOrUndefined(e)) {
        e = this.tapEvent;
      }
      this.expandArgs = this.getExpandEvent(currLi, e);
      if (!cancel) {
        var start_1 = 0;
        var end_1 = 0;
        // eslint-disable-next-line
        var proxy_2 = this;
        var ul = sf.base.select('.' + PARENTITEM, currLi);
        var liEle_1 = currLi;
        var activeElement_1 = sf.base.select('.' + LISTITEM + '.' + ACTIVE, currLi);
        if (ul) {
          var icon = sf.base.select('div.' + ICON, liEle_1);
          sf.base.removeClass([icon], COLLAPSIBLE);
          sf.base.addClass([icon], EXPANDABLE);
        }
        if (!sf.base.isNullOrUndefined(currLi.getAttribute("aria-expanded"))) {
          currLi.setAttribute("aria-expanded", "false");
        }
        if (this.options.animation.collapse.duration === 0) {
          ul.style.display = NONE;
          proxy_2.dotNetRef.invokeMethodAsync('TriggerNodeCollapsingEvent', proxy_2.expandArgs);
          if (fromClickHandler) {
            proxy_2.triggerClickEvent(e.originalEvent, currLi);
          }
        } else {
          this.animationObj.animate(ul, {
            name: this.options.animation.collapse.effect === 'None' && sf.base.animationMode === 'Enable' ? 'SlideUp' : this.options.animation.collapse.effect,
            duration: this.options.animation.collapse.duration,
            timingFunction: this.options.animation.collapse.easing,
            begin: function begin(args) {
              proxy_2.isAnimationCompleted = false;
              liEle_1.style.overflow = HIDDEN;
              if (!sf.base.isNullOrUndefined(activeElement_1) && activeElement_1 instanceof HTMLElement) {
                activeElement_1.classList.add(ITEM_ANIMATION_ACTIVE);
              }
              start_1 = sf.base.select('.' + TEXTWRAP, currLi).offsetHeight;
              end_1 = liEle_1.offsetHeight;
            },
            progress: function progress(args) {
              proxy_2.animateHeight(args, start_1, end_1);
            },
            end: function end(args) {
              args.element.style.display = NONE;
              if (!sf.base.isNullOrUndefined(activeElement_1) && activeElement_1 instanceof HTMLElement) {
                activeElement_1.classList.remove(ITEM_ANIMATION_ACTIVE);
              }
              proxy_2.dotNetRef.invokeMethodAsync('TriggerNodeCollapsingEvent', proxy_2.expandArgs);
              if (fromClickHandler) {
                proxy_2.triggerClickEvent(e.originalEvent, currLi);
              }
              proxy_2.isAnimationCompleted = true;
            }
          });
        }
      }
    };
    SfTreeView.prototype.wireExpandOnEvent = function (toBind) {
      var _this_1 = this;
      if (toBind) {
        // eslint-disable-next-line
        var proxy_3 = this;
        this.touchExpandObj = new sf.base.Touch(this.element, {
          tap: function tap(e) {
            if ((_this_1.options.expandOnType === CLICK || _this_1.options.expandOnType === DBLCLICK && _this_1.isDoubleTapped(e) && e.tapCount === 2) && e.originalEvent.which !== 3) {
              proxy_3.expandHandler(e);
            }
          }
        });
      } else {
        if (this.touchExpandObj) {
          this.touchExpandObj.destroy();
        }
      }
    };
    // eslint-disable-next-line
    SfTreeView.prototype.getNodeData = function (currLi, fromDS) {
      if (!sf.base.isNullOrUndefined(currLi) && currLi.classList.contains(LISTITEM) && !sf.base.isNullOrUndefined(sf.base.closest(currLi, '.' + CONTROL)) && sf.base.closest(currLi, '.' + CONTROL).classList.contains(ROOT)) {
        var id = currLi.getAttribute('data-uid');
        var pNode = sf.base.closest(currLi.parentNode, '.' + LISTITEM);
        var pid = pNode ? pNode.getAttribute('data-uid') : null;
        var selected = currLi.classList.contains(ACTIVE);
        var expanded = currLi.getAttribute('aria-expanded') === 'true';
        var hasChildren = currLi.getAttribute('aria-expanded') === null;
        var checked = null;
        if (this.options.showCheckBox) {
          checked = sf.base.select('.' + CHECKBOXWRAP, currLi).getAttribute('aria-checked');
        }
        return {
          id: id,
          text: null,
          parentID: pid,
          selected: selected,
          expanded: expanded,
          isChecked: checked,
          hasChildren: hasChildren
        };
      }
      return {
        id: EMPTY,
        text: EMPTY,
        parentID: EMPTY,
        selected: false,
        expanded: false,
        isChecked: EMPTY,
        hasChildren: false
      };
    };
    SfTreeView.prototype.getExpandEvent = function (currLi, e) {
      // eslint-disable-next-line
      var nodedata = this.getNodeData(currLi);
      return {
        isInteracted: !sf.base.isNullOrUndefined(e),
        nodeData: nodedata,
        event: e,
        isLoaded: currLi.querySelector('ul') != null ? true : false,
        nodeLevel: parseInt(currLi.getAttribute('aria-level'), 10)
      };
    };
    SfTreeView.prototype.updateSpinnerClass = function () {
      var spinnerEle = this.element.querySelector('.e-icons-spinner');
      if (spinnerEle) {
        sf.base.removeClass([spinnerEle], "e-icons-spinner");
      }
    };
    SfTreeView.prototype.expandedNode = function (expandArgs) {
      var _this_1 = this;
      var li = this.element.querySelector('[data-uid="' + expandArgs.nodeData.id + '"]');
      this.focussedElement = li;
      var ulele = sf.base.select('.' + PARENTITEM, li);
      if (ulele) {
        ulele.classList.remove(DISPLAYNONE);
        var icon_1 = sf.base.select('div.' + ICON, li);
        this.expandArgs = this.getExpandEvent(li, expandArgs.event);
        var liEle_2 = li;
        var activeElement_2 = sf.base.select('.' + LISTITEM + '.' + ACTIVE, li);
        var start_2 = 0;
        var end_2 = 0;
        // eslint-disable-next-line
        var proxy_4 = this;
        this.setHeight(liEle_2, ulele);
        if (this.options.animation.expand.duration === 0) {
          sf.base.removeClass([icon_1], EXPANDABLE);
          sf.base.addClass([icon_1], COLLAPSIBLE);
          proxy_4.updateSpinnerClass();
          proxy_4.dotNetRef.invokeMethodAsync('TriggerNodeExpandedEvent', proxy_4.expandArgs);
          ulele.style.display = BLOCK;
          liEle_2.style.display = BLOCK;
          liEle_2.style.overflow = EMPTY;
          liEle_2.style.height = EMPTY;
          sf.base.removeClass([icon_1], "e-icons-spinner");
          if (this.options.allowTextWrap) {
            if (!this.isNodeRendered || this.isEdited) {
              this.isEdited = false;
              this.updateWrap(ulele);
            } else if (this.isNodeRendered) {
              this.updateWrap();
            }
          }
        } else {
          this.animationObj.animate(ulele, {
            name: this.options.animation.expand.effect === 'None' && sf.base.animationMode === 'Enable' ? 'SlideDown' : this.options.animation.expand.effect,
            duration: this.options.animation.expand.duration,
            timingFunction: this.options.animation.expand.easing,
            begin: function begin(args) {
              proxy_4.isAnimationCompleted = false;
              liEle_2.style.overflow = HIDDEN;
              if (!sf.base.isNullOrUndefined(activeElement_2) && activeElement_2 instanceof HTMLElement) {
                activeElement_2.classList.add(ITEM_ANIMATION_ACTIVE);
              }
              start_2 = liEle_2.offsetHeight;
              end_2 = sf.base.select('.' + TEXTWRAP, li).offsetHeight;
            },
            progress: function progress(args) {
              sf.base.removeClass([icon_1], EXPANDABLE);
              sf.base.addClass([icon_1], COLLAPSIBLE);
              args.element.style.display = BLOCK;
              proxy_4.animateHeight(args, start_2, end_2);
            },
            end: function end(args) {
              args.element.style.display = BLOCK;
              if (!sf.base.isNullOrUndefined(activeElement_2) && activeElement_2 instanceof HTMLElement) {
                activeElement_2.classList.remove(ITEM_ANIMATION_ACTIVE);
              }
              proxy_4.updateSpinnerClass();
              proxy_4.dotNetRef.invokeMethodAsync('TriggerNodeExpandedEvent', proxy_4.expandArgs);
              ulele.style.display = BLOCK;
              liEle_2.style.display = BLOCK;
              liEle_2.style.overflow = EMPTY;
              liEle_2.style.height = EMPTY;
              sf.base.removeClass([icon_1], "e-icons-spinner");
              if (_this_1.options.allowTextWrap) {
                if (!_this_1.isNodeRendered || _this_1.isEdited) {
                  _this_1.isEdited = false;
                  _this_1.updateWrap(ulele);
                } else if (_this_1.isNodeRendered) {
                  _this_1.updateWrap();
                }
              }
              proxy_4.isAnimationCompleted = true;
            }
          });
        }
      }
      if (!ulele) {
        var proxy = this;
        this.expandArgs = this.getExpandEvent(li, expandArgs.event);
        proxy.updateSpinnerClass();
        proxy.dotNetRef.invokeMethodAsync('TriggerNodeExpandedEvent', proxy.expandArgs);
      }
      this.setHover(this.getFocusedNode());
    };
    SfTreeView.prototype.setHeight = function (currli, ul) {
      ul.style.display = BLOCK;
      ul.style.visibility = HIDDEN;
      currli.style.height = currli.offsetHeight + 'px';
      ul.style.display = NONE;
      ul.style.visibility = EMPTY;
    };
    SfTreeView.prototype.collapsedNode = function (collapseArgs) {
      var li = this.element.querySelector('[data-uid="' + collapseArgs.nodeData.id + '"]');
      this.focussedElement = li;
      var ulelement = li.querySelector('ul');
      if (ulelement) {
        ulelement.style.display = NONE;
        ulelement.classList.add(DISPLAYNONE);
      }
      li.style.overflow = EMPTY;
      li.style.height = EMPTY;
      this.expandArgs = this.getExpandEvent(li, null);
      var icon = sf.base.select('div.' + ICON, li);
      sf.base.removeClass([icon], COLLAPSIBLE);
      sf.base.addClass([icon], EXPANDABLE);
      this.dotNetRef.invokeMethodAsync('TriggerNodeCollapsedEvent', this.expandArgs);
    };
    SfTreeView.prototype.preventContextMenu = function (e) {
      e.preventDefault();
    };
    SfTreeView.prototype.contextLongPress = function (event) {
      var target = event.target;
      var eventArgs = {
        event: event,
        node: null
      };
      var li = sf.base.closest(target, '.' + LISTITEM);
      this.dotNetRef.invokeMethodAsync('TriggerNodeClickingEvent', eventArgs, li.getAttribute('data-uid'), this.getXYValue(eventArgs.event, 'X'), this.getXYValue(eventArgs.event, 'Y'));
    };
    SfTreeView.prototype.clickHandler = function (event) {
      this.tapEvent = event;
      var target = event.target;
      var isCollapsAction = false;
      sf.base.EventHandler.remove(this.element, 'contextmenu', this.preventContextMenu);
      if (!target) {
        return;
      } else {
        if (target.nodeName == 'INPUT' || target.nodeName == 'TEXTAREA') {
          var inputElement = target;
          this.updateOldText(inputElement.value);
        }
        var classList = target.classList;
        var li = sf.base.closest(target, '.' + LISTITEM);
        if (!li) {
          return;
        } else if (event.which !== 3) {
          var rippleElement = sf.base.select('.' + RIPPLEELMENT, li);
          var rippleIcons = sf.base.select('.' + ICON, li);
          this.removeHover();
          this.focussedElement = li;
          this.setFocusElement(li);
          if (this.options.showCheckBox && !li.classList.contains(DISABLE)) {
            var checkContainer = sf.base.closest(target, '.' + CHECKBOXWRAP);
            if (!sf.base.isNullOrUndefined(checkContainer)) {
              var checkElement = sf.base.select('.' + CHECKBOXFRAME, checkContainer);
              this.validateCheckNode(checkContainer, checkElement.classList.contains(CHECK), li, event);
              this.triggerClickEvent(event, li);
              return;
            }
          }
          if (classList.contains(EXPANDABLE)) {
            this.expandAction(li, event);
          } else if (classList.contains(COLLAPSIBLE)) {
            this.expandArgs = this.getExpandEvent(li, event);
            this.dotNetRef.invokeMethodAsync('NodeCollapsingEventCallback', this.expandArgs, true);
            isCollapsAction = true;
          } else if (rippleElement && rippleIcons) {
            if (rippleIcons.classList.contains(RIPPLE) && rippleIcons.classList.contains(EXPANDABLE)) {
              this.expandAction(li, event);
            } else if (rippleIcons.classList.contains(RIPPLE) && rippleIcons.classList.contains(COLLAPSIBLE)) {
              this.collapseAction(li, event, true);
              isCollapsAction = true;
            } else if (!classList.contains(PARENTITEM) && !classList.contains(LISTITEM)) {
              this.toggleSelect(li, event, false);
            }
          } else {
            if (!classList.contains(PARENTITEM) && !classList.contains(LISTITEM)) {
              this.toggleSelect(li, event, false);
            }
          }
        }
        if (!isCollapsAction) {
          this.triggerClickEvent(event, li);
        }
      }
    };
    SfTreeView.prototype.getXYValue = function (e, direction) {
      var touchList = e.changedTouches;
      var value;
      if (direction === 'X') {
        value = touchList ? touchList[0].clientX : e.clientX;
      } else {
        value = touchList ? touchList[0].clientY : e.clientY;
      }
      if (!value && e.type === 'focus' && e.target) {
        var rect = e.target.getBoundingClientRect();
        value = rect ? direction === 'X' ? rect.left : rect.top : null;
      }
      return Math.ceil(value);
    };
    SfTreeView.prototype.triggerClickEvent = function (e, li) {
      var eventArgs = {
        event: e,
        node: null
      };
      this.dotNetRef.invokeMethodAsync('TriggerNodeClickingEvent', eventArgs, li.getAttribute('data-uid'), this.getXYValue(e, 'X'), this.getXYValue(e, 'Y'));
    };
    SfTreeView.prototype.getCheckEvent = function (currLi, action, e) {
      return {
        action: action,
        isInteracted: !sf.base.isNullOrUndefined(e),
        nodeData: this.getNodeData(currLi)
      };
    };
    SfTreeView.prototype.validateCheckNode = function (checkWrap, isCheck, li, e) {
      var currLi = sf.base.closest(checkWrap, '.' + LISTITEM);
      var ariaState = !isCheck ? 'true' : 'false';
      if (!sf.base.isNullOrUndefined(ariaState)) {
        checkWrap.setAttribute('aria-checked', ariaState);
      }
      var eventArgs = this.getCheckEvent(currLi, isCheck ? 'uncheck' : 'check', e);
      this.dotNetRef.invokeMethodAsync('TriggerNodeCheckingEvent', eventArgs);
    };
    SfTreeView.prototype.toggleSelect = function (li, e, multiSelect) {
      if (!li.classList.contains(DISABLE)) {
        if (this.options.allowMultiSelection && (e && e.ctrlKey || multiSelect) && li.classList.contains(ACTIVE)) {
          this.unselectNode(li, e, multiSelect);
        } else {
          this.selectNode(li, e, multiSelect);
          if (this.options.allowMultiSelection && e && (e.ctrlKey || e.shiftKey)) {
            this.setFocusElement(li);
            this.focussedElement = li;
          }
        }
      }
    };
    SfTreeView.prototype.unselectNode = function (li, e, multiSelect) {
      var eventArgs = this.getSelectEvent(li, 'un-select', e, multiSelect, []);
      this.dotNetRef.invokeMethodAsync('TriggerNodeSelectingEvent', eventArgs);
    };
    SfTreeView.prototype.getSelectEvent = function (currLi, action, e, multiSelect, nodes) {
      // eslint-disable-next-line
      var detail = this.getNodeData(currLi);
      return {
        action: action,
        isInteracted: !sf.base.isNullOrUndefined(e),
        nodeData: detail,
        isMultiSelect: multiSelect,
        isCtrKey: !sf.base.isNullOrUndefined(e) && e.ctrlKey ? true : false,
        isShiftKey: !sf.base.isNullOrUndefined(e) && e.shiftKey ? true : false,
        nodes: nodes
      };
    };
    SfTreeView.prototype.selectNode = function (li, e, multiSelect) {
      var _a;
      if (sf.base.isNullOrUndefined(li) || !this.options.allowMultiSelection && li.classList.contains(ACTIVE) && !sf.base.isNullOrUndefined(e)) {
        this.setFocusElement(li);
        this.focussedElement = li;
        return;
      }
      var array = [];
      if (this.options.allowMultiSelection && e && e.shiftKey) {
        var activeElements = sf.base.selectAll('.' + LISTITEM + '.' + ACTIVE, this.element);
        var activeLen = activeElements ? activeElements.length : 0;
        this.startNode = activeLen > 0 ? activeElements[activeLen - 1] : li;
        var liList = Array.prototype.slice.call(sf.base.selectAll('.' + LISTITEM, this.element));
        var startIndex = liList.indexOf(this.startNode);
        var endIndex = liList.indexOf(li);
        if (startIndex > endIndex) {
          _a = [endIndex, startIndex], startIndex = _a[0], endIndex = _a[1];
        }
        for (var i = startIndex; i <= endIndex; i++) {
          var currNode = liList[i];
          if (sf.base.isVisible(currNode) && !currNode.classList.contains(DISABLE)) {
            array.push(currNode.getAttribute('data-uid'));
          }
        }
      } else {
        this.startNode = li;
      }
      var eventArgs = this.getSelectEvent(li, 'select', e, multiSelect, array);
      this.dotNetRef.invokeMethodAsync('TriggerNodeSelectingEvent', eventArgs);
    };
    SfTreeView.prototype.setFocusElement = function (li) {
      if (!sf.base.isNullOrUndefined(li)) {
        var focusedNode = this.getFocusedNode();
        if (focusedNode) {
          sf.base.removeClass([focusedNode], FOCUS);
          if (!sf.base.Browser.isDevice) {
            focusedNode.setAttribute("tabindex", "-1");
          }
        }
        sf.base.addClass([li], FOCUS);
        if (!sf.base.Browser.isDevice) {
          li.setAttribute("tabindex", "0");
        }
        this.focussedElement = li;
        this.updateIdAttr(focusedNode, li);
      }
    };
    SfTreeView.prototype.updateIdAttr = function (preNode, nextNode) {
      this.element.removeAttribute('aria-activedescendant');
      var idArray = this.element.querySelectorAll('[id=_active]');
      if (idArray[0] != preNode) {
        idArray.forEach(function (element) {
          element.removeAttribute('id');
        });
      }
      if (preNode) {
        preNode.removeAttribute('id');
      }
      nextNode.setAttribute('id', this.element.id + '_active');
      this.element.setAttribute('aria-activedescendant', this.element.id + '_active');
    };
    SfTreeView.prototype.getFocusedNode = function () {
      var selectedItem;
      var fNode;
      fNode = sf.base.select('.' + LISTITEM + '[tabindex="0"]', this.element);
      if (!this.isKeyUp && sf.base.isNullOrUndefined(fNode)) {
        fNode = sf.base.select('.' + LISTITEM + '.' + ACTIVE, this.element);
      }
      if (sf.base.isNullOrUndefined(fNode)) {
        fNode = this.focussedElement ? this.focussedElement : sf.base.select('.' + LISTITEM + '.' + FOCUS, this.element);
      }
      if (sf.base.isNullOrUndefined(fNode)) {
        selectedItem = sf.base.select('.' + LISTITEM, this.element);
      }
      return sf.base.isNullOrUndefined(fNode) ? sf.base.isNullOrUndefined(selectedItem) ? this.element.firstElementChild : selectedItem : fNode;
    };
    SfTreeView.prototype.setFullRow = function (isEnabled) {
      (isEnabled ? sf.base.addClass : sf.base.removeClass)([this.element], FULLROWWRAP);
      this.options.fullRowSelect = isEnabled;
    };
    SfTreeView.prototype.onMouseOver = function (e) {
      var target = e.target;
      var classList = target.classList;
      var currentLi = sf.base.closest(target, '.' + LISTITEM);
      if (!currentLi || classList.contains(PARENTITEM) || classList.contains(LISTITEM)) {
        this.removeHover();
        return;
      } else {
        if (currentLi && !currentLi.classList.contains(DISABLE)) {
          this.setHover(currentLi);
        }
      }
    };
    SfTreeView.prototype.setHover = function (li) {
      if (!li.classList.contains(HOVER)) {
        this.removeHover();
        sf.base.addClass([li], HOVER);
      }
    };
    SfTreeView.prototype.removeHover = function () {
      var hoveredNode = sf.base.selectAll('.' + HOVER, this.element);
      if (hoveredNode && hoveredNode.length) {
        sf.base.removeClass(hoveredNode, HOVER);
      }
    };
    SfTreeView.prototype.checkNode = function (e) {
      var focusedNode = this.getFocusedNode();
      var checkWrap = sf.base.select('.' + CHECKBOXWRAP, focusedNode);
      var isChecked = sf.base.select(' .' + CHECKBOXFRAME, checkWrap).classList.contains(CHECK);
      if (!focusedNode.classList.contains(DISABLE) && focusedNode.getElementsByClassName('e-checkbox-disabled').length === 0) {
        this.validateCheckNode(checkWrap, isChecked, focusedNode, e);
      }
    };
    SfTreeView.prototype.openNode = function (toBeOpened, e) {
      var focusedNode = this.getFocusedNode();
      var icon = sf.base.select('div.' + ICON, focusedNode);
      if (toBeOpened) {
        if (!icon) {
          return;
        } else if (icon.classList.contains(EXPANDABLE)) {
          this.expandAction(focusedNode, e);
        } else {
          this.focusNextNode(focusedNode, true);
        }
      } else {
        if (icon && icon.classList.contains(COLLAPSIBLE)) {
          this.tapEvent = e;
          this.expandArgs = this.getExpandEvent(focusedNode, e);
          this.dotNetRef.invokeMethodAsync('NodeCollapsingEventCallback', this.expandArgs, false);
        } else {
          var parentLi = sf.base.closest(sf.base.closest(focusedNode, '.' + PARENTITEM), '.' + LISTITEM);
          if (!parentLi) {
            return;
          } else {
            if (!parentLi.classList.contains(DISABLE)) {
              this.setNodeFocus(focusedNode, parentLi);
              this.navigateToFocus(true);
              parentLi.focus();
            }
          }
        }
      }
    };
    SfTreeView.prototype.getScrollParent = function (node) {
      if (sf.base.isNullOrUndefined(node)) {
        return null;
      }
      return node.scrollHeight > node.clientHeight ? node : this.getScrollParent(node.parentElement);
    };
    SfTreeView.prototype.navigateToFocus = function (isUp) {
      var focusNode = this.getFocusedNode().querySelector('.' + TEXTWRAP);
      var pos = focusNode.getBoundingClientRect();
      var parent = this.getScrollParent(this.element);
      if (!sf.base.isNullOrUndefined(parent)) {
        var parentPos = parent.getBoundingClientRect();
        if (pos.bottom > parentPos.bottom) {
          parent.scrollTop += pos.bottom - parentPos.bottom;
        } else if (pos.top < parentPos.top) {
          parent.scrollTop -= parentPos.top - pos.top;
        }
      }
      var isVisible$$1 = this.isVisibleInViewport(focusNode);
      if (!isVisible$$1) {
        focusNode.scrollIntoView(isUp);
      }
    };
    SfTreeView.prototype.isVisibleInViewport = function (txtWrap) {
      var pos = txtWrap.getBoundingClientRect();
      return pos.top >= 0 && pos.left >= 0 && pos.bottom <= (window.innerHeight || document.documentElement.clientHeight) && pos.right <= (window.innerWidth || document.documentElement.clientWidth);
    };
    SfTreeView.prototype.setNodeFocus = function (preNode, nextNode) {
      sf.base.removeClass([preNode], FOCUS);
      if (!sf.base.Browser.isDevice) {
        preNode.setAttribute("tabindex", "-1");
      }
      if (!nextNode.classList.contains(DISABLE)) {
        this.focussedElement = nextNode;
        sf.base.addClass([nextNode], FOCUS);
        if (!sf.base.Browser.isDevice) {
          nextNode.setAttribute("tabindex", "0");
        }
        this.updateIdAttr(preNode, nextNode);
      }
    };
    SfTreeView.prototype.focusNextNode = function (li, isTowards) {
      var nextNode = isTowards ? this.getNextNode(li) : this.getPrevNode(li);
      this.setNodeFocus(li, nextNode);
      this.navigateToFocus(!isTowards);
      if (nextNode.classList.contains(DISABLE)) {
        var lastChild = nextNode.lastChild;
        if (nextNode.previousSibling == null && nextNode.classList.contains('e-level-1')) {
          this.focusNextNode(nextNode, true);
        } else if (nextNode.nextSibling == null && nextNode.classList.contains('e-node-collapsed')) {
          this.focusNextNode(nextNode, false);
        } else if (nextNode.nextSibling == null && lastChild.classList.contains(TEXTWRAP)) {
          this.focusNextNode(nextNode, false);
        } else {
          this.focusNextNode(nextNode, isTowards);
        }
      }
      nextNode.focus();
    };
    SfTreeView.prototype.shiftKeySelect = function (isTowards, e) {
      if (this.options.allowMultiSelection) {
        var focusedNode = this.getFocusedNode();
        var nextNode = isTowards ? this.getNextNode(focusedNode) : this.getPrevNode(focusedNode);
        this.removeHover();
        this.setFocusElement(nextNode);
        this.focussedElement = nextNode;
        this.toggleSelect(nextNode, e, false);
        this.navigateToFocus(!isTowards);
      } else {
        this.navigateNode(isTowards);
      }
    };
    SfTreeView.prototype.getNextNode = function (li) {
      var index = this.liList.indexOf(li);
      var nextNode;
      do {
        index++;
        nextNode = this.liList[index];
        if (sf.base.isNullOrUndefined(nextNode)) {
          return li;
        }
      } while (!sf.base.isVisible(nextNode));
      return nextNode;
    };
    SfTreeView.prototype.getPrevNode = function (li) {
      var index = this.liList.indexOf(li);
      var prevNode;
      do {
        index--;
        prevNode = this.liList[index];
        if (sf.base.isNullOrUndefined(prevNode)) {
          return li;
        }
      } while (!sf.base.isVisible(prevNode));
      return prevNode;
    };
    SfTreeView.prototype.getRootNode = function () {
      var index = 0;
      var rootNode;
      do {
        rootNode = this.liList[index];
        index++;
      } while (!sf.base.isVisible(rootNode));
      return rootNode;
    };
    SfTreeView.prototype.getEndNode = function () {
      var index = this.liList.length - 1;
      var endNode;
      do {
        endNode = this.liList[index];
        index--;
      } while (!sf.base.isVisible(endNode));
      return endNode;
    };
    SfTreeView.prototype.navigateNode = function (isTowards) {
      this.focusNextNode(this.getFocusedNode(), isTowards);
    };
    SfTreeView.prototype.updateOldText = function (oldText) {
      this.oldText = oldText;
    };
    SfTreeView.prototype.onPropertyChanged = function (newProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case SHOWCHECKBOX:
            this.options.showCheckBox = newProp.showCheckBox;
            break;
          case ALLOWDRAGANDDROP:
            this.setDragAndDrop(newProp.allowDragAndDrop);
            break;
          case ALLOWTEXTWRAP:
            this.options.allowTextWrap = newProp.allowTextWrap;
            this.setTextWrap();
            break;
          case ALLOWEDITING:
            this.wireEditingEvents(newProp.allowEditing);
            break;
          case SETDISABLED:
            if (this.options.disabled !== newProp.disabled) {
              this.options.disabled = newProp.disabled;
              this.setDisabledMode(newProp.disabled);
            }
            break;
          case DRAGAREA:
            this.setDragArea(newProp.dropArea);
            break;
          case CSSCLASS:
            this.setCssClass(newProp.cssClass);
            break;
          case FULLROWSELECT:
            this.setFullRow(newProp.fullRowSelect);
            break;
          case EXPANDONTYPE:
            this.options.expandOnType = newProp.expandOnType;
            this.wireExpandOnEvent(false);
            this.setExpandOnType();
            if (this.options.expandOnType !== 'None' && !this.options.disabled) {
              this.wireExpandOnEvent(true);
            }
            break;
          case ENABLERTL:
            this.options.enableRtl = newProp.enableRtl;
            (this.options.enableRtl ? sf.base.addClass : sf.base.removeClass)([this.element], RTL);
            break;
          case ANIMATION:
            this.options.animation = newProp.animation;
        }
      }
    };
    SfTreeView.prototype.navigateRootNode = function (isBackwards) {
      var focusedNode = this.getFocusedNode();
      var rootNode = isBackwards ? this.getRootNode() : this.getEndNode();
      if (!rootNode.classList.contains(DISABLE)) {
        this.setNodeFocus(focusedNode, rootNode);
        this.navigateToFocus(isBackwards);
      }
    };
    SfTreeView.prototype.selectGivenNodes = function (sNodes) {
      for (var _i = 0, sNodes_1 = sNodes; _i < sNodes_1.length; _i++) {
        var node = sNodes_1[_i];
        if (!node.classList.contains(DISABLE)) {
          this.selectNode(node, null, true);
        }
      }
    };
    SfTreeView.prototype.beginEdit = function (node) {
      var nodeElement = this.element.querySelector('[data-uid="' + node + '"]');
      if (sf.base.isNullOrUndefined(nodeElement) || this.options.disabled) {
        return;
      }
      this.createTextbox(nodeElement, null);
    };
    SfTreeView.prototype.ensureVisible = function (node) {
      var liEle = this.element.querySelector('[data-uid="' + node + '"]');
      if (sf.base.isNullOrUndefined(liEle)) {
        return;
      }
      setTimeout(function () {
        liEle.scrollIntoView(true);
      }, 450);
    };
    SfTreeView.prototype.nodeCollapse = function (id) {
      var liElement = this.element.querySelector('[data-uid="' + id + '"]');
      this.collapseAction(liElement, null, false);
    };
    SfTreeView.prototype.nodeExpand = function (id) {
      var liElement = this.element.querySelector('[data-uid="' + id + '"]');
      this.expandAction(liElement, null);
    };
    SfTreeView.prototype.nodeSelection = function (idArray) {
      var selectedNodes = [];
      for (var _i = 0, idArray_1 = idArray; _i < idArray_1.length; _i++) {
        var id = idArray_1[_i];
        selectedNodes.push(this.element.querySelector('[data-uid="' + id + '"]'));
      }
      var activeElements = sf.base.selectAll('.' + LISTITEM + '.' + ACTIVE, this.element);
      sf.base.removeClass(activeElements, ACTIVE);
      sf.base.addClass(selectedNodes, ACTIVE);
    };
    SfTreeView.prototype.KeyActionHandler = function (e, nodeId) {
      this.liList = Array.prototype.slice.call(sf.base.selectAll('.' + LISTITEM, this.element));
      var nodeElement = this.element.querySelector('[data-uid="' + nodeId + '"]');
      var focusedNode = sf.base.isNullOrUndefined(nodeElement) ? this.getFocusedNode() : nodeElement;
      switch (e.action) {
        case 'space':
          if (this.options.showCheckBox) {
            this.checkNode(this.keyAction);
          } else {
            this.toggleSelect(focusedNode, this.keyAction, false);
          }
          break;
        case 'moveRight':
          this.keyBoardAction = true;
          this.openNode(!this.options.enableRtl, this.keyAction);
          break;
        case 'moveLeft':
          this.keyBoardAction = true;
          this.openNode(this.options.enableRtl, this.keyAction);
          break;
        case 'shiftDown':
          this.shiftKeySelect(true, this.keyAction);
          break;
        case 'moveDown':
        case 'ctrlDown':
        case 'csDown':
          this.navigateNode(true);
          break;
        case 'shiftUp':
          this.shiftKeySelect(false, this.keyAction);
          break;
        case 'moveUp':
        case 'ctrlUp':
        case 'csUp':
          this.navigateNode(false);
          break;
        case 'home':
        case 'shiftHome':
        case 'ctrlHome':
        case 'csHome':
          this.navigateRootNode(true);
          break;
        case 'end':
        case 'shiftEnd':
        case 'ctrlEnd':
        case 'csEnd':
          this.navigateRootNode(false);
          break;
        case 'enter':
        case 'ctrlEnter':
        case 'shiftEnter':
        case 'csEnter':
        case 'shiftSpace':
        case 'ctrlSpace':
          this.toggleSelect(focusedNode, this.keyAction, false);
          break;
        case 'f2':
          if (this.options.allowEditing && !focusedNode.classList.contains(DISABLE)) {
            this.createTextbox(focusedNode, this.keyAction);
          }
          break;
        case 'ctrlA':
          if (this.options.allowMultiSelection) {
            var sNodes = sf.base.selectAll('.' + LISTITEM + ':not(.' + ACTIVE + ')', this.element);
            this.selectGivenNodes(sNodes);
          }
          break;
      }
      this.isKeyUp = false;
      // eslint-disable-next-line
      var _this = this;
      // eslint-disable-next-line
      setTimeout(function () {
        if (_this.keyBoardAction) {
          _this.setHover(_this.getFocusedNode());
          _this.keyBoardAction = false;
        }
      }, 100);
    };
    return SfTreeView;
  }();
  // eslint-disable-next-line
  var TreeView = {
    initialize: function initialize(dataId, element, options, dotnetRef) {
      new SfTreeView(dataId, element, options, dotnetRef);
      var instance = window.sfBlazor.getCompInstance(dataId);
      instance.render();
      if (element && !sf.base.isNullOrUndefined(instance) && instance.options.allowTextWrap) {
        instance.updateWrap();
      }
      if (document.getElementById(element.id)) {
        instance.dotNetRef.invokeMethodAsync('CreatedEvent', null);
      }
    },
    updateTextWrap: function updateTextWrap(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance) && instance.options.allowTextWrap) {
        instance.updateWrap();
      }
    },
    dataSourceChanged: function dataSourceChanged(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.unWireEvents();
        instance.wireEvents();
      }
    },
    collapseAction: function collapseAction(dataId, nodeId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        // eslint-disable-next-line
        var currentLi = instance.element.querySelector('[data-uid="' + nodeId + '"]');
        instance.collapseAction(currentLi, null, false);
      }
    },
    NodeCollapseAction: function NodeCollapseAction(dataId, nodeId, cancel, fromClickHandler) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        // eslint-disable-next-line
        var currentLi = instance.element.querySelector('[data-uid="' + nodeId + '"]');
        instance.collapseAction(currentLi, null, fromClickHandler, cancel);
      }
    },
    expandAction: function expandAction(dataId, nodeId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        // eslint-disable-next-line
        var currentLi = instance.element.querySelector('[data-uid="' + nodeId + '"]');
        instance.expandAction(currentLi, null);
      }
    },
    expandedNode: function expandedNode(dataId, args) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        setTimeout(function () {
          instance.expandedNode(args);
        }, 10);
      }
    },
    collapsedNode: function collapsedNode(dataId, args) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.collapsedNode(args);
      }
    },
    KeyActionHandler: function KeyActionHandler(dataId, args, nodeId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        setTimeout(function () {
          instance.KeyActionHandler(args, nodeId);
        }, instance.isAnimationCompleted ? 0 : instance.animationObj.duration);
      }
    },
    setMultiSelect: function setMultiSelect(dataId, args) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.setMultiSelect(args);
      }
    },
    dragStartActionContinue: function dragStartActionContinue(dataId, cancel) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.dragStartActionContinue(cancel);
      }
    },
    dragNodeStop: function dragNodeStop(dataId, args) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.dragNodeStop(args);
      }
    },
    nodeDragging: function nodeDragging(dataId, args) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.nodeDragging(args);
      }
    },
    setFocus: function setFocus(element, liElement) {
      if (!sf.base.isNullOrUndefined(element) && !sf.base.isNullOrUndefined(liElement)) {
        var inputEle = document.getElementById(element.id);
        inputEle.focus();
        inputEle.setSelectionRange(0, inputEle.value.length);
      }
    },
    nodeEdited: function nodeEdited(liElement) {
      if (!sf.base.isNullOrUndefined(liElement)) {
        sf.base.removeClass([liElement], EDITING);
      }
    },
    updateOldText: function updateOldText(dataId, text) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateOldText(text);
      }
    },
    updateSpinnerClass: function updateSpinnerClass(dataId) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.updateSpinnerClass();
      }
    },
    onPropertyChanged: function onPropertyChanged(dataId, properties) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.onPropertyChanged(properties);
      }
    },
    beginEdit: function beginEdit(dataId, node) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.beginEdit(node);
      }
    },
    ensureVisible: function ensureVisible(dataId, node) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.ensureVisible(node);
      }
    },
    nodeCollapse: function nodeCollapse(dataId, id) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.nodeCollapse(id);
      }
    },
    nodeExpand: function nodeCollapse(dataId, id) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.nodeExpand(id);
      }
    },
    nodeSelection: function nodeSelection(dataId, idArray) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      if (!sf.base.isNullOrUndefined(instance)) {
        instance.nodeSelection(idArray);
      }
    },
    getAriaLevel: function getAriaLevel(dataId, args) {
      var instance = window.sfBlazor.getCompInstance(dataId);
      var level = 0;
      if (!sf.base.isNullOrUndefined(instance)) {
        var li = instance.element.querySelector('[data-uid="' + args.nodeData.id + '"]');
        level = parseInt(li.getAttribute('aria-level'), 10);
      }
      return level;
    }
  };
  return TreeView;
}();

/***/ }),

/***/ "./modules/splitbuttonsbase.js":
/*!*************************************!*\
  !*** ./modules/splitbuttonsbase.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
window.sf = window.sf || {};
var splitbuttonsbase = function splitbuttonsbase(exports) {
  'use strict';

  var __extends = undefined && undefined.__extends || function () {
    var _extendStatics = function extendStatics(d, b) {
      _extendStatics = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
      };
      return _extendStatics(d, b);
    };
    return function (d, b) {
      _extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {
    var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
    if ((typeof Reflect === "undefined" ? "undefined" : _typeof(Reflect)) === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  /**
   * @param {Object} props - Specifies the properties
   * @param {string[]} model - Specifies the model
   * @returns {Object} Component Model
   */
  function getModel(props, model) {
    var obj = sf.base.extend({}, props);
    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {
      var prop = _a[_i];
      if (model.indexOf(prop) < 0) {
        sf.base.deleteObject(obj, prop);
      }
    }
    return obj;
  }
  /** @hidden
   * @param {HTMLElement} ul - Specifies the UL element
   * @param {number} keyCode - Specifies the keycode
   * @returns {void}
   */
  function upDownKeyHandler(ul, keyCode) {
    var defaultIdx = keyCode === 40 ? 0 : ul.childElementCount - 1;
    var liIdx = defaultIdx;
    var li;
    var selectedLi = ul.querySelector('.e-selected');
    if (selectedLi) {
      selectedLi.classList.remove('e-selected');
    }
    for (var i = 0, len = ul.children.length; i < len; i++) {
      if (ul.children[i].classList.contains('e-focused')) {
        li = ul.children[i];
        liIdx = i;
        li.classList.remove('e-focused');
        if (keyCode === 40) {
          liIdx++;
        } else {
          liIdx--;
        }
        if (liIdx === (keyCode === 40 ? ul.childElementCount : -1)) {
          liIdx = defaultIdx;
        }
      }
    }
    li = ul.children[liIdx];
    liIdx = isValidLI(ul, li, liIdx, keyCode);
    if (liIdx !== -1) {
      sf.base.addClass([ul.children[liIdx]], 'e-focused');
      ul.children[liIdx].focus();
    }
  }
  /**
   * Get Valid LI element
   *
   * @param {HTMLElement} ul - Specifies the UL element
   * @param {Element} li - Specifies the LI element
   * @param {number} index - Specifies the index
   * @param {number} keyCode - Specifies the keycode
   * @param {number} count - Specifies the count
   * @returns {number} - Index
   */
  function isValidLI(ul, li, index, keyCode, count) {
    if (count === void 0) {
      count = 0;
    }
    if (li.classList.contains('e-separator') || li.classList.contains('e-disabled')) {
      if (index === (keyCode === 40 ? ul.childElementCount - 1 : 0)) {
        index = keyCode === 40 ? 0 : ul.childElementCount - 1;
      } else {
        if (keyCode === 40) {
          index++;
        } else {
          index--;
        }
      }
    }
    li = ul.children[index];
    if (li.classList.contains('e-separator') || li.classList.contains('e-disabled')) {
      count++;
      if (count === ul.childElementCount) {
        return index = -1;
      }
      index = isValidLI(ul, li, index, keyCode, count);
    }
    return index;
  }
  /** @hidden
   * @param {HTMLElement} popup - Specifies the popup element.
   * @returns {void}
   */
  function setBlankIconStyle(popup, blankIcon) {
    var blankIconList = [].slice.call(popup.getElementsByClassName('e-blank-icon'));
    if (blankIcon) {
      var menuItem = [].slice.call(popup.getElementsByClassName('e-item'));
      menuItem.forEach(function (li) {
        if (li.style.paddingLeft || li.style.paddingRight) {
          li.removeAttribute('style');
        }
      });
    }
    if (!blankIconList.length) {
      return;
    }
    var iconLi = popup.querySelector('.e-item:not(.e-blank-icon):not(.e-separator)');
    if (sf.base.isNullOrUndefined(iconLi)) {
      return;
    }
    if (iconLi.classList.contains('e-url')) {
      iconLi = iconLi.querySelector('.e-menu-url');
    }
    var icon = iconLi.querySelector('.e-menu-icon');
    var cssProp;
    var enableRtl = popup.classList.contains('e-rtl');
    if (enableRtl) {
      cssProp = {
        padding: 'paddingRight',
        margin: 'marginLeft'
      };
    } else {
      cssProp = {
        padding: 'paddingLeft',
        margin: 'marginRight'
      };
    }
    /* eslint-disable */
    var size = parseInt(getComputedStyle(icon).fontSize, 10) + parseInt(enableRtl ? getComputedStyle(icon)[cssProp.margin] : getComputedStyle(icon)[cssProp.margin], 10) + parseInt(getComputedStyle(iconLi).paddingLeft, 10) + "px";
    blankIconList.forEach(function (li) {
      if (li.classList.contains('e-url')) {
        li.querySelector('.e-menu-url').style[cssProp.padding] = size;
      } else {
        li.style[cssProp.padding] = size;
      }
    });
    /* eslint-enable */
  }
  /**
   * Defines the items of Split Button/DropDownButton.
   */
  var Item = /** @class */function (_super) {
    __extends(Item, _super);
    function Item() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate([sf.base.Property('')], Item.prototype, "iconCss", void 0);
    __decorate([sf.base.Property('')], Item.prototype, "id", void 0);
    __decorate([sf.base.Property(false)], Item.prototype, "separator", void 0);
    __decorate([sf.base.Property('')], Item.prototype, "text", void 0);
    __decorate([sf.base.Property('')], Item.prototype, "url", void 0);
    __decorate([sf.base.Property(false)], Item.prototype, "disabled", void 0);
    return Item;
  }(sf.base.ChildProperty);
  exports.getModel = getModel;
  exports.upDownKeyHandler = upDownKeyHandler;
  exports.setBlankIconStyle = setBlankIconStyle;
  exports.Item = Item;
  return exports;
};
window.sf.splitbuttons = window.sf.base.extend({}, window.sf.splitbuttons, splitbuttonsbase({}));

/***/ }),

/***/ "./modules/syncfusion-blazor-extended.js":
/*!***********************************************!*\
  !*** ./modules/syncfusion-blazor-extended.js ***!
  \***********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _syncfusion_blazor_extended_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../syncfusion-blazor-extended.js */ "./syncfusion-blazor-extended.js");
/* harmony import */ var _syncfusion_blazor_extended_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_syncfusion_blazor_extended_js__WEBPACK_IMPORTED_MODULE_0__);


/***/ }),

/***/ "./single-sfpdfviewer-bundle.js":
/*!**************************************!*\
  !*** ./single-sfpdfviewer-bundle.js ***!
  \**************************************/
/*! no exports provided */
/*! all exports used */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _modules_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/base.js */ "./modules/base.js");
/* harmony import */ var _modules_base_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_modules_base_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _syncfusion_blazor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./syncfusion-blazor.js */ "./syncfusion-blazor.js");
/* harmony import */ var _syncfusion_blazor_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_syncfusion_blazor_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _modules_syncfusion_blazor_extended_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/syncfusion-blazor-extended.js */ "./modules/syncfusion-blazor-extended.js");
/* harmony import */ var _modules_popupsbase_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/popupsbase.js */ "./modules/popupsbase.js");
/* harmony import */ var _modules_popupsbase_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_modules_popupsbase_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _modules_popup_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modules/popup.js */ "./modules/popup.js");
/* harmony import */ var _modules_popup_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_modules_popup_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _modules_data_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./modules/data.js */ "./modules/data.js");
/* harmony import */ var _modules_data_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_modules_data_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _modules_drawings_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./modules/drawings.js */ "./modules/drawings.js");
/* harmony import */ var _modules_drawings_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_modules_drawings_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _modules_sf_pdfviewer2_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./modules/sf-pdfviewer2.js */ "./modules/sf-pdfviewer2.js");
/* harmony import */ var _modules_sf_pdfviewer2_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_pdfviewer2_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _modules_navigationsbase_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./modules/navigationsbase.js */ "./modules/navigationsbase.js");
/* harmony import */ var _modules_navigationsbase_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_modules_navigationsbase_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _modules_splitbuttonsbase_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./modules/splitbuttonsbase.js */ "./modules/splitbuttonsbase.js");
/* harmony import */ var _modules_splitbuttonsbase_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_modules_splitbuttonsbase_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _modules_sf_toast_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./modules/sf-toast.js */ "./modules/sf-toast.js");
/* harmony import */ var _modules_sf_toast_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_toast_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _modules_sf_listview_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./modules/sf-listview.js */ "./modules/sf-listview.js");
/* harmony import */ var _modules_sf_listview_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_listview_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _modules_sf_drop_down_button_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./modules/sf-drop-down-button.js */ "./modules/sf-drop-down-button.js");
/* harmony import */ var _modules_sf_drop_down_button_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_drop_down_button_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _modules_sf_tooltip_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./modules/sf-tooltip.js */ "./modules/sf-tooltip.js");
/* harmony import */ var _modules_sf_tooltip_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_tooltip_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _modules_sf_dialog_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./modules/sf-dialog.js */ "./modules/sf-dialog.js");
/* harmony import */ var _modules_sf_dialog_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_dialog_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _modules_sf_contextmenu__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./modules/sf-contextmenu */ "./modules/sf-contextmenu.js");
/* harmony import */ var _modules_sf_contextmenu__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_contextmenu__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _modules_sf_menu_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./modules/sf-menu.js */ "./modules/sf-menu.js");
/* harmony import */ var _modules_sf_menu_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_menu_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _modules_sf_toolbar_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./modules/sf-toolbar.js */ "./modules/sf-toolbar.js");
/* harmony import */ var _modules_sf_toolbar_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_toolbar_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _modules_sf_colorpicker_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./modules/sf-colorpicker.js */ "./modules/sf-colorpicker.js");
/* harmony import */ var _modules_sf_colorpicker_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_colorpicker_js__WEBPACK_IMPORTED_MODULE_18__);
/* harmony import */ var _modules_sf_numerictextbox__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./modules/sf-numerictextbox */ "./modules/sf-numerictextbox.js");
/* harmony import */ var _modules_sf_numerictextbox__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_numerictextbox__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var _modules_sf_textbox__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./modules/sf-textbox */ "./modules/sf-textbox.js");
/* harmony import */ var _modules_sf_textbox__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_textbox__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var _modules_sf_slider_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./modules/sf-slider.js */ "./modules/sf-slider.js");
/* harmony import */ var _modules_sf_slider_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_slider_js__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var _modules_sf_dropdownlist__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./modules/sf-dropdownlist */ "./modules/sf-dropdownlist.js");
/* harmony import */ var _modules_sf_dropdownlist__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_dropdownlist__WEBPACK_IMPORTED_MODULE_22__);
/* harmony import */ var _modules_sf_listbox_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./modules/sf-listbox.js */ "./modules/sf-listbox.js");
/* harmony import */ var _modules_sf_listbox_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_listbox_js__WEBPACK_IMPORTED_MODULE_23__);
/* harmony import */ var _modules_sf_treeview_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./modules/sf-treeview.js */ "./modules/sf-treeview.js");
/* harmony import */ var _modules_sf_treeview_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(_modules_sf_treeview_js__WEBPACK_IMPORTED_MODULE_24__);


























/***/ }),

/***/ "./syncfusion-blazor-extended.js":
/*!***************************************!*\
  !*** ./syncfusion-blazor-extended.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : String(i); }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }
function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
var extended = {
  modules: {},
  tempCallBacks: [],
  dataSourceProperties: ["dataSource", "dataSource_custom", "shapeData"],
  enableRtl: function enableRtl(status) {
    sf.base.enableRtl(status);
  },
  loadCldr: function loadCldr(cultureData) {
    sf.base.loadCldr(JSON.parse(cultureData));
  },
  setCulture: function setCulture(cultureName, cultureFormats) {
    sf.base.setCulture(cultureName);
    sf.base.extend(sf.base.blazorCultureFormats, cultureFormats);
  },
  convertOptions: function convertOptions(options, isInitialRendering) {
    var output = {};
    for (var prop in options) {
      var props = prop.trim().split('.'),
        nestedObj = output;
      for (var i = 0; i < props.length - 1; i++) {
        var isArray = props[i].match(/^(\w+)\[(\d+)\]$/); // is array 
        if (isArray) {
          var arr = nestedObj[isArray[1]];
          if (!arr) arr = nestedObj[isArray[1]] = [];
          nestedObj = arr[isArray[2]] = arr[isArray[2]] || {};
        } else {
          nestedObj = nestedObj[props[i]] = nestedObj[props[i]] || {};
        }
      }
      nestedObj[props[i]] = options[prop];
      if (isInitialRendering) delete options[prop];
    }
    return output;
  },
  convertInitialOptions: function convertInitialOptions(options) {
    options = sfBlazor.convertOptions(JSON.parse(options), true);
    return JSON.stringify(options);
  },
  initialize: function initialize(id, options, events, namespace, dotnet, bindableProps, htmlAttributes, templateRefs, interopAdaptor) {
    try {
      if (namespace == null) {
        return;
      }
      if (namespace == 'sf.popups.Spinner') {
        return;
      }
      sf.base.enableBlazorMode();
      if (!window.BlazorAdaptor && sf.data && _typeof(sf.data) === 'object') {
        sfBlazor.initBlazorAdaptor();
      }
      options = sfBlazor.convertInitialOptions(options);
      var dotnetObj = {
        dotnetInstance: dotnet,
        templateRefs: templateRefs
      };
      options = JSON.parse(options, sfBlazor.parseRevive.bind(dotnetObj));
      options["elementID"] = "_ejs" + id;
      var type = sf.base.getValue(namespace, window);
      sfBlazor.bindEvents(options, events, dotnet, namespace);
      if (type) {
        var comp = new type(options);
      }
      if (comp) {
        comp.isServerRendered = true;
        comp._dotnetInstance = dotnet;
        comp.templateDotnetInstance = templateRefs;
        comp.interopAdaptor = interopAdaptor;
        // var change = comp.saveChanges;
        // comp._saveChanges = change.bind(comp);
        comp.bindableProps = bindableProps = JSON.parse(bindableProps);
        // comp.saveChanges = sfBlazor.updateModel.bind(comp);
        if (htmlAttributes) {
          var element = document.getElementById(id);
          for (var attr in htmlAttributes) {
            element.setAttribute(attr, htmlAttributes[attr]);
          }
        }
        if (namespace == 'sf.pdfviewer.PdfViewer') {
          if (comp.serviceUrl == null) {
            sf.pdfviewer.AjaxHandler.prototype.send = sfBlazor.requestHandler.bind(comp);
          }
        }
        if (namespace == 'sf.documenteditor.DocumentEditorContainer' || namespace == 'sf.documenteditor.DocumentEditor') {
          if (comp.serviceUrl == null || comp.serviceUrl == "" || comp.serviceUrl == undefined) {
            sf.documenteditor.XmlHttpRequestHandler.prototype.send = sfBlazor.docEditRequestHandler.bind(comp);
          }
        }
        comp.appendTo("#" + id);
      }
    } catch (e) {
      sfBlazor.throwError(e, namespace);
    }
  },
  renderComplete: function renderComplete(element, blazorElement) {
    if (element != null) {
      if (window[element] && (window[element.id] instanceof element || window[element.id] instanceof HTMLElement)) {
        delete window[element.id];
      }
      element.classList.remove("e-blazor-hidden");
    }
  },
  isDataSourceProperty: function isDataSourceProperty(key) {
    return sfBlazor.dataSourceProperties.indexOf(key) !== -1;
  },
  setModel: function setModel(id, options, namespace) {
    try {
      var compElement = document.getElementById(id);
      if (!compElement) {
        return;
      }
      var comp = compElement.ej2_instances[0];
      var componentObject = {};
      comp.preventUpdate = true;
      sfBlazor.updateOldProperties(comp, options);
      var dotnetObj = {
        dotnetInstance: comp._dotnetInstance
      };
      componentObject = sfBlazor.getCompObject(comp, options, dotnetObj, namespace);
      comp.setProperties(componentObject);
      comp.dataBind();
      comp.preventUpdate = false;
    } catch (e) {
      window.sfBlazor.throwError(e, comp);
    }
  },
  getCompObject: function getCompObject(comp, options, dotnetObj, namespace) {
    var compObject = sfBlazor.getModelObject(comp, options, dotnetObj, false);
    if (!compObject) {
      return;
    }
    var modelKeys = Object.keys(compObject);
    for (var i = 0; i < modelKeys.length; i++) {
      var key = modelKeys[i];
      var modelValue = comp[key];
      var newValue = compObject[key];
      var isParentArray = modelValue && modelValue.isComplexArray;
      var currentIndex = newValue && _typeof(newValue) === 'object' && Object.keys(newValue)[0];
      if (!(modelValue instanceof sf.base.ChildProperty) && !isParentArray || isNaN(currentIndex)) {
        continue;
      }
      var childValue;
      var childModel = newValue[currentIndex];
      if (!Array.isArray(newValue) && childModel && childModel.isNewComponent) {
        var childNameType = key.charAt(0).toUpperCase() + key.substr(1, key.length);
        var childName = namespace.split('.').splice(0, 2).join('.') + "." + childNameType;
        var childType = sf.base.getValue(childName, window);
        if (childType) {
          childValue = sf.base.createInstance(childType, [comp, key, childModel, isParentArray]);
        }
      }
      if (childValue) {
        compObject[key][currentIndex] = childValue;
        if (comp[key] && Array.isArray(comp[key])) {
          comp[key].filter(function (item, index) {
            if (currentIndex !== index) {
              compObject[key][index] = item;
            }
          });
        }
      }
    }
    return compObject;
  },
  getModelObject: function getModelObject(comp, props, dotnetObj, isOldProp) {
    var modelObject = {};
    var propKeys = props.match(/"(.*?)":/g);
    for (var i = 0; i < propKeys.length; i++) {
      var key = propKeys[i].replace(":", "").replace(/"/g, "");
      var convertedProperties = sfBlazor.convertInitialOptions(props);
      var value = isOldProp ? sf.base.getValue(key, comp) : sf.base.getValue(key, JSON.parse(convertedProperties, sfBlazor.parseRevive.bind(dotnetObj)));
      if (value !== undefined) {
        key = key.split(/\[(\d+)\]/).join(".").replace(/\.\./g, ".");
        var propObj = sfBlazor.getNestedObject(comp, key, value);
        sf.base.extend(modelObject, {}, propObj.model, true);
        if (!isOldProp) {
          comp["deepMerge"] = comp["deepMerge"] ? Array.from(new Set(comp.deepMerge.concat(propObj.deepMerge))) : propObj.deepMerge;
        }
      }
    }
    return modelObject;
  },
  updateOldProperties: function updateOldProperties(comp, props) {
    var oldProps = sfBlazor.getModelObject(comp, props, null, true);
    sf.base.extend(comp.oldProperties, {}, oldProps, true);
  },
  getNestedObject: function getNestedObject(actualParent, key, value, parent) {
    var model = parent ? parent : {};
    var deepMerge = [];
    if (key.indexOf(".") !== -1) {
      var splitKeys = key.split(".");
      if (deepMerge.indexOf(splitKeys[0]) === -1) {
        deepMerge.push(splitKeys[0]);
      }
      for (var i = 0; i < splitKeys.length; i++) {
        var nestedValue = i === splitKeys.length - 1 ? value : {};
        var parentObj = i === 0 ? model : parentObj[splitKeys[i - 1]];
        actualParent = i === 0 ? actualParent : actualParent[splitKeys[i - 1]];
        parentObj = sfBlazor.getNestedObject(actualParent, splitKeys[i], nestedValue, parentObj, splitKeys[i + 1]).model;
      }
    } else {
      model[key] = value;
    }
    return {
      model: model,
      deepMerge: deepMerge
    };
  },
  updateModel: function () {
    var _updateModel = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(comp) {
      var bulkChanges, updatedModel;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            _context.prev = 0;
            if (!(!comp.isRendered || comp.preventUpdate || !comp._dotnetInstance)) {
              _context.next = 3;
              break;
            }
            return _context.abrupt("return");
          case 3:
            bulkChanges = sfBlazor.copyWithoutCircularReferences([comp.bulkChanges], comp.bulkChanges);
            updatedModel = sfBlazor.getUpdatedValue(comp, bulkChanges);
            _context.next = 7;
            return comp._dotnetInstance.invokeMethodAsync('UpdateModel', updatedModel);
          case 7:
            comp.preventUpdate = false;
            _context.next = 13;
            break;
          case 10:
            _context.prev = 10;
            _context.t0 = _context["catch"](0);
            window.sfBlazor.throwError(_context.t0, comp);
          case 13:
          case "end":
            return _context.stop();
        }
      }, _callee, null, [[0, 10]]);
    }));
    function updateModel(_x) {
      return _updateModel.apply(this, arguments);
    }
    return updateModel;
  }(),
  getUpdatedValue: function getUpdatedValue(comp, changedProperties) {
    var updatedModel = {};
    var ignoreKeys = ["query", "formatter"];
    var changedPropertyKeys = Object.keys(changedProperties);
    for (var i = 0; i < changedPropertyKeys.length; i++) {
      var key = changedPropertyKeys[i];
      var modelValue = changedProperties[key];
      if (ignoreKeys.indexOf(key) !== -1) {
        continue;
      }
      if (sfBlazor.isChildProperty(comp, key)) {
        updatedModel[key] = sfBlazor.getUpdatedValue(comp, modelValue);
      } else if (_typeof(modelValue) === "object" && modelValue !== null && !(modelValue instanceof Date) && !(Array.isArray(modelValue) && modelValue[0] instanceof Date)) {
        modelValue = JSON.stringify(modelValue);
        updatedModel[key] = modelValue;
      } else {
        updatedModel[key] = modelValue;
      }
    }
    return updatedModel;
  },
  isChildProperty: function isChildProperty(comp, key) {
    return comp.properties && comp.properties[key] && comp.properties[key].parentObj !== undefined;
  },
  // start region diagram methods
  updateBlazorProperties: function updateBlazorProperties(object, component) {
    component._dotnetInstance.invokeMethodAsync('UpdateBlazorDiagramObjects', object);
  },
  updateBlazorDiagramEvents: function () {
    var _updateBlazorDiagramEvents = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(object, component) {
      var data;
      return _regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            _context2.prev = 0;
            _context2.next = 3;
            return component._dotnetInstance.invokeMethodAsync('UpdateBlazorDiagramEvents', object);
          case 3:
            data = _context2.sent;
            if (data && typeof data === "string") {
              data = JSON.parse(data);
            }
            _context2.next = 10;
            break;
          case 7:
            _context2.prev = 7;
            _context2.t0 = _context2["catch"](0);
            window.sfBlazor.throwError(_context2.t0, this);
          case 10:
            return _context2.abrupt("return", data);
          case 11:
          case "end":
            return _context2.stop();
        }
      }, _callee2, this, [[0, 7]]);
    }));
    function updateBlazorDiagramEvents(_x2, _x3) {
      return _updateBlazorDiagramEvents.apply(this, arguments);
    }
    return updateBlazorDiagramEvents;
  }(),
  callDiagramMethod: function () {
    var _callDiagramMethod = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(args, compID) {
      var comp;
      return _regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            comp = document.getElementById(compID) && document.getElementById(compID).ej2_instances[0];
            if (args.methodName === "updateDiagramObjects") {
              args.obj = JSON.parse(args.obj, sfBlazor.parseRevive);
            }
            return _context3.abrupt("return", comp.callFromServer(args));
          case 3:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    }));
    function callDiagramMethod(_x4, _x5) {
      return _callDiagramMethod.apply(this, arguments);
    }
    return callDiagramMethod;
  }(),
  // Update templates for diagram
  diagramSetTemplateInstance: function diagramSetTemplateInstance(namespace, dotnetInstance, guid) {
    if (!sfBlazor.templateDotnetInstance) {
      sfBlazor.templateDotnetInstance = [];
    }
    sfBlazor.templateDotnetInstance[guid || namespace] = dotnetInstance;
  },
  diagramSetTemplate: function diagramSetTemplate(templateId, name) {
    setTimeout(function () {
      if (templateId != null) {
        // Consider more templates in two or more diagram in a same page
        var templates = document.getElementsByClassName("blazor-template");
        for (var z = 0; z < templates.length; z++) {
          var template = templates[z];
          var innerTemplates = template.getElementsByClassName("blazor-inner-template");
          for (var i = 0; i < innerTemplates.length; i++) {
            var tempElements = document.getElementsByClassName("e-blazor-template");
            for (var k = 0; k < tempElements.length; k++) {
              var tempElement = tempElements[k];
              if (tempElement && innerTemplates[i].children.length) {
                if (tempElement.children.length == 0 && k === i) {
                  tempElement.appendChild(innerTemplates[i].children[0].cloneNode(true));
                }
              } else if (tempElement) {
                tempElement.innerHTML = innerTemplates[i].innerHTML;
              }
            }
          }
          if (window.sfBlazor.tempCallBacks.length) {
            for (var p = 0; p < window.sfBlazor.tempCallBacks.length; p++) {
              if (window.sfBlazor.tempCallBacks[p].Id == templateId) {
                window.sfBlazor.tempCallBacks[p].Promise(window.sfBlazor.tempCallBacks[p].Id);
                window.sfBlazor.tempCallBacks.splice(p, 1);
              }
            }
          }
        }
      }
    }, 100);
  },
  // end region diagram methods

  updateTemplate: function updateTemplate(name, templateData, templateId, comp, promise) {
    if (comp === undefined) {
      comp = {};
    }
    if (promise) {
      window.sfBlazor.tempCallBacks.push({
        Id: templateId,
        Promise: promise
      });
    }
    var cloneTemplateData = [];
    var blazIds = [];
    var innerTemplates = [];
    if (!sf.base.isNullOrUndefined(templateData) && templateData.length && !sf.base.isNullOrUndefined(templateData[0].BlazId)) {
      for (var i = 0; i < templateData.length; i++) {
        blazIds.push(templateData[i].BlazId);
        innerTemplates.push(templateData[i].BlazorTemplateId);
      }
    } else if (!sf.base.isNullOrUndefined(templateData)) {
      for (var i = 0; i < templateData.length; i++) {
        innerTemplates.push(templateData[i].BlazorTemplateId);
        // var innerTemplate = document.getElementById(innerTemplates[i]);
        cloneTemplateData.push(JSON.parse(window.sfBlazor.cleanStringify(templateData[i])));
        delete cloneTemplateData[i].BlazorTemplateId;
      }
    }
    var intervalId = setInterval(function () {
      var templateInstance = comp.templateDotnetInstance ? comp.templateDotnetInstance[name] || window.sfBlazor.templateDotnetInstance[comp.guid || name] : window.sfBlazor.templateDotnetInstance ? window.sfBlazor.templateDotnetInstance[comp.guid || name] : null;
      if (!templateInstance) {
        if (comp.templateDotnetInstance && !window.sfBlazor.templateDotnetInstance[comp.guid || name]) {
          return;
        } else if (comp.parentObj && comp.parentObj.templateDotnetInstance && comp.parentObj.templateDotnetInstance[name]) {
          templateInstance = comp.parentObj.templateDotnetInstance[name];
        } else {
          return;
        }
      }
      if (templateInstance) {
        templateInstance.invokeMethodAsync("UpdateTemplate", name, JSON.stringify(cloneTemplateData), templateId, innerTemplates, blazIds);
        clearInterval(intervalId);
      }
    }, 10);
  },
  setTemplateInstance: function setTemplateInstance(namespace, dotnetInstance, guid) {
    if (!sfBlazor.templateDotnetInstance) {
      sfBlazor.templateDotnetInstance = [];
    }
    sfBlazor.templateDotnetInstance[guid || namespace] = dotnetInstance;
  },
  setTemplate: function setTemplate(templateId, name) {
    setTimeout(function () {
      if (templateId != null) {
        var template = document.getElementById(templateId);
        var innerTemplates = template.getElementsByClassName("blazor-inner-template");
        for (var i = 0; i < innerTemplates.length; i++) {
          var tempId = innerTemplates[i].getAttribute("data-templateid");
          var tempElement = document.getElementById(tempId);
          if (tempElement && innerTemplates[i].childNodes) {
            var length = innerTemplates[i].childNodes.length;
            for (var j = 0; j < length; j++) {
              tempElement.appendChild(innerTemplates[i].childNodes[0]);
            }
          } else if (tempElement) {
            tempElement.innerHTML = innerTemplates[i].innerHTML;
          }
        }
        if (window.sfBlazor.tempCallBacks.length) {
          for (var p = 0; p < window.sfBlazor.tempCallBacks.length; p++) {
            if (window.sfBlazor.tempCallBacks[p].Id == templateId) {
              window.sfBlazor.tempCallBacks[p].Promise(window.sfBlazor.tempCallBacks[p].Id);
              window.sfBlazor.tempCallBacks.splice(p, 1);
            }
          }
        }
      }
    }, 100);
  },
  invokeMethod: function () {
    var _invokeMethod = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(elementId, methodName, moduleName, args, element) {
      var returnValue, comp;
      return _regeneratorRuntime().wrap(function _callee4$(_context4) {
        while (1) switch (_context4.prev = _context4.next) {
          case 0:
            _context4.prev = 0;
            returnValue = null;
            args = JSON.parse(args, sfBlazor.parseRevive);
            comp = document.getElementById(elementId) && document.getElementById(elementId).ej2_instances && document.getElementById(elementId).ej2_instances[0];
            if (methodName === "destroy" && comp) {
              comp._dotnetInstance = null;
            }
            if (element) {
              args.push(element);
            }
            if (!comp) {
              _context4.next = 23;
              break;
            }
            if (!(moduleName === null)) {
              _context4.next = 11;
              break;
            }
            returnValue = comp[methodName].apply(comp, args);
            _context4.next = 17;
            break;
          case 11:
            comp = sfBlazor.getDocEditor(comp, moduleName);
            comp = window.sfBlazor.getChildModule(comp, moduleName);
            returnValue = comp[methodName].apply(comp, args);
            _context4.next = 16;
            return sfBlazor.promiseHandler(returnValue);
          case 16:
            returnValue = _context4.sent;
          case 17:
            if (returnValue && _typeof(returnValue) === "object" && !(returnValue instanceof Promise)) {
              returnValue = sfBlazor.cleanStringify(returnValue);
            }
            if (!(comp.getModuleName() == 'PdfViewer' && methodName == 'saveAsBlob' && returnValue instanceof Promise)) {
              _context4.next = 22;
              break;
            }
            _context4.next = 21;
            return sfBlazor.promiseHandler(returnValue);
          case 21:
            returnValue = _context4.sent;
          case 22:
            return _context4.abrupt("return", returnValue);
          case 23:
            _context4.next = 28;
            break;
          case 25:
            _context4.prev = 25;
            _context4.t0 = _context4["catch"](0);
            return _context4.abrupt("return", window.sfBlazor.throwError(_context4.t0, comp));
          case 28:
          case "end":
            return _context4.stop();
        }
      }, _callee4, null, [[0, 25]]);
    }));
    function invokeMethod(_x6, _x7, _x8, _x9, _x10) {
      return _invokeMethod.apply(this, arguments);
    }
    return invokeMethod;
  }(),
  promiseHandler: function () {
    var _promiseHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(returnValue) {
      return _regeneratorRuntime().wrap(function _callee6$(_context6) {
        while (1) switch (_context6.prev = _context6.next) {
          case 0:
            if (!(returnValue instanceof Promise)) {
              _context6.next = 3;
              break;
            }
            _context6.next = 3;
            return returnValue.then( /*#__PURE__*/function () {
              var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(data) {
                return _regeneratorRuntime().wrap(function _callee5$(_context5) {
                  while (1) switch (_context5.prev = _context5.next) {
                    case 0:
                      if (!(data instanceof Blob)) {
                        _context5.next = 5;
                        break;
                      }
                      _context5.next = 3;
                      return window.sfBlazor.docEditFileReader(data).then(function (dataUrl) {
                        returnValue = JSON.stringify({
                          "data": dataUrl.substr(dataUrl.indexOf(',') + 1)
                        });
                      });
                    case 3:
                      _context5.next = 6;
                      break;
                    case 5:
                      returnValue = data;
                    case 6:
                    case "end":
                      return _context5.stop();
                  }
                }, _callee5);
              }));
              return function (_x12) {
                return _ref.apply(this, arguments);
              };
            }());
          case 3:
            return _context6.abrupt("return", returnValue);
          case 4:
          case "end":
            return _context6.stop();
        }
      }, _callee6);
    }));
    function promiseHandler(_x11) {
      return _promiseHandler.apply(this, arguments);
    }
    return promiseHandler;
  }(),
  getDocEditor: function getDocEditor(comp, moduleName) {
    return comp.getModuleName() === "DocumentEditorContainer" && moduleName !== "documentEditor" ? comp.documentEditor : comp;
  },
  getChildModule: function getChildModule(comp, moduleName) {
    try {
      var path = moduleName.split(',');
      for (var i = 0; i < path.length; i++) {
        comp = comp[path[i]];
      }
      return comp;
    } catch (e) {
      window.sfBlazor.throwError(e, comp);
    }
  },
  getMethodCall: function getMethodCall(elementId, moduleName, methodName) {
    try {
      var comp = document.getElementById(elementId) && document.getElementById(elementId).ej2_instances[0];
      comp = sfBlazor.getDocEditor(comp);
      if (moduleName == null || moduleName == "null") {
        return comp[methodName];
      } else {
        comp = window.sfBlazor.getChildModule(comp, moduleName);
        return comp[methodName];
      }
    } catch (e) {
      window.sfBlazor.throwError(e, comp);
    }
  },
  setMethodCall: function setMethodCall(elementId, moduleName, methodName, args) {
    try {
      var comp = document.getElementById(elementId) && document.getElementById(elementId).ej2_instances[0];
      comp = sfBlazor.getDocEditor(comp);
      comp = window.sfBlazor.getChildModule(comp, moduleName);
      comp[methodName] = args[0];
    } catch (e) {
      window.sfBlazor.throwError(e, comp);
    }
  },
  methodCall: function methodCall(elementId, moduleName, methodName, args) {
    try {
      var comp = document.getElementById(elementId) && document.getElementById(elementId).ej2_instances[0];
      comp = window.sfBlazor.getChildModule(comp, moduleName);
      comp[methodName].apply(comp, [args]);
    } catch (e) {
      window.sfBlazor.throwError(e, comp);
    }
  },
  parseRevive: function parseRevive(key, value) {
    var dateRegex = new RegExp(/(\d{4})-(\d{2})-(\d{2})T(\d{2})\:(\d{2})\:(\d{2}).*/);
    var arrayRegex = new RegExp(/^\[.*?\]$/);
    var objectRegex = new RegExp(/^\{.*?\}$/);
    if (key === "" && value && value.dataSource_custom) {
      value.dataSource_custom.key = value.dataSource.key;
      value.dataSource = value.dataSource_custom;
    }
    if (value && typeof value === "string" && (value.indexOf("sf.data.Query()") !== -1 || key === "formatter")) {
      try {
        return eval(value);
      } catch (e) {
        var funValue = sfBlazor.getEvaluatedFunc(value);
        return funValue;
      }
    } else if (sfBlazor.isDataSourceProperty(key)) {
      if (value === null) return;
      value = typeof value === "string" ? JSON.parse(value) : value;
      if (!value.adaptor || value instanceof sf.data.DataManager) {
        return value;
      }
      var isOffline = value.offline;
      value.offline = false;
      value.adaptor = sfBlazor.getAdaptor(value.adaptor);
      var dataManager = new sf.data.DataManager(value);
      dataManager["offline"] = isOffline;
      if (this.dotnetInstance) {
        dataManager["dotnetInstance"] = this.dotnetInstance;
        dataManager["key"] = value.key;
        if (dataManager.adaptor instanceof BlazorAdaptor) {
          dataManager["adaptorName"] = value["adaptorName"];
          dataManager.dataSource.offline = false;
        }
      }
      if (this[value.guid] || this.templateRefs && this.templateRefs[value.guid]) {
        dataManager["baseAdaptorInstance"] = this[value.guid] || this.templateRefs[value.guid];
        dataManager["adaptorName"] = "CustomAdaptor";
      }
      return dataManager;
    } else if (typeof value === "string" && dateRegex.test(value)) {
      if (!arrayRegex.test(value)) {
        return !isNaN(Date.parse(value)) ? new Date(value) : value;
      } else {
        var values = JSON.parse(value);
        var val = [];
        for (i = 0; i < values.length; i++) {
          val.push(new Date(values[i]));
        }
        return val;
      }
    } else if (typeof value === "string" && (arrayRegex.test(value) || objectRegex.test(value)) && sfBlazor.isJson(value)) {
      return JSON.parse(value);
    }
    return value;
  },
  getEvaluatedFunc: function getEvaluatedFunc(args) {
    var reg = new RegExp(/\(+[^\)]+\)+/g);
    var spltData = args.split('new sf.data.Query().')[1];
    var rteFormatOptions = args.trim().split('new sf.richtexteditor.MarkdownFormatter')[1];
    if (spltData) {
      var splt = spltData.split(reg)[0];
      var match = spltData.match(reg)[0];
      var regx = new RegExp(/(\([a-z])+[^\)]+\)+/g);
      var inData = args.match(regx);
      if (inData !== null) {
        var inData1 = inData[0];
        var mtchinData = inData1.match(/\{+[^\)]+\}/g)[0];
        var spltinData = inData1.split(/\{+[^\)]+\}/g)[0];
      }
      if (match.indexOf('sf') !== -1) {
        var matchData = spltinData.match(/[^(]+/g)[0];
        var fData = matchData.split('.');
        var finalDatas = new sf.data.Query()[splt](sf[fData[1]][fData[2]][fData[3]](JSON.parse(mtchinData)));
      } else if (spltData.split('.').length > 1) {
        var reg = new RegExp(/([^\"]([A-Z]|[a-z])+[\"\]])/g);
        if (spltData.match(reg) !== null) {
          var regx = new RegExp(/([^\"]([A-Z]|[a-z])+[\"\]])|[0-9]/g);
          var matchg = spltData.match(regx);
          var spltDt = spltData.split('.');
          var chck = [];
          for (var i = 0; i < spltDt.length; i++) {
            var d = spltDt[i].match(/([A-z])+/g)[0];
            chck.push(d);
          }
          var finalDatas = new sf.data.Query()[chck[0]]()[chck[1]](matchg[0].slice(0, -1))[chck[2]](Number(matchg[1]));
        } else {
          var regh = new RegExp(/([^\']+([A-Z]|[a-z])+[\'\)])|[0-9]/g);
          var matchg = spltData.match(regh);
          var spltDt = spltData.split('.');
          var chck = [];
          for (var i = 0; i < spltDt.length; i++) {
            var d = spltDt[i].match(/([A-z])+/g)[0];
            chck.push(d);
          }
          var finalDatas = new sf.data.Query()[chck[0]](matchg[0].slice(0, -1))[chck[1]](matchg[1].slice(0, -1))[chck[2]](Number(matchg[2]));
        }
      } else {
        var _sf$data$Query;
        var matchData = match.match(/([A-z]+|[0-9]+)+/g);
        var finalDatas = (_sf$data$Query = new sf.data.Query())[splt].apply(_sf$data$Query, _toConsumableArray(matchData));
      }
    } else if (rteFormatOptions) {
      var trimVal = rteFormatOptions.trim();
      var optionsString = trimVal.substring(1, trimVal.length - 1).trim();
      if (optionsString.length > 0) {
        var jsonString = optionsString.replace(/'/g, "\"");
        var options = JSON.parse(jsonString);
        var finalDatas = new sf.richtexteditor.MarkdownFormatter(options);
      } else {
        var finalDatas = new sf.richtexteditor.MarkdownFormatter({});
      }
    } else {
      var finalDatas = new sf.data.Query();
    }
    return finalDatas;
  },
  triggerEJEvents: function () {
    var _triggerEJEvents = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(arg) {
      var data;
      return _regeneratorRuntime().wrap(function _callee7$(_context7) {
        while (1) switch (_context7.prev = _context7.next) {
          case 0:
            _context7.prev = 0;
            if (!arg) {
              _context7.next = 8;
              break;
            }
            arg["elementID"] = this["elementID"];
            _context7.next = 5;
            return this.dotnet.invokeMethodAsync("Trigger", this.eventName, window.sfBlazor.cleanStringify(arg));
          case 5:
            data = _context7.sent;
            _context7.next = 11;
            break;
          case 8:
            _context7.next = 10;
            return this.dotnet.invokeMethodAsync("Trigger", this.eventName, '');
          case 10:
            data = _context7.sent;
          case 11:
            _context7.next = 16;
            break;
          case 13:
            _context7.prev = 13;
            _context7.t0 = _context7["catch"](0);
            window.sfBlazor.throwError(_context7.t0, this);
          case 16:
            return _context7.abrupt("return", data);
          case 17:
          case "end":
            return _context7.stop();
        }
      }, _callee7, this, [[0, 13]]);
    }));
    function triggerEJEvents(_x13) {
      return _triggerEJEvents.apply(this, arguments);
    }
    return triggerEJEvents;
  }(),
  copyWithoutCircularReferences: function copyWithoutCircularReferences(references, object) {
    try {
      var isArray = object && Array.isArray(object);
      var cleanObject = isArray ? [] : {};
      var keys = isArray ? object : object instanceof Node ? [object] : sfBlazor.getObjectKeys(object);
      keys.forEach( /*#__PURE__*/function () {
        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(key) {
          var childObject, value, domObject, i, arrValues, ij, eventObj, propKey, eventValue;
          return _regeneratorRuntime().wrap(function _callee8$(_context8) {
            while (1) switch (_context8.prev = _context8.next) {
              case 0:
                childObject = object.hasOwnProperty('parentObj') && object.properties ? object.properties : object;
                value = isArray ? key : childObject[key];
                if (isArray && (typeof value === "string" || typeof value === "number")) {
                  cleanObject.push(value);
                } else if (value instanceof Node) {
                  domObject = sfBlazor.getDomObject(key, value, object);
                  if (isArray) {
                    cleanObject.push(domObject);
                  } else {
                    cleanObject[key] = domObject;
                  }
                } else if (value && Array.isArray(value)) {
                  if (value.length > 0) {
                    for (i = 0; i < value.length; i++) {
                      if (!cleanObject[key]) cleanObject[key] = [];
                      if (key !== 'ej2_instances') {
                        if (value[i] && _typeof(value[i]) === 'object' && !(value[i] instanceof Date)) {
                          cleanObject[key].push(window.sfBlazor.copyWithoutCircularReferences(references, value[i]));
                        } else {
                          cleanObject[key].push(value[i]);
                        }
                      }
                    }
                  } else {
                    cleanObject[key] = [];
                  }
                } else if (value && window.sfBlazor.isJson(value) && new RegExp(/^\[.*?\]$/).test(value)) {
                  arrValues = JSON.parse(value);
                  if (!cleanObject[key]) cleanObject[key] = [];
                  for (ij = 0; ij < arrValues.length; ij++) {
                    cleanObject[key].push(arrValues[ij]);
                  }
                } else if (value && value instanceof Event) {
                  eventObj = {};
                  for (propKey in value) {
                    eventValue = value[propKey];
                    if (!(eventValue instanceof Node || eventValue instanceof Window) && propKey !== "path") {
                      eventObj[propKey] = eventValue;
                    }
                  }
                  cleanObject[key] = eventObj;
                } else if (value && _typeof(value) === 'object') {
                  if (value instanceof File) {
                    cleanObject[key] = value;
                  } else if (references.indexOf(value) < 0) {
                    references.push(value);
                    if (value && value instanceof Date) {
                      cleanObject[key] = value;
                    } else if (sfBlazor.isJsonStringfy(value) && !sfBlazor.doesHaveFileObject(value)) {
                      isArray ? cleanObject.push(value) : cleanObject[key] = value;
                    } else {
                      if (!sfBlazor.isIgnoreProperty(key.toString())) {
                        cleanObject[key] = window.sfBlazor.copyWithoutCircularReferences(references, value);
                      } else {
                        cleanObject[key] = '###_Circular_###';
                      }
                    }
                    references.pop();
                  } else {
                    cleanObject[key] = '###_Circular_###';
                  }
                } else if (typeof value !== 'function') {
                  cleanObject[key] = value;
                }
              case 3:
              case "end":
                return _context8.stop();
            }
          }, _callee8);
        }));
        return function (_x14) {
          return _ref2.apply(this, arguments);
        };
      }());
      return cleanObject;
    } catch (e) {
      console.log(e);
      return {};
    }
  },
  doesHaveFileObject: function doesHaveFileObject(obj) {
    var keys = Object.keys(obj);
    for (var m = 0; m < keys.length; m++) {
      if (obj[keys[m]] instanceof File) {
        return true;
      }
    }
    return false;
  },
  isJsonStringfy: function isJsonStringfy(args) {
    try {
      return JSON.stringify(args) && true;
    } catch (e) {
      return false;
    }
  },
  getObjectKeys: function getObjectKeys(obj) {
    var objectKeys = [];
    if (obj instanceof Event) {
      objectKeys = Object.keys(obj);
    } else {
      for (var key in obj) {
        objectKeys.push(key);
      }
    }
    return objectKeys;
  },
  isIgnoreProperty: function isIgnoreProperty(key) {
    return ['parentObj', 'controlParent', 'modelObserver', 'localObserver', 'moduleLoader'].indexOf(key) >= 0;
  },
  isJson: function isJson(value) {
    try {
      return JSON.parse(value);
    } catch (e) {
      return false;
    }
  },
  cleanStringify: function cleanStringify(object) {
    try {
      if (object && _typeof(object) === 'object') {
        object = window.sfBlazor.copyWithoutCircularReferences([object], object);
      }
      return JSON.stringify(object);
    } catch (e) {
      console.log(e);
      return '';
    }
  },
  bindEvents: function bindEvents(modelObj, events, dotnet, namespace) {
    if (events) {
      for (var i = 0; i < events.length; i = i + 1) {
        var curEvent = events[i];
        var scope = {
          dotnet: dotnet,
          eventName: curEvent,
          elementID: modelObj["elementID"],
          namespace: namespace
        };
        if (curEvent.indexOf('.') > 0) {
          var items = curEvent.split('.');
          var currentObject = modelObj;
          for (var j = 0; j < items.length - 1; j++) {
            var arrayIndex = new RegExp(/\[.*?\]/);
            if (arrayIndex.test(items[j])) {
              var index = items[j].match(arrayIndex)[0];
              var prop = items[j].replace(index, "");
              index = index.match(/\[(.*?)\]/)[1];
              j += 1;
              currentObject = currentObject[prop][index];
            } else {
              currentObject = currentObject[items[j]];
            }
          }
          currentObject[items[items.length - 1]] = window.sfBlazor.triggerEJEvents.bind(scope);
        } else {
          modelObj[curEvent] = window.sfBlazor.triggerEJEvents.bind(scope);
        }
      }
    }
  },
  tryParseInt: function tryParseInt(val) {
    var numRegex = /^-?\d+\.?\d*$/;
    return numRegex.test(val);
  },
  throwError: function throwError(e, comp) {
    // comp._dotnetInstance.invokeMethodAsync("ErrorHandling", e.message, e.stack);
    console.error(e.message + "\n" + e.stack);
  },
  getAdaptor: function getAdaptor(adaptor) {
    var adaptorObject;
    switch (adaptor) {
      case "ODataAdaptor":
        adaptorObject = new sf.data.ODataAdaptor();
        break;
      case "ODataV4Adaptor":
        adaptorObject = new sf.data.ODataV4Adaptor();
        break;
      case "UrlAdaptor":
        adaptorObject = new sf.data.UrlAdaptor();
        break;
      case "WebApiAdaptor":
        adaptorObject = new sf.data.WebApiAdaptor();
        break;
      case "JsonAdaptor":
        adaptorObject = new sf.data.JsonAdaptor();
        break;
      case "RemoteSaveAdaptor":
        adaptorObject = new sf.data.RemoteSaveAdaptor();
        break;
      case "CustomAdaptor":
        sfBlazor.initCustomAdaptor();
        adaptorObject = new window.CustomAdaptor();
        break;
      default:
        adaptorObject = new window.BlazorAdaptor();
        break;
    }
    return adaptorObject;
  },
  spinnerUtility: function spinnerUtility(action, options, target, type) {
    try {
      sf.popups.Spinner(action, options, target, type);
    } catch (e) {
      return window.sfBlazor.throwError(e);
    }
  },
  initBlazorAdaptor: function initBlazorAdaptor() {
    var BaseClass = sf.data ? sf.data.UrlAdaptor : function () {};
    window.BlazorAdaptor = /*#__PURE__*/function (_BaseClass) {
      _inherits(BlazorAdaptor, _BaseClass);
      function BlazorAdaptor() {
        _classCallCheck(this, BlazorAdaptor);
        return _callSuper(this, BlazorAdaptor, arguments);
      }
      _createClass(BlazorAdaptor, [{
        key: "processQuery",
        value: function processQuery(dm, query, hierarchyFilters) {
          var request = sf.data.UrlAdaptor.prototype.processQuery.apply(this, arguments);
          request.dotnetInstance = dm.dotnetInstance;
          request.key = dm.key;
          return request;
        }
      }, {
        key: "makeRequest",
        value: function makeRequest(request, deffered, args, query) {
          var fnFail = function fnFail(e) {
            args.error = e;
            deffered.reject(args);
          };
          var process = function process(data, aggregates, virtualSelectRecords) {
            var args = {};
            args.count = data.count ? parseInt(data.count.toString(), 10) : 0;
            args.result = data.result ? data.result : data;
            args.aggregates = data.aggregates;
            args.virtualSelectRecords = virtualSelectRecords;
            deffered.resolve(args);
          };
          var dm = JSON.parse(request.data);
          dm.serverSideGroup = false;
          var proxy = this;
          request.dotnetInstance.invokeMethodAsync("DataProcess", JSON.stringify(dm), request.key).then(function (data) {
            data = sf.data.DataUtil.parse.parseJson(data);
            if (data === null) {
              data = [];
            } else if (data.result === null) {
              data.result = [];
            }
            var pResult = proxy.processResponse(data, {}, query, null, request);
            process(pResult);
            return;
          })["catch"](function (e) {
            fnFail(e);
          });
        }
      }, {
        key: "insert",
        value: function insert(dm, data, tableName, query, position) {
          var args = {};
          args.dm = dm;
          args.data = data;
          args.tableName = tableName;
          args.query = query;
          args.requestType = "insert";
          args.position = position;
          return args;
        }
      }, {
        key: "remove",
        value: function remove(dm, keyField, value, tableName, query) {
          var args = {};
          args.dm = dm;
          args.data = value;
          args.keyField = keyField;
          args.tableName = tableName;
          args.query = query;
          args.requestType = "remove";
          return args;
        }
      }, {
        key: "update",
        value: function update(dm, keyField, value, tableName, query) {
          var args = {};
          args.dm = dm;
          args.data = value;
          args.keyField = keyField;
          args.tableName = tableName;
          args.query = query;
          args.requestType = "update";
          return args;
        }
      }, {
        key: "batchRequest",
        value: function batchRequest(dm, changes, e, query, original) {
          var args = {};
          args.dm = dm;
          args.changed = changes.changedRecords;
          args.added = changes.addedRecords;
          args.deleted = changes.deletedRecords;
          args.requestType = "batchsave";
          args.keyField = e.key;
          args.dropIndex = !sf.base.isNullOrUndefined(query) ? query.dragDropDestinationIndex : null;
          args.query = query;
          return args;
        }
      }, {
        key: "doAjaxRequest",
        value: function doAjaxRequest(args) {
          var defer = new sf.data.Deferred();
          var dm = args.dm;
          var query = sf.data.UrlAdaptor.prototype.processQuery.apply(this, [dm, args.query, false]);
          var fnFail = function fnFail(e) {
            args.error = e;
            defer.reject(args);
          };
          if (args.requestType === "insert") {
            dm.dotnetInstance.invokeMethodAsync('Insert', JSON.stringify(args.data), dm.key, args.position ? args.position : 0, query.data).then(function (data) {
              defer.resolve(data);
            })["catch"](function (e) {
              fnFail(e);
            });
          }
          if (args.requestType === "remove") {
            var dataKey = typeof args.data == "string" ? args.data : JSON.stringify(args.data);
            if (args.data instanceof Date) {
              dataKey = args.data.toJSON();
            }
            dm.dotnetInstance.invokeMethodAsync('Remove', dataKey, args.keyField, dm.key, query.data).then(function (data) {
              defer.resolve();
            })["catch"](function (e) {
              fnFail(e);
            });
          }
          if (args.requestType === "update") {
            dm.dotnetInstance.invokeMethodAsync('Update', JSON.stringify(args.data), args.keyField, dm.key, query.data).then(function (data) {
              var record = sf.data.DataUtil.parse.parseJson(data);
              defer.resolve(record);
            })["catch"](function (e) {
              fnFail(e);
            });
          }
          if (args.requestType === "batchsave") {
            dm.dotnetInstance.invokeMethodAsync('BatchUpdate', JSON.stringify(args.changed), JSON.stringify(args.added), JSON.stringify(args.deleted), args.keyField, dm.key, args.dropIndex, query.data).then(function (data) {
              var record = sf.data.DataUtil.parse.parseJson(data);
              defer.resolve(record);
            })["catch"](function (e) {
              fnFail(e);
            });
          }
          return defer.promise;
        }
      }]);
      return BlazorAdaptor;
    }(BaseClass);
  },
  initCustomAdaptor: function initCustomAdaptor() {
    window.CustomAdaptor = /*#__PURE__*/function (_window$BlazorAdaptor) {
      _inherits(CustomAdaptor, _window$BlazorAdaptor);
      function CustomAdaptor() {
        _classCallCheck(this, CustomAdaptor);
        return _callSuper(this, CustomAdaptor, arguments);
      }
      _createClass(CustomAdaptor, [{
        key: "processQuery",
        value: function processQuery(dm, query, hierarchyFilters) {
          var request = sf.data.UrlAdaptor.prototype.processQuery.apply(this, arguments);
          request.dotnetInstance = dm.dotnetInstance;
          request.baseAdaptorInstance = dm.baseAdaptorInstance;
          request.key = dm.key;
          return request;
        }
      }, {
        key: "makeRequest",
        value: function makeRequest(request, deffered, args, query) {
          var fnFail = function fnFail(e) {
            args.error = e;
            deffered.reject(args);
          };
          var process = function process(data, aggregates, virtualSelectRecords) {
            var args = {};
            args.count = data.count ? parseInt(data.count.toString(), 10) : 0;
            args.result = data.result ? data.result : data;
            args.aggregates = aggregates;
            args.virtualSelectRecords = virtualSelectRecords;
            deffered.resolve(args);
          };
          var dm = JSON.parse(request.data);
          dm.serverSideGroup = false;
          var proxy = this;
          request["baseAdaptorInstance"].invokeMethodAsync("BaseRead", JSON.stringify(dm), request.key).then(function (data) {
            data = sf.data.DataUtil.parse.parseJson(data);
            if (data.result === null) {
              data.result = [];
            }
            var pResult = proxy.processResponse(data, {}, query, null, request);
            process(pResult);
            return;
          })["catch"](function (e) {
            fnFail(e);
          });
        }
      }, {
        key: "doAjaxRequest",
        value: function doAjaxRequest(args) {
          var defer = new sf.data.Deferred();
          var dm = args.dm;
          var fnFail = function fnFail(e) {
            args.error = e;
            defer.reject(args);
          };
          if (args.requestType === "insert") {
            dm.baseAdaptorInstance.invokeMethodAsync('BaseInsert', JSON.stringify(args.data), dm.key).then(function (data) {
              data = sf.data.DataUtil.parse.parseJson(data);
              defer.resolve(data);
            })["catch"](function (e) {
              fnFail(e);
            });
          }
          if (args.requestType === "remove") {
            dm.baseAdaptorInstance.invokeMethodAsync('BaseRemove', JSON.stringify(args.data), args.keyField, dm.key).then(function (data) {
              data = sf.data.DataUtil.parse.parseJson(data);
              defer.resolve(data);
            })["catch"](function (e) {
              fnFail(e);
            });
          }
          if (args.requestType === "update") {
            dm.baseAdaptorInstance.invokeMethodAsync('BaseUpdate', JSON.stringify(args.data), args.keyField, dm.key).then(function (data) {
              data = sf.data.DataUtil.parse.parseJson(data);
              defer.resolve(data);
            })["catch"](function (e) {
              fnFail(e);
            });
          }
          if (args.requestType === "batchsave") {
            dm.baseAdaptorInstance.invokeMethodAsync('BaseBatchUpdate', JSON.stringify(args.changed), JSON.stringify(args.added), JSON.stringify(args.deleted), args.keyField, dm.key, args.dropIndex).then(function (data) {
              data = sf.data.DataUtil.parse.parseJson(data);
              defer.resolve(data);
            })["catch"](function (e) {
              fnFail(e);
            });
          }
          return defer.promise;
        }
      }]);
      return CustomAdaptor;
    }(window.BlazorAdaptor);
  },
  requestHandler: function requestHandler(jsonObject) {
    try {
      var currentElement = document.getElementById(jsonObject.elementId);
      if (currentElement != null) {
        if (currentElement.ej2_instances.length > 0) {
          var comp = currentElement.ej2_instances[0];
          comp._dotnetInstance.invokeMethodAsync('GetPDFInfo', jsonObject);
        } else {
          if (jsonObject.action == 'Unload') {
            DotNet.invokeMethodAsync('Syncfusion.Blazor.PdfViewerServer', 'Unload', jsonObject);
          }
        }
      }
    } catch (e) {
      window.sfBlazor.throwError(e, this);
    }
  },
  ioSuccessHandler: function ioSuccessHandler(id, namespace, action, jsonResult) {
    try {
      var element = document.getElementById(id);
      if (element) {
        var comp = element.ej2_instances[0];
        var result = {
          data: jsonResult
        };
        if (namespace == 'sf.pdfviewer.PdfViewer') {
          switch (action) {
            case 'Load':
              comp.viewerBase.loadRequestHandler.successHandler(result);
              break;
            case "RenderPdfPages":
              comp.viewerBase.pageRequestHandler.successHandler(result);
              break;
            case "VirtualLoad":
              comp.viewerBase.virtualLoadRequestHandler.successHandler(result);
              break;
            case "Download":
              comp.viewerBase.dowonloadRequestHandler.successHandler(result);
              break;
            case "PrintImages":
              comp.printModule.printRequestHandler.successHandler(result);
              break;
            case "Search":
              comp.textSearchModule.searchRequestHandler.successHandler(result);
              break;
            case "Bookmarks":
              comp.bookmarkViewModule.bookmarkRequestHandler.successHandler(result);
              break;
            case "RenderThumbnailImages":
              comp.thumbnailViewModule.thumbnailRequestHandler.successHandler(result);
              break;
            case "RenderAnnotationComments":
              comp.annotationModule.stickyNotesAnnotationModule.commentsRequestHandler.successHandler(result);
              break;
            case "RenderPdfTexts":
              comp.textSearchModule.searchRequestHandler.successHandler(result);
              break;
            case "ImportAnnotations":
              comp.viewerBase.importAnnotationRequestHandler.successHandler(result);
              break;
            case "ExportAnnotations":
              comp.viewerBase.exportAnnotationRequestHandler.successHandler(result);
              break;
            case "ExportFormFields":
              comp.viewerBase.exportFormFieldsRequestHandler.successHandler(result);
              break;
            case "ImportFormFields":
              comp.viewerBase.importFormFieldsRequestHandler.successHandler(result);
              break;
          }
        }
        if (namespace == 'sf.documenteditor.DocumentEditorContainer' || namespace == 'sf.documenteditor.DocumentEditor') {
          var docEditorComp = sfBlazor.getDocEditor(comp);
          switch (action) {
            case 'SystemClipboard':
              result.data = JSON.parse(result.data);
              docEditorComp.editor.pasteRequestHandler.successHandler(result);
              break;
            case 'Import':
              comp.toolbarModule.importHandler.successHandler(result);
              break;
            case 'EnforceProtection':
              docEditorComp.editor.enforceProtectionInternal(result);
              break;
            case 'UnprotectDocument':
              docEditorComp.editor.onUnProtectionSuccess(result);
              break;
          }
        }
      }
    } catch (e) {
      window.sfBlazor.throwError(e, this);
    }
  },
  docEditRequestHandler: function () {
    var _docEditRequestHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(jsonObject) {
      var file, dataUrl, fileInfo;
      return _regeneratorRuntime().wrap(function _callee9$(_context9) {
        while (1) switch (_context9.prev = _context9.next) {
          case 0:
            _context9.prev = 0;
            if (!(jsonObject instanceof FormData)) {
              _context9.next = 10;
              break;
            }
            file = jsonObject.get('files');
            dataUrl = "";
            _context9.next = 6;
            return window.sfBlazor.docEditFileReader(file).then(function (data) {
              dataUrl = data;
            });
          case 6:
            fileInfo = {
              "documentData": dataUrl.substr(dataUrl.indexOf(',') + 1),
              "fileName": file.name,
              "action": 'Import'
            };
            this._dotnetInstance.invokeMethodAsync('GetDocumentInfo', fileInfo);
            _context9.next = 12;
            break;
          case 10:
            if (jsonObject.hasOwnProperty('saltBase64')) {
              jsonObject['action'] = jsonObject.saltBase64 === '' ? 'EnforceProtection' : 'UnprotectDocument';
            } else if (jsonObject.hasOwnProperty('type') && jsonObject.hasOwnProperty('content')) {
              jsonObject['action'] = 'SystemClipboard';
            }
            this._dotnetInstance.invokeMethodAsync('GetDocumentInfo', jsonObject);
          case 12:
            _context9.next = 17;
            break;
          case 14:
            _context9.prev = 14;
            _context9.t0 = _context9["catch"](0);
            window.sfBlazor.throwError(_context9.t0, this);
          case 17:
          case "end":
            return _context9.stop();
        }
      }, _callee9, this, [[0, 14]]);
    }));
    function docEditRequestHandler(_x15) {
      return _docEditRequestHandler.apply(this, arguments);
    }
    return docEditRequestHandler;
  }(),
  docEditFileReader: function docEditFileReader(file) {
    try {
      return new Promise(function (resolve, reject) {
        var fileReader = new FileReader();
        fileReader.onload = function () {
          resolve(fileReader.result);
        };
        fileReader.readAsDataURL(file);
      });
    } catch (e) {
      window.sfBlazor.throwError(e, this);
    }
  }
};
(function () {
  sf.base.enableBlazorMode();
})();
window.sfBlazor = window.sfBlazor || {};
Object.assign(window.sfBlazor, extended);

/***/ }),

/***/ "./syncfusion-blazor.js":
/*!******************************!*\
  !*** ./syncfusion-blazor.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

var sfBlazorBase = {
  instances: [],
  getElementByXpath: function getElementByXpath(xPath) {
    return document.evaluate(xPath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
  },
  getElement: function getElement(elementID, id, xPath) {
    var dom = elementID != null && window[elementID] != null ? window[elementID][id] : null;
    return dom != null ? dom : window.sfBlazor.getElementByXpath(xPath);
  },
  getAttribute: function getAttribute(elementID, dom, xPath, propName) {
    var element = window.sfBlazor.getElement(elementID, dom, xPath);
    if (element != null) return element.getAttribute(propName);
  },
  setAttribute: function setAttribute(elementID, dom, xPath, propName, value) {
    window.sfBlazor.getElement(elementID, dom, xPath).setAttribute(propName, value);
  },
  addClass: function addClass(elementID, dom, xPath, classList) {
    sf.base.addClass([window.sfBlazor.getElement(elementID, dom, xPath)], classList);
  },
  removeClass: function removeClass(elementID, dom, xPath, classList) {
    sf.base.removeClass([window.sfBlazor.getElement(elementID, dom, xPath)], classList);
  },
  getClassList: function getClassList(elementID, dom, xPath) {
    return Array.prototype.slice.call(window.sfBlazor.getElement(elementID, dom, xPath).classList);
  },
  enableRipple: function enableRipple(isRipple) {
    sf.base.enableRipple(isRipple);
  },
  isRTL: function isRTL(isRtl) {
    if (isRtl) {
      this.enableRtl(isRtl);
    }
  },
  isDevice: function isDevice(isRtl) {
    if (isRtl) {
      this.enableRtl(isRtl);
    }
    return sf.base.Browser.isDevice;
  },
  animate: function animate(elementRef, animationSettings) {
    var animationObj = new sf.base.Animation(animationSettings);
    animationObj.animate(elementRef);
  },
  setGlobalAnimationValue: function setGlobalAnimationValue(value) {
    sf.base.setGlobalAnimation(value);
  },
  callRipple: function callRipple(elementRef, rippleSettings) {
    sf.base.rippleEffect(elementRef, rippleSettings);
  },
  createXPathFromElement: function createXPathFromElement(elm) {
    var allNodes = document.getElementsByTagName('*');
    for (var segs = []; elm && elm.nodeType === 1; elm = elm.parentNode) {
      if (elm.hasAttribute('id')) {
        var uniqueIdCount = 0;
        for (var n = 0; n < allNodes.length; n++) {
          if (allNodes[n].hasAttribute('id') && allNodes[n].id === elm.id) uniqueIdCount++;
          if (uniqueIdCount > 1) break;
        }
        ;
        if (uniqueIdCount === 1) {
          segs.unshift('id("' + elm.getAttribute('id') + '")');
          return segs.join('/');
        } else {
          segs.unshift(elm.localName.toLowerCase() + '[@id="' + elm.getAttribute('id') + '"]');
        }
      } else {
        for (var i = 1, sib = elm.previousSibling; sib; sib = sib.previousSibling) {
          if (sib.localName === elm.localName) i++;
        }
        segs.unshift(elm.localName.toLowerCase() + '[' + i + ']');
      }
    }
    return segs.length ? '/' + segs.join('/') : null;
  },
  getDomObject: function getDomObject(key, node, object) {
    var uuid = key + sf.base.getUniqueID(key);
    var domObject = {
      id: node.id,
      "class": node.className,
      xPath: window.sfBlazor.createXPathFromElement(node),
      domUUID: uuid
    };
    var elementID = object && object["elementID"];
    if (elementID) {
      window[elementID] = sf.base.isNullOrUndefined(window[elementID]) ? {} : window[elementID];
      window[elementID][uuid] = node;
      domObject["elementID"] = elementID;
    }
    return domObject;
  },
  focusButton: function focusButton(element) {
    element.focus();
  },
  // Function for store/set the component instances into window object
  setCompInstance: function setCompInstance(obj) {
    window.sfBlazor.instances[obj.dataId] = obj;
  },
  // Function for retrive/get the component instances from window object which is stored by 'setCompInstance' method
  getCompInstance: function getCompInstance(id) {
    return window.sfBlazor.instances[id];
  },
  // Function for delete/remove the component instances from window object which is stored by 'setCompInstance' method
  disposeWindowsInstance: function disposeWindowsInstance(id) {
    if (id) {
      delete window.sfBlazor.instances[id];
    }
  },
  //sf-progressbutton interop start
  setProgress: function setProgress(progressElem, contElem, spinnerElem, percent, enableProgress, isVertical) {
    spinnerElem = spinnerElem.querySelector('.e-spinner');
    return window.requestAnimationFrame(function () {
      if (enableProgress) {
        progressElem.style[isVertical ? 'height' : 'width'] = percent + '%';
      }
      contElem.parentElement.setAttribute('aria-valuenow', percent.toString());
      if (percent === 100) {
        contElem.classList.remove('e-cont-animate', 'e-animate-end');
        spinnerElem.style.width = 'auto';
        spinnerElem.style.height = 'auto';
      }
    });
  },
  setAnimation: function setAnimation(contElem, spinnerElem, effect, duration, easing, isCenter) {
    spinnerElem = spinnerElem.querySelector('.e-spinner');
    new sf.base.Animation({}).animate(contElem, {
      duration: duration,
      name: 'Progress' + effect,
      timingFunction: easing,
      begin: function begin() {
        if (isCenter) {
          spinnerElem.style.width = Math.max(spinnerElem.offsetWidth, contElem.offsetWidth) + 'px';
          spinnerElem.style.height = Math.max(spinnerElem.offsetHeight, contElem.offsetHeight) + 'px';
          contElem.classList.add('e-cont-animate');
        }
      },
      end: function end() {
        contElem.classList.add('e-animate-end');
      }
    });
  },
  cancelAnimation: function cancelAnimation(timerId) {
    window.cancelAnimationFrame(timerId);
  },
  //sf-progressbutton interop end
  //sf-spinner interop start
  getSpinnerTheme: function getSpinnerTheme(element) {
    var theme = element ? window.getComputedStyle(element, ':after').getPropertyValue('content') : 'Material';
    return theme && theme.replace(/['"]+/g, '');
  },
  //sf-spinner interop end
  //sf-chip interop start
  chipKeydownHandler: function chipKeydownHandler(element) {
    if (element) {
      element.addEventListener("keydown", function (e) {
        if (e.target && e.target.classList.contains("e-chip") && e.key == ' ') {
          e.preventDefault();
        }
      });
    }
  },
  MediaQuery: {
    initialize: function initialize(options) {
      if (options.dataId) {
        sf.base.extend(options, this, options);
        window.sfBlazor.setCompInstance(options);
        options.activeBreakpoint = "";
        options.isMediaChanged = false;
        options.initializeMediaQueries(options);
        options.updateActiveBreakpoint(options, true);
        return options.activeBreakpoint;
      }
      return null;
    },
    initializeMediaQueries: function initializeMediaQueries(mediaQueryObj) {
      for (var i = 0; i < mediaQueryObj.mediaBreakpoints.length; i++) {
        var mq = window.matchMedia(mediaQueryObj.mediaBreakpoints[i].mediaQuery);
        mediaQueryObj.mediaBreakpoints[i].mq = mq;
        sf.base.EventHandler.add(mq, 'change', mediaQueryObj.mediaQueryChangeHandler, mediaQueryObj);
      }
    },
    updateActiveBreakpoint: function updateActiveBreakpoint(mediaQueryObj, isInitialRender) {
      var isCurrentActiveMediaChanged = false;
      for (var i = 0; i < mediaQueryObj.mediaBreakpoints.length; i++) {
        if (mediaQueryObj.mediaBreakpoints[i].mq.matches) {
          if ((!mediaQueryObj.isMediaChanged || isCurrentActiveMediaChanged) && !isInitialRender) mediaQueryObj.isMediaChanged = mediaQueryObj.activeBreakpoint != mediaQueryObj.mediaBreakpoints[i].breakpoint;
          mediaQueryObj.activeBreakpoint = mediaQueryObj.mediaBreakpoints[i].breakpoint;
          break;
        } else {
          if (mediaQueryObj.activeBreakpoint == mediaQueryObj.mediaBreakpoints[i].breakpoint) {
            isCurrentActiveMediaChanged = mediaQueryObj.isMediaChanged = true;
            mediaQueryObj.activeBreakpoint = "";
          }
        }
      }
    },
    mediaQueryChangeHandler: function mediaQueryChangeHandler() {
      this.updateActiveBreakpoint(this);
      if (this.isMediaChanged) {
        this.dotNetRef.invokeMethodAsync("UpdateActiveBreakpoint", this.activeBreakpoint);
        this.isMediaChanged = false;
      }
    },
    destroyComponent: function destroyComponent() {
      for (var i = 0; i < this.mediaBreakpoints.length; i++) {
        sf.base.EventHandler.remove(this.mediaBreakpoints[i].mq, 'change', this.mediaQueryChangeHandler);
      }
    },
    destroy: function destroy(dataId) {
      if (dataId) {
        window.sfBlazor.getCompInstance(dataId).destroyComponent();
      }
    }
  },
  // Function to append the license banner alert in application body tag for Syncfusion Blazor components.
  validateBlazorLicense: function validateBlazorLicense(licenseContent, claimLicenseKeyURL, trailComp) {
    if (trailComp) {
      var LicenseBanner = sf.base.createElement('div', {
        innerHTML: "<div style=\"position: fixed;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 99999;\">\n                    <div style=\"background: #FFFFFF;\n                    height: 490px;\n                    width: 840px;\n                    font-family: Helvetica Neue, Helvetica, Arial;\n                    color: #000000;\n                    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n                    display: block;\n                    margin: 6% auto;\n                    border-radius: 20px;\">\n                        <div style=\"\n                        position: absolute;\n                        width: 838px;\n                        height: 80px;\n                        background-color: #F9F9F9;\n                        border: 1px solid #EEEEEE;\n                        border-top-left-radius: 20px;\n                        border-top-right-radius: 20px;\">\n                <img src=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=\" style=\"\n                text-align: left;\n                width: 146px;\n                position: absolute;\n                top: 24px;\n                left: 40px;\"></div>\n                <div style=\"position: relative;\n                top: 104px;\n                left: 32px;\n                font-size: 20px;\n                text-align: left;\n                font-weight: 700;\n                letter-spacing: 0.02em;\n                font-style: normal;\n                line-height: 125%;\">Claim your FREE account and get a key in less than a minute</div>\n                        <ul style=\"font-size: 15px;\n                        margin-top: 15px;\n                        font-weight: 400;\n                        color: #333333;\n                        letter-spacing: 0.01em;\n                        position: relative;\n                        left: 40px;\n                        top: 103px;\n                        line-height: 180%;\">\n                            <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                            <li><span>Access to 24x5 support by developers via the <a\n                                        href=\"https://support.syncfusion.com/create\"\n                                        style=\"text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;\">support tickets</a>, <a\n                                        href=\"https://www.syncfusion.com/forums\"\n                                        style=\"text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;\">forum</a>, <a\n                                        href=\"https://www.syncfusion.com/feedback\"\n                                        style=\"text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;\">feature & feedback page</a> and chat.</span></li>\n                            <li><span>200+ <a\n                                        href=\"https://www.syncfusion.com/succinctly-free-ebooks\"\n                                        style=\"text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;\">ebooks</a> on the latest technologies, industry trends, and research topics.</span>\n                            </li>\n                            <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a\n                                        href=\"https://www.syncfusion.com/downloads/metrostudio\"\n                                        style=\"text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;\">Metro Studio</a>.</span></li>\n                            <li><span>Free and unlimited access to Syncfusion technical <a\n                                        href=\"https://www.syncfusion.com/blogs/\"\n                                        style=\"text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;\">blogs</a> and <a\n                                        href=\"https://www.syncfusion.com/resources/techportal/whitepapers\"\n                                        style=\"text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;\">white papers.</a></span></li>\n                        </ul>\n                        <div style=\"font-size: 18px;\n                        font-weight: 700;\n                        position: relative;\n                        line-height: 125%;\n                        letter-spacing: 0.02em;\n                        top: 113px;\n                        left: 32px;\">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n                <img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K'style=\"width: 742.5px;\n                    position: relative;\n                    top: 123px;\n                    left: 32px;\"/>\n                    <a href=\"".concat(claimLicenseKeyURL, "\" style=\"float: left;\n                    border-radius: 56px;\n                    background: #0D6EFD;\n                    padding-top: 12px;\n                    width: 280px;\n                    height: 45px;\n                    text-align: center;\n                    position: relative;\n                    top: 141px;\n                    left: 270px;\n                    font-size: 17px;\n                    color: white;\n                    text-decoration: none;\n                    line-height: 125%;\n                    letter-spacing: 0.02em;\">Claim your free account</a>\n                        <div style=\"\n                        font-size: 14px;\n                        position: relative;\n                        top: 197px;\n                        left: 15px;\n                        letter-spacing: 0.02em;\n                        font-weight: 500;\n                        line-height: 125%;\">have a Syncfusion account? <a\n                href=\"https://www.syncfusion.com/account/login?ReturnUrl=/account/login\"\n                style=\"text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;\">Sign In</a></div>\n                    </div>\n                </div>")
      });
      document.body.appendChild(LicenseBanner);
    } else {
      var _LicenseBanner = sf.base.createElement('div', {
        innerHTML: "<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"\n            position: absolute;\n            left: 16px;\n            height: 24px;\"/><span>".concat(licenseContent, " <a style=\"text-decoration: none;color: #0D6EFD;font-weight: 500;\" href=\"").concat(claimLicenseKeyURL, "\">Claim your free account</a>.</span>")
      });
      _LicenseBanner.setAttribute('style', "position: fixed;\n            top: 10px;\n            left: 10px;\n            right: 10px;\n            font-size: 14px;\n            background: #EEF2FF;\n            color: #222222;\n            z-index: 999999999;\n            text-align: left;\n            border: 1px solid #EEEEEE;\n            padding: 10px 11px 10px 50px;\n            border-radius: 8px;\n            font-family: Helvetica Neue, Helvetica, Arial;");
      document.body.appendChild(_LicenseBanner);
    }
  }
};
(function () {
  sf.base.enableBlazorMode();
})();
window.sfBlazor = window.sfBlazor || {};
Object.assign(window.sfBlazor, sfBlazorBase);

/***/ })

/******/ });